var $jscomp = $jscomp || {};
$jscomp.scope = {};
$jscomp.ASSUME_ES5 = !1;
$jscomp.ASSUME_NO_NATIVE_MAP = !1;
$jscomp.ASSUME_NO_NATIVE_SET = !1;
$jscomp.defineProperty =
  $jscomp.ASSUME_ES5 || "function" == typeof Object.defineProperties
    ? Object.defineProperty
    : function (F, Ia, v) {
        F != Array.prototype && F != Object.prototype && (F[Ia] = v.value);
      };
$jscomp.getGlobal = function (F) {
  return "undefined" != typeof window && window === F
    ? F
    : "undefined" != typeof global && null != global
    ? global
    : F;
};
$jscomp.global = $jscomp.getGlobal(this);
$jscomp.SYMBOL_PREFIX = "jscomp_symbol_";
$jscomp.initSymbol = function () {
  $jscomp.initSymbol = function () {};
  $jscomp.global.Symbol || ($jscomp.global.Symbol = $jscomp.Symbol);
};
$jscomp.Symbol = (function () {
  var F = 0;
  return function (Ia) {
    return $jscomp.SYMBOL_PREFIX + (Ia || "") + F++;
  };
})();
$jscomp.initSymbolIterator = function () {
  $jscomp.initSymbol();
  var F = $jscomp.global.Symbol.iterator;
  F || (F = $jscomp.global.Symbol.iterator = $jscomp.global.Symbol("iterator"));
  "function" != typeof Array.prototype[F] &&
    $jscomp.defineProperty(Array.prototype, F, {
      configurable: !0,
      writable: !0,
      value: function () {
        return $jscomp.arrayIterator(this);
      },
    });
  $jscomp.initSymbolIterator = function () {};
};
$jscomp.arrayIterator = function (F) {
  var Ia = 0;
  return $jscomp.iteratorPrototype(function () {
    return Ia < F.length ? { done: !1, value: F[Ia++] } : { done: !0 };
  });
};
$jscomp.iteratorPrototype = function (F) {
  $jscomp.initSymbolIterator();
  F = { next: F };
  F[$jscomp.global.Symbol.iterator] = function () {
    return this;
  };
  return F;
};
$jscomp.iteratorFromArray = function (F, Ia) {
  $jscomp.initSymbolIterator();
  F instanceof String && (F += "");
  var v = 0,
    Wa = {
      next: function () {
        if (v < F.length) {
          var m = v++;
          return { value: Ia(m, F[m]), done: !1 };
        }
        Wa.next = function () {
          return { done: !0, value: void 0 };
        };
        return Wa.next();
      },
    };
  Wa[Symbol.iterator] = function () {
    return Wa;
  };
  return Wa;
};
$jscomp.polyfill = function (F, Ia, v, Wa) {
  if (Ia) {
    v = $jscomp.global;
    F = F.split(".");
    for (Wa = 0; Wa < F.length - 1; Wa++) {
      var m = F[Wa];
      m in v || (v[m] = {});
      v = v[m];
    }
    F = F[F.length - 1];
    Wa = v[F];
    Ia = Ia(Wa);
    Ia != Wa &&
      null != Ia &&
      $jscomp.defineProperty(v, F, {
        configurable: !0,
        writable: !0,
        value: Ia,
      });
  }
};
$jscomp.polyfill(
  "Array.prototype.keys",
  function (F) {
    return F
      ? F
      : function () {
          return $jscomp.iteratorFromArray(this, function (F) {
            return F;
          });
        };
  },
  "es6",
  "es3"
);
$jscomp.checkStringArgs = function (F, Ia, v) {
  if (null == F)
    throw new TypeError(
      "The 'this' value for String.prototype." +
        v +
        " must not be null or undefined"
    );
  if (Ia instanceof RegExp)
    throw new TypeError(
      "First argument to String.prototype." +
        v +
        " must not be a regular expression"
    );
  return F + "";
};
$jscomp.polyfill(
  "String.prototype.startsWith",
  function (F) {
    return F
      ? F
      : function (F, v) {
          var Ia = $jscomp.checkStringArgs(this, F, "startsWith");
          F += "";
          var m = Ia.length,
            l = F.length;
          v = Math.max(0, Math.min(v | 0, Ia.length));
          for (var M = 0; M < l && v < m; ) if (Ia[v++] != F[M++]) return !1;
          return M >= l;
        };
  },
  "es6",
  "es3"
);
$jscomp.polyfill(
  "String.prototype.codePointAt",
  function (F) {
    return F
      ? F
      : function (F) {
          var v = $jscomp.checkStringArgs(this, null, "codePointAt"),
            Ia = v.length;
          F = Number(F) || 0;
          if (0 <= F && F < Ia) {
            F |= 0;
            var m = v.charCodeAt(F);
            if (55296 > m || 56319 < m || F + 1 === Ia) return m;
            F = v.charCodeAt(F + 1);
            return 56320 > F || 57343 < F ? m : 1024 * (m - 55296) + F + 9216;
          }
        };
  },
  "es6",
  "es3"
);
$jscomp.polyfill(
  "String.prototype.endsWith",
  function (F) {
    return F
      ? F
      : function (F, v) {
          var Ia = $jscomp.checkStringArgs(this, F, "endsWith");
          F += "";
          void 0 === v && (v = Ia.length);
          v = Math.max(0, Math.min(v | 0, Ia.length));
          for (var m = F.length; 0 < m && 0 < v; )
            if (Ia[--v] != F[--m]) return !1;
          return 0 >= m;
        };
  },
  "es6",
  "es3"
);
$jscomp.polyfill(
  "Object.is",
  function (F) {
    return F
      ? F
      : function (F, v) {
          return F === v ? 0 !== F || 1 / F === 1 / v : F !== F && v !== v;
        };
  },
  "es6",
  "es3"
);
$jscomp.polyfill(
  "Array.prototype.includes",
  function (F) {
    return F
      ? F
      : function (F, v) {
          var Ia = this;
          Ia instanceof String && (Ia = String(Ia));
          var m = Ia.length;
          for (v = v || 0; v < m; v++)
            if (Ia[v] == F || Object.is(Ia[v], F)) return !0;
          return !1;
        };
  },
  "es7",
  "es3"
);
$jscomp.polyfill(
  "String.prototype.includes",
  function (F) {
    return F
      ? F
      : function (F, v) {
          return (
            -1 !==
            $jscomp.checkStringArgs(this, F, "includes").indexOf(F, v || 0)
          );
        };
  },
  "es6",
  "es3"
);
$jscomp.polyfill(
  "Array.prototype.fill",
  function (F) {
    return F
      ? F
      : function (F, v, Wa) {
          var m = this.length || 0;
          0 > v && (v = Math.max(0, m + v));
          if (null == Wa || Wa > m) Wa = m;
          Wa = Number(Wa);
          0 > Wa && (Wa = Math.max(0, m + Wa));
          for (v = Number(v || 0); v < Wa; v++) this[v] = F;
          return this;
        };
  },
  "es6",
  "es3"
);
$jscomp.findInternal = function (F, Ia, v) {
  F instanceof String && (F = String(F));
  for (var Wa = F.length, m = 0; m < Wa; m++) {
    var l = F[m];
    if (Ia.call(v, l, m, F)) return { i: m, v: l };
  }
  return { i: -1, v: void 0 };
};
$jscomp.polyfill(
  "Array.prototype.find",
  function (F) {
    return F
      ? F
      : function (F, v) {
          return $jscomp.findInternal(this, F, v).v;
        };
  },
  "es6",
  "es3"
);
(function (F, Ia) {
  function v(a, b) {
    function c() {}
    c.prototype = a;
    a = new c();
    for (var d in b) a[d] = b[d];
    b.toString !== Object.prototype.toString && (a.toString = b.toString);
    return a;
  }
  function Wa(a) {
    return a instanceof Array
      ? function () {
          return S.iter(a);
        }
      : "function" == typeof a.iterator
      ? m(a, a.iterator)
      : a.iterator;
  }
  function m(a, b) {
    if (null == b) return null;
    null == b.__id__ && (b.__id__ = Gl++);
    var c;
    null == a.hx__closures__
      ? (a.hx__closures__ = {})
      : (c = a.hx__closures__[b.__id__]);
    null == c &&
      ((c = function () {
        return c.method.apply(c.scope, arguments);
      }),
      (c.scope = a),
      (c.method = b),
      (a.hx__closures__[b.__id__] = c));
    return c;
  }
  F.openfl = F.openfl || {};
  F.openfl.display = F.openfl.display || {};
  F.lime = F.lime || {};
  var l = {},
    M = function () {
      return r.__string_rec(this, "");
    },
    Rg = function () {};
  l["lime.app.IModule"] = Rg;
  Rg.__name__ = ["lime", "app", "IModule"];
  Rg.prototype = { __registerLimeModule: null, __class__: Rg };
  var lg = function () {
    this.onExit = new ce();
  };
  l["lime.app.Module"] = lg;
  lg.__name__ = ["lime", "app", "Module"];
  lg.__interfaces__ = [Rg];
  lg.prototype = {
    onExit: null,
    __registerLimeModule: function (a) {},
    __class__: lg,
  };
  var qi = function (a) {
    this.gameDeviceCache = new mb();
    this.parent = a;
    this.nextUpdate = this.lastUpdate = this.currentUpdate = 0;
    this.framePeriod = -1;
    ye.init();
    this.accelerometer = $e.registerSensor(pi.ACCELEROMETER, 0);
  };
  l["lime._internal.backend.html5.HTML5Application"] = qi;
  qi.__name__ = ["lime", "_internal", "backend", "html5", "HTML5Application"];
  qi.prototype = {
    gameDeviceCache: null,
    accelerometer: null,
    currentUpdate: null,
    deltaTime: null,
    framePeriod: null,
    lastUpdate: null,
    nextUpdate: null,
    parent: null,
    convertKeyCode: function (a) {
      if (65 <= a && 90 >= a) return a + 32;
      switch (a) {
        case 16:
          return 1073742049;
        case 17:
          return 1073742048;
        case 18:
          return 1073742050;
        case 20:
          return 1073741881;
        case 33:
          return 1073741899;
        case 34:
          return 1073741902;
        case 35:
          return 1073741901;
        case 36:
          return 1073741898;
        case 37:
          return 1073741904;
        case 38:
          return 1073741906;
        case 39:
          return 1073741903;
        case 40:
          return 1073741905;
        case 45:
          return 1073741897;
        case 46:
          return 127;
        case 96:
          return 1073741922;
        case 97:
          return 1073741913;
        case 98:
          return 1073741914;
        case 99:
          return 1073741915;
        case 100:
          return 1073741916;
        case 101:
          return 1073741917;
        case 102:
          return 1073741918;
        case 103:
          return 1073741919;
        case 104:
          return 1073741920;
        case 105:
          return 1073741921;
        case 106:
          return 1073741909;
        case 107:
          return 1073741911;
        case 109:
          return 1073741910;
        case 110:
          return 1073741923;
        case 111:
          return 1073741908;
        case 112:
          return 1073741882;
        case 113:
          return 1073741883;
        case 114:
          return 1073741884;
        case 115:
          return 1073741885;
        case 116:
          return 1073741886;
        case 117:
          return 1073741887;
        case 118:
          return 1073741888;
        case 119:
          return 1073741889;
        case 120:
          return 1073741890;
        case 121:
          return 1073741891;
        case 122:
          return 1073741892;
        case 123:
          return 1073741893;
        case 124:
          return 1073741928;
        case 125:
          return 1073741929;
        case 126:
          return 1073741930;
        case 144:
          return 1073741907;
        case 186:
          return 59;
        case 187:
          return 61;
        case 188:
          return 44;
        case 189:
          return 45;
        case 190:
          return 46;
        case 191:
          return 47;
        case 192:
          return 96;
        case 219:
          return 91;
        case 220:
          return 92;
        case 221:
          return 93;
        case 222:
          return 39;
      }
      return a;
    },
    exec: function () {
      T.get_window().addEventListener(
        "keydown",
        m(this, this.handleKeyEvent),
        !1
      );
      T.get_window().addEventListener(
        "keyup",
        m(this, this.handleKeyEvent),
        !1
      );
      T.get_window().addEventListener(
        "focus",
        m(this, this.handleWindowEvent),
        !1
      );
      T.get_window().addEventListener(
        "blur",
        m(this, this.handleWindowEvent),
        !1
      );
      T.get_window().addEventListener(
        "resize",
        m(this, this.handleWindowEvent),
        !1
      );
      T.get_window().addEventListener(
        "beforeunload",
        m(this, this.handleWindowEvent),
        !1
      );
      T.get_window().addEventListener(
        "devicemotion",
        m(this, this.handleSensorEvent),
        !1
      );
      CanvasRenderingContext2D.prototype.isPointInStroke ||
        (CanvasRenderingContext2D.prototype.isPointInStroke = function (
          a,
          b,
          c
        ) {
          return !1;
        });
      CanvasRenderingContext2D.prototype.isPointInPath ||
        (CanvasRenderingContext2D.prototype.isPointInPath = function (a, b, c) {
          return !1;
        });
      0 == "performance" in window && (window.performance = {});
      if (0 == "now" in window.performance) {
        var a = Date.now();
        performance.timing &&
          performance.timing.navigationStart &&
          (a = performance.timing.navigationStart);
        window.performance.now = function () {
          return Date.now() - a;
        };
      }
      for (
        var b = 0, c = ["ms", "moz", "webkit", "o"], d = 0;
        d < c.length && !window.requestAnimationFrame;
        ++d
      )
        (window.requestAnimationFrame = window[c[d] + "RequestAnimationFrame"]),
          (window.cancelAnimationFrame =
            window[c[d] + "CancelAnimationFrame"] ||
            window[c[d] + "CancelRequestAnimationFrame"]);
      window.requestAnimationFrame ||
        (window.requestAnimationFrame = function (a, c) {
          var d = new Date().getTime(),
            e = Math.max(0, 16 - (d - b));
          c = window.setTimeout(function () {
            a(d + e);
          }, e);
          b = d + e;
          return c;
        });
      window.cancelAnimationFrame ||
        (window.cancelAnimationFrame = function (a) {
          clearTimeout(a);
        });
      window.requestAnimFrame = window.requestAnimationFrame;
      this.lastUpdate = new Date().getTime();
      this.handleApplicationEvent();
      return 0;
    },
    exit: function () {},
    handleApplicationEvent: function (a) {
      a = 0;
      for (var b = this.parent.__windows; a < b.length; ) {
        var c = b[a];
        ++a;
        c.__backend.updateSize();
      }
      this.updateGameDevices();
      this.currentUpdate = new Date().getTime();
      if (this.currentUpdate >= this.nextUpdate) {
        this.deltaTime = this.currentUpdate - this.lastUpdate;
        a = 0;
        for (b = this.parent.__windows; a < b.length; )
          (c = b[a]),
            ++a,
            this.parent.onUpdate.dispatch(u["int"](this.deltaTime)),
            null != c.context && c.onRender.dispatch(c.context);
        this.nextUpdate =
          0 > this.framePeriod
            ? this.currentUpdate
            : this.currentUpdate -
              (this.currentUpdate % this.framePeriod) +
              this.framePeriod;
        this.lastUpdate = this.currentUpdate;
      }
      T.get_window().requestAnimationFrame(
        m(this, this.handleApplicationEvent)
      );
    },
    handleKeyEvent: function (a) {
      if (null != this.parent.get_window()) {
        var b = this.convertKeyCode(null != a.keyCode ? a.keyCode : a.which),
          c =
            (a.shiftKey ? 3 : 0) |
            (a.ctrlKey ? 192 : 0) |
            (a.altKey ? 768 : 0) |
            (a.metaKey ? 3072 : 0);
        "keydown" == a.type
          ? (this.parent.get_window().onKeyDown.dispatch(b, c),
            this.parent.get_window().onKeyDown.canceled && a.preventDefault())
          : (this.parent.get_window().onKeyUp.dispatch(b, c),
            this.parent.get_window().onKeyUp.canceled && a.preventDefault());
      }
    },
    handleSensorEvent: function (a) {
      this.accelerometer.onUpdate.dispatch(
        a.accelerationIncludingGravity.x,
        a.accelerationIncludingGravity.y,
        a.accelerationIncludingGravity.z
      );
    },
    handleWindowEvent: function (a) {
      if (null != this.parent.get_window())
        switch (a.type) {
          case "beforeunload":
            a.defaultPrevented ||
              (this.parent.get_window().onClose.dispatch(),
              null != this.parent.get_window() &&
                this.parent.get_window().onClose.canceled &&
                a.preventDefault());
            break;
          case "blur":
            this.parent.get_window().onFocusOut.dispatch();
            this.parent.get_window().onDeactivate.dispatch();
            break;
          case "focus":
            this.parent.get_window().onFocusIn.dispatch();
            this.parent.get_window().onActivate.dispatch();
            break;
          case "resize":
            this.parent.get_window().__backend.handleResizeEvent(a);
        }
    },
    updateGameDevices: function () {
      var a = zb.__getDeviceData();
      if (null != a)
        for (var b, c, d, e, f, g = 0, h = a.length; g < h; )
          if (((b = g++), (e = a[b]), null != e)) {
            if (!this.gameDeviceCache.exists(b)) {
              f = new ri();
              f.id = b;
              f.connected = e.connected;
              c = 0;
              for (d = e.buttons.length; c < d; ) {
                var n = c++;
                f.buttons.push(e.buttons[n].value);
              }
              c = 0;
              for (d = e.axes.length; c < d; )
                (n = c++), f.axes.push(e.axes[n]);
              "standard" == e.mapping && (f.isGamepad = !0);
              this.gameDeviceCache.set(b, f);
              e.connected && (zb.__connect(b), f.isGamepad && vb.__connect(b));
            }
            f = this.gameDeviceCache.get(b);
            d = zb.devices.get(b);
            c = vb.devices.get(b);
            if (e.connected) {
              for (var p = 0, k = e.buttons.length; p < k; ) {
                var l = p++;
                n = e.buttons[l].value;
                if (n != f.buttons[l]) {
                  if (6 == l)
                    d.onAxisMove.dispatch(e.axes.length, n),
                      null != c && c.onAxisMove.dispatch(4, n);
                  else if (7 == l)
                    d.onAxisMove.dispatch(e.axes.length + 1, n),
                      null != c && c.onAxisMove.dispatch(5, n);
                  else if (
                    (0 < n
                      ? d.onButtonDown.dispatch(l)
                      : d.onButtonUp.dispatch(l),
                    null != c)
                  ) {
                    switch (l) {
                      case 0:
                        b = 0;
                        break;
                      case 1:
                        b = 1;
                        break;
                      case 2:
                        b = 2;
                        break;
                      case 3:
                        b = 3;
                        break;
                      case 4:
                        b = 9;
                        break;
                      case 5:
                        b = 10;
                        break;
                      case 8:
                        b = 4;
                        break;
                      case 9:
                        b = 6;
                        break;
                      case 10:
                        b = 7;
                        break;
                      case 11:
                        b = 8;
                        break;
                      case 12:
                        b = 11;
                        break;
                      case 13:
                        b = 12;
                        break;
                      case 14:
                        b = 13;
                        break;
                      case 15:
                        b = 14;
                        break;
                      case 16:
                        b = 5;
                        break;
                      default:
                        continue;
                    }
                    0 < n
                      ? c.onButtonDown.dispatch(b)
                      : c.onButtonUp.dispatch(b);
                  }
                  f.buttons[l] = n;
                }
              }
              b = 0;
              for (n = e.axes.length; b < n; )
                (p = b++),
                  e.axes[p] != f.axes[p] &&
                    (d.onAxisMove.dispatch(p, e.axes[p]),
                    null != c && c.onAxisMove.dispatch(p, e.axes[p]),
                    (f.axes[p] = e.axes[p]));
            } else
              f.connected &&
                ((f.connected = !1), zb.__disconnect(b), vb.__disconnect(b));
          }
    },
    __class__: qi,
  };
  var nc = function () {
    this.onCreateWindow = new si();
    this.onUpdate = new ce();
    this.onExit = new ce();
    null == nc.current && (nc.current = this);
    this.meta = new sa();
    this.modules = [];
    this.__windowByID = new mb();
    this.__windows = [];
    this.__backend = new qi(this);
    this.__registerLimeModule(this);
    this.__preloader = new ti();
    this.__preloader.onProgress.add(m(this, this.onPreloadProgress));
    this.__preloader.onComplete.add(m(this, this.onPreloadComplete));
  };
  l["lime.app.Application"] = nc;
  nc.__name__ = ["lime", "app", "Application"];
  nc.__super__ = lg;
  nc.prototype = v(lg.prototype, {
    meta: null,
    modules: null,
    onUpdate: null,
    onCreateWindow: null,
    __backend: null,
    __preloader: null,
    __window: null,
    __windowByID: null,
    __windows: null,
    addModule: function (a) {
      a.__registerLimeModule(this);
      this.modules.push(a);
    },
    exec: function () {
      nc.current = this;
      return this.__backend.exec();
    },
    onGamepadAxisMove: function (a, b, c) {},
    onGamepadButtonDown: function (a, b) {},
    onGamepadButtonUp: function (a, b) {},
    onGamepadConnect: function (a) {},
    onGamepadDisconnect: function (a) {},
    onJoystickAxisMove: function (a, b, c) {},
    onJoystickButtonDown: function (a, b) {},
    onJoystickButtonUp: function (a, b) {},
    onJoystickConnect: function (a) {},
    onJoystickDisconnect: function (a) {},
    onJoystickHatMove: function (a, b, c) {},
    onJoystickTrackballMove: function (a, b, c, d) {},
    onKeyDown: function (a, b) {},
    onKeyUp: function (a, b) {},
    onModuleExit: function (a) {},
    onMouseDown: function (a, b, c) {},
    onMouseMove: function (a, b) {},
    onMouseMoveRelative: function (a, b) {},
    onMouseUp: function (a, b, c) {},
    onMouseWheel: function (a, b, c) {},
    onPreloadComplete: function () {},
    onPreloadProgress: function (a, b) {},
    onRenderContextLost: function () {},
    onRenderContextRestored: function (a) {},
    onTextEdit: function (a, b, c) {},
    onTextInput: function (a) {},
    onTouchCancel: function (a) {},
    onTouchEnd: function (a) {},
    onTouchMove: function (a) {},
    onTouchStart: function (a) {},
    onWindowActivate: function () {},
    onWindowClose: function () {},
    onWindowCreate: function () {},
    onWindowDeactivate: function () {},
    onWindowDropFile: function (a) {},
    onWindowEnter: function () {},
    onWindowExpose: function () {},
    onWindowFocusIn: function () {},
    onWindowFocusOut: function () {},
    onWindowFullscreen: function () {},
    onWindowLeave: function () {},
    onWindowMove: function (a, b) {},
    onWindowMinimize: function () {},
    onWindowResize: function (a, b) {},
    onWindowRestore: function () {},
    render: function (a) {},
    update: function (a) {},
    __registerLimeModule: function (a) {
      a.onUpdate.add(m(this, this.update));
      a.onExit.add(m(this, this.onModuleExit), !1, 0);
      a.onExit.add(m(this, this.__onModuleExit), !1, 0);
      for (a = vb.devices.iterator(); a.hasNext(); ) {
        var b = a.next();
        this.__onGamepadConnect(b);
      }
      vb.onConnect.add(m(this, this.__onGamepadConnect));
      for (a = zb.devices.iterator(); a.hasNext(); )
        (b = a.next()), this.__onJoystickConnect(b);
      zb.onConnect.add(m(this, this.__onJoystickConnect));
      Jb.onCancel.add(m(this, this.onTouchCancel));
      Jb.onStart.add(m(this, this.onTouchStart));
      Jb.onMove.add(m(this, this.onTouchMove));
      Jb.onEnd.add(m(this, this.onTouchEnd));
    },
    __removeWindow: function (a) {
      null != a &&
        this.__windowByID.exists(a.id) &&
        (this.__window == a && (this.__window = null),
        S.remove(this.__windows, a),
        this.__windowByID.remove(a.id),
        a.close(),
        0 == this.__windows.length && Db.exit(0));
    },
    __onGamepadConnect: function (a) {
      this.onGamepadConnect(a);
      var b = m(this, this.onGamepadAxisMove);
      a.onAxisMove.add(function (c, d) {
        b(a, c, d);
      });
      var c = m(this, this.onGamepadButtonDown);
      a.onButtonDown.add(function (b) {
        c(a, b);
      });
      var d = m(this, this.onGamepadButtonUp);
      a.onButtonUp.add(function (b) {
        d(a, b);
      });
      var e = m(this, this.onGamepadDisconnect);
      a.onDisconnect.add(function () {
        e(a);
      });
    },
    __onJoystickConnect: function (a) {
      this.onJoystickConnect(a);
      var b = m(this, this.onJoystickAxisMove);
      a.onAxisMove.add(function (c, d) {
        b(a, c, d);
      });
      var c = m(this, this.onJoystickButtonDown);
      a.onButtonDown.add(function (b) {
        c(a, b);
      });
      var d = m(this, this.onJoystickButtonUp);
      a.onButtonUp.add(function (b) {
        d(a, b);
      });
      var e = m(this, this.onJoystickDisconnect);
      a.onDisconnect.add(function () {
        e(a);
      });
      var f = m(this, this.onJoystickHatMove);
      a.onHatMove.add(function (b, c) {
        f(a, b, c);
      });
      var g = m(this, this.onJoystickTrackballMove);
      a.onTrackballMove.add(function (b, c, d) {
        g(a, b, c, d);
      });
    },
    __onModuleExit: function (a) {
      this.__backend.exit();
    },
    __onWindowClose: function (a) {
      if (this.get_window() == a) this.onWindowClose();
      this.__removeWindow(a);
    },
    get_preloader: function () {
      return this.__preloader;
    },
    get_window: function () {
      return this.__window;
    },
    __class__: nc,
    __properties__: {
      get_window: "get_window",
      get_preloader: "get_preloader",
    },
  });
  var ze = function () {};
  l.ApplicationMain = ze;
  ze.__name__ = ["ApplicationMain"];
  ze.main = function () {
    Db.__registerEntryPoint("truckLoader4", ze.create);
  };
  ze.create = function (a) {
    var b = new Sg();
    rf.init(a);
    b.meta.set("build", "6328");
    b.meta.set("company", "adgard");
    b.meta.set("file", "truckLoader4");
    b.meta.set("name", "Truck Loader 4");
    b.meta.set("packageName", "com.bestphysics.TruckLoader4");
    b.meta.set("version", "1.0.0");
    var c = {
      allowHighDPI: !1,
      alwaysOnTop: !1,
      borderless: !1,
      element: null,
      frameRate: 30,
      height: 0,
      hidden: !1,
      maximized: !1,
      minimized: !1,
      parameters: {},
      resizable: !0,
      title: "Truck Loader 4",
      width: 0,
      x: null,
      y: null,
      context: {
        antialiasing: 4,
        background: 0,
        colorDepth: 32,
        depth: !0,
        hardware: !0,
        stencil: !0,
        type: null,
        vsync: !1,
      },
    };
    if (null == b.get_window() && null != a)
      for (var d = 0, e = A.fields(a); d < e.length; ) {
        var f = e[d];
        ++d;
        A.hasField(c, f)
          ? A.setField(c, f, A.field(a, f))
          : A.hasField(c.context, f) && A.setField(c.context, f, A.field(a, f));
      }
    b.createWindow(c);
    var g = new ui(new Tg());
    b.get_preloader().onProgress.add(function (a, b) {
      g.update(a, b);
    });
    b.get_preloader().onComplete.add(function () {
      g.start();
    });
    a = g.onComplete;
    var h = r.__cast(b.get_window(), mg).stage;
    a.add(function () {
      ze.start(h);
    });
    a = 0;
    for (c = rf.preloadLibraries; a < c.length; )
      (d = c[a]), ++a, b.get_preloader().addLibrary(d);
    a = 0;
    for (c = rf.preloadLibraryNames; a < c.length; )
      (d = c[a]), ++a, b.get_preloader().addLibraryName(d);
    b.get_preloader().load();
    b.exec();
  };
  ze.start = function (a) {
    try {
      af.main(),
        a.dispatchEvent(new X("resize", !1, !1)),
        a.window.get_fullscreen() &&
          a.dispatchEvent(new Ae("fullScreen", !1, !1, !0, !0));
    } catch (b) {
      (ta.lastException = b), b instanceof G && (b = b.val), a.__handleError(b);
    }
  };
  var ol = function () {};
  l["openfl.events.IEventDispatcher"] = ol;
  ol.__name__ = ["openfl", "events", "IEventDispatcher"];
  var ea = function (a) {
    null != a && (this.__targetDispatcher = a);
  };
  l["openfl.events.EventDispatcher"] = ea;
  ea.__name__ = ["openfl", "events", "EventDispatcher"];
  ea.__interfaces__ = [ol];
  ea.prototype = {
    __eventMap: null,
    __iterators: null,
    __targetDispatcher: null,
    addEventListener: function (a, b, c, d, e) {
      null == d && (d = 0);
      null == c && (c = !1);
      if (null != b)
        if (
          (null == this.__eventMap &&
            ((this.__eventMap = new sa()), (this.__iterators = new sa())),
          this.__eventMap.exists(a))
        ) {
          e = this.__eventMap.get(a);
          for (var f = 0, g = e.length; f < g; ) {
            var h = f++;
            if (e[h].match(b, c)) return;
          }
          a = this.__iterators.get(a);
          for (f = 0; f < a.length; ) (g = a[f]), ++f, g.active && g.copy();
          this.__addListenerByPriority(e, new Ug(b, c, d));
        } else
          (e = []),
            e.push(new Ug(b, c, d)),
            (b = new Vg(e)),
            this.__eventMap.set(a, e),
            this.__iterators.set(a, [b]);
    },
    dispatchEvent: function (a) {
      a.target =
        null != this.__targetDispatcher ? this.__targetDispatcher : this;
      return this.__dispatchEvent(a);
    },
    hasEventListener: function (a) {
      return null == this.__eventMap ? !1 : this.__eventMap.exists(a);
    },
    removeEventListener: function (a, b, c) {
      null == c && (c = !1);
      if (null != this.__eventMap && null != b) {
        var d = this.__eventMap.get(a);
        if (null != d) {
          for (var e = this.__iterators.get(a), f = 0, g = d.length; f < g; ) {
            var h = f++;
            if (d[h].match(b, c)) {
              for (b = 0; b < e.length; ) (c = e[b]), ++b, c.remove(d[h], h);
              d.splice(h, 1);
              break;
            }
          }
          0 == d.length &&
            (this.__eventMap.remove(a), this.__iterators.remove(a));
          this.__eventMap.iterator().hasNext() ||
            (this.__iterators = this.__eventMap = null);
        }
      }
    },
    __dispatchEvent: function (a) {
      if (null == this.__eventMap || null == a) return !0;
      var b = a.type,
        c = this.__eventMap.get(b);
      if (null == c) return !0;
      null == a.target &&
        (a.target =
          null != this.__targetDispatcher ? this.__targetDispatcher : this);
      a.currentTarget = this;
      var d = 1 == a.eventPhase;
      b = this.__iterators.get(b);
      var e = b[0];
      e.active && ((e = new Vg(c)), b.push(e));
      e.start();
      for (var f = e; f.hasNext(); ) {
        var g = f.next();
        if (
          null != g &&
          g.useCapture == d &&
          (g.callback(a), a.__isCanceledNow)
        )
          break;
      }
      e.stop();
      e != b[0] ? S.remove(b, e) : e.reset(c);
      return !a.isDefaultPrevented();
    },
    __addListenerByPriority: function (a, b) {
      for (var c = a.length, d = c, e = 0; e < c; ) {
        var f = e++;
        if (a[f].priority < b.priority) {
          d = f;
          break;
        }
      }
      a.splice(d, 0, b);
    },
    __class__: ea,
  };
  var Wg = function () {};
  l["openfl.display.IBitmapDrawable"] = Wg;
  Wg.__name__ = ["openfl", "display", "IBitmapDrawable"];
  Wg.prototype = {
    __renderTransform: null,
    __worldAlpha: null,
    __worldColorTransform: null,
    __getBounds: null,
    __renderCairo: null,
    __renderCanvas: null,
    __renderDOM: null,
    __renderGL: null,
    __update: null,
    __mask: null,
    __scrollRect: null,
    __class__: Wg,
  };
  var Ka = function (a, b, c, d, e, f, g, h) {
    null == h && (h = 0);
    null == g && (g = 0);
    null == f && (f = 0);
    null == e && (e = 0);
    null == d && (d = 1);
    null == c && (c = 1);
    null == b && (b = 1);
    null == a && (a = 1);
    this.redMultiplier = a;
    this.greenMultiplier = b;
    this.blueMultiplier = c;
    this.alphaMultiplier = d;
    this.redOffset = e;
    this.greenOffset = f;
    this.blueOffset = g;
    this.alphaOffset = h;
  };
  l["openfl.geom.ColorTransform"] = Ka;
  Ka.__name__ = ["openfl", "geom", "ColorTransform"];
  Ka.prototype = {
    alphaMultiplier: null,
    alphaOffset: null,
    blueMultiplier: null,
    blueOffset: null,
    greenMultiplier: null,
    greenOffset: null,
    redMultiplier: null,
    redOffset: null,
    __copyFrom: function (a) {
      this.redMultiplier = a.redMultiplier;
      this.greenMultiplier = a.greenMultiplier;
      this.blueMultiplier = a.blueMultiplier;
      this.alphaMultiplier = a.alphaMultiplier;
      this.redOffset = a.redOffset;
      this.greenOffset = a.greenOffset;
      this.blueOffset = a.blueOffset;
      this.alphaOffset = a.alphaOffset;
    },
    __combine: function (a) {
      this.redMultiplier *= a.redMultiplier;
      this.greenMultiplier *= a.greenMultiplier;
      this.blueMultiplier *= a.blueMultiplier;
      this.alphaMultiplier *= a.alphaMultiplier;
      this.redOffset += a.redOffset;
      this.greenOffset += a.greenOffset;
      this.blueOffset += a.blueOffset;
      this.alphaOffset += a.alphaOffset;
    },
    __identity: function () {
      this.alphaMultiplier =
        this.blueMultiplier =
        this.greenMultiplier =
        this.redMultiplier =
          1;
      this.alphaOffset =
        this.blueOffset =
        this.greenOffset =
        this.redOffset =
          0;
    },
    __invert: function () {
      this.redMultiplier = 1 / this.redMultiplier;
      this.greenMultiplier = 1 / this.greenMultiplier;
      this.blueMultiplier = 1 / this.blueMultiplier;
      this.alphaMultiplier = 1 / this.alphaMultiplier;
      this.redOffset = -this.redOffset;
      this.greenOffset = -this.greenOffset;
      this.blueOffset = -this.blueOffset;
      this.alphaOffset = -this.alphaOffset;
    },
    __equals: function (a, b) {
      null == b && (b = !1);
      return null == a ||
        this.redMultiplier != a.redMultiplier ||
        this.greenMultiplier != a.greenMultiplier ||
        this.blueMultiplier != a.blueMultiplier ||
        (!b && this.alphaMultiplier != a.alphaMultiplier) ||
        this.redOffset != a.redOffset ||
        this.greenOffset != a.greenOffset ||
        this.blueOffset != a.blueOffset
        ? !1
        : this.alphaOffset == a.alphaOffset;
    },
    __isDefault: function () {
      return 1 == this.redMultiplier &&
        1 == this.greenMultiplier &&
        1 == this.blueMultiplier &&
        1 == this.alphaMultiplier &&
        0 == this.redOffset &&
        0 == this.greenOffset &&
        0 == this.blueOffset
        ? 0 == this.alphaOffset
        : !1;
    },
    __setArrays: function (a, b) {
      a[0] = this.redMultiplier;
      a[1] = this.greenMultiplier;
      a[2] = this.blueMultiplier;
      a[3] = this.alphaMultiplier;
      b[0] = this.redOffset;
      b[1] = this.greenOffset;
      b[2] = this.blueOffset;
      b[3] = this.alphaOffset;
    },
    __toLimeColorMatrix: function () {
      if (null == Ka.__limeColorMatrix) {
        var a = new de(20);
        Ka.__limeColorMatrix = a;
      }
      Ka.__limeColorMatrix[0] = this.redMultiplier;
      Ka.__limeColorMatrix[4] = this.redOffset / 255;
      Ka.__limeColorMatrix[6] = this.greenMultiplier;
      Ka.__limeColorMatrix[9] = this.greenOffset / 255;
      Ka.__limeColorMatrix[12] = this.blueMultiplier;
      Ka.__limeColorMatrix[14] = this.blueOffset / 255;
      Ka.__limeColorMatrix[18] = this.alphaMultiplier;
      Ka.__limeColorMatrix[19] = this.alphaOffset / 255;
      return Ka.__limeColorMatrix;
    },
    __class__: Ka,
  };
  var Eb = {};
  l["openfl._Vector.Vector_Impl_"] = Eb;
  Eb.__name__ = ["openfl", "_Vector", "Vector_Impl_"];
  Eb.toIntVector = function (a, b, c, d) {
    return new Xg(b, c, d);
  };
  Eb.toFloatVector = function (a, b, c, d) {
    return new sf(b, c, d, !0);
  };
  Eb.toObjectVector = function (a, b, c, d) {
    return new ng(b, c, d, !0);
  };
  var Be = function (a, b, c) {
    this.__pool = new ib();
    this.inactiveObjects = this.activeObjects = 0;
    this.__inactiveObject1 = this.__inactiveObject0 = null;
    this.__inactiveObjectList = new bd();
    null != a && (this.create = a);
    null != b && (this.clean = b);
    null != c && this.set_size(c);
  };
  l["lime.utils.ObjectPool"] = Be;
  Be.__name__ = ["lime", "utils", "ObjectPool"];
  Be.prototype = {
    activeObjects: null,
    inactiveObjects: null,
    __inactiveObject0: null,
    __inactiveObject1: null,
    __inactiveObjectList: null,
    __pool: null,
    __size: null,
    clean: function (a) {},
    create: function () {
      return null;
    },
    get: function () {
      var a = null;
      if (0 < this.inactiveObjects) a = this.__getInactive();
      else if (null == this.__size || this.activeObjects < this.__size)
        (a = this.create()),
          null != a && (this.__pool.set(a, !0), this.activeObjects++);
      return a;
    },
    release: function (a) {
      this.activeObjects--;
      null == this.__size ||
      this.activeObjects + this.inactiveObjects < this.__size
        ? (this.clean(a), this.__addInactive(a))
        : this.__pool.remove(a);
    },
    __addInactive: function (a) {
      null == this.__inactiveObject0
        ? (this.__inactiveObject0 = a)
        : null == this.__inactiveObject1
        ? (this.__inactiveObject1 = a)
        : this.__inactiveObjectList.add(a);
      this.inactiveObjects++;
    },
    __getInactive: function () {
      if (null != this.__inactiveObject0) {
        var a = this.__inactiveObject0;
        this.__inactiveObject0 = null;
      } else
        null != this.__inactiveObject1
          ? ((a = this.__inactiveObject1), (this.__inactiveObject1 = null))
          : ((a = this.__inactiveObjectList.pop()),
            0 < this.__inactiveObjectList.length &&
              (this.__inactiveObject0 = this.__inactiveObjectList.pop()),
            0 < this.__inactiveObjectList.length &&
              (this.__inactiveObject1 = this.__inactiveObjectList.pop()));
      this.inactiveObjects--;
      this.activeObjects++;
      return a;
    },
    __removeInactive: function (a) {
      if (
        !(0 >= a || 0 == this.inactiveObjects) &&
        (null != this.__inactiveObject0 &&
          (this.__pool.remove(this.__inactiveObject0),
          (this.__inactiveObject0 = null),
          this.inactiveObjects--,
          --a),
        0 != a &&
          0 != this.inactiveObjects &&
          (null != this.__inactiveObject1 &&
            (this.__pool.remove(this.__inactiveObject1),
            (this.__inactiveObject1 = null),
            this.inactiveObjects--,
            --a),
          0 != a && 0 != this.inactiveObjects))
      )
        for (var b = this.__inactiveObjectList.iterator(); b.hasNext(); ) {
          var c = b.next();
          this.__pool.remove(c);
          this.__inactiveObjectList.remove(c);
          this.inactiveObjects--;
          --a;
          if (0 == a || 0 == this.inactiveObjects) break;
        }
    },
    set_size: function (a) {
      if (null == a) this.__size = null;
      else {
        var b = this.inactiveObjects + this.activeObjects;
        this.__size = a;
        if (b > a) this.__removeInactive(b - a);
        else if (a > b)
          for (var c = 0, d = a - b; c < d; )
            if ((c++, (b = this.create()), null != b))
              this.__pool.set(b, !1),
                this.__inactiveObjectList.add(b),
                this.inactiveObjects++;
            else break;
      }
      return a;
    },
    __class__: Be,
    __properties__: { set_size: "set_size" },
  };
  var Hf = function () {};
  l["haxe.IMap"] = Hf;
  Hf.__name__ = ["haxe", "IMap"];
  Hf.prototype = {
    get: null,
    set: null,
    exists: null,
    remove: null,
    __class__: Hf,
  };
  var ib = function () {
    this.h = { __keys__: {} };
  };
  l["haxe.ds.ObjectMap"] = ib;
  ib.__name__ = ["haxe", "ds", "ObjectMap"];
  ib.__interfaces__ = [Hf];
  ib.assignId = function (a) {
    return (a.__id__ = ++ib.count);
  };
  ib.getId = function (a) {
    return a.__id__;
  };
  ib.prototype = {
    h: null,
    set: function (a, b) {
      var c = ib.getId(a) || ib.assignId(a);
      this.h[c] = b;
      this.h.__keys__[c] = a;
    },
    get: function (a) {
      return this.h[ib.getId(a)];
    },
    exists: function (a) {
      return null != this.h.__keys__[ib.getId(a)];
    },
    remove: function (a) {
      a = ib.getId(a);
      if (null == this.h.__keys__[a]) return !1;
      delete this.h[a];
      delete this.h.__keys__[a];
      return !0;
    },
    keys: function () {
      var a = [],
        b;
      for (b in this.h.__keys__)
        this.h.hasOwnProperty(b) && a.push(this.h.__keys__[b]);
      return S.iter(a);
    },
    iterator: function () {
      return {
        ref: this.h,
        it: this.keys(),
        hasNext: function () {
          return this.it.hasNext();
        },
        next: function () {
          var a = this.it.next();
          return this.ref[ib.getId(a)];
        },
      };
    },
    __class__: ib,
  };
  var bd = function () {
    this.length = 0;
  };
  l.List = bd;
  bd.__name__ = ["List"];
  bd.prototype = {
    h: null,
    q: null,
    length: null,
    add: function (a) {
      a = new vi(a, null);
      null == this.h ? (this.h = a) : (this.q.next = a);
      this.q = a;
      this.length++;
    },
    pop: function () {
      if (null == this.h) return null;
      var a = this.h.item;
      this.h = this.h.next;
      null == this.h && (this.q = null);
      this.length--;
      return a;
    },
    clear: function () {
      this.q = this.h = null;
      this.length = 0;
    },
    remove: function (a) {
      for (var b = null, c = this.h; null != c; ) {
        if (c.item == a)
          return (
            null == b ? (this.h = c.next) : (b.next = c.next),
            this.q == c && (this.q = b),
            this.length--,
            !0
          );
        b = c;
        c = c.next;
      }
      return !1;
    },
    iterator: function () {
      return new wi(this.h);
    },
    __class__: bd,
  };
  var Y = function () {
    ea.call(this);
    this.__alpha = 1;
    this.__blendMode = 10;
    this.__cacheAsBitmap = !1;
    this.__transform = new ia();
    this.__visible = !0;
    this.__rotationSine = this.__rotation = 0;
    this.__worldAlpha =
      this.__scaleY =
      this.__scaleX =
      this.__rotationCosine =
        1;
    this.__worldBlendMode = 10;
    this.__worldTransform = new ia();
    this.__worldColorTransform = new Ka();
    this.__renderTransform = new ia();
    this.__worldVisible = !0;
    this.set_name("instance" + ++Y.__instanceCount);
    null != Y.__initStage &&
      ((this.stage = Y.__initStage),
      (Y.__initStage = null),
      this.stage.addChild(this));
  };
  l["openfl.display.DisplayObject"] = Y;
  Y.__name__ = ["openfl", "display", "DisplayObject"];
  Y.__interfaces__ = [Wg];
  Y.__calculateAbsoluteTransform = function (a, b, c) {
    c.a = a.a * b.a + a.b * b.c;
    c.b = a.a * b.b + a.b * b.d;
    c.c = a.c * b.a + a.d * b.c;
    c.d = a.c * b.b + a.d * b.d;
    c.tx = a.tx * b.a + a.ty * b.c + b.tx;
    c.ty = a.tx * b.b + a.ty * b.d + b.ty;
  };
  Y.__super__ = ea;
  Y.prototype = v(ea.prototype, {
    opaqueBackground: null,
    parent: null,
    stage: null,
    __alpha: null,
    __blendMode: null,
    __cacheAsBitmap: null,
    __cacheAsBitmapMatrix: null,
    __cacheBitmap: null,
    __cacheBitmapBackground: null,
    __cacheBitmapColorTransform: null,
    __cacheBitmapData: null,
    __cacheBitmapData2: null,
    __cacheBitmapData3: null,
    __cacheBitmapMatrix: null,
    __cacheBitmapRenderer: null,
    __cairo: null,
    __children: null,
    __customRenderClear: null,
    __customRenderEvent: null,
    __filters: null,
    __graphics: null,
    __isCacheBitmapRender: null,
    __isMask: null,
    __loaderInfo: null,
    __mask: null,
    __maskTarget: null,
    __name: null,
    __objectTransform: null,
    __renderable: null,
    __renderDirty: null,
    __renderParent: null,
    __renderTransform: null,
    __renderTransformCache: null,
    __renderTransformChanged: null,
    __rotation: null,
    __rotationCosine: null,
    __rotationSine: null,
    __scaleX: null,
    __scaleY: null,
    __scrollRect: null,
    __shader: null,
    __tempPoint: null,
    __transform: null,
    __transformDirty: null,
    __visible: null,
    __worldAlpha: null,
    __worldAlphaChanged: null,
    __worldBlendMode: null,
    __worldClip: null,
    __worldClipChanged: null,
    __worldColorTransform: null,
    __worldShader: null,
    __worldTransform: null,
    __worldVisible: null,
    __worldVisibleChanged: null,
    __worldTransformInvalid: null,
    __worldZ: null,
    __canvas: null,
    __context: null,
    __style: null,
    addEventListener: function (a, b, c, d, e) {
      null == e && (e = !1);
      null == d && (d = 0);
      null == c && (c = !1);
      switch (a) {
        case "activate":
        case "deactivate":
        case "enterFrame":
        case "exitFrame":
        case "frameConstructed":
        case "render":
          Y.__broadcastEvents.exists(a) || Y.__broadcastEvents.set(a, []);
          var f = Y.__broadcastEvents.get(a);
          -1 == f.indexOf(this) && f.push(this);
          break;
        case "clearDOM":
        case "renderCairo":
        case "renderCanvas":
        case "renderDOM":
        case "renderOpenGL":
          null == this.__customRenderEvent &&
            ((this.__customRenderEvent = new Yg(null)),
            (this.__customRenderEvent.objectColorTransform = new Ka()),
            (this.__customRenderEvent.objectMatrix = new ia()),
            (this.__customRenderClear = !0));
      }
      ea.prototype.addEventListener.call(this, a, b, c, d, e);
    },
    dispatchEvent: function (a) {
      u.is(a, ua)
        ? ((a.stageX = this.__getRenderTransform().__transformX(
            a.localX,
            a.localY
          )),
          (a.stageY = this.__getRenderTransform().__transformY(
            a.localX,
            a.localY
          )))
        : u.is(a, tb) &&
          ((a.stageX = this.__getRenderTransform().__transformX(
            a.localX,
            a.localY
          )),
          (a.stageY = this.__getRenderTransform().__transformY(
            a.localX,
            a.localY
          )));
      a.target = this;
      return this.__dispatchWithCapture(a);
    },
    getBounds: function (a) {
      var b = ia.__pool.get();
      if (null != a && a != this) {
        b.copyFrom(this.__getWorldTransform());
        var c = ia.__pool.get();
        c.copyFrom(a.__getWorldTransform());
        c.invert();
        b.concat(c);
        ia.__pool.release(c);
      } else b.identity();
      a = new Z();
      this.__getBounds(a, b);
      ia.__pool.release(b);
      return a;
    },
    hitTestObject: function (a) {
      if (null != a && null != a.parent && null != this.parent) {
        var b = this.getBounds(this);
        a = a.getBounds(this);
        return b.intersects(a);
      }
      return !1;
    },
    removeEventListener: function (a, b, c) {
      null == c && (c = !1);
      ea.prototype.removeEventListener.call(this, a, b, c);
      switch (a) {
        case "activate":
        case "deactivate":
        case "enterFrame":
        case "exitFrame":
        case "frameConstructed":
        case "render":
          this.hasEventListener(a) ||
            (Y.__broadcastEvents.exists(a) &&
              S.remove(Y.__broadcastEvents.get(a), this));
          break;
        case "clearDOM":
        case "renderCairo":
        case "renderCanvas":
        case "renderDOM":
        case "renderOpenGL":
          this.hasEventListener("clearDOM") ||
            this.hasEventListener("renderCairo") ||
            this.hasEventListener("renderCanvas") ||
            this.hasEventListener("renderDOM") ||
            this.hasEventListener("renderOpenGL") ||
            (this.__customRenderEvent = null);
      }
    },
    __cleanup: function () {
      this.__context = this.__canvas = this.__cairo = null;
      null != this.__graphics && this.__graphics.__cleanup();
      null != this.__cacheBitmap &&
        (this.__cacheBitmap.__cleanup(), (this.__cacheBitmap = null));
      null != this.__cacheBitmapData &&
        (this.__cacheBitmapData.dispose(), (this.__cacheBitmapData = null));
    },
    __dispatch: function (a) {
      if (null != this.__eventMap && this.hasEventListener(a.type)) {
        var b = ea.prototype.__dispatchEvent.call(this, a);
        return a.__isCanceled ? !0 : b;
      }
      return !0;
    },
    __dispatchChildren: function (a) {},
    __dispatchEvent: function (a) {
      var b = a.bubbles ? this.parent : null,
        c = ea.prototype.__dispatchEvent.call(this, a);
      if (a.__isCanceled) return !0;
      null != b &&
        b != this &&
        ((a.eventPhase = 3),
        null == a.target && (a.target = this),
        b.__dispatchEvent(a));
      return c;
    },
    __dispatchWithCapture: function (a) {
      null == a.target && (a.target = this);
      if (null != this.parent)
        if (((a.eventPhase = 1), this.parent == this.stage))
          this.parent.__dispatch(a);
        else {
          for (var b = Y.__tempStack.get(), c = this.parent, d = 0; null != c; )
            b.set(d, c), (c = c.parent), ++d;
          c = 0;
          for (var e = d; c < e; ) {
            var f = c++;
            b.get(d - f - 1).__dispatch(a);
          }
          Y.__tempStack.release(b);
        }
      a.eventPhase = 2;
      return this.__dispatchEvent(a);
    },
    __enterFrame: function (a) {},
    __getBounds: function (a, b) {
      null != this.__graphics && this.__graphics.__getBounds(a, b);
    },
    __getCursor: function () {
      return null;
    },
    __getFilterBounds: function (a, b) {
      this.__getBounds(a, b);
      if (null != this.__filters) {
        b = Z.__pool.get();
        for (var c = 0, d = this.__filters; c < d.length; ) {
          var e = d[c];
          ++c;
          b.__expand(
            -e.__leftExtension,
            -e.__topExtension,
            e.__leftExtension + e.__rightExtension,
            e.__topExtension + e.__bottomExtension
          );
        }
        a.width += b.width;
        a.height += b.height;
        a.x += b.x;
        a.y += b.y;
        Z.__pool.release(b);
      }
    },
    __getInteractive: function (a) {
      return !1;
    },
    __getLocalBounds: function (a) {
      this.__getBounds(a, this.__transform);
      a.x -= this.__transform.tx;
      a.y -= this.__transform.ty;
    },
    __getRenderTransform: function () {
      this.__getWorldTransform();
      return this.__renderTransform;
    },
    __getWorldTransform: function () {
      if (this.__transformDirty || this.__worldTransformInvalid) {
        var a = [],
          b = this;
        if (null == this.parent) this.__update(!0, !1);
        else
          for (; b != this.stage && (a.push(b), (b = b.parent), null != b); );
        for (var c = a.length; 0 <= --c; ) (b = a[c]), b.__update(!0, !1);
      }
      return this.__worldTransform;
    },
    __globalToLocal: function (a, b) {
      this.__getRenderTransform();
      a == b
        ? this.__renderTransform.__transformInversePoint(a)
        : ((b.x = this.__renderTransform.__transformInverseX(a.x, a.y)),
          (b.y = this.__renderTransform.__transformInverseY(a.x, a.y)));
      return b;
    },
    __hitTest: function (a, b, c, d, e, f) {
      if (null != this.__graphics) {
        if (
          !f.__visible ||
          this.__isMask ||
          (null != this.get_mask() && !this.get_mask().__hitTestMask(a, b))
        )
          return !1;
        if (this.__graphics.__hitTest(a, b, c, this.__getRenderTransform()))
          return null == d || e || d.push(f), !0;
      }
      return !1;
    },
    __hitTestMask: function (a, b) {
      return null != this.__graphics &&
        this.__graphics.__hitTest(a, b, !0, this.__getRenderTransform())
        ? !0
        : !1;
    },
    __renderCairo: function (a) {},
    __renderCairoMask: function (a) {},
    __renderCanvas: function (a) {
      if (
        null == this.get_mask() ||
        (0 < this.get_mask().get_width() && 0 < this.get_mask().get_height())
      )
        this.__updateCacheBitmap(a, !1),
          null == this.__cacheBitmap || this.__isCacheBitmapRender
            ? Zg.render(this, a)
            : If.render(this.__cacheBitmap, a);
      this.__renderEvent(a);
    },
    __renderCanvasMask: function (a) {
      null != this.__graphics && q.renderMask(this.__graphics, a);
    },
    __renderDOM: function (a) {
      this.__updateCacheBitmap(a, !1);
      null == this.__cacheBitmap || this.__isCacheBitmapRender
        ? og.render(this, a)
        : (this.__renderDOMClear(a),
          (this.__cacheBitmap.stage = this.stage),
          zd.render(this.__cacheBitmap, a));
      this.__renderEvent(a);
    },
    __renderDOMClear: function (a) {
      og.clear(this, a);
    },
    __renderEvent: function (a) {
      if (null != this.__customRenderEvent && this.__renderable) {
        this.__customRenderEvent.allowSmoothing = a.__allowSmoothing;
        this.__customRenderEvent.objectMatrix.copyFrom(this.__renderTransform);
        this.__customRenderEvent.objectColorTransform.__copyFrom(
          this.__worldColorTransform
        );
        this.__customRenderEvent.renderer = a;
        switch (a.__type) {
          case "cairo":
            this.__customRenderEvent.type = "renderCairo";
            break;
          case "canvas":
            this.__customRenderEvent.type = "renderCanvas";
            break;
          case "dom":
            this.__customRenderEvent.type =
              null != this.stage && this.__worldVisible
                ? "renderDOM"
                : "clearDOM";
            break;
          case "opengl":
            a.__cleared || a.__clear();
            a.setShader(this.__worldShader);
            a.__context3D.__flushGL();
            this.__customRenderEvent.type = "renderOpenGL";
            break;
          default:
            return;
        }
        a.__setBlendMode(this.__worldBlendMode);
        a.__pushMaskObject(this);
        this.dispatchEvent(this.__customRenderEvent);
        a.__popMaskObject(this);
        "opengl" == a.__type && a.setViewport();
      }
    },
    __renderGL: function (a) {
      this.__updateCacheBitmap(a, !1);
      null == this.__cacheBitmap || this.__isCacheBitmapRender
        ? $g.render(this, a)
        : Ad.render(this.__cacheBitmap, a);
      this.__renderEvent(a);
    },
    __renderGLMask: function (a) {
      null != this.__graphics && Wf.renderMask(this, a);
    },
    __setParentRenderDirty: function () {
      var a = null != this.__renderParent ? this.__renderParent : this.parent;
      null == a ||
        a.__renderDirty ||
        ((a.__renderDirty = !0), a.__setParentRenderDirty());
    },
    __setRenderDirty: function () {
      this.__renderDirty ||
        ((this.__renderDirty = !0), this.__setParentRenderDirty());
    },
    __setStageReference: function (a) {
      this.stage = a;
    },
    __setTransformDirty: function () {
      this.__transformDirty ||
        ((this.__transformDirty = !0),
        this.__setWorldTransformInvalid(),
        this.__setParentRenderDirty());
    },
    __setWorldTransformInvalid: function () {
      this.__worldTransformInvalid = !0;
    },
    __shouldCacheHardware: function (a) {
      return 1 == a || null != this.__filters
        ? !0
        : 0 == a ||
          (null != this.__graphics && !jb.isCompatible(this.__graphics))
        ? !1
        : null;
    },
    __update: function (a, b) {
      var c = null != this.__renderParent ? this.__renderParent : this.parent;
      this.__isMask && null == c && (c = this.__maskTarget);
      this.__renderable =
        this.__visible &&
        0 != this.__scaleX &&
        0 != this.__scaleY &&
        !this.__isMask &&
        (null == c || !c.__isMask);
      this.__updateTransforms();
      this.__worldTransformInvalid = this.__transformDirty = !1;
      if (!a)
        if (
          (Y.__supportDOM &&
            ((this.__renderTransformChanged = !this.__renderTransform.equals(
              this.__renderTransformCache
            )),
            null == this.__renderTransformCache
              ? (this.__renderTransformCache = this.__renderTransform.clone())
              : this.__renderTransformCache.copyFrom(this.__renderTransform)),
          null != c)
        ) {
          if (Y.__supportDOM) {
            var d = c.__worldVisible && this.__visible;
            this.__worldVisibleChanged = this.__worldVisible != d;
            this.__worldVisible = d;
            d = this.get_alpha() * c.__worldAlpha;
            this.__worldAlphaChanged = this.__worldAlpha != d;
            this.__worldAlpha = d;
          } else this.__worldAlpha = this.get_alpha() * c.__worldAlpha;
          null != this.__objectTransform
            ? (this.__worldColorTransform.__copyFrom(
                this.__objectTransform.get_colorTransform()
              ),
              this.__worldColorTransform.__combine(c.__worldColorTransform))
            : this.__worldColorTransform.__copyFrom(c.__worldColorTransform);
          this.__worldBlendMode =
            null == this.__blendMode || 10 == this.__blendMode
              ? c.__blendMode
              : this.__blendMode;
          this.__worldShader =
            null == this.__shader ? c.__shader : this.__shader;
        } else
          (this.__worldAlpha = this.get_alpha()),
            Y.__supportDOM &&
              ((this.__worldVisibleChanged =
                this.__worldVisible != this.__visible),
              (this.__worldVisible = this.__visible),
              (this.__worldAlphaChanged =
                this.__worldAlpha != this.get_alpha())),
            null != this.__objectTransform
              ? this.__worldColorTransform.__copyFrom(
                  this.__objectTransform.get_colorTransform()
                )
              : this.__worldColorTransform.__identity();
      b && null != this.get_mask() && this.get_mask().__update(a, !0);
    },
    __updateCacheBitmap: function (a, b) {
      if (this.__isCacheBitmapRender) return !1;
      var c = Y.__tempColorTransform;
      c.__copyFrom(this.__worldColorTransform);
      null != a.__worldColorTransform && c.__combine(a.__worldColorTransform);
      if (
        this.get_cacheAsBitmap() ||
        ("opengl" != a.__type && !c.__isDefault())
      ) {
        var d = null,
          e =
            (b =
              null == this.__cacheBitmap ||
              (this.__renderDirty &&
                (b ||
                  (null != this.__children && 0 < this.__children.length) ||
                  (null != this.__graphics && this.__graphics.__dirty))) ||
              this.opaqueBackground != this.__cacheBitmapBackground ||
              ("opengl" != a.__type &&
                !this.__cacheBitmapColorTransform.__equals(c))) ||
            ("opengl" == a.__type &&
              !this.__cacheBitmap.__worldTransform.equals(
                this.__worldTransform
              )),
          f = null != this.__filters;
        if (f && !b)
          for (var g = 0, h = this.__filters; g < h.length; ) {
            var n = h[g];
            ++g;
            if (n.__renderDirty) {
              b = !0;
              break;
            }
          }
        null == this.__cacheBitmapMatrix &&
          (this.__cacheBitmapMatrix = new ia());
        var p =
          null != this.__cacheAsBitmapMatrix
            ? this.__cacheAsBitmapMatrix
            : this.__renderTransform;
        b ||
          (p.a == this.__cacheBitmapMatrix.a &&
            p.b == this.__cacheBitmapMatrix.b &&
            p.c == this.__cacheBitmapMatrix.c &&
            p.d == this.__cacheBitmapMatrix.d) ||
          (b = !0);
        !b &&
          "opengl" != a.__type &&
          null != this.__cacheBitmapData &&
          null != this.__cacheBitmapData.image &&
          this.__cacheBitmapData.image.version <
            this.__cacheBitmapData.__textureVersion &&
          (b = !0);
        this.__cacheBitmapMatrix.copyFrom(p);
        this.__cacheBitmapMatrix.tx = 0;
        var k = (n = this.__cacheBitmapMatrix.ty = 0),
          l = (h = g = 0),
          m = 0;
        if (e || b)
          (d = Z.__pool.get()),
            this.__getFilterBounds(d, this.__cacheBitmapMatrix),
            (g = Math.ceil(d.width)),
            (h = Math.ceil(d.height)),
            (l = 0 < d.x ? Math.ceil(d.x) : Math.floor(d.x)),
            (m = 0 < d.y ? Math.ceil(d.y) : Math.floor(d.y)),
            null != this.__cacheBitmapData
              ? g > this.__cacheBitmapData.width ||
                h > this.__cacheBitmapData.height
                ? ((n = Math.ceil(
                    Math.max(1.25 * g, this.__cacheBitmapData.width)
                  )),
                  (k = Math.ceil(
                    Math.max(1.25 * h, this.__cacheBitmapData.height)
                  )),
                  (b = !0))
                : ((n = this.__cacheBitmapData.width),
                  (k = this.__cacheBitmapData.height))
              : ((n = g), (k = h));
        if (b)
          if (
            ((e = !0),
            (this.__cacheBitmapBackground = this.opaqueBackground),
            0.5 <= g && 0.5 <= h)
          ) {
            var q = null != this.opaqueBackground && (n != g || k != h),
              E =
                null != this.opaqueBackground
                  ? -16777216 | this.opaqueBackground
                  : 0,
              u = q ? 0 : E,
              t = "opengl" == a.__type;
            null == this.__cacheBitmapData ||
            n > this.__cacheBitmapData.width ||
            k > this.__cacheBitmapData.height
              ? ((this.__cacheBitmapData = new ma(n, k, !0, u)),
                null == this.__cacheBitmap && (this.__cacheBitmap = new Ab()),
                (this.__cacheBitmap.__bitmapData = this.__cacheBitmapData),
                (this.__cacheBitmapRenderer = null))
              : this.__cacheBitmapData.__fillRect(
                  this.__cacheBitmapData.rect,
                  u,
                  t
                );
            q &&
              (d.setTo(0, 0, g, h), this.__cacheBitmapData.__fillRect(d, E, t));
          } else
            return (
              (this.__cacheBitmapRenderer =
                this.__cacheBitmapData3 =
                this.__cacheBitmapData2 =
                this.__cacheBitmapData =
                this.__cacheBitmap =
                  null),
              !0
            );
        else this.__cacheBitmapData = this.__cacheBitmap.get_bitmapData();
        if (e || b)
          this.__cacheBitmap.__worldTransform.copyFrom(this.__worldTransform),
            p == this.__renderTransform
              ? (this.__cacheBitmap.__renderTransform.identity(),
                (this.__cacheBitmap.__renderTransform.tx =
                  this.__renderTransform.tx + l),
                (this.__cacheBitmap.__renderTransform.ty =
                  this.__renderTransform.ty + m))
              : (this.__cacheBitmap.__renderTransform.copyFrom(
                  this.__cacheBitmapMatrix
                ),
                this.__cacheBitmap.__renderTransform.invert(),
                this.__cacheBitmap.__renderTransform.concat(
                  this.__renderTransform
                ),
                (this.__cacheBitmap.__renderTransform.tx += l),
                (this.__cacheBitmap.__renderTransform.ty += m));
        this.__cacheBitmap.smoothing = a.__allowSmoothing;
        this.__cacheBitmap.__renderable = this.__renderable;
        this.__cacheBitmap.__worldAlpha = this.__worldAlpha;
        this.__cacheBitmap.__worldBlendMode = this.__worldBlendMode;
        this.__cacheBitmap.__worldShader = this.__worldShader;
        this.__cacheBitmap.__scrollRect = this.__scrollRect;
        this.__cacheBitmap.set_mask(this.__mask);
        if (b) {
          p = a.__type;
          "opengl" == p &&
            0 == this.__shouldCacheHardware(null) &&
            (p = "canvas");
          if (
            null == this.__cacheBitmapRenderer ||
            p != this.__cacheBitmapRenderer.__type
          )
            "opengl" == p
              ? (this.__cacheBitmapRenderer = new fa(
                  r.__cast(a, fa).__context3D,
                  this.__cacheBitmapData
                ))
              : (null == this.__cacheBitmapData.image &&
                  ((this.__cacheBitmapData = new ma(
                    n,
                    k,
                    !0,
                    null != this.opaqueBackground
                      ? -16777216 | this.opaqueBackground
                      : 0
                  )),
                  (this.__cacheBitmap.__bitmapData = this.__cacheBitmapData)),
                na.convertToCanvas(this.__cacheBitmapData.image),
                (this.__cacheBitmapRenderer = new Ce(
                  this.__cacheBitmapData.image.buffer.__srcContext
                ))),
              (this.__cacheBitmapRenderer.__worldTransform = new ia()),
              (this.__cacheBitmapRenderer.__worldColorTransform = new Ka());
          null == this.__cacheBitmapColorTransform &&
            (this.__cacheBitmapColorTransform = new Ka());
          this.__cacheBitmapRenderer.__stage = this.stage;
          this.__cacheBitmapRenderer.__allowSmoothing = a.__allowSmoothing;
          this.__cacheBitmapRenderer.__setBlendMode(10);
          this.__cacheBitmapRenderer.__worldAlpha = 1 / this.__worldAlpha;
          this.__cacheBitmapRenderer.__worldTransform.copyFrom(
            this.__renderTransform
          );
          this.__cacheBitmapRenderer.__worldTransform.invert();
          this.__cacheBitmapRenderer.__worldTransform.concat(
            this.__cacheBitmapMatrix
          );
          this.__cacheBitmapRenderer.__worldTransform.tx -= l;
          this.__cacheBitmapRenderer.__worldTransform.ty -= m;
          this.__cacheBitmapRenderer.__worldColorTransform.__copyFrom(c);
          this.__cacheBitmapRenderer.__worldColorTransform.__invert();
          this.__isCacheBitmapRender = !0;
          if ("opengl" == this.__cacheBitmapRenderer.__type) {
            l = this.__cacheBitmapRenderer;
            m = l.__context3D;
            p = m.__state.renderToTexture;
            q = m.__state.renderToTextureDepthStencil;
            E = m.__state.renderToTextureAntiAlias;
            u = m.__state.renderToTextureSurfaceSelector;
            t = a.__blendMode;
            a.__suspendClipAndMask();
            l.__copyShader(a);
            this.__cacheBitmapData.__setUVRect(m, 0, 0, g, h);
            l.__setRenderTarget(this.__cacheBitmapData);
            null != this.__cacheBitmapData.image &&
              (this.__cacheBitmapData.__textureVersion =
                this.__cacheBitmapData.image.version + 1);
            this.__cacheBitmapData.__drawGL(this, l);
            if (f) {
              var w = !1;
              f = 0;
              for (var v = this.__filters; f < v.length; ) {
                var x = v[f];
                ++f;
                x.__preserveObject && (w = !0);
              }
              f = this.__cacheBitmapData;
              x = null;
              null == this.__cacheBitmapData2 ||
              n > this.__cacheBitmapData2.width ||
              k > this.__cacheBitmapData2.height
                ? (this.__cacheBitmapData2 = new ma(n, k, !0, 0))
                : (this.__cacheBitmapData2.fillRect(
                    this.__cacheBitmapData2.rect,
                    0
                  ),
                  null != this.__cacheBitmapData2.image &&
                    (this.__cacheBitmapData2.__textureVersion =
                      this.__cacheBitmapData2.image.version + 1));
              this.__cacheBitmapData2.__setUVRect(m, 0, 0, g, h);
              v = this.__cacheBitmapData2;
              w &&
                (null == this.__cacheBitmapData3 ||
                n > this.__cacheBitmapData3.width ||
                k > this.__cacheBitmapData3.height
                  ? (this.__cacheBitmapData3 = new ma(n, k, !0, 0))
                  : (this.__cacheBitmapData3.fillRect(
                      this.__cacheBitmapData3.rect,
                      0
                    ),
                    null != this.__cacheBitmapData3.image &&
                      (this.__cacheBitmapData3.__textureVersion =
                        this.__cacheBitmapData3.image.version + 1)),
                this.__cacheBitmapData3.__setUVRect(m, 0, 0, g, h),
                (x = this.__cacheBitmapData3));
              l.__setBlendMode(10);
              l.__worldAlpha = 1;
              l.__worldTransform.identity();
              l.__worldColorTransform.__identity();
              g = 0;
              for (h = this.__filters; g < h.length; ) {
                n = h[g];
                ++g;
                n.__preserveObject &&
                  (l.__setRenderTarget(x),
                  l.__renderFilterPass(
                    f,
                    l.__defaultDisplayShader,
                    n.__smooth
                  ));
                k = 0;
                for (w = n.__numShaderPasses; k < w; ) {
                  var y = k++;
                  y = n.__initShader(l, y);
                  l.__setBlendMode(n.__shaderBlendMode);
                  l.__setRenderTarget(v);
                  l.__renderFilterPass(f, y, n.__smooth);
                  y = f;
                  f = v;
                  v = y;
                }
                n.__preserveObject &&
                  (l.__setBlendMode(10),
                  l.__setRenderTarget(f),
                  l.__renderFilterPass(
                    x,
                    l.__defaultDisplayShader,
                    n.__smooth,
                    !1
                  ));
                n.__renderDirty = !1;
              }
              this.__cacheBitmap.__bitmapData = f;
            }
            a.__blendMode = 10;
            a.__setBlendMode(t);
            a.__copyShader(l);
            null != p
              ? m.setRenderToTexture(p, q, E, u)
              : m.setRenderToBackBuffer();
            a.__resumeClipAndMask(l);
            a.setViewport();
            this.__cacheBitmapColorTransform.__copyFrom(c);
          } else {
            this.__cacheBitmapData.__drawCanvas(
              this,
              this.__cacheBitmapRenderer
            );
            if (f) {
              q = a = !1;
              l = 0;
              for (m = this.__filters; l < m.length; )
                (p = m[l]),
                  ++l,
                  p.__needSecondBitmapData && (a = !0),
                  p.__preserveObject && (q = !0);
              l = this.__cacheBitmapData;
              p = null;
              a
                ? (null == this.__cacheBitmapData2 ||
                  null == this.__cacheBitmapData2.image ||
                  n > this.__cacheBitmapData2.width ||
                  k > this.__cacheBitmapData2.height
                    ? (this.__cacheBitmapData2 = new ma(n, k, !0, 0))
                    : this.__cacheBitmapData2.fillRect(
                        this.__cacheBitmapData2.rect,
                        0
                      ),
                  (m = this.__cacheBitmapData2))
                : (m = l);
              q &&
                (null == this.__cacheBitmapData3 ||
                null == this.__cacheBitmapData3.image ||
                n > this.__cacheBitmapData3.width ||
                k > this.__cacheBitmapData3.height
                  ? (this.__cacheBitmapData3 = new ma(n, k, !0, 0))
                  : this.__cacheBitmapData3.fillRect(
                      this.__cacheBitmapData3.rect,
                      0
                    ),
                (p = this.__cacheBitmapData3));
              n = Z.__pool.get();
              n.setTo(0, 0, g, h);
              null == this.__tempPoint && (this.__tempPoint = new aa());
              g = this.__tempPoint;
              h = 0;
              for (k = this.__filters; h < k.length; )
                (E = k[h]),
                  ++h,
                  E.__preserveObject && p.copyPixels(l, l.rect, g),
                  (q = E.__applyFilter(m, l, n, g)),
                  E.__preserveObject &&
                    q.draw(
                      p,
                      null,
                      null != this.__objectTransform
                        ? this.__objectTransform.get_colorTransform()
                        : null
                    ),
                  (E.__renderDirty = !1),
                  a && q == m && ((q = l), (l = m), (m = q));
              this.__cacheBitmapData != l &&
                ((q = this.__cacheBitmapData),
                (this.__cacheBitmapData = l),
                (this.__cacheBitmapData2 = q),
                (this.__cacheBitmap.__bitmapData = this.__cacheBitmapData),
                (this.__cacheBitmapRenderer = null));
              Z.__pool.release(n);
              this.__cacheBitmap.__imageVersion =
                this.__cacheBitmapData.__textureVersion;
            }
            this.__cacheBitmapColorTransform.__copyFrom(c);
            this.__cacheBitmapColorTransform.__isDefault() ||
              this.__cacheBitmapData.colorTransform(
                this.__cacheBitmapData.rect,
                this.__cacheBitmapColorTransform
              );
          }
          this.__isCacheBitmapRender = !1;
        }
        (e || b) && Z.__pool.release(d);
        return e;
      }
      return null != this.__cacheBitmap
        ? ("dom" == a.__type && this.__cacheBitmap.__renderDOMClear(a),
          (this.__cacheBitmapRenderer =
            this.__cacheBitmapColorTransform =
            this.__cacheBitmapData3 =
            this.__cacheBitmapData2 =
            this.__cacheBitmapData =
            this.__cacheBitmap =
              null),
          !0)
        : !1;
    },
    __updateTransforms: function (a) {
      var b = null != a;
      a = b ? a : this.__transform;
      null == this.__worldTransform && (this.__worldTransform = new ia());
      null == this.__renderTransform && (this.__renderTransform = new ia());
      var c = null != this.__renderParent ? this.__renderParent : this.parent;
      b || null == this.parent
        ? this.__worldTransform.copyFrom(a)
        : Y.__calculateAbsoluteTransform(
            a,
            this.parent.__worldTransform,
            this.__worldTransform
          );
      b || null == c
        ? this.__renderTransform.copyFrom(a)
        : Y.__calculateAbsoluteTransform(
            a,
            c.__renderTransform,
            this.__renderTransform
          );
      null != this.__scrollRect &&
        this.__renderTransform.__translateTransformed(
          -this.__scrollRect.x,
          -this.__scrollRect.y
        );
    },
    get_alpha: function () {
      return this.__alpha;
    },
    set_alpha: function (a) {
      1 < a && (a = 1);
      a != this.__alpha && this.__setRenderDirty();
      return (this.__alpha = a);
    },
    set_blendMode: function (a) {
      null == a && (a = 10);
      a != this.__blendMode && this.__setRenderDirty();
      return (this.__blendMode = a);
    },
    get_cacheAsBitmap: function () {
      return null == this.__filters ? this.__cacheAsBitmap : !0;
    },
    set_cacheAsBitmap: function (a) {
      this.__setRenderDirty();
      return (this.__cacheAsBitmap = a);
    },
    get_filters: function () {
      return null == this.__filters ? [] : this.__filters.slice();
    },
    set_filters: function (a) {
      this.__filters = null != a && 0 < a.length ? a : null;
      this.__setRenderDirty();
      return a;
    },
    get_height: function () {
      var a = Z.__pool.get();
      this.__getLocalBounds(a);
      var b = a.height;
      Z.__pool.release(a);
      return b;
    },
    set_height: function (a) {
      var b = Z.__pool.get(),
        c = ia.__pool.get();
      c.identity();
      this.__getBounds(b, c);
      a != b.height ? this.set_scaleY(a / b.height) : this.set_scaleY(1);
      Z.__pool.release(b);
      ia.__pool.release(c);
      return a;
    },
    get_loaderInfo: function () {
      return null != this.stage ? oc.current.__loaderInfo : null;
    },
    get_mask: function () {
      return this.__mask;
    },
    set_mask: function (a) {
      if (a == this.__mask) return a;
      a != this.__mask && (this.__setTransformDirty(), this.__setRenderDirty());
      null != this.__mask &&
        ((this.__mask.__isMask = !1),
        (this.__mask.__maskTarget = null),
        this.__mask.__setTransformDirty(),
        this.__mask.__setRenderDirty());
      null != a &&
        ((a.__isMask = !0),
        (a.__maskTarget = this),
        a.__setWorldTransformInvalid());
      null != this.__cacheBitmap &&
        this.__cacheBitmap.get_mask() != a &&
        this.__cacheBitmap.set_mask(a);
      return (this.__mask = a);
    },
    get_mouseX: function () {
      var a =
          null != this.stage ? this.stage.__mouseX : oc.current.stage.__mouseX,
        b =
          null != this.stage ? this.stage.__mouseY : oc.current.stage.__mouseY;
      return this.__getRenderTransform().__transformInverseX(a, b);
    },
    get_mouseY: function () {
      var a =
          null != this.stage ? this.stage.__mouseX : oc.current.stage.__mouseX,
        b =
          null != this.stage ? this.stage.__mouseY : oc.current.stage.__mouseY;
      return this.__getRenderTransform().__transformInverseY(a, b);
    },
    get_name: function () {
      return this.__name;
    },
    set_name: function (a) {
      return (this.__name = a);
    },
    get_rotation: function () {
      return this.__rotation;
    },
    set_rotation: function (a) {
      if (a != this.__rotation) {
        this.__rotation = a;
        var b = (Math.PI / 180) * this.__rotation;
        this.__rotationSine = Math.sin(b);
        this.__rotationCosine = Math.cos(b);
        this.__transform.a = this.__rotationCosine * this.__scaleX;
        this.__transform.b = this.__rotationSine * this.__scaleX;
        this.__transform.c = -this.__rotationSine * this.__scaleY;
        this.__transform.d = this.__rotationCosine * this.__scaleY;
        this.__setTransformDirty();
      }
      return a;
    },
    get_scaleX: function () {
      return this.__scaleX;
    },
    set_scaleX: function (a) {
      if (a != this.__scaleX)
        if (((this.__scaleX = a), 0 == this.__transform.b))
          a != this.__transform.a && this.__setTransformDirty(),
            (this.__transform.a = a);
        else {
          var b = this.__rotationCosine * a,
            c = this.__rotationSine * a;
          (this.__transform.a == b && this.__transform.b == c) ||
            this.__setTransformDirty();
          this.__transform.a = b;
          this.__transform.b = c;
        }
      return a;
    },
    get_scaleY: function () {
      return this.__scaleY;
    },
    set_scaleY: function (a) {
      if (a != this.__scaleY)
        if (((this.__scaleY = a), 0 == this.__transform.c))
          a != this.__transform.d && this.__setTransformDirty(),
            (this.__transform.d = a);
        else {
          var b = -this.__rotationSine * a,
            c = this.__rotationCosine * a;
          (this.__transform.d == c && this.__transform.c == b) ||
            this.__setTransformDirty();
          this.__transform.c = b;
          this.__transform.d = c;
        }
      return a;
    },
    get_transform: function () {
      null == this.__objectTransform && (this.__objectTransform = new ah(this));
      return this.__objectTransform;
    },
    set_transform: function (a) {
      if (null == a)
        throw new G(new Jf("Parameter transform must be non-null."));
      null == this.__objectTransform && (this.__objectTransform = new ah(this));
      this.__setTransformDirty();
      this.__objectTransform.set_matrix(a.get_matrix());
      this.__objectTransform
        .get_colorTransform()
        .__equals(a.get_colorTransform()) ||
        (this.__objectTransform
          .get_colorTransform()
          .__copyFrom(a.get_colorTransform()),
        this.__setRenderDirty());
      return this.__objectTransform;
    },
    get_visible: function () {
      return this.__visible;
    },
    set_visible: function (a) {
      a != this.__visible && this.__setRenderDirty();
      return (this.__visible = a);
    },
    get_width: function () {
      var a = Z.__pool.get();
      this.__getLocalBounds(a);
      var b = a.width;
      Z.__pool.release(a);
      return b;
    },
    set_width: function (a) {
      var b = Z.__pool.get(),
        c = ia.__pool.get();
      c.identity();
      this.__getBounds(b, c);
      a != b.width ? this.set_scaleX(a / b.width) : this.set_scaleX(1);
      Z.__pool.release(b);
      ia.__pool.release(c);
      return a;
    },
    get_x: function () {
      return this.__transform.tx;
    },
    set_x: function (a) {
      a != this.__transform.tx && this.__setTransformDirty();
      return (this.__transform.tx = a);
    },
    get_y: function () {
      return this.__transform.ty;
    },
    set_y: function (a) {
      a != this.__transform.ty && this.__setTransformDirty();
      return (this.__transform.ty = a);
    },
    __class__: Y,
    __properties__: {
      set_y: "set_y",
      get_y: "get_y",
      set_x: "set_x",
      get_x: "get_x",
      set_width: "set_width",
      get_width: "get_width",
      set_visible: "set_visible",
      get_visible: "get_visible",
      set_transform: "set_transform",
      get_transform: "get_transform",
      set_scaleY: "set_scaleY",
      get_scaleY: "get_scaleY",
      set_scaleX: "set_scaleX",
      get_scaleX: "get_scaleX",
      set_rotation: "set_rotation",
      get_rotation: "get_rotation",
      set_name: "set_name",
      get_name: "get_name",
      get_mouseY: "get_mouseY",
      get_mouseX: "get_mouseX",
      set_mask: "set_mask",
      get_mask: "get_mask",
      get_loaderInfo: "get_loaderInfo",
      set_height: "set_height",
      get_height: "get_height",
      set_filters: "set_filters",
      get_filters: "get_filters",
      set_cacheAsBitmap: "set_cacheAsBitmap",
      get_cacheAsBitmap: "get_cacheAsBitmap",
      set_blendMode: "set_blendMode",
      set_alpha: "set_alpha",
      get_alpha: "get_alpha",
    },
  });
  var ja = function () {
    Y.call(this);
    this.doubleClickEnabled = !1;
    this.mouseEnabled = !0;
    this.needsSoftKeyboard = !1;
    this.__tabEnabled = null;
    this.__tabIndex = -1;
  };
  l["openfl.display.InteractiveObject"] = ja;
  ja.__name__ = ["openfl", "display", "InteractiveObject"];
  ja.__super__ = Y;
  ja.prototype = v(Y.prototype, {
    doubleClickEnabled: null,
    mouseEnabled: null,
    needsSoftKeyboard: null,
    __tabEnabled: null,
    __tabIndex: null,
    __allowMouseFocus: function () {
      return this.get_tabEnabled();
    },
    __getInteractive: function (a) {
      null != a &&
        (a.push(this), null != this.parent && this.parent.__getInteractive(a));
      return !0;
    },
    __hitTest: function (a, b, c, d, e, f) {
      return !f.get_visible() || this.__isMask || (e && !this.mouseEnabled)
        ? !1
        : Y.prototype.__hitTest.call(this, a, b, c, d, e, f);
    },
    get_tabEnabled: function () {
      return 1 == this.__tabEnabled ? !0 : !1;
    },
    __class__: ja,
    __properties__: v(Y.prototype.__properties__, {
      get_tabEnabled: "get_tabEnabled",
    }),
  });
  var Lb = function () {
    ja.call(this);
    this.mouseChildren = !0;
    this.__children = [];
    this.__removedChildren = Eb.toObjectVector(null);
  };
  l["openfl.display.DisplayObjectContainer"] = Lb;
  Lb.__name__ = ["openfl", "display", "DisplayObjectContainer"];
  Lb.__super__ = ja;
  Lb.prototype = v(ja.prototype, {
    mouseChildren: null,
    __removedChildren: null,
    addChild: function (a) {
      return this.addChildAt(a, this.get_numChildren());
    },
    addChildAt: function (a, b) {
      if (null == a)
        throw (
          ((a = new Jf("Error #2007: Parameter child must be non-null.")),
          (a.errorID = 2007),
          new G(a))
        );
      if (a.stage == a)
        throw (
          ((a = new pg(
            "Error #3783: A Stage object cannot be added as the child of another object."
          )),
          (a.errorID = 3783),
          new G(a))
        );
      if (b > this.__children.length || 0 > b)
        throw new G("Invalid index position " + b);
      if (a.parent == this)
        this.__children[b] != a &&
          (S.remove(this.__children, a),
          this.__children.splice(b, 0, a),
          this.__setRenderDirty());
      else {
        null != a.parent && a.parent.removeChild(a);
        this.__children.splice(b, 0, a);
        a.parent = this;
        (b = null != this.stage && null == a.stage) &&
          this.__setStageReference(this.stage);
        a.__setTransformDirty();
        a.__setRenderDirty();
        this.__setRenderDirty();
        var c = new X("added", !0);
        c.target = a;
        a.__dispatchWithCapture(c);
        b &&
          ((b = new X("addedToStage", !1, !1)),
          a.__dispatchWithCapture(b),
          a.__dispatchChildren(b));
      }
      return a;
    },
    contains: function (a) {
      for (; a != this && null != a; ) a = a.parent;
      return a == this;
    },
    getChildAt: function (a) {
      return 0 <= a && a < this.__children.length ? this.__children[a] : null;
    },
    getChildByName: function (a) {
      for (var b = 0, c = this.__children; b < c.length; ) {
        var d = c[b];
        ++b;
        if (d.get_name() == a) return d;
      }
      return null;
    },
    removeChild: function (a) {
      if (null != a && a.parent == this) {
        a.__setTransformDirty();
        a.__setRenderDirty();
        this.__setRenderDirty();
        var b = new X("removed", !0);
        a.__dispatchWithCapture(b);
        null != this.stage &&
          (null != a.stage &&
            this.stage.get_focus() == a &&
            this.stage.set_focus(null),
          (b = new X("removedFromStage", !1, !1)),
          a.__dispatchWithCapture(b),
          a.__dispatchChildren(b),
          a.__setStageReference(null));
        a.parent = null;
        S.remove(this.__children, a);
        this.__removedChildren.push(a);
        a.__setTransformDirty();
      }
      return a;
    },
    removeChildAt: function (a) {
      return 0 <= a && a < this.__children.length
        ? this.removeChild(this.__children[a])
        : null;
    },
    __cleanup: function () {
      ja.prototype.__cleanup.call(this);
      for (var a = 0, b = this.__children; a < b.length; ) {
        var c = b[a];
        ++a;
        c.__cleanup();
      }
      this.__cleanupRemovedChildren();
    },
    __cleanupRemovedChildren: function () {
      for (var a = 0, b = this.__removedChildren; a < b.get_length(); ) {
        var c = b.get(a);
        ++a;
        null == c.stage && c.__cleanup();
      }
      this.__removedChildren.set_length(0);
    },
    __dispatchChildren: function (a) {
      if (null != this.__children)
        for (var b = 0, c = this.__children; b < c.length; ) {
          var d = c[b];
          ++b;
          a.target = d;
          if (!d.__dispatchWithCapture(a)) break;
          d.__dispatchChildren(a);
        }
    },
    __enterFrame: function (a) {
      for (var b = 0, c = this.__children; b < c.length; ) {
        var d = c[b];
        ++b;
        d.__enterFrame(a);
      }
    },
    __getBounds: function (a, b) {
      ja.prototype.__getBounds.call(this, a, b);
      if (0 != this.__children.length) {
        for (
          var c = ia.__pool.get(), d = 0, e = this.__children;
          d < e.length;

        ) {
          var f = e[d];
          ++d;
          0 != f.__scaleX &&
            0 != f.__scaleY &&
            (Y.__calculateAbsoluteTransform(f.__transform, b, c),
            f.__getBounds(a, c));
        }
        ia.__pool.release(c);
      }
    },
    __getFilterBounds: function (a, b) {
      ja.prototype.__getFilterBounds.call(this, a, b);
      if (0 != this.__children.length) {
        for (
          var c = ia.__pool.get(), d = 0, e = this.__children;
          d < e.length;

        ) {
          var f = e[d];
          ++d;
          0 == f.__scaleX ||
            0 == f.__scaleY ||
            f.__isMask ||
            (Y.__calculateAbsoluteTransform(f.__transform, b, c),
            f.__getFilterBounds(a, c));
        }
        ia.__pool.release(c);
      }
    },
    __hitTest: function (a, b, c, d, e, f) {
      if (
        !f.get_visible() ||
        this.__isMask ||
        (e && !this.mouseEnabled && !this.mouseChildren) ||
        (null != this.get_mask() && !this.get_mask().__hitTestMask(a, b))
      )
        return !1;
      if (null != this.__scrollRect) {
        var g = aa.__pool.get();
        g.setTo(a, b);
        this.__getRenderTransform().__transformInversePoint(g);
        if (!this.__scrollRect.containsPoint(g))
          return aa.__pool.release(g), !1;
        aa.__pool.release(g);
      }
      g = this.__children.length;
      if (e)
        if (null == d || !this.mouseChildren)
          for (; 0 <= --g; ) {
            if (
              this.__children[g].__hitTest(
                a,
                b,
                c,
                null,
                !0,
                this.__children[g]
              )
            )
              return null != d && d.push(f), !0;
          }
        else {
          if (null != d) {
            e = d.length;
            for (
              var h, n = !1;
              0 <= --g &&
              !(
                ((h = this.__children[g].__getInteractive(null)) ||
                  (this.mouseEnabled && !n)) &&
                this.__children[g].__hitTest(
                  a,
                  b,
                  c,
                  d,
                  !0,
                  this.__children[g]
                ) &&
                ((n = !0), h && d.length > e)
              );

            );
            if (n) return d.splice(e, 0, f), !0;
          }
        }
      else {
        for (
          f = !1;
          0 <= --g &&
          (!this.__children[g].__hitTest(a, b, c, d, !1, this.__children[g]) ||
            ((f = !0), null != d));

        );
        return f;
      }
      return !1;
    },
    __hitTestMask: function (a, b) {
      for (var c = this.__children.length; 0 <= --c; )
        if (this.__children[c].__hitTestMask(a, b)) return !0;
      return !1;
    },
    __renderCairo: function (a) {},
    __renderCairoMask: function (a) {},
    __renderCanvas: function (a) {
      this.__cleanupRemovedChildren();
      if (
        !(
          !this.__renderable ||
          0 >= this.__worldAlpha ||
          (null != this.get_mask() &&
            (0 >= this.get_mask().get_width() ||
              0 >= this.get_mask().get_height()))
        ) &&
        (ja.prototype.__renderCanvas.call(this, a),
        null == this.__cacheBitmap || this.__isCacheBitmapRender)
      ) {
        a.__pushMaskObject(this);
        if (null != a.__stage) {
          for (var b = 0, c = this.__children; b < c.length; ) {
            var d = c[b];
            ++b;
            d.__renderCanvas(a);
            d.__renderDirty = !1;
          }
          this.__renderDirty = !1;
        } else
          for (b = 0, c = this.__children; b < c.length; )
            (d = c[b]), ++b, d.__renderCanvas(a);
        a.__popMaskObject(this);
      }
    },
    __renderCanvasMask: function (a) {
      this.__cleanupRemovedChildren();
      null != this.__graphics && q.renderMask(this.__graphics, a);
      for (var b = 0, c = this.__children; b < c.length; ) {
        var d = c[b];
        ++b;
        d.__renderCanvasMask(a);
      }
    },
    __renderDOM: function (a) {
      this.__cleanupRemovedChildren();
      ja.prototype.__renderDOM.call(this, a);
      if (null == this.__cacheBitmap || this.__isCacheBitmapRender) {
        a.__pushMaskObject(this);
        if (null != a.__stage) {
          for (var b = 0, c = this.__children; b < c.length; ) {
            var d = c[b];
            ++b;
            d.__renderDOM(a);
            d.__renderDirty = !1;
          }
          this.__renderDirty = !1;
        } else
          for (b = 0, c = this.__children; b < c.length; )
            (d = c[b]), ++b, d.__renderDOM(a);
        a.__popMaskObject(this);
      }
    },
    __renderDOMClear: function (a) {
      this.__cleanupRemovedChildren();
      for (var b = 0, c = this.__children; b < c.length; ) {
        var d = c[b];
        ++b;
        d.__renderDOMClear(a);
      }
    },
    __renderGL: function (a) {
      this.__cleanupRemovedChildren();
      if (
        this.__renderable &&
        !(0 >= this.__worldAlpha) &&
        (ja.prototype.__renderGL.call(this, a),
        null == this.__cacheBitmap || this.__isCacheBitmapRender)
      ) {
        if (0 < this.__children.length)
          if ((a.__pushMaskObject(this), null != a.__stage)) {
            for (var b = 0, c = this.__children; b < c.length; ) {
              var d = c[b];
              ++b;
              d.__renderGL(a);
              d.__renderDirty = !1;
            }
            this.__renderDirty = !1;
          } else
            for (b = 0, c = this.__children; b < c.length; )
              (d = c[b]), ++b, d.__renderGL(a);
        0 < this.__children.length && a.__popMaskObject(this);
      }
    },
    __renderGLMask: function (a) {
      this.__cleanupRemovedChildren();
      null != this.__graphics && Wf.renderMask(this, a);
      for (var b = 0, c = this.__children; b < c.length; ) {
        var d = c[b];
        ++b;
        d.__renderGLMask(a);
      }
    },
    __setStageReference: function (a) {
      ja.prototype.__setStageReference.call(this, a);
      if (null != this.__children)
        for (var b = 0, c = this.__children; b < c.length; ) {
          var d = c[b];
          ++b;
          d.__setStageReference(a);
        }
    },
    __setWorldTransformInvalid: function () {
      if (
        !this.__worldTransformInvalid &&
        ((this.__worldTransformInvalid = !0), null != this.__children)
      )
        for (var a = 0, b = this.__children; a < b.length; ) {
          var c = b[a];
          ++a;
          c.__setWorldTransformInvalid();
        }
    },
    __shouldCacheHardware: function (a) {
      if (1 == a) return !0;
      a = ja.prototype.__shouldCacheHardware.call(this, a);
      if (1 == a) return !0;
      if (null != this.__children)
        for (var b = 0, c = this.__children; b < c.length; ) {
          var d = c[b];
          ++b;
          a = d.__shouldCacheHardware(a);
          if (1 == a) return !0;
        }
      return a;
    },
    __update: function (a, b) {
      ja.prototype.__update.call(this, a, b);
      if (b) {
        b = 0;
        for (var c = this.__children; b < c.length; ) {
          var d = c[b];
          ++b;
          d.__update(a, !0);
        }
      }
    },
    get_numChildren: function () {
      return this.__children.length;
    },
    __class__: Lb,
    __properties__: v(ja.prototype.__properties__, {
      get_numChildren: "get_numChildren",
    }),
  });
  var wa = function () {
    Lb.call(this);
    this.__buttonMode = !1;
    this.useHandCursor = !0;
  };
  l["openfl.display.Sprite"] = wa;
  wa.__name__ = ["openfl", "display", "Sprite"];
  wa.__super__ = Lb;
  wa.prototype = v(Lb.prototype, {
    dropTarget: null,
    hitArea: null,
    useHandCursor: null,
    __buttonMode: null,
    __getCursor: function () {
      return this.__buttonMode && this.useHandCursor ? P.POINTER : null;
    },
    __hitTest: function (a, b, c, d, e, f) {
      if (e && !this.mouseEnabled && !this.mouseChildren) return !1;
      if (
        !f.get_visible() ||
        this.__isMask ||
        (null != this.get_mask() && !this.get_mask().__hitTestMask(a, b))
      )
        return this.__hitTestHitArea(a, b, c, d, e, f);
      if (null != this.__scrollRect) {
        var g = aa.__pool.get();
        g.setTo(a, b);
        this.__getRenderTransform().__transformInversePoint(g);
        if (!this.__scrollRect.containsPoint(g))
          return aa.__pool.release(g), this.__hitTestHitArea(a, b, c, d, !0, f);
        aa.__pool.release(g);
      }
      return Lb.prototype.__hitTest.call(this, a, b, c, d, e, f)
        ? null != d
          ? e
          : !0
        : null == this.hitArea &&
          null != this.__graphics &&
          this.__graphics.__hitTest(a, b, c, this.__getRenderTransform())
        ? (null == d || (e && !this.mouseEnabled) || d.push(f), !0)
        : this.__hitTestHitArea(a, b, c, d, e, f);
    },
    __hitTestHitArea: function (a, b, c, d, e, f) {
      return null == this.hitArea || this.hitArea.mouseEnabled
        ? !1
        : ((this.hitArea.mouseEnabled = !0),
          (a = this.hitArea.__hitTest(a, b, c, null, !0, f)),
          (this.hitArea.mouseEnabled = !1),
          null != d && a && (d[d.length] = f),
          a);
    },
    __hitTestMask: function (a, b) {
      return Lb.prototype.__hitTestMask.call(this, a, b) ||
        (null != this.__graphics &&
          this.__graphics.__hitTest(a, b, !0, this.__getRenderTransform()))
        ? !0
        : !1;
    },
    get_graphics: function () {
      null == this.__graphics && (this.__graphics = new zc(this));
      return this.__graphics;
    },
    get_tabEnabled: function () {
      return null == this.__tabEnabled ? this.__buttonMode : this.__tabEnabled;
    },
    set_buttonMode: function (a) {
      return (this.__buttonMode = a);
    },
    __class__: wa,
    __properties__: v(Lb.prototype.__properties__, {
      get_graphics: "get_graphics",
      set_buttonMode: "set_buttonMode",
    }),
  });
  var af = function () {
    this.gravity = new w(0, 500);
    wa.call(this);
    this.addEventListener("addedToStage", m(this, this.added));
  };
  l.Main = af;
  af.__name__ = ["Main"];
  af.main = function () {
    ca.trace("main", {
      fileName: "Main.hx",
      lineNumber: 152,
      className: "Main",
      methodName: "main",
    });
    N.get_current().stage.align = 6;
    N.get_current().stage.set_scaleMode(2);
    N.get_current().addChild(new af());
  };
  af.__super__ = wa;
  af.prototype = v(wa.prototype, {
    inited: null,
    menu: null,
    space: null,
    gravity: null,
    resize: function (a) {
      this.inited || this.init();
    },
    init: function () {
      this.inited ||
        ((this.inited = !0),
        C.init(),
        C.play("SoundGameMusic"),
        k.init(
          N.get_current().stage,
          u["int"](N.get_current().stage.stageWidth),
          u["int"](N.get_current().stage.stageHeight),
          u["int"](N.get_current().stage.get_frameRate())
        ),
        (this.space = new bh(this.gravity)),
        k.setSpace(this.space),
        (k.theGame = new wa()),
        (k.theMenu = new wa()),
        k.theMenu.set_alpha(1),
        k.theGame.set_alpha(0.01),
        (this.menu = new Kf(this, 1)),
        (k.theMenu = this.menu),
        (k.curSprite = this.menu),
        this.checkScaling(),
        N.get_current().stage.addChild(k.theGame),
        N.get_current().stage.addChild(this.menu));
    },
    checkScaling: function () {
      k.setXY(
        u["int"](N.get_current().stage.stageWidth),
        u["int"](N.get_current().stage.stageHeight)
      );
      k.resizeGame();
      k.resizeStage(k.curSprite);
      k.offsetPage();
      N.trace("windows displayed");
    },
    added: function (a) {
      this.removeEventListener("addedToStage", m(this, this.added));
      this.stage.addEventListener("resize", m(this, this.resize));
      this.init();
    },
    __class__: af,
  });
  var xi = function (a) {
    a.addChild(this);
    af.call(this);
    this.dispatchEvent(new X("addedToStage", !1, !1));
  };
  l.DocumentClass = xi;
  xi.__name__ = ["DocumentClass"];
  xi.__super__ = af;
  xi.prototype = v(af.prototype, { __class__: xi });
  var tf = function (a, b) {
    null == b && (b = "k");
    null == a && (a = "GreenButton");
    this.hitPoints = 0;
    this.sw = "none";
    this.animB = this.glowB = this.button = null;
    this.colorB = "none";
    wa.call(this);
    this.colorB = a;
    this.sw = b;
    switch (this.colorB) {
      case "BlueButton":
        this.animB = k.initAnimation("blueLightB", "ui", !0);
        this.animB.showBehavior("on");
        this.addChild(this.animB);
        a = this.animB;
        a.set_y(a.get_y());
        this.glowB = k.initAnimation("lightBlue", "ui", !0);
        this.glowB.showBehavior("enable");
        a = this.glowB;
        a.set_y(a.get_y() - 21);
        this.addChild(this.glowB);
        break;
      case "GreenButton":
        this.animB = k.initAnimation("greenLightB", "ui", !0);
        this.animB.showBehavior("off");
        a = this.animB;
        a.set_y(a.get_y());
        this.addChild(this.animB);
        this.glowB = k.initAnimation("lightGreen", "ui", !0);
        this.glowB.showBehavior("enable");
        a = this.glowB;
        a.set_y(a.get_y() - 21);
        this.addChild(this.glowB);
        break;
      case "OrangeButton":
        (this.animB = k.initAnimation("orangeLightB", "ui", !0)),
          this.animB.showBehavior("on"),
          this.addChild(this.animB),
          (a = this.animB),
          a.set_y(a.get_y()),
          (this.glowB = k.initAnimation("lightOrange", "ui", !0)),
          this.glowB.showBehavior("enable"),
          (a = this.glowB),
          a.set_y(a.get_y() - 21),
          this.addChild(this.glowB);
    }
    a = this.button = k.initSpriteUI("cbutton");
    a.set_y(a.get_y() + 7);
    this.addChild(this.button);
  };
  l.CButton = tf;
  tf.__name__ = ["CButton"];
  tf.__super__ = wa;
  tf.prototype = v(wa.prototype, {
    colorB: null,
    animB: null,
    glowB: null,
    button: null,
    sw: null,
    hitPoints: null,
    __class__: tf,
  });
  var yi = function (a, b, c) {
    this.lastTime = this.cLevel = this.star = 0;
    this._parent = null;
    wa.call(this);
    this._parent = a;
    this.cLevel = b;
    this.star = c;
    k.previousLevel = null;
    this.init();
  };
  l.CompletedGameState = yi;
  yi.__name__ = ["CompletedGameState"];
  yi.__super__ = wa;
  yi.prototype = v(wa.prototype, {
    mainBackGround: null,
    menu: null,
    _parent: null,
    lastTime: null,
    cLevel: null,
    star: null,
    init: function () {
      this._parent.addEventListener("enterFrame", m(this, this.onEnterFrame));
      var a = (this.mainBackGround = k.initSpriteUI("gameCompleted"));
      a.set_x(a.get_x() + this.mainBackGround.get_width() / 2);
      this.mainBackGround.set_y(this.mainBackGround.get_height() / 2);
      k.theGame.addChild(this.mainBackGround);
      this.menu = k.initAnimation("back", "ui");
      k.theGame.addChild(this.menu);
      this.menu.showBehavior("out");
      this.menu.set_buttonMode(!0);
      this.menu.addEventListener("mouseOver", m(this, this.overMouse));
      this.menu.addEventListener("mouseOut", m(this, this.outMouse));
      this.menu.addEventListener("mouseDown", m(this, this.goToMenu));
      this.menu.set_x(50);
      this.menu.set_y(444);
      this.menu.set_scaleX(1);
      this.menu.set_scaleY(1);
    },
    clearState: function () {
      k.theGame.removeEventListener("enterFrame", m(this, this.onEnterFrame));
      k.clear();
      for (k.previousLevel = this; 0 < k.theGame.get_numChildren(); )
        k.theGame.removeChildAt(0);
      Xa.reset();
    },
    overMouse: function (a) {
      r.__cast(a.currentTarget, y).showBehavior("out");
      ca.trace("overMouse", {
        fileName: "CompletedGameState.hx",
        lineNumber: 138,
        className: "CompletedGameState",
        methodName: "overMouse",
      });
    },
    outMouse: function (a) {
      r.__cast(a.currentTarget, y).showBehavior("over");
      ca.trace("outMouse", {
        fileName: "CompletedGameState.hx",
        lineNumber: 143,
        className: "CompletedGameState",
        methodName: "outMouse",
      });
    },
    goToMenu: function (a) {
      this.clearState();
      k.clear();
      a = new Lf(this._parent);
      k.curSprite = a;
      k.blackScreenTween(a);
      k.resizeGame();
      k.resizeStage(k.curSprite);
      k.offsetPage();
      N.trace("windows displayed");
    },
    onEnterFrame: function (a) {
      a = N.getTimer() - this.lastTime;
      this.menu.update(a);
      this.mainBackGround.update(a);
      this.lastTime = N.getTimer();
    },
    __class__: yi,
  });
  var ch = function (a, b, c) {
    this.score = 0;
    this.stars = null;
    this.scoreArray = [null, null, null, null];
    this.lastTime = this.cLevel = 0;
    this._parent = null;
    wa.call(this);
    this.cLevel = b;
    Gamezy24SDK.gameplayStop();
    this._parent = a;
    k.previousLevel = null;
    this.score = c;
    this.init();
  };
  l.CompletedState = ch;
  ch.__name__ = ["CompletedState"];
  ch.__super__ = wa;
  ch.prototype = v(wa.prototype, {
    mainBackGround: null,
    mainBackGround2: null,
    mainBackGround3: null,
    next: null,
    menu: null,
    restart: null,
    _parent: null,
    lastTime: null,
    cLevel: null,
    scoreArray: null,
    stars: null,
    score: null,
    init: function () {
      var a = (this.mainBackGround2 = k.initSpriteUI("menu"));
      a.set_x(a.get_x() + this.mainBackGround2.get_width() / 2);
      a = this.mainBackGround2;
      a.set_y(a.get_y() + this.mainBackGround2.get_height() / 2);
      this.mainBackGround2.set_cacheAsBitmap(!0);
      k.theGame.addChild(this.mainBackGround2);
      this._parent.addEventListener("enterFrame", m(this, this.onEnterFrame));
      a = this.mainBackGround =
        30 != k.currentLevel
          ? k.initSpriteUI("levelCompleted")
          : k.initSpriteUI("gameCompleted");
      a.set_x(a.get_x() + this.mainBackGround.get_width() / 2);
      this.mainBackGround.set_y(this.mainBackGround.get_height() / 2);
      this.mainBackGround.smoothing = !0;
      this.mainBackGround.set_cacheAsBitmap(!0);
      k.theGame.addChild(this.mainBackGround);
      this.stars = k.initAnimation("star", "ui");
      this.stars.showBehavior(u.string(k.starCounter));
      this.stars.set_x(330);
      this.stars.set_y(260);
      this.stars.set_scaleX(1);
      this.stars.set_scaleY(1);
      this.stars.mouseEnabled = !1;
      k.theGame.addChild(this.stars);
      for (a = 0; 4 > a; ) {
        var b = a++;
        this.scoreArray[b] = k.initAnimation("digit", "ui");
        this.scoreArray[b].set_x(390 + 26 * b);
        this.scoreArray[b].set_y(202);
        this.scoreArray[b].set_scaleX(0.7);
        this.scoreArray[b].set_scaleY(0.7);
        this.scoreArray[b].mouseEnabled = !1;
        this.scoreArray[b].showBehavior("0");
        k.theGame.addChild(this.scoreArray[b]);
      }
      this.showScores(this.scoreArray, this.score);
      this.next =
        30 != k.currentLevel
          ? k.initAnimation("next", "ui")
          : k.initAnimation("back", "ui");
      k.theGame.addChild(this.next);
      this.next.showBehavior("out");
      this.next.set_buttonMode(!0);
      this.next.addEventListener("mouseOver", m(this, this.overMouse));
      this.next.addEventListener("mouseOut", m(this, this.outMouse));
      30 != k.currentLevel
        ? this.next.addEventListener("mouseDown", m(this, this.goToNext))
        : this.next.addEventListener("mouseDown", m(this, this.goToMenu));
      this.next.set_x(503);
      this.next.set_y(397);
      this.menu = k.initAnimation("lmenu", "ui");
      k.theGame.addChild(this.menu);
      this.menu.showBehavior("out");
      this.menu.set_buttonMode(!0);
      this.menu.addEventListener("mouseOver", m(this, this.overMouse));
      this.menu.addEventListener("mouseOut", m(this, this.outMouse));
      this.menu.addEventListener("mouseDown", m(this, this.goToMenu));
      this.menu.set_x(342);
      this.menu.set_y(465);
      this.restart = k.initAnimation("replay", "ui");
      k.theGame.addChild(this.restart);
      this.restart.showBehavior("out");
      this.restart.set_buttonMode(!0);
      this.restart.addEventListener("mouseOver", m(this, this.overMouse));
      this.restart.addEventListener("mouseOut", m(this, this.outMouse));
      this.restart.addEventListener("mouseDown", m(this, this.goToRestart));
      this.restart.set_x(188);
      this.restart.set_y(397);
    },
    showScores: function (a, b) {
      var c = null == b ? "null" : "" + b;
      var d = 0 < c.length ? u.parseInt(S.substr(c, c.length - 1, 1)) : 0;
      var e = 1 < c.length ? u.parseInt(S.substr(c, c.length - 2, 1)) : 0;
      b = 2 < c.length ? u.parseInt(S.substr(c, c.length - 3, 1)) : 0;
      c = 3 < c.length ? u.parseInt(S.substr(c, c.length - 4, 1)) : 0;
      if (0 > d || 9 < d) d = 0;
      if (0 > e || 9 < e) e = 0;
      if (0 > b || 9 < b) b = 0;
      if (0 > c || 9 < c) c = 0;
      a[0].showBehavior(null == c ? "null" : "" + c);
      a[0].update(1);
      a[1].showBehavior(null == b ? "null" : "" + b);
      a[1].update(1);
      a[2].showBehavior(null == e ? "null" : "" + e);
      a[2].update(1);
      a[3].showBehavior(null == d ? "null" : "" + d);
      a[3].update(1);
      ca.trace([c, b, e, d], {
        fileName: "CompletedState.hx",
        lineNumber: 261,
        className: "CompletedState",
        methodName: "showScores",
      });
      return [c, b, e, d];
    },
    goToNext: function (a) {
      k.showInterstital("def");
      a = this.mainBackGround3 = k.initSpriteUI("menu");
      a.set_x(a.get_x() + this.mainBackGround3.get_width() / 2);
      a = this.mainBackGround3;
      a.set_y(a.get_y() + this.mainBackGround3.get_height() / 2);
      this.mainBackGround3.set_cacheAsBitmap(!0);
      k.theGame.addChild(this.mainBackGround3);
    },
    afterAdsNext: function () {
      this.clearState();
      k.theGame.removeChild(this.mainBackGround3);
      var a = new Bd(this._parent, this.cLevel + 1);
      k.resizeGame();
      k.resizeStage(k.theGame);
      k.theGame.addChild(a);
      k.blackScreenTween(a);
      k.offsetPage();
      N.trace("windows displayed");
    },
    clearState: function () {
      k.theGame.removeEventListener("enterFrame", m(this, this.onEnterFrame));
      this.removeEventListener("enterFrame", m(this, this.onEnterFrame));
      Xa.reset();
      k.clear();
      for (k.previousLevel = this; 0 < k.theGame.get_numChildren(); )
        k.theGame.removeChildAt(0);
    },
    goToRestart: function (a) {
      k.showInterstital("restart");
      a = this.mainBackGround3 = k.initSpriteUI("menu");
      a.set_x(a.get_x() + this.mainBackGround3.get_width() / 2);
      a = this.mainBackGround3;
      a.set_y(a.get_y() + this.mainBackGround3.get_height() / 2);
      this.mainBackGround3.set_cacheAsBitmap(!0);
      k.theGame.addChild(this.mainBackGround3);
    },
    afterAdsRestart: function () {
      k.theGame.removeChild(this.mainBackGround3);
      this.clearState();
      k.clear();
      var a = new Bd(this._parent, this.cLevel);
      k.curSprite = a;
      k.blackScreenTween(a);
      k.resizeGame();
      k.resizeStage(k.curSprite);
      k.offsetPage();
      N.trace("windows displayed");
    },
    overMouse: function (a) {
      r.__cast(a.currentTarget, y).showBehavior("over");
      ca.trace("overMouse", {
        fileName: "CompletedState.hx",
        lineNumber: 406,
        className: "CompletedState",
        methodName: "overMouse",
      });
    },
    outMouse: function (a) {
      r.__cast(a.currentTarget, y).showBehavior("out");
      ca.trace("outMouse", {
        fileName: "CompletedState.hx",
        lineNumber: 411,
        className: "CompletedState",
        methodName: "outMouse",
      });
    },
    goToMenu: function (a) {
      this.clearState();
      k.clear();
      a = new Lf(this._parent);
      k.curSprite = a;
      k.blackScreenTween(a);
      k.resizeGame();
      k.resizeStage(k.curSprite);
      k.offsetPage();
      N.trace("windows displayed");
    },
    onEnterFrame: function (a) {
      a = N.getTimer() - this.lastTime;
      this.restart.update(a);
      this.menu.update(a);
      this.next.update(a);
      this.mainBackGround.update(a);
      this.lastTime = N.getTimer();
    },
    __class__: ch,
  });
  var pa = function (a, b) {
    this.r = new RegExp(a, b.split("u").join(""));
  };
  l.EReg = pa;
  pa.__name__ = ["EReg"];
  pa.prototype = {
    r: null,
    match: function (a) {
      this.r.global && (this.r.lastIndex = 0);
      this.r.m = this.r.exec(a);
      this.r.s = a;
      return null != this.r.m;
    },
    matched: function (a) {
      if (null != this.r.m && 0 <= a && a < this.r.m.length) return this.r.m[a];
      throw new G("EReg::matched");
    },
    matchedRight: function () {
      if (null == this.r.m) throw new G("No string matched");
      var a = this.r.m.index + this.r.m[0].length;
      return S.substr(this.r.s, a, this.r.s.length - a);
    },
    matchedPos: function () {
      if (null == this.r.m) throw new G("No string matched");
      return { pos: this.r.m.index, len: this.r.m[0].length };
    },
    matchSub: function (a, b, c) {
      null == c && (c = -1);
      if (this.r.global) {
        this.r.lastIndex = b;
        var d = this.r;
        b = 0 > c ? a : S.substr(a, 0, b + c);
        this.r.m = d.exec(b);
        if ((b = null != this.r.m)) this.r.s = a;
        return b;
      }
      if ((d = this.match(0 > c ? S.substr(a, b, null) : S.substr(a, b, c))))
        (this.r.s = a), (this.r.m.index += b);
      return d;
    },
    split: function (a) {
      return a.replace(this.r, "#__delim__#").split("#__delim__#");
    },
    replace: function (a, b) {
      return a.replace(this.r, b);
    },
    __class__: pa,
  };
  var zi = function (a, b) {
    this.lastTime = this.cLevel = 0;
    this._parent = null;
    wa.call(this);
    this.cLevel = b;
    this._parent = a;
    k.previousLevel = null;
    this.init();
  };
  l.FailedState = zi;
  zi.__name__ = ["FailedState"];
  zi.__super__ = wa;
  zi.prototype = v(wa.prototype, {
    mainBackGround: null,
    restart: null,
    _parent: null,
    lastTime: null,
    cLevel: null,
    init: function () {
      this._parent.addEventListener("enterFrame", m(this, this.onEnterFrame));
      this.mainBackGround = new Ab(ha.getBitmapData("img/ui/failedState.png"));
      this.mainBackGround.smoothing = !0;
      this.mainBackGround.set_cacheAsBitmap(!0);
      this.mainBackGround.set_x(0);
      this.mainBackGround.set_y(0);
      k.theGame.addChild(this.mainBackGround);
      k.showInterstital("failed");
      this.restart = k.initAnimation("restartMaxi", "ui");
      k.theGame.addChild(this.restart);
      this.restart.showBehavior("out");
      this.restart.set_buttonMode(!0);
      this.restart.addEventListener("mouseOver", m(this, this.overMouse));
      this.restart.addEventListener("mouseOut", m(this, this.outMouse));
      this.restart.addEventListener("mouseDown", m(this, this.goToRestart));
      this.restart.set_x(450);
      this.restart.set_y(260);
      this.restart.set_scaleX(0.9);
      this.restart.set_scaleY(0.9);
    },
    clearState: function () {
      k.theGame.removeEventListener("enterFrame", m(this, this.onEnterFrame));
      this.removeEventListener("enterFrame", m(this, this.onEnterFrame));
      Xa.reset();
      k.clear();
      for (k.previousLevel = this; 0 < k.theGame.get_numChildren(); )
        k.theGame.removeChildAt(0);
    },
    goToRestart: function (a) {
      this.clearState();
      a = new Bd(this._parent, this.cLevel);
      k.resizeGame();
      k.resizeStage(k.theGame);
      k.offsetPage();
      N.trace("windows displayed");
      k.theGame.addChild(a);
      k.blackScreenTween(a);
    },
    overMouse: function (a) {
      r.__cast(a.currentTarget, y).showBehavior("out");
      ca.trace("overMouse", {
        fileName: "FailedState.hx",
        lineNumber: 252,
        className: "FailedState",
        methodName: "overMouse",
      });
    },
    outMouse: function (a) {
      r.__cast(a.currentTarget, y).showBehavior("over");
      ca.trace("outMouse", {
        fileName: "FailedState.hx",
        lineNumber: 257,
        className: "FailedState",
        methodName: "outMouse",
      });
    },
    onEnterFrame: function (a) {
      a = N.getTimer() - this.lastTime;
      this.restart.update(a);
      this.lastTime = N.getTimer();
    },
    __class__: zi,
  });
  var zk = function (a, b, c, d) {
    this.fadeTimer = new $b(50, 0);
    this.fractionId = d;
    this.fractionBody = new Ra(oa.get_DYNAMIC(), a);
    this.fractionPolygon = new Sa(b, new Aa(0.1, 7.2, 7.2, 5.2), new Oa(4, -1));
    this.fractionPolygon.validity() == nb.get_VALID()
      ? (this.fractionBody.get_shapes().add(this.fractionPolygon),
        (a = this.fractionBody.get_localCOM().mul(-1)),
        this.fractionBody.align(),
        (this.fractionBody.graphic = c),
        (this.fractionBody.graphicOffset = a),
        this.fractionBody.graphic.set_x(0),
        this.fractionBody.graphic.set_y(0),
        this.fadeTimer.addEventListener("timer", m(this, this.fadeFractions)))
      : (this.fractionBody = null);
  };
  l.Fraction = zk;
  zk.__name__ = ["Fraction"];
  zk.prototype = {
    fractionBody: null,
    fractionPolygon: null,
    fractionId: null,
    fadeTimer: null,
    fadeFractions: function (a) {
      a = r.__cast(this.fractionBody.graphic, wa);
      a.set_alpha(a.get_alpha() - 0.1);
      0 >= r.__cast(this.fractionBody.graphic, wa).get_alpha() &&
        (this.fadeTimer.stop(),
        k.theGame.removeChild(this.fractionBody.graphic),
        k.space.get_bodies().remove(this.fractionBody),
        (this.fractionBody = null));
    },
    __class__: zk,
  };
  var Ai = function () {
    this.sparksTimer = new $b(7e3, 0);
    this.sparksTimer.addEventListener("timer", m(this, this.sparksGo));
  };
  l.GameTransformator = Ai;
  Ai.__name__ = ["GameTransformator"];
  Ai.prototype = {
    sparksTimer: null,
    transSwitch: null,
    transBroken: null,
    transGraphic: null,
    sparksGo: function (a) {},
    __class__: Ai,
  };
  var Bi = function () {
    this.boxSum = 0;
    this.truckGo = new $b(50, 0);
    this.truckGo.addEventListener("timer", m(this, this.goTruck));
  };
  l.GameTruck = Bi;
  Bi.__name__ = ["GameTruck"];
  Bi.prototype = {
    truckBody: null,
    leftWheelTruck: null,
    rightWheelTruck: null,
    cargo: null,
    truckGo: null,
    boxCount: null,
    boxSum: null,
    cargoLoad: null,
    stopSignal: null,
    goTruck: function (a) {
      a = this.rightWheelTruck;
      a.set_angularVel(a.get_angularVel() + 2);
      20 < this.rightWheelTruck.get_angularVel() && this.truckGo.stop();
    },
    __class__: Bi,
  };
  var S = function () {};
  l.HxOverrides = S;
  S.__name__ = ["HxOverrides"];
  S.strDate = function (a) {
    switch (a.length) {
      case 8:
        a = a.split(":");
        var b = new Date();
        b.setTime(0);
        b.setUTCHours(a[0]);
        b.setUTCMinutes(a[1]);
        b.setUTCSeconds(a[2]);
        return b;
      case 10:
        return (a = a.split("-")), new Date(a[0], a[1] - 1, a[2], 0, 0, 0);
      case 19:
        return (
          (b = a.split(" ")),
          (a = b[0].split("-")),
          (b = b[1].split(":")),
          new Date(a[0], a[1] - 1, a[2], b[0], b[1], b[2])
        );
      default:
        throw new G("Invalid date format : " + a);
    }
  };
  S.cca = function (a, b) {
    a = a.charCodeAt(b);
    return a != a ? Ci.get_undefined() : a;
  };
  S.substr = function (a, b, c) {
    if (null == c) c = a.length;
    else if (0 > c)
      if (0 == b) c = a.length + c;
      else return "";
    return a.substr(b, c);
  };
  S.remove = function (a, b) {
    b = a.indexOf(b);
    if (-1 == b) return !1;
    a.splice(b, 1);
    return !0;
  };
  S.iter = function (a) {
    return {
      cur: 0,
      arr: a,
      hasNext: function () {
        return this.cur < this.arr.length;
      },
      next: function () {
        return this.arr[this.cur++];
      },
    };
  };
  var Lf = function (a) {
    this.scoreArray = [null, null, null, null];
    this.total = null;
    this.timerBeforeStartUI = new $b(300, 1);
    this.iconArray = [];
    this.lastTime = 0;
    this._parent = null;
    wa.call(this);
    this._parent = a;
    k.iconsState = this;
    a = this.mainBackGround = k.initSpriteUI("menu");
    a.set_x(a.get_x() + this.mainBackGround.get_width() / 2);
    a = this.mainBackGround;
    a.set_y(a.get_y() + this.mainBackGround.get_height() / 2);
    this.mainBackGround.smoothing = !0;
    this.mainBackGround.set_cacheAsBitmap(!0);
    k.theGame.addChild(this.mainBackGround);
    this.timerBeforeStartUI.start();
    this.timerBeforeStartUI.addEventListener(
      "timerComplete",
      m(this, this.init)
    );
  };
  l.IconsState = Lf;
  Lf.__name__ = ["IconsState"];
  Lf.__super__ = wa;
  Lf.prototype = v(wa.prototype, {
    mainBackGround: null,
    menu: null,
    icon: null,
    starIcon: null,
    _parent: null,
    lastTime: null,
    iconArray: null,
    timerBeforeStartUI: null,
    total: null,
    scoreArray: null,
    init: function (a) {
      this.addEventListener("enterFrame", m(this, this.onEnterFrame));
      this.menu = k.initAnimation("back", "ui");
      k.theGame.addChild(this.menu);
      this.menu.showBehavior("out");
      this.menu.set_buttonMode(!0);
      this.menu.addEventListener("mouseOver", m(this, this.overMouse));
      this.menu.addEventListener("mouseOut", m(this, this.outMouse));
      this.menu.addEventListener("mouseDown", m(this, this.goToMenu));
      this.menu.set_x(110);
      this.menu.set_y(444);
      this.menu.set_scaleX(1);
      this.menu.set_scaleY(1);
      for (a = 0; 3 > a; )
        for (var b = a++, c = 0; 10 > c; ) {
          var d = c++;
          this.icon = k.initAnimation("LevelBtn", "ui");
          this.icon.showBehavior("out");
          this.iconArray.push(this.icon);
          var e = k.initAnimation("levelNumbers", "ui");
          e.showBehavior(u.string(10 * b + d));
          e.update(1);
          this.starIcon = k.initAnimation("star", "ui");
          this.starIcon.showBehavior(u.string(k.starArray[10 * b + d]));
          this.starIcon.set_scaleX(0.7);
          this.starIcon.set_scaleY(0.7);
          this.starIcon.mouseEnabled = !1;
          this.starIcon.update(1);
          e.set_x(0);
          e.set_y(0);
          e.mouseEnabled = !1;
          this.icon.addChild(e);
          0 == k.levelStateArray[10 * b + d]
            ? (this.icon.showBehavior("over"), this.icon.set_buttonMode(!1))
            : (this.icon.showBehavior("out"),
              this.icon.addEventListener("mouseOver", m(this, this.overMouse)),
              this.icon.addEventListener("mouseOut", m(this, this.outMouse)),
              this.icon.addEventListener(
                "mouseDown",
                m(this, this.goToIconBefore)
              ),
              this.icon.set_buttonMode(!0));
          this.icon.set_scaleX(1);
          this.icon.set_scaleY(1);
          this.icon.set_name(u.string(10 * b + d + 1));
          this.icon.set_x(54 + 68 * d);
          this.icon.set_y(124 + 104 * b);
          this.starIcon.set_x(54 + 68 * d);
          this.starIcon.set_y(86 + 104 * b);
          k.theGame.addChild(this.icon);
          k.theGame.addChild(this.starIcon);
        }
      this.total = k.initSpriteUI("total");
      this.total.set_x(170);
      this.total.set_y(40);
      k.theGame.addChild(this.total);
      for (a = 0; 4 > a; )
        (b = a++),
          (this.scoreArray[b] = k.initAnimation("digit", "ui")),
          this.scoreArray[b].set_x(360 + 36 * b),
          this.scoreArray[b].set_y(35),
          this.scoreArray[b].set_scaleX(0.75),
          this.scoreArray[b].set_scaleY(0.75),
          this.scoreArray[b].showBehavior("0"),
          k.theGame.addChild(this.scoreArray[b]);
      b = a = 0;
      for (c = k.scoresArray.length; b < c; )
        (d = b++), (a += k.scoresArray[d]);
      this.showScores(this.scoreArray, a);
      this.removeEventListener("resize", m(this, this.resizeStage));
      this.addEventListener("resize", m(this, this.resizeStage));
      k.blackScreenTween(this._parent);
    },
    showScores: function (a, b) {
      var c = null == b ? "null" : "" + b;
      var d = 0 < c.length ? u.parseInt(S.substr(c, c.length - 1, 1)) : 0;
      var e = 1 < c.length ? u.parseInt(S.substr(c, c.length - 2, 1)) : 0;
      b = 2 < c.length ? u.parseInt(S.substr(c, c.length - 3, 1)) : 0;
      c = 3 < c.length ? u.parseInt(S.substr(c, c.length - 4, 1)) : 0;
      a[0].showBehavior(null == c ? "null" : "" + c);
      a[0].update(1);
      a[1].showBehavior(null == b ? "null" : "" + b);
      a[1].update(1);
      a[2].showBehavior(null == e ? "null" : "" + e);
      a[2].update(1);
      a[3].showBehavior(null == d ? "null" : "" + d);
      a[3].update(1);
      return [c, b, e, d];
    },
    resizeStage: function (a) {
      k.setXY(
        u["int"](N.get_current().stage.stageWidth),
        u["int"](N.get_current().stage.stageHeight)
      );
      k.resizeGame();
      k.resizeStage(k.curSprite);
      k.offsetPage();
      N.trace("windows displayed");
    },
    goToIconBefore: function (a) {
      k.currentIcon = u.parseInt(r.__cast(a.currentTarget, y).get_name());
      k.showInterstital("icons");
    },
    goToIcon: function () {
      ca.trace("before clear", {
        fileName: "IconsState.hx",
        lineNumber: 345,
        className: "IconsState",
        methodName: "goToIcon",
      });
      this.clearState();
      var a = new Bd(this._parent, k.currentIcon);
      ca.trace("after clear", {
        fileName: "IconsState.hx",
        lineNumber: 350,
        className: "IconsState",
        methodName: "goToIcon",
      });
      this.removeEventListener("enterFrame", m(this, this.onEnterFrame));
      k.blackScreenTween(a);
      k.resizeGame();
      k.resizeStage(k.theGame);
      k.offsetPage();
      N.trace("windows displayed");
      k.theGame.addChild(a);
    },
    goToMenu: function (a) {
      this.clearState();
      k.blackScreenTween(k.theGame);
      k.theMenu.set_alpha(1);
      k.theGame.set_alpha(0.01);
      k.theMenu.mouseEnabled = !0;
      k.theGame.mouseEnabled = !1;
      k.theMenu.mouseChildren = !0;
      k.theGame.mouseChildren = !1;
      k.theMenu.addEventListener(
        "enterFrame",
        ((Ya = r.__cast(k.theMenu, Kf)), m(Ya, Ya.onEnterFrame))
      );
      k.resizeGame();
      k.resizeStage(k.curSprite);
      k.offsetPage();
      N.trace("windows displayed");
      C.play("SoundGameButonsClick");
    },
    clearState: function () {
      k.theGame.removeEventListener("enterFrame", m(this, this.onEnterFrame));
      this.removeEventListener("enterFrame", m(this, this.onEnterFrame));
      Xa.reset();
      k.clear();
      for (k.previousLevel = this; 0 < k.theGame.get_numChildren(); )
        k.theGame.removeChildAt(0);
    },
    overMouse: function (a) {
      r.__cast(a.currentTarget, y).showBehavior("over");
      ca.trace("overMouse", {
        fileName: "IconsState.hx",
        lineNumber: 463,
        className: "IconsState",
        methodName: "overMouse",
      });
    },
    outMouse: function (a) {
      r.__cast(a.currentTarget, y).showBehavior("out");
      ca.trace("outMouse", {
        fileName: "IconsState.hx",
        lineNumber: 468,
        className: "IconsState",
        methodName: "outMouse",
      });
    },
    onEnterFrame: function (a) {
      a = N.getTimer() - this.lastTime;
      this.menu.update(a);
      this.mainBackGround.update(a);
      for (var b = 0, c = this.iconArray.length; b < c; ) {
        var d = b++;
        this.iconArray[d].update(a);
      }
      this.lastTime = N.getTimer();
    },
    __class__: Lf,
  });
  var Di = function () {};
  l.Lambda = Di;
  Di.__name__ = ["Lambda"];
  Di.array = function (a) {
    var b = [];
    for (a = Wa(a)(); a.hasNext(); ) {
      var c = a.next();
      b.push(c);
    }
    return b;
  };
  var vi = function (a, b) {
    this.item = a;
    this.next = b;
  };
  l["_List.ListNode"] = vi;
  vi.__name__ = ["_List", "ListNode"];
  vi.prototype = { item: null, next: null, __class__: vi };
  var wi = function (a) {
    this.head = a;
  };
  l["_List.ListIterator"] = wi;
  wi.__name__ = ["_List", "ListIterator"];
  wi.prototype = {
    head: null,
    hasNext: function () {
      return null != this.head;
    },
    next: function () {
      var a = this.head.item;
      this.head = this.head.next;
      return a;
    },
    __class__: wi,
  };
  var rf = function () {};
  l.ManifestResources = rf;
  rf.__name__ = ["ManifestResources"];
  rf.init = function (a) {
    rf.preloadLibraries = [];
    rf.preloadLibraryNames = [];
    var b = null;
    null != a && A.hasField(a, "rootPath") && (b = A.field(a, "rootPath"));
    null == b && (b = "");
    Q.defaultRootPath = b;
    a = ob.parse(
      '{"name":null,"assets":"aoy4:pathy20:img%2Fplay%2Fba1.pngy4:sizei136837y4:typey5:IMAGEy2:idR1y7:preloadtgoR0y21:img%2Fplay%2Fba10.pngR2i118490R3R4R5R7R6tgoR0y21:img%2Fplay%2Fba11.pngR2i98663R3R4R5R8R6tgoR0y21:img%2Fplay%2Fba12.pngR2i67754R3R4R5R9R6tgoR0y21:img%2Fplay%2Fba13.pngR2i111116R3R4R5R10R6tgoR0y21:img%2Fplay%2Fba14.pngR2i96501R3R4R5R11R6tgoR0y21:img%2Fplay%2Fba15.pngR2i64105R3R4R5R12R6tgoR0y21:img%2Fplay%2Fba16.pngR2i75145R3R4R5R13R6tgoR0y21:img%2Fplay%2Fba17.pngR2i52282R3R4R5R14R6tgoR0y21:img%2Fplay%2Fba18.pngR2i93381R3R4R5R15R6tgoR0y21:img%2Fplay%2Fba19.pngR2i61371R3R4R5R16R6tgoR0y20:img%2Fplay%2Fba2.pngR2i107680R3R4R5R17R6tgoR0y21:img%2Fplay%2Fba20.pngR2i61988R3R4R5R18R6tgoR0y21:img%2Fplay%2Fba21.pngR2i64340R3R4R5R19R6tgoR0y21:img%2Fplay%2Fba22.pngR2i113106R3R4R5R20R6tgoR0y21:img%2Fplay%2Fba23.pngR2i88589R3R4R5R21R6tgoR0y21:img%2Fplay%2Fba24.pngR2i76394R3R4R5R22R6tgoR0y21:img%2Fplay%2Fba25.pngR2i81960R3R4R5R23R6tgoR0y21:img%2Fplay%2Fba26.pngR2i72812R3R4R5R24R6tgoR0y21:img%2Fplay%2Fba27.pngR2i107180R3R4R5R25R6tgoR0y21:img%2Fplay%2Fba28.pngR2i96952R3R4R5R26R6tgoR0y21:img%2Fplay%2Fba29.pngR2i111722R3R4R5R27R6tgoR0y20:img%2Fplay%2Fba3.pngR2i92600R3R4R5R28R6tgoR0y21:img%2Fplay%2Fba30.pngR2i84171R3R4R5R29R6tgoR0y20:img%2Fplay%2Fba4.pngR2i99621R3R4R5R30R6tgoR0y20:img%2Fplay%2Fba5.pngR2i86436R3R4R5R31R6tgoR0y20:img%2Fplay%2Fba6.pngR2i106081R3R4R5R32R6tgoR0y20:img%2Fplay%2Fba7.pngR2i85547R3R4R5R33R6tgoR0y20:img%2Fplay%2Fba8.pngR2i112468R3R4R5R34R6tgoR0y20:img%2Fplay%2Fba9.pngR2i132659R3R4R5R35R6tgoR0y18:img%2Fui%2Farm.pngR2i2518R3R4R5R36R6tgoR0y19:img%2Fui%2Farm2.pngR2i5208R3R4R5R37R6tgoR0y19:img%2Fui%2Farm3.pngR2i4846R3R4R5R38R6tgoR0y26:img%2Fui%2FarrowBottom.pngR2i407R3R4R5R39R6tgoR0y25:img%2Fui%2FarrowRight.pngR2i362R3R4R5R40R6tgoR0y20:img%2Fui%2Fback.jsonR2i973R3y4:TEXTR5R41R6tgoR0y28:img%2Fui%2FbackAnimation.pngR2i7984R3R4R5R43R6tgoR0y22:img%2Fui%2FBigBox.jsonR2i765R3R42R5R44R6tgoR0y30:img%2Fui%2FBigBoxAnimation.pngR2i4743R3R4R5R45R6tgoR0y21:img%2Fui%2Fblades.pngR2i1159R3R4R5R46R6tgoR0y20:img%2Fui%2Fblank.pngR2i83R3R4R5R47R6tgoR0y26:img%2Fui%2FblueLightB.jsonR2i4084R3R42R5R48R6tgoR0y34:img%2Fui%2FblueLightBAnimation.pngR2i730R3R4R5R49R6tgoR0y24:img%2Fui%2FboardWall.pngR2i1998R3R4R5R50R6tgoR0y22:img%2Fui%2FBtnGoo.jsonR2i998R3R42R5R51R6tgoR0y30:img%2Fui%2FBtnGooAnimation.pngR2i2331R3R4R5R52R6tgoR0y23:img%2Fui%2FBtnLeft.jsonR2i1002R3R42R5R53R6tgoR0y31:img%2Fui%2FBtnLeftAnimation.pngR2i1918R3R4R5R54R6tgoR0y24:img%2Fui%2FBtnRight.jsonR2i1007R3R42R5R55R6tgoR0y32:img%2Fui%2FBtnRightAnimation.pngR2i1944R3R4R5R56R6tgoR0y21:img%2Fui%2FBtnUp.jsonR2i992R3R42R5R57R6tgoR0y29:img%2Fui%2FBtnUpAnimation.pngR2i1939R3R4R5R58R6tgoR0y20:img%2Fui%2Fcargo.pngR2i10279R3R4R5R59R6tgoR0y22:img%2Fui%2Fcbutton.pngR2i388R3R4R5R60R6tgoR0y21:img%2Fui%2FChain1.pngR2i647R3R4R5R61R6tgoR0y21:img%2Fui%2FChain2.pngR2i626R3R4R5R62R6tgoR0y21:img%2Fui%2FClinch.pngR2i351R3R4R5R63R6tgoR0y34:img%2Fui%2FCollectedStarsPanel.pngR2i769R3R4R5R64R6tgoR0y23:img%2Fui%2Fcooller2.pngR2i2684R3R4R5R65R6tgoR0y26:img%2Fui%2FcoollerMain.pngR2i2620R3R4R5R66R6tgoR0y25:img%2Fui%2FcoollerTop.pngR2i383R3R4R5R67R6tgoR0y25:img%2Fui%2FDangerBox1.pngR2i1548R3R4R5R68R6tgoR0y21:img%2Fui%2Fdigit.jsonR2i2094R3R42R5R69R6tgoR0y29:img%2Fui%2FdigitAnimation.pngR2i8529R3R4R5R70R6tgoR0y27:img%2Fui%2FelevatorBody.pngR2i744R3R4R5R71R6tgoR0y31:img%2Fui%2FelevatorCogwheel.pngR2i738R3R4R5R72R6tgoR0y26:img%2Fui%2FElevatorEnd.pngR2i640R3R4R5R73R6tgoR0y26:img%2Fui%2FelevatorTop.pngR2i237R3R4R5R74R6tgoR0y23:img%2Fui%2FelevLine.pngR2i2454R3R4R5R75R6tgoR0y25:img%2Fui%2FelevLine10.pngR2i3067R3R4R5R76R6tgoR0y24:img%2Fui%2FelevLine2.pngR2i1975R3R4R5R77R6tgoR0y24:img%2Fui%2FelevLine3.pngR2i3749R3R4R5R78R6tgoR0y24:img%2Fui%2FelevLine4.pngR2i3854R3R4R5R79R6tgoR0y24:img%2Fui%2FelevLine5.pngR2i3211R3R4R5R80R6tgoR0y24:img%2Fui%2FelevLine6.pngR2i3235R3R4R5R81R6tgoR0y24:img%2Fui%2FelevLine7.pngR2i3415R3R4R5R82R6tgoR0y24:img%2Fui%2FelevLine8.pngR2i3642R3R4R5R83R6tgoR0y24:img%2Fui%2FelevLine9.pngR2i3287R3R4R5R84R6tgoR0y28:img%2Fui%2FgameCompleted.pngR2i35143R3R4R5R85R6tgoR0y32:img%2Fui%2Fgfx_gameMenuPanel.pngR2i892R3R4R5R86R6tgoR0y27:img%2Fui%2FgreenLightB.jsonR2i4105R3R42R5R87R6tgoR0y35:img%2Fui%2FgreenLightBAnimation.pngR2i904R3R4R5R88R6tgoR0y26:img%2Fui%2FHalfShadow.jsonR2i2189R3R42R5R89R6tgoR0y34:img%2Fui%2FHalfShadowAnimation.pngR2i1415R3R4R5R90R6tgoR0y20:img%2Fui%2FLamp.jsonR2i570R3R42R5R91R6tgoR0y28:img%2Fui%2FLampAnimation.pngR2i3671R3R4R5R92R6tgoR0y24:img%2Fui%2Flamp_over.pngR2i249R3R4R5R93R6tgoR0y21:img%2Fui%2FLEVEL.jsonR2i5988R3R42R5R94R6tgoR0y29:img%2Fui%2FLEVELAnimation.pngR2i40626R3R4R5R95R6tgoR0y24:img%2Fui%2FLevelBtn.jsonR2i757R3R42R5R96R6tgoR0y32:img%2Fui%2FLevelBtnAnimation.pngR2i5233R3R4R5R97R6tgoR0y29:img%2Fui%2FlevelCompleted.pngR2i36346R3R4R5R98R6tgoR0y28:img%2Fui%2FlevelNumbers.jsonR2i12112R3R42R5R99R6tgoR0y36:img%2Fui%2FlevelNumbersAnimation.pngR2i10282R3R4R5R100R6tgoR0y22:img%2Fui%2Flevels.jsonR2i795R3R42R5R101R6tgoR0y30:img%2Fui%2FlevelsAnimation.pngR2i10927R3R4R5R102R6tgoR0y25:img%2Fui%2FlightBlue.jsonR2i8058R3R42R5R103R6tgoR0y33:img%2Fui%2FlightBlueAnimation.pngR2i14068R3R4R5R104R6tgoR0y26:img%2Fui%2FlightGreen.jsonR2i8095R3R42R5R105R6tgoR0y34:img%2Fui%2FlightGreenAnimation.pngR2i14039R3R4R5R106R6tgoR0y27:img%2Fui%2FlightOrange.jsonR2i8146R3R42R5R107R6tgoR0y35:img%2Fui%2FlightOrangeAnimation.pngR2i14625R3R4R5R108R6tgoR0y21:img%2Fui%2Flmenu.jsonR2i794R3R42R5R109R6tgoR0y29:img%2Fui%2FlmenuAnimation.pngR2i10927R3R4R5R110R6tgoR0y33:img%2Fui%2FLoad%20the%20truck.pngR2i1691R3R4R5R111R6tgoR0y25:img%2Fui%2FLoaderBody.pngR2i1238R3R4R5R112R6tgoR0y19:img%2Fui%2Flock.pngR2i1313R3R4R5R113R6tgoR0y21:img%2Fui%2FMagnet.pngR2i809R3R4R5R114R6tgoR0y23:img%2Fui%2Fmagnetic.pngR2i125R3R4R5R115R6tgoR0y27:img%2Fui%2FmagneticBeam.pngR2i75R3R4R5R116R6tgoR0y19:img%2Fui%2Fmenu.pngR2i287706R3R4R5R117R6tgoR0y24:img%2Fui%2FmenuMaxi.jsonR2i949R3R42R5R118R6tgoR0y32:img%2Fui%2FmenuMaxiAnimation.pngR2i2125R3R4R5R119R6tgoR0y24:img%2Fui%2FminingImg.pngR2i3358R3R4R5R120R6tgoR0y30:img%2Fui%2FMiningTruckBody.pngR2i1944R3R4R5R121R6tgoR0y31:img%2Fui%2FMiningTruckWheel.pngR2i1065R3R4R5R122R6tgoR0y20:img%2Fui%2FMount.pngR2i563R3R4R5R123R6tgoR0y25:img%2Fui%2FmusicMini.jsonR2i958R3R42R5R124R6tgoR0y33:img%2Fui%2FmusicMiniAnimation.pngR2i2542R3R4R5R125R6tgoR0y24:img%2Fui%2FnearTruck.pngR2i41842R3R4R5R126R6tgoR0y20:img%2Fui%2Fnext.jsonR2i790R3R42R5R127R6tgoR0y28:img%2Fui%2FnextAnimation.pngR2i10354R3R4R5R128R6tgoR0y28:img%2Fui%2ForangeLightB.jsonR2i4126R3R42R5R129R6tgoR0y36:img%2Fui%2ForangeLightBAnimation.pngR2i659R3R4R5R130R6tgoR0y24:img%2Fui%2FoutLight.jsonR2i6033R3R42R5R131R6tgoR0y32:img%2Fui%2FoutLightAnimation.pngR2i15687R3R4R5R132R6tgoR0y20:img%2Fui%2Fplay.jsonR2i787R3R42R5R133R6tgoR0y28:img%2Fui%2FplayAnimation.pngR2i10370R3R4R5R134R6tgoR0y23:img%2Fui%2Fpreloder.pngR2i85847R3R4R5R135R6tgoR0y22:img%2Fui%2Freplay.jsonR2i783R3R42R5R136R6tgoR0y30:img%2Fui%2FreplayAnimation.pngR2i9566R3R4R5R137R6tgoR0y19:img%2Fui%2Fresh.pngR2i1765R3R4R5R138R6tgoR0y27:img%2Fui%2FrestartMaxi.jsonR2i980R3R42R5R139R6tgoR0y35:img%2Fui%2FrestartMaxiAnimation.pngR2i2100R3R4R5R140R6tgoR0y34:img%2Fui%2FrightLoaderCogwheel.pngR2i631R3R4R5R141R6tgoR0y22:img%2Fui%2Fscript1.pngR2i5768R3R4R5R142R6tgoR0y21:img%2Fui%2FSeesaw.pngR2i581R3R4R5R143R6tgoR0y22:img%2Fui%2FShadow.jsonR2i2155R3R42R5R144R6tgoR0y30:img%2Fui%2FShadowAnimation.pngR2i832R3R4R5R145R6tgoR0y21:img%2Fui%2Fshrink.pngR2i478R3R4R5R146R6tgoR0y25:img%2Fui%2FsoundMini.jsonR2i958R3R42R5R147R6tgoR0y33:img%2Fui%2FsoundMiniAnimation.pngR2i2582R3R4R5R148R6tgoR0y26:img%2Fui%2FSquareBox1.jsonR2i770R3R42R5R149R6tgoR0y34:img%2Fui%2FSquareBox1Animation.pngR2i1301R3R4R5R150R6tgoR0y26:img%2Fui%2FSquareBox2.jsonR2i770R3R42R5R151R6tgoR0y34:img%2Fui%2FSquareBox2Animation.pngR2i1146R3R4R5R152R6tgoR0y26:img%2Fui%2FSquareBox3.jsonR2i770R3R42R5R153R6tgoR0y34:img%2Fui%2FSquareBox3Animation.pngR2i732R3R4R5R154R6tgoR0y20:img%2Fui%2Fstar.jsonR2i946R3R42R5R155R6tgoR0y28:img%2Fui%2FstarAnimation.pngR2i2609R3R4R5R156R6tgoR0y20:img%2Fui%2Fstarr.pngR2i425R3R4R5R157R6tgoR0y23:img%2Fui%2FTFXBoom.jsonR2i9597R3R42R5R158R6tgoR0y31:img%2Fui%2FTFXBoomAnimation.pngR2i226087R3R4R5R159R6tgoR0y24:img%2Fui%2FTFXSpark.jsonR2i8937R3R42R5R160R6tgoR0y32:img%2Fui%2FTFXSparkAnimation.pngR2i19049R3R4R5R161R6tgoR0y25:img%2Fui%2FTFXSparkL.jsonR2i8978R3R42R5R162R6tgoR0y33:img%2Fui%2FTFXSparkLAnimation.pngR2i18840R3R4R5R163R6tgoR0y27:img%2Fui%2FThinLongDoor.pngR2i325R3R4R5R164R6tgoR0y28:img%2Fui%2FThinShortDoor.pngR2i283R3R4R5R165R6tgoR0y19:img%2Fui%2Ftime.pngR2i2550R3R4R5R166R6tgoR0y20:img%2Fui%2Ftitle.pngR2i51032R3R4R5R167R6tgoR0y24:img%2Fui%2FTO%20JUMP.pngR2i2440R3R4R5R168R6tgoR0y27:img%2Fui%2FTO%20RESTART.pngR2i4068R3R4R5R169R6tgoR0y20:img%2Fui%2Ftotal.pngR2i7996R3R4R5R170R6tgoR0y28:img%2Fui%2FTPFXLighting.jsonR2i7661R3R42R5R171R6tgoR0y36:img%2Fui%2FTPFXLightingAnimation.pngR2i73021R3R4R5R172R6tgoR0y32:img%2Fui%2FTransformerVault.jsonR2i759R3R42R5R173R6tgoR0y40:img%2Fui%2FTransformerVaultAnimation.pngR2i4668R3R4R5R174R6tgoR0y30:img%2Fui%2FTransporterBase.pngR2i2202R3R4R5R175R6tgoR0y30:img%2Fui%2FTransporterRoll.pngR2i1158R3R4R5R176R6tgoR0y25:img%2Fui%2FTruckBody2.pngR2i7538R3R4R5R177R6tgoR0y30:img%2Fui%2FTruckStopSignal.pngR2i717R3R4R5R178R6tgoR0y24:img%2Fui%2FTruckWeel.pngR2i2371R3R4R5R179R6tgoR0y28:img%2Fui%2FVerticalBox1.jsonR2i770R3R42R5R180R6tgoR0y36:img%2Fui%2FVerticalBox1Animation.pngR2i3289R3R4R5R181R6tgoR0y28:img%2Fui%2FVerticalBox2.jsonR2i788R3R42R5R182R6tgoR0y36:img%2Fui%2FVerticalBox2Animation.pngR2i2896R3R4R5R183R6tgoR0y28:img%2Fui%2FVerticalBox3.jsonR2i788R3R42R5R184R6tgoR0y36:img%2Fui%2FVerticalBox3Animation.pngR2i2928R3R4R5R185R6tgoR0y28:img%2Fui%2FVerticalBox4.jsonR2i782R3R42R5R186R6tgoR0y36:img%2Fui%2FVerticalBox4Animation.pngR2i2715R3R4R5R187R6tgoR0y22:img%2Fui%2Fwarning.pngR2i3250R3R4R5R188R6tgoR0y20:img%2Fui%2FWheel.pngR2i1318R3R4R5R189R6tgoR0y26:img%2Fui%2FWheelSensor.pngR2i124R3R4R5R190R6tgoR0y27:img%2Fui%2FWideLongDoor.pngR2i1139R3R4R5R191R6tgoR0y28:img%2Fui%2FWideShortDoor.pngR2i771R3R4R5R192R6tgoR0y41:json%2Fcommon%2Fgfx_ftc_lvl17_btnGoo.jsonR2i998R3R42R5R193R6tgoR0y49:json%2Fcommon%2Fgfx_ftc_lvl17_btnGooAnimation.pngR2i2210R3R4R5R194R6tgoR0y42:json%2Fcommon%2Fgfx_ftc_lvl17_BtnLeft.jsonR2i1002R3R42R5R195R6tgoR0y50:json%2Fcommon%2Fgfx_ftc_lvl17_BtnLeftAnimation.pngR2i1792R3R4R5R196R6tgoR0y43:json%2Fcommon%2Fgfx_ftc_lvl17_BtnRight.jsonR2i1007R3R42R5R197R6tgoR0y51:json%2Fcommon%2Fgfx_ftc_lvl17_BtnRightAnimation.pngR2i1835R3R4R5R198R6tgoR0y40:json%2Fcommon%2Fgfx_ftc_lvl17_BtnUp.jsonR2i992R3R42R5R199R6tgoR0y48:json%2Fcommon%2Fgfx_ftc_lvl17_BtnUpAnimation.pngR2i1859R3R4R5R200R6tgoR0y20:levels%2Flevel1.jsonR2i8702R3R42R5R201R6tgoR0y21:levels%2Flevel10.jsonR2i9765R3R42R5R202R6tgoR0y21:levels%2Flevel11.jsonR2i12646R3R42R5R203R6tgoR0y21:levels%2Flevel12.jsonR2i24038R3R42R5R204R6tgoR0y21:levels%2Flevel13.jsonR2i10623R3R42R5R205R6tgoR0y21:levels%2Flevel14.jsonR2i11029R3R42R5R206R6tgoR0y21:levels%2Flevel15.jsonR2i13742R3R42R5R207R6tgoR0y21:levels%2Flevel16.jsonR2i10221R3R42R5R208R6tgoR0y21:levels%2Flevel17.jsonR2i10264R3R42R5R209R6tgoR0y21:levels%2Flevel18.jsonR2i15336R3R42R5R210R6tgoR0y21:levels%2Flevel19.jsonR2i17206R3R42R5R211R6tgoR0y20:levels%2Flevel2.jsonR2i9342R3R42R5R212R6tgoR0y21:levels%2Flevel20.jsonR2i11618R3R42R5R213R6tgoR0y21:levels%2Flevel21.jsonR2i9295R3R42R5R214R6tgoR0y21:levels%2Flevel22.jsonR2i13365R3R42R5R215R6tgoR0y21:levels%2Flevel23.jsonR2i9907R3R42R5R216R6tgoR0y21:levels%2Flevel24.jsonR2i10459R3R42R5R217R6tgoR0y21:levels%2Flevel25.jsonR2i8497R3R42R5R218R6tgoR0y21:levels%2Flevel26.jsonR2i10612R3R42R5R219R6tgoR0y21:levels%2Flevel27.jsonR2i17680R3R42R5R220R6tgoR0y21:levels%2Flevel28.jsonR2i12617R3R42R5R221R6tgoR0y21:levels%2Flevel29.jsonR2i9227R3R42R5R222R6tgoR0y20:levels%2Flevel3.jsonR2i14883R3R42R5R223R6tgoR0y21:levels%2Flevel30.jsonR2i18298R3R42R5R224R6tgoR0y20:levels%2Flevel4.jsonR2i12985R3R42R5R225R6tgoR0y20:levels%2Flevel5.jsonR2i13015R3R42R5R226R6tgoR0y20:levels%2Flevel6.jsonR2i8506R3R42R5R227R6tgoR0y20:levels%2Flevel7.jsonR2i13979R3R42R5R228R6tgoR0y20:levels%2Flevel8.jsonR2i12319R3R42R5R229R6tgoR0y20:levels%2Flevel9.jsonR2i10306R3R42R5R230R6tgh","rootPath":null,"version":2,"libraryArgs":[],"libraryType":null}',
      b
    );
    a = db.fromManifest(a);
    Q.registerLibrary("default", a);
    a = Q.getLibrary("default");
    null != a
      ? rf.preloadLibraries.push(a)
      : rf.preloadLibraryNames.push("default");
  };
  Math.__name__ = ["Math"];
  var Kf = function (a, b) {
    this.timerSplash = new $b(10, 1);
    this._parent = null;
    this.lastTime = 0;
    wa.call(this);
    this._parent = a;
    k.curSprite = this;
    k.menuState = this;
    this.preinit();
  };
  l.MenuState = Kf;
  Kf.__name__ = ["MenuState"];
  Kf.__super__ = wa;
  Kf.prototype = v(wa.prototype, {
    mainBackGround: null,
    splash: null,
    title: null,
    play: null,
    playState: null,
    lastTime: null,
    _parent: null,
    timerSplash: null,
    mask1: null,
    mask2: null,
    mask3: null,
    mask4: null,
    preinit: function () {
      var a = (this.splash = k.initSpriteUI("menu"));
      a.set_x(a.get_x() + this.splash.get_width() / 2);
      a = this.splash;
      a.set_y(a.get_y() + this.splash.get_height() / 2);
      this.splash.update(1);
      this.addChild(this.splash);
      this.timerSplash.addEventListener("timerComplete", m(this, this.init));
      k.checkUrl(
        "coolmath-games.com edit.coolmath-games.com stage.coolmath-games.com edit-stage.coolmath-games.com dev.coolmath-games.com bestphysics.com".split(
          " "
        )
      );
      this.timerSplash.start();
    },
    init: function (a) {
      this.timerSplash.removeEventListener("timerComplete", m(this, this.init));
      this.removeEventListener("enterFrame", m(this, this.onEnterFrame));
      this.addEventListener("enterFrame", m(this, this.onEnterFrame));
      a = this.mainBackGround = k.initSpriteUI("menu");
      a.set_x(a.get_x() + this.mainBackGround.get_width() / 2);
      a = this.mainBackGround;
      a.set_y(a.get_y() + this.mainBackGround.get_height() / 2);
      this.mainBackGround.set_cacheAsBitmap(!0);
      this.addChild(this.mainBackGround);
      this.removeChild(this.splash);
      this.play = k.initAnimation("play", "ui");
      this.play.set_x(350);
      this.play.set_y(440);
      this.play.showBehavior("out");
      this.addChild(this.play);
      this.play.set_buttonMode(!0);
      this.play.addEventListener("mouseDown", m(this, this.goToPlayBefore));
      this.play.addEventListener("mouseOver", m(this, this.overMouse));
      this.play.addEventListener("mouseOut", m(this, this.outMouse));
      N.get_current().stage.removeEventListener(
        "resize",
        m(this, this.resizeStage)
      );
      N.get_current().stage.addEventListener(
        "resize",
        m(this, this.resizeStage)
      );
      this.title = new Ab(ha.getBitmapData("img/ui/title.png"));
      this.addChild(this.title);
      this.title.set_x(176);
      this.title.set_y(110);
      this.addMask();
      ca.trace("afterinit", {
        fileName: "MenuState.hx",
        lineNumber: 194,
        className: "MenuState",
        methodName: "init",
      });
    },
    addMask: function () {
      if (1 == k.maskesAddedM) {
        var a = k.theMenu.getChildByName("mask1"),
          b = k.theMenu.getChildByName("mask2"),
          c = k.theMenu.getChildByName("mask3"),
          d = k.theMenu.getChildByName("mask4");
        null != a && this.removeChild(r.__cast(a, Ab));
        null != b && this.removeChild(r.__cast(b, Ab));
        null != c && this.removeChild(r.__cast(c, Ab));
        null != d && this.removeChild(r.__cast(c, Ab));
        k.maskesAddedM = !1;
      }
      this.mask1 = new Ab(ha.getBitmapData("img/ui/blank.png"));
      this.mask2 = new Ab(ha.getBitmapData("img/ui/blank.png"));
      this.mask3 = new Ab(ha.getBitmapData("img/ui/blank.png"));
      this.mask4 = new Ab(ha.getBitmapData("img/ui/blank.png"));
      this.mask1.set_name("mask1");
      this.mask2.set_name("mask2");
      this.mask3.set_name("mask3");
      this.mask4.set_name("mask4");
      N.get_current().stage.stageHeight > N.get_current().stage.stageWidth
        ? (this.mask1.set_width(700),
          this.mask1.set_height(k.offSetY / k.W),
          this.mask1.set_y(-k.offSetY / k.W),
          this.mask1.set_x(0),
          this.mask2.set_width(700),
          this.mask2.set_height(k.offSetY / k.W),
          this.mask2.set_y(500),
          this.mask2.set_x(0),
          this.mask3.set_width(400),
          this.mask3.set_height(500),
          this.mask3.set_y(0),
          this.mask3.set_x(-400),
          this.mask4.set_width(500),
          this.mask4.set_height(500),
          this.mask4.set_y(0),
          this.mask4.set_x(700))
        : (this.mask1.set_width(k.offSetX / k.W),
          this.mask1.set_height(500),
          this.mask1.set_y(0),
          this.mask1.set_x(-k.offSetX / k.W),
          this.mask2.set_width(k.offSetX / k.W),
          this.mask2.set_height(500),
          this.mask2.set_x(700),
          this.mask2.set_y(0),
          this.mask3.set_width(700),
          this.mask3.set_height(400),
          this.mask3.set_y(-400),
          this.mask3.set_x(0),
          this.mask4.set_width(700),
          this.mask4.set_height(400),
          this.mask4.set_y(500),
          this.mask4.set_x(0));
      this.addChild(this.mask1);
      this.addChild(this.mask2);
      this.addChild(this.mask3);
      this.addChild(this.mask4);
      k.maskesAddedM = !0;
    },
    resizeStage: function (a) {
      k.setXY(
        u["int"](N.get_current().stage.stageWidth),
        u["int"](N.get_current().stage.stageHeight)
      );
      k.resizeGame();
      k.resizeStage(k.theMenu);
      k.offsetPage();
      N.trace("windows displayed");
    },
    overMouse: function (a) {
      r.__cast(a.currentTarget, y).showBehavior("over");
      C.play("SoundRollver");
    },
    outMouse: function (a) {
      r.__cast(a.currentTarget, y).showBehavior("out");
    },
    clearState: function () {
      for (
        this.removeEventListener("enterFrame", m(this, this.onEnterFrame));
        0 < k.theGame.get_numChildren();

      )
        k.theGame.removeChildAt(0);
      k.previousLevel = this;
      k.theMenu.set_alpha(0.01);
      k.theGame.set_alpha(1);
      k.theMenu.mouseEnabled = !1;
      k.theMenu.mouseChildren = !1;
      k.theGame.mouseEnabled = !0;
      k.theGame.mouseChildren = !0;
    },
    goToPlayBefore: function (a) {
      k.showInterstital("menu");
    },
    goToPlay: function () {
      ca.trace("play", {
        fileName: "MenuState.hx",
        lineNumber: 411,
        className: "MenuState",
        methodName: "goToPlay",
      });
      this.clearState();
      this.playState = new Lf(this._parent);
      k.maskesAddedM = !1;
      C.play("SoundGameButonsClick");
      k.curSprite = this.playState;
      k.resizeGame();
      k.resizeStage(k.curSprite);
      k.offsetPage();
      N.trace("windows displayed");
      k.blackScreenTween(this.playState);
    },
    onEnterFrame: function (a) {
      a = N.getTimer() - this.lastTime;
      this.mainBackGround.update(a);
      this.play.update(a);
      this.play.update(a);
      this.lastTime = N.getTimer();
    },
    __class__: Kf,
  });
  var Bd = function (a, b) {
    this.dataFromJsonForParsing = [];
    this.stars = null;
    this.scoreArray = [null, null, null, null];
    this.timeA = null;
    this.leftKey = this.rightKey = this.downKey = this.upKey = !1;
    this.waitTimer = new $b(1e3, 0);
    this.doorTimer = new $b(1e3, 0);
    this.endTimer = new $b(2e3, 0);
    this.stopwatchTimer = new $b(1e3, 0);
    this.boomTimer = new $b(60, 0);
    this.rollsCollisionMask = -11;
    this.rollsCollisionGroup = 10;
    this.elevatorCollisionMask = -2;
    this.elevatorCollisionGroup = 3;
    this.objectsCollisionMask = -1;
    this.objectsCollisionGroup = 4;
    this.loaderCollisionMask = -3;
    this.loaderCollisionGroup = 2;
    this.constraintType = new za();
    this.loaderType = new za();
    this.elevatorType = new za();
    this.boxType = new za();
    this.wallType = new za();
    this.loaderSensorType = new za();
    this.fracArray = [];
    this.oPieces = [];
    this.boxArray = [];
    this.loaderBoom = !1;
    this.bombForceDefault = 0;
    this.scores = new Ei();
    this.boomSprite = [];
    this.bombZone = 75;
    this.gameMovieClips = [];
    this.shadows = [];
    this.lamps = [];
    this.transporters = [];
    this.elevatorsCons = [];
    this.elevatorsEnd = [];
    this.elevators = [];
    this.doorsCons = [];
    this.doors = [];
    this.transformators = [];
    this.coolers = [];
    this.buttons = [];
    this.loaderInCargo = this.craneMagnetInCargo = !1;
    this.cargoBox = [];
    this.loaderSpeed = 6;
    this.magnetActivate =
      this.craneMagnetActivate =
      this.loaderJump =
      this.loaderWithBox =
        !1;
    this.trucks = [];
    this.currentControl = "loader";
    this.oldMousePosition = new w(0, 0);
    this.gameScreen = new wa();
    this._parent = null;
    this.timerBeforeStart = new $b(200, 1);
    this.lastTime = 0;
    this.Score2 = new wb();
    this.Score = new wb();
    this.gravity = new w(0, 350);
    wa.call(this);
    this._parent = a;
    this.cLevel = b;
    k.previousLevel = null;
    k.currentLevel = b;
    k.playState = this;
    k.space = new bh(this.gravity);
    this.gameScreen = k.theGame;
    this.bombForceDefault = (3500 * this.bombZone) / 2;
    k.curSprite = this._parent;
    Gamezy24SDK.gameplayStart();
    ca.trace("before load", {
      fileName: "PlayState.hx",
      lineNumber: 374,
      className: "PlayState",
      methodName: "new",
    });
    this.loadUI();
    ca.trace("aftre load", {
      fileName: "PlayState.hx",
      lineNumber: 376,
      className: "PlayState",
      methodName: "new",
    });
    this.init();
    ca.trace("after init", {
      fileName: "PlayState.hx",
      lineNumber: 382,
      className: "PlayState",
      methodName: "new",
    });
    k.checkUrl(
      "coolmath-games.com edit.coolmath-games.com stage.coolmath-games.com edit-stage.coolmath-games.com dev.coolmath-games.com bestphysics.com".split(
        " "
      )
    ) &&
      null != parent.cmgGameEvent &&
      parent.cmgGameEvent("start", k.currentLevel);
  };
  l.PlayState = Bd;
  Bd.__name__ = ["PlayState"];
  Bd.__super__ = wa;
  Bd.prototype = v(wa.prototype, {
    handJoint: null,
    mainBackGround: null,
    back: null,
    gravity: null,
    Score: null,
    Score2: null,
    sound: null,
    menu: null,
    levels: null,
    restart: null,
    mainBackGround3: null,
    mask1: null,
    mask2: null,
    mask3: null,
    mask4: null,
    levelData: null,
    lastTime: null,
    cLevel: null,
    timerBeforeStart: null,
    _parent: null,
    gameScreen: null,
    oldMousePosition: null,
    currentLevelNumber: null,
    gameOver: null,
    currentControl: null,
    mx: null,
    my: null,
    truckLoaderBody: null,
    loaderLeftWheel: null,
    loaderRightWheel: null,
    tk1: null,
    tk2: null,
    magnet: null,
    mount: null,
    craneBody: null,
    craneMagnetBody: null,
    dxb: null,
    dyb: null,
    rastb: null,
    MiningBody: null,
    MiningLeftWheel: null,
    MiningRightWheel: null,
    wallBody: null,
    magnetJointPoint: null,
    magnetJointPoint2: null,
    pvLoaderSensor: null,
    clawDistance: null,
    lineJointLoaderLeftWheel: null,
    lineJointLoaderRightWheel: null,
    mountCons: null,
    trucks: null,
    currentTruck: null,
    magnetActivate: null,
    craneMagnetActivate: null,
    loaderJump: null,
    loaderWithBox: null,
    loaderSpeed: null,
    outLight: null,
    cargoBox: null,
    loaderInCargo: null,
    craneMagnetInCargo: null,
    cargoString: null,
    craneMagnetTouch: null,
    craneSensorLeftTouch: null,
    craneSensorRightTouch: null,
    craneBoxId: null,
    clinchCount: null,
    buttons: null,
    coolers: null,
    transformators: null,
    doors: null,
    doorsCons: null,
    elevators: null,
    elevatorsEnd: null,
    elevatorsCons: null,
    transporters: null,
    lamps: null,
    shadows: null,
    gameMovieClips: null,
    elevatorTimer1: null,
    elevatorTimer2: null,
    elevatorTimer3: null,
    elevatorForCheck: null,
    elevatorsMove: null,
    bombZone: null,
    boomSprite: null,
    scores: null,
    bombForceDefault: null,
    boomX: null,
    boomY: null,
    loaderBoom: null,
    boxArray: null,
    oPieces: null,
    fracArray: null,
    groundLoaderJoint: null,
    mouseJoint: null,
    mouseJoint2: null,
    magnetJoint: null,
    magnetJoint2: null,
    magnetJoint3: null,
    craneMagnetJoint: null,
    loaderSensorType: null,
    wallType: null,
    boxType: null,
    elevatorType: null,
    loaderType: null,
    constraintType: null,
    loaderCollisionGroup: null,
    loaderCollisionMask: null,
    objectsCollisionGroup: null,
    objectsCollisionMask: null,
    elevatorCollisionGroup: null,
    elevatorCollisionMask: null,
    rollsCollisionGroup: null,
    rollsCollisionMask: null,
    pastTime: null,
    boomTimer: null,
    stopwatchTimer: null,
    endTimer: null,
    doorTimer: null,
    waitTimer: null,
    boxListener: null,
    boxListenerEnd: null,
    elevatorLoaderListener: null,
    elevatorBoxesListener: null,
    loaderSensorListener: null,
    loaderSensorListener2: null,
    boxSensorListener: null,
    consListener: null,
    leftKey: null,
    rightKey: null,
    downKey: null,
    upKey: null,
    boxVelocity: null,
    leftBtn: null,
    rightBtn: null,
    upBtn: null,
    actBtn: null,
    timeA: null,
    scoreArray: null,
    stars: null,
    dataFromJsonForParsing: null,
    loadJsonDataWall: function (a) {
      this.levelData = uf.parse(
        ha.getText("levels/level" + u.string(this.cLevel) + ".json")
      );
      a = [];
      for (
        var b = [],
          c,
          d,
          e = [],
          f = [],
          g = this.levelData.data.stage.shape,
          h = 0;
        h < g.length;

      )
        if (((d = g[h]), ++h, "verts" == d.name)) {
          var n = u.string(d.xy1).split(" : ");
          c = [];
          for (var p = 0; p < n.length; ) {
            var l = n[p];
            ++p;
            l = new w(
              u.parseFloat(l.split(",")[0]),
              u.parseFloat(l.split(",")[1])
            );
            c.push(l);
          }
          n = u.string(d.xy2).split(" : ");
          d = [];
          for (p = 0; p < n.length; )
            (l = n[p]),
              ++p,
              (l = new w(
                u.parseFloat(l.split(",")[0]),
                u.parseFloat(l.split(",")[1])
              )),
              d.push(l);
          a.push(c);
          b.push(d);
        } else {
          f.push(d.name);
          f.push(new w(u.parseFloat(d.x), u.parseFloat(d.y)));
          f.push(d.text);
          f.push(d.level);
          null != d.Angle ? f.push(u.parseInt(d.Angle)) : f.push(0);
          f.push(d.Switch);
          f.push(d.OpenDirection);
          "true" == d.Closed ? f.push(!0) : f.push(!1);
          "true" == d.Enabled ? f.push(!0) : f.push(!1);
          if (null != d.truckPoints) {
            c = (
              ":" ==
              u.string(d.truckPoints).charAt(u.string(d.truckPoints).length - 1)
                ? S.substr(
                    u.string(d.truckPoints),
                    0,
                    u.string(d.truckPoints).length - 1
                  )
                : u.string(d.truckPoints)
            ).split(":");
            n = [];
            for (p = 0; p < c.length; )
              (l = c[p]),
                ++p,
                (l = new w(
                  u.parseFloat(l.split(",")[0]),
                  u.parseFloat(l.split(",")[1])
                )),
                n.push(l);
            f.push(n);
          }
          f.push(d.alpha);
          c = new w(0, 0);
          n = d.WidthHeight;
          null != n
            ? ((n = n.split(" ")),
              c.set_x(u.parseFloat(n[0])),
              c.set_y(u.parseFloat(n[1])),
              f.push(c))
            : f.push(null);
          f.push(d.Activate);
          "false" == d.AutoChange ? f.push(!1) : f.push(!0);
          f.push(u.string(d.End));
          f.push(d.EndPoint);
          f.push(u.parseFloat(d.Speed));
          f.push(u.parseFloat(d.Try));
          f.push(u.parseFloat(d.Start));
          f.push(u.parseFloat(d.StopTime));
          f.push(d.ChangeDirection);
          f.push(d.ename);
          if (null != d.mtPoints) {
            c = (
              ":" ==
              u.string(d.mtPoints).charAt(u.string(d.mtPoints).length - 1)
                ? S.substr(
                    u.string(d.mtPoints),
                    0,
                    u.string(d.mtPoints).length - 1
                  )
                : u.string(d.mtPoints)
            ).split(":");
            n = [];
            for (p = 0; p < c.length; )
              (l = c[p]),
                ++p,
                (l = new w(
                  u.parseFloat(l.split(",")[0]),
                  u.parseFloat(l.split(",")[1])
                )),
                n.push(l);
            f.push(n);
          } else f.push(null);
          if (null != d.transPoint) {
            c = (
              ":" ==
              u.string(d.transPoint).charAt(u.string(d.transPoint).length - 1)
                ? S.substr(
                    u.string(d.transPoint),
                    0,
                    u.string(d.transPoint).length - 1
                  )
                : u.string(d.transPoint)
            ).split(":");
            n = [];
            for (p = 0; p < c.length; )
              (l = c[p]),
                ++p,
                (l = new w(
                  u.parseFloat(l.split(",")[0]),
                  u.parseFloat(l.split(",")[1])
                )),
                n.push(l);
            f.push(n);
          } else f.push(null);
          f.push(d.Direction);
          f.push(d.Broken);
          e.push(f);
          f = [];
        }
      this.wallBody = this.createWallBody(b);
      this.wallBody.set_space(k.space);
      this.wallBody.get_cbTypes().add(this.wallType);
      return e;
    },
    createWallBody: function (a) {
      for (var b = new Ra(oa.get_STATIC()), c = 0; c < a.length; ) {
        var d = a[c];
        ++c;
        d = new Sa(d);
        b.get_shapes().add(d);
      }
      return b;
    },
    init: function () {
      ca.trace("start oo", {
        fileName: "PlayState.hx",
        lineNumber: 632,
        className: "PlayState",
        methodName: "init",
      });
      this.dataFromJsonForParsing = this.loadJsonDataWall(k.currentLevel);
      switch (k.currentLevel) {
        case 7:
          k.addKoef = 0.84;
          break;
        case 18:
          k.addKoef = 10;
          k.addKoef2 = 0;
          break;
        default:
          (k.addKoef = 0), (k.addKoef2 = 0);
      }
      this.createLevel(1);
      this.handJoint = new ac(k.space.get_world(), null, w.weak(), w.weak());
      k.handJoint = this.handJoint;
      this.handJoint.set_space(k.space);
      this.handJoint.set_active(!1);
      this.handJoint.set_stiff(!1);
      k.initLevel(this);
      N.get_current().stage.addEventListener(
        "resize",
        m(this, this.resizeStage)
      );
      this.timerBeforeStart.start();
      this.timerBeforeStart.addEventListener(
        "timerComplete",
        m(this, this.startTheGame)
      );
      k.run = !0;
      this.loadButtonPanel();
      k.resizeGame();
      C.setLevelSounds(k.currentLevel);
      this.addMask();
    },
    createLevel: function (a, b) {
      null == b && (b = "buttons");
      for (var c = null, d = 0, e = 0, f = 0, g = this.trucks.length; f < g; ) {
        var h = f++;
        this.trucks[h].cargoLoad = !1;
      }
      this.clawDistance = 0;
      this.craneSensorLeftTouch =
        this.craneSensorRightTouch =
        this.craneMagnetTouch =
        this.craneMagnetInCargo =
        this.loaderInCargo =
          !1;
      this.currentLevelNumber = a;
      this.MiningBody = new Ra(oa.get_DYNAMIC(), new w(d, e));
      this.MiningBody.graphic = k.initSpriteUI("MiningTruckWheel");
      this.MiningLeftWheel = new Ra(oa.get_DYNAMIC(), new w(d, e));
      this.MiningLeftWheel.get_shapes().add(
        new Ub(
          1,
          new w(0, 0),
          new Aa(0.4, 3.5, 3.5, 7.5),
          new Oa(this.objectsCollisionGroup, this.objectsCollisionMask)
        )
      );
      this.MiningLeftWheel.graphic = k.initSpriteUI("MiningTruckWheel");
      this.MiningRightWheel = new Ra(oa.get_DYNAMIC(), new w(d, e));
      this.MiningRightWheel.get_shapes().add(
        new Ub(
          1,
          new w(0, 0),
          new Aa(0.4, 3.5, 3.5, 7.5),
          new Oa(this.objectsCollisionGroup, this.objectsCollisionMask)
        )
      );
      this.MiningRightWheel.graphic = k.initSpriteUI("MiningTruckWheel");
      this.MiningRightWheel.graphic = k.initSpriteUI("MiningTruckWheel");
      this.clinchCount = 0;
      for (
        var n,
          p = this.dataFromJsonForParsing.length - 1,
          l = null,
          Xb = "",
          q = 0,
          xg = p + 1;
        q < xg;

      ) {
        var E = q++;
        k.arrayWall[this.cLevel - 1] == p + 2 - E &&
          (this.gameScreen.addChild(this.back),
          ca.trace("The Wall", {
            fileName: "PlayState.hx",
            lineNumber: 749,
            className: "PlayState",
            methodName: "createLevel",
          }));
        ca.trace(p - E, {
          fileName: "PlayState.hx",
          lineNumber: 753,
          className: "PlayState",
          methodName: "createLevel",
        });
        n = this.dataFromJsonForParsing[p - E][0];
        ca.trace(n, {
          fileName: "PlayState.hx",
          lineNumber: 755,
          className: "PlayState",
          methodName: "createLevel",
        });
        "Shape" == n &&
          ((Xb = this.dataFromJsonForParsing[p - E][2]),
          "toDo" != Xb
            ? ((l = k.initSpriteUI(Xb)),
              l.set_x(
                k.roundBy(
                  100,
                  r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_x()
                ) +
                  l.get_width() / 2
              ),
              l.set_y(
                k.roundBy(
                  100,
                  r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_y()
                ) +
                  l.get_height() / 2
              ),
              null != this.dataFromJsonForParsing[p - E][4] &&
                l.set_rotation(
                  k.roundBy(
                    100,
                    u.parseFloat(this.dataFromJsonForParsing[p - E][4])
                  )
                ),
              this.gameScreen.addChild(l))
            : ca.trace("toDo", {
                fileName: "PlayState.hx",
                lineNumber: 772,
                className: "PlayState",
                methodName: "createLevel",
              }));
        "StaticText" == n &&
          ((Xb = this.dataFromJsonForParsing[p - E][2]),
          "toDo" != Xb
            ? ("LEVEL" == S.substr(Xb, 0, 5)
                ? ((l = k.initAnimation("LEVEL", "ui")),
                  l.showBehavior(u.string(k.currentLevel - 1)),
                  l.update(1),
                  l.set_x(
                    k.roundBy(
                      100,
                      r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_x()
                    ) +
                      l.get_width() / 2
                  ),
                  l.set_y(
                    k.roundBy(
                      100,
                      r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_y()
                    ) +
                      l.get_height() / 2
                  ),
                  l.update(1))
                : ((l = k.initSpriteUI(Xb)),
                  l.set_x(
                    k.roundBy(
                      100,
                      r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_x()
                    ) +
                      l.get_width() / 2
                  ),
                  l.set_y(
                    k.roundBy(
                      100,
                      r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_y()
                    ) +
                      l.get_height() / 2
                  )),
              this.gameScreen.addChild(l))
            : ca.trace("toDo", {
                fileName: "PlayState.hx",
                lineNumber: 799,
                className: "PlayState",
                methodName: "createLevel",
              }));
        "MovieClip" == n &&
          ((Xb = this.dataFromJsonForParsing[p - E][2]),
          "toDo" != Xb
            ? ((l = k.initSpriteUI(Xb)),
              l.set_x(
                k.roundBy(
                  100,
                  r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_x() +
                    l.get_width() / 2
                )
              ),
              l.set_y(
                k.roundBy(
                  100,
                  r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_y() +
                    l.get_height() / 2
                )
              ),
              l.set_rotation(
                k.roundBy(
                  100,
                  u.parseFloat(this.dataFromJsonForParsing[p - E][4])
                )
              ),
              this.gameScreen.addChild(l))
            : ca.trace("toDo", {
                fileName: "PlayState.hx",
                lineNumber: 822,
                className: "PlayState",
                methodName: "createLevel",
              }));
        "LeaveTheTruck" == n &&
          ((Xb = "outLight"),
          "toDo" != Xb
            ? ((this.outLight = k.initAnimation(Xb, "ui")),
              this.outLight.showBehavior("disable"),
              this.outLight.update(1),
              this.outLight.set_x(
                k.roundBy(
                  100,
                  r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_x()
                ) - this.outLight.get_width()
              ),
              this.outLight.set_y(
                k.roundBy(
                  100,
                  r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_y()
                ) - this.outLight.get_height()
              ),
              this.gameScreen.addChild(this.outLight))
            : ca.trace("toDo", {
                fileName: "PlayState.hx",
                lineNumber: 845,
                className: "PlayState",
                methodName: "createLevel",
              }));
        if ("Seesaw" == n) {
          var t = k.initSpriteUI(n);
          t.set_x(
            k.roundBy(
              100,
              r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_x()
            )
          );
          t.set_y(
            k.roundBy(
              100,
              r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_y()
            )
          );
          var v = new Ra(oa.get_DYNAMIC(), new w(t.get_x(), t.get_y()));
          v.get_shapes().add(
            new Sa(
              Sa.rect(
                0.5 * -t.get_width(),
                0.5 * -t.get_height(),
                t.get_width(),
                t.get_height()
              ),
              Aa.wood(),
              new Oa(this.objectsCollisionGroup, this.objectsCollisionMask)
            )
          );
          v.graphic = t;
          v.align();
          v.get_cbTypes().add(this.wallType);
          v.get_userData().gameData = n;
          k.space.get_bodies().add(v);
          this.gameScreen.addChild(t);
          this.clinchCount++;
          var x = k.initSpriteUI("Clinch");
          t.addChild(x);
          d = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_x()
          );
          e = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_y()
          );
          var z = new ac(
            k.space.get_world(),
            v,
            k.space.get_world().worldPointToLocal(new w(d, e)),
            v.worldPointToLocal(new w(d, e))
          );
          z.set_ignore(!0);
          k.space.get_constraints().add(z);
        }
        if (
          "WideLongDoor" == n ||
          "ThinLongDoor" == n ||
          "WideShortDoor" == n ||
          "ThinShortDoor" == n
        ) {
          var C = u.parseFloat(this.dataFromJsonForParsing[p - E][4]),
            A = k.initSpriteUI(n);
          A.set_x(
            k.roundBy(
              100,
              r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_x()
            )
          );
          A.set_y(
            k.roundBy(
              100,
              r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_y()
            )
          );
          A.Switch = this.dataFromJsonForParsing[p - E][5];
          A.Closed = this.dataFromJsonForParsing[p - E][7];
          A.OpenDirection = this.dataFromJsonForParsing[p - E][6];
          k.theGame.addChild(A);
          A.set_rotation(0);
          var B = new Ra(oa.get_DYNAMIC(), new w(A.get_x(), A.get_y()));
          var R = 0,
            K = 0;
          switch (n) {
            case "ThinLongDoor":
              R = 9.95;
              K = 109.1;
              break;
            case "ThinShortDoor":
              R = 9.95;
              K = 54.9;
              break;
            case "WideLongDoor":
              R = 29.8;
              K = 109.35;
              break;
            case "WideShortDoor":
              R = 29.8;
              K = 54.7;
              break;
            default:
              (R = Math.ceil(A.get_width() / 2)),
                (K = Math.ceil(A.get_height() / 2));
          }
          B.get_shapes().add(
            new Sa(
              Sa.rect(0.5 * -R, 0.5 * -K, R, K),
              Aa.steel(),
              new Oa(this.elevatorCollisionGroup, this.elevatorCollisionMask)
            )
          );
          0 != C && (B.set_rotation(C / Bd.DEGREE), A.set_rotation(C));
          B.graphic = A;
          B.align();
          B.get_cbTypes().add(this.wallType);
          B.set_allowRotation(!1);
          B.get_userData().gameData = n;
          k.space.get_bodies().add(B);
          this.doors.push(B);
          var D = new Xf(
            k.space.get_world(),
            B,
            k.space
              .get_world()
              .worldPointToLocal(
                new w(B.get_position().get_x(), B.get_position().get_y())
              ),
            B.worldPointToLocal(
              new w(B.get_position().get_x(), B.get_position().get_y())
            )
          );
          D.set_ignore(!0);
          D.set_stiff(!0);
          D.set_damping(8.2);
          k.space.get_constraints().add(D);
          this.doorsCons.push(D);
        }
        if ("Lamp" == n) {
          var Ac = k.initAnimation("Lamp", "ui", !0);
          this.lamps.push(Ac);
          this.gameScreen.addChild(Ac);
          Ac.set_x(
            k.roundBy(
              100,
              r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_x()
            )
          );
          Ac.set_y(
            k.roundBy(
              100,
              r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_y()
            )
          );
          Ac.Activate = this.dataFromJsonForParsing[p - E][11];
          Ac.Enabled = this.dataFromJsonForParsing[p - E][8];
          Ac.set_rotation(
            k.roundBy(100, u.parseFloat(this.dataFromJsonForParsing[p - E][4]))
          );
          1 == Ac.Enabled
            ? Ac.showBehavior("enable")
            : Ac.showBehavior("disable");
        }
        if ("Shadow" == n || "HalfShadow" == n) {
          var H = k.initAnimation(n, "ui", !0);
          null != this.dataFromJsonForParsing[p - E][10] &&
            (H.set_scaleX(
              k.roundBy(
                100,
                r.__cast(this.dataFromJsonForParsing[p - E][10], w).get_x() /
                  100
              )
            ),
            H.set_scaleY(
              k.roundBy(
                100,
                r.__cast(this.dataFromJsonForParsing[p - E][10], w).get_y() /
                  100
              )
            ),
            ca.trace(H.get_scaleX(), {
              fileName: "PlayState.hx",
              lineNumber: 984,
              className: "PlayState",
              methodName: "createLevel",
            }),
            ca.trace(H.get_scaleY(), {
              fileName: "PlayState.hx",
              lineNumber: 985,
              className: "PlayState",
              methodName: "createLevel",
            }));
          H.showBehavior("enable");
          this.shadows.push(H);
          this.gameScreen.addChild(H);
          H.Switch = this.dataFromJsonForParsing[p - E][5];
          H.set_x(
            k.roundBy(
              100,
              r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_x() +
                r.__cast(this.dataFromJsonForParsing[p - E][10], w).get_x() / 2
            )
          );
          H.set_y(
            k.roundBy(
              100,
              r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_y() +
                r.__cast(this.dataFromJsonForParsing[p - E][10], w).get_y() / 2
            )
          );
          H.set_rotation(
            k.roundBy(100, u.parseFloat(this.dataFromJsonForParsing[p - E][4]))
          );
          ca.trace(H.get_x(), {
            fileName: "PlayState.hx",
            lineNumber: 994,
            className: "PlayState",
            methodName: "createLevel",
          });
          ca.trace(H.get_y(), {
            fileName: "PlayState.hx",
            lineNumber: 995,
            className: "PlayState",
            methodName: "createLevel",
          });
        }
        if ("GreenButton" == n || "OrangeButton" == n || "BlueButton" == n) {
          var F = new tf(n, this.dataFromJsonForParsing[p - E][5]);
          this.buttons.push(F);
          F.set_x(
            k.roundBy(
              100,
              r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_x()
            )
          );
          F.set_y(
            k.roundBy(
              100,
              r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_y()
            )
          );
          F.set_rotation(0);
          0 != this.dataFromJsonForParsing[p - E][4] &&
            F.set_rotation(this.dataFromJsonForParsing[p - E][4]);
        }
        if ("TransformerVault" == n) {
          var G = new Ai();
          c = k.initAnimation("TransformerVault", "ui");
          c.showBehavior("enable");
          c.set_x(
            k.roundBy(
              100,
              r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_x()
            ) - 17
          );
          c.set_y(
            k.roundBy(
              100,
              r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_y()
            )
          );
          G.transGraphic = c;
          this.transformators.push(G);
          this.gameScreen.addChild(G.transGraphic);
          this.transformators[this.transformators.length - 1].transSwitch =
            this.dataFromJsonForParsing[p - E][5];
          this.transformators[this.transformators.length - 1].transBroken =
            "false" == this.dataFromJsonForParsing[p - E][24] ? !1 : !0;
        }
        if ("ElevatorEnd" == n) {
          var J = k.initSpriteUI("ElevatorEnd");
          J.set_x(
            k.roundBy(
              100,
              r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_x()
            )
          );
          J.set_y(
            k.roundBy(
              100,
              r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_y()
            )
          );
          J.set_name(this.dataFromJsonForParsing[p - E][20]);
          this.elevatorsEnd.push(J);
          this.gameScreen.addChild(J);
        }
        if ("Cooler" == n) {
          var L = k.initSpriteUI("coollerMain"),
            N = k.initSpriteUI("blades");
          L.addChild(N);
          L.blades = N;
          var M = k.initSpriteUI("coollerTop");
          L.addChild(M);
          L.set_x(
            k.roundBy(
              100,
              r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_x()
            )
          );
          L.set_y(
            k.roundBy(
              100,
              r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_y()
            )
          );
          this.coolers.push(L);
        }
        if ("Elevator" == n) {
          var I = k.initSpriteUI("elevatorBody");
          I.set_x(
            k.roundBy(
              100,
              r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_x()
            )
          );
          I.set_y(
            k.roundBy(
              100,
              r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_y()
            )
          );
          I.Enabled = this.dataFromJsonForParsing[p - E][8];
          I.AutoChange = this.dataFromJsonForParsing[p - E][12];
          I.End = this.dataFromJsonForParsing[p - E][13];
          I.EndPoint = this.dataFromJsonForParsing[p - E][14];
          I.Speed = this.dataFromJsonForParsing[p - E][15];
          I.Try = this.dataFromJsonForParsing[p - E][16];
          I.Start = this.dataFromJsonForParsing[p - E][17];
          I.StopTime = this.dataFromJsonForParsing[p - E][18];
          I.Activate = this.dataFromJsonForParsing[p - E][11];
          I.ChangeDirection = this.dataFromJsonForParsing[p - E][19];
          var V = k.initSpriteUI("elevatorCogwheel");
          V.set_y(0);
          V.set_x(-25);
          I.addChild(V);
          I.w1 = V;
          var T = k.initSpriteUI("elevatorCogwheel");
          T.set_y(0);
          T.set_x(24);
          I.addChild(T);
          I.w2 = T;
          var X = k.initSpriteUI("elevatorTop");
          X.set_y(-I.get_height() / 2 + 3);
          I.addChild(X);
          var O = new Ra(oa.get_DYNAMIC(), new w(I.get_x(), I.get_y()));
          O.get_shapes().add(
            new Sa(
              Sa.rect(
                0.5 * -I.get_width(),
                0.5 * -I.get_height(),
                I.get_width(),
                I.get_height()
              ),
              Aa.steel(),
              new Oa(this.elevatorCollisionGroup, this.elevatorCollisionMask)
            )
          );
          O.graphic = I;
          O.align();
          O.get_cbTypes().add(this.elevatorType);
          O.set_allowRotation(!1);
          O.get_userData().started = I.Enabled;
          var ba = k.initAnimation("TFXSparkL", "ui");
          ba.showBehavior("disable");
          ba.set_y(20);
          ba.set_x(-54);
          I.addChild(ba);
          I.spark1 = ba;
          var Y = k.initAnimation("TFXSpark", "ui");
          Y.showBehavior("disable");
          Y.set_y(20);
          Y.set_x(54);
          I.addChild(Y);
          I.spark2 = Y;
          I.Enabled && I.AutoChange
            ? (O.get_userData().moving = !0)
            : (O.get_userData().moving = !1);
          k.space.get_bodies().add(O);
          0 == this.elevators.length &&
            ((this.elevatorTimer1 = new $b(I.StopTime, 0)),
            this.elevatorTimer1.addEventListener("timer", m(this, this.elev1)),
            this.elevatorTimer1.stop());
          1 == this.elevators.length &&
            ((this.elevatorTimer2 = new $b(I.StopTime, 0)),
            this.elevatorTimer2.addEventListener("timer", m(this, this.elev2)),
            this.elevatorTimer2.stop());
          2 == this.elevators.length &&
            ((this.elevatorTimer3 = new $b(I.StopTime, 0)),
            this.elevatorTimer3.addEventListener("timer", m(this, this.elev3)),
            this.elevatorTimer3.stop());
          O.get_userData().gameData = "elevator" + this.elevators.length;
          this.elevators.push(O);
          var Q = new Xf(
            k.space.get_world(),
            O,
            k.space
              .get_world()
              .worldPointToLocal(
                new w(O.get_position().get_x(), O.get_position().get_y())
              ),
            O.worldPointToLocal(
              new w(O.get_position().get_x(), O.get_position().get_y())
            )
          );
          Q.set_ignore(!0);
          Q.set_stiff(!1);
          Q.set_damping(9.3);
          k.space.get_constraints().add(Q);
          this.elevatorsCons.push(Q);
        }
        if ("Transporter" == n) {
          var Z = k.initSpriteUI("TransporterBase"),
            U = new Fi();
          Z.Activate = this.dataFromJsonForParsing[p - E][11];
          Z.Enabled = this.dataFromJsonForParsing[p - E][8];
          Z.ChangeDirection = this.dataFromJsonForParsing[p - E][19];
          Z.Direction = this.dataFromJsonForParsing[p - E][23];
          Z.Speed = this.dataFromJsonForParsing[p - E][15];
          for (var ea = 0; 6 > ea; ) {
            var na = ea++;
            c = k.initSpriteUI("TransporterRoll");
            d = k.roundBy(
              100,
              r.__cast(this.dataFromJsonForParsing[p - E][22][na], w).get_x()
            );
            e = k.roundBy(
              100,
              r.__cast(this.dataFromJsonForParsing[p - E][22][na], w).get_y()
            );
            this.gameScreen.addChild(c);
            var ia = new Ra(oa.get_DYNAMIC(), new w(d, e));
            ia.get_shapes().add(
              new Ub(
                0.5 * c.get_width(),
                new w(0, 0),
                new Aa(0.1, 5.5, 5.5, 3.5),
                new Oa(this.rollsCollisionGroup, this.rollsCollisionMask)
              )
            );
            ia.graphic = c;
            ia.align();
            ia.get_cbTypes().add(this.wallType);
            k.space.get_bodies().add(ia);
            ia.get_userData().gameData = "rollBody";
            U.transporterRolls.push(ia);
          }
          var P = k.initSpriteUI("TransporterBase");
          d = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][22][6], w).get_x()
          );
          e = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][22][6], w).get_y()
          );
          P.set_x(d);
          P.set_y(e);
          var da = new Ra(oa.get_KINEMATIC(), new w(d, e));
          da.get_shapes().add(
            new Sa(
              Sa.rect(
                0.5 * -P.get_width(),
                0.5 * -P.get_height(),
                P.get_width(),
                P.get_height()
              ),
              Aa.steel()
            )
          );
          P.Activate = Z.Activate;
          P.Enabled = Z.Enabled;
          P.ChangeDirection = Z.ChangeDirection;
          P.Direction = Z.Direction;
          P.Speed = Z.Speed;
          this.gameScreen.addChild(P);
          da.graphic = P;
          da.align();
          da.get_cbTypes().add(this.wallType);
          k.space.get_bodies().add(da);
          U.base = da;
          this.transporters.push(U);
          for (var la, pa = 0, ka = U.transporterRolls.length; pa < ka; ) {
            var sa = pa++;
            la = new w(
              U.transporterRolls[sa].get_position().get_x(),
              U.transporterRolls[sa].get_position().get_y()
            );
            var ta = new ac(
              da,
              U.transporterRolls[sa],
              da.worldPointToLocal(la),
              U.transporterRolls[sa].worldPointToLocal(la)
            );
            ta.set_ignore(!0);
            k.space.get_constraints().add(ta);
          }
        }
        if (
          "SquareBox" == S.substr(n, 0, n.length - 1) ||
          "DangerBox" == S.substr(n, 0, n.length - 1) ||
          "VerticalBox" == S.substr(n, 0, n.length - 1) ||
          "BigBox" == n
        ) {
          var qa = this.boxArray.length,
            W = null;
          "DangerBox" != S.substr(n, 0, n.length - 1)
            ? ((W = k.initAnimation(n, "ui", !0)), W.showBehavior("0"))
            : (W = k.initSpriteUI(n));
          W.set_rotation(
            k.roundBy(100, u.parseFloat(this.dataFromJsonForParsing[p - E][4]))
          );
          this.gameScreen.addChild(W);
          if ("VerticalBox" == S.substr(n, 0, n.length - 2)) {
            var Fa = 0.01;
            var fa = 0.4;
          }
          "BigBox" == n ? ((Fa = 0.4), (fa = 0.3)) : (fa = Fa = 0.4);
          var ua = 0,
            Ca = 0;
          if ("1" == this.dataFromJsonForParsing[p - E][9]) {
            var aa = new Ra(
              oa.get_DYNAMIC(),
              new w(
                r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_x(),
                r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_y()
              )
            );
            switch (S.substr(n, 0, n.length - 1)) {
              case "BigBo":
              case "BigBox":
                Ca = ua = 40;
                break;
              case "DangerBo":
              case "DangerBox":
              case "SquareBox":
              case "SquareBox2":
              case "SquareBox3":
              case "SquareBox4":
                Ca = ua = 20;
                break;
              case "VerticalBox":
                ua = 40;
                Ca = 20;
                break;
              default:
                (ua = Math.ceil(W.get_width() / 2)),
                  (Ca = Math.ceil(W.get_height() / 2));
            }
            aa.get_shapes().add(
              new Sa(
                Sa.rect(-ua, -Ca, 2 * ua, 2 * Ca),
                new Aa(0.1, fa, fa, Fa),
                new Oa(this.objectsCollisionGroup, this.objectsCollisionMask)
              )
            );
            d = -6.65;
            e = -4.35;
            var xa = new Ub(
              1,
              new w(d - 10, e - 10),
              new Aa(0.1, 5.5, 5.5, 0.01),
              new Oa(this.objectsCollisionGroup, this.objectsCollisionMask)
            );
            aa.get_shapes().add(xa);
            this.oPieces.push(xa);
            7 == k.currentLevel && aa.set_allowRotation(!1);
            W.BoxId = qa;
            aa.graphic = W;
            aa.graphicOffset.set_x(W.get_width() / 2);
            aa.graphicOffset.set_y(W.get_height() / 2);
            aa.align();
            aa.get_userData().boxId = qa;
            k.space.get_bodies().add(aa);
            var ra = S.substr(n, 0, n.length - 1);
            aa.get_userData().gameData = ra;
            aa.get_userData().isCargo = !1;
            aa.get_cbTypes().add(this.boxType);
            this.boxArray.push(aa);
          } else
            W.set_alpha(u.parseFloat(this.dataFromJsonForParsing[p - E][9])),
              W.set_x(
                r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_x()
              ),
              W.set_y(
                r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_y()
              ),
              this.cargoBox.push(W),
              W.showBehavior("1"),
              W.update(1);
        }
        if ("MiningTruck" == n) {
          k.initSpriteUI("MiningTruckBody");
          var za = k.initSpriteUI("MiningTruckBody");
          this.gameScreen.addChild(za);
          for (
            var Ea = new Rb(), Ia = new Rb(), ma = new Rb(), va, Ha = 1;
            5 > Ha;

          ) {
            var Na = Ha++;
            va = r.__cast(this.dataFromJsonForParsing[p - E][21][Na - 1], w);
            Ea.push(va);
          }
          for (var Ba = 5; 9 > Ba; ) {
            var kb = Ba++;
            va = r.__cast(this.dataFromJsonForParsing[p - E][21][kb - 1], w);
            Ia.push(va);
          }
          for (var Ua = 9; 13 > Ua; ) {
            var Ja = Ua++;
            va = r.__cast(this.dataFromJsonForParsing[p - E][21][Ja - 1], w);
            ma.push(va);
          }
          d = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][21][12], w).get_x()
          );
          e = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][21][12], w).get_y()
          );
          this.MiningBody = new Ra(oa.get_DYNAMIC(), new w(d, e - 3));
          this.MiningBody.get_shapes().add(
            new Sa(
              Ea,
              new Aa(0.4, 0.2, 0.38, 0.7),
              new Oa(this.objectsCollisionGroup, this.objectsCollisionMask)
            )
          );
          this.MiningBody.get_shapes().add(
            new Sa(
              Ia,
              new Aa(0.4, 0.2, 0.38, 0.7),
              new Oa(this.objectsCollisionGroup, this.objectsCollisionMask)
            )
          );
          this.MiningBody.get_shapes().add(
            new Sa(
              ma,
              new Aa(0.4, 0.2, 0.38, 0.7),
              new Oa(this.objectsCollisionGroup, this.objectsCollisionMask)
            )
          );
          this.MiningBody.graphic = za;
          this.MiningBody.get_cbTypes().add(this.wallType);
          k.space.get_bodies().add(this.MiningBody);
          this.MiningBody.get_userData().gameData = "MiningTruckBody";
          c = k.initSpriteUI("MiningTruckWheel");
          d = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][21][13], w).get_x()
          );
          e = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][21][13], w).get_y()
          );
          this.gameScreen.addChild(c);
          this.MiningLeftWheel = new Ra(oa.get_DYNAMIC(), new w(d, e));
          this.MiningLeftWheel.get_shapes().add(
            new Ub(
              0.5 * c.get_width() - 1,
              new w(0, 0),
              new Aa(0.4, 3.5, 3.5, 7.5),
              new Oa(this.objectsCollisionGroup, this.objectsCollisionMask)
            )
          );
          this.MiningLeftWheel.graphic = c;
          this.MiningLeftWheel.align();
          k.space.get_bodies().add(this.MiningLeftWheel);
          this.MiningLeftWheel.get_userData().gameData = "MiningLeftWheel";
          var Ga = new w(d, e);
          var Da = new De(
            this.MiningBody,
            this.MiningLeftWheel,
            this.MiningBody.worldPointToLocal(Ga),
            new w(),
            new w(0, 1),
            0,
            20
          );
          Da.set_ignore(!0);
          k.space.get_constraints().add(Da);
          var ja = Ga;
          ja.set_y(ja.get_y() - 24);
          var ha = new dh(
            this.MiningBody,
            this.MiningLeftWheel,
            this.MiningBody.worldPointToLocal(Ga),
            new w(),
            24,
            26
          );
          ha.set_stiff(!1);
          ha.set_maxForce(15001);
          ha.set_frequency(5);
          ha.set_damping(21.2);
          k.space.get_constraints().add(ha);
          c = k.initSpriteUI("MiningTruckWheel");
          d = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][21][14], w).get_x()
          );
          e = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][21][14], w).get_y()
          );
          this.gameScreen.addChild(c);
          this.MiningRightWheel = new Ra(oa.get_DYNAMIC(), new w(d, e));
          this.MiningRightWheel.get_shapes().add(
            new Ub(
              0.5 * c.get_width() - 1,
              new w(0, 0),
              new Aa(0.4, 3.5, 3.5, 7.5),
              new Oa(this.objectsCollisionGroup, this.objectsCollisionMask)
            )
          );
          this.MiningRightWheel.graphic = c;
          this.MiningRightWheel.align();
          k.space.get_bodies().add(this.MiningRightWheel);
          this.MiningRightWheel.get_userData().gameData = "MiningRightWheel";
          Ga = new w(d, e);
          var Xa = new ac(
            this.MiningBody,
            this.MiningRightWheel,
            this.MiningBody.worldPointToLocal(Ga),
            new w()
          );
          Xa.set_ignore(!0);
          k.space.get_constraints().add(Xa);
        }
        if ("TruckLoader" == n) {
          var lb = k.initSpriteUI("LoaderBody");
          this.gameScreen.addChild(lb);
          for (var bb = new Rb(), Va, La = 1; 7 > La; ) {
            var ab = La++;
            Va = r.__cast(this.dataFromJsonForParsing[p - E][9][ab - 1], w);
            ca.trace(Va, {
              fileName: "PlayState.hx",
              lineNumber: 1612,
              className: "PlayState",
              methodName: "createLevel",
            });
            bb.push(Va);
          }
          d = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][9][6], w).get_x()
          );
          e = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][9][6], w).get_y()
          );
          this.truckLoaderBody = new Ra(oa.get_DYNAMIC(), new w(d, e));
          this.truckLoaderBody
            .get_shapes()
            .add(
              new Sa(
                bb,
                new Aa(0.4, 0.1, 0.1, 0.2),
                new Oa(this.loaderCollisionGroup, this.loaderCollisionMask)
              )
            );
          this.truckLoaderBody.graphic = lb;
          this.truckLoaderBody.align();
          this.truckLoaderBody.get_cbTypes().add(this.loaderType);
          k.space.get_bodies().add(this.truckLoaderBody);
          this.truckLoaderBody.get_userData().gameData = "truckLoaderBody";
          var Ka = new Ra(oa.get_DYNAMIC(), new w(d, e));
          Ka.get_shapes().add(
            new Ub(
              5,
              new w(0, 0),
              new Aa(0.1, 13.5, 13.5, 0.1),
              new Oa(this.loaderCollisionGroup, this.loaderCollisionMask)
            )
          );
          Ka.get_cbTypes().add(this.loaderSensorType);
          Ka.align();
          Ka.set_gravMass(0.02);
          k.space.get_bodies().add(Ka);
          Ka.get_userData().gameData = "loaderSensor";
          var jb = new w(d, e);
          this.pvLoaderSensor = new ac(
            this.truckLoaderBody,
            Ka,
            this.truckLoaderBody.worldPointToLocal(jb),
            new w(0, -44)
          );
          this.pvLoaderSensor.set_ignore(!0);
          k.space.get_constraints().add(this.pvLoaderSensor);
          c = k.initSpriteUI("Wheel");
          d = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][9][7], w).get_x()
          );
          e = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][9][7], w).get_y()
          );
          var eb = k.initSpriteUI("WheelSensor");
          eb.set_x(0);
          eb.set_y(0);
          c.sensor = eb;
          c.addChild(eb);
          eb.set_alpha(0.01);
          this.gameScreen.addChild(c);
          this.loaderLeftWheel = new Ra(oa.get_DYNAMIC(), new w(d, e));
          this.loaderLeftWheel
            .get_shapes()
            .add(
              new Ub(
                20.85,
                new w(0, 0),
                new Aa(0.1, 5.5, 5.5, 3.5),
                new Oa(this.loaderCollisionGroup, this.loaderCollisionMask)
              )
            );
          this.loaderLeftWheel.graphic = c;
          this.loaderLeftWheel.align();
          this.loaderLeftWheel.get_cbTypes().add(this.loaderType);
          k.space.get_bodies().add(this.loaderLeftWheel);
          this.loaderLeftWheel.get_userData().gameData = "loaderLeftWheel";
          var Za = new w(d, e + 3);
          this.lineJointLoaderLeftWheel = new De(
            this.truckLoaderBody,
            this.loaderLeftWheel,
            this.truckLoaderBody.worldPointToLocal(Za),
            new w(),
            new w(0, 2),
            0,
            4
          );
          this.lineJointLoaderLeftWheel.set_ignore(!0);
          k.space.get_constraints().add(this.lineJointLoaderLeftWheel);
          c = k.initSpriteUI("Wheel");
          d = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][9][8], w).get_x()
          );
          e = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][9][8], w).get_y()
          );
          this.gameScreen.addChild(c);
          var pb = k.initSpriteUI("WheelSensor");
          pb.set_x(0);
          pb.set_y(0);
          c.sensor = pb;
          c.addChild(pb);
          pb.set_alpha(0.01);
          this.loaderRightWheel = new Ra(oa.get_DYNAMIC(), new w(d, e));
          this.loaderRightWheel
            .get_shapes()
            .add(
              new Ub(
                20.85,
                new w(0, 0),
                new Aa(0.1, 5.5, 5.5, 3.5),
                new Oa(this.loaderCollisionGroup, this.loaderCollisionMask)
              )
            );
          this.loaderRightWheel.graphic = c;
          this.loaderRightWheel.align();
          this.loaderRightWheel.get_cbTypes().add(this.loaderType);
          k.space.get_bodies().add(this.loaderRightWheel);
          this.loaderLeftWheel.get_userData().gameData = "loaderRightWheel";
          Za = new w(d, e + 3);
          this.lineJointLoaderRightWheel = new De(
            this.truckLoaderBody,
            this.loaderRightWheel,
            this.truckLoaderBody.worldPointToLocal(Za),
            new w(),
            new w(0, 2),
            0,
            4
          );
          this.lineJointLoaderRightWheel.set_ignore(!0);
          k.space.get_constraints().add(this.lineJointLoaderRightWheel);
          c = k.initSpriteUI("Chain1");
          this.gameScreen.addChild(c);
          d = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][9][9], w).get_x()
          );
          e = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][9][9], w).get_y()
          );
          this.tk1 = new Ra(oa.get_DYNAMIC(), new w(d, e));
          this.tk1
            .get_shapes()
            .add(
              new Sa(
                Sa.rect(-9.3, -24.325, 18.6, 48.65),
                new Aa(0.1, 0.5, 0.5, 0.1),
                new Oa(this.loaderCollisionGroup, this.loaderCollisionMask)
              )
            );
          this.tk1.graphic = c;
          this.tk1.align();
          this.tk1.get_cbTypes().add(this.loaderType);
          k.space.get_bodies().add(this.tk1);
          this.tk1.get_userData().gameData = "tk1";
          d = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][9][10], w).get_x()
          );
          e = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][9][10], w).get_y()
          );
          var ya = new w(d, e);
          this.groundLoaderJoint = new ac(
            k.space.get_world(),
            this.tk1,
            k.space.get_world().worldPointToLocal(ya),
            this.tk1.worldPointToLocal(ya)
          );
          this.groundLoaderJoint.set_ignore(!0);
          this.groundLoaderJoint.set_stiff(!1);
          this.groundLoaderJoint.set_maxForce(25e3);
          this.groundLoaderJoint.set_frequency(33.7);
          this.groundLoaderJoint.set_damping(0.3);
          this.groundLoaderJoint.get_cbTypes().add(this.constraintType);
          k.space.get_constraints().add(this.groundLoaderJoint);
          this.clawDistance += c.get_height();
          c = k.initSpriteUI("Mount");
          this.gameScreen.addChild(c);
          d = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][9][11], w).get_x()
          );
          e = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][9][11], w).get_y()
          );
          this.mount = new Ra(oa.get_DYNAMIC(), new w(d, e));
          this.mount
            .get_shapes()
            .add(
              new Sa(
                Sa.rect(-11.3, -11.35, c.get_width(), c.get_height()),
                Aa.steel(),
                new Oa(this.loaderCollisionGroup, this.loaderCollisionMask)
              )
            );
          this.mount.graphic = c;
          this.mount.align();
          this.mount.set_allowRotation(!1);
          k.space.get_bodies().add(this.mount);
          ya = new w(d, e);
          this.mountCons = new ac(
            this.truckLoaderBody,
            this.mount,
            this.truckLoaderBody.worldPointToLocal(ya),
            this.mount.worldPointToLocal(ya)
          );
          this.mountCons.set_ignore(!0);
          k.space.get_constraints().add(this.mountCons);
          c = k.initSpriteUI("Chain2");
          this.gameScreen.addChild(c);
          d = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][9][12], w).get_x()
          );
          e = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][9][12], w).get_y()
          );
          this.tk2 = new Ra(oa.get_DYNAMIC(), new w(d, e));
          this.tk2
            .get_shapes()
            .add(
              new Sa(
                Sa.rect(-9.275, -26.175, 18.55, 52.35),
                new Aa(0.1, 0.5, 0.5, 0.1),
                new Oa(this.loaderCollisionGroup, this.loaderCollisionMask)
              )
            );
          this.tk2.graphic = c;
          this.tk2.align();
          this.tk2.get_cbTypes().add(this.loaderType);
          this.tk2.set_gravMass(-0.5);
          k.space.get_bodies().add(this.tk2);
          this.tk2.get_userData().gameData = "tk2";
          d = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][9][13], w).get_x()
          );
          e = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][9][13], w).get_y()
          );
          ya = new w(d, e);
          var rb = new ac(
            this.tk1,
            this.tk2,
            this.tk1.worldPointToLocal(ya),
            this.tk2.worldPointToLocal(ya)
          );
          rb.set_ignore(!0);
          rb.set_breakUnderForce(!0);
          k.space.get_constraints().add(rb);
          this.clawDistance += c.get_height();
          c = k.initSpriteUI("Magnet");
          d = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][9][14], w).get_x()
          );
          e = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][9][14], w).get_y()
          );
          this.magnet = new Ra(oa.get_DYNAMIC(), new w(d, e));
          this.magnet
            .get_shapes()
            .add(
              new Sa(
                Sa.rect(-16.45, -18.525, 32.9, 37.05),
                new Aa(0.1, 0.5, 0.5, 0.1),
                new Oa(this.loaderCollisionGroup, this.loaderCollisionMask)
              )
            );
          this.magnet
            .get_shapes()
            .add(
              (this.magnetJointPoint = new Ub(
                2,
                new w(-10, -15),
                Aa.wood(),
                new Oa(this.loaderCollisionGroup, this.loaderCollisionMask)
              ))
            );
          this.magnet
            .get_shapes()
            .add(
              (this.magnetJointPoint2 = new Ub(
                2,
                new w(10, -15),
                Aa.wood(),
                new Oa(this.loaderCollisionGroup, this.loaderCollisionMask)
              ))
            );
          var gb = k.initSpriteUI("Magnet");
          this.magnet.graphic = k.initSpriteUI("Magnet");
          var $a = k.initAnimation("TPFXLighting", "ui"),
            Ma = k.initSpriteUI("magneticBeam"),
            sb = k.initSpriteUI("magnetic"),
            db = k.initSpriteUI("magnetic");
          sb.set_x(-12);
          sb.set_y(-15.4);
          db.set_x(12);
          db.set_y(-15.4);
          this.magnet.graphic.beam = Ma;
          this.magnet.graphic.magnetic1 = sb;
          this.magnet.graphic.magnetic2 = db;
          this.magnet.graphic.addChild(gb);
          this.magnet.graphic.magnet = gb;
          $a.showBehavior("disable");
          $a.set_y(-36);
          $a.set_visible(!1);
          this.magnet.graphic.light = $a;
          this.magnet.graphic.addChild($a);
          Ma.set_y(-41.2);
          this.magnet.graphic.addChild(Ma);
          this.magnet.graphic.addChild(sb);
          this.magnet.graphic.addChild(db);
          this.magnet.graphic.mouseChildren = !1;
          this.magnet.align();
          this.magnet.get_cbTypes().add(this.loaderType);
          this.magnet.set_gravMass(-0.5);
          k.space.get_bodies().add(this.magnet);
          this.magnet.get_userData().gameData = "magnet";
          this.gameScreen.addChild(this.magnet.graphic);
          d = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][9][15], w).get_x()
          );
          e = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][9][15], w).get_y()
          );
          ya = new w(d, e);
          var Pa = new ac(
            this.tk2,
            this.magnet,
            this.tk2.worldPointToLocal(ya),
            this.magnet.worldPointToLocal(ya)
          );
          Pa.set_ignore(!0);
          Pa.set_breakUnderForce(!0);
          k.space.get_constraints().add(Pa);
          this.clawDistance += c.get_height();
        }
        if ("Truck" == n) {
          this.currentTruck = new Bi();
          var Qa = k.initSpriteUI("nearTruck");
          this.gameScreen.addChildAt(Qa, 1);
          c = k.initSpriteUI("TruckBody2");
          c.set_alpha(1);
          this.gameScreen.addChild(c);
          var qb = k.initSpriteUI("TruckStopSignal");
          qb.set_x(-180);
          qb.set_y(57);
          this.currentTruck.stopSignal = qb;
          this.currentTruck.stopSignal.set_visible(!1);
          this.currentTruck.stopSignal = qb;
          c.addChild(qb);
          var Wa = k.initSpriteUI("cargo");
          Wa.set_x(-97);
          Wa.set_y(-27);
          c.cargo = Wa;
          this.currentTruck.cargo = Wa;
          c.addChild(Wa);
          for (var Ta = new Rb(), cb = new Rb(), ob, hb = 1; 6 > hb; ) {
            var zb = hb++;
            ob = r.__cast(this.dataFromJsonForParsing[p - E][9][zb - 1], w);
            Ta.push(ob);
          }
          for (var sl = 6; 11 > sl; ) {
            var Il = sl++;
            ob = r.__cast(this.dataFromJsonForParsing[p - E][9][Il - 1], w);
            cb.push(ob);
          }
          d = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_x() - 4
          );
          e = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][1], w).get_y()
          );
          Qa.set_x(d + 62);
          Qa.set_y(e + 4);
          var Jl = oa.get_DYNAMIC();
          this.currentTruck.truckBody = new Ra(Jl, new w(d, e));
          this.currentTruck.truckBody
            .get_shapes()
            .add(
              new Sa(
                Ta,
                new Aa(0.2, 0.2, 0.38, 0.7),
                new Oa(this.objectsCollisionGroup, this.objectsCollisionMask)
              )
            );
          this.currentTruck.truckBody
            .get_shapes()
            .add(
              new Sa(
                cb,
                new Aa(0.2, 0.2, 0.38, 0.7),
                new Oa(this.objectsCollisionGroup, this.objectsCollisionMask)
              )
            );
          this.currentTruck.truckBody.get_userData().truck = 1;
          this.currentTruck.truckBody.graphic = c;
          this.currentTruck.truckBody.graphic.set_x(
            this.currentTruck.truckBody.get_position().get_x()
          );
          this.currentTruck.truckBody.graphic.set_y(
            this.currentTruck.truckBody.get_position().get_y()
          );
          this.currentTruck.truckBody.graphic.set_rotation(
            ((180 * this.currentTruck.truckBody.get_rotation()) / Math.PI) % 360
          );
          this.currentTruck.truckBody.align();
          this.currentTruck.truckBody.get_cbTypes().add(this.wallType);
          k.space.get_bodies().add(this.currentTruck.truckBody);
          this.currentTruck.truckBody.get_userData().gameData = "truckBody";
          c = k.initSpriteUI("TruckWeel");
          d = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][9][10], w).get_x()
          );
          e = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][9][10], w).get_y()
          );
          this.gameScreen.addChild(c);
          var Eb = oa.get_DYNAMIC();
          this.currentTruck.leftWheelTruck = new Ra(Eb, new w(d, e));
          this.currentTruck.leftWheelTruck
            .get_shapes()
            .add(
              new Ub(
                0.5 * c.get_width(),
                new w(0, 0),
                new Aa(0.4, 5.5, 5.5, 7.5),
                new Oa(this.objectsCollisionGroup, this.objectsCollisionMask)
              )
            );
          this.currentTruck.leftWheelTruck.graphic = c;
          this.currentTruck.leftWheelTruck.align();
          k.space.get_bodies().add(this.currentTruck.leftWheelTruck);
          this.currentTruck.leftWheelTruck.get_userData().gameData =
            "leftWheelTruck";
          this.currentTruck.leftWheelTruck.get_userData().truck = 1;
          var pl = new w(d, e);
          var Gi = new De(
            this.currentTruck.truckBody,
            this.currentTruck.leftWheelTruck,
            this.currentTruck.truckBody.worldPointToLocal(pl),
            new w(),
            new w(0, 1),
            0,
            4
          );
          Gi.set_ignore(!0);
          Gi.set_stiff(!1);
          Gi.set_frequency(5.3);
          Gi.set_damping(0.4);
          k.space.get_constraints().add(Gi);
          this.currentTruck.leftWheelTruck.set_allowMovement(!1);
          this.currentTruck.leftWheelTruck.set_allowRotation(!1);
          c = k.initSpriteUI("TruckWeel");
          d = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][9][11], w).get_x()
          );
          e = k.roundBy(
            100,
            r.__cast(this.dataFromJsonForParsing[p - E][9][11], w).get_y()
          );
          this.gameScreen.addChild(c);
          var Ab = oa.get_DYNAMIC();
          this.currentTruck.rightWheelTruck = new Ra(Ab, new w(d, e));
          this.currentTruck.rightWheelTruck
            .get_shapes()
            .add(
              new Ub(
                0.5 * c.get_width(),
                new w(0, 0),
                new Aa(0.4, 5.5, 5.5, 7.5),
                new Oa(this.objectsCollisionGroup, this.objectsCollisionMask)
              )
            );
          this.currentTruck.rightWheelTruck.graphic = c;
          this.currentTruck.rightWheelTruck.align();
          k.space.get_bodies().add(this.currentTruck.rightWheelTruck);
          this.currentTruck.rightWheelTruck.get_userData().gameData =
            "rightWheelTruck";
          pl = new w(d, e);
          var Ya = new De(
            this.currentTruck.truckBody,
            this.currentTruck.rightWheelTruck,
            this.currentTruck.truckBody.worldPointToLocal(pl),
            new w(),
            new w(0, 1),
            0,
            4
          );
          Ya.set_ignore(!0);
          Ya.set_stiff(!1);
          Ya.set_frequency(5.3);
          Ya.set_damping(0.4);
          k.space.get_constraints().add(Ya);
          this.currentTruck.rightWheelTruck.set_allowMovement(!1);
          this.currentTruck.rightWheelTruck.set_allowRotation(!1);
          this.currentTruck.rightWheelTruck.get_userData().truck = 1;
          this.trucks.push(this.currentTruck);
        }
      }
      new w(
        this.magnet.get_position().get_x(),
        this.magnet.get_position().get_y()
      );
      this.mouseJoint = new ac(
        k.space.get_world(),
        this.magnet,
        k.space
          .get_world()
          .worldPointToLocal(
            new w(
              this.magnetJointPoint.get_worldCOM().get_x(),
              this.magnetJointPoint.get_worldCOM().get_y()
            )
          ),
        this.magnet.worldPointToLocal(
          new w(
            this.magnet.get_position().get_x() - 20,
            this.magnet.get_position().get_y()
          )
        )
      );
      this.mouseJoint.set_maxForce(472);
      this.mouseJoint.set_stiff(!1);
      this.mouseJoint.set_frequency(1.6);
      this.mouseJoint.set_damping(0.4);
      k.space.get_constraints().add(this.mouseJoint);
      this.mouseJoint2 = new ac(
        k.space.get_world(),
        this.magnet,
        k.space
          .get_world()
          .worldPointToLocal(
            new w(
              this.magnetJointPoint.get_worldCOM().get_x(),
              this.magnetJointPoint.get_worldCOM().get_y()
            )
          ),
        this.magnet.worldPointToLocal(
          new w(
            this.magnet.get_position().get_x() + 20,
            this.magnet.get_position().get_y()
          )
        )
      );
      this.mouseJoint2.set_maxForce(472);
      this.mouseJoint2.set_stiff(!1);
      this.mouseJoint2.set_frequency(1.6);
      this.mouseJoint2.set_damping(0.4);
      k.space.get_constraints().add(this.mouseJoint2);
      for (var fb = 0, Kl = this.elevators.length; fb < Kl; )
        for (var cd = fb++, yb = 0, Cb = this.elevatorsEnd.length; yb < Cb; ) {
          var mb = yb++;
          r.__cast(this.elevators[cd].graphic, y).EndPoint ==
            u.string(this.elevatorsEnd[mb].get_name()) &&
            (this.elevators[cd].get_position().get_y() <
            this.elevatorsEnd[mb].get_y()
              ? ((r.__cast(this.elevators[cd].graphic, y).Start =
                  this.elevators[cd].get_position().get_y()),
                (r.__cast(this.elevators[cd].graphic, y).End =
                  this.elevatorsEnd[mb].get_y()),
                (r.__cast(this.elevators[cd].graphic, y).Direction = "down"))
              : ((r.__cast(this.elevators[cd].graphic, y).Start =
                  this.elevatorsEnd[mb].get_y()),
                (r.__cast(this.elevators[cd].graphic, y).End = this.elevators[
                  cd
                ]
                  .get_position()
                  .get_y()),
                (r.__cast(this.elevators[cd].graphic, y).Direction = "up")),
            0 == r.__cast(this.elevators[cd].graphic, y).Enabled &&
              0 == r.__cast(this.elevators[cd].graphic, y).AutoChange &&
              "" != r.__cast(this.elevators[cd].graphic, y).ChangeDirection &&
              ("down" == r.__cast(this.elevators[cd].graphic, y).Direction
                ? (r.__cast(this.elevators[cd].graphic, y).Direction = "up")
                : (r.__cast(this.elevators[cd].graphic, y).Direction =
                    "down")));
        }
      for (var vb = 0, Db = this.trucks.length; vb < Db; ) {
        var nb = vb++;
        this.trucks[nb].cargo = new wa();
        this.gameScreen.addChild(this.trucks[nb].cargo);
        this.trucks[nb].cargo.set_x(
          this.trucks[nb].truckBody.get_position().get_x() - 96.5
        );
        this.trucks[nb].cargo.set_y(
          this.trucks[nb].truckBody.get_position().get_y() - 27
        );
        for (var wb = 0, Hb = this.cargoBox.length; wb < Hb; ) {
          var ib = wb++;
          r
            .__cast(this.trucks[nb].truckBody.graphic, y)
            .hitTestObject(this.cargoBox[ib]) &&
            (this.trucks[nb].cargo.addChild(this.cargoBox[ib]),
            this.cargoBox[ib].set_x(
              this.cargoBox[ib].get_x() - this.trucks[nb].cargo.get_x()
            ),
            this.cargoBox[ib].set_y(
              this.cargoBox[ib].get_y() - this.trucks[nb].cargo.get_y()
            ),
            this.trucks[nb].boxSum++);
        }
      }
      for (var tb = 0, Lb = this.shadows.length; tb < Lb; ) tb++;
      for (var xb = 0, Cd = this.buttons.length; xb < Cd; ) {
        var Kb = xb++;
        this.gameScreen.addChild(this.buttons[Kb]);
      }
      for (var Ib = 0, Mb = this.elevators.length; Ib < Mb; ) {
        var Nb = Ib++;
        this.gameScreen.addChild(this.elevators[Nb].graphic);
      }
      for (var Gb = 0, Ob = this.coolers.length; Gb < Ob; ) {
        var Qb = Gb++;
        this.gameScreen.addChild(this.coolers[Qb]);
      }
      this.leftKey =
        this.rightKey =
        this.downKey =
        this.upKey =
        this.gameOver =
          !1;
      this.pastTime = 0;
    },
    elev1: function (a) {
      r.__cast(this.elevators[0].graphic, y).Enabled = !0;
      0 == C.checkOneSound("SoundLiftOn") && C.play("SoundLiftOn");
      this.elevators[0].get_userData().moving = !0;
      ca.trace(
        "\u0421\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u043d\u0438\u0435. \u041f\u043e\u043f\u044b\u0442\u043a\u0430 " +
          r.__cast(this.elevators[0].graphic, y).Try,
        {
          fileName: "PlayState.hx",
          lineNumber: 2155,
          className: "PlayState",
          methodName: "elev1",
        }
      );
      this.elevatorTimer1.stop();
      3 == r.__cast(this.elevators[0].graphic, y).Try &&
        ((r.__cast(this.elevators[0].graphic, y).Try = 0),
        this.elevatorTimer1.set_delay(
          r.__cast(this.elevators[0].graphic, y).StopTime
        ));
      1 == r.__cast(this.elevators[0].graphic, y).Try &&
        (r.__cast(this.elevators[0].graphic, y).Try += 1);
    },
    elev2: function (a) {
      r.__cast(this.elevators[1].graphic, y).Enabled = !0;
      0 == C.checkOneSound("SoundLiftOn") && C.play("SoundLiftOn");
      this.elevators[1].get_userData().moving = !0;
      this.elevatorTimer2.stop();
      3 == r.__cast(this.elevators[1].graphic, y).Try &&
        ((r.__cast(this.elevators[1].graphic, y).Try = 0),
        this.elevatorTimer2.set_delay(
          r.__cast(this.elevators[1].graphic, y).StopTime
        ));
      1 == r.__cast(this.elevators[1].graphic, y).Try &&
        (r.__cast(this.elevators[1].graphic, y).Try += 1);
    },
    elev3: function (a) {
      r.__cast(this.elevators[2].graphic, y).Enabled = !0;
      0 == C.checkOneSound("SoundLiftOn") && C.play("SoundLiftOn");
      this.elevators[2].get_userData().moving = !0;
      this.elevatorTimer3.stop();
      3 == r.__cast(this.elevators[2].graphic, y).Try &&
        ((r.__cast(this.elevators[2].graphic, y).Try = 0),
        this.elevatorTimer3.set_delay(
          r.__cast(this.elevators[2].graphic, y).StopTime
        ));
      1 == r.__cast(this.elevators[2].graphic, y).Try &&
        (r.__cast(this.elevators[2].graphic, y).Try += 1);
    },
    startTheGame: function (a) {
      this.removeEventListener("enterFrame", m(this, this.updateWorld));
      this.addEventListener("enterFrame", m(this, this.updateWorld));
      this.boxListener = new ee(
        va.get_BEGIN(),
        Ba.get_COLLISION(),
        this.boxType,
        this.wallType,
        m(this, this.beginCollisionBoxHandler)
      );
      k.space.get_listeners().add(this.boxListener);
      this.boxListenerEnd = new ee(
        va.get_END(),
        Ba.get_COLLISION(),
        this.boxType,
        this.wallType,
        m(this, this.endCollisionBoxHandler)
      );
      k.space.get_listeners().add(this.boxListenerEnd);
      this.elevatorLoaderListener = new ee(
        va.get_BEGIN(),
        Ba.get_COLLISION(),
        this.elevatorType,
        this.loaderType,
        m(this, this.beginCollisionElevator)
      );
      k.space.get_listeners().add(this.elevatorLoaderListener);
      this.elevatorBoxesListener = new ee(
        va.get_BEGIN(),
        Ba.get_COLLISION(),
        this.elevatorType,
        this.boxType,
        m(this, this.beginCollisionElevator)
      );
      k.space.get_listeners().add(this.elevatorBoxesListener);
      this.loaderSensorListener = new ee(
        va.get_BEGIN(),
        Ba.get_COLLISION(),
        this.loaderSensorType,
        this.wallType,
        m(this, this.beginCollisionLoaderWallHandler)
      );
      k.space.get_listeners().add(this.loaderSensorListener);
      this.loaderSensorListener2 = new ee(
        va.get_BEGIN(),
        Ba.get_COLLISION(),
        this.loaderSensorType,
        this.elevatorType,
        m(this, this.beginCollisionLoaderWallHandler)
      );
      k.space.get_listeners().add(this.loaderSensorListener2);
      this.boxSensorListener = new ee(
        va.get_BEGIN(),
        Ba.get_COLLISION(),
        this.loaderSensorType,
        this.boxType,
        m(this, this.beginCollisionLoaderWallHandler)
      );
      k.space.get_listeners().add(this.boxSensorListener);
      this.consListener = new eh(
        va.get_BREAK(),
        this.constraintType,
        m(this, this.ConstraintBreakHandler)
      );
      k.space.get_listeners().add(this.consListener);
      this.boomTimer.addEventListener("timer", m(this, this.bah));
      this.stopwatchTimer.addEventListener("timer", m(this, this.countSeconds));
      this.endTimer.addEventListener("timer", m(this, this.endLevel));
      this.doorTimer.addEventListener("timer", m(this, this.doorStiff));
      this.waitTimer.addEventListener("timer", m(this, this.waitForEnd));
      k.theGame.addEventListener("mouseDown", m(this, this.mouseDown));
      k.theGame.addEventListener("mouseUp", m(this, this.mouseUp));
      0 == k.isMobileCheck
        ? N.get_current().stage.addEventListener(
            "mouseMove",
            m(this, this.mouseMove)
          )
        : N.get_current().stage.addEventListener(
            "touchMove",
            m(this, this.touchMove)
          );
      0 == k.isMobileCheck &&
        (N.get_current().stage.addEventListener(
          "keyDown",
          m(this, this.keyPressed)
        ),
        N.get_current().stage.addEventListener(
          "keyUp",
          m(this, this.keyReleased)
        ));
      this.addEventListener("enterFrame", m(this, this.updateWorld));
      this.stopwatchTimer.start();
      this.gameOver && this.endTimer.start();
      a = 0;
      for (var b = this.trucks.length; a < b; ) {
        var c = a++;
        this.trucks[c].cargoLoad = !1;
      }
    },
    touchMove: function (a) {
      this.mx = this.get_mouseX();
      this.my = this.get_mouseY();
      (1 == k.isMobileCheck && 420 < this.my) ||
        (-20 > this.get_mouseX() ||
        720 < this.get_mouseX() ||
        -20 > this.get_mouseY() ||
        520 < this.get_mouseY()
          ? ((this.magnetActivate = !1),
            C.stopOneSound("SoundLoaderMagnet"),
            C.stopOneSound("SoundLoaderMove"))
          : (this.oldMousePosition.set(
              w.weak(
                this.mount.get_position().get_x() - this.mx,
                this.mount.get_position().get_y() - this.my
              )
            ),
            null == a.target &&
              (r
                .__cast(this.truckLoaderBody.graphic, y)
                .w1.set_rotation(this.tk1.graphic.get_rotation()),
              r
                .__cast(this.truckLoaderBody.graphic, y)
                .w2.set_rotation(-this.tk1.graphic.get_rotation()))));
    },
    ConstraintBreakHandler: function (a) {
      this.loaderDestroy();
    },
    loaderDestroy: function () {
      this.boomX = this.truckLoaderBody.get_position().get_x();
      this.boomY = this.truckLoaderBody.get_position().get_y();
      this.rightKey = this.leftKey = this.upKey = !1;
      k.theGame.removeEventListener("mouseDown", m(this, this.mouseDown));
      k.theGame.removeEventListener("mouseUp", m(this, this.mouseUp));
      0 == k.isMobileCheck
        ? N.get_current().stage.removeEventListener(
            "mouseMove",
            m(this, this.mouseMove)
          )
        : N.get_current().stage.removeEventListener(
            "touchMove",
            m(this, this.touchMove)
          );
      k.space.get_constraints().remove(this.mouseJoint);
      this.mouseJoint = null;
      k.space.get_constraints().remove(this.mouseJoint2);
      this.mouseJoint2 = null;
      k.space.get_constraints().remove(this.groundLoaderJoint);
      k.space.get_constraints().remove(this.lineJointLoaderLeftWheel);
      k.space.get_constraints().remove(this.lineJointLoaderRightWheel);
      k.space.get_constraints().remove(this.mountCons);
      k.space.get_constraints().remove(this.pvLoaderSensor);
      this.gameScreen.removeChild(this.mount.graphic);
      k.space.get_bodies().remove(this.mount);
      this.loaderBoom = !0;
      this.tk2.set_gravMass(0.2);
      this.magnet.set_gravMass(0.2);
      this.boomTimer.start();
      this.Boom(this.boomX, this.boomY, !1, this.loaderBoom);
      this.gameOver = !0;
      this.endTimer.start();
      this.magnetActivate = !1;
      r.__cast(this.truckLoaderBody.graphic, y)
        .get_transform()
        .set_colorTransform(Ee.setTint(0, 0.1));
      r.__cast(this.tk1.graphic, y)
        .get_transform()
        .set_colorTransform(Ee.setTint(0, 0.1));
      r.__cast(this.tk2.graphic, y)
        .get_transform()
        .set_colorTransform(Ee.setTint(0, 0.1));
      r.__cast(this.magnet.graphic, y)
        .get_transform()
        .set_colorTransform(Ee.setTint(0, 0.1));
      r.__cast(this.loaderLeftWheel.graphic, y)
        .get_transform()
        .set_colorTransform(Ee.setTint(0, 0.1));
      r.__cast(this.loaderRightWheel.graphic, y)
        .get_transform()
        .set_colorTransform(Ee.setTint(0, 0.1));
      r.__cast(this.mount.graphic, y)
        .get_transform()
        .set_colorTransform(Ee.setTint(0, 0.1));
    },
    beginCollisionElevator: function (a) {
      this.elevatorForCheck = a.get_arbiters().at(0).get_body2();
      a = a.get_arbiters().at(0).get_body1();
      "down" == r.__cast(this.elevatorForCheck.graphic, y).Direction &&
        this.elevatorForCheck.get_position().get_y() <
          a.get_position().get_y() &&
        this.elevatorForCheck.get_position().get_y() <
          r.__cast(this.elevatorForCheck.graphic, y).End - 5 &&
        this.elevatorsBlockCheck();
      "up" == r.__cast(this.elevatorForCheck.graphic, y).Direction &&
        3e3 < this.pressure(a) &&
        "magnet" != a.get_userData().gameData &&
        this.elevatorsBlockCheck();
    },
    pressure: function (a) {
      var b = 0;
      a.get_arbiters().foreach(function (c) {
        c = c.totalImpulse(a).xy();
        b += c.get_length();
      });
      a.get_constraints().foreach(function (c) {
        c = c.bodyImpulse(a).xy();
        b += c.get_length();
      });
      return b;
    },
    elevatorsBlockCheck: function () {
      r.__cast(this.elevatorForCheck.graphic, y).Enabled &&
        (0 == C.pause &&
          (0 == C.checkOneSound("SoundBoxHit") && C.play("SoundBoxHit"),
          0 == C.checkOneSound("SoundSparks") && C.play("SoundSparks"),
          "elevator0" == this.elevatorForCheck.get_userData().gameData &&
            (this.elevators[0].get_userData().moving = !1),
          "elevator1" == this.elevatorForCheck.get_userData().gameData &&
            (this.elevators[1].get_userData().moving = !1),
          "elevator2" == this.elevatorForCheck.get_userData().gameData &&
            (this.elevators[2].get_userData().moving = !1)),
        "elevator0" == this.elevatorForCheck.get_userData().gameData &&
          ("up" == r.__cast(this.elevatorForCheck.graphic, y).Direction
            ? this.elevatorsCons[0]
                .get_anchor1()
                .set_y(this.elevatorForCheck.get_position().get_y() + 7)
            : this.elevatorsCons[0]
                .get_anchor1()
                .set_y(this.elevatorForCheck.get_position().get_y() - 7),
          (r.__cast(this.elevatorForCheck.graphic, y).Enabled = !1),
          r
            .__cast(this.elevatorForCheck.graphic, y)
            .spark1.showBehavior("enable"),
          r
            .__cast(this.elevatorForCheck.graphic, y)
            .spark2.showBehavior("enable"),
          0 == r.__cast(this.elevatorForCheck.graphic, y).Try &&
            (this.elevatorTimer1.set_delay(1999),
            (r.__cast(this.elevatorForCheck.graphic, y).Try += 1)),
          2 == r.__cast(this.elevatorForCheck.graphic, y).Try &&
            ("down" == r.__cast(this.elevatorForCheck.graphic, y).Direction
              ? (r.__cast(this.elevatorForCheck.graphic, y).Direction = "up")
              : (r.__cast(this.elevatorForCheck.graphic, y).Direction = "down"),
            this.elevatorTimer1.set_delay(333),
            (r.__cast(this.elevatorForCheck.graphic, y).Try += 1)),
          this.elevatorTimer1.start()),
        "elevator1" == this.elevatorForCheck.get_userData().gameData &&
          ("up" == r.__cast(this.elevatorForCheck.graphic, y).Direction
            ? this.elevatorsCons[1]
                .get_anchor1()
                .set_y(this.elevatorForCheck.get_position().get_y() + 7)
            : this.elevatorsCons[1]
                .get_anchor1()
                .set_y(this.elevatorForCheck.get_position().get_y() - 7),
          (r.__cast(this.elevatorForCheck.graphic, y).Enabled = !1),
          r
            .__cast(this.elevatorForCheck.graphic, y)
            .spark1.showBehavior("enable"),
          r
            .__cast(this.elevatorForCheck.graphic, y)
            .spark2.showBehavior("enable"),
          0 == r.__cast(this.elevatorForCheck.graphic, y).Try &&
            (this.elevatorTimer2.set_delay(1999),
            (r.__cast(this.elevatorForCheck.graphic, y).Try += 1)),
          2 == r.__cast(this.elevators[1].graphic, y).Try &&
            ("down" == r.__cast(this.elevators[1].graphic, y).Direction
              ? (r.__cast(this.elevators[1].graphic, y).Direction = "up")
              : (r.__cast(this.elevators[1].graphic, y).Direction = "down"),
            this.elevatorTimer2.set_delay(333),
            (r.__cast(this.elevatorForCheck.graphic, y).Try += 1)),
          this.elevatorTimer2.start()),
        "elevator2" == this.elevatorForCheck.get_userData().gameData &&
          ("up" == r.__cast(this.elevatorForCheck.graphic, y).Direction
            ? this.elevatorsCons[2]
                .get_anchor1()
                .set_y(this.elevatorForCheck.get_position().get_y() + 7)
            : this.elevatorsCons[2]
                .get_anchor1()
                .set_y(this.elevatorForCheck.get_position().get_y() - 7),
          (r.__cast(this.elevatorForCheck.graphic, y).Enabled = !1),
          r
            .__cast(this.elevatorForCheck.graphic, y)
            .spark1.showBehavior("enable"),
          r
            .__cast(this.elevatorForCheck.graphic, y)
            .spark2.showBehavior("enable"),
          0 == r.__cast(this.elevatorForCheck.graphic, y).Try &&
            (this.elevatorTimer3.set_delay(1999),
            (r.__cast(this.elevatorForCheck.graphic, y).Try += 1)),
          2 == r.__cast(this.elevators[2].graphic, y).Try &&
            ("down" == r.__cast(this.elevators[2].graphic, y).Direction
              ? (r.__cast(this.elevators[2].graphic, y).Direction = "up")
              : (r.__cast(this.elevators[2].graphic, y).Direction = "down"),
            this.elevatorTimer3.set_delay(333),
            (r.__cast(this.elevatorForCheck.graphic, y).Try += 1)),
          this.elevatorTimer3.start()));
    },
    waitForEnd: function (a) {
      this.waitTimer.stop();
      this.stopTheGame();
      a = this.scores.getScore(this.pastTime, this.currentLevelNumber);
      this.goToNext(a);
    },
    stopTheGame: function () {
      k.space.get_listeners().remove(this.boxListener);
      k.space.get_listeners().remove(this.boxListenerEnd);
      k.space.get_listeners().remove(this.elevatorLoaderListener);
      k.space.get_listeners().remove(this.elevatorBoxesListener);
      k.space.get_listeners().remove(this.loaderSensorListener);
      k.space.get_listeners().remove(this.loaderSensorListener2);
      k.space.get_listeners().remove(this.boxSensorListener);
      k.space.get_listeners().remove(this.consListener);
      for (var a = 0, b = this.trucks.length; a < b; ) {
        var c = a++;
        this.trucks[c].truckGo.stop();
      }
      this.boomTimer.stop();
      this.endTimer.stop();
      this.doorTimer.stop();
      this.boomTimer.removeEventListener("timer", m(this, this.bah));
      this.stopwatchTimer.removeEventListener(
        "timer",
        m(this, this.countSeconds)
      );
      this.endTimer.removeEventListener("timer", m(this, this.endLevel));
      this.doorTimer.removeEventListener("timer", m(this, this.doorStiff));
      this.waitTimer.removeEventListener("timer", m(this, this.waitForEnd));
      0 < this.elevators.length &&
        (1 <= this.elevators.length && this.elevatorTimer1.stop(),
        2 <= this.elevators.length && this.elevatorTimer2.stop(),
        3 <= this.elevators.length && this.elevatorTimer3.stop());
      k.theGame.removeEventListener("mouseDown", m(this, this.mouseDown));
      k.theGame.removeEventListener("mouseUp", m(this, this.mouseUp));
      0 == k.isMobileCheck
        ? N.get_current().stage.removeEventListener(
            "mouseMove",
            m(this, this.mouseMove)
          )
        : N.get_current().stage.removeEventListener(
            "touchMove",
            m(this, this.touchMove)
          );
      N.get_current().stage.removeEventListener(
        "keyDown",
        m(this, this.keyPressed)
      );
      N.get_current().stage.removeEventListener(
        "keyUp",
        m(this, this.keyReleased)
      );
      this.removeEventListener("enterFrame", m(this, this.updateWorld));
      this.stopwatchTimer.stop();
      this.downKey = this.upKey = this.rightKey = this.leftKey = !1;
      a = 0;
      for (b = this.fracArray.length; a < b; )
        (c = a++),
          this.fracArray[c].fadeTimer.stop(),
          null != this.fracArray[c].fractionBody &&
            (this.gameScreen.contains(this.fracArray[c].fractionBody.graphic) &&
              this.gameScreen.removeChild(
                this.fracArray[c].fractionBody.graphic
              ),
            k.space.get_bodies().remove(this.fracArray[c].fractionBody));
      a = [];
      b = 0;
      for (c = this.gameScreen.get_numChildren(); b < c; ) {
        var d = b++;
        (800 < Math.abs(this.gameScreen.getChildAt(d).get_x()) ||
          800 < Math.abs(this.gameScreen.getChildAt(d).get_y())) &&
          a.push(this.gameScreen.getChildAt(d));
      }
      for (b = 0; b < a.length; )
        (c = a[b]), ++b, this.gameScreen.removeChild(c);
      this.truckLoaderBody = null;
    },
    doorStiff: function (a) {
      this.doorTimer.stop();
      a = 0;
      for (var b = this.doors.length; a < b; ) {
        var c = a++;
        this.doorsCons[c].set_stiff(!0);
      }
    },
    endLevel: function (a) {
      this.endTimer.stop();
      this.goToRestartSimple(null);
    },
    countSeconds: function (a) {
      this.pastTime++;
      a = u["int"](this.pastTime / 1e3);
      var b = u["int"]((this.pastTime - 1e3 * a) / 100),
        c = u["int"]((this.pastTime - 1e3 * a - 100 * b) / 10);
      this.scoreArray[0].showBehavior(null == a ? "null" : "" + a);
      this.scoreArray[1].showBehavior(null == b ? "null" : "" + b);
      this.scoreArray[2].showBehavior(null == c ? "null" : "" + c);
      this.scoreArray[3].showBehavior(
        u.string(this.pastTime - 1e3 * a - 100 * b - 10 * c)
      );
      a = this.scores.getStars(this.pastTime, this.currentLevelNumber);
      k.starCounter = a;
      this.stars.showBehavior(null == a ? "null" : "" + a);
    },
    mouseUp: function (a) {
      0 == k.isMobileCheck && (this.magnetActivate = !1);
      this.craneMagnetActivate = !1;
      null != this.craneBody &&
        (this.magnet.graphic.light.set_visible(!1),
        this.magnet.graphic.light.showBehavior("disable"));
      ca.trace("mouseUp", {
        fileName: "PlayState.hx",
        lineNumber: 2897,
        className: "PlayState",
        methodName: "mouseUp",
      });
      C.stopOneSound("SoundLoaderMagnet");
    },
    mouseDown: function (a) {
      "loader" == this.currentControl
        ? 0 == k.isMobileCheck &&
          ((this.magnetActivate = !0),
          0 == C.checkOneSound("SoundLoaderMagnet") &&
            C.play("SoundLoaderMagnet", !0))
        : ((this.craneMagnetActivate = !0),
          this.craneMagnetBody.graphic.light.set_visible(!0),
          "disable" ==
            this.craneMagnetBody.graphic.light.currentBehavior.name &&
            this.craneMagnetBody.graphic.light.showBehavior("enable"));
      ca.trace("mouseDown", {
        fileName: "PlayState.hx",
        lineNumber: 2927,
        className: "PlayState",
        methodName: "mouseDown",
      });
    },
    mouseMove: function (a) {
      this.mx = this.get_mouseX();
      this.my = this.get_mouseY();
      if (!(1 == k.isMobileCheck && 420 < this.my))
        if (
          -20 > this.get_mouseX() ||
          720 < this.get_mouseX() ||
          -20 > this.get_mouseY() ||
          520 < this.get_mouseY()
        )
          (this.magnetActivate = !1),
            C.stopOneSound("SoundLoaderMagnet"),
            C.stopOneSound("SoundLoaderMove");
        else if (null != this.mouseJoint && "loader" == this.currentControl) {
          var b = this.mx - this.mount.get_position().get_x(),
            c = this.my - this.mount.get_position().get_y(),
            d = Math.atan2(b, c);
          b = Math.sqrt(b * b + c * c);
          c = this.clawDistance * Math.sin(d);
          d = this.clawDistance * Math.cos(d);
          b > this.clawDistance
            ? (this.mouseJoint
                .get_anchor1()
                .set_x(this.mount.get_position().get_x() + c),
              this.mouseJoint
                .get_anchor1()
                .set_y(this.mount.get_position().get_y() + d),
              this.mouseJoint2
                .get_anchor1()
                .set_x(this.mount.get_position().get_x() + c),
              this.mouseJoint2
                .get_anchor1()
                .set_y(this.mount.get_position().get_y() + d),
              this.tk2.set_gravMass(0),
              this.magnet.set_gravMass(0))
            : (this.mouseJoint.get_anchor1().set_x(this.mx),
              this.mouseJoint.get_anchor1().set_y(this.my),
              this.mouseJoint2.get_anchor1().set_x(this.mx),
              this.mouseJoint2.get_anchor1().set_y(this.my),
              this.tk2.set_gravMass(-0.5),
              this.magnet.set_gravMass(-0.5));
          b =
            this.magnet.get_position().get_x() -
            this.mount.get_position().get_x();
          c =
            this.magnet.get_position().get_y() -
            this.mount.get_position().get_y();
          b = Math.sqrt(b * b + c * c);
          30 > b && (this.tk2.set_gravMass(0), this.magnet.set_gravMass(0));
          null == a.target &&
            (r
              .__cast(this.truckLoaderBody.graphic, y)
              .w1.set_rotation(this.tk1.graphic.get_rotation()),
            r
              .__cast(this.truckLoaderBody.graphic, y)
              .w2.set_rotation(-this.tk1.graphic.get_rotation()));
        }
    },
    newJointPosition: function () {
      this.mx =
        this.mount.get_position().get_x() - this.oldMousePosition.get_x();
      this.my =
        this.mount.get_position().get_y() - this.oldMousePosition.get_y();
      if (null != this.mouseJoint && "loader" == this.currentControl) {
        var a = this.mx - this.mount.get_position().get_x(),
          b = this.my - this.mount.get_position().get_y(),
          c = Math.atan2(a, b);
        a = Math.sqrt(a * a + b * b);
        b = this.clawDistance * Math.sin(c);
        c = this.clawDistance * Math.cos(c);
        a > this.clawDistance
          ? (this.mouseJoint
              .get_anchor1()
              .set_x(this.mount.get_position().get_x() + b),
            this.mouseJoint
              .get_anchor1()
              .set_y(this.mount.get_position().get_y() + c),
            this.mouseJoint2
              .get_anchor1()
              .set_x(this.mount.get_position().get_x() + b),
            this.mouseJoint2
              .get_anchor1()
              .set_y(this.mount.get_position().get_y() + c),
            this.tk2.set_gravMass(0),
            this.magnet.set_gravMass(0))
          : (this.mouseJoint.get_anchor1().set_x(this.mx),
            this.mouseJoint.get_anchor1().set_y(this.my),
            this.mouseJoint2.get_anchor1().set_x(this.mx),
            this.mouseJoint2.get_anchor1().set_y(this.my),
            this.tk2.set_gravMass(-0.5),
            this.magnet.set_gravMass(-0.5));
        a =
          this.magnet.get_position().get_x() -
          this.mount.get_position().get_x();
        b =
          this.magnet.get_position().get_y() -
          this.mount.get_position().get_y();
        a = Math.sqrt(a * a + b * b);
        30 > a && (this.tk2.set_gravMass(0), this.magnet.set_gravMass(0));
      }
    },
    beginCollisionLoaderWallHandler: function (a) {
      this.loaderJump = !0;
      this.loaderWithBox = !1;
      null != this.magnetJoint2 &&
        a.get_int2().get_userData().gameData ==
          this.magnetJoint2.get_body2().get_userData().gameData &&
        (this.loaderWithBox = !0);
    },
    keyReleased: function (a) {
      if (37 == a.keyCode || 65 == a.keyCode)
        (this.leftKey = !1),
          1 == C.checkOneSound("SoundLoaderMove") &&
            C.stopOneSound("SoundLoaderMove");
      if (39 == a.keyCode || 68 == a.keyCode)
        (this.rightKey = !1),
          1 == C.checkOneSound("SoundLoaderMove") &&
            C.stopOneSound("SoundLoaderMove");
      if (38 == a.keyCode || 87 == a.keyCode || 32 == a.keyCode)
        this.upKey = !1;
      if (40 == a.keyCode || 83 == a.keyCode) this.downKey = !1;
    },
    keyPressed: function (a) {
      82 == a.keyCode &&
        (this.gameOver
          ? (this.endTimer.stop(), this.goToRestartSimple(null))
          : this.loaderDestroy());
      if (!this.gameOver) {
        if (69 == a.keyCode || 17 == a.keyCode)
          ca.trace("E or control", {
            fileName: "PlayState.hx",
            lineNumber: 3149,
            className: "PlayState",
            methodName: "keyPressed",
          }),
            (this.magnetActivate = this.magnetActivate ? !1 : !0);
        if (37 == a.keyCode || 65 == a.keyCode)
          (this.leftKey = !0),
            0 == C.checkOneSound("SoundLoaderMove") &&
              C.play("SoundLoaderMove", !0);
        if (39 == a.keyCode || 68 == a.keyCode)
          (this.rightKey = !0),
            0 == C.checkOneSound("SoundLoaderMove") &&
              C.play("SoundLoaderMove", !0);
        if (38 == a.keyCode || 87 == a.keyCode || 32 == a.keyCode)
          this.upKey = !0;
        if (40 == a.keyCode || 83 == a.keyCode) this.downKey = !0;
      }
      a.preventDefault();
    },
    addMask: function () {
      1 == k.maskesAddedM
        ? (k.theGame.getChildByName("mask1"),
          k.theGame.getChildByName("mask2"),
          k.theGame.getChildByName("mask3"),
          k.theGame.getChildByName("mask4"))
        : ((this.mask1 = new Ab(ha.getBitmapData("img/ui/blank.png"))),
          (this.mask2 = new Ab(ha.getBitmapData("img/ui/blank.png"))),
          (this.mask3 = new Ab(ha.getBitmapData("img/ui/blank.png"))),
          (this.mask4 = new Ab(ha.getBitmapData("img/ui/blank.png"))),
          this.mask1.set_name("mask1"),
          this.mask2.set_name("mask2"),
          this.mask3.set_name("mask3"),
          this.mask4.set_name("mask4"),
          k.theGame.addChild(this.mask1),
          k.theGame.addChild(this.mask2),
          k.theGame.addChild(this.mask3),
          k.theGame.addChild(this.mask4));
      N.get_current().stage.stageHeight > N.get_current().stage.stageWidth
        ? (this.mask1.set_width(700),
          this.mask1.set_height(k.offSetY / k.W),
          this.mask1.set_y(-k.offSetY / k.W),
          this.mask1.set_x(0),
          this.mask2.set_width(700),
          this.mask2.set_height(k.offSetY / k.W),
          this.mask2.set_y(500),
          this.mask2.set_x(0),
          this.mask3.set_width(400),
          this.mask3.set_height(500),
          this.mask3.set_y(0),
          this.mask3.set_x(-400),
          this.mask4.set_width(800),
          this.mask4.set_height(500),
          this.mask4.set_y(0),
          this.mask4.set_x(700))
        : (this.mask1.set_width(k.offSetX / k.W),
          this.mask1.set_height(500),
          this.mask1.set_y(0),
          this.mask1.set_x(-k.offSetX / k.W),
          this.mask2.set_width(k.offSetX / k.W + 100),
          this.mask2.set_height(500),
          this.mask2.set_x(700),
          this.mask2.set_y(0),
          this.mask3.set_width(700),
          this.mask3.set_height(400),
          this.mask3.set_y(-400),
          this.mask3.set_x(0),
          this.mask4.set_width(700),
          this.mask4.set_height(500),
          this.mask4.set_y(500),
          this.mask4.set_x(0));
      k.maskesAddedM = !0;
    },
    loadButtonPanel: function () {
      this.sound = k.initAnimation("musicMini", "ui");
      this.sound.set_buttonMode(!0);
      this.sound.addEventListener("mouseDown", m(this, this.goToSound));
      this.sound.addEventListener("mouseOver", m(this, this.overMouseSound));
      this.sound.addEventListener("mouseOut", m(this, this.outMouseSound));
      0 == C.pause
        ? this.sound.showBehavior("noSelectEnable")
        : this.sound.showBehavior("noSelectDisable");
      this.sound.set_x(40);
      this.sound.set_y(20);
      this.sound.set_scaleX(1);
      this.sound.set_scaleY(1);
      this.sound.set_visible(!0);
      k.theGame.addChild(this.sound);
      this.menu = k.initAnimation("menuMaxi", "ui");
      k.theGame.addChild(this.menu);
      this.menu.showBehavior("out");
      this.menu.set_buttonMode(!0);
      this.menu.addEventListener("mouseOver", m(this, this.overMouse));
      this.menu.addEventListener("mouseOut", m(this, this.outMouse));
      this.menu.addEventListener("mouseDown", m(this, this.goToMenu));
      this.menu.set_x(120);
      this.menu.set_y(20);
      this.menu.set_scaleX(1);
      this.menu.set_scaleY(1);
      this.levels = k.initAnimation("soundMini", "ui");
      k.theGame.addChild(this.levels);
      this.levels.showBehavior("out");
      this.levels.set_buttonMode(!0);
      this.levels.addEventListener("mouseOver", m(this, this.overMouseSoundM));
      this.levels.addEventListener("mouseOut", m(this, this.outMouseSoundM));
      this.levels.addEventListener("mouseDown", m(this, this.goToLevels));
      0 == C.loopPaused
        ? this.levels.showBehavior("noSelectEnable")
        : this.levels.showBehavior("noSelectDisable");
      this.levels.set_x(80);
      this.levels.set_y(20);
      this.levels.set_scaleX(1);
      this.levels.set_scaleY(1);
      this.restart = k.initAnimation("restartMaxi", "ui");
      k.theGame.addChild(this.restart);
      this.restart.showBehavior("out");
      this.restart.set_buttonMode(!0);
      this.restart.addEventListener("mouseOver", m(this, this.overMouse));
      this.restart.addEventListener("mouseOut", m(this, this.outMouse));
      this.restart.addEventListener("mouseDown", m(this, this.goToRestart));
      this.restart.set_x(160);
      this.restart.set_y(20);
      this.restart.set_scaleX(1);
      this.restart.set_scaleY(1);
      1 == k.isMobileCheck &&
        ((this.leftBtn = k.initAnimation("BtnLeft", "ui")),
        k.theGame.addChild(this.leftBtn),
        this.leftBtn.showBehavior("out"),
        this.leftBtn.set_buttonMode(!0),
        this.leftBtn.addEventListener("touchBegin", m(this, this.goToLeft)),
        this.leftBtn.addEventListener("touchEnd", m(this, this.upLeft)),
        this.leftBtn.addEventListener("touchOut", m(this, this.upLeft)),
        this.leftBtn.addEventListener("touchOver", m(this, this.goToLeft)),
        this.leftBtn.set_x(40),
        this.leftBtn.set_y(460),
        this.leftBtn.set_scaleX(1.6),
        this.leftBtn.set_scaleY(1.6),
        this.leftBtn.set_alpha(0.5),
        (this.rightBtn = k.initAnimation("BtnRight", "ui")),
        k.theGame.addChild(this.rightBtn),
        this.rightBtn.showBehavior("out"),
        this.rightBtn.set_buttonMode(!0),
        this.rightBtn.addEventListener("touchBegin", m(this, this.goToRight)),
        this.rightBtn.addEventListener("touchEnd", m(this, this.upRight)),
        this.rightBtn.addEventListener("touchOut", m(this, this.upRight)),
        this.rightBtn.addEventListener("touchOver", m(this, this.goToRight)),
        this.rightBtn.set_x(120),
        this.rightBtn.set_y(460),
        this.rightBtn.set_scaleX(1.6),
        this.rightBtn.set_scaleY(1.6),
        this.rightBtn.set_alpha(0.5),
        (this.upBtn = k.initAnimation("BtnUp", "ui")),
        k.theGame.addChild(this.upBtn),
        this.upBtn.showBehavior("out"),
        this.upBtn.set_buttonMode(!0),
        this.upBtn.addEventListener("touchBegin", m(this, this.goToUp)),
        this.upBtn.addEventListener("touchEnd", m(this, this.upUp)),
        this.upBtn.set_x(560),
        this.upBtn.set_y(460),
        this.upBtn.set_scaleX(1.6),
        this.upBtn.set_scaleY(1.6),
        this.upBtn.set_alpha(0.5),
        (this.actBtn = k.initAnimation("BtnGoo", "ui")),
        k.theGame.addChild(this.actBtn),
        this.actBtn.showBehavior("out"),
        this.actBtn.set_buttonMode(!0),
        this.actBtn.addEventListener("mouseOver", m(this, this.overMouse)),
        this.actBtn.addEventListener("mouseOut", m(this, this.outMouse)),
        this.actBtn.addEventListener("touchBegin", m(this, this.goToAct)),
        this.actBtn.addEventListener("touchEnd", m(this, this.actUp)),
        this.actBtn.set_x(660),
        this.actBtn.set_y(460),
        this.actBtn.set_scaleX(1.6),
        this.actBtn.set_scaleY(1.6),
        this.actBtn.set_alpha(0.5));
      this.timeA = k.initSpriteUI("time");
      this.timeA.set_x(580);
      this.timeA.set_y(18);
      this.timeA.set_scaleX(0.4);
      this.timeA.set_scaleY(0.4);
      this.timeA.mouseEnabled = !1;
      k.theGame.addChild(this.timeA);
      for (var a = 0; 4 > a; ) {
        var b = a++;
        this.scoreArray[b] = k.initAnimation("digit", "ui");
        this.scoreArray[b].set_x(630 + 18 * b);
        this.scoreArray[b].set_y(18);
        this.scoreArray[b].set_scaleX(0.4);
        this.scoreArray[b].set_scaleY(0.4);
        this.scoreArray[b].mouseEnabled = !1;
        this.scoreArray[b].showBehavior("0");
        k.theGame.addChild(this.scoreArray[b]);
      }
      this.stars = k.initAnimation("star", "ui");
      this.stars.showBehavior("3");
      this.stars.set_x(660);
      this.stars.set_y(50);
      this.stars.set_scaleX(0.7);
      this.stars.set_scaleY(0.7);
      this.stars.mouseEnabled = !1;
      k.theGame.addChild(this.stars);
      this.Score.set_text("something very long");
      this.Score.set_textColor(16777215);
      this.Score.set_width(700);
      this.Score.set_x(40);
      this.Score.set_y(40);
      this.Score2.set_text("something very long");
      this.Score2.set_width(700);
      this.Score2.set_textColor(16777215);
      this.Score2.set_x(100);
      this.Score2.set_y(40);
      this.Score2.mouseEnabled = !1;
      this.Score.mouseEnabled = !1;
    },
    upLeft: function (a) {
      this.rightKey = this.leftKey = !1;
      1 == C.checkOneSound("SoundLoaderMove") &&
        C.stopOneSound("SoundLoaderMove");
    },
    upRight: function (a) {
      this.leftKey = this.rightKey = !1;
      1 == C.checkOneSound("SoundLoaderMove") &&
        C.stopOneSound("SoundLoaderMove");
    },
    actUp: function (a) {},
    upUp: function (a) {
      this.upKey = !1;
      1 == C.checkOneSound("SoundLoaderJump") &&
        C.stopOneSound("SoundLoaderJump");
    },
    goToRight: function (a) {
      this.rightKey = !0;
      this.leftKey = !1;
      0 == C.checkOneSound("SoundLoaderMove") && C.play("SoundLoaderMove", !0);
    },
    goToLeft: function (a) {
      this.leftKey = !0;
      this.rightKey = !1;
      0 == C.checkOneSound("SoundLoaderMove") && C.play("SoundLoaderMove", !0);
    },
    goToUp: function (a) {
      this.upKey = !0;
    },
    goToAct: function (a) {
      this.magnetActivate = this.magnetActivate ? !1 : !0;
    },
    resizeStage: function (a) {
      k.setXY(
        u["int"](N.get_current().stage.stageWidth),
        u["int"](N.get_current().stage.stageHeight)
      );
      k.resizeGame();
      k.resizeStage(k.theGame);
      k.offsetPage();
    },
    loadUI: function () {
      this.mainBackGround = new Ab(ha.getBitmapData("img/ui/menu.png"));
      k.theGame.addChild(this.mainBackGround);
      this.back = k.initSpriteBack(u.string(this.cLevel));
      var a = new w(
        k.offsetBack[this.cLevel - 1][0],
        k.offsetBack[this.cLevel - 1][1]
      );
      this.back.set_x(-2 + a.get_x());
      this.back.set_y(-2 + a.get_y());
      this.back.smoothing = !0;
      this.back.set_visible(!0);
    },
    goToRestartSimple: function (a) {
      C.play("SoundGameButonsClick");
      this.stopTheGame();
      this.refreshWorld();
      this.clearState();
      k.offsetPage();
      N.trace("windows displayed");
      C.play("SoundGameButonsClick");
      a = new Bd(this._parent, this.cLevel);
      k.resizeGame();
      k.resizeStage(k.theGame);
      k.offsetPage();
      N.trace("windows displayed");
      k.theGame.addChild(a);
      k.blackScreenTween(a);
    },
    goToRestart: function (a) {
      C.play("SoundGameButonsClick");
      k.showInterstital("restartPlay");
      a = this.mainBackGround3 = k.initSpriteUI("menu");
      a.set_x(a.get_x() + this.mainBackGround3.get_width() / 2);
      a = this.mainBackGround3;
      a.set_y(a.get_y() + this.mainBackGround3.get_height() / 2);
      this.mainBackGround3.set_cacheAsBitmap(!0);
      k.theGame.addChild(this.mainBackGround3);
    },
    goToRestartAfter: function () {
      C.play("SoundGameButonsClick");
      null != this.mainBackGround3 &&
        k.theGame.removeChild(this.mainBackGround3);
      this.stopTheGame();
      this.refreshWorld();
      this.clearState();
      k.offsetPage();
      N.trace("windows displayed");
      C.play("SoundGameButonsClick");
      var a = new Bd(this._parent, this.cLevel);
      k.resizeGame();
      k.resizeStage(k.theGame);
      k.offsetPage();
      N.trace("windows displayed");
      k.theGame.addChild(a);
      k.blackScreenTween(a);
    },
    goToLevels: function (a) {
      C.play("SoundGameButonsClick");
      0 == C.loopPaused
        ? (this.levels.showBehavior("selectDisable"), C.stopLoop())
        : (C.resumeLoop(), this.levels.showBehavior("selectEnable"));
    },
    goToNext: function (a) {
      C.stopOneSound("SoundLoaderMagnet");
      C.stopOneSound("SoundFeedGo");
      C.stopOneSound("SoundLoaderMove");
      1 == C.checkOneSound("SoundTruckEngineOn") &&
        C.stopOneSound("SoundTruckEngineOn");
      k.run = !1;
      this.stopTheGame();
      this.refreshWorld();
      this.clearState();
      ca.trace("next", {
        fileName: "PlayState.hx",
        lineNumber: 4017,
        className: "PlayState",
        methodName: "goToNext",
      });
      31 > this.cLevel && (k.levelStateArray[this.cLevel] = 1);
      var b = new ch(this._parent, this.cLevel, a);
      k.completedState = b;
      k.blackScreenTween(k.theGame);
      k.resizeGame();
      k.resizeStage(k.theGame);
      k.offsetPage();
      N.trace("windows displayed");
      k.scoresArray[this.cLevel - 1] = a;
      k.starArray[this.cLevel - 1] = k.starCounter;
      k.updateSaves();
      C.play("SoundGameButonsClick");
    },
    goToMenu: function (a) {
      this.stopTheGame();
      Gamezy24SDK.gameplayStop();
      this.refreshWorld();
      this.clearState();
      a = new Lf(this._parent);
      k.curSprite = a;
      k.blackScreenTween(a);
      k.offsetPage();
      N.trace("windows displayed");
      k.resizeGame();
      k.resizeStage(k.curSprite);
      C.play("SoundGameButonsClick");
    },
    elevatorsCheck: function (a) {
      for (var b = 0, c = this.elevators.length; b < c; ) {
        var d = b++;
        r.__cast(this.elevators[d].graphic, y).spark1.update(a);
        r.__cast(this.elevators[d].graphic, y).spark2.update(a);
        if (r.__cast(this.elevators[d].graphic, y).Enabled) {
          if (
            "up" == u.string(r.__cast(this.elevators[d].graphic, y).Direction)
          )
            if (
              this.elevators[d].get_position().get_y() <
              r.__cast(this.elevators[d].graphic, y).Start +
                10.1 * r.__cast(this.elevators[d].graphic, y).Speed
            )
              ca.trace("direction changed", {
                fileName: "PlayState.hx",
                lineNumber: 4108,
                className: "PlayState",
                methodName: "elevatorsCheck",
              }),
                (this.elevators[d].get_userData().moving = !1),
                (r.__cast(this.elevators[d].graphic, y).Enabled = !1),
                r.__cast(this.elevators[d].graphic, y).AutoChange &&
                  ((r.__cast(this.elevators[d].graphic, y).Direction = "down"),
                  (r.__cast(this.elevators[d].graphic, y).Enabled = !1),
                  0 == d &&
                    (this.elevatorTimer1.set_delay(
                      r.__cast(this.elevators[d].graphic, y).StopTime
                    ),
                    (r.__cast(this.elevators[d].graphic, y).Try = 0),
                    this.elevatorTimer1.start()),
                  1 == d &&
                    (this.elevatorTimer2.set_delay(
                      r.__cast(this.elevators[d].graphic, y).StopTime
                    ),
                    (r.__cast(this.elevators[d].graphic, y).Try = 0),
                    this.elevatorTimer2.start()),
                  2 == d &&
                    (this.elevatorTimer3.set_delay(
                      r.__cast(this.elevators[d].graphic, y).StopTime
                    ),
                    (r.__cast(this.elevators[d].graphic, y).Try = 0),
                    this.elevatorTimer3.start()));
            else {
              var e = this.elevatorsCons[d].get_anchor1();
              e.set_y(e.get_y() - r.__cast(this.elevators[d].graphic, y).Speed);
              e = r.__cast(this.elevators[d].graphic, y).w1;
              e.set_rotation(
                e.get_rotation() +
                  3 * r.__cast(this.elevators[d].graphic, y).Speed
              );
              e = r.__cast(this.elevators[d].graphic, y).w2;
              e.set_rotation(
                e.get_rotation() -
                  3 * r.__cast(this.elevators[d].graphic, y).Speed
              );
            }
          "down" ==
            u.string(r.__cast(this.elevators[d].graphic, y).Direction) &&
            (this.elevators[d].get_position().get_y() >
            r.__cast(this.elevators[d].graphic, y).End -
              10.1 * r.__cast(this.elevators[d].graphic, y).Speed
              ? ((this.elevators[d].get_userData().moving = !1),
                (r.__cast(this.elevators[d].graphic, y).Enabled = !1),
                r.__cast(this.elevators[d].graphic, y).AutoChange &&
                  ((r.__cast(this.elevators[d].graphic, y).Direction = "up"),
                  (r.__cast(this.elevators[d].graphic, y).Enabled = !1),
                  0 == d &&
                    (this.elevatorTimer1.set_delay(
                      r.__cast(this.elevators[d].graphic, y).StopTime
                    ),
                    (r.__cast(this.elevators[d].graphic, y).Try = 0),
                    this.elevatorTimer1.start()),
                  1 == d &&
                    (this.elevatorTimer2.set_delay(
                      r.__cast(this.elevators[d].graphic, y).StopTime
                    ),
                    (r.__cast(this.elevators[d].graphic, y).Try = 0),
                    this.elevatorTimer2.start()),
                  2 == d &&
                    (this.elevatorTimer3.set_delay(
                      r.__cast(this.elevators[d].graphic, y).StopTime
                    ),
                    (r.__cast(this.elevators[d].graphic, y).Try = 0),
                    this.elevatorTimer3.start())))
              : ((e = this.elevatorsCons[d].get_anchor1()),
                e.set_y(
                  e.get_y() + r.__cast(this.elevators[d].graphic, y).Speed
                ),
                (e = r.__cast(this.elevators[d].graphic, y).w1),
                e.set_rotation(
                  e.get_rotation() -
                    3 * r.__cast(this.elevators[d].graphic, y).Speed
                ),
                (e = r.__cast(this.elevators[d].graphic, y).w2),
                e.set_rotation(
                  e.get_rotation() +
                    3 * r.__cast(this.elevators[d].graphic, y).Speed
                )));
        }
      }
    },
    clearState: function () {
      C.stopLevelSounds(k.currentLevel);
      k.clear();
      Xa.reset();
      for (k.previousLevel = this; 0 < k.theGame.get_numChildren(); ) {
        var a = k.theGame.getChildAt(0);
        k.theGame.removeChild(a);
      }
      k.maskesAddedM = !1;
    },
    overMouse: function (a) {
      r.__cast(a.currentTarget, y).showBehavior("over");
    },
    outMouse: function (a) {
      r.__cast(a.currentTarget, y).showBehavior("out");
    },
    refreshWorld: function () {
      k.space.get_constraints().clear();
      for (
        k.space.get_bodies().clear();
        0 < this.gameScreen.get_numChildren();

      ) {
        var a = k.theGame.getChildAt(0);
        k.theGame.removeChild(a);
      }
      this.boxArray = [];
      this.fracArray = [];
      this.buttons = [];
      this.coolers = [];
      this.transformators = [];
      this.doors = [];
      this.doorsCons = [];
      this.elevators = [];
      this.elevatorsEnd = [];
      this.elevatorsCons = [];
      this.cargoBox = [];
      this.transporters = [];
      this.lamps = [];
      this.shadows = [];
      this.trucks = [];
      this.gameMovieClips = [];
      this.craneMagnetActivate = this.magnetActivate = !1;
    },
    endCollisionBoxHandler: function (a) {
      if (
        a.get_int1().get_userData().boxId == this.craneBoxId ||
        a.get_int2().get_userData().boxId == this.craneBoxId
      )
        this.craneMagnetTouch = !1;
    },
    beginCollisionBoxHandler: function (a) {
      C.play("SoundBoxHit");
      if (0 < a.get_arbiters().get_length()) {
        if (
          "DangerBox" ==
          a.get_arbiters().at(0).get_body1().get_userData().gameData
        ) {
          var b = a.get_arbiters().at(0).get_body1();
          var c = new w(
            b.normalImpulse(a.get_arbiters().at(0).get_body2()).get_x(),
            b.normalImpulse(a.get_arbiters().at(0).get_body2()).get_y()
          );
        } else
          (b = a.get_arbiters().at(0).get_body2()),
            (c = new w(
              b.normalImpulse(a.get_arbiters().at(0).get_body1()).get_x(),
              b.normalImpulse(a.get_arbiters().at(0).get_body1()).get_y()
            ));
        (a.get_arbiters().at(0).get_body1().get_userData().boxId !=
          this.craneBoxId &&
          a.get_arbiters().at(0).get_body2().get_userData().boxId !=
            this.craneBoxId) ||
          null == this.craneMagnetJoint ||
          (this.craneMagnetTouch = !0);
        a =
          (Math.sqrt(c.get_x() * c.get_x() + c.get_y() * c.get_y()) / 800) *
          382.5;
        if (65 < u["int"](a) && "DangerBox" == b.get_userData().gameData) {
          this.magnetActivate = !1;
          null != this.magnetJoint &&
            (k.space.get_constraints().remove(this.magnetJoint),
            (this.magnetJoint = null));
          null != this.magnetJoint2 &&
            (k.space.get_constraints().remove(this.magnetJoint2),
            (this.magnetJoint2 = null));
          null != this.magnetJoint3 &&
            (k.space.get_constraints().remove(this.magnetJoint3),
            (this.magnetJoint3 = null));
          this.boomX = b.get_position().get_x();
          this.boomY = b.get_position().get_y();
          c = r.__cast(b.graphic, y).BoxId;
          a = r.__cast(b.graphic, y).get_rotation();
          this.boxVelocity = b.get_velocity();
          this.gameScreen.removeChild(b.graphic);
          k.space.get_bodies().remove(b);
          b = 0;
          for (var d = this.boxArray.length; b < d; ) {
            var e = b++;
            if (c == r.__cast(this.boxArray[e].graphic, y).BoxId) {
              this.boxArray[e] = this.boxArray[0];
              this.boxArray.shift();
              break;
            }
          }
          this.loaderBoom = !1;
          b = 0;
          for (c = this.transformators.length; b < c; ) {
            d = b++;
            e = this.transformators[d].transGraphic.get_x() - this.boomX;
            var f = this.transformators[d].transGraphic.get_y() - this.boomY;
            70 > Math.sqrt(e * e + f * f) &&
              0 == this.transformators[d].transBroken &&
              (this.transformators[d].transGraphic.showBehavior("disable"),
              this.transformators[d].transGraphic.update(1),
              (this.transformators[d].transBroken = !0),
              this.transformators[d].sparksTimer.start(),
              this.doorsCheck(this.transformators[d].transSwitch),
              this.rollsSwitch(this.transformators[d].transSwitch),
              this.lampsSwitch(this.transformators[d].transSwitch));
          }
          this.boomTimer.start();
          this.Boom(this.boomX, this.boomY, !1, !1, a);
        }
      }
    },
    bah: function (a) {
      this.boomTimer.stop();
      a = k.initAnimation("TFXBoom", "ui");
      a.showBehavior("enable");
      this.boomSprite.push(a);
      this.Boom(this.boomX, this.boomY + 10, !0, this.loaderBoom);
      this.gameScreen.addChild(a);
      a.set_x(this.boomX);
      a.set_y(this.boomY);
      a.set_visible(!0);
      C.play("SoundBlast");
      C.play("SoundBlast");
    },
    Boom: function (a, b, c, d, e) {
      null == d && (d = !1);
      if (c) {
        c = 0;
        for (e = this.fracArray.length; c < e; ) {
          var f = c++;
          f = this.fracArray[f].fractionBody;
          if (
            null != f &&
            (f.get_position().get_x() != a || f.get_position().get_y() != b)
          ) {
            var g = f.get_position().get_x() - a,
              h = f.get_position().get_y() - b;
            Math.sqrt(g * g + h * h) < this.bombZone / 2 + 20 &&
              ((g = this.bombForceDefault / g),
              (h = this.bombForceDefault / h),
              f.applyImpulse(new w(g, h), new w(0, 0)));
          }
        }
        d &&
          (this.truckLoaderBody.applyImpulse(new w(0, -50), new w(0, 0)),
          this.tk1.applyImpulse(new w(-50, -50), new w(0, 0)),
          this.loaderLeftWheel.applyImpulse(new w(-600, -450), new w(-10, 0)),
          this.loaderRightWheel.applyImpulse(new w(600, -450), new w(10, 0)));
      }
    },
    updateWorld: function (a) {
      if (
        -20 > this.get_mouseX() ||
        720 < this.get_mouseX() ||
        -20 > this.get_mouseY() ||
        520 < this.get_mouseY()
      )
        (this.magnetActivate = !1),
          C.stopOneSound("SoundLoaderMagnet"),
          C.stopOneSound("SoundLoaderMove"),
          (this.upKey = this.rightKey = this.leftKey = !1);
      a = N.getTimer();
      var b = a - this.lastTime;
      this.sound.update(b);
      this.menu.update(b);
      this.levels.update(b);
      this.restart.update(b);
      for (var c = 0; 4 > c; ) {
        var d = c++;
        this.scoreArray[d].update(b);
      }
      this.stars.update(b);
      this.Score.set_text(u.string(k.frameRate));
      for (c = k.space.get_bodies().iterator(); c.hasNext(); )
        (d = c.next()),
          d.isStatic() ||
            null == d.graphic ||
            (d.graphic.set_x(d.get_position().get_x()),
            d.graphic.set_y(d.get_position().get_y()),
            d.graphic.set_rotation(((180 * d.get_rotation()) / Math.PI) % 360));
      k.mousePoint = new w(
        u["int"](this.get_mouseX()),
        u["int"](this.get_mouseY())
      );
      if (1 == k.run) {
        k.space.step(1 / k.frameRate);
        c = 0;
        for (d = this.shadows; c < d.length; ) {
          var e = d[c];
          ++c;
          e.update(b);
        }
        c = 0;
        for (d = this.lamps; c < d.length; ) (e = d[c]), ++c, e.update(b);
        c = 0;
        for (d = this.boomSprite; c < d.length; ) (e = d[c]), ++c, e.update(b);
        null != this.magnet && this.magnet.graphic.light.update(b);
      }
      0 == b % 2 &&
        (0 < this.buttons.length && this.ButtonsCheck(b),
        (this.dxb =
          this.groundLoaderJoint.get_anchor1().get_x() -
          this.tk1.get_position().get_x()),
        (this.dyb =
          this.groundLoaderJoint.get_anchor1().get_y() -
          this.tk1.get_position().get_y()),
        (this.rastb = Math.sqrt(this.dxb * this.dxb + this.dyb * this.dyb)));
      0 < this.coolers.length && this.coolersCheck();
      0 < this.elevators.length && this.elevatorsCheck(b);
      0 < this.transporters.length && this.rollsCheck();
      this.elevatorsMove = !1;
      c = 0;
      for (d = this.elevators.length; c < d; )
        (e = c++),
          this.elevators[e].get_userData().moving && (this.elevatorsMove = !0);
      40 < this.rastb &&
        0 == this.gameOver &&
        (ca.trace("destroy", {
          fileName: "PlayState.hx",
          lineNumber: 4722,
          className: "PlayState",
          methodName: "updateWorld",
        }),
        this.loaderDestroy());
      c = 0;
      for (d = this.trucks.length; c < d; )
        if (
          ((e = c++),
          this.trucks[e].stopSignal.update(b),
          this.trucks[e].cargo.set_x(
            this.trucks[e].truckBody.get_position().get_x() +
              r.__cast(this.trucks[e].truckBody.graphic, y).cargo.get_x()
          ),
          this.trucks[e].cargo.set_y(
            this.trucks[e].truckBody.get_position().get_y() +
              r.__cast(this.trucks[e].truckBody.graphic, y).cargo.get_y()
          ),
          r
            .__cast(this.trucks[e].truckBody.graphic, y)
            .set_x(this.trucks[e].truckBody.get_position().get_x() + 13),
          r
            .__cast(this.trucks[e].truckBody.graphic, y)
            .set_y(this.trucks[e].truckBody.get_position().get_y() - 12),
          0 == b % 2 || 1 == this.trucks[e].cargoLoad)
        ) {
          r
            .__cast(this.truckLoaderBody.graphic, y)
            .hitTestObject(r.__cast(this.trucks[e].truckBody.graphic, y).cargo)
            ? (this.loaderInCargo = !0)
            : (this.loaderInCargo = !1);
          this.trucks[e].boxCount = 0;
          this.checkTruckCargo(e);
          this.trucks[e].boxCount == this.trucks[e].boxSum
            ? (0 == this.trucks[e].cargoLoad &&
                0 == C.checkOneSound("SoundTruckEngineOn") &&
                C.play("SoundTruckEngineOn"),
              (this.trucks[e].cargoLoad = !0),
              this.trucks[e].stopSignal.set_visible(!0),
              1 < this.trucks.length
                ? null != this.outLight &&
                  (this.trucks[0].cargoLoad || this.trucks[1].cargoLoad) &&
                  "enable" != this.outLight.currentBehavior.name &&
                  this.outLight.showBehavior("enable")
                : null != this.outLight &&
                  "enable" != this.outLight.currentBehavior.name &&
                  this.outLight.showBehavior("enable"))
            : (this.trucks[e].cargoLoad &&
                1 == C.checkOneSound("SoundTruckEngineOn") &&
                C.stopOneSound("SoundTruckEngineOn"),
              (this.trucks[e].cargoLoad = !1),
              this.trucks[e].stopSignal.set_visible(!1),
              1 < this.trucks.length
                ? null != this.outLight &&
                  0 == this.trucks[0].cargoLoad &&
                  0 == this.trucks[1].cargoLoad &&
                  this.outLight.showBehavior("disable")
                : null != this.outLight &&
                  this.outLight.showBehavior("disable"));
          this.outLight.update(b);
          if (
            this.trucks[e].cargoLoad &&
            !this.loaderInCargo &&
            !this.craneMagnetInCargo
          ) {
            0 == this.trucks[e].leftWheelTruck.get_allowMovement() &&
              0 == C.checkOneSound("SoundTruckSignal") &&
              C.play("SoundTruckSignal");
            this.trucks[e].leftWheelTruck.set_allowMovement(!0);
            this.trucks[e].rightWheelTruck.set_allowMovement(!0);
            this.trucks[e].leftWheelTruck.set_allowRotation(!0);
            this.trucks[e].rightWheelTruck.set_allowRotation(!0);
            this.trucks[e].stopSignal.set_visible(!1);
            null != this.outLight && this.outLight.showBehavior("disable");
            this.trucks[e].truckGo.start();
            e = 0;
            for (var f = this.boxArray.length; e < f; ) {
              var g = e++;
              this.boxArray[g].get_userData().isCargo &&
                this.boxArray[g].set_gravMass(14);
            }
          }
          this.checkTrucksPosition() &&
            !this.gameOver &&
            this.waitTimer.start();
        }
      this.groundLoaderJoint
        .get_anchor1()
        .set_x(this.mount.get_position().get_x());
      this.groundLoaderJoint
        .get_anchor1()
        .set_y(this.mount.get_position().get_y());
      this.rightKey
        ? (this.loaderLeftWheel.set_angularVel(this.loaderSpeed - 1),
          this.loaderRightWheel.set_angularVel(this.loaderSpeed - 1))
        : this.leftKey
        ? (this.loaderLeftWheel.set_angularVel(-this.loaderSpeed + 1),
          this.loaderRightWheel.set_angularVel(-this.loaderSpeed + 1))
        : this.stopLoaderWheelsRotation();
      1 == k.isMobileCheck && 0 == b % 2 && this.newJointPosition();
      this.upKey &&
        this.loaderJump &&
        0 == this.loaderWithBox &&
        ((this.loaderJump = !1),
        C.play("SoundLoaderJump"),
        this.leftKey
          ? 90 >
            Math.abs(r.__cast(this.truckLoaderBody.graphic, y).get_rotation())
            ? this.truckLoaderBody.applyImpulse(
                new w(0, -2300),
                this.truckLoaderBody.localPointToWorld(new w(-9, -1))
              )
            : this.loaderRightWheel.get_position().get_y() >
                this.loaderLeftWheel.get_position().get_y() &&
              120 >
                Math.abs(
                  r.__cast(this.truckLoaderBody.graphic, y).get_rotation()
                )
            ? this.truckLoaderBody.applyImpulse(
                new w(500, -2300),
                this.truckLoaderBody.localPointToWorld(new w(10, 0))
              )
            : this.truckLoaderBody.applyImpulse(
                new w(0, -2300),
                this.truckLoaderBody.localPointToWorld(new w(9, -1))
              )
          : this.rightKey
          ? 90 >
            Math.abs(r.__cast(this.truckLoaderBody.graphic, y).get_rotation())
            ? this.truckLoaderBody.applyImpulse(
                new w(0, -2300),
                this.truckLoaderBody.localPointToWorld(new w(9, -1))
              )
            : this.loaderRightWheel.get_position().get_y() <
                this.loaderLeftWheel.get_position().get_y() &&
              120 >
                Math.abs(
                  r.__cast(this.truckLoaderBody.graphic, y).get_rotation()
                )
            ? this.truckLoaderBody.applyImpulse(
                new w(500, -2300),
                this.truckLoaderBody.localPointToWorld(new w(-10, 0))
              )
            : this.truckLoaderBody.applyImpulse(
                new w(0, -2300),
                this.truckLoaderBody.localPointToWorld(new w(-9, -1))
              )
          : this.truckLoaderBody.applyImpulse(
              new w(0, -2300),
              this.truckLoaderBody.localPointToWorld(new w(-1.5, 0))
            ),
        (this.upKey = !1));
      if (
        this.magnetActivate &&
        null == this.magnetJoint &&
        null == this.magnetJoint2
      )
        for (
          this.magnet.graphic.light.set_visible(!0),
            "disable" == this.magnet.graphic.light.currentBehavior.name &&
              this.magnet.graphic.light.showBehavior("enable"),
            b = 0,
            c = this.boxArray.length;
          b < c;

        )
          if (
            ((d = b++),
            this.magnet.graphic.beam.hitTestObject(this.boxArray[d].graphic))
          ) {
            this.magnetJoint = new ac(
              this.magnet,
              this.boxArray[d],
              this.magnet.worldPointToLocal(
                new w(
                  this.magnet.get_position().get_x(),
                  this.magnet.get_position().get_y()
                )
              ),
              this.boxArray[d].worldPointToLocal(
                new w(
                  this.boxArray[d].get_position().get_x(),
                  this.boxArray[d].get_position().get_y()
                )
              )
            );
            this.magnetJoint.set_stiff(!1);
            this.magnetJoint.set_maxForce(901);
            7 == k.currentLevel &&
              0 == this.boxArray[d].get_allowRotation() &&
              this.boxArray[d].set_allowRotation(!0);
            this.magnetJoint.set_damping(0.3);
            k.space.get_constraints().add(this.magnetJoint);
            break;
          }
      null == this.magnetJoint ||
        this.magnet.graphic.beam.hitTestObject(
          this.magnetJoint.get_body2().graphic
        ) ||
        (k.space.get_constraints().remove(this.magnetJoint),
        (this.magnetJoint = null));
      null != this.magnetJoint &&
        this.magnet.graphic.magnetic1.hitTestObject(
          this.magnetJoint.get_body2().graphic
        ) &&
        this.magnet.graphic.magnetic2.hitTestObject(
          this.magnetJoint.get_body2().graphic
        ) &&
        (this.magnet.graphic.light.set_visible(!1),
        this.magnet.graphic.light.showBehavior("disable"),
        (this.magnetJoint2 = new ac(
          this.magnet,
          this.magnetJoint.get_body2(),
          this.magnet.worldPointToLocal(
            new w(
              this.magnetJointPoint.get_worldCOM().get_x(),
              this.magnetJointPoint.get_worldCOM().get_y()
            )
          ),
          this.magnetJoint
            .get_body2()
            .worldPointToLocal(
              new w(
                this.magnetJointPoint.get_worldCOM().get_x(),
                this.magnetJointPoint.get_worldCOM().get_y()
              )
            )
        )),
        this.magnetJoint2.set_maxForce(5e3),
        k.space.get_constraints().add(this.magnetJoint2),
        (this.magnetJoint3 = new ac(
          this.magnet,
          this.magnetJoint.get_body2(),
          this.magnet.worldPointToLocal(
            new w(
              this.magnetJointPoint2.get_worldCOM().get_x(),
              this.magnetJointPoint2.get_worldCOM().get_y()
            )
          ),
          this.magnetJoint
            .get_body2()
            .worldPointToLocal(
              new w(
                this.magnetJointPoint2.get_worldCOM().get_x(),
                this.magnetJointPoint2.get_worldCOM().get_y()
              )
            )
        )),
        this.magnetJoint3.set_maxForce(5e3),
        k.space.get_constraints().add(this.magnetJoint3),
        k.space.get_constraints().remove(this.magnetJoint),
        (this.magnetJoint = null),
        C.stopOneSound("SoundLoaderMagnet"));
      this.magnetActivate ||
        (this.magnet.graphic.light.set_visible(!1),
        this.magnet.graphic.light.showBehavior("disable"),
        null != this.magnetJoint &&
          (k.space.get_constraints().remove(this.magnetJoint),
          (this.magnetJoint = null)),
        null != this.magnetJoint2 &&
          (k.space.get_constraints().remove(this.magnetJoint2),
          (this.magnetJoint2 = null)),
        null != this.magnetJoint3 &&
          (k.space.get_constraints().remove(this.magnetJoint3),
          (this.magnetJoint3 = null)));
      700 < this.truckLoaderBody.get_position().get_y() &&
        this.goToRestartSimple(null);
      this.lastTime = a;
    },
    coolersCheck: function () {
      for (var a = 0, b = this.coolers.length; a < b; ) {
        var c = a++;
        c = this.coolers[c].blades;
        c.set_rotation(c.get_rotation() + 10);
      }
    },
    stopLoaderWheelsRotation: function () {
      this.loaderLeftWheel.set_angularVel(0);
      this.loaderRightWheel.set_angularVel(0);
    },
    checkTrucksPosition: function () {
      for (var a = !0, b = 0, c = this.trucks.length; b < c; ) {
        var d = b++;
        810 > this.trucks[d].leftWheelTruck.get_position().get_x() && (a = !1);
      }
      return a;
    },
    doorsCheck: function (a) {
      for (var b = k.addKoef, c = 0, d = this.doors.length; c < d; ) {
        var e = c++;
        if (r.__cast(this.doors[e].graphic, y).Switch == a)
          if (
            (this.doorTimer.stop(),
            this.doorsCons[e].set_stiff(!1),
            this.doorTimer.start(),
            C.play("SoundDoor"),
            1 == this.doors[e].graphic.Closed)
          ) {
            if ("down" == r.__cast(this.doors[e].graphic, y).OpenDirection) {
              var f = this.doorsCons[e].get_anchor1();
              f.set_y(
                f.get_y() +
                  (r.__cast(this.doors[e].graphic, y).get_height() - 2)
              );
            }
            "up" == this.doors[e].graphic.OpenDirection &&
              ((f = this.doorsCons[e].get_anchor1()),
              f.set_y(f.get_y() - (this.doors[e].graphic.get_height() - 2)));
            "left" == this.doors[e].graphic.OpenDirection &&
              ((f = this.doorsCons[e].get_anchor1()),
              f.set_x(f.get_x() - (this.doors[e].graphic.get_width() - 2)));
            "right" == this.doors[e].graphic.OpenDirection &&
              ((f = this.doorsCons[e].get_anchor1()),
              f.set_x(f.get_x() + (this.doors[e].graphic.get_width() + b - 2)));
            "upright" == this.doors[e].graphic.OpenDirection &&
              ((f = this.doorsCons[e].get_anchor1()),
              f.set_y(f.get_y() - (this.doors[e].graphic.get_height() - 2)),
              (f = this.doorsCons[e].get_anchor1()),
              f.set_x(f.get_x() + (this.doors[e].graphic.get_width() - 2)));
            "downleft" == this.doors[e].graphic.OpenDirection &&
              ((f = this.doorsCons[e].get_anchor1()),
              f.set_y(f.get_y() + (this.doors[e].graphic.get_height() - 2)),
              (f = this.doorsCons[e].get_anchor1()),
              f.set_x(f.get_x() - (this.doors[e].graphic.get_width() - 2)));
            "upleft" == this.doors[e].graphic.OpenDirection &&
              ((f = this.doorsCons[e].get_anchor1()),
              f.set_y(f.get_y() - (this.doors[e].graphic.get_height() - 2)),
              (f = this.doorsCons[e].get_anchor1()),
              f.set_x(f.get_x() - (this.doors[e].graphic.get_width() - 2)));
            "downright" == this.doors[e].graphic.OpenDirection &&
              ((f = this.doorsCons[e].get_anchor1()),
              f.set_y(f.get_y() + (this.doors[e].graphic.get_height() - 2)),
              (f = this.doorsCons[e].get_anchor1()),
              f.set_x(f.get_x() + (this.doors[e].graphic.get_width() - 2)));
            this.doors[e].graphic.Closed = !1;
          } else
            "down" == this.doors[e].graphic.OpenDirection &&
              ((f = this.doorsCons[e].get_anchor1()),
              f.set_y(f.get_y() - (this.doors[e].graphic.get_height() - 2))),
              "up" == this.doors[e].graphic.OpenDirection &&
                ((f = this.doorsCons[e].get_anchor1()),
                f.set_y(f.get_y() + (this.doors[e].graphic.get_height() - 2))),
              "left" == this.doors[e].graphic.OpenDirection &&
                ((f = this.doorsCons[e].get_anchor1()),
                f.set_x(f.get_x() + (this.doors[e].graphic.get_width() - 2))),
              "right" == this.doors[e].graphic.OpenDirection &&
                ((f = this.doorsCons[e].get_anchor1()),
                f.set_x(
                  f.get_x() - (this.doors[e].graphic.get_width() + b - 2)
                )),
              "upright" == this.doors[e].graphic.OpenDirection &&
                ((f = this.doorsCons[e].get_anchor1()),
                f.set_y(f.get_y() + (this.doors[e].graphic.get_height() - 2)),
                (f = this.doorsCons[e].get_anchor1()),
                f.set_x(f.get_x() - (this.doors[e].graphic.get_width() - 2))),
              "downleft" == this.doors[e].graphic.OpenDirection &&
                ((f = this.doorsCons[e].get_anchor1()),
                f.set_y(f.get_y() - (this.doors[e].graphic.get_height() - 2)),
                (f = this.doorsCons[e].get_anchor1()),
                f.set_x(f.get_x() + (this.doors[e].graphic.get_width() - 2))),
              "upleft" == this.doors[e].graphic.OpenDirection &&
                ((f = this.doorsCons[e].get_anchor1()),
                f.set_y(f.get_y() + (this.doors[e].graphic.get_height() - 2)),
                (f = this.doorsCons[e].get_anchor1()),
                f.set_x(f.get_x() + (this.doors[e].graphic.get_width() - 2))),
              "downright" == this.doors[e].graphic.OpenDirection &&
                ((f = this.doorsCons[e].get_anchor1()),
                f.set_y(f.get_y() - (this.doors[e].graphic.get_height() - 2)),
                (f = this.doorsCons[e].get_anchor1()),
                f.set_x(f.get_x() - (this.doors[e].graphic.get_width() - 2))),
              (this.doors[e].graphic.Closed = !0);
      }
    },
    checkTruckCargo: function (a) {
      for (var b = 0, c = this.trucks[a].cargo.get_numChildren(); b < c; )
        for (var d = b++, e = 0, f = this.boxArray.length; e < f; ) {
          var g = e++;
          this.cargoString = u
            .string(r.__cast(this.trucks[a].cargo.getChildAt(d), y).get_name())
            .substring(
              0,
              u.string(
                r.__cast(this.trucks[a].cargo.getChildAt(d), y).get_name()
              ).length - 1
            );
          if (
            "SquareBox" == this.cargoString ||
            "VerticalBox" == this.cargoString ||
            "BigBo" == this.cargoString
          ) {
            var h =
                this.trucks[a].cargo.get_x() +
                this.trucks[a].cargo.getChildAt(d).get_x(),
              n =
                this.trucks[a].cargo.get_y() +
                this.trucks[a].cargo.getChildAt(d).get_y();
            this.trucks[a].cargo
              .getChildAt(d)
              .get_transform()
              .get_colorTransform();
            if (
              3 >= Math.abs(this.boxArray[g].get_position().get_x() - h) &&
              3 >= Math.abs(this.boxArray[g].get_position().get_y() - n) &&
              this.boxArray[g].get_userData().gameData == this.cargoString
            ) {
              this.trucks[a].boxCount++;
              this.boxArray[g].setShapeMaterials(new Aa(0.2, 0.2, 0.38, 0.7));
              this.boxArray[g].get_userData().isCargo = !0;
              r.__cast(this.trucks[a].cargo.getChildAt(d), y).showBehavior("2");
              r.__cast(this.trucks[a].cargo.getChildAt(d), y).update(1);
              break;
            } else
              (this.boxArray[g].get_userData().isCargo = !1),
                r
                  .__cast(this.trucks[a].cargo.getChildAt(d), y)
                  .showBehavior("1"),
                r.__cast(this.trucks[a].cargo.getChildAt(d), y).update(1);
          }
        }
    },
    elevatorsSwitch: function (a) {
      for (var b = 0, c = this.elevators.length; b < c; ) {
        var d = b++;
        r.__cast(this.elevators[d].graphic, y).Activate == a &&
          (0 == d &&
            (this.elevatorTimer1.running
              ? this.elevatorTimer1.stop()
              : ((r.__cast(this.elevators[d].graphic, y).Enabled = !r.__cast(
                  this.elevators[d].graphic,
                  y
                ).Enabled),
                (this.elevators[d].get_userData().started = r.__cast(
                  this.elevators[d].graphic,
                  y
                ).Enabled),
                r.__cast(this.elevators[d].graphic, y).Enabled
                  ? (0 == C.checkOneSound("SoundLiftOn") &&
                      C.play("SoundLiftOn"),
                    (this.elevators[d].get_userData().moving = !0))
                  : (1 == C.checkOneSound("SoundLiftOff") &&
                      C.stopOneSound("SoundLiftOff"),
                    (this.elevators[d].get_userData().moving = !1)))),
          1 == d &&
            (this.elevatorTimer2.running
              ? this.elevatorTimer2.stop()
              : ((r.__cast(this.elevators[d].graphic, y).Enabled = !r.__cast(
                  this.elevators[d].graphic,
                  y
                ).Enabled),
                (this.elevators[d].get_userData().started = r.__cast(
                  this.elevators[d].graphic,
                  y
                ).Enabled),
                r.__cast(this.elevators[d].graphic, y).Enabled
                  ? (0 == C.checkOneSound("SoundLiftOn") &&
                      C.play("SoundLiftOn"),
                    (this.elevators[d].get_userData().moving = !0))
                  : (1 == C.checkOneSound("SoundLiftOff") &&
                      C.stopOneSound("SoundLiftOff"),
                    (this.elevators[d].get_userData().moving = !1)))),
          2 == d &&
            (this.elevatorTimer3.running
              ? this.elevatorTimer3.stop()
              : ((r.__cast(this.elevators[d].graphic, y).Enabled = !r.__cast(
                  this.elevators[d].graphic,
                  y
                ).Enabled),
                (this.elevators[d].get_userData().started = r.__cast(
                  this.elevators[d].graphic,
                  y
                ).Enabled),
                r.__cast(this.elevators[d].graphic, y).Enabled
                  ? (0 == C.checkOneSound("SoundLiftOn") &&
                      C.play("SoundLiftOn"),
                    (this.elevators[d].get_userData().moving = !0))
                  : (1 == C.checkOneSound("SoundLiftOff") &&
                      C.stopOneSound("SoundLiftOff"),
                    (this.elevators[d].get_userData().moving = !1)))));
        r.__cast(this.elevators[d].graphic, y).ChangeDirection == a &&
          (0 == d && this.elevatorTimer1.stop(),
          1 == d && this.elevatorTimer2.stop(),
          2 == d && this.elevatorTimer3.stop(),
          "down" == r.__cast(this.elevators[d].graphic, y).Direction
            ? (r.__cast(this.elevators[d].graphic, y).Direction = "up")
            : (r.__cast(this.elevators[d].graphic, y).Direction = "down"),
          (r.__cast(this.elevators[d].graphic, y).Enabled = !0));
      }
    },
    rollsSwitch: function (a) {
      for (var b = 0, c = this.transporters.length; b < c; ) {
        var d = b++;
        r.__cast(this.transporters[d].base.graphic, y).Activate == a &&
          (r.__cast(this.transporters[d].base.graphic, y).Enabled = !r.__cast(
            this.transporters[d].base.graphic,
            y
          ).Enabled);
        r.__cast(this.transporters[d].base.graphic, y).ChangeDirection == a &&
          ("left" == r.__cast(this.transporters[d].base.graphic, y).Direction
            ? (r.__cast(this.transporters[d].base.graphic, y).Direction =
                "right")
            : (r.__cast(this.transporters[d].base.graphic, y).Direction =
                "left"));
      }
    },
    ButtonsCheck: function (a) {
      for (var b = 0, c = this.buttons.length; b < c; ) {
        for (
          var d = b++,
            e = (r.__cast(this.buttons[d], tf).hitPoints = 0),
            f = this.boxArray.length;
          e < f;

        ) {
          var g = e++;
          r
            .__cast(this.boxArray[g].graphic, y)
            .hitTestObject(r.__cast(this.buttons[d].animB, y)) &&
            (r.__cast(this.buttons[d], tf).hitPoints++,
            0 == this.buttons[d].animB.currentFrameIndex &&
              "GreenButton" == this.buttons[d].colorB &&
              "off" == this.buttons[d].animB.currentBehavior.name &&
              (this.buttons[d].animB.showBehavior("on"),
              this.doorsCheck(this.buttons[d].sw),
              this.elevatorsSwitch(this.buttons[d].sw),
              this.rollsSwitch(this.buttons[d].sw),
              this.lampsSwitch(this.buttons[d].sw)),
            ((0 == this.buttons[d].animB.currentFrameIndex &&
              "on" == this.buttons[d].animB.currentBehavior.name) ||
              (9 == this.buttons[d].animB.currentFrameIndex &&
                "offon" == this.buttons[d].animB.currentBehavior.name)) &&
              "OrangeButton" == this.buttons[d].colorB &&
              (this.buttons[d].animB.showBehavior("active"),
              this.doorsCheck(this.buttons[d].sw),
              this.elevatorsSwitch(this.buttons[d].sw),
              this.rollsSwitch(this.buttons[d].sw),
              this.lampsSwitch(this.buttons[d].sw)),
            10 <= this.buttons[d].animB.currentFrameIndex &&
              "OrangeButton" == this.buttons[d].colorB &&
              this.buttons[d].animB.showBehavior("off"),
            ((0 == this.buttons[d].animB.currentFrameIndex &&
              "on" == this.buttons[d].animB.currentBehavior.name) ||
              (9 == this.buttons[d].animB.currentFrameIndex &&
                "offon" == this.buttons[d].animB.currentBehavior.name)) &&
              "BlueButton" == this.buttons[d].colorB &&
              (this.buttons[d].animB.showBehavior("active"),
              this.doorsCheck(this.buttons[d].sw),
              this.elevatorsSwitch(this.buttons[d].sw),
              this.rollsSwitch(this.buttons[d].sw),
              this.lampsSwitch(this.buttons[d].sw)),
            10 <= this.buttons[d].animB.currentFrameIndex &&
              "BlueButton" == this.buttons[d].colorB &&
              this.buttons[d].animB.showBehavior("off"));
        }
        if (
          r
            .__cast(this.loaderLeftWheel.graphic, y)
            .sensor.hitTestObject(this.buttons[d].animB) ||
          r
            .__cast(this.loaderRightWheel.graphic, y)
            .sensor.hitTestObject(this.buttons[d].animB) ||
          r
            .__cast(this.magnet.graphic.magnet, y)
            .hitTestObject(this.buttons[d].animB) ||
          this.truckLoaderBody.graphic.hitTestObject(this.buttons[d].animB) ||
          this.MiningLeftWheel.graphic.hitTestObject(this.buttons[d].animB) ||
          this.MiningRightWheel.graphic.hitTestObject(this.buttons[d].animB) ||
          this.MiningBody.graphic.hitTestObject(this.buttons[d].animB)
        )
          r.__cast(this.buttons[d], tf).hitPoints++,
            0 == this.buttons[d].animB.currentFrameIndex &&
              "GreenButton" == this.buttons[d].colorB &&
              "off" == this.buttons[d].animB.currentBehavior.name &&
              (this.buttons[d].animB.showBehavior("on"),
              this.doorsCheck(this.buttons[d].sw),
              this.elevatorsSwitch(this.buttons[d].sw),
              this.rollsSwitch(this.buttons[d].sw),
              this.lampsSwitch(this.buttons[d].sw)),
            ((0 == this.buttons[d].animB.currentFrameIndex &&
              "on" == this.buttons[d].animB.currentBehavior.name) ||
              (9 == this.buttons[d].animB.currentFrameIndex &&
                "offon" == this.buttons[d].animB.currentBehavior.name)) &&
              "OrangeButton" == this.buttons[d].colorB &&
              (this.buttons[d].animB.showBehavior("active"),
              this.doorsCheck(this.buttons[d].sw),
              this.elevatorsSwitch(this.buttons[d].sw),
              this.rollsSwitch(this.buttons[d].sw),
              this.lampsSwitch(this.buttons[d].sw)),
            10 <= this.buttons[d].animB.currentFrameIndex &&
              "OrangeButton" == this.buttons[d].colorB &&
              this.buttons[d].animB.showBehavior("off"),
            ((0 == this.buttons[d].animB.currentFrameIndex &&
              "on" == this.buttons[d].animB.currentBehavior.name) ||
              (9 == this.buttons[d].animB.currentFrameIndex &&
                "offon" == this.buttons[d].animB.currentBehavior.name)) &&
              "BlueButton" == this.buttons[d].colorB &&
              (this.buttons[d].animB.showBehavior("active"),
              this.doorsCheck(this.buttons[d].sw),
              this.elevatorsSwitch(this.buttons[d].sw),
              this.rollsSwitch(this.buttons[d].sw),
              this.lampsSwitch(this.buttons[d].sw)),
            10 <= this.buttons[d].animB.currentFrameIndex &&
              "BlueButton" == this.buttons[d].colorB &&
              this.buttons[d].animB.showBehavior("off");
        0 == r.__cast(this.buttons[d], tf).hitPoints &&
          ("off" == this.buttons[d].animB.currentBehavior.name &&
            "OrangeButton" == this.buttons[d].colorB &&
            (this.buttons[d].animB.showBehavior("offon"),
            this.doorsCheck(this.buttons[d].sw),
            this.elevatorsSwitch(this.buttons[d].sw),
            this.rollsSwitch(this.buttons[d].sw),
            this.lampsSwitch(this.buttons[d].sw)),
          "off" == this.buttons[d].animB.currentBehavior.name &&
            "BlueButton" == this.buttons[d].colorB &&
            this.buttons[d].animB.showBehavior("offon"),
          "active" == this.buttons[d].animB.currentBehavior.name &&
            19 <= this.buttons[d].animB.currentFrameIndex &&
            "OrangeButton" == this.buttons[d].colorB &&
            (this.buttons[d].animB.showBehavior("on"),
            this.doorsCheck(this.buttons[d].sw),
            this.elevatorsSwitch(this.buttons[d].sw),
            this.rollsSwitch(this.buttons[d].sw),
            this.lampsSwitch(this.buttons[d].sw)),
          "active" == this.buttons[d].animB.currentBehavior.name &&
            19 <= this.buttons[d].animB.currentFrameIndex &&
            "BlueButton" == this.buttons[d].colorB &&
            this.buttons[d].animB.showBehavior("on"));
        this.buttons[d].glowB.update(a);
        this.buttons[d].animB.update(a);
      }
    },
    rollsCheck: function () {
      for (var a = 0, b = this.transporters.length; a < b; ) {
        var c = a++;
        if (r.__cast(this.transporters[c].base.graphic, y).Enabled) {
          for (
            var d = 0, e = this.transporters[c].transporterRolls.length;
            d < e;

          ) {
            var f = d++;
            if (
              "right" ==
                r.__cast(this.transporters[c].base.graphic, y).Direction &&
              2 > this.transporters[c].transporterRolls[f].get_angularVel()
            ) {
              var g = this.transporters[c].transporterRolls[f];
              g.set_angularVel(
                g.get_angularVel() +
                  r.__cast(this.transporters[c].base.graphic, y).Speed
              );
            }
            "left" ==
              r.__cast(this.transporters[c].base.graphic, y).Direction &&
              -2 < this.transporters[c].transporterRolls[f].get_angularVel() &&
              ((f = this.transporters[c].transporterRolls[f]),
              f.set_angularVel(
                f.get_angularVel() -
                  r.__cast(this.transporters[c].base.graphic, y).Speed
              ));
          }
          0 == C.checkOneSound("SoundFeedGo") && C.play("SoundFeedGo");
        } else {
          d = 0;
          for (e = this.transporters[c].transporterRolls.length; d < e; )
            (f = d++),
              "right" ==
                r.__cast(this.transporters[c].base.graphic, y).Direction &&
                0 < this.transporters[c].transporterRolls[f].get_angularVel() &&
                ((g = this.transporters[c].transporterRolls[f]),
                g.set_angularVel(g.get_angularVel() - 0.005)),
              "left" ==
                r.__cast(this.transporters[c].base.graphic, y).Direction &&
                0 > this.transporters[c].transporterRolls[f].get_angularVel() &&
                ((f = this.transporters[c].transporterRolls[f]),
                f.set_angularVel(f.get_angularVel() + 0.005));
          1 == C.checkOneSound("SoundFeedGo") && C.stopOneSound("SoundFeedGo");
        }
      }
    },
    lampsSwitch: function (a) {
      for (var b = 0, c = this.lamps.length; b < c; ) {
        var d = b++;
        this.lamps[d].Activate == a &&
          ((this.lamps[d].Enabled = !this.lamps[d].Enabled),
          this.lamps[d].Enabled
            ? this.lamps[d].showBehavior("enable")
            : this.lamps[d].showBehavior("disable"));
      }
      b = 0;
      for (c = this.shadows.length; b < c; )
        (d = b++),
          this.shadows[d].Switch == a &&
            ("enable" == this.shadows[d].currentBehavior.name ||
            "off" == this.shadows[d].currentBehavior.name
              ? this.shadows[d].showBehavior("on")
              : ("disable" == this.shadows[d].currentBehavior.name ||
                  "on" == this.shadows[d].currentBehavior.name) &&
                this.shadows[d].showBehavior("off"));
    },
    overMouseSound: function (a) {
      1 == C.pause
        ? r.__cast(a.currentTarget, y).showBehavior("selectDisable")
        : r.__cast(a.currentTarget, y).showBehavior("selectEnable");
    },
    outMouseSound: function (a) {
      1 == C.pause
        ? r.__cast(a.currentTarget, y).showBehavior("noSelectDisable")
        : r.__cast(a.currentTarget, y).showBehavior("noSelectEnable");
    },
    overMouseSoundM: function (a) {
      1 == C.loopPaused
        ? r.__cast(a.currentTarget, y).showBehavior("selectDisable")
        : r.__cast(a.currentTarget, y).showBehavior("selectEnable");
    },
    outMouseSoundM: function (a) {
      1 == C.loopPaused
        ? r.__cast(a.currentTarget, y).showBehavior("noSelectDisable")
        : r.__cast(a.currentTarget, y).showBehavior("noSelectEnable");
    },
    goToSound: function (a) {
      0 == C.pause
        ? (this.sound.showBehavior("selectDisable"), C.stopSound())
        : (this.sound.showBehavior("selectEnable"), C.playSound());
      C.play("SoundGameButonsClick");
    },
    __class__: Bd,
  });
  var A = function () {};
  l.Reflect = A;
  A.__name__ = ["Reflect"];
  A.hasField = function (a, b) {
    return Object.prototype.hasOwnProperty.call(a, b);
  };
  A.field = function (a, b) {
    try {
      return a[b];
    } catch (c) {
      return (ta.lastException = c), null;
    }
  };
  A.setField = function (a, b, c) {
    a[b] = c;
  };
  A.getProperty = function (a, b) {
    var c;
    if (null == a) return null;
    var d = a.__properties__ ? (c = a.__properties__["get_" + b]) : !1;
    return d ? a[c]() : a[b];
  };
  A.setProperty = function (a, b, c) {
    var d;
    var e = a.__properties__ ? (d = a.__properties__["set_" + b]) : !1;
    if (e) a[d](c);
    else a[b] = c;
  };
  A.callMethod = function (a, b, c) {
    return b.apply(a, c);
  };
  A.fields = function (a) {
    var b = [];
    if (null != a) {
      var c = Object.prototype.hasOwnProperty,
        d;
      for (d in a)
        "__id__" != d && "hx__closures__" != d && c.call(a, d) && b.push(d);
    }
    return b;
  };
  A.isFunction = function (a) {
    return "function" == typeof a ? !(r.isClass(a) || r.isEnum(a)) : !1;
  };
  A.compare = function (a, b) {
    return a == b ? 0 : a > b ? 1 : -1;
  };
  A.compareMethods = function (a, b) {
    return a == b
      ? !0
      : A.isFunction(a) && A.isFunction(b)
      ? a.scope == b.scope && a.method == b.method
        ? null != a.method
        : !1
      : !1;
  };
  A.deleteField = function (a, b) {
    if (!A.hasField(a, b)) return !1;
    delete a[b];
    return !0;
  };
  var C = (F.SoundManager = function () {});
  l.SoundManager = C;
  C.__name__ = ["SoundManager"];
  C.init = function () {
    C.sounds = new sa();
    C.pause = !1;
    C.audioArray =
      "SoundBlast SoundBoxHit SoundDoor SoundFeedGo SoundGameButonsClick SoundGameButtonsRelease SoundGameMusic SoundLiftGo SoundLiftOff SoundLiftOn SoundLoaderJump SoundLoaderMagnet SoundLoaderMove SoundMenuMusic SoundPress SoundRollver SoundSparks SoundTruckEngineOff SoundTruckEngineOn SoundTruckEngineWorking SoundTruckSignal SoundWagonMove".split(
        " "
      );
    C.addSoundsOgg(C.audioArray);
  };
  C.addSoundsOgg = function (a) {
    for (var b = 0, c = a.length; b < c; ) {
      var d = b++;
      C.addSound(a[d]);
    }
  };
  C.setLevelSounds = function (a) {
    0 == C.pause &&
      ca.trace("no sound", {
        fileName: "SoundManager.hx",
        lineNumber: 112,
        className: "SoundManager",
        methodName: "setLevelSounds",
      });
  };
  C.stopLevelSounds = function (a) {
    ca.trace("no sound", {
      fileName: "SoundManager.hx",
      lineNumber: 179,
      className: "SoundManager",
      methodName: "stopLevelSounds",
    });
  };
  C.addSound = function (a, b) {
    null == b && (b = a);
    a = new Howl({ src: ["sounds/" + a + ".mp3", "sounds/" + a + ".ogg"] });
    a.volume(0.3);
    C.sounds.set(b, a);
  };
  C.play = function (a, b) {
    null == b && (b = !1);
    0 == C.pause &&
      ("SoundGameMusic" == a
        ? (r.__cast(C.sounds.get(a), Howl).play(),
          C.sounds.get("SoundGameMusic").pos(C.position),
          C.sounds.get("SoundGameMusic").volume(0.2),
          C.sounds.get("SoundGameMusic").loop(!0))
        : (r.__cast(C.sounds.get(a), Howl).play(),
          1 == b && C.sounds.get(a).loop(!0)),
      (C.pause = !1));
  };
  C.stopSound = function (a) {
    null == a && (a = !1);
    0 == C.pause &&
      (1 == a &&
        ((C.position = C.sounds.get("SoundGameMusic").pos),
        r.__cast(C.sounds.get("SoundGameMusic"), Howl).pause(),
        (C.loopPaused = !0)),
      (C.pause = !0),
      C.stopLevelSounds(k.currentLevel));
  };
  C.resumeLoop = function () {
    C.sounds.get("SoundGameMusic").pos(C.position);
    C.sounds.get("SoundGameMusic").volume(0.2);
    C.sounds.get("SoundGameMusic").loop(!0);
    r.__cast(C.sounds.get("SoundGameMusic"), Howl).play();
    C.loopPaused = !1;
  };
  C.stopOneSound = function (a) {
    r.__cast(C.sounds.get(a), Howl).stop();
  };
  C.checkOneSound = function (a) {
    return r.__cast(C.sounds.get(a), Howl).playing();
  };
  C.stopLoop = function () {
    C.position = C.sounds.get("SoundGameMusic").pos;
    r.__cast(C.sounds.get("SoundGameMusic"), Howl).pause();
    C.loopPaused = !0;
  };
  C.playSound = function (a) {
    null == a && (a = !1);
    1 == C.pause &&
      0 == C.adsPause &&
      (1 == a
        ? (C.sounds.get("SoundGameMusic").pos(C.position),
          C.sounds.get("SoundGameMusic").volume(0.2),
          C.sounds.get("SoundGameMusic").loop(!0),
          r.__cast(C.sounds.get("SoundGameMusic"), Howl).play(),
          (C.loopPaused = !1))
        : C.sounds.get("SoundGameMusic").volume(0.3),
      (C.pause = !1),
      C.setLevelSounds(k.currentLevel),
      k.resumeGame());
  };
  var Ei = function () {
    this.starsCoefArray = [1, 1.5, 2];
    this.timeArray = [
      50, 50, 80, 65, 120, 50, 56, 65, 65, 50, 140, 120, 105, 105, 150, 55, 105,
      105, 120, 170, 65, 50, 85, 110, 170, 280, 230, 320, 140, 400, 220,
    ];
  };
  l.StarsAndScores = Ei;
  Ei.__name__ = ["StarsAndScores"];
  Ei.prototype = {
    timeArray: null,
    starsCoefArray: null,
    getScore: function (a, b) {
      return u["int"](3 * this.timeArray[b - 1] + 1 - a);
    },
    getStars: function (a, b) {
      return a <= this.timeArray[b - 1] * this.starsCoefArray[0]
        ? 3
        : a <= this.timeArray[b - 1] * this.starsCoefArray[1]
        ? 2
        : a <= this.timeArray[b - 1] * this.starsCoefArray[2]
        ? 1
        : 0;
    },
    __class__: Ei,
  };
  var u = function () {};
  l.Std = u;
  u.__name__ = ["Std"];
  u.is = function (a, b) {
    return r.__instanceof(a, b);
  };
  u.string = function (a) {
    return r.__string_rec(a, "");
  };
  u["int"] = function (a) {
    return a | 0;
  };
  u.parseInt = function (a) {
    var b = parseInt(a, 10);
    0 != b || (120 != S.cca(a, 1) && 88 != S.cca(a, 1)) || (b = parseInt(a));
    return isNaN(b) ? null : b;
  };
  u.parseFloat = function (a) {
    return parseFloat(a);
  };
  var Ak = function (a, b, c, d, e, f) {
    null == f && (f = 0);
    null == e && (e = 0);
    null == d && (d = 1);
    null == c && (c = 0);
    null == b && (b = 0);
    null == a && (a = 1);
    this.a = a;
    this.b = b;
    this.c = c;
    this.d = d;
    this.tx = e;
    this.ty = f;
  };
  l["lime.math.Matrix3"] = Ak;
  Ak.__name__ = ["lime", "math", "Matrix3"];
  Ak.prototype = {
    a: null,
    b: null,
    c: null,
    d: null,
    tx: null,
    ty: null,
    __class__: Ak,
  };
  var ia = function (a, b, c, d, e, f) {
    null == f && (f = 0);
    null == e && (e = 0);
    null == d && (d = 1);
    null == c && (c = 0);
    null == b && (b = 0);
    null == a && (a = 1);
    this.a = a;
    this.b = b;
    this.c = c;
    this.d = d;
    this.tx = e;
    this.ty = f;
  };
  l["openfl.geom.Matrix"] = ia;
  ia.__name__ = ["openfl", "geom", "Matrix"];
  ia.prototype = {
    a: null,
    b: null,
    c: null,
    d: null,
    tx: null,
    ty: null,
    clone: function () {
      return new ia(this.a, this.b, this.c, this.d, this.tx, this.ty);
    },
    concat: function (a) {
      var b = this.a * a.a + this.b * a.c;
      this.b = this.a * a.b + this.b * a.d;
      this.a = b;
      b = this.c * a.a + this.d * a.c;
      this.d = this.c * a.b + this.d * a.d;
      this.c = b;
      b = this.tx * a.a + this.ty * a.c + a.tx;
      this.ty = this.tx * a.b + this.ty * a.d + a.ty;
      this.tx = b;
    },
    copyFrom: function (a) {
      this.a = a.a;
      this.b = a.b;
      this.c = a.c;
      this.d = a.d;
      this.tx = a.tx;
      this.ty = a.ty;
    },
    equals: function (a) {
      return null != a &&
        this.tx == a.tx &&
        this.ty == a.ty &&
        this.a == a.a &&
        this.b == a.b &&
        this.c == a.c
        ? this.d == a.d
        : !1;
    },
    identity: function () {
      this.a = 1;
      this.c = this.b = 0;
      this.d = 1;
      this.ty = this.tx = 0;
    },
    invert: function () {
      var a = this.a * this.d - this.b * this.c;
      if (0 == a)
        (this.a = this.b = this.c = this.d = 0),
          (this.tx = -this.tx),
          (this.ty = -this.ty);
      else {
        a = 1 / a;
        var b = this.d * a;
        this.d = this.a * a;
        this.a = b;
        this.b *= -a;
        this.c *= -a;
        a = -this.a * this.tx - this.c * this.ty;
        this.ty = -this.b * this.tx - this.d * this.ty;
        this.tx = a;
      }
      return this;
    },
    scale: function (a, b) {
      this.a *= a;
      this.b *= b;
      this.c *= a;
      this.d *= b;
      this.tx *= a;
      this.ty *= b;
    },
    setTo: function (a, b, c, d, e, f) {
      this.a = a;
      this.b = b;
      this.c = c;
      this.d = d;
      this.tx = e;
      this.ty = f;
    },
    to3DString: function (a) {
      null == a && (a = !1);
      return a
        ? "matrix3d(" +
            this.a +
            ", " +
            this.b +
            ", 0, 0, " +
            this.c +
            ", " +
            this.d +
            ", 0, 0, 0, 0, 1, 0, " +
            u["int"](this.tx) +
            ", " +
            u["int"](this.ty) +
            ", 0, 1)"
        : "matrix3d(" +
            this.a +
            ", " +
            this.b +
            ", 0, 0, " +
            this.c +
            ", " +
            this.d +
            ", 0, 0, 0, 0, 1, 0, " +
            this.tx +
            ", " +
            this.ty +
            ", 0, 1)";
    },
    translate: function (a, b) {
      this.tx += a;
      this.ty += b;
    },
    __transformInversePoint: function (a) {
      var b = this.a * this.d - this.b * this.c;
      if (0 == b) (a.x = -this.tx), (a.y = -this.ty);
      else {
        var c = (1 / b) * (this.c * (this.ty - a.y) + this.d * (a.x - this.tx));
        a.y = (1 / b) * (this.a * (a.y - this.ty) + this.b * (this.tx - a.x));
        a.x = c;
      }
    },
    __transformInverseX: function (a, b) {
      var c = this.a * this.d - this.b * this.c;
      return 0 == c
        ? -this.tx
        : (1 / c) * (this.c * (this.ty - b) + this.d * (a - this.tx));
    },
    __transformInverseY: function (a, b) {
      var c = this.a * this.d - this.b * this.c;
      return 0 == c
        ? -this.ty
        : (1 / c) * (this.a * (b - this.ty) + this.b * (this.tx - a));
    },
    __transformPoint: function (a) {
      var b = a.x,
        c = a.y;
      a.x = this.__transformX(b, c);
      a.y = this.__transformY(b, c);
    },
    __transformX: function (a, b) {
      return a * this.a + b * this.c + this.tx;
    },
    __transformY: function (a, b) {
      return a * this.b + b * this.d + this.ty;
    },
    __translateTransformed: function (a, b) {
      this.tx = this.__transformX(a, b);
      this.ty = this.__transformY(a, b);
    },
    __class__: ia,
  };
  var w = function (a, b) {
    null == b && (b = 0);
    null == a && (a = 0);
    this.zpp_inner = this.zpp_pool = null;
    this.zpp_inner = kb.get(a, b);
    this.zpp_inner.outer = this;
  };
  l["nape.geom.Vec2"] = w;
  w.__name__ = ["nape", "geom", "Vec2"];
  w.weak = function (a, b) {
    null == b && (b = 0);
    null == a && (a = 0);
    return w.get(a, b, !0);
  };
  w.get = function (a, b, c) {
    null == c && (c = !1);
    null == b && (b = 0);
    null == a && (a = 0);
    if (null == od.poolVec2) var d = new w();
    else (d = od.poolVec2), (od.poolVec2 = d.zpp_pool), (d.zpp_pool = null);
    null == d.zpp_inner
      ? ((d.zpp_inner = kb.get(a, b)), (d.zpp_inner.outer = d))
      : d.setxy(a, b);
    d.zpp_inner.weak = c;
    return d;
  };
  w.prototype = {
    zpp_inner: null,
    zpp_pool: null,
    dispose: function () {
      this.zpp_inner.immutable();
      var a = this.zpp_inner;
      this.zpp_inner = this.zpp_inner.outer = null;
      this.zpp_pool = od.poolVec2;
      od.poolVec2 = this;
      a.free();
      a.next = kb.zpp_pool;
      kb.zpp_pool = a;
    },
    copy: function (a) {
      null == a && (a = !1);
      return w.get(this.get_x(), this.get_y(), a);
    },
    get_x: function () {
      this.zpp_inner.validate();
      return this.zpp_inner.x;
    },
    set_x: function (a) {
      this.zpp_inner.immutable();
      this.get_x() != a &&
        ((this.zpp_inner.x = a), this.zpp_inner.invalidate());
      return this.get_x();
    },
    get_y: function () {
      this.zpp_inner.validate();
      return this.zpp_inner.y;
    },
    set_y: function (a) {
      this.zpp_inner.immutable();
      this.get_y() != a &&
        ((this.zpp_inner.y = a), this.zpp_inner.invalidate());
      return this.get_y();
    },
    get_length: function () {
      return Math.sqrt(
        this.get_x() * this.get_x() + this.get_y() * this.get_y()
      );
    },
    lsq: function () {
      return this.get_x() * this.get_x() + this.get_y() * this.get_y();
    },
    set: function (a) {
      this.zpp_inner.immutable();
      var b = this.setxy(a.get_x(), a.get_y());
      a.zpp_inner.weak && a.dispose();
      return b;
    },
    setxy: function (a, b) {
      this.zpp_inner.immutable();
      if (this.get_x() != a || this.get_y() != b)
        (this.zpp_inner.x = a),
          (this.zpp_inner.y = b),
          this.zpp_inner.invalidate();
      return this;
    },
    mul: function (a, b) {
      null == b && (b = !1);
      return w.get(this.get_x() * a, this.get_y() * a, b);
    },
    subeq: function (a) {
      this.zpp_inner.immutable();
      this.setxy(this.get_x() - a.get_x(), this.get_y() - a.get_y());
      a.zpp_inner.weak && a.dispose();
      return this;
    },
    toString: function () {
      this.zpp_inner.validate();
      return this.zpp_inner.toString();
    },
    __class__: w,
    __properties__: {
      get_length: "get_length",
      set_y: "set_y",
      get_y: "get_y",
      set_x: "set_x",
      get_x: "get_x",
    },
  };
  var od = function () {};
  l["zpp_nape.util.ZPP_PubPool"] = od;
  od.__name__ = ["zpp_nape", "util", "ZPP_PubPool"];
  var kb = function () {
    this.length = this.x = this.y = 0;
    this._inuse = this.modified = this.pushmod = !1;
    this.next = null;
    this.weak = !1;
    this._isimmutable = this.outer = null;
    this._immutable = !1;
    this._invalidate = this._validate = null;
  };
  l["zpp_nape.geom.ZPP_Vec2"] = kb;
  kb.__name__ = ["zpp_nape", "geom", "ZPP_Vec2"];
  kb.get = function (a, b, c) {
    null == c && (c = !1);
    if (null == kb.zpp_pool) var d = new kb();
    else (d = kb.zpp_pool), (kb.zpp_pool = d.next), (d.next = null);
    d.alloc();
    d._immutable = c;
    d.x = a;
    d.y = b;
    return d;
  };
  kb.prototype = {
    _invalidate: null,
    _validate: null,
    validate: function () {
      null != this._validate && this._validate();
    },
    invalidate: function () {
      null != this._invalidate && this._invalidate(this);
    },
    _immutable: null,
    _isimmutable: null,
    immutable: function () {},
    outer: null,
    wrapper: function () {
      if (null == this.outer) {
        this.outer = new w();
        var a = this.outer.zpp_inner;
        a.free();
        a.next = kb.zpp_pool;
        kb.zpp_pool = a;
        this.outer.zpp_inner = this;
      }
      return this.outer;
    },
    weak: null,
    free: function () {
      null != this.outer && (this.outer = this.outer.zpp_inner = null);
      this._invalidate = this._validate = this._isimmutable = null;
    },
    alloc: function () {
      this.weak = !1;
    },
    next: null,
    elem: function () {
      return this;
    },
    begin: function () {
      return this.next;
    },
    _inuse: null,
    modified: null,
    pushmod: null,
    length: null,
    add: function (a) {
      return this.inlined_add(a);
    },
    inlined_add: function (a) {
      a._inuse = !0;
      a.next = this.begin();
      this.next = a;
      this.modified = !0;
      this.length++;
      return a;
    },
    insert: function (a, b) {
      return this.inlined_insert(a, b);
    },
    inlined_insert: function (a, b) {
      b._inuse = !0;
      null == a
        ? ((b.next = this.begin()), (this.next = b))
        : ((b.next = a.next), (a.next = b));
      this.pushmod = this.modified = !0;
      this.length++;
      return b;
    },
    erase: function (a) {
      return this.inlined_erase(a);
    },
    inlined_erase: function (a) {
      var b;
      if (null == a) {
        var c = this.begin();
        this.next = b = c.next;
        this.empty() && (this.pushmod = !0);
      } else
        (c = a.next),
          (b = c.next),
          (a.next = b),
          null == b && (this.pushmod = !0);
      c.elem()._inuse = !1;
      this.modified = !0;
      this.length--;
      this.pushmod = !0;
      return b;
    },
    reverse: function () {
      for (var a = this.begin(), b = null; null != a; ) {
        var c = a.next;
        a.next = b;
        b = this.next = a;
        a = c;
      }
      this.pushmod = this.modified = !0;
    },
    empty: function () {
      return null == this.begin();
    },
    size: function () {
      return this.length;
    },
    front: function () {
      return this.begin().elem();
    },
    iterator_at: function (a) {
      for (var b = this.begin(); 0 < a-- && null != b; ) b = b.next;
      return b;
    },
    x: null,
    y: null,
    toString: function () {
      return "{ x: " + this.x + " y: " + this.y + " }";
    },
    __class__: kb,
  };
  var Oa = function (a, b, c, d, e, f) {
    null == f && (f = -1);
    null == e && (e = 1);
    null == d && (d = -1);
    null == c && (c = 1);
    null == b && (b = -1);
    null == a && (a = 1);
    this.zpp_inner = null;
    null == fc.zpp_pool
      ? (this.zpp_inner = new fc())
      : ((this.zpp_inner = fc.zpp_pool),
        (fc.zpp_pool = this.zpp_inner.next),
        (this.zpp_inner.next = null));
    this.zpp_inner.alloc();
    this.zpp_inner.outer = this;
    this.set_collisionGroup(a);
    this.set_collisionMask(b);
    this.set_sensorGroup(c);
    this.set_sensorMask(d);
    this.set_fluidGroup(e);
    this.set_fluidMask(f);
  };
  l["nape.dynamics.InteractionFilter"] = Oa;
  Oa.__name__ = ["nape", "dynamics", "InteractionFilter"];
  Oa.prototype = {
    zpp_inner: null,
    get_collisionGroup: function () {
      return this.zpp_inner.collisionGroup;
    },
    set_collisionGroup: function (a) {
      this.get_collisionGroup() != a &&
        ((this.zpp_inner.collisionGroup = a), this.zpp_inner.invalidate());
      return this.get_collisionGroup();
    },
    get_collisionMask: function () {
      return this.zpp_inner.collisionMask;
    },
    set_collisionMask: function (a) {
      this.get_collisionMask() != a &&
        ((this.zpp_inner.collisionMask = a), this.zpp_inner.invalidate());
      return this.get_collisionMask();
    },
    get_sensorGroup: function () {
      return this.zpp_inner.sensorGroup;
    },
    set_sensorGroup: function (a) {
      this.get_sensorGroup() != a &&
        ((this.zpp_inner.sensorGroup = a), this.zpp_inner.invalidate());
      return this.get_sensorGroup();
    },
    get_sensorMask: function () {
      return this.zpp_inner.sensorMask;
    },
    set_sensorMask: function (a) {
      this.get_sensorMask() != a &&
        ((this.zpp_inner.sensorMask = a), this.zpp_inner.invalidate());
      return this.get_sensorMask();
    },
    get_fluidGroup: function () {
      return this.zpp_inner.fluidGroup;
    },
    set_fluidGroup: function (a) {
      this.get_fluidGroup() != a &&
        ((this.zpp_inner.fluidGroup = a), this.zpp_inner.invalidate());
      return this.get_fluidGroup();
    },
    get_fluidMask: function () {
      return this.zpp_inner.fluidMask;
    },
    set_fluidMask: function (a) {
      this.get_fluidMask() != a &&
        ((this.zpp_inner.fluidMask = a), this.zpp_inner.invalidate());
      return this.get_fluidMask();
    },
    __class__: Oa,
    __properties__: {
      set_fluidMask: "set_fluidMask",
      get_fluidMask: "get_fluidMask",
      set_fluidGroup: "set_fluidGroup",
      get_fluidGroup: "get_fluidGroup",
      set_sensorMask: "set_sensorMask",
      get_sensorMask: "get_sensorMask",
      set_sensorGroup: "set_sensorGroup",
      get_sensorGroup: "get_sensorGroup",
      set_collisionMask: "set_collisionMask",
      get_collisionMask: "get_collisionMask",
      set_collisionGroup: "set_collisionGroup",
      get_collisionGroup: "get_collisionGroup",
    },
  };
  var fc = function () {
    this.collisionGroup =
      this.collisionMask =
      this.sensorGroup =
      this.sensorMask =
      this.fluidGroup =
      this.fluidMask =
        0;
    this.next = this.outer = this.shapes = null;
    this.feature_cons();
    this.collisionGroup = this.sensorGroup = this.fluidGroup = 1;
    this.collisionMask = this.sensorMask = this.fluidMask = -1;
  };
  l["zpp_nape.dynamics.ZPP_InteractionFilter"] = fc;
  fc.__name__ = ["zpp_nape", "dynamics", "ZPP_InteractionFilter"];
  fc.prototype = {
    next: null,
    outer: null,
    wrapper: function () {
      if (null == this.outer) {
        this.outer = new Oa();
        var a = this.outer.zpp_inner;
        a.free();
        a.next = fc.zpp_pool;
        fc.zpp_pool = a;
        this.outer.zpp_inner = this;
      }
      return this.outer;
    },
    free: function () {
      this.outer = null;
    },
    alloc: function () {},
    shapes: null,
    feature_cons: function () {
      this.shapes = new vf();
    },
    addShape: function (a) {
      this.shapes.add(a);
    },
    remShape: function (a) {
      this.shapes.remove(a);
    },
    collisionGroup: null,
    collisionMask: null,
    shouldCollide: function (a) {
      return 0 != (this.collisionMask & a.collisionGroup)
        ? 0 != (a.collisionMask & this.collisionGroup)
        : !1;
    },
    sensorGroup: null,
    sensorMask: null,
    shouldSense: function (a) {
      return 0 != (this.sensorMask & a.sensorGroup)
        ? 0 != (a.sensorMask & this.sensorGroup)
        : !1;
    },
    fluidGroup: null,
    fluidMask: null,
    shouldFlow: function (a) {
      return 0 != (this.fluidMask & a.fluidGroup)
        ? 0 != (a.fluidMask & this.fluidGroup)
        : !1;
    },
    invalidate: function () {
      for (var a = this.shapes.begin(); null != a; )
        a.elem().invalidate_filter(), (a = a.next);
    },
    __class__: fc,
  };
  var k = function () {
    wa.call(this);
  };
  l.Storage = k;
  k.__name__ = ["Storage"];
  k.init = function (a, b, c, d) {
    k.XX = b;
    k.YY = c;
    k.frameRate = 1 == k.isMobileCheck ? d - 5 : d;
    N.get_current().stage.set_frameRate(k.frameRate);
    k.creatorArray = [];
    k.decorArray = [];
    k.animationArray = [];
    k.gameSpace = a;
    k.dynamicCbt = new za();
    k.balloonsCbt = new za();
    k.rocketCbt = new za();
    k.magnetCbt = new za();
    k.staticCbt = new za();
    k.waterCbt = new za();
    k.pigCbt = new za();
    k.starCbt = new za();
    k.kinematicCbt = new za();
    k.sensorCbt = new za();
    k.spikeCbt = new za();
    k.buttonCbt = new za();
    k.teleportCbt = new za();
    k.catcherCbt = new za();
    k.iceCbt = new za();
    k.saves = Fb.getLocal("loader5_math", "/");
    k.InitialX = 700;
    k.InitialY = 500;
    N.trace("InitialX= " + k.InitialX + " InitialY= " + k.InitialY);
    k.initSaves();
  };
  k.blackScreenTween = function (a) {
    k.blackScreen = k.initSpriteUI("blank");
    k.blackScreen.set_width(720);
    k.blackScreen.set_height(500);
    k.blackScreen.set_x(350);
    k.blackScreen.set_y(250);
    k.theGame.addChild(k.blackScreen);
    k.blackScreen.mouseEnabled = !1;
    Xa.tween(k.blackScreen, 3, { alpha: 0.01 }, !0);
  };
  k.offsetPage = function () {
    k.theGame.set_x(0);
    k.theGame.set_y(0);
    var a = k.theGame;
    a.set_x(a.get_x() + k.offSetX);
    a = k.theGame;
    a.set_y(a.get_y() + k.offSetY);
    k.theMenu.set_x(0);
    k.theMenu.set_y(0);
    a = k.theMenu;
    a.set_x(a.get_x() + k.offSetX);
    a = k.theMenu;
    a.set_y(a.get_y() + k.offSetY);
  };
  k.resizeGame = function () {
    k.XX > k.YY
      ? ((k.H = k.YY / 500),
        (k.W = k.YY / 500),
        (k.offSetX = u["int"]((k.XX - 700 * k.H) / 2)),
        (k.offSetY = 0),
        0 > k.offSetX &&
          ((k.H = k.XX / 700),
          (k.W = k.XX / 700),
          (k.offSetX = u["int"]((k.XX - 700 * k.H) / 2)),
          (k.offSetY = u["int"]((k.YY - 500 * k.H) / 2))))
      : ((k.H = k.XX / 700),
        (k.W = k.XX / 700),
        (k.offSetY = u["int"]((k.YY - 500 * k.H) / 2)),
        (k.offSetX = 0));
  };
  k.initLevel = function (a) {
    k.currentSprite = a;
    k.InitialX = 700;
    k.InitialY = 500;
    k.levelState = "started";
    k.run = !0;
    k.currentHintNumber = 0;
    k.starCounter = 0;
    k.ballonPushed = 0;
    k.balkaPushed = 0;
    k.currentDigitInPassword = 0;
    k.tweenCompleted = 0;
  };
  k.setXY = function (a, b) {
    k.XX = a;
    k.YY = b;
  };
  k.setSpace = function (a) {
    k.space = a;
  };
  k.clear = function () {
    k.space.clear();
    k.arrowCounter = 0;
    k.rayCastArray = [];
    k.rayForDelete = [];
    k.animationArray = [];
    k.decorArray = [];
    k.currentHintNumber = 0;
  };
  k.initSpriteUI = function (a) {
    new bf();
    var b = ha.getBitmapData("img/ui/" + a + ".png"),
      c = new w(0, 0);
    var d = Hi.create(b, 1, 1, b.width, b.height);
    var e = new y(d, !0);
    switch (a) {
      case "TruckBody2":
        c.set_x(-42.5);
        c.set_y(5.5);
        break;
      case "boardWall":
        c.set_x(-20), c.set_y(0);
    }
    d.addBehavior(
      new t(
        "normal",
        [0],
        !1,
        1,
        b.width / 2 - c.get_x(),
        b.height / 2 - c.get_y()
      )
    );
    e.showBehavior("normal");
    e.set_name(a);
    return e;
  };
  k.initSpriteBack = function (a) {
    new bf();
    a = ha.getBitmapData("img/play/ba" + a + ".png");
    a = Hi.create(a, 1, 1, a.width, a.height);
    var b = new y(a, !0);
    a.addBehavior(new t("normal", [0], !1, 1, 0, 0));
    b.showBehavior("normal");
    return b;
  };
  k.initSaves = function () {
    k.levelStateArray = [];
    k.starArray = [];
    k.scoresArray = [];
    if (null == k.saves.data.levelStates) {
      for (var a = 0; 30 > a; )
        a++,
          k.levelStateArray.push(0),
          k.starArray.push(0),
          k.scoresArray.push(0);
      k.levelStateArray[0] = 1;
    } else k.loadSaves();
  };
  k.loadSaves = function () {
    k.levelStateArray = [];
    k.starArray = [];
    k.scoresArray = [];
    k.levelStateArray = k.saves.data.levelStates;
    k.starArray = k.saves.data.starArray;
    k.scoresArray = k.saves.data.scoresArray;
  };
  k.updateSaves = function () {
    k.saves.data.levelStates = k.levelStateArray;
    k.saves.data.starArray = k.starArray;
    k.saves.data.scoresArray = k.scoresArray;
    k.saves.flush();
  };
  k.initAnimation = function (a, b, c) {
    null == c && (c = !1);
    null == b && (b = "");
    var d = w.weak(0, 0),
      e = new bf();
    if ("ui" != b)
      if (0 == k.checkSpriteForCommon(a)) {
        b = uf.parse(
          ha.getText(
            "json/level" + u.string(k.currentLevel) + "/" + a + ".json"
          )
        );
        var f = ha.getBitmapData(
          "json/level" + u.string(k.currentLevel) + "/" + a + "Animation.png"
        );
      } else
        (b = uf.parse(ha.getText("json/common/" + a + ".json"))),
          (f = ha.getBitmapData("json/common/" + a + "Animation.png"));
    else
      (b = uf.parse(ha.getText("img/ui/" + a + ".json"))),
        (f = ha.getBitmapData("img/ui/" + a + "Animation.png"));
    b = b.frames;
    e.addBehavior(new t("normal", [0], !1, 1));
    e.updateImage(f);
    for (var g = 0, h = b.length; g < h; ) {
      var n = g++;
      f = new Yf();
      f.x = u["int"](b[n].frame.x);
      f.y = u["int"](b[n].frame.y);
      f.width = u["int"](b[n].frame.w);
      f.height = u["int"](b[n].frame.h);
      if (0 == b[n].trimmed)
        (f.offsetX = -u["int"](b[n].sourceSize.w / 2)),
          (f.offsetY = -u["int"](b[n].sourceSize.h / 2));
      else {
        switch (a) {
          case "Lamp":
            d.set_x(0);
            d.set_y(b[n].frame.h / 2);
            break;
          case "halfShadow":
            d.set_x(-50);
            d.set_y(-50);
            break;
          case "on_off":
            d.set_x(22), d.set_y(31);
        }
        0 == c
          ? ((f.offsetX = u["int"](b[n].spriteSourceSize.x - d.get_x())),
            (f.offsetY = u["int"](b[n].spriteSourceSize.y - d.get_y())))
          : ((f.offsetX -= u["int"](b[n].frame.w / 2 - d.get_x())),
            (f.offsetY -= u["int"](b[n].frame.h / 2 - d.get_y())));
      }
      e.addFrame(f);
    }
    switch (a) {
      case "BtnGoo":
      case "BtnLeft":
      case "BtnRight":
      case "BtnUp":
        e.addBehavior(new t("out", [0], !0, 1, 0, 0));
        e.addBehavior(new t("over", [1], !0, 1, 0, 0));
        e.addBehavior(new t("2", [2], !0, 1, 0, 0));
        e.addBehavior(new t("3", [3], !0, 1, 0, 0));
        break;
      case "Button_silver":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(new t("enable", [1], !1, 20));
        break;
      case "Creature2_Animation7":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(
          new t(
            "enable",
            [
              0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
              19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34,
              35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50,
              51, 52, 53, 54,
            ],
            !1,
            20,
            0,
            0
          )
        );
        break;
      case "DangerBox1":
        e.addBehavior(new t("0", [0], !1, 20));
        break;
      case "LEVEL":
        e.addBehavior(new t("0", [0], !1, 20));
        e.addBehavior(new t("1", [11], !1, 20));
        e.addBehavior(new t("2", [22], !1, 20));
        e.addBehavior(new t("3", [24], !1, 20));
        e.addBehavior(new t("4", [25], !1, 20));
        e.addBehavior(new t("5", [26], !1, 20));
        e.addBehavior(new t("6", [27], !1, 20));
        e.addBehavior(new t("7", [28], !1, 20));
        e.addBehavior(new t("8", [29], !1, 20));
        e.addBehavior(new t("9", [1], !1, 20));
        e.addBehavior(new t("10", [2], !1, 20));
        e.addBehavior(new t("11", [3], !1, 20));
        e.addBehavior(new t("12", [4], !1, 20));
        e.addBehavior(new t("13", [5], !1, 20));
        e.addBehavior(new t("14", [6], !1, 20));
        e.addBehavior(new t("15", [7], !1, 20));
        e.addBehavior(new t("16", [8], !1, 20));
        e.addBehavior(new t("17", [9], !1, 20));
        e.addBehavior(new t("18", [10], !1, 20));
        e.addBehavior(new t("19", [12], !1, 20));
        e.addBehavior(new t("20", [13], !1, 20));
        e.addBehavior(new t("21", [14], !1, 20));
        e.addBehavior(new t("22", [15], !1, 20));
        e.addBehavior(new t("23", [16], !1, 20));
        e.addBehavior(new t("24", [17], !1, 20));
        e.addBehavior(new t("25", [18], !1, 20));
        e.addBehavior(new t("26", [19], !1, 20));
        e.addBehavior(new t("27", [20], !1, 20));
        e.addBehavior(new t("28", [21], !1, 20));
        e.addBehavior(new t("29", [23], !1, 20));
        break;
      case "Lamp":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(new t("enable", [1], !1, 20));
        break;
      case "LevelBtn":
        e.addBehavior(new t("out", [0], !1, 20, 0, 0));
        e.addBehavior(new t("over", [1], !1, 20, 0, 0));
        e.addBehavior(new t("lock", [2], !1, 20, 0, 0));
        break;
      case "HalfShadow":
      case "Shadow":
        e.addBehavior(new t("on", [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], !1, 20));
        e.addBehavior(new t("off", [9, 8, 7, 6, 5, 4, 3, 2, 1, 0], !1, 20));
        e.addBehavior(new t("enable", [0], !1, 20));
        e.addBehavior(new t("disable", [9], !1, 20));
        break;
      case "TFXBoom":
        e.addBehavior(
          new t(
            "enable",
            [
              1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,
              20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
              36, 37, 38, 39, 40, 41, 42, 43, 44, 0,
            ],
            !1,
            30
          )
        );
        e.addBehavior(new t("disable", [0], !1, 30));
        break;
      case "TFXSpark":
      case "TFXSparkL":
        e.addBehavior(
          new t(
            "enable",
            [
              0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
              19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34,
              35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 0,
            ],
            !1,
            30
          )
        );
        e.addBehavior(new t("disable", [0], !1, 30));
        break;
      case "TPFXLighting":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(
          new t(
            "enable",
            [
              1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,
              20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
              36,
            ],
            !0,
            30
          )
        );
        break;
      case "TransformerVault":
        e.addBehavior(new t("enable", [0], !1, 30));
        e.addBehavior(new t("disable", [1], !1, 30));
        e.addBehavior(new t("off", [2], !1, 30));
        break;
      case "BigBox":
      case "SquareBox1":
      case "SquareBox2":
      case "SquareBox3":
      case "VerticalBox1":
      case "VerticalBox2":
      case "VerticalBox3":
      case "VerticalBox4":
        e.addBehavior(new t("0", [0], !1, 20));
        e.addBehavior(new t("1", [1], !1, 20));
        e.addBehavior(new t("2", [2], !1, 20));
        break;
      case "acIcons":
        e.addBehavior(new t("0", [0], !0, 1, 0, 0));
        e.addBehavior(new t("1", [1], !0, 1, 0, 0));
        e.addBehavior(new t("2", [2], !0, 1, 0, 0));
        e.addBehavior(new t("3", [3], !0, 1, 0, 0));
        break;
      case "acorns":
        e.addBehavior(new t("0", [0], !0, 1, 0, 0));
        e.addBehavior(new t("1", [1], !0, 1, 0, 0));
        e.addBehavior(new t("2", [2], !0, 1, 0, 0));
        e.addBehavior(new t("3", [3], !0, 1, 0, 0));
        break;
      case "attraction":
      case "attraction2":
        e.addBehavior(new t("normal", [0], !0, 1, 0, 0));
        e.addBehavior(new t("above", [1], !0, 1, 0, 0));
        e.addBehavior(new t("enable", [2], !0, 1, 0, 0));
        break;
      case "back":
        e.addBehavior(new t("out", [0], !0, 1, 0, 0));
        e.addBehavior(new t("over", [1], !0, 1, 0, 0));
        break;
      case "blueLightB":
      case "orangeLightB":
        e.addBehavior(
          new t(
            "active",
            [
              0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
              19,
            ],
            !1,
            30
          )
        );
        e.addBehavior(new t("off", [9], !1, 30));
        e.addBehavior(new t("on", [0], !1, 30));
        e.addBehavior(
          new t("offon", [10, 11, 12, 13, 14, 15, 16, 17, 18, 19], !1, 30)
        );
        break;
      case "boom":
        e.addBehavior(
          new t(
            "enable",
            [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
            !1,
            10,
            0,
            0
          )
        );
        break;
      case "btn_candy":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(new t("enable", [1], !1, 20));
        break;
      case "creator":
        e.addBehavior(new t("normal", [0], !0, 1, 0, 0));
        e.addBehavior(new t("above", [1], !0, 1, 0, 0));
        e.addBehavior(new t("enable", [2], !0, 1, 0, 0));
        break;
      case "digit":
        for (c = 0; 10 > c; )
          (d = c++),
            e.addBehavior(new t(null == d ? "null" : "" + d, [d], !1, 30));
        break;
      case "egg":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(
          new t(
            "enable",
            [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14],
            !1,
            20,
            0,
            0
          )
        );
        break;
      case "ftc_w_gfx_Candy":
        e.addBehavior(new t("enable", [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], !0, 20));
        break;
      case "ftc_w_gfx_Fly":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(new t("enable", [0, 1, 2], !0, 20));
        break;
      case "ftc_w_gfx_GraySquare":
        e.addBehavior(new t("enable", [0, 1, 2, 3, 4, 5, 6, 7, 8], !0, 20));
        break;
      case "ftc_w_gfx_GraySquareIdle":
        e.addBehavior(new t("enable", [0, 1, 2, 3, 4, 5, 6], !0, 20));
        break;
      case "ftc_w_gfx_Lock3":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(new t("enable", [1], !1, 20));
        break;
      case "ftc_w_gfx_Redball":
        e.addBehavior(
          new t(
            "enable",
            [
              0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
              19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34,
              35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50,
              51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66,
              67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82,
              83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98,
              99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111,
              112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124,
              125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137,
              138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150,
              151, 152, 153, 154, 155, 156, 157, 158,
            ],
            !0,
            60
          )
        );
        break;
      case "ftc_w_gfx_SnailBob":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(new t("enable", [0, 1], !1, 20));
        break;
      case "ftc_w_gfx_hedgehog":
        e.addBehavior(
          new t(
            "enable",
            [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14],
            !0,
            20
          )
        );
        e.addBehavior(new t("disable", [0], !1, 1, 0, 0));
        break;
      case "ftc_w_gfx_hint0":
        e.addBehavior(new t("enable", [0, 1, 2, 3, 4, 5], !1, 20));
        break;
      case "ftc_w_gfx_hint2":
        e.addBehavior(new t("enable", [0, 1, 2, 3, 4, 5], !1, 20));
        break;
      case "ftc_w_gfx_hint4":
        e.addBehavior(new t("enable", [0, 1, 2, 3, 4, 5], !1, 20));
        break;
      case "ftc_w_gfx_hint5":
        e.addBehavior(new t("enable", [0, 1, 2, 3, 4, 5], !1, 20));
        break;
      case "gfx_btnGameMenuSlider":
        e.addBehavior(new t("0", [0], !0, 1, 0, 0));
        e.addBehavior(new t("1", [1], !0, 1, 0, 0));
        e.addBehavior(new t("2", [2], !0, 1, 0, 0));
        e.addBehavior(new t("3", [3], !0, 1, 0, 0));
        break;
      case "gfx_ftc_CandyCollect_Effect":
        e.addBehavior(
          new t("enable", [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11], !1, 20)
        );
        break;
      case "gfx_ftc_Creature2_Animation2_Reverse":
        e.addBehavior(
          new t(
            "enable",
            [
              0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
              19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34,
              35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50,
              51, 52, 53, 54, 55, 56, 57, 58, 59,
            ],
            !1,
            20
          )
        );
        break;
      case "gfx_ftc_GiftCollect_Effect1":
        e.addBehavior(
          new t("enable", [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11], !1, 20)
        );
        break;
      case "gfx_ftc_ItemHint_Effect":
        e.addBehavior(new t("enable", [0, 1, 2, 3, 4, 5, 6, 7], !1, 20));
        break;
      case "gfx_ftc_StarCollect_Effect":
        e.addBehavior(
          new t("enable", [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11], !1, 20)
        );
        break;
      case "gfx_ftc_Star_Effect":
        e.addBehavior(
          new t("enable", [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11], !1, 20)
        );
        break;
      case "gfx_ftc_k_landscape":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(
          new t(
            "enable",
            [
              0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
              19,
            ],
            !1,
            20
          )
        );
        break;
      case "gfx_ftc_k_lever":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(new t("enable", [1], !1, 20));
        break;
      case "gfx_ftc_k_lvl14_3hit_box":
        e.addBehavior(new t("0", [0], !1, 20));
        e.addBehavior(new t("1", [1], !1, 20));
        e.addBehavior(new t("2", [2], !1, 20));
        break;
      case "gfx_ftc_k_lvl14_box_Effect":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(
          new t(
            "enable",
            [
              0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
              19, 20,
            ],
            !1,
            20
          )
        );
        break;
      case "gfx_ftc_k_lvl16_toy_magnet_button":
        e.addBehavior(new t("disable", [0], !0, 1, 0, 0));
        e.addBehavior(new t("enable", [1], !0, 1, 0, 0));
        e.addBehavior(new t("2", [2], !0, 1, 0, 0));
        break;
      case "gfx_ftc_k_lvl17_Creature2_AnimationJump":
        e.addBehavior(new t("disable", [0], !1, 1, 0, 0));
        e.addBehavior(
          new t(
            "enable",
            [
              0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
              19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34,
              35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50,
              51,
            ],
            !1,
            30,
            0,
            0
          )
        );
        break;
      case "gfx_ftc_k_lvl18_box":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(new t("enable", [0, 1, 2, 3], !1, 20));
        break;
      case "gfx_ftc_k_lvl18_flasher":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(new t("enable", [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], !0, 20));
        break;
      case "gfx_ftc_k_lvl18_fur2":
        e.addBehavior(new t("0", [0], !1, 20));
        e.addBehavior(new t("1", [1], !1, 20));
        e.addBehavior(new t("2", [2], !1, 20));
        e.addBehavior(new t("3", [3], !1, 20));
        e.addBehavior(new t("4", [4], !1, 20));
        break;
      case "gfx_ftc_k_lvl18_oven":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(
          new t("enable", [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11], !0, 20)
        );
        break;
      case "gfx_ftc_k_lvl1_boom_effect":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(
          new t("enable", [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10], !1, 20)
        );
        break;
      case "gfx_ftc_k_lvl3_candy_sun":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(
          new t(
            "enable",
            [
              0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
              19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34,
              35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50,
              51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66,
              67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82,
              83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98,
              99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111,
              112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124,
              125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137,
              138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150,
              151, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163,
              164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176,
              177, 178, 179, 180, 181, 182, 183, 184, 185, 185, 186, 187, 188,
              189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201,
              202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214,
              215, 216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227,
              228, 229, 230, 231, 232, 233, 234,
            ],
            !0,
            60
          )
        );
        break;
      case "gfx_ftc_k_lvl4_Creature3_Animation":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(
          new t(
            "enable",
            [
              0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
              19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34,
              35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49,
            ],
            !1,
            20
          )
        );
        break;
      case "gfx_ftc_k_lvl4_stone_1":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(
          new t(
            "enable",
            [
              0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
              19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34,
              35, 36, 37,
            ],
            !1,
            30
          )
        );
        break;
      case "gfx_ftc_k_lvl4_stone_2":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(
          new t(
            "enable",
            [
              0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
              19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34,
              35, 36, 37,
            ],
            !1,
            30
          )
        );
        break;
      case "gfx_ftc_k_lvl4_stone_3":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(
          new t(
            "enable",
            [
              0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
              19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34,
              35, 36, 37,
            ],
            !1,
            30
          )
        );
        break;
      case "gfx_ftc_k_lvl4_stone_4":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(
          new t(
            "enable",
            [
              0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
              19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34,
              35, 36, 37,
            ],
            !1,
            30
          )
        );
        break;
      case "gfx_ftc_k_no_paint":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(
          new t(
            "enable",
            [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
            !1,
            20
          )
        );
        break;
      case "gfx_ftc_lvl10_Spider":
        e.addBehavior(new t("0", [0], !0, 1, 0, 0));
        e.addBehavior(new t("1", [1], !0, 1, 0, 0));
        break;
      case "gfx_ftc_lvl10_TvBtn":
        e.addBehavior(new t("0", [0], !0, 1, 0, 0));
        e.addBehavior(new t("1", [1], !0, 1, 0, 0));
        e.addBehavior(new t("2", [2], !0, 1, 0, 0));
        e.addBehavior(new t("3", [3], !0, 1, 0, 0));
        break;
      case "gfx_ftc_lvl10_WhiteNoise1":
        e.addBehavior(
          new t(
            "enable",
            [
              0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
              19,
            ],
            !0,
            20
          )
        );
        break;
      case "gfx_ftc_lvl10_WhiteNoise2":
        e.addBehavior(new t("enable", [0], !1, 20));
        e.addBehavior(new t("disable", [1], !1, 20));
        break;
      case "gfx_ftc_lvl13_PipeBtn01":
        e.addBehavior(new t("0", [0], !0, 1, 0, 0));
        e.addBehavior(new t("1", [1], !0, 1, 0, 0));
        e.addBehavior(new t("2", [2], !0, 1, 0, 0));
        e.addBehavior(new t("3", [3], !0, 1, 0, 0));
        break;
      case "gfx_ftc_lvl14_Lock3":
        e.addBehavior(new t("enable", [0], !0, 1, 0, 0));
        e.addBehavior(new t("disable", [1], !0, 1, 0, 0));
        break;
      case "gfx_ftc_lvl14_WoodenLockerDoor1":
        e.addBehavior(new t("disable", [0], !1, 20, 0, 0));
        e.addBehavior(
          new t("enable", [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], !1, 20, 0, 0)
        );
        break;
      case "gfx_ftc_lvl14_WoodenLockerDoor2":
        e.addBehavior(new t("disable", [0], !1, 20, 0, 0));
        e.addBehavior(
          new t("enable", [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], !1, 20, 0, 0)
        );
        break;
      case "gfx_ftc_lvl15_BigLamp":
        e.addBehavior(new t("0", [0], !1, 20));
        e.addBehavior(new t("1", [1], !1, 20));
        break;
      case "gfx_ftc_lvl15_CatPicturePart1_1":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(
          new t("enable", [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10], !1, 20)
        );
        break;
      case "gfx_ftc_lvl15_CatPicturePart5":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(
          new t("enable", [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10], !1, 20)
        );
        break;
      case "gfx_ftc_lvl17_LevelItem_GreenBoxPart2":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(new t("enable", [3], !0, 20));
        break;
      case "gfx_ftc_lvl18_Door":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(
          new t(
            "enable",
            [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14],
            !1,
            20
          )
        );
        break;
      case "gfx_ftc_lvl20_Btn":
        e.addBehavior(new t("0", [0], !0, 1, 0, 0));
        e.addBehavior(new t("1", [1], !0, 1, 0, 0));
        break;
      case "gfx_ftc_lvl20_PumpedBalloonAnimations":
      case "gfx_ftc_lvl20_PumpedBalloonAnimations2":
      case "gfx_ftc_lvl20_PumpedBalloonAnimations3":
      case "gfx_ftc_lvl20_PumpedBalloonAnimations4":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(new t("enable", [0, 0, 1, 1, 2, 2, 3, 3, 4], !1, 20));
        break;
      case "gfx_ftc_lvl3_iMacBtn":
        e.addBehavior(new t("enable", [0], !1, 20));
        e.addBehavior(new t("disable", [1], !1, 20));
        break;
      case "gfx_ftc_lvl7_CandyBox":
        e.addBehavior(
          new t(
            "enable",
            [
              0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
              19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34,
              35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49,
            ],
            !1,
            20
          )
        );
        break;
      case "gfx_ftc_lvl7_Spring":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(new t("enable", [0, 1, 2, 3, 4], !0, 20));
        break;
      case "gfx_ftc_star":
        e.addBehavior(new t("enable", [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], !1, 20));
        break;
      case "gfx_hint3":
        e.addBehavior(new t("enable", [0, 1, 2, 3, 4], !1, 20));
        break;
      case "gfx_hint7":
        e.addBehavior(new t("enable", [0, 1, 2, 3, 4], !1, 20));
        break;
      case "gfx_hintCandy":
        e.addBehavior(new t("enable", [0, 1, 2, 3, 4, 5], !1, 20));
        break;
      case "gfx_hintFingerPush":
        e.addBehavior(
          new t(
            "enable",
            [
              0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
              19,
            ],
            !0,
            20
          )
        );
        break;
      case "gfx_hintFingerSwipe1_X":
        e.addBehavior(
          new t(
            "enable",
            [
              0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
              19, 20, 21, 22, 23, 24, 25, 26,
            ],
            !0,
            20
          )
        );
        break;
      case "gfx_hintFingerSwipe1_Y":
        e.addBehavior(
          new t(
            "enable",
            [
              0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
              19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32,
            ],
            !0,
            20
          )
        );
        break;
      case "gfx_hintReplay":
        e.addBehavior(new t("enable", [0, 1, 2, 3, 4, 5], !1, 20));
        break;
      case "gfx_level10_LevelItem_Spider_Animation1":
        e.addBehavior(new t("disable", [0], !0, 20));
        e.addBehavior(
          new t(
            "enable",
            [
              0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
              19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34,
              35, 36, 37, 38, 39, 40, 41, 42, 43, 44,
            ],
            !1,
            20
          )
        );
        break;
      case "gfx_level10_LevelItem_Spider_Animation2":
        e.addBehavior(new t("disable", [0], !1, 20));
        e.addBehavior(
          new t(
            "enable",
            [
              0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
              19, 20, 21, 22, 23, 24,
            ],
            !1,
            20
          )
        );
        break;
      case "greenLightB":
        e.addBehavior(new t("on", [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], !1, 30));
        e.addBehavior(new t("off", [0], !1, 30));
        break;
      case "hand":
        e.addBehavior(
          new t(
            "enable",
            [0, 0, 0, 1, 1, 1, 2, 2, 2, 3, 3, 3, 4, 4, 4, 5, 5, 5, 6, 6, 6],
            !0,
            15,
            0,
            0
          )
        );
        break;
      case "hideZone":
        e.addBehavior(new t("normal", [0], !0, 30, 0, 0));
        e.addBehavior(
          new t(
            "enable",
            [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
            !1,
            30,
            0,
            0
          )
        );
        break;
      case "hook":
        e.addBehavior(new t("normal", [0], !0, 1, 0, 0));
        e.addBehavior(new t("above", [1], !0, 1, 0, 0));
        e.addBehavior(new t("enable", [2], !0, 1, 0, 0));
        break;
      case "ice11":
        e.addBehavior(new t("enable", [0, 0, 1, 1, 2, 2, 3, 3, 4, 4], !1, 20));
        break;
      case "ice12":
        e.addBehavior(new t("enable", [0, 0, 1, 1, 2, 2, 3, 3, 4, 4], !1, 20));
        break;
      case "ice14":
        e.addBehavior(
          new t("enable", [0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5], !1, 20)
        );
        break;
      case "invader_blue":
        e.addBehavior(new t("enable", [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], !0, 20));
        break;
      case "invader_green":
        e.addBehavior(new t("enable", [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], !0, 20));
        break;
      case "invader_orange":
        e.addBehavior(new t("enable", [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], !0, 20));
        break;
      case "invader_red":
        e.addBehavior(new t("enable", [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], !0, 20));
        break;
      case "invader_violet":
        e.addBehavior(new t("enable", [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], !0, 20));
        break;
      case "killer":
      case "killer2":
        e.addBehavior(new t("normal", [0], !0, 1, 0, 0));
        e.addBehavior(new t("above", [1], !0, 1, 0, 0));
        e.addBehavior(new t("enable", [1], !0, 1, 0, 0));
        break;
      case "lIcons":
        e.addBehavior(new t("0", [0], !0, 1, 0, 0));
        e.addBehavior(new t("1", [1], !0, 1, 0, 0));
        e.addBehavior(new t("2", [2], !0, 1, 0, 0));
        e.addBehavior(new t("3", [3], !0, 1, 0, 0));
        e.addBehavior(new t("4", [4], !0, 1, 0, 0));
        e.addBehavior(new t("5", [5], !0, 1, 0, 0));
        e.addBehavior(new t("6", [6], !0, 1, 0, 0));
        e.addBehavior(new t("7", [7], !0, 1, 0, 0));
        e.addBehavior(new t("8", [8], !0, 1, 0, 0));
        e.addBehavior(new t("9", [9], !0, 1, 0, 0));
        e.addBehavior(new t("10", [10], !0, 1, 0, 0));
        e.addBehavior(new t("11", [11], !0, 1, 0, 0));
        e.addBehavior(new t("12", [12], !0, 1, 0, 0));
        e.addBehavior(new t("13", [13], !0, 1, 0, 0));
        e.addBehavior(new t("14", [14], !0, 1, 0, 0));
        e.addBehavior(new t("15", [15], !0, 1, 0, 0));
        e.addBehavior(new t("16", [16], !0, 1, 0, 0));
        e.addBehavior(new t("17", [17], !0, 1, 0, 0));
        e.addBehavior(new t("18", [18], !0, 1, 0, 0));
        e.addBehavior(new t("19", [19], !0, 1, 0, 0));
        e.addBehavior(new t("20", [20], !0, 1, 0, 0));
        e.addBehavior(new t("21", [21], !0, 1, 0, 0));
        e.addBehavior(new t("22", [22], !0, 1, 0, 0));
        e.addBehavior(new t("23", [23], !0, 1, 0, 0));
        e.addBehavior(new t("24", [24], !0, 1, 0, 0));
        e.addBehavior(new t("25", [25], !0, 1, 0, 0));
        break;
      case "levelNumbers":
        for (c = 0; 60 > c; )
          (d = c++),
            e.addBehavior(new t(null == d ? "null" : "" + d, [d], !1, 30));
        break;
      case "lightBlue":
      case "lightGreen":
      case "lightOrange":
        e.addBehavior(
          new t(
            "enable",
            [
              0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
              19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34,
              35, 36, 37, 38, 39,
            ],
            !0,
            30
          )
        );
        e.addBehavior(new t("disable", [0], !0, 30));
        break;
      case "levels":
      case "lmenu":
      case "replay":
        e.addBehavior(new t("out", [0], !0, 1, 0, 0));
        e.addBehavior(new t("over", [1], !0, 1, 0, 0));
        break;
      case "menuMaxi":
      case "menuMini":
        e.addBehavior(new t("out", [0], !0, 1, 0, 0));
        e.addBehavior(new t("over", [1], !0, 1, 0, 0));
        break;
      case "musicMini":
        e.addBehavior(new t("selectEnable", [1], !0, 1, 0, 0));
        e.addBehavior(new t("noSelectEnable", [0], !0, 1, 0, 0));
        e.addBehavior(new t("selectDisable", [2], !0, 1, 0, 0));
        e.addBehavior(new t("noSelectDisable", [3], !0, 1, 0, 0));
        break;
      case "next":
        e.addBehavior(new t("out", [0], !0, 1, 0, 0));
        e.addBehavior(new t("over", [1], !0, 1, 0, 0));
        break;
      case "outLight":
        e.addBehavior(
          new t(
            "enable",
            [
              0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,
              19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29,
            ],
            !0,
            30
          )
        );
        e.addBehavior(new t("disable", [0], !0, 30));
        break;
      case "pig":
        e.addBehavior(new t("normalBox", [0], !0, 1, 0, 0));
        e.addBehavior(new t("jumpBox", [1], !0, 1, 0, 0));
        e.addBehavior(new t("failBox", [2], !0, 1, 0, 0));
        e.addBehavior(new t("toastBox", [3], !0, 1, 0, 0));
        break;
      case "play":
        e.addBehavior(new t("out", [0], !1, 20));
        e.addBehavior(new t("over", [1], !1, 20));
        break;
      case "repulsion":
      case "repulsion2":
        e.addBehavior(new t("normal", [0], !0, 1, 0, 0));
        e.addBehavior(new t("above", [1], !0, 1, 0, 0));
        e.addBehavior(new t("enable", [2], !0, 1, 0, 0));
        break;
      case "restartMaxi":
      case "restartMini":
        e.addBehavior(new t("out", [0], !0, 1, 0, 0));
        e.addBehavior(new t("over", [1], !0, 1, 0, 0));
        break;
      case "roomNumber":
        for (c = 0; 20 > c; )
          (d = c++),
            e.addBehavior(new t(null == d ? "null" : "" + d, [d], !0, 1, 0, 0));
        break;
      case "soundMini":
        e.addBehavior(new t("selectEnable", [1], !0, 1, 0, 0));
        e.addBehavior(new t("noSelectEnable", [0], !0, 1, 0, 0));
        e.addBehavior(new t("selectDisable", [2], !0, 1, 0, 0));
        e.addBehavior(new t("noSelectDisable", [3], !0, 1, 0, 0));
        break;
      case "splash":
        e.addBehavior(new t("enable", [0, 1, 2, 3, 4, 5, 6, 7], !1, 15, 0, 0));
        break;
      case "complAcorn":
      case "star":
        e.addBehavior(new t("0", [0], !0, 1, 0, 0));
        e.addBehavior(new t("1", [1], !0, 1, 0, 0));
        e.addBehavior(new t("2", [2], !0, 1, 0, 0));
        e.addBehavior(new t("3", [3], !0, 1, 0, 0));
        break;
      case "timer16":
        e.addBehavior(new t("0", [0], !0, 1, 0, 0));
        e.addBehavior(new t("1", [1], !0, 1, 0, 0));
        e.addBehavior(new t("2", [2], !0, 1, 0, 0));
        e.addBehavior(new t("3", [3], !0, 1, 0, 0));
        break;
      default:
        e.addBehavior(
          new t("enable", [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], !1, 1, 24, 24)
        );
    }
    e = new y(e, !0);
    e.set_name(a);
    return e;
  };
  k.resizeStage = function (a) {
    ca.trace("resize stage", {
      fileName: "Storage.hx",
      lineNumber: 1274,
      className: "Storage",
      methodName: "resizeStage",
    });
    k.theMenu.set_scaleX(k.W);
    k.theGame.set_scaleX(k.W);
    k.theMenu.set_scaleY(k.H);
    k.theGame.set_scaleY(k.H);
  };
  k.checkUrl = function (a) {
    for (var b = T.get_location().host, c = 0, d = a.length; c < d; ) {
      var e = c++;
      if (-1 != r.__cast(b, String).indexOf(a[e])) return !0;
    }
    return !1;
  };
  k.resumeGame = function () {
    ca.trace("resumeGame " + k.resumeType, {
      fileName: "Storage.hx",
      lineNumber: 1444,
      className: "Storage",
      methodName: "resumeGame",
    });
    switch (k.resumeType) {
      case "icons":
        k.iconsState.goToIcon();
        break;
      case "menu":
        k.menuState.goToPlay();
        break;
      case "restart":
        k.completedState.afterAdsRestart();
        break;
      case "restartPlay":
        k.playState.goToRestartAfter();
        break;
      default:
        k.completedState.afterAdsNext();
    }
  };
  k.showInterstital = function (a) {
    k.resumeType = a;
    C.adsPause = 1 == C.pause ? !0 : !1;
    ca.trace("requestAd show", {
      fileName: "Storage.hx",
      lineNumber: 1483,
      className: "Storage",
      methodName: "showInterstital",
    });
    k.adsInited || (k.adsInited = !0);
    pauseGame();
    Gamezy24SDK.commercialBreak().then(function () {
      resumeGame();
    });
  };
  k.checkSpriteForCommon = function (a) {
    return -1 != k.commonSpriteArray.indexOf(a) ? !0 : !1;
  };
  k.roundBy = function (a, b) {
    return Math.ceil(b * a) / a;
  };
  k.__super__ = wa;
  k.prototype = v(wa.prototype, { __class__: k });
  var wf = function () {
    this.b = "";
  };
  l.StringBuf = wf;
  wf.__name__ = ["StringBuf"];
  wf.prototype = {
    b: null,
    add: function (a) {
      this.b += u.string(a);
    },
    addChar: function (a) {
      this.b += String.fromCharCode(a);
    },
    toString: function () {
      return this.b;
    },
    __class__: wf,
  };
  var J = function () {};
  l.StringTools = J;
  J.__name__ = ["StringTools"];
  J.urlEncode = function (a) {
    return encodeURIComponent(a);
  };
  J.urlDecode = function (a) {
    return decodeURIComponent(a.split("+").join(" "));
  };
  J.htmlEscape = function (a, b) {
    a = a
      .split("&")
      .join("&amp;")
      .split("<")
      .join("&lt;")
      .split(">")
      .join("&gt;");
    return b ? a.split('"').join("&quot;").split("'").join("&#039;") : a;
  };
  J.startsWith = function (a, b) {
    return a.length >= b.length ? S.substr(a, 0, b.length) == b : !1;
  };
  J.endsWith = function (a, b) {
    var c = b.length,
      d = a.length;
    return d >= c ? S.substr(a, d - c, c) == b : !1;
  };
  J.isSpace = function (a, b) {
    a = S.cca(a, b);
    return 8 < a && 14 > a ? !0 : 32 == a;
  };
  J.ltrim = function (a) {
    for (var b = a.length, c = 0; c < b && J.isSpace(a, c); ) ++c;
    return 0 < c ? S.substr(a, c, b - c) : a;
  };
  J.rtrim = function (a) {
    for (var b = a.length, c = 0; c < b && J.isSpace(a, b - c - 1); ) ++c;
    return 0 < c ? S.substr(a, 0, b - c) : a;
  };
  J.trim = function (a) {
    return J.ltrim(J.rtrim(a));
  };
  J.replace = function (a, b, c) {
    return a.split(b).join(c);
  };
  J.hex = function (a, b) {
    for (
      var c = "";
      (c = "0123456789ABCDEF".charAt(a & 15) + c), (a >>>= 4), 0 < a;

    );
    if (null != b) for (; c.length < b; ) c = "0" + c;
    return c;
  };
  J.fastCodeAt = function (a, b) {
    return a.charCodeAt(b);
  };
  J.isEof = function (a) {
    return a != a;
  };
  var Fi = function () {
    this.transporterRolls = [];
  };
  l.TransporterLine = Fi;
  Fi.__name__ = ["TransporterLine"];
  Fi.prototype = { transporterRolls: null, base: null, __class__: Fi };
  var Ca = (l.ValueType = {
    __ename__: ["ValueType"],
    __constructs__:
      "TNull TInt TFloat TBool TObject TFunction TClass TEnum TUnknown".split(
        " "
      ),
  });
  Ca.TNull = ["TNull", 0];
  Ca.TNull.toString = M;
  Ca.TNull.__enum__ = Ca;
  Ca.TInt = ["TInt", 1];
  Ca.TInt.toString = M;
  Ca.TInt.__enum__ = Ca;
  Ca.TFloat = ["TFloat", 2];
  Ca.TFloat.toString = M;
  Ca.TFloat.__enum__ = Ca;
  Ca.TBool = ["TBool", 3];
  Ca.TBool.toString = M;
  Ca.TBool.__enum__ = Ca;
  Ca.TObject = ["TObject", 4];
  Ca.TObject.toString = M;
  Ca.TObject.__enum__ = Ca;
  Ca.TFunction = ["TFunction", 5];
  Ca.TFunction.toString = M;
  Ca.TFunction.__enum__ = Ca;
  Ca.TClass = function (a) {
    a = ["TClass", 6, a];
    a.__enum__ = Ca;
    a.toString = M;
    return a;
  };
  Ca.TEnum = function (a) {
    a = ["TEnum", 7, a];
    a.__enum__ = Ca;
    a.toString = M;
    return a;
  };
  Ca.TUnknown = ["TUnknown", 8];
  Ca.TUnknown.toString = M;
  Ca.TUnknown.__enum__ = Ca;
  var I = function () {};
  l.Type = I;
  I.__name__ = ["Type"];
  I.getClass = function (a) {
    return null == a ? null : r.getClass(a);
  };
  I.getClassName = function (a) {
    a = a.__name__;
    return null == a ? null : a.join(".");
  };
  I.getEnumName = function (a) {
    return a.__ename__.join(".");
  };
  I.resolveClass = function (a) {
    a = l[a];
    return null != a && r.isClass(a) ? a : null;
  };
  I.resolveEnum = function (a) {
    a = l[a];
    return null != a && r.isEnum(a) ? a : null;
  };
  I.createInstance = function (a, b) {
    switch (b.length) {
      case 0:
        return new a();
      case 1:
        return new a(b[0]);
      case 2:
        return new a(b[0], b[1]);
      case 3:
        return new a(b[0], b[1], b[2]);
      case 4:
        return new a(b[0], b[1], b[2], b[3]);
      case 5:
        return new a(b[0], b[1], b[2], b[3], b[4]);
      case 6:
        return new a(b[0], b[1], b[2], b[3], b[4], b[5]);
      case 7:
        return new a(b[0], b[1], b[2], b[3], b[4], b[5], b[6]);
      case 8:
        return new a(b[0], b[1], b[2], b[3], b[4], b[5], b[6], b[7]);
      case 9:
        return new a(b[0], b[1], b[2], b[3], b[4], b[5], b[6], b[7], b[8]);
      case 10:
        return new a(
          b[0],
          b[1],
          b[2],
          b[3],
          b[4],
          b[5],
          b[6],
          b[7],
          b[8],
          b[9]
        );
      case 11:
        return new a(
          b[0],
          b[1],
          b[2],
          b[3],
          b[4],
          b[5],
          b[6],
          b[7],
          b[8],
          b[9],
          b[10]
        );
      case 12:
        return new a(
          b[0],
          b[1],
          b[2],
          b[3],
          b[4],
          b[5],
          b[6],
          b[7],
          b[8],
          b[9],
          b[10],
          b[11]
        );
      case 13:
        return new a(
          b[0],
          b[1],
          b[2],
          b[3],
          b[4],
          b[5],
          b[6],
          b[7],
          b[8],
          b[9],
          b[10],
          b[11],
          b[12]
        );
      case 14:
        return new a(
          b[0],
          b[1],
          b[2],
          b[3],
          b[4],
          b[5],
          b[6],
          b[7],
          b[8],
          b[9],
          b[10],
          b[11],
          b[12],
          b[13]
        );
      default:
        throw new G("Too many arguments");
    }
  };
  I.createEmptyInstance = function (a) {
    function b() {}
    b.prototype = a.prototype;
    return new b();
  };
  I.createEnum = function (a, b, c) {
    var d = A.field(a, b);
    if (null == d) throw new G("No such constructor " + b);
    if (A.isFunction(d)) {
      if (null == c) throw new G("Constructor " + b + " need parameters");
      return A.callMethod(a, d, c);
    }
    if (null != c && 0 != c.length)
      throw new G("Constructor " + b + " does not need parameters");
    return d;
  };
  I.getInstanceFields = function (a) {
    var b = [],
      c;
    for (c in a.prototype) b.push(c);
    S.remove(b, "__class__");
    S.remove(b, "__properties__");
    return b;
  };
  I.getEnumConstructs = function (a) {
    return a.__constructs__.slice();
  };
  I["typeof"] = function (a) {
    switch (typeof a) {
      case "boolean":
        return Ca.TBool;
      case "function":
        return r.isClass(a) || r.isEnum(a) ? Ca.TObject : Ca.TFunction;
      case "number":
        return Math.ceil(a) == a % 2147483648 ? Ca.TInt : Ca.TFloat;
      case "object":
        if (null == a) return Ca.TNull;
        var b = a.__enum__;
        if (null != b) return Ca.TEnum(b);
        a = r.getClass(a);
        return null != a ? Ca.TClass(a) : Ca.TObject;
      case "string":
        return Ca.TClass(String);
      case "undefined":
        return Ca.TNull;
      default:
        return Ca.TUnknown;
    }
  };
  I.enumIndex = function (a) {
    return a[1];
  };
  var Mb = {};
  l["_UInt.UInt_Impl_"] = Mb;
  Mb.__name__ = ["_UInt", "UInt_Impl_"];
  Mb.gt = function (a, b) {
    var c = 0 > a;
    return c != 0 > b ? c : a > b;
  };
  Mb.toFloat = function (a) {
    return 0 > a ? 4294967296 + a : a + 0;
  };
  var Ee = function () {};
  l.Utils = Ee;
  Ee.__name__ = ["Utils"];
  Ee.setTint = function (a, b) {
    var c = u["int"](a >> 16) & 255,
      d = u["int"](a >> 8) & 255;
    return new Ka(
      b,
      b,
      b,
      1,
      Math.round(c * b),
      Math.round(d * b),
      Math.round((a & 255) * b),
      0
    );
  };
  var Sb = (l["haxe.StackItem"] = {
    __ename__: ["haxe", "StackItem"],
    __constructs__: [
      "CFunction",
      "Module",
      "FilePos",
      "Method",
      "LocalFunction",
    ],
  });
  Sb.CFunction = ["CFunction", 0];
  Sb.CFunction.toString = M;
  Sb.CFunction.__enum__ = Sb;
  Sb.Module = function (a) {
    a = ["Module", 1, a];
    a.__enum__ = Sb;
    a.toString = M;
    return a;
  };
  Sb.FilePos = function (a, b, c) {
    a = ["FilePos", 2, a, b, c];
    a.__enum__ = Sb;
    a.toString = M;
    return a;
  };
  Sb.Method = function (a, b) {
    a = ["Method", 3, a, b];
    a.__enum__ = Sb;
    a.toString = M;
    return a;
  };
  Sb.LocalFunction = function (a) {
    a = ["LocalFunction", 4, a];
    a.__enum__ = Sb;
    a.toString = M;
    return a;
  };
  var ta = function () {};
  l["haxe.CallStack"] = ta;
  ta.__name__ = ["haxe", "CallStack"];
  ta.getStack = function (a) {
    if (null == a) return [];
    var b = Error.prepareStackTrace;
    Error.prepareStackTrace = function (a, b) {
      a = [];
      for (var c = 0; c < b.length; ) {
        var d = b[c];
        ++c;
        null != ta.wrapCallSite && (d = ta.wrapCallSite(d));
        var g = null,
          h = d.getFunctionName();
        if (null != h) {
          var n = h.lastIndexOf(".");
          0 <= n &&
            ((g = S.substr(h, 0, n)),
            (h = S.substr(h, n + 1, null)),
            (g = Sb.Method(g, h)));
        }
        a.push(Sb.FilePos(g, d.getFileName(), d.getLineNumber()));
      }
      return a;
    };
    a = ta.makeStack(a.stack);
    Error.prepareStackTrace = b;
    return a;
  };
  ta.callStack = function () {
    try {
      throw Error();
    } catch (b) {
      ta.lastException = b;
      b instanceof G && (b = b.val);
      var a = ta.getStack(b);
      a.shift();
      return a;
    }
  };
  ta.exceptionStack = function () {
    return ta.getStack(ta.lastException);
  };
  ta.toString = function (a) {
    for (var b = new wf(), c = 0; c < a.length; ) {
      var d = a[c];
      ++c;
      b.add("\nCalled from ");
      ta.itemToString(b, d);
    }
    return b.toString();
  };
  ta.itemToString = function (a, b) {
    switch (I.enumIndex(b)) {
      case 0:
        a.add("a C function");
        break;
      case 1:
        b = b[2];
        a.add("module ");
        a.add(b);
        break;
      case 2:
        var c = b[4],
          d = b[3];
        b = b[2];
        null != b && (ta.itemToString(a, b), a.add(" ("));
        a.add(d);
        a.add(" line ");
        a.add(c);
        null != b && a.add(")");
        break;
      case 3:
        c = b[3];
        a.add(b[2]);
        a.add(".");
        a.add(c);
        break;
      case 4:
        (b = b[2]), a.add("local function #"), a.add(b);
    }
  };
  ta.makeStack = function (a) {
    if (null == a) return [];
    if ("string" == typeof a) {
      a = a.split("\n");
      "Error" == a[0] && a.shift();
      for (
        var b = [],
          c = new pa(
            "^   at ([A-Za-z0-9_. ]+) \\(([^)]+):([0-9]+):([0-9]+)\\)$",
            ""
          ),
          d = 0;
        d < a.length;

      ) {
        var e = a[d];
        ++d;
        if (c.match(e)) {
          e = c.matched(1).split(".");
          var f = e.pop(),
            g = c.matched(2),
            h = u.parseInt(c.matched(3));
          b.push(
            Sb.FilePos(
              "Anonymous function" == f
                ? Sb.LocalFunction()
                : "Global code" == f
                ? null
                : Sb.Method(e.join("."), f),
              g,
              h
            )
          );
        } else b.push(Sb.Module(J.trim(e)));
      }
      return b;
    }
    return a;
  };
  var ka = function (a, b) {
    this.high = a;
    this.low = b;
  };
  l["haxe._Int64.___Int64"] = ka;
  ka.__name__ = ["haxe", "_Int64", "___Int64"];
  ka.prototype = { high: null, low: null, __class__: ka };
  var ca = function () {};
  l["haxe.Log"] = ca;
  ca.__name__ = ["haxe", "Log"];
  ca.trace = function (a, b) {
    r.__trace(a, b);
  };
  var gc = function () {
    this.buf = new wf();
    this.cache = [];
    this.useCache = gc.USE_CACHE;
    this.useEnumIndex = gc.USE_ENUM_INDEX;
    this.shash = new sa();
    this.scount = 0;
  };
  l["haxe.Serializer"] = gc;
  gc.__name__ = ["haxe", "Serializer"];
  gc.run = function (a) {
    var b = new gc();
    b.serialize(a);
    return b.toString();
  };
  gc.prototype = {
    buf: null,
    cache: null,
    shash: null,
    scount: null,
    useCache: null,
    useEnumIndex: null,
    toString: function () {
      return this.buf.toString();
    },
    serializeString: function (a) {
      var b = this.shash.get(a);
      null != b
        ? (this.buf.add("R"), this.buf.add(b))
        : (this.shash.set(a, this.scount++),
          this.buf.add("y"),
          (a = J.urlEncode(a)),
          this.buf.add(a.length),
          this.buf.add(":"),
          this.buf.add(a));
    },
    serializeRef: function (a) {
      for (var b = typeof a, c = 0, d = this.cache.length; c < d; ) {
        var e = c++,
          f = this.cache[e];
        if (typeof f == b && f == a)
          return this.buf.add("r"), this.buf.add(e), !0;
      }
      this.cache.push(a);
      return !1;
    },
    serializeFields: function (a) {
      for (var b = 0, c = A.fields(a); b < c.length; ) {
        var d = c[b];
        ++b;
        this.serializeString(d);
        this.serialize(A.field(a, d));
      }
      this.buf.add("g");
    },
    serialize: function (a) {
      var b = I["typeof"](a);
      switch (I.enumIndex(b)) {
        case 0:
          this.buf.add("n");
          break;
        case 1:
          if (0 == a) {
            this.buf.add("z");
            break;
          }
          this.buf.add("i");
          this.buf.add(a);
          break;
        case 2:
          isNaN(a)
            ? this.buf.add("k")
            : isFinite(a)
            ? (this.buf.add("d"), this.buf.add(a))
            : this.buf.add(0 > a ? "m" : "p");
          break;
        case 3:
          this.buf.add(a ? "t" : "f");
          break;
        case 4:
          u.is(a, ql)
            ? ((a = I.getClassName(a)),
              this.buf.add("A"),
              this.serializeString(a))
            : u.is(a, tl)
            ? (this.buf.add("B"), this.serializeString(I.getEnumName(a)))
            : (this.useCache && this.serializeRef(a)) ||
              (this.buf.add("o"), this.serializeFields(a));
          break;
        case 5:
          throw new G("Cannot serialize function");
        case 6:
          b = b[2];
          if (b == String) {
            this.serializeString(a);
            break;
          }
          if (this.useCache && this.serializeRef(a)) break;
          switch (b) {
            case Array:
              b = 0;
              this.buf.add("a");
              for (var c = 0, d = a.length; c < d; ) {
                var e = c++;
                null == a[e]
                  ? ++b
                  : (0 < b &&
                      (1 == b
                        ? this.buf.add("n")
                        : (this.buf.add("u"), this.buf.add(b)),
                      (b = 0)),
                    this.serialize(a[e]));
              }
              0 < b &&
                (1 == b
                  ? this.buf.add("n")
                  : (this.buf.add("u"), this.buf.add(b)));
              this.buf.add("h");
              break;
            case Date:
              this.buf.add("v");
              this.buf.add(a.getTime());
              break;
            case bd:
              this.buf.add("l");
              for (a = a.iterator(); a.hasNext(); )
                (b = a.next()), this.serialize(b);
              this.buf.add("h");
              break;
            case mb:
              this.buf.add("q");
              for (b = a.keys(); b.hasNext(); )
                (c = b.next()),
                  this.buf.add(":"),
                  this.buf.add(c),
                  this.serialize(a.get(c));
              this.buf.add("h");
              break;
            case ib:
              this.buf.add("M");
              for (b = a.keys(); b.hasNext(); )
                (c = b.next()),
                  (d = A.field(c, "__id__")),
                  A.deleteField(c, "__id__"),
                  this.serialize(c),
                  A.setField(c, "__id__", d),
                  this.serialize(a.get(c));
              this.buf.add("h");
              break;
            case sa:
              this.buf.add("b");
              for (b = a.keys(); b.hasNext(); )
                (c = b.next()),
                  this.serializeString(c),
                  this.serialize(a.get(c));
              this.buf.add("h");
              break;
            case eb:
              this.buf.add("s");
              this.buf.add(Math.ceil((8 * a.length) / 6));
              this.buf.add(":");
              c = 0;
              d = a.length - 2;
              b = gc.BASE64_CODES;
              if (null == b) {
                b = Array(gc.BASE64.length);
                e = 0;
                for (var f = gc.BASE64.length; e < f; ) {
                  var g = e++;
                  b[g] = S.cca(gc.BASE64, g);
                }
                gc.BASE64_CODES = b;
              }
              for (; c < d; )
                (e = a.get(c++)),
                  (f = a.get(c++)),
                  (g = a.get(c++)),
                  this.buf.addChar(b[e >> 2]),
                  this.buf.addChar(b[((e << 4) | (f >> 4)) & 63]),
                  this.buf.addChar(b[((f << 2) | (g >> 6)) & 63]),
                  this.buf.addChar(b[g & 63]);
              c == d
                ? ((d = a.get(c++)),
                  (a = a.get(c++)),
                  this.buf.addChar(b[d >> 2]),
                  this.buf.addChar(b[((d << 4) | (a >> 4)) & 63]),
                  this.buf.addChar(b[(a << 2) & 63]))
                : c == d + 1 &&
                  ((a = a.get(c++)),
                  this.buf.addChar(b[a >> 2]),
                  this.buf.addChar(b[(a << 4) & 63]));
              break;
            default:
              this.useCache && this.cache.pop(),
                null != a.hxSerialize
                  ? (this.buf.add("C"),
                    this.serializeString(I.getClassName(b)),
                    this.useCache && this.cache.push(a),
                    a.hxSerialize(this),
                    this.buf.add("g"))
                  : (this.buf.add("c"),
                    this.serializeString(I.getClassName(b)),
                    this.useCache && this.cache.push(a),
                    this.serializeFields(a));
          }
          break;
        case 7:
          b = b[2];
          if (this.useCache) {
            if (this.serializeRef(a)) break;
            this.cache.pop();
          }
          this.buf.add(this.useEnumIndex ? "j" : "w");
          this.serializeString(I.getEnumName(b));
          this.useEnumIndex
            ? (this.buf.add(":"), this.buf.add(a[1]))
            : this.serializeString(a[0]);
          this.buf.add(":");
          b = a.length;
          this.buf.add(b - 2);
          for (c = 2; c < b; ) (d = c++), this.serialize(a[d]);
          this.useCache && this.cache.push(a);
          break;
        default:
          throw new G("Cannot serialize " + u.string(a));
      }
    },
    __class__: gc,
  };
  var Fe = function (a) {
    var b = this;
    this.id = setInterval(function () {
      b.run();
    }, a);
  };
  l["haxe.Timer"] = Fe;
  Fe.__name__ = ["haxe", "Timer"];
  Fe.delay = function (a, b) {
    var c = new Fe(b);
    c.run = function () {
      c.stop();
      a();
    };
    return c;
  };
  Fe.stamp = function () {
    return new Date().getTime() / 1e3;
  };
  Fe.prototype = {
    id: null,
    stop: function () {
      null != this.id && (clearInterval(this.id), (this.id = null));
    },
    run: function () {},
    __class__: Fe,
  };
  var fh = function () {};
  l["haxe._Unserializer.DefaultResolver"] = fh;
  fh.__name__ = ["haxe", "_Unserializer", "DefaultResolver"];
  fh.prototype = {
    resolveClass: function (a) {
      return I.resolveClass(a);
    },
    resolveEnum: function (a) {
      return I.resolveEnum(a);
    },
    __class__: fh,
  };
  var hc = function (a) {
    this.buf = a;
    this.length = a.length;
    this.pos = 0;
    this.scache = [];
    this.cache = [];
    a = hc.DEFAULT_RESOLVER;
    null == a && ((a = new fh()), (hc.DEFAULT_RESOLVER = a));
    this.resolver = a;
  };
  l["haxe.Unserializer"] = hc;
  hc.__name__ = ["haxe", "Unserializer"];
  hc.initCodes = function () {
    for (var a = [], b = 0, c = hc.BASE64.length; b < c; ) {
      var d = b++;
      a[J.fastCodeAt(hc.BASE64, d)] = d;
    }
    return a;
  };
  hc.run = function (a) {
    return new hc(a).unserialize();
  };
  hc.prototype = {
    buf: null,
    pos: null,
    length: null,
    cache: null,
    scache: null,
    resolver: null,
    setResolver: function (a) {
      this.resolver = null == a ? cf.get_instance() : a;
    },
    get: function (a) {
      return J.fastCodeAt(this.buf, a);
    },
    readDigits: function () {
      for (var a = 0, b = !1, c = this.pos; ; ) {
        var d = this.get(this.pos);
        if (J.isEof(d)) break;
        if (45 == d) {
          if (this.pos != c) break;
          b = !0;
        } else {
          if (48 > d || 57 < d) break;
          a = 10 * a + (d - 48);
        }
        this.pos++;
      }
      b && (a *= -1);
      return a;
    },
    readFloat: function () {
      for (var a = this.pos; ; ) {
        var b = this.get(this.pos);
        if (J.isEof(b)) break;
        if ((43 <= b && 58 > b) || 101 == b || 69 == b) this.pos++;
        else break;
      }
      return u.parseFloat(S.substr(this.buf, a, this.pos - a));
    },
    unserializeObject: function (a) {
      for (;;) {
        if (this.pos >= this.length) throw new G("Invalid object");
        if (103 == this.get(this.pos)) break;
        var b = this.unserialize();
        if ("string" != typeof b) throw new G("Invalid object key");
        var c = this.unserialize();
        A.setField(a, b, c);
      }
      this.pos++;
    },
    unserializeEnum: function (a, b) {
      if (58 != this.get(this.pos++)) throw new G("Invalid enum format");
      var c = this.readDigits();
      if (0 == c) return I.createEnum(a, b);
      for (var d = []; 0 < c--; ) d.push(this.unserialize());
      return I.createEnum(a, b, d);
    },
    unserialize: function () {
      switch (this.get(this.pos++)) {
        case 65:
          var a = this.unserialize(),
            b = this.resolver.resolveClass(a);
          if (null == b) throw new G("Class not found " + a);
          return b;
        case 66:
          a = this.unserialize();
          b = this.resolver.resolveEnum(a);
          if (null == b) throw new G("Enum not found " + a);
          return b;
        case 67:
          a = this.unserialize();
          b = this.resolver.resolveClass(a);
          if (null == b) throw new G("Class not found " + a);
          a = I.createEmptyInstance(b);
          this.cache.push(a);
          a.hxUnserialize(this);
          if (103 != this.get(this.pos++)) throw new G("Invalid custom data");
          return a;
        case 77:
          a = new ib();
          for (this.cache.push(a); 104 != this.get(this.pos); )
            (b = this.unserialize()), a.set(b, this.unserialize());
          this.pos++;
          return a;
        case 82:
          a = this.readDigits();
          if (0 > a || a >= this.scache.length)
            throw new G("Invalid string reference");
          return this.scache[a];
        case 97:
          a = [];
          for (this.cache.push(a); ; ) {
            b = this.get(this.pos);
            if (104 == b) {
              this.pos++;
              break;
            }
            117 == b
              ? (this.pos++,
                (b = this.readDigits()),
                (a[a.length + b - 1] = null))
              : a.push(this.unserialize());
          }
          return a;
        case 98:
          a = new sa();
          for (this.cache.push(a); 104 != this.get(this.pos); )
            (b = this.unserialize()), a.set(b, this.unserialize());
          this.pos++;
          return a;
        case 99:
          a = this.unserialize();
          b = this.resolver.resolveClass(a);
          if (null == b) throw new G("Class not found " + a);
          a = I.createEmptyInstance(b);
          this.cache.push(a);
          this.unserializeObject(a);
          return a;
        case 100:
          return this.readFloat();
        case 102:
          return !1;
        case 105:
          return this.readDigits();
        case 106:
          a = this.unserialize();
          b = this.resolver.resolveEnum(a);
          if (null == b) throw new G("Enum not found " + a);
          this.pos++;
          var c = this.readDigits(),
            d = I.getEnumConstructs(b)[c];
          if (null == d) throw new G("Unknown enum index " + a + "@" + c);
          a = this.unserializeEnum(b, d);
          this.cache.push(a);
          return a;
        case 107:
          return NaN;
        case 108:
          a = new bd();
          for (this.cache.push(a); 104 != this.get(this.pos); )
            a.add(this.unserialize());
          this.pos++;
          return a;
        case 109:
          return -Infinity;
        case 110:
          return null;
        case 111:
          return (a = {}), this.cache.push(a), this.unserializeObject(a), a;
        case 112:
          return Infinity;
        case 113:
          a = new mb();
          this.cache.push(a);
          for (b = this.get(this.pos++); 58 == b; )
            (b = this.readDigits()),
              a.set(b, this.unserialize()),
              (b = this.get(this.pos++));
          if (104 != b) throw new G("Invalid IntMap format");
          return a;
        case 114:
          a = this.readDigits();
          if (0 > a || a >= this.cache.length) throw new G("Invalid reference");
          return this.cache[a];
        case 115:
          a = this.readDigits();
          d = this.buf;
          if (58 != this.get(this.pos++) || this.length - this.pos < a)
            throw new G("Invalid bytes length");
          var e = hc.CODES;
          null == e && ((e = hc.initCodes()), (hc.CODES = e));
          var f = this.pos,
            g = a & 3,
            h = f + (a - g);
          b = eb.alloc(3 * (a >> 2) + (2 <= g ? g - 1 : 0));
          for (c = 0; f < h; ) {
            var n = e[J.fastCodeAt(d, f++)],
              p = e[J.fastCodeAt(d, f++)];
            b.set(c++, (n << 2) | (p >> 4));
            n = e[J.fastCodeAt(d, f++)];
            b.set(c++, (p << 4) | (n >> 2));
            p = e[J.fastCodeAt(d, f++)];
            b.set(c++, (n << 6) | p);
          }
          2 <= g &&
            ((p = e[J.fastCodeAt(d, f++)]),
            (h = e[J.fastCodeAt(d, f++)]),
            b.set(c++, (p << 2) | (h >> 4)),
            3 == g &&
              ((d = e[J.fastCodeAt(d, f++)]), b.set(c++, (h << 4) | (d >> 2))));
          this.pos += a;
          this.cache.push(b);
          return b;
        case 116:
          return !0;
        case 118:
          return (
            48 <= this.get(this.pos) &&
            57 >= this.get(this.pos) &&
            48 <= this.get(this.pos + 1) &&
            57 >= this.get(this.pos + 1) &&
            48 <= this.get(this.pos + 2) &&
            57 >= this.get(this.pos + 2) &&
            48 <= this.get(this.pos + 3) &&
            57 >= this.get(this.pos + 3) &&
            45 == this.get(this.pos + 4)
              ? ((a = S.strDate(S.substr(this.buf, this.pos, 19))),
                (this.pos += 19))
              : ((a = this.readFloat()), (a = new Date(a))),
            this.cache.push(a),
            a
          );
        case 119:
          a = this.unserialize();
          b = this.resolver.resolveEnum(a);
          if (null == b) throw new G("Enum not found " + a);
          a = this.unserializeEnum(b, this.unserialize());
          this.cache.push(a);
          return a;
        case 120:
          throw G.wrap(this.unserialize());
        case 121:
          a = this.readDigits();
          if (58 != this.get(this.pos++) || this.length - this.pos < a)
            throw new G("Invalid string length");
          b = S.substr(this.buf, this.pos, a);
          this.pos += a;
          b = J.urlDecode(b);
          this.scache.push(b);
          return b;
        case 122:
          return 0;
      }
      this.pos--;
      throw new G(
        "Invalid char " + this.buf.charAt(this.pos) + " at position " + this.pos
      );
    },
    __class__: hc,
  };
  var cf = function () {};
  l["haxe._Unserializer.NullResolver"] = cf;
  cf.__name__ = ["haxe", "_Unserializer", "NullResolver"];
  cf.__properties__ = { get_instance: "get_instance" };
  cf.get_instance = function () {
    null == cf.instance && (cf.instance = new cf());
    return cf.instance;
  };
  cf.prototype = {
    resolveClass: function (a) {
      return null;
    },
    resolveEnum: function (a) {
      return null;
    },
    __class__: cf,
  };
  var qg = function (a) {
    this.__b = "";
  };
  l["haxe.Utf8"] = qg;
  qg.__name__ = ["haxe", "Utf8"];
  qg.sub = function (a, b, c) {
    return S.substr(a, b, c);
  };
  qg.prototype = {
    __b: null,
    addChar: function (a) {
      this.__b += String.fromCharCode(a);
    },
    toString: function () {
      return this.__b;
    },
    __class__: qg,
  };
  var eb = function (a) {
    this.length = a.byteLength;
    this.b = new dd(a);
    this.b.bufferValue = a;
    a.hxBytes = this;
    a.bytes = this.b;
  };
  l["haxe.io.Bytes"] = eb;
  eb.__name__ = ["haxe", "io", "Bytes"];
  eb.alloc = function (a) {
    return new eb(new Ii(a));
  };
  eb.ofString = function (a) {
    for (var b = [], c = 0; c < a.length; ) {
      var d = J.fastCodeAt(a, c++);
      55296 <= d &&
        56319 >= d &&
        (d = ((d - 55232) << 10) | (J.fastCodeAt(a, c++) & 1023));
      127 >= d
        ? b.push(d)
        : (2047 >= d
            ? b.push(192 | (d >> 6))
            : (65535 >= d
                ? b.push(224 | (d >> 12))
                : (b.push(240 | (d >> 18)), b.push(128 | ((d >> 12) & 63))),
              b.push(128 | ((d >> 6) & 63))),
          b.push(128 | (d & 63)));
    }
    return new eb(new dd(b).buffer);
  };
  eb.ofData = function (a) {
    var b = a.hxBytes;
    return null != b ? b : new eb(a);
  };
  eb.fastGet = function (a, b) {
    return a.bytes[b];
  };
  eb.prototype = {
    length: null,
    b: null,
    data: null,
    get: function (a) {
      return this.b[a];
    },
    set: function (a, b) {
      this.b[a] = b & 255;
    },
    blit: function (a, b, c, d) {
      if (0 > a || 0 > c || 0 > d || a + d > this.length || c + d > b.length)
        throw new G(Bc.OutsideBounds);
      0 == c && d == b.b.byteLength
        ? this.b.set(b.b, a)
        : this.b.set(b.b.subarray(c, c + d), a);
    },
    getString: function (a, b) {
      if (0 > a || 0 > b || a + b > this.length) throw new G(Bc.OutsideBounds);
      var c = "",
        d = this.b,
        e = String.fromCharCode,
        f = a;
      for (a += b; f < a; )
        if (((b = d[f++]), 128 > b)) {
          if (0 == b) break;
          c += e(b);
        } else if (224 > b) c += e(((b & 63) << 6) | (d[f++] & 127));
        else if (240 > b) {
          var g = d[f++];
          c += e(((b & 31) << 12) | ((g & 127) << 6) | (d[f++] & 127));
        } else {
          g = d[f++];
          var h = d[f++];
          b =
            ((b & 15) << 18) |
            ((g & 127) << 12) |
            ((h & 127) << 6) |
            (d[f++] & 127);
          c += e((b >> 10) + 55232);
          c += e((b & 1023) | 56320);
        }
      return c;
    },
    toString: function () {
      return this.getString(0, this.length);
    },
    getData: function () {
      return this.b.bufferValue;
    },
    __class__: eb,
  };
  var df = function () {};
  l["haxe.crypto.Base64"] = df;
  df.__name__ = ["haxe", "crypto", "Base64"];
  df.encode = function (a, b) {
    null == b && (b = !0);
    var c = new Zf(df.BYTES).encodeBytes(a).toString();
    if (b)
      switch (a.length % 3) {
        case 1:
          c += "==";
          break;
        case 2:
          c += "=";
      }
    return c;
  };
  df.decode = function (a, b) {
    null == b && (b = !0);
    if (b) for (; 61 == S.cca(a, a.length - 1); ) a = S.substr(a, 0, -1);
    return new Zf(df.BYTES).decodeBytes(eb.ofString(a));
  };
  var Zf = function (a) {
    for (var b = a.length, c = 1; b > 1 << c; ) ++c;
    if (8 < c || b != 1 << c)
      throw new G("BaseCode : base length must be a power of two.");
    this.base = a;
    this.nbits = c;
  };
  l["haxe.crypto.BaseCode"] = Zf;
  Zf.__name__ = ["haxe", "crypto", "BaseCode"];
  Zf.prototype = {
    base: null,
    nbits: null,
    tbl: null,
    encodeBytes: function (a) {
      for (
        var b = this.nbits,
          c = this.base,
          d = u["int"]((8 * a.length) / b),
          e = eb.alloc(d + (0 == (8 * a.length) % b ? 0 : 1)),
          f = 0,
          g = 0,
          h = (1 << b) - 1,
          n = 0,
          p = 0;
        p < d;

      ) {
        for (; g < b; ) (g += 8), (f <<= 8), (f |= a.get(n++));
        g -= b;
        e.set(p++, c.get((f >> g) & h));
      }
      0 < g && e.set(p++, c.get((f << (b - g)) & h));
      return e;
    },
    initTable: function () {
      for (var a = [], b = 0; 256 > b; ) {
        var c = b++;
        a[c] = -1;
      }
      b = 0;
      for (c = this.base.length; b < c; ) {
        var d = b++;
        a[this.base.get(d)] = d;
      }
      this.tbl = a;
    },
    decodeBytes: function (a) {
      var b = this.nbits;
      null == this.tbl && this.initTable();
      for (
        var c = this.tbl,
          d = (a.length * b) >> 3,
          e = eb.alloc(d),
          f = 0,
          g = 0,
          h = 0,
          n = 0;
        n < d;

      ) {
        for (; 8 > g; ) {
          g += b;
          f <<= b;
          var p = c[a.get(h++)];
          if (-1 == p) throw new G("BaseCode : invalid encoded char");
          f |= p;
        }
        g -= 8;
        e.set(n++, (f >> g) & 255);
      }
      return e;
    },
    __class__: Zf,
  };
  var mb = function () {
    this.h = {};
  };
  l["haxe.ds.IntMap"] = mb;
  mb.__name__ = ["haxe", "ds", "IntMap"];
  mb.__interfaces__ = [Hf];
  mb.prototype = {
    h: null,
    set: function (a, b) {
      this.h[a] = b;
    },
    get: function (a) {
      return this.h[a];
    },
    exists: function (a) {
      return this.h.hasOwnProperty(a);
    },
    remove: function (a) {
      if (!this.h.hasOwnProperty(a)) return !1;
      delete this.h[a];
      return !0;
    },
    keys: function () {
      var a = [],
        b;
      for (b in this.h) this.h.hasOwnProperty(b) && a.push(b | 0);
      return S.iter(a);
    },
    iterator: function () {
      return {
        ref: this.h,
        it: this.keys(),
        hasNext: function () {
          return this.it.hasNext();
        },
        next: function () {
          var a = this.it.next();
          return this.ref[a];
        },
      };
    },
    __class__: mb,
  };
  var Ji = function (a, b) {
    this.map = a;
    this.keys = b;
    this.index = 0;
    this.count = b.length;
  };
  l["haxe.ds._StringMap.StringMapIterator"] = Ji;
  Ji.__name__ = ["haxe", "ds", "_StringMap", "StringMapIterator"];
  Ji.prototype = {
    map: null,
    keys: null,
    index: null,
    count: null,
    hasNext: function () {
      return this.index < this.count;
    },
    next: function () {
      return this.map.get(this.keys[this.index++]);
    },
    __class__: Ji,
  };
  var sa = function () {
    this.h = {};
  };
  l["haxe.ds.StringMap"] = sa;
  sa.__name__ = ["haxe", "ds", "StringMap"];
  sa.__interfaces__ = [Hf];
  sa.prototype = {
    h: null,
    rh: null,
    isReserved: function (a) {
      return null != Ll[a];
    },
    set: function (a, b) {
      this.isReserved(a) ? this.setReserved(a, b) : (this.h[a] = b);
    },
    get: function (a) {
      return this.isReserved(a) ? this.getReserved(a) : this.h[a];
    },
    exists: function (a) {
      return this.isReserved(a)
        ? this.existsReserved(a)
        : this.h.hasOwnProperty(a);
    },
    setReserved: function (a, b) {
      null == this.rh && (this.rh = {});
      this.rh["$" + a] = b;
    },
    getReserved: function (a) {
      return null == this.rh ? null : this.rh["$" + a];
    },
    existsReserved: function (a) {
      return null == this.rh ? !1 : this.rh.hasOwnProperty("$" + a);
    },
    remove: function (a) {
      if (this.isReserved(a)) {
        a = "$" + a;
        if (null == this.rh || !this.rh.hasOwnProperty(a)) return !1;
        delete this.rh[a];
      } else {
        if (!this.h.hasOwnProperty(a)) return !1;
        delete this.h[a];
      }
      return !0;
    },
    keys: function () {
      return S.iter(this.arrayKeys());
    },
    arrayKeys: function () {
      var a = [],
        b;
      for (b in this.h) this.h.hasOwnProperty(b) && a.push(b);
      if (null != this.rh)
        for (b in this.rh) 36 == b.charCodeAt(0) && a.push(b.substr(1));
      return a;
    },
    iterator: function () {
      return new Ji(this, this.arrayKeys());
    },
    __class__: sa,
  };
  var Bk = function () {};
  l["haxe.io.Eof"] = Bk;
  Bk.__name__ = ["haxe", "io", "Eof"];
  Bk.prototype = {
    toString: function () {
      return "Eof";
    },
    __class__: Bk,
  };
  var Bc = (l["haxe.io.Error"] = {
    __ename__: ["haxe", "io", "Error"],
    __constructs__: ["Blocked", "Overflow", "OutsideBounds", "Custom"],
  });
  Bc.Blocked = ["Blocked", 0];
  Bc.Blocked.toString = M;
  Bc.Blocked.__enum__ = Bc;
  Bc.Overflow = ["Overflow", 1];
  Bc.Overflow.toString = M;
  Bc.Overflow.__enum__ = Bc;
  Bc.OutsideBounds = ["OutsideBounds", 2];
  Bc.OutsideBounds.toString = M;
  Bc.OutsideBounds.__enum__ = Bc;
  Bc.Custom = function (a) {
    a = ["Custom", 3, a];
    a.__enum__ = Bc;
    a.toString = M;
    return a;
  };
  var Cc = function () {};
  l["haxe.io.FPHelper"] = Cc;
  Cc.__name__ = ["haxe", "io", "FPHelper"];
  Cc.i32ToFloat = function (a) {
    var b = (a >>> 23) & 255,
      c = a & 8388607;
    return 0 == c && 0 == b
      ? 0
      : (1 - ((a >>> 31) << 1)) *
          (1 + Math.pow(2, -23) * c) *
          Math.pow(2, b - 127);
  };
  Cc.floatToI32 = function (a) {
    if (0 == a) return 0;
    var b = 0 > a ? -a : a,
      c = Math.floor(Math.log(b) / 0.6931471805599453);
    -127 > c ? (c = -127) : 128 < c && (c = 128);
    b = Math.round(8388608 * (b / Math.pow(2, c) - 1));
    8388608 == b && 128 > c && ((b = 0), ++c);
    return (0 > a ? -2147483648 : 0) | ((c + 127) << 23) | b;
  };
  Cc.i64ToDouble = function (a, b) {
    var c = ((b >> 20) & 2047) - 1023;
    a = 4294967296 * (b & 1048575) + 2147483648 * (a >>> 31) + (a & 2147483647);
    return 0 == a && -1023 == c
      ? 0
      : (1 - ((b >>> 31) << 1)) * (1 + Math.pow(2, -52) * a) * Math.pow(2, c);
  };
  Cc.doubleToI64 = function (a) {
    var b = Cc.i64tmp;
    if (0 == a) (b.low = 0), (b.high = 0);
    else if (isFinite(a)) {
      var c = 0 > a ? -a : a,
        d = Math.floor(Math.log(c) / 0.6931471805599453),
        e = Math.round(4503599627370496 * (c / Math.pow(2, d) - 1));
      c = u["int"](e);
      e = u["int"](e / 4294967296);
      b.low = c;
      b.high = (0 > a ? -2147483648 : 0) | ((d + 1023) << 20) | e;
    } else
      0 < a
        ? ((b.low = 0), (b.high = 2146435072))
        : ((b.low = 0), (b.high = -1048576));
    return b;
  };
  var rg = function (a) {
    switch (a) {
      case ".":
      case "..":
        this.dir = a;
        this.file = "";
        return;
    }
    var b = a.lastIndexOf("/"),
      c = a.lastIndexOf("\\");
    b < c
      ? ((this.dir = S.substr(a, 0, c)),
        (a = S.substr(a, c + 1, null)),
        (this.backslash = !0))
      : c < b
      ? ((this.dir = S.substr(a, 0, b)), (a = S.substr(a, b + 1, null)))
      : (this.dir = null);
    b = a.lastIndexOf(".");
    -1 != b
      ? ((this.ext = S.substr(a, b + 1, null)), (this.file = S.substr(a, 0, b)))
      : ((this.ext = null), (this.file = a));
  };
  l["haxe.io.Path"] = rg;
  rg.__name__ = ["haxe", "io", "Path"];
  rg.directory = function (a) {
    a = new rg(a);
    return null == a.dir ? "" : a.dir;
  };
  rg.prototype = {
    dir: null,
    file: null,
    ext: null,
    backslash: null,
    __class__: rg,
  };
  var G = function (a) {
    Error.call(this);
    this.val = a;
    this.message = String(a);
    Error.captureStackTrace && Error.captureStackTrace(this, G);
  };
  l["js._Boot.HaxeError"] = G;
  G.__name__ = ["js", "_Boot", "HaxeError"];
  G.wrap = function (a) {
    return a instanceof Error ? a : new G(a);
  };
  G.__super__ = Error;
  G.prototype = v(Error.prototype, { val: null, __class__: G });
  var r = function () {};
  l["js.Boot"] = r;
  r.__name__ = ["js", "Boot"];
  r.__unhtml = function (a) {
    return a
      .split("&")
      .join("&amp;")
      .split("<")
      .join("&lt;")
      .split(">")
      .join("&gt;");
  };
  r.__trace = function (a, b) {
    var c = null != b ? b.fileName + ":" + b.lineNumber + ": " : "";
    c += r.__string_rec(a, "");
    if (null != b && null != b.customParams)
      for (a = 0, b = b.customParams; a < b.length; ) {
        var d = b[a];
        ++a;
        c += "," + r.__string_rec(d, "");
      }
    if ("undefined" != typeof document) {
      var e = document.getElementById("haxe:trace");
      a = null != e;
    } else a = !1;
    a
      ? (e.innerHTML += r.__unhtml(c) + "<br/>")
      : "undefined" != typeof console && null != console.log && console.log(c);
  };
  r.isClass = function (a) {
    return a.__name__;
  };
  r.isEnum = function (a) {
    return a.__ename__;
  };
  r.getClass = function (a) {
    if (a instanceof Array && null == a.__enum__) return Array;
    var b = a.__class__;
    if (null != b) return b;
    a = r.__nativeClassName(a);
    return null != a ? r.__resolveNativeClass(a) : null;
  };
  r.__string_rec = function (a, b) {
    if (null == a) return "null";
    if (5 <= b.length) return "<...>";
    var c = typeof a;
    "function" == c && (r.isClass(a) || r.isEnum(a)) && (c = "object");
    switch (c) {
      case "function":
        return "<function>";
      case "object":
        if (a instanceof Array) {
          if (a.__enum__) {
            if (2 == a.length) return a[0];
            c = a[0] + "(";
            b += "\t";
            for (var d = 2, e = a.length; d < e; ) {
              var f = d++;
              c =
                2 != f
                  ? c + ("," + r.__string_rec(a[f], b))
                  : c + r.__string_rec(a[f], b);
            }
            return c + ")";
          }
          c = a.length;
          d = "[";
          b += "\t";
          for (e = 0; e < c; )
            (f = e++), (d += (0 < f ? "," : "") + r.__string_rec(a[f], b));
          return d + "]";
        }
        try {
          d = a.toString;
        } catch (g) {
          return (ta.lastException = g), "???";
        }
        if (
          null != d &&
          d != Object.toString &&
          "function" == typeof d &&
          ((c = a.toString()), "[object Object]" != c)
        )
          return c;
        c = null;
        d = "{\n";
        b += "\t";
        e = null != a.hasOwnProperty;
        for (c in a)
          (e && !a.hasOwnProperty(c)) ||
            "prototype" == c ||
            "__class__" == c ||
            "__super__" == c ||
            "__interfaces__" == c ||
            "__properties__" == c ||
            (2 != d.length && (d += ", \n"),
            (d += b + c + " : " + r.__string_rec(a[c], b)));
        b = b.substring(1);
        return d + ("\n" + b + "}");
      case "string":
        return a;
      default:
        return String(a);
    }
  };
  r.__interfLoop = function (a, b) {
    if (null == a) return !1;
    if (a == b) return !0;
    var c = a.__interfaces__;
    if (null != c)
      for (var d = 0, e = c.length; d < e; ) {
        var f = d++;
        f = c[f];
        if (f == b || r.__interfLoop(f, b)) return !0;
      }
    return r.__interfLoop(a.__super__, b);
  };
  r.__instanceof = function (a, b) {
    if (null == b) return !1;
    switch (b) {
      case Array:
        return a instanceof Array ? null == a.__enum__ : !1;
      case ul:
        return "boolean" == typeof a;
      case Ml:
        return !0;
      case vl:
        return "number" == typeof a;
      case rl:
        return "number" == typeof a ? (a | 0) === a : !1;
      case String:
        return "string" == typeof a;
      default:
        if (null != a)
          if ("function" == typeof b) {
            if (a instanceof b || r.__interfLoop(r.getClass(a), b)) return !0;
          } else {
            if ("object" == typeof b && r.__isNativeObj(b) && a instanceof b)
              return !0;
          }
        else return !1;
        return (b == ql && null != a.__name__) ||
          (b == tl && null != a.__ename__)
          ? !0
          : a.__enum__ == b;
    }
  };
  r.__cast = function (a, b) {
    if (r.__instanceof(a, b)) return a;
    throw new G("Cannot cast " + u.string(a) + " to " + u.string(b));
  };
  r.__nativeClassName = function (a) {
    a = r.__toStr.call(a).slice(8, -1);
    return "Object" == a || "Function" == a || "Math" == a || "JSON" == a
      ? null
      : a;
  };
  r.__isNativeObj = function (a) {
    return null != r.__nativeClassName(a);
  };
  r.__resolveNativeClass = function (a) {
    return Ia[a];
  };
  var T = function () {};
  l["js.Browser"] = T;
  T.__name__ = ["js", "Browser"];
  T.__properties__ = {
    get_supported: "get_supported",
    get_navigator: "get_navigator",
    get_location: "get_location",
    get_document: "get_document",
    get_window: "get_window",
  };
  T.get_window = function () {
    return window;
  };
  T.get_document = function () {
    return window.document;
  };
  T.get_location = function () {
    return window.location;
  };
  T.get_navigator = function () {
    return window.navigator;
  };
  T.get_supported = function () {
    return "undefined" != typeof T.get_window();
  };
  T.getLocalStorage = function () {
    try {
      var a = T.get_window().localStorage;
      a.getItem("");
      return a;
    } catch (b) {
      return (ta.lastException = b), null;
    }
  };
  var Ci = function () {};
  l["js.Lib"] = Ci;
  Ci.__name__ = ["js", "Lib"];
  Ci.__properties__ = { get_undefined: "get_undefined" };
  Ci.get_undefined = function () {};
  var Oc = function (a) {
    if (a instanceof Array && null == a.__enum__)
      (this.a = a), (this.byteLength = a.length);
    else {
      this.a = [];
      for (var b = 0; b < a; ) {
        var c = b++;
        this.a[c] = 0;
      }
      this.byteLength = a;
    }
  };
  l["js.html.compat.ArrayBuffer"] = Oc;
  Oc.__name__ = ["js", "html", "compat", "ArrayBuffer"];
  Oc.sliceImpl = function (a, b) {
    a = new dd(this, a, null == b ? null : b - a);
    b = new Ii(a.byteLength);
    new dd(b).set(a);
    return b;
  };
  Oc.prototype = {
    byteLength: null,
    a: null,
    slice: function (a, b) {
      return new Oc(this.a.slice(a, b));
    },
    __class__: Oc,
  };
  var Ck = function (a, b, c) {
    this.buf = a;
    this.offset = null == b ? 0 : b;
    this.length = null == c ? a.byteLength - this.offset : c;
    if (
      0 > this.offset ||
      0 > this.length ||
      this.offset + this.length > a.byteLength
    )
      throw new G(Bc.OutsideBounds);
    this.byteLength = this.length;
    this.byteOffset = this.offset;
    this.buffer = this.buf;
  };
  l["js.html.compat.DataView"] = Ck;
  Ck.__name__ = ["js", "html", "compat", "DataView"];
  Ck.prototype = {
    buf: null,
    offset: null,
    length: null,
    byteLength: null,
    byteOffset: null,
    buffer: null,
    getInt8: function (a) {
      a = this.buf.a[this.offset + a];
      return 128 <= a ? a - 256 : a;
    },
    getUint8: function (a) {
      return this.buf.a[this.offset + a];
    },
    getInt16: function (a, b) {
      a = this.getUint16(a, b);
      return 32768 <= a ? a - 65536 : a;
    },
    getUint16: function (a, b) {
      return b
        ? this.buf.a[this.offset + a] | (this.buf.a[this.offset + a + 1] << 8)
        : (this.buf.a[this.offset + a] << 8) | this.buf.a[this.offset + a + 1];
    },
    getInt32: function (a, b) {
      var c = this.offset + a;
      a = this.buf.a[c++];
      var d = this.buf.a[c++],
        e = this.buf.a[c++];
      c = this.buf.a[c++];
      return b
        ? a | (d << 8) | (e << 16) | (c << 24)
        : c | (e << 8) | (d << 16) | (a << 24);
    },
    getUint32: function (a, b) {
      a = this.getInt32(a, b);
      return 0 > a ? a + 4294967296 : a;
    },
    getFloat32: function (a, b) {
      return Cc.i32ToFloat(this.getInt32(a, b));
    },
    getFloat64: function (a, b) {
      var c = this.getInt32(a, b);
      a = this.getInt32(a + 4, b);
      return Cc.i64ToDouble(b ? c : a, b ? a : c);
    },
    setInt8: function (a, b) {
      this.buf.a[a + this.offset] = 0 > b ? (b + 128) & 255 : b & 255;
    },
    setUint8: function (a, b) {
      this.buf.a[a + this.offset] = b & 255;
    },
    setInt16: function (a, b, c) {
      this.setUint16(a, 0 > b ? b + 65536 : b, c);
    },
    setUint16: function (a, b, c) {
      a += this.offset;
      c
        ? ((this.buf.a[a] = b & 255), (this.buf.a[a++] = (b >> 8) & 255))
        : ((this.buf.a[a++] = (b >> 8) & 255), (this.buf.a[a] = b & 255));
    },
    setInt32: function (a, b, c) {
      this.setUint32(a, b, c);
    },
    setUint32: function (a, b, c) {
      a += this.offset;
      c
        ? ((this.buf.a[a++] = b & 255),
          (this.buf.a[a++] = (b >> 8) & 255),
          (this.buf.a[a++] = (b >> 16) & 255),
          (this.buf.a[a++] = b >>> 24))
        : ((this.buf.a[a++] = b >>> 24),
          (this.buf.a[a++] = (b >> 16) & 255),
          (this.buf.a[a++] = (b >> 8) & 255),
          (this.buf.a[a++] = b & 255));
    },
    setFloat32: function (a, b, c) {
      this.setUint32(a, Cc.floatToI32(b), c);
    },
    setFloat64: function (a, b, c) {
      b = Cc.doubleToI64(b);
      c
        ? (this.setUint32(a, b.low), this.setUint32(a, b.high))
        : (this.setUint32(a, b.high), this.setUint32(a, b.low));
    },
    __class__: Ck,
  };
  var Ge = function () {};
  l["js.html.compat.Float32Array"] = Ge;
  Ge.__name__ = ["js", "html", "compat", "Float32Array"];
  Ge._new = function (a, b, c) {
    if ("number" == typeof a) {
      var d = [];
      for (b = 0; b < a; ) {
        var e = b++;
        d[e] = 0;
      }
      d.byteLength = d.length << 2;
      d.byteOffset = 0;
      a = [];
      b = 0;
      for (e = d.length << 2; b < e; ) b++, a.push(0);
      d.buffer = new Oc(a);
    } else if (u.is(a, Oc)) {
      null == b && (b = 0);
      null == c && (c = (a.byteLength - b) >> 2);
      d = [];
      for (e = 0; e < c; ) {
        e++;
        var f =
          a.a[b++] | (a.a[b++] << 8) | (a.a[b++] << 16) | (a.a[b++] << 24);
        d.push(Cc.i32ToFloat(f));
      }
      d.byteLength = d.length << 2;
      d.byteOffset = b;
      d.buffer = a;
    } else if (a instanceof Array && null == a.__enum__) {
      d = a.slice();
      a = [];
      for (b = 0; b < d.length; )
        (e = d[b]),
          ++b,
          (e = Cc.floatToI32(e)),
          a.push(e & 255),
          a.push((e >> 8) & 255),
          a.push((e >> 16) & 255),
          a.push(e >>> 24);
      d.byteLength = d.length << 2;
      d.byteOffset = 0;
      d.buffer = new Oc(a);
    } else throw new G("TODO " + u.string(a));
    d.subarray = Ge._subarray;
    d.set = Ge._set;
    return d;
  };
  Ge._set = function (a, b) {
    if (u.is(a.buffer, Oc)) {
      if (a.byteLength + b > this.byteLength)
        throw new G("set() outside of range");
      for (var c = 0, d = a.byteLength; c < d; ) {
        var e = c++;
        this[e + b] = a[e];
      }
    } else if (a instanceof Array && null == a.__enum__) {
      if (a.length + b > this.byteLength) throw new G("set() outside of range");
      c = 0;
      for (d = a.length; c < d; ) (e = c++), (this[e + b] = a[e]);
    } else throw new G("TODO");
  };
  Ge._subarray = function (a, b) {
    b = Ge._new(this.slice(a, b));
    b.byteOffset = 4 * a;
    return b;
  };
  var He = function () {};
  l["js.html.compat.Uint8Array"] = He;
  He.__name__ = ["js", "html", "compat", "Uint8Array"];
  He._new = function (a, b, c) {
    if ("number" == typeof a) {
      c = [];
      for (b = 0; b < a; ) {
        var d = b++;
        c[d] = 0;
      }
      c.byteLength = c.length;
      c.byteOffset = 0;
      c.buffer = new Oc(c);
    } else if (u.is(a, Oc))
      null == b && (b = 0),
        null == c && (c = a.byteLength - b),
        (c = 0 == b ? a.a : a.a.slice(b, b + c)),
        (c.byteLength = c.length),
        (c.byteOffset = b),
        (c.buffer = a);
    else if (a instanceof Array && null == a.__enum__)
      (c = a.slice()),
        (c.byteLength = c.length),
        (c.byteOffset = 0),
        (c.buffer = new Oc(c));
    else throw new G("TODO " + u.string(a));
    c.subarray = He._subarray;
    c.set = He._set;
    return c;
  };
  He._set = function (a, b) {
    if (u.is(a.buffer, Oc)) {
      if (a.byteLength + b > this.byteLength)
        throw new G("set() outside of range");
      for (var c = 0, d = a.byteLength; c < d; ) {
        var e = c++;
        this[e + b] = a[e];
      }
    } else if (a instanceof Array && null == a.__enum__) {
      if (a.length + b > this.byteLength) throw new G("set() outside of range");
      c = 0;
      for (d = a.length; c < d; ) (e = c++), (this[e + b] = a[e]);
    } else throw new G("TODO");
  };
  He._subarray = function (a, b) {
    b = He._new(this.slice(a, b));
    b.byteOffset = a;
    return b;
  };
  var ri = function () {
    this.connected = !0;
    this.buttons = [];
    this.axes = [];
  };
  l["lime._internal.backend.html5.GameDeviceData"] = ri;
  ri.__name__ = ["lime", "_internal", "backend", "html5", "GameDeviceData"];
  ri.prototype = {
    connected: null,
    id: null,
    isGamepad: null,
    buttons: null,
    axes: null,
    __class__: ri,
  };
  var Li = function (a) {
    this.parent = a;
    this.id = -1;
    this.gain = 1;
    this.position = new Ki();
  };
  l["lime._internal.backend.html5.HTML5AudioSource"] = Li;
  Li.__name__ = ["lime", "_internal", "backend", "html5", "HTML5AudioSource"];
  Li.prototype = {
    completed: null,
    gain: null,
    id: null,
    length: null,
    loops: null,
    parent: null,
    playing: null,
    position: null,
    dispose: function () {},
    init: function () {},
    play: function () {
      if (
        !this.playing &&
        null != this.parent.buffer &&
        null != this.parent.buffer.__srcHowl
      ) {
        this.playing = !0;
        var a = this.getCurrentTime();
        this.completed = !1;
        var b = this.parent.buffer.__srcHowl._volume;
        this.parent.buffer.__srcHowl._volume = this.parent.get_gain();
        this.id = this.parent.buffer.__srcHowl.play();
        this.parent.buffer.__srcHowl._volume = b;
        this.setPosition(this.parent.get_position());
        this.parent.buffer.__srcHowl.on(
          "end",
          m(this, this.howl_onEnd),
          this.id
        );
        this.setCurrentTime(a);
      }
    },
    stop: function () {
      this.playing = !1;
      null != this.parent.buffer &&
        null != this.parent.buffer.__srcHowl &&
        this.parent.buffer.__srcHowl.stop(this.id);
    },
    howl_onEnd: function () {
      this.playing = !1;
      0 < this.loops
        ? (this.loops--, this.stop(), this.play())
        : (null != this.parent.buffer &&
            null != this.parent.buffer.__srcHowl &&
            this.parent.buffer.__srcHowl.stop(this.id),
          (this.completed = !0),
          this.parent.onComplete.dispatch());
    },
    getCurrentTime: function () {
      if (-1 == this.id) return 0;
      if (this.completed) return this.getLength();
      if (null != this.parent.buffer && null != this.parent.buffer.__srcHowl) {
        var a =
          u["int"](1e3 * this.parent.buffer.__srcHowl.seek(this.id)) -
          this.parent.offset;
        return 0 > a ? 0 : a;
      }
      return 0;
    },
    setCurrentTime: function (a) {
      if (null != this.parent.buffer && null != this.parent.buffer.__srcHowl) {
        var b = (a + this.parent.offset) / 1e3;
        0 > b && (b = 0);
        this.parent.buffer.__srcHowl.seek(b, this.id);
      }
      return a;
    },
    getGain: function () {
      return this.gain;
    },
    setGain: function (a) {
      null != this.parent.buffer &&
        null != this.parent.buffer.__srcHowl &&
        -1 != this.id &&
        this.parent.buffer.__srcHowl.volume(a, this.id);
      return (this.gain = a);
    },
    getLength: function () {
      return 0 != this.length
        ? this.length
        : null != this.parent.buffer && null != this.parent.buffer.__srcHowl
        ? u["int"](1e3 * this.parent.buffer.__srcHowl.duration())
        : 0;
    },
    setLength: function (a) {
      return (this.length = a);
    },
    setLoops: function (a) {
      return (this.loops = a);
    },
    getPosition: function () {
      return this.position;
    },
    setPosition: function (a) {
      this.position.x = a.x;
      this.position.y = a.y;
      this.position.z = a.z;
      this.position.w = a.w;
      null != this.parent.buffer.__srcHowl &&
        null != ((Ya = this.parent.buffer.__srcHowl), m(Ya, Ya.pos)) &&
        this.parent.buffer.__srcHowl.pos(
          this.position.x,
          this.position.y,
          this.position.z,
          this.id
        );
      return this.position;
    },
    __class__: Li,
  };
  var ba = function () {
    this.validStatus0 = new pa("Tizen", "gi").match(
      T.get_window().navigator.userAgent
    );
  };
  l["lime._internal.backend.html5.HTML5HTTPRequest"] = ba;
  ba.__name__ = ["lime", "_internal", "backend", "html5", "HTML5HTTPRequest"];
  ba.loadImage = function (a) {
    var b = new Wb();
    ba.activeRequests < ba.requestLimit
      ? (ba.activeRequests++, ba.__loadImage(a, b))
      : ba.requestQueue.add({
          instance: null,
          uri: a,
          promise: b,
          type: "IMAGE",
        });
    return b.future;
  };
  ba.processQueue = function () {
    if (ba.activeRequests < ba.requestLimit && 0 < ba.requestQueue.length) {
      ba.activeRequests++;
      var a = ba.requestQueue.pop();
      switch (a.type) {
        case "BINARY":
          a.instance.__loadData(a.uri, a.promise);
          break;
        case "IMAGE":
          ba.__loadImage(a.uri, a.promise);
          break;
        case "TEXT":
          a.instance.__loadText(a.uri, a.promise);
          break;
        default:
          ba.activeRequests--;
      }
    }
  };
  ba.__fixHostname = function (a) {
    return null == a ? "" : a;
  };
  ba.__fixPort = function (a, b) {
    if (null == a || "" == a)
      switch (b) {
        case "ftp:":
          return "21";
        case "gopher:":
          return "70";
        case "http:":
          return "80";
        case "https:":
          return "443";
        case "ws:":
          return "80";
        case "wss:":
          return "443";
        default:
          return "";
      }
    return a;
  };
  ba.__fixProtocol = function (a) {
    return null == a || "" == a ? "http:" : a;
  };
  ba.__isSameOrigin = function (a) {
    null == ba.originElement &&
      ((ba.originElement = T.get_document().createElement("a")),
      (ba.originHostname = ba.__fixHostname(T.get_location().hostname)),
      (ba.originProtocol = ba.__fixProtocol(T.get_location().protocol)),
      (ba.originPort = ba.__fixPort(T.get_location().port, ba.originProtocol)));
    var b = ba.originElement;
    b.href = a;
    "" == b.hostname && (b.href = b.href);
    var c = ba.__fixHostname(b.hostname);
    a = ba.__fixProtocol(b.protocol);
    b = ba.__fixPort(b.port, a);
    c = "" == c || c == ba.originHostname;
    b = "" == b || b == ba.originPort;
    return "file:" != a && c ? b : !1;
  };
  ba.__loadImage = function (a, b) {
    var c = new Image();
    ba.__isSameOrigin(a) || (c.crossOrigin = "Anonymous");
    null == ba.supportsImageProgress &&
      (ba.supportsImageProgress = "onprogress" in c);
    if (ba.supportsImageProgress || J.startsWith(a, "data:"))
      c.addEventListener(
        "load",
        function (a) {
          a = new Ie(null, c.width, c.height);
          a.__srcImage = c;
          ba.activeRequests--;
          ba.processQueue();
          b.complete(new qa(a));
        },
        !1
      ),
        c.addEventListener(
          "progress",
          function (a) {
            b.progress(a.loaded, a.total);
          },
          !1
        ),
        c.addEventListener(
          "error",
          function (a) {
            ba.activeRequests--;
            ba.processQueue();
            b.error(a.detail);
          },
          !1
        ),
        (c.src = a);
    else {
      var d = new XMLHttpRequest();
      d.onload = function (a) {
        ba.activeRequests--;
        ba.processQueue();
        new qa().__fromBytes(eb.ofData(d.response), function (a) {
          b.complete(a);
        });
      };
      d.onerror = function (a) {
        b.error(a.message);
      };
      d.onprogress = function (a) {
        a.lengthComputable && b.progress(a.loaded, a.total);
      };
      d.open("GET", a, !0);
      d.responseType = "arraybuffer";
      d.overrideMimeType("text/plain; charset=x-user-defined");
      d.send(null);
    }
  };
  ba.prototype = {
    binary: null,
    parent: null,
    request: null,
    validStatus0: null,
    init: function (a) {
      this.parent = a;
    },
    load: function (a, b, c) {
      this.request = new XMLHttpRequest();
      "POST" == this.parent.method
        ? this.request.upload.addEventListener("progress", b, !1)
        : this.request.addEventListener("progress", b, !1);
      this.request.onreadystatechange = c;
      b = "";
      if (null == this.parent.data) {
        for (c = this.parent.formData.keys(); c.hasNext(); ) {
          var d = c.next();
          0 < b.length && (b += "&");
          b +=
            J.urlEncode(d) +
            "=" +
            J.urlEncode(u.string(this.parent.formData.get(d)));
        }
        "GET" == this.parent.method &&
          "" != b &&
          ((a = -1 < a.indexOf("?") ? a + ("&" + b) : a + ("?" + b)), (b = ""));
      }
      this.request.open(u.string(this.parent.method), a, !0);
      0 < this.parent.timeout && (this.request.timeout = this.parent.timeout);
      this.binary && (this.request.responseType = "arraybuffer");
      a = null;
      c = 0;
      for (d = this.parent.headers; c < d.length; ) {
        var e = d[c];
        ++c;
        "Content-Type" == e.name
          ? (a = e.value)
          : this.request.setRequestHeader(e.name, e.value);
      }
      null != this.parent.contentType && (a = this.parent.contentType);
      null == a &&
        (null != this.parent.data
          ? (a = "application/octet-stream")
          : "" != b && (a = "application/x-www-form-urlencoded"));
      null != a && this.request.setRequestHeader("Content-Type", a);
      this.parent.withCredentials && (this.request.withCredentials = !0);
      null != this.parent.data
        ? this.request.send(this.parent.data.getData())
        : this.request.send(b);
    },
    loadData: function (a) {
      var b = new Wb();
      ba.activeRequests < ba.requestLimit
        ? (ba.activeRequests++, this.__loadData(a, b))
        : ba.requestQueue.add({
            instance: this,
            uri: a,
            promise: b,
            type: "BINARY",
          });
      return b.future;
    },
    loadText: function (a) {
      var b = new Wb();
      ba.activeRequests < ba.requestLimit
        ? (ba.activeRequests++, this.__loadText(a, b))
        : ba.requestQueue.add({
            instance: this,
            uri: a,
            promise: b,
            type: "TEXT",
          });
      return b.future;
    },
    processResponse: function () {
      if (this.parent.enableResponseHeaders) {
        this.parent.responseHeaders = [];
        for (
          var a, b, c = 0, d = this.request.getAllResponseHeaders().split("\n");
          c < d.length;

        )
          (b = d[c]),
            ++c,
            (a = J.trim(S.substr(b, 0, b.indexOf(":")))),
            (b = J.trim(S.substr(b, b.indexOf(":") + 1, null))),
            "" != a && this.parent.responseHeaders.push(new gh(a, b));
      }
      this.parent.responseStatus = this.request.status;
    },
    __loadData: function (a, b) {
      var c = this;
      this.binary = !0;
      this.load(
        a,
        function (a) {
          b.progress(a.loaded, a.total);
        },
        function (a) {
          4 == c.request.readyState &&
            (null != c.request.status &&
            ((200 <= c.request.status && 400 > c.request.status) ||
              (c.validStatus0 && 0 == c.request.status))
              ? ((a = null),
                "" == c.request.responseType
                  ? null != c.request.responseText &&
                    (a = eb.ofString(c.request.responseText))
                  : null != c.request.response &&
                    (a = eb.ofData(c.request.response)),
                c.processResponse(),
                b.complete(a))
              : (c.processResponse(), b.error(c.request.status)),
            (c.request = null),
            ba.activeRequests--,
            ba.processQueue());
        }
      );
    },
    __loadText: function (a, b) {
      var c = this;
      this.binary = !1;
      this.load(
        a,
        function (a) {
          b.progress(a.loaded, a.total);
        },
        function (a) {
          4 == c.request.readyState &&
            (null != c.request.status &&
            ((200 <= c.request.status && 400 >= c.request.status) ||
              (c.validStatus0 && 0 == c.request.status))
              ? (c.processResponse(), b.complete(c.request.responseText))
              : (c.processResponse(), b.error(c.request.status)),
            (c.request = null),
            ba.activeRequests--,
            ba.processQueue());
        }
      );
    },
    __class__: ba,
  };
  var la = function (a) {
    this.unusedTouchesPool = new bd();
    this.scale = 1;
    this.currentTouches = new mb();
    this.parent = a;
    this.cacheMouseY = this.cacheMouseX = 0;
    var b = a.__attributes;
    A.hasField(b, "context") || (b.context = {});
    this.renderType = b.context.type;
    A.hasField(b, "element") && (a.element = b.element);
    var c = a.element;
    b.context.type = "dom";
    b.context.version = "";
    A.hasField(b, "allowHighDPI") &&
      b.allowHighDPI &&
      "dom" != this.renderType &&
      (this.scale = T.get_window().devicePixelRatio);
    a.__scale = this.scale;
    this.setWidth = A.hasField(b, "width") ? b.width : 0;
    this.setHeight = A.hasField(b, "height") ? b.height : 0;
    a.__width = this.setWidth;
    a.__height = this.setHeight;
    a.id = la.windowID++;
    u.is(c, HTMLCanvasElement)
      ? (this.canvas = c)
      : "dom" == this.renderType
      ? (this.div = T.get_document().createElement("div"))
      : (this.canvas = T.get_document().createElement("canvas"));
    if (null != this.canvas) {
      var d = this.canvas.style;
      d.setProperty("-webkit-transform", "translateZ(0)", null);
      d.setProperty("transform", "translateZ(0)", null);
    } else
      null != this.div &&
        ((d = this.div.style),
        d.setProperty("-webkit-transform", "translate3D(0,0,0)", null),
        d.setProperty("transform", "translate3D(0,0,0)", null),
        (d.position = "relative"),
        (d.overflow = "hidden"),
        d.setProperty("-webkit-user-select", "none", null),
        d.setProperty("-moz-user-select", "none", null),
        d.setProperty("-ms-user-select", "none", null),
        d.setProperty("-o-user-select", "none", null));
    0 == a.__width &&
      0 == a.__height &&
      (null != c
        ? ((a.__width = c.clientWidth), (a.__height = c.clientHeight))
        : ((a.__width = T.get_window().innerWidth),
          (a.__height = T.get_window().innerHeight)),
      (this.cacheElementWidth = a.__width),
      (this.cacheElementHeight = a.__height),
      (this.resizeElement = !0));
    null != this.canvas
      ? ((this.canvas.width = Math.round(a.__width * this.scale)),
        (this.canvas.height = Math.round(a.__height * this.scale)),
        (this.canvas.style.width = a.__width + "px"),
        (this.canvas.style.height = a.__height + "px"))
      : ((this.div.style.width = a.__width + "px"),
        (this.div.style.height = a.__height + "px"));
    if (
      (A.hasField(b, "resizable") && b.resizable) ||
      (!A.hasField(b, "width") && 0 == this.setWidth && 0 == this.setHeight)
    )
      a.__resizable = !0;
    this.updateSize();
    if (null != c) {
      null != this.canvas
        ? c != this.canvas && c.appendChild(this.canvas)
        : c.appendChild(this.div);
      b = "mousedown mouseenter mouseleave mousemove mouseup wheel".split(" ");
      for (d = 0; d < b.length; ) {
        var e = b[d];
        ++d;
        c.addEventListener(e, m(this, this.handleMouseEvent), !0);
      }
      T.get_document().addEventListener(
        "dragstart",
        function (a) {
          return "img" == a.target.nodeName.toLowerCase()
            ? (a.preventDefault(), !1)
            : !0;
        },
        !1
      );
      c.addEventListener(
        "contextmenu",
        m(this, this.handleContextMenuEvent),
        !0
      );
      c.addEventListener("touchstart", m(this, this.handleTouchEvent), !0);
      c.addEventListener("touchmove", m(this, this.handleTouchEvent), !0);
      c.addEventListener("touchend", m(this, this.handleTouchEvent), !0);
      c.addEventListener("touchcancel", m(this, this.handleTouchEvent), !0);
      c.addEventListener(
        "gamepadconnected",
        m(this, this.handleGamepadEvent),
        !0
      );
      c.addEventListener(
        "gamepaddisconnected",
        m(this, this.handleGamepadEvent),
        !0
      );
    }
    this.createContext();
    "webgl" == a.context.type &&
      (this.canvas.addEventListener(
        "webglcontextlost",
        m(this, this.handleContextEvent),
        !1
      ),
      this.canvas.addEventListener(
        "webglcontextrestored",
        m(this, this.handleContextEvent),
        !1
      ));
  };
  l["lime._internal.backend.html5.HTML5Window"] = la;
  la.__name__ = ["lime", "_internal", "backend", "html5", "HTML5Window"];
  la.prototype = {
    canvas: null,
    div: null,
    cacheElementHeight: null,
    cacheElementWidth: null,
    cacheMouseX: null,
    cacheMouseY: null,
    cursor: null,
    currentTouches: null,
    parent: null,
    primaryTouch: null,
    renderType: null,
    resizeElement: null,
    scale: null,
    setHeight: null,
    setWidth: null,
    textInputEnabled: null,
    unusedTouchesPool: null,
    close: function () {
      this.parent.application.__removeWindow(this.parent);
    },
    createContext: function () {
      var a = new Mi(),
        b = this.parent.__attributes.context;
      a.window = this.parent;
      a.attributes = b;
      if (null != this.div)
        (a.dom = this.div), (a.type = "dom"), (a.version = "");
      else if (null != this.canvas) {
        var c = null,
          d = "canvas" == this.renderType,
          e =
            "opengl" == this.renderType ||
            "opengles" == this.renderType ||
            "webgl" == this.renderType,
          f = !A.hasField(b, "version") || "1" != b.version,
          g = !1;
        if (e || (!d && (!A.hasField(b, "hardware") || b.hardware)))
          for (
            d = A.hasField(b, "background") && null == b.background,
              e = A.hasField(b, "colorDepth") ? b.colorDepth : 16,
              b = {
                alpha: d || 16 < e,
                antialias: A.hasField(b, "antialiasing"),
                depth: A.hasField(b, "depth") ? b.depth : !0,
                premultipliedAlpha: !0,
                stencil: A.hasField(b, "stencil") && b.stencil,
                preserveDrawingBuffer: !1,
              },
              d = ["webgl", "experimental-webgl"],
              f && d.unshift("webgl2"),
              f = 0;
            f < d.length &&
            ((e = d[f]),
            ++f,
            (c = this.canvas.getContext(e, b)),
            null != c && "webgl2" == e && (g = !0),
            null == c);

          );
        null == c
          ? ((a.canvas2D = this.canvas.getContext("2d")),
            (a.type = "canvas"),
            (a.version = ""))
          : ((a.webgl = rb.fromWebGL2RenderContext(c)),
            g && (a.webgl2 = c),
            null == Mf.context &&
              ((Mf.context = c), (Mf.type = "webgl"), (Mf.version = g ? 2 : 1)),
            (a.type = "webgl"),
            (a.version = g ? "2" : "1"));
      }
      this.parent.context = a;
    },
    getFrameRate: function () {
      return null == this.parent.application
        ? 0
        : 0 > this.parent.application.__backend.framePeriod
        ? 60
        : 1e3 == this.parent.application.__backend.framePeriod
        ? 0
        : 1e3 / this.parent.application.__backend.framePeriod;
    },
    handleContextEvent: function (a) {
      switch (a.type) {
        case "webglcontextlost":
          a.preventDefault();
          this.parent.context = null;
          this.parent.onRenderContextLost.dispatch();
          break;
        case "webglcontextrestored":
          this.createContext(),
            this.parent.onRenderContextRestored.dispatch(this.parent.context);
      }
    },
    handleContextMenuEvent: function (a) {
      this.parent.onMouseUp.canceled && a.preventDefault();
    },
    handleCutOrCopyEvent: function (a) {
      a.clipboardData.setData("text/plain", Nb.get_text());
      a.preventDefault();
    },
    handleFocusEvent: function (a) {
      var b = this;
      this.textInputEnabled &&
        (null == a.relatedTarget || this.isDescendent(a.relatedTarget)) &&
        Fe.delay(function () {
          b.textInputEnabled && la.textInput.focus();
        }, 20);
    },
    handleGamepadEvent: function (a) {
      switch (a.type) {
        case "gamepadconnected":
          zb.__connect(a.gamepad.index);
          "standard" == a.gamepad.mapping && vb.__connect(a.gamepad.index);
          break;
        case "gamepaddisconnected":
          zb.__disconnect(a.gamepad.index), vb.__disconnect(a.gamepad.index);
      }
    },
    handleInputEvent: function (a) {
      la.textInput.value != la.dummyCharacter &&
        ((a = J.replace(la.textInput.value, la.dummyCharacter, "")),
        0 < a.length && this.parent.onTextInput.dispatch(a),
        (la.textInput.value = la.dummyCharacter));
    },
    handleMouseEvent: function (a) {
      if ("wheel" != a.type) {
        if (null != this.parent.element)
          if (null != this.canvas) {
            var b = this.canvas.getBoundingClientRect();
            var c = (this.parent.__width / b.width) * (a.clientX - b.left);
            b = (this.parent.__height / b.height) * (a.clientY - b.top);
          } else
            null != this.div
              ? ((b = this.div.getBoundingClientRect()),
                (c = a.clientX - b.left),
                (b = a.clientY - b.top))
              : ((b = this.parent.element.getBoundingClientRect()),
                (c = (this.parent.__width / b.width) * (a.clientX - b.left)),
                (b = (this.parent.__height / b.height) * (a.clientY - b.top)));
        else (c = a.clientX), (b = a.clientY);
        switch (a.type) {
          case "mousedown":
            a.currentTarget == this.parent.element &&
              T.get_window().addEventListener(
                "mouseup",
                m(this, this.handleMouseEvent)
              );
            this.parent.onMouseDown.dispatch(c, b, a.button);
            this.parent.onMouseDown.canceled && a.preventDefault();
            break;
          case "mouseenter":
            a.target == this.parent.element &&
              (this.parent.onEnter.dispatch(),
              this.parent.onEnter.canceled && a.preventDefault());
            break;
          case "mouseleave":
            a.target == this.parent.element &&
              (this.parent.onLeave.dispatch(),
              this.parent.onLeave.canceled && a.preventDefault());
            break;
          case "mousemove":
            if (c != this.cacheMouseX || b != this.cacheMouseY)
              this.parent.onMouseMove.dispatch(c, b),
                this.parent.onMouseMoveRelative.dispatch(
                  c - this.cacheMouseX,
                  b - this.cacheMouseY
                ),
                (this.parent.onMouseMove.canceled ||
                  this.parent.onMouseMoveRelative.canceled) &&
                  a.preventDefault();
            break;
          case "mouseup":
            T.get_window().removeEventListener(
              "mouseup",
              m(this, this.handleMouseEvent)
            ),
              a.currentTarget == this.parent.element && a.stopPropagation(),
              this.parent.onMouseUp.dispatch(c, b, a.button),
              this.parent.onMouseUp.canceled && a.preventDefault();
        }
        this.cacheMouseX = c;
        this.cacheMouseY = b;
      } else {
        switch (a.deltaMode) {
          case 0:
            c = Gb.PIXELS;
            break;
          case 1:
            c = Gb.LINES;
            break;
          case 2:
            c = Gb.PAGES;
            break;
          default:
            c = Gb.UNKNOWN;
        }
        this.parent.onMouseWheel.dispatch(a.deltaX, -a.deltaY, c);
        this.parent.onMouseWheel.canceled && a.preventDefault();
      }
    },
    handlePasteEvent: function (a) {
      if (-1 < a.clipboardData.types.indexOf("text/plain")) {
        var b = a.clipboardData.getData("text/plain");
        Nb.set_text(b);
        this.textInputEnabled && this.parent.onTextInput.dispatch(b);
        a.preventDefault();
      }
    },
    handleResizeEvent: function (a) {
      this.primaryTouch = null;
      this.updateSize();
    },
    handleTouchEvent: function (a) {
      a.preventDefault();
      var b = null;
      null != this.parent.element &&
        (b =
          null != this.canvas
            ? this.canvas.getBoundingClientRect()
            : null != this.div
            ? this.div.getBoundingClientRect()
            : this.parent.element.getBoundingClientRect());
      var c = this.setWidth,
        d = this.setHeight;
      if (0 == c || 0 == d)
        null != b ? ((c = b.width), (d = b.height)) : (d = c = 1);
      for (var e, f, g, h, n, p = 0, k = a.changedTouches; p < k.length; ) {
        var l = k[p];
        ++p;
        null != b
          ? ((f = (c / b.width) * (l.clientX - b.left)),
            (g = (d / b.height) * (l.clientY - b.top)))
          : ((f = l.clientX), (g = l.clientY));
        if ("touchstart" == a.type)
          (e = this.unusedTouchesPool.pop()),
            null == e
              ? (e = new Jb(
                  f / c,
                  g / d,
                  l.identifier,
                  0,
                  0,
                  l.force,
                  this.parent.id
                ))
              : ((e.x = f / c),
                (e.y = g / d),
                (e.id = l.identifier),
                (e.dx = 0),
                (e.dy = 0),
                (e.pressure = l.force),
                (e.device = this.parent.id)),
            this.currentTouches.set(l.identifier, e),
            Jb.onStart.dispatch(e),
            null == this.primaryTouch && (this.primaryTouch = e),
            e == this.primaryTouch && this.parent.onMouseDown.dispatch(f, g, 0);
        else if (((e = this.currentTouches.get(l.identifier)), null != e))
          switch (
            ((h = e.x),
            (n = e.y),
            (e.x = f / c),
            (e.y = g / d),
            (e.dx = e.x - h),
            (e.dy = e.y - n),
            (e.pressure = l.force),
            a.type)
          ) {
            case "touchcancel":
              Jb.onCancel.dispatch(e);
              this.currentTouches.remove(l.identifier);
              this.unusedTouchesPool.add(e);
              e == this.primaryTouch && (this.primaryTouch = null);
              break;
            case "touchend":
              Jb.onEnd.dispatch(e);
              this.currentTouches.remove(l.identifier);
              this.unusedTouchesPool.add(e);
              e == this.primaryTouch &&
                (this.parent.onMouseUp.dispatch(f, g, 0),
                (this.primaryTouch = null));
              break;
            case "touchmove":
              Jb.onMove.dispatch(e),
                e == this.primaryTouch &&
                  this.parent.onMouseMove.dispatch(f, g);
          }
      }
    },
    isDescendent: function (a) {
      if (a == this.parent.element) return !0;
      for (; null != a; ) {
        if (a.parentNode == this.parent.element) return !0;
        a = a.parentNode;
      }
      return !1;
    },
    setClipboard: function (a) {
      var b = this.textInputEnabled;
      this.setTextInputEnabled(!0);
      var c = la.textInput.value;
      la.textInput.value = a;
      la.textInput.select();
      T.get_document().queryCommandEnabled("copy") &&
        T.get_document().execCommand("copy");
      la.textInput.value = c;
      this.setTextInputEnabled(b);
    },
    setCursor: function (a) {
      if (this.cursor != a) {
        if (null == a) this.parent.element.style.cursor = null;
        else {
          switch (I.enumIndex(a)) {
            case 0:
              var b = "default";
              break;
            case 1:
              b = "crosshair";
              break;
            case 3:
              b = "move";
              break;
            case 4:
              b = "pointer";
              break;
            case 5:
              b = "nesw-resize";
              break;
            case 6:
              b = "ns-resize";
              break;
            case 7:
              b = "nwse-resize";
              break;
            case 8:
              b = "ew-resize";
              break;
            case 9:
              b = "text";
              break;
            case 10:
              b = "wait";
              break;
            case 11:
              b = "wait";
              break;
            default:
              b = "auto";
          }
          this.parent.element.style.cursor = b;
        }
        this.cursor = a;
      }
      return this.cursor;
    },
    setFrameRate: function (a) {
      null != this.parent.application &&
        (60 <= a
          ? this.parent == this.parent.application.get_window() &&
            (this.parent.application.__backend.framePeriod = -1)
          : 0 < a
          ? this.parent == this.parent.application.get_window() &&
            (this.parent.application.__backend.framePeriod = 1e3 / a)
          : this.parent == this.parent.application.get_window() &&
            (this.parent.application.__backend.framePeriod = 1e3));
      return a;
    },
    setTextInputEnabled: function (a) {
      a
        ? (null == la.textInput &&
            ((la.textInput = T.get_document().createElement("input")),
            (la.textInput.type = "text"),
            (la.textInput.style.position = "absolute"),
            (la.textInput.style.opacity = "0"),
            (la.textInput.style.color = "transparent"),
            (la.textInput.value = la.dummyCharacter),
            (la.textInput.autocapitalize = "off"),
            (la.textInput.autocorrect = "off"),
            (la.textInput.autocomplete = "off"),
            (la.textInput.style.left = "0px"),
            (la.textInput.style.top = "50%"),
            new pa("(iPad|iPhone|iPod).*OS 8_", "gi").match(
              T.get_window().navigator.userAgent
            )
              ? ((la.textInput.style.fontSize = "0px"),
                (la.textInput.style.width = "0px"),
                (la.textInput.style.height = "0px"))
              : ((la.textInput.style.width = "1px"),
                (la.textInput.style.height = "1px")),
            (la.textInput.style.pointerEvents = "none"),
            (la.textInput.style.zIndex = "-10000000")),
          null == la.textInput.parentNode &&
            this.parent.element.appendChild(la.textInput),
          this.textInputEnabled ||
            (la.textInput.addEventListener(
              "input",
              m(this, this.handleInputEvent),
              !0
            ),
            la.textInput.addEventListener(
              "blur",
              m(this, this.handleFocusEvent),
              !0
            ),
            la.textInput.addEventListener(
              "cut",
              m(this, this.handleCutOrCopyEvent),
              !0
            ),
            la.textInput.addEventListener(
              "copy",
              m(this, this.handleCutOrCopyEvent),
              !0
            ),
            la.textInput.addEventListener(
              "paste",
              m(this, this.handlePasteEvent),
              !0
            )),
          la.textInput.focus(),
          la.textInput.select())
        : null != la.textInput &&
          (la.textInput.removeEventListener(
            "input",
            m(this, this.handleInputEvent),
            !0
          ),
          la.textInput.removeEventListener(
            "blur",
            m(this, this.handleFocusEvent),
            !0
          ),
          la.textInput.removeEventListener(
            "cut",
            m(this, this.handleCutOrCopyEvent),
            !0
          ),
          la.textInput.removeEventListener(
            "copy",
            m(this, this.handleCutOrCopyEvent),
            !0
          ),
          la.textInput.removeEventListener(
            "paste",
            m(this, this.handlePasteEvent),
            !0
          ),
          la.textInput.blur());
      return (this.textInputEnabled = a);
    },
    updateSize: function () {
      if (this.parent.__resizable) {
        if (null != this.parent.element) {
          var a = this.parent.element.clientWidth;
          var b = this.parent.element.clientHeight;
        } else
          (a = T.get_window().innerWidth), (b = T.get_window().innerHeight);
        if (a != this.cacheElementWidth || b != this.cacheElementHeight) {
          this.cacheElementWidth = a;
          this.cacheElementHeight = b;
          var c =
            this.resizeElement || (0 == this.setWidth && 0 == this.setHeight);
          if (
            null != this.parent.element &&
            (null == this.div || (null != this.div && c))
          )
            if (c) {
              if (this.parent.__width != a || this.parent.__height != b)
                (this.parent.__width = a),
                  (this.parent.__height = b),
                  null != this.canvas
                    ? this.parent.element != this.canvas &&
                      ((this.canvas.width = Math.round(a * this.scale)),
                      (this.canvas.height = Math.round(b * this.scale)),
                      (this.canvas.style.width = a + "px"),
                      (this.canvas.style.height = b + "px"))
                    : ((this.div.style.width = a + "px"),
                      (this.div.style.height = b + "px")),
                  this.parent.onResize.dispatch(a, b);
            } else {
              c = 0 != this.setWidth ? a / this.setWidth : 1;
              var d = 0 != this.setHeight ? b / this.setHeight : 1,
                e = a,
                f = b,
                g = 0,
                h = 0;
              c < d
                ? ((f = Math.floor(this.setHeight * c)),
                  (h = Math.floor((b - f) / 2)))
                : ((e = Math.floor(this.setWidth * d)),
                  (g = Math.floor((a - e) / 2)));
              null != this.canvas
                ? this.parent.element != this.canvas &&
                  ((this.canvas.style.width = e + "px"),
                  (this.canvas.style.height = f + "px"),
                  (this.canvas.style.marginLeft = g + "px"),
                  (this.canvas.style.marginTop = h + "px"))
                : ((this.div.style.width = e + "px"),
                  (this.div.style.height = f + "px"),
                  (this.div.style.marginLeft = g + "px"),
                  (this.div.style.marginTop = h + "px"));
            }
        }
      }
    },
    __class__: la,
  };
  var na = function () {};
  l["lime._internal.graphics.ImageCanvasUtil"] = na;
  na.__name__ = ["lime", "_internal", "graphics", "ImageCanvasUtil"];
  na.colorTransform = function (a, b, c) {
    na.convertToData(a);
    Pa.colorTransform(a, b, c);
  };
  na.convertToCanvas = function (a, b) {
    null == b && (b = !1);
    var c = a.buffer;
    null != c.__srcImage
      ? (null == c.__srcCanvas &&
          (na.createCanvas(a, c.__srcImage.width, c.__srcImage.height),
          c.__srcContext.drawImage(c.__srcImage, 0, 0)),
        (c.__srcImage = null))
      : null == c.__srcCanvas && null != c.data
      ? (a.set_transparent(!0),
        na.createCanvas(a, c.width, c.height),
        na.createImageData(a),
        c.__srcContext.putImageData(c.__srcImageData, 0, 0))
      : a.type == Za.DATA &&
        null != c.__srcImageData &&
        a.dirty &&
        (c.__srcContext.putImageData(c.__srcImageData, 0, 0), (a.dirty = !1));
    b
      ? ((c.data = null), (c.__srcImageData = null))
      : null == c.data &&
        null != c.__srcImageData &&
        (c.data = c.__srcImageData.data);
    a.type = Za.CANVAS;
  };
  na.convertToData = function (a, b) {
    null == b && (b = !1);
    var c = a.buffer;
    null != c.__srcImage && na.convertToCanvas(a);
    if (null != c.__srcCanvas && null == c.data)
      na.createImageData(a), a.type == Za.CANVAS && (a.dirty = !1);
    else if (a.type == Za.CANVAS && null != c.__srcCanvas && a.dirty) {
      if (null == c.__srcImageData) na.createImageData(a);
      else {
        c.__srcImageData = c.__srcContext.getImageData(0, 0, c.width, c.height);
        var d = c.__srcImageData.data.buffer;
        d = null != d ? new dd(d) : null;
        c.data = d;
      }
      a.dirty = !1;
    }
    b && ((a.buffer.__srcCanvas = null), (a.buffer.__srcContext = null));
    a.type = Za.DATA;
  };
  na.copyChannel = function (a, b, c, d, e, f) {
    na.convertToData(b);
    na.convertToData(a);
    Pa.copyChannel(a, b, c, d, e, f);
  };
  na.copyPixels = function (a, b, c, d, e, f, g) {
    null == g && (g = !1);
    null == d ||
      d.x >= a.width ||
      d.y >= a.height ||
      null == c ||
      1 > c.width ||
      1 > c.height ||
      (null != e &&
        e.get_transparent() &&
        (null == f && (f = new fe()),
        (b = a.clone()),
        b.copyChannel(
          e,
          new Dd(f.x, f.y, c.width, c.height),
          new fe(c.x, c.y),
          $a.ALPHA,
          $a.ALPHA
        )),
      na.convertToCanvas(a, !0),
      g ||
        (a.get_transparent() &&
          b.get_transparent() &&
          a.buffer.__srcContext.clearRect(
            d.x + a.offsetX,
            d.y + a.offsetY,
            c.width + a.offsetX,
            c.height + a.offsetY
          )),
      na.convertToCanvas(b),
      null != b.buffer.get_src() &&
        ((a.buffer.__srcContext.globalCompositeOperation = "source-over"),
        a.buffer.__srcContext.drawImage(
          b.buffer.get_src(),
          u["int"](c.x + b.offsetX),
          u["int"](c.y + b.offsetY),
          u["int"](c.width),
          u["int"](c.height),
          u["int"](d.x + a.offsetX),
          u["int"](d.y + a.offsetY),
          u["int"](c.width),
          u["int"](c.height)
        )),
      (a.dirty = !0),
      a.version++);
  };
  na.createCanvas = function (a, b, c) {
    var d = a.buffer;
    null == d.__srcCanvas &&
      ((d.__srcCanvas = T.get_document().createElement("canvas")),
      (d.__srcCanvas.width = b),
      (d.__srcCanvas.height = c),
      a.get_transparent()
        ? (d.__srcContext = d.__srcCanvas.getContext("2d"))
        : (a.get_transparent() ||
            d.__srcCanvas.setAttribute("moz-opaque", "true"),
          (d.__srcContext = d.__srcCanvas.getContext("2d", { alpha: !1 }))),
      (d.__srcContext.imageSmoothingEnabled = !1));
  };
  na.createImageData = function (a) {
    a = a.buffer;
    if (null == a.__srcImageData) {
      null == a.data
        ? (a.__srcImageData = a.__srcContext.getImageData(
            0,
            0,
            a.width,
            a.height
          ))
        : ((a.__srcImageData = a.__srcContext.createImageData(
            a.width,
            a.height
          )),
          a.__srcImageData.data.set(a.data));
      var b = a.__srcImageData.data.buffer;
      b = null != b ? new dd(b) : null;
      a.data = b;
    }
  };
  na.fillRect = function (a, b, c, d) {
    na.convertToCanvas(a);
    if (1 == d) {
      d = (c >> 16) & 255;
      var e = (c >> 8) & 255;
      var f = c & 255;
      c = a.get_transparent() ? (c >> 24) & 255 : 255;
    } else
      (d = (c >> 24) & 255),
        (e = (c >> 16) & 255),
        (f = (c >> 8) & 255),
        (c = a.get_transparent() ? c & 255 : 255);
    0 == b.x &&
    0 == b.y &&
    b.width == a.width &&
    b.height == a.height &&
    a.get_transparent() &&
    0 == c
      ? (a.buffer.__srcCanvas.width = a.buffer.width)
      : (255 > c &&
          a.buffer.__srcContext.clearRect(
            b.x + a.offsetX,
            b.y + a.offsetY,
            b.width + a.offsetX,
            b.height + a.offsetY
          ),
        0 < c &&
          ((a.buffer.__srcContext.fillStyle =
            "rgba(" + d + ", " + e + ", " + f + ", " + c / 255 + ")"),
          a.buffer.__srcContext.fillRect(
            b.x + a.offsetX,
            b.y + a.offsetY,
            b.width + a.offsetX,
            b.height + a.offsetY
          )),
        (a.dirty = !0),
        a.version++);
  };
  na.sync = function (a, b) {
    null != a &&
      (a.type != Za.CANVAS ||
      (null == a.buffer.__srcCanvas && null == a.buffer.data)
        ? a.type == Za.DATA && na.convertToData(a, b)
        : na.convertToCanvas(a, b));
  };
  var Pa = function () {};
  l["lime._internal.graphics.ImageDataUtil"] = Pa;
  Pa.__name__ = ["lime", "_internal", "graphics", "ImageDataUtil"];
  Pa.colorTransform = function (a, b, c) {
    var d = a.buffer.data;
    if (null != d) {
      var e = a.buffer.format,
        f = a.buffer.premultiplied;
      b = new Ed(a, b);
      var g = Ma.getAlphaTable(c),
        h = Ma.getRedTable(c),
        n = Ma.getGreenTable(c);
      c = Ma.getBlueTable(c);
      for (var p, k, l, m = 0, q = b.height; m < q; ) {
        p = m++;
        p = b.row(p);
        for (var E = 0, r = b.width; E < r; ) {
          k = E++;
          k = p + 4 * k;
          switch (e) {
            case 0:
              l =
                ((d[k] & 255) << 24) |
                ((d[k + 1] & 255) << 16) |
                ((d[k + 2] & 255) << 8) |
                (d[k + 3] & 255);
              break;
            case 1:
              l =
                ((d[k + 1] & 255) << 24) |
                ((d[k + 2] & 255) << 16) |
                ((d[k + 3] & 255) << 8) |
                (d[k] & 255);
              break;
            case 2:
              l =
                ((d[k + 2] & 255) << 24) |
                ((d[k + 1] & 255) << 16) |
                ((d[k] & 255) << 8) |
                (d[k + 3] & 255);
          }
          f &&
            0 != (l & 255) &&
            255 != (l & 255) &&
            ((H.unmult = 255 / (l & 255)),
            (l =
              ((H.__clamp[Math.round(((l >>> 24) & 255) * H.unmult)] & 255) <<
                24) |
              ((H.__clamp[Math.round(((l >>> 16) & 255) * H.unmult)] & 255) <<
                16) |
              ((H.__clamp[Math.round(((l >>> 8) & 255) * H.unmult)] & 255) <<
                8) |
              (l & 255)));
          l =
            ((h[(l >>> 24) & 255] & 255) << 24) |
            ((n[(l >>> 16) & 255] & 255) << 16) |
            ((c[(l >>> 8) & 255] & 255) << 8) |
            (g[l & 255] & 255);
          f &&
            (0 == (l & 255)
              ? 0 != l && (l = 0)
              : 255 != (l & 255) &&
                ((H.a16 = H.__alpha16[l & 255]),
                (l =
                  ((((((l >>> 24) & 255) * H.a16) >> 16) & 255) << 24) |
                  ((((((l >>> 16) & 255) * H.a16) >> 16) & 255) << 16) |
                  ((((((l >>> 8) & 255) * H.a16) >> 16) & 255) << 8) |
                  (l & 255))));
          switch (e) {
            case 0:
              d[k] = (l >>> 24) & 255;
              d[k + 1] = (l >>> 16) & 255;
              d[k + 2] = (l >>> 8) & 255;
              d[k + 3] = l & 255;
              break;
            case 1:
              d[k] = l & 255;
              d[k + 1] = (l >>> 24) & 255;
              d[k + 2] = (l >>> 16) & 255;
              d[k + 3] = (l >>> 8) & 255;
              break;
            case 2:
              (d[k] = (l >>> 8) & 255),
                (d[k + 1] = (l >>> 16) & 255),
                (d[k + 2] = (l >>> 24) & 255),
                (d[k + 3] = l & 255);
          }
        }
      }
      a.dirty = !0;
      a.version++;
    }
  };
  Pa.copyChannel = function (a, b, c, d, e, f) {
    switch (I.enumIndex(f)) {
      case 0:
        var g = 0;
        break;
      case 1:
        g = 1;
        break;
      case 2:
        g = 2;
        break;
      case 3:
        g = 3;
    }
    switch (I.enumIndex(e)) {
      case 0:
        var h = 0;
        break;
      case 1:
        h = 1;
        break;
      case 2:
        h = 2;
        break;
      case 3:
        h = 3;
    }
    e = b.buffer.data;
    f = a.buffer.data;
    if (null != e && null != f) {
      c = new Ed(b, c);
      d = new Ed(a, new Dd(d.x, d.y, c.width, c.height));
      var n = b.buffer.format,
        p = a.buffer.format;
      b = b.buffer.premultiplied;
      for (
        var k = a.buffer.premultiplied, l, m, q, E, r = 0, u = 0, t = d.height;
        u < t;

      ) {
        m = u++;
        l = c.row(m);
        m = d.row(m);
        for (var v = 0, w = d.width; v < w; ) {
          v++;
          switch (n) {
            case 0:
              q =
                ((e[l] & 255) << 24) |
                ((e[l + 1] & 255) << 16) |
                ((e[l + 2] & 255) << 8) |
                (e[l + 3] & 255);
              break;
            case 1:
              q =
                ((e[l + 1] & 255) << 24) |
                ((e[l + 2] & 255) << 16) |
                ((e[l + 3] & 255) << 8) |
                (e[l] & 255);
              break;
            case 2:
              q =
                ((e[l + 2] & 255) << 24) |
                ((e[l + 1] & 255) << 16) |
                ((e[l] & 255) << 8) |
                (e[l + 3] & 255);
          }
          b &&
            0 != (q & 255) &&
            255 != (q & 255) &&
            ((H.unmult = 255 / (q & 255)),
            (q =
              ((H.__clamp[Math.round(((q >>> 24) & 255) * H.unmult)] & 255) <<
                24) |
              ((H.__clamp[Math.round(((q >>> 16) & 255) * H.unmult)] & 255) <<
                16) |
              ((H.__clamp[Math.round(((q >>> 8) & 255) * H.unmult)] & 255) <<
                8) |
              (q & 255)));
          switch (p) {
            case 0:
              E =
                ((f[m] & 255) << 24) |
                ((f[m + 1] & 255) << 16) |
                ((f[m + 2] & 255) << 8) |
                (f[m + 3] & 255);
              break;
            case 1:
              E =
                ((f[m + 1] & 255) << 24) |
                ((f[m + 2] & 255) << 16) |
                ((f[m + 3] & 255) << 8) |
                (f[m] & 255);
              break;
            case 2:
              E =
                ((f[m + 2] & 255) << 24) |
                ((f[m + 1] & 255) << 16) |
                ((f[m] & 255) << 8) |
                (f[m + 3] & 255);
          }
          k &&
            0 != (E & 255) &&
            255 != (E & 255) &&
            ((H.unmult = 255 / (E & 255)),
            (E =
              ((H.__clamp[Math.round(((E >>> 24) & 255) * H.unmult)] & 255) <<
                24) |
              ((H.__clamp[Math.round(((E >>> 16) & 255) * H.unmult)] & 255) <<
                16) |
              ((H.__clamp[Math.round(((E >>> 8) & 255) * H.unmult)] & 255) <<
                8) |
              (E & 255)));
          switch (h) {
            case 0:
              r = (q >>> 24) & 255;
              break;
            case 1:
              r = (q >>> 16) & 255;
              break;
            case 2:
              r = (q >>> 8) & 255;
              break;
            case 3:
              r = q & 255;
          }
          switch (g) {
            case 0:
              E =
                ((r & 255) << 24) |
                (((E >>> 16) & 255) << 16) |
                (((E >>> 8) & 255) << 8) |
                (E & 255);
              break;
            case 1:
              E =
                (((E >>> 24) & 255) << 24) |
                ((r & 255) << 16) |
                (((E >>> 8) & 255) << 8) |
                (E & 255);
              break;
            case 2:
              E =
                (((E >>> 24) & 255) << 24) |
                (((E >>> 16) & 255) << 16) |
                ((r & 255) << 8) |
                (E & 255);
              break;
            case 3:
              E =
                (((E >>> 24) & 255) << 24) |
                (((E >>> 16) & 255) << 16) |
                (((E >>> 8) & 255) << 8) |
                (r & 255);
          }
          k &&
            (0 == (E & 255)
              ? 0 != E && (E = 0)
              : 255 != (E & 255) &&
                ((H.a16 = H.__alpha16[E & 255]),
                (E =
                  ((((((E >>> 24) & 255) * H.a16) >> 16) & 255) << 24) |
                  ((((((E >>> 16) & 255) * H.a16) >> 16) & 255) << 16) |
                  ((((((E >>> 8) & 255) * H.a16) >> 16) & 255) << 8) |
                  (E & 255))));
          switch (p) {
            case 0:
              f[m] = (E >>> 24) & 255;
              f[m + 1] = (E >>> 16) & 255;
              f[m + 2] = (E >>> 8) & 255;
              f[m + 3] = E & 255;
              break;
            case 1:
              f[m] = E & 255;
              f[m + 1] = (E >>> 24) & 255;
              f[m + 2] = (E >>> 16) & 255;
              f[m + 3] = (E >>> 8) & 255;
              break;
            case 2:
              (f[m] = (E >>> 8) & 255),
                (f[m + 1] = (E >>> 16) & 255),
                (f[m + 2] = (E >>> 24) & 255),
                (f[m + 3] = E & 255);
          }
          l += 4;
          m += 4;
        }
      }
      a.dirty = !0;
      a.version++;
    }
  };
  Pa.copyPixels = function (a, b, c, d, e, f, g) {
    null == g && (g = !1);
    if (
      a.width == b.width &&
      a.height == b.height &&
      c.width == b.width &&
      c.height == b.height &&
      0 == c.x &&
      0 == c.y &&
      0 == d.x &&
      0 == d.y &&
      null == e &&
      null == f &&
      0 == g &&
      a.get_format() == b.get_format()
    )
      a.buffer.data.set(b.buffer.data);
    else {
      var h = b.buffer.data,
        n = a.buffer.data;
      if (null == h || null == n) return;
      c = new Ed(b, c);
      var p = new Dd(d.x, d.y, c.width, c.height);
      p = new Ed(a, p);
      var k = b.buffer.format,
        l = a.buffer.format,
        m = b.buffer.premultiplied,
        q = a.buffer.premultiplied;
      var E = u["int"](b.buffer.bitsPerPixel / 8);
      b = u["int"](a.buffer.bitsPerPixel / 8);
      var r = null != e && e.get_transparent();
      var t = g || (r && !a.get_transparent());
      if (r)
        if (
          (null == f && (f = new fe()),
          (b = e.buffer.data),
          (g = e.buffer.format),
          (f = new Ed(e, new Dd(f.x, f.y, e.width, e.height))),
          f.offset(c.x, c.y),
          p.clip(u["int"](d.x), u["int"](d.y), f.width, f.height),
          t)
        )
          for (var v = 0, w = p.height; v < w; ) {
            t = v++;
            d = c.row(t);
            e = p.row(t);
            var x = f.row(t);
            for (var y = 0, A = p.width; y < A; ) {
              y++;
              switch (k) {
                case 0:
                  var R =
                    ((h[d] & 255) << 24) |
                    ((h[d + 1] & 255) << 16) |
                    ((h[d + 2] & 255) << 8) |
                    (h[d + 3] & 255);
                  break;
                case 1:
                  R =
                    ((h[d + 1] & 255) << 24) |
                    ((h[d + 2] & 255) << 16) |
                    ((h[d + 3] & 255) << 8) |
                    (h[d] & 255);
                  break;
                case 2:
                  R =
                    ((h[d + 2] & 255) << 24) |
                    ((h[d + 1] & 255) << 16) |
                    ((h[d] & 255) << 8) |
                    (h[d + 3] & 255);
              }
              m &&
                0 != (R & 255) &&
                255 != (R & 255) &&
                ((H.unmult = 255 / (R & 255)),
                (R =
                  ((H.__clamp[Math.round(((R >>> 24) & 255) * H.unmult)] &
                    255) <<
                    24) |
                  ((H.__clamp[Math.round(((R >>> 16) & 255) * H.unmult)] &
                    255) <<
                    16) |
                  ((H.__clamp[Math.round(((R >>> 8) & 255) * H.unmult)] &
                    255) <<
                    8) |
                  (R & 255)));
              switch (l) {
                case 0:
                  var K =
                    ((n[e] & 255) << 24) |
                    ((n[e + 1] & 255) << 16) |
                    ((n[e + 2] & 255) << 8) |
                    (n[e + 3] & 255);
                  break;
                case 1:
                  K =
                    ((n[e + 1] & 255) << 24) |
                    ((n[e + 2] & 255) << 16) |
                    ((n[e + 3] & 255) << 8) |
                    (n[e] & 255);
                  break;
                case 2:
                  K =
                    ((n[e + 2] & 255) << 24) |
                    ((n[e + 1] & 255) << 16) |
                    ((n[e] & 255) << 8) |
                    (n[e + 3] & 255);
              }
              q &&
                0 != (K & 255) &&
                255 != (K & 255) &&
                ((H.unmult = 255 / (K & 255)),
                (K =
                  ((H.__clamp[Math.round(((K >>> 24) & 255) * H.unmult)] &
                    255) <<
                    24) |
                  ((H.__clamp[Math.round(((K >>> 16) & 255) * H.unmult)] &
                    255) <<
                    16) |
                  ((H.__clamp[Math.round(((K >>> 8) & 255) * H.unmult)] &
                    255) <<
                    8) |
                  (K & 255)));
              switch (g) {
                case 0:
                  var z =
                    ((b[x] & 255) << 24) |
                    ((b[x + 1] & 255) << 16) |
                    ((b[x + 2] & 255) << 8) |
                    (b[x + 3] & 255);
                  break;
                case 1:
                  z =
                    ((b[x + 1] & 255) << 24) |
                    ((b[x + 2] & 255) << 16) |
                    ((b[x + 3] & 255) << 8) |
                    (b[x] & 255);
                  break;
                case 2:
                  z =
                    ((b[x + 2] & 255) << 24) |
                    ((b[x + 1] & 255) << 16) |
                    ((b[x] & 255) << 8) |
                    (b[x + 3] & 255);
              }
              t = ((z & 255) / 255) * ((R & 255) / 255);
              if (0 < t) {
                E = (K & 255) / 255;
                r = 1 - t;
                var Ac = t + E * r;
                K =
                  ((H.__clamp[
                    Math.round(
                      (((R >>> 24) & 255) * t + ((K >>> 24) & 255) * E * r) / Ac
                    )
                  ] &
                    255) <<
                    24) |
                  (((K >>> 16) & 255) << 16) |
                  (((K >>> 8) & 255) << 8) |
                  (K & 255);
                K =
                  (((K >>> 24) & 255) << 24) |
                  ((H.__clamp[
                    Math.round(
                      (((R >>> 16) & 255) * t + ((K >>> 16) & 255) * E * r) / Ac
                    )
                  ] &
                    255) <<
                    16) |
                  (((K >>> 8) & 255) << 8) |
                  (K & 255);
                K =
                  (((K >>> 24) & 255) << 24) |
                  (((K >>> 16) & 255) << 16) |
                  ((H.__clamp[
                    Math.round(
                      (((R >>> 8) & 255) * t + ((K >>> 8) & 255) * E * r) / Ac
                    )
                  ] &
                    255) <<
                    8) |
                  (K & 255);
                K =
                  (((K >>> 24) & 255) << 24) |
                  (((K >>> 16) & 255) << 16) |
                  (((K >>> 8) & 255) << 8) |
                  (H.__clamp[Math.round(255 * Ac)] & 255);
                q &&
                  (0 == (K & 255)
                    ? 0 != K && (K = 0)
                    : 255 != (K & 255) &&
                      ((H.a16 = H.__alpha16[K & 255]),
                      (K =
                        ((((((K >>> 24) & 255) * H.a16) >> 16) & 255) << 24) |
                        ((((((K >>> 16) & 255) * H.a16) >> 16) & 255) << 16) |
                        ((((((K >>> 8) & 255) * H.a16) >> 16) & 255) << 8) |
                        (K & 255))));
                switch (l) {
                  case 0:
                    n[e] = (K >>> 24) & 255;
                    n[e + 1] = (K >>> 16) & 255;
                    n[e + 2] = (K >>> 8) & 255;
                    n[e + 3] = K & 255;
                    break;
                  case 1:
                    n[e] = K & 255;
                    n[e + 1] = (K >>> 24) & 255;
                    n[e + 2] = (K >>> 16) & 255;
                    n[e + 3] = (K >>> 8) & 255;
                    break;
                  case 2:
                    (n[e] = (K >>> 8) & 255),
                      (n[e + 1] = (K >>> 16) & 255),
                      (n[e + 2] = (K >>> 24) & 255),
                      (n[e + 3] = K & 255);
                }
              }
              d += 4;
              e += 4;
              x += 4;
            }
          }
        else
          for (K = 0, t = p.height; K < t; )
            for (
              E = K++,
                d = c.row(E),
                e = p.row(E),
                x = f.row(E),
                E = 0,
                r = p.width;
              E < r;

            ) {
              E++;
              switch (k) {
                case 0:
                  R =
                    ((h[d] & 255) << 24) |
                    ((h[d + 1] & 255) << 16) |
                    ((h[d + 2] & 255) << 8) |
                    (h[d + 3] & 255);
                  break;
                case 1:
                  R =
                    ((h[d + 1] & 255) << 24) |
                    ((h[d + 2] & 255) << 16) |
                    ((h[d + 3] & 255) << 8) |
                    (h[d] & 255);
                  break;
                case 2:
                  R =
                    ((h[d + 2] & 255) << 24) |
                    ((h[d + 1] & 255) << 16) |
                    ((h[d] & 255) << 8) |
                    (h[d + 3] & 255);
              }
              m &&
                0 != (R & 255) &&
                255 != (R & 255) &&
                ((H.unmult = 255 / (R & 255)),
                (R =
                  ((H.__clamp[Math.round(((R >>> 24) & 255) * H.unmult)] &
                    255) <<
                    24) |
                  ((H.__clamp[Math.round(((R >>> 16) & 255) * H.unmult)] &
                    255) <<
                    16) |
                  ((H.__clamp[Math.round(((R >>> 8) & 255) * H.unmult)] &
                    255) <<
                    8) |
                  (R & 255)));
              switch (g) {
                case 0:
                  z =
                    ((b[x] & 255) << 24) |
                    ((b[x + 1] & 255) << 16) |
                    ((b[x + 2] & 255) << 8) |
                    (b[x + 3] & 255);
                  break;
                case 1:
                  z =
                    ((b[x + 1] & 255) << 24) |
                    ((b[x + 2] & 255) << 16) |
                    ((b[x + 3] & 255) << 8) |
                    (b[x] & 255);
                  break;
                case 2:
                  z =
                    ((b[x + 2] & 255) << 24) |
                    ((b[x + 1] & 255) << 16) |
                    ((b[x] & 255) << 8) |
                    (b[x + 3] & 255);
              }
              R =
                (((R >>> 24) & 255) << 24) |
                (((R >>> 16) & 255) << 16) |
                (((R >>> 8) & 255) << 8) |
                (Math.round(((z & 255) / 255) * (R & 255)) & 255);
              q &&
                (0 == (R & 255)
                  ? 0 != R && (R = 0)
                  : 255 != (R & 255) &&
                    ((H.a16 = H.__alpha16[R & 255]),
                    (R =
                      ((((((R >>> 24) & 255) * H.a16) >> 16) & 255) << 24) |
                      ((((((R >>> 16) & 255) * H.a16) >> 16) & 255) << 16) |
                      ((((((R >>> 8) & 255) * H.a16) >> 16) & 255) << 8) |
                      (R & 255))));
              switch (l) {
                case 0:
                  n[e] = (R >>> 24) & 255;
                  n[e + 1] = (R >>> 16) & 255;
                  n[e + 2] = (R >>> 8) & 255;
                  n[e + 3] = R & 255;
                  break;
                case 1:
                  n[e] = R & 255;
                  n[e + 1] = (R >>> 24) & 255;
                  n[e + 2] = (R >>> 16) & 255;
                  n[e + 3] = (R >>> 8) & 255;
                  break;
                case 2:
                  (n[e] = (R >>> 8) & 255),
                    (n[e + 1] = (R >>> 16) & 255),
                    (n[e + 2] = (R >>> 24) & 255),
                    (n[e + 3] = R & 255);
              }
              d += 4;
              e += 4;
              x += 4;
            }
      else if (t)
        for (z = 0, b = p.height; z < b; )
          for (
            e = z++, d = c.row(e), e = p.row(e), g = 0, f = p.width;
            g < f;

          ) {
            g++;
            switch (k) {
              case 0:
                R =
                  ((h[d] & 255) << 24) |
                  ((h[d + 1] & 255) << 16) |
                  ((h[d + 2] & 255) << 8) |
                  (h[d + 3] & 255);
                break;
              case 1:
                R =
                  ((h[d + 1] & 255) << 24) |
                  ((h[d + 2] & 255) << 16) |
                  ((h[d + 3] & 255) << 8) |
                  (h[d] & 255);
                break;
              case 2:
                R =
                  ((h[d + 2] & 255) << 24) |
                  ((h[d + 1] & 255) << 16) |
                  ((h[d] & 255) << 8) |
                  (h[d + 3] & 255);
            }
            m &&
              0 != (R & 255) &&
              255 != (R & 255) &&
              ((H.unmult = 255 / (R & 255)),
              (R =
                ((H.__clamp[Math.round(((R >>> 24) & 255) * H.unmult)] & 255) <<
                  24) |
                ((H.__clamp[Math.round(((R >>> 16) & 255) * H.unmult)] & 255) <<
                  16) |
                ((H.__clamp[Math.round(((R >>> 8) & 255) * H.unmult)] & 255) <<
                  8) |
                (R & 255)));
            switch (l) {
              case 0:
                K =
                  ((n[e] & 255) << 24) |
                  ((n[e + 1] & 255) << 16) |
                  ((n[e + 2] & 255) << 8) |
                  (n[e + 3] & 255);
                break;
              case 1:
                K =
                  ((n[e + 1] & 255) << 24) |
                  ((n[e + 2] & 255) << 16) |
                  ((n[e + 3] & 255) << 8) |
                  (n[e] & 255);
                break;
              case 2:
                K =
                  ((n[e + 2] & 255) << 24) |
                  ((n[e + 1] & 255) << 16) |
                  ((n[e] & 255) << 8) |
                  (n[e + 3] & 255);
            }
            q &&
              0 != (K & 255) &&
              255 != (K & 255) &&
              ((H.unmult = 255 / (K & 255)),
              (K =
                ((H.__clamp[Math.round(((K >>> 24) & 255) * H.unmult)] & 255) <<
                  24) |
                ((H.__clamp[Math.round(((K >>> 16) & 255) * H.unmult)] & 255) <<
                  16) |
                ((H.__clamp[Math.round(((K >>> 8) & 255) * H.unmult)] & 255) <<
                  8) |
                (K & 255)));
            t = (R & 255) / 255;
            E = (K & 255) / 255;
            r = 1 - t;
            Ac = t + E * r;
            0 == Ac
              ? (K = 0)
              : ((K =
                  ((H.__clamp[
                    Math.round(
                      (((R >>> 24) & 255) * t + ((K >>> 24) & 255) * E * r) / Ac
                    )
                  ] &
                    255) <<
                    24) |
                  (((K >>> 16) & 255) << 16) |
                  (((K >>> 8) & 255) << 8) |
                  (K & 255)),
                (K =
                  (((K >>> 24) & 255) << 24) |
                  ((H.__clamp[
                    Math.round(
                      (((R >>> 16) & 255) * t + ((K >>> 16) & 255) * E * r) / Ac
                    )
                  ] &
                    255) <<
                    16) |
                  (((K >>> 8) & 255) << 8) |
                  (K & 255)),
                (K =
                  (((K >>> 24) & 255) << 24) |
                  (((K >>> 16) & 255) << 16) |
                  ((H.__clamp[
                    Math.round(
                      (((R >>> 8) & 255) * t + ((K >>> 8) & 255) * E * r) / Ac
                    )
                  ] &
                    255) <<
                    8) |
                  (K & 255)),
                (K =
                  (((K >>> 24) & 255) << 24) |
                  (((K >>> 16) & 255) << 16) |
                  (((K >>> 8) & 255) << 8) |
                  (H.__clamp[Math.round(255 * Ac)] & 255)));
            q &&
              (0 == (K & 255)
                ? 0 != K && (K = 0)
                : 255 != (K & 255) &&
                  ((H.a16 = H.__alpha16[K & 255]),
                  (K =
                    ((((((K >>> 24) & 255) * H.a16) >> 16) & 255) << 24) |
                    ((((((K >>> 16) & 255) * H.a16) >> 16) & 255) << 16) |
                    ((((((K >>> 8) & 255) * H.a16) >> 16) & 255) << 8) |
                    (K & 255))));
            switch (l) {
              case 0:
                n[e] = (K >>> 24) & 255;
                n[e + 1] = (K >>> 16) & 255;
                n[e + 2] = (K >>> 8) & 255;
                n[e + 3] = K & 255;
                break;
              case 1:
                n[e] = K & 255;
                n[e + 1] = (K >>> 24) & 255;
                n[e + 2] = (K >>> 16) & 255;
                n[e + 3] = (K >>> 8) & 255;
                break;
              case 2:
                (n[e] = (K >>> 8) & 255),
                  (n[e + 1] = (K >>> 16) & 255),
                  (n[e + 2] = (K >>> 24) & 255),
                  (n[e + 3] = K & 255);
            }
            d += 4;
            e += 4;
          }
      else if (k == l && m == q && E == b)
        for (R = 0, k = p.height; R < k; )
          (l = R++),
            (d = c.row(l)),
            (e = p.row(l)),
            n.set(h.subarray(d, d + p.width * b), e);
      else
        for (K = 0, z = p.height; K < z; )
          for (
            e = K++, d = c.row(e), e = p.row(e), b = 0, g = p.width;
            b < g;

          ) {
            b++;
            switch (k) {
              case 0:
                R =
                  ((h[d] & 255) << 24) |
                  ((h[d + 1] & 255) << 16) |
                  ((h[d + 2] & 255) << 8) |
                  (h[d + 3] & 255);
                break;
              case 1:
                R =
                  ((h[d + 1] & 255) << 24) |
                  ((h[d + 2] & 255) << 16) |
                  ((h[d + 3] & 255) << 8) |
                  (h[d] & 255);
                break;
              case 2:
                R =
                  ((h[d + 2] & 255) << 24) |
                  ((h[d + 1] & 255) << 16) |
                  ((h[d] & 255) << 8) |
                  (h[d + 3] & 255);
            }
            m &&
              0 != (R & 255) &&
              255 != (R & 255) &&
              ((H.unmult = 255 / (R & 255)),
              (R =
                ((H.__clamp[Math.round(((R >>> 24) & 255) * H.unmult)] & 255) <<
                  24) |
                ((H.__clamp[Math.round(((R >>> 16) & 255) * H.unmult)] & 255) <<
                  16) |
                ((H.__clamp[Math.round(((R >>> 8) & 255) * H.unmult)] & 255) <<
                  8) |
                (R & 255)));
            q &&
              (0 == (R & 255)
                ? 0 != R && (R = 0)
                : 255 != (R & 255) &&
                  ((H.a16 = H.__alpha16[R & 255]),
                  (R =
                    ((((((R >>> 24) & 255) * H.a16) >> 16) & 255) << 24) |
                    ((((((R >>> 16) & 255) * H.a16) >> 16) & 255) << 16) |
                    ((((((R >>> 8) & 255) * H.a16) >> 16) & 255) << 8) |
                    (R & 255))));
            switch (l) {
              case 0:
                n[e] = (R >>> 24) & 255;
                n[e + 1] = (R >>> 16) & 255;
                n[e + 2] = (R >>> 8) & 255;
                n[e + 3] = R & 255;
                break;
              case 1:
                n[e] = R & 255;
                n[e + 1] = (R >>> 24) & 255;
                n[e + 2] = (R >>> 16) & 255;
                n[e + 3] = (R >>> 8) & 255;
                break;
              case 2:
                (n[e] = (R >>> 8) & 255),
                  (n[e + 1] = (R >>> 16) & 255),
                  (n[e + 2] = (R >>> 24) & 255),
                  (n[e + 3] = R & 255);
            }
            d += 4;
            e += 4;
          }
    }
    a.dirty = !0;
    a.version++;
  };
  Pa.fillRect = function (a, b, c, d) {
    switch (d) {
      case 1:
        c =
          (((c >>> 16) & 255) << 24) |
          (((c >>> 8) & 255) << 16) |
          ((c & 255) << 8) |
          ((c >>> 24) & 255);
        break;
      case 2:
        c =
          (((c >>> 8) & 255) << 24) |
          (((c >>> 16) & 255) << 16) |
          (((c >>> 24) & 255) << 8) |
          (c & 255);
    }
    a.get_transparent() ||
      (c =
        (((c >>> 24) & 255) << 24) |
        (((c >>> 16) & 255) << 16) |
        (((c >>> 8) & 255) << 8) |
        255);
    d = a.buffer.data;
    if (null != d) {
      var e = a.buffer.format;
      a.buffer.premultiplied &&
        (0 == (c & 255)
          ? 0 != c && (c = 0)
          : 255 != (c & 255) &&
            ((H.a16 = H.__alpha16[c & 255]),
            (c =
              ((((((c >>> 24) & 255) * H.a16) >> 16) & 255) << 24) |
              ((((((c >>> 16) & 255) * H.a16) >> 16) & 255) << 16) |
              ((((((c >>> 8) & 255) * H.a16) >> 16) & 255) << 8) |
              (c & 255))));
      b = new Ed(a, b);
      for (var f, g = 0, h = b.height; g < h; ) {
        f = g++;
        f = b.row(f);
        for (var n = 0, p = b.width; n < p; ) {
          var k = n++;
          k = f + 4 * k;
          switch (e) {
            case 0:
              d[k] = (c >>> 24) & 255;
              d[k + 1] = (c >>> 16) & 255;
              d[k + 2] = (c >>> 8) & 255;
              d[k + 3] = c & 255;
              break;
            case 1:
              d[k] = c & 255;
              d[k + 1] = (c >>> 24) & 255;
              d[k + 2] = (c >>> 16) & 255;
              d[k + 3] = (c >>> 8) & 255;
              break;
            case 2:
              (d[k] = (c >>> 8) & 255),
                (d[k + 1] = (c >>> 16) & 255),
                (d[k + 2] = (c >>> 24) & 255),
                (d[k + 3] = c & 255);
          }
        }
      }
      a.dirty = !0;
      a.version++;
    }
  };
  Pa.gaussianBlur = function (a, b, c, d, e, f, g, h) {
    null == h && (h = 1);
    null == g && (g = 1);
    null == f && (f = 4);
    null == e && (e = 4);
    var n = a.get_premultiplied(),
      p = b.get_premultiplied();
    n && a.set_premultiplied(!1);
    p && b.set_premultiplied(!1);
    var k = function (a, b) {
        var c = Math.floor(Math.sqrt((12 * a * a) / b + 1));
        0 == c % 2 && --c;
        var d = c + 2;
        a = Math.round(
          (12 * a * a - b * c * c - 4 * b * c - 3 * b) / (-4 * c - 4)
        );
        for (var e = [], f = 0; f < b; ) {
          var g = f++;
          e.push(g < a ? c : d);
        }
        return e;
      },
      l = function (a, b, c, d, e, f) {
        for (var g = 1 / (e + e + 1), h = 0; h < d; ) {
          for (
            var n = h++ * c,
              p = n,
              k = n + e,
              l = a[4 * n + f],
              Vf = a[4 * (n + c - 1) + f],
              m = (e + 1) * l,
              q = 0,
              Xb = e;
            q < Xb;

          ) {
            var r = q++;
            m += a[4 * (n + r) + f];
          }
          q = 0;
          for (Xb = e + 1; q < Xb; )
            q++,
              (m += a[4 * k + f] - l),
              (b[4 * n + f] = Math.round(Mb.toFloat(m) * g)),
              ++k,
              ++n;
          l = e + 1;
          for (q = c - e; l < q; )
            l++,
              (m += a[4 * k + f] - a[4 * p + f]),
              (b[4 * n + f] = Math.round(Mb.toFloat(m) * g)),
              ++k,
              ++p,
              ++n;
          k = c - e;
          for (l = c; k < l; )
            k++,
              (m += Vf - a[4 * p + f]),
              (b[4 * n + f] = Math.round(Mb.toFloat(m) * g)),
              ++p,
              ++n;
        }
      },
      m = function (a, b, c, d, e, f) {
        for (var g = 1 / (e + e + 1), h = 4 * c, n = 0; n < c; ) {
          for (
            var p = 4 * n++ + f,
              k = p,
              l = p + e * h,
              Vf = a[p],
              m = a[p + h * (d - 1)],
              q = (e + 1) * Vf,
              Xb = 0,
              r = e;
            Xb < r;

          ) {
            var E = Xb++;
            q += a[p + E * h];
          }
          Xb = 0;
          for (r = e + 1; Xb < r; )
            Xb++,
              (q += a[l] - Vf),
              (b[p] = Math.round(Mb.toFloat(q) * g)),
              (l += h),
              (p += h);
          Vf = e + 1;
          for (Xb = d - e; Vf < Xb; )
            Vf++,
              (q += a[l] - a[k]),
              (b[p] = Math.round(Mb.toFloat(q) * g)),
              (k += h),
              (l += h),
              (p += h);
          l = d - e;
          for (Vf = d; l < Vf; )
            l++,
              (q += m - a[k]),
              (b[p] = Math.round(Mb.toFloat(q) * g)),
              (k += h),
              (p += h);
        }
      },
      q = function (a, b, c, d, e, f) {
        for (var g = 0, h = a.length; g < h; ) {
          var n = g++;
          b[n] = a[n];
        }
        g = u["int"](e);
        l(b, a, c, d, g, 0);
        g = u["int"](e);
        l(b, a, c, d, g, 1);
        g = u["int"](e);
        l(b, a, c, d, g, 2);
        e = u["int"](e);
        l(b, a, c, d, e, 3);
        e = u["int"](f);
        m(a, b, c, d, e, 0);
        e = u["int"](f);
        m(a, b, c, d, e, 1);
        e = u["int"](f);
        m(a, b, c, d, e, 2);
        f = u["int"](f);
        m(a, b, c, d, f, 3);
      },
      E = a.get_data(),
      r = b.get_data(),
      t = u["int"](c.width);
    c = u["int"](c.height);
    var x = u["int"](e),
      v = u["int"](f);
    e = u["int"](d.x);
    var w = u["int"](d.y);
    f = 2 * g - 1;
    var y = 0.125 * Math.pow(2, g);
    g = k(x * y, f);
    k = k(v * y, f);
    e = u["int"](4 * (t * w + e));
    q(r, E, t, c, (g[0] - 1) / 2, (k[0] - 1) / 2);
    w = 1;
    x = 0;
    for (f = u["int"](f / 2); x < f; )
      x++,
        q(E, r, t, c, (g[w] - 1) / 2, (k[w] - 1) / 2),
        q(r, E, t, c, (g[w + 1] - 1) / 2, (k[w + 1] - 1) / 2),
        (w += 2);
    if (0 >= e)
      for (r = 0; r < c; ) {
        for (q = 0; q < t; )
          Pa.translatePixel(E, b.get_rect(), a.get_rect(), d, q, r, h), ++q;
        ++r;
      }
    else
      for (r = c - 1; 0 <= r; ) {
        for (q = t - 1; 0 <= q; )
          Pa.translatePixel(E, b.get_rect(), a.get_rect(), d, q, r, h), --q;
        --r;
      }
    a.dirty = !0;
    a.version++;
    b.dirty = !0;
    b.version++;
    n && a.set_premultiplied(!0);
    p && b.set_premultiplied(!0);
    return E == a.get_data() ? a : b;
  };
  Pa.calculateSourceOffset = function (a, b, c, d) {
    c -= u["int"](b.x);
    b = d - u["int"](b.y);
    return 0 > c || 0 > b || c >= a.width || b >= a.height
      ? -1
      : 4 * (b * u["int"](a.width) + c);
  };
  Pa.translatePixel = function (a, b, c, d, e, f, g) {
    c = 4 * (f * u["int"](c.width) + e);
    b = Pa.calculateSourceOffset(b, d, e, f);
    0 > b
      ? (a[c] = a[c + 1] = a[c + 2] = a[c + 3] = 0)
      : ((a[c] = a[b]),
        (a[c + 1] = a[b + 1]),
        (a[c + 2] = a[b + 2]),
        (g = u["int"](Mb.toFloat(a[b + 3]) * g)),
        (a[c + 3] = 0 > g ? 0 : 255 < g ? 255 : g));
  };
  Pa.multiplyAlpha = function (a) {
    var b = a.buffer.data;
    if (null != b && a.buffer.transparent) {
      for (
        var c = a.buffer.format, d, e = 0, f = u["int"](b.length / 4);
        e < f;

      ) {
        var g = e++,
          h = 4 * g;
        switch (c) {
          case 0:
            d =
              ((b[h] & 255) << 24) |
              ((b[h + 1] & 255) << 16) |
              ((b[h + 2] & 255) << 8) |
              (b[h + 3] & 255);
            break;
          case 1:
            d =
              ((b[h + 1] & 255) << 24) |
              ((b[h + 2] & 255) << 16) |
              ((b[h + 3] & 255) << 8) |
              (b[h] & 255);
            break;
          case 2:
            d =
              ((b[h + 2] & 255) << 24) |
              ((b[h + 1] & 255) << 16) |
              ((b[h] & 255) << 8) |
              (b[h + 3] & 255);
        }
        g *= 4;
        0 == (d & 255)
          ? 0 != d && (d = 0)
          : 255 != (d & 255) &&
            ((H.a16 = H.__alpha16[d & 255]),
            (d =
              ((((((d >>> 24) & 255) * H.a16) >> 16) & 255) << 24) |
              ((((((d >>> 16) & 255) * H.a16) >> 16) & 255) << 16) |
              ((((((d >>> 8) & 255) * H.a16) >> 16) & 255) << 8) |
              (d & 255)));
        switch (c) {
          case 0:
            b[g] = (d >>> 24) & 255;
            b[g + 1] = (d >>> 16) & 255;
            b[g + 2] = (d >>> 8) & 255;
            b[g + 3] = d & 255;
            break;
          case 1:
            b[g] = d & 255;
            b[g + 1] = (d >>> 24) & 255;
            b[g + 2] = (d >>> 16) & 255;
            b[g + 3] = (d >>> 8) & 255;
            break;
          case 2:
            (b[g] = (d >>> 8) & 255),
              (b[g + 1] = (d >>> 16) & 255),
              (b[g + 2] = (d >>> 24) & 255),
              (b[g + 3] = d & 255);
        }
      }
      a.buffer.premultiplied = !0;
      a.dirty = !0;
      a.version++;
    }
  };
  Pa.setFormat = function (a, b) {
    var c = a.buffer.data;
    if (null != c) {
      var d = u["int"](c.length / 4);
      switch (a.get_format()) {
        case 0:
          var e = 0;
          var f = 1;
          var g = 2;
          var h = 3;
          break;
        case 1:
          e = 1;
          f = 2;
          g = 3;
          h = 0;
          break;
        case 2:
          (e = 2), (f = 1), (g = 0), (h = 3);
      }
      switch (b) {
        case 0:
          var n = 0;
          var p = 1;
          var k = 2;
          var l = 3;
          break;
        case 1:
          n = 1;
          p = 2;
          k = 3;
          l = 0;
          break;
        case 2:
          (n = 2), (p = 1), (k = 0), (l = 3);
      }
      for (var m = 0; m < d; ) {
        var q = 4 * m++;
        var r = c[q + e];
        var t = c[q + f];
        var x = c[q + g];
        var v = c[q + h];
        c[q + n] = r;
        c[q + p] = t;
        c[q + k] = x;
        c[q + l] = v;
      }
      a.buffer.format = b;
      a.dirty = !0;
      a.version++;
    }
  };
  Pa.unmultiplyAlpha = function (a) {
    var b = a.buffer.data;
    if (null != b) {
      for (
        var c = a.buffer.format, d, e = 0, f = u["int"](b.length / 4);
        e < f;

      ) {
        var g = e++,
          h = 4 * g;
        switch (c) {
          case 0:
            d =
              ((b[h] & 255) << 24) |
              ((b[h + 1] & 255) << 16) |
              ((b[h + 2] & 255) << 8) |
              (b[h + 3] & 255);
            break;
          case 1:
            d =
              ((b[h + 1] & 255) << 24) |
              ((b[h + 2] & 255) << 16) |
              ((b[h + 3] & 255) << 8) |
              (b[h] & 255);
            break;
          case 2:
            d =
              ((b[h + 2] & 255) << 24) |
              ((b[h + 1] & 255) << 16) |
              ((b[h] & 255) << 8) |
              (b[h + 3] & 255);
        }
        0 != (d & 255) &&
          255 != (d & 255) &&
          ((H.unmult = 255 / (d & 255)),
          (d =
            ((H.__clamp[Math.round(((d >>> 24) & 255) * H.unmult)] & 255) <<
              24) |
            ((H.__clamp[Math.round(((d >>> 16) & 255) * H.unmult)] & 255) <<
              16) |
            ((H.__clamp[Math.round(((d >>> 8) & 255) * H.unmult)] & 255) << 8) |
            (d & 255)));
        g *= 4;
        switch (c) {
          case 0:
            b[g] = (d >>> 24) & 255;
            b[g + 1] = (d >>> 16) & 255;
            b[g + 2] = (d >>> 8) & 255;
            b[g + 3] = d & 255;
            break;
          case 1:
            b[g] = d & 255;
            b[g + 1] = (d >>> 24) & 255;
            b[g + 2] = (d >>> 16) & 255;
            b[g + 3] = (d >>> 8) & 255;
            break;
          case 2:
            (b[g] = (d >>> 8) & 255),
              (b[g + 1] = (d >>> 16) & 255),
              (b[g + 2] = (d >>> 24) & 255),
              (b[g + 3] = d & 255);
        }
      }
      a.buffer.premultiplied = !1;
      a.dirty = !0;
      a.version++;
    }
  };
  var Ed = function (a, b) {
    this.image = a;
    null == b
      ? (this.rect = a.get_rect())
      : (0 > b.x && (b.x = 0),
        0 > b.y && (b.y = 0),
        b.x + b.width > a.width && (b.width = a.width - b.x),
        b.y + b.height > a.height && (b.height = a.height - b.y),
        0 > b.width && (b.width = 0),
        0 > b.height && (b.height = 0),
        (this.rect = b));
    this.stride = a.buffer.get_stride();
    this.__update();
  };
  l["lime._internal.graphics._ImageDataUtil.ImageDataView"] = Ed;
  Ed.__name__ = [
    "lime",
    "_internal",
    "graphics",
    "_ImageDataUtil",
    "ImageDataView",
  ];
  Ed.prototype = {
    x: null,
    y: null,
    height: null,
    width: null,
    byteOffset: null,
    image: null,
    rect: null,
    stride: null,
    tempRect: null,
    clip: function (a, b, c, d) {
      null == this.tempRect && (this.tempRect = new Dd());
      this.tempRect.setTo(a, b, c, d);
      this.rect.intersection(this.tempRect, this.rect);
      this.__update();
    },
    offset: function (a, b) {
      0 > a
        ? ((this.rect.x += a), 0 > this.rect.x && (this.rect.x = 0))
        : ((this.rect.x += a), (this.rect.width -= a));
      0 > b
        ? ((this.rect.y += b), 0 > this.rect.y && (this.rect.y = 0))
        : ((this.rect.y += b), (this.rect.height -= b));
      this.__update();
    },
    row: function (a) {
      return this.byteOffset + this.stride * a;
    },
    __update: function () {
      this.x = Math.ceil(this.rect.x);
      this.y = Math.ceil(this.rect.y);
      this.width = Math.floor(this.rect.width);
      this.height = Math.floor(this.rect.height);
      this.byteOffset =
        this.stride * (this.y + this.image.offsetY) +
        4 * (this.x + this.image.offsetX);
    },
    __class__: Ed,
  };
  var hh = function () {};
  l["lime._internal.unifill.Exception"] = hh;
  hh.__name__ = ["lime", "_internal", "unifill", "Exception"];
  hh.prototype = { __class__: hh };
  var Nf = function (a) {
    this.index = a;
  };
  l["lime._internal.unifill.InvalidCodeUnitSequence"] = Nf;
  Nf.__name__ = ["lime", "_internal", "unifill", "InvalidCodeUnitSequence"];
  Nf.__super__ = hh;
  Nf.prototype = v(hh.prototype, {
    index: null,
    toString: function () {
      return "InvalidCodeUnitSequence(index: " + this.index + ")";
    },
    __class__: Nf,
  });
  var pc = function () {};
  l["lime._internal.unifill.InternalEncoding"] = pc;
  pc.__name__ = ["lime", "_internal", "unifill", "InternalEncoding"];
  pc.codePointAt = function (a, b) {
    return ih.codePointAt(a, b);
  };
  pc.charAt = function (a, b) {
    var c = J.fastCodeAt(a, b);
    return S.substr(a, b, ge.code_point_width(c));
  };
  pc.codePointCount = function (a, b, c) {
    return ih.codePointCount(a, b, c);
  };
  pc.codePointWidthAt = function (a, b) {
    a = J.fastCodeAt(a, b);
    return ge.code_point_width(a);
  };
  pc.offsetByCodePoints = function (a, b, c) {
    if (0 <= c) {
      for (var d = a.length, e = 0; e < c && b < d; ) {
        var f = J.fastCodeAt(a, b);
        b += ge.code_point_width(f);
        ++e;
      }
      return b;
    }
    for (d = 0; d < -c && 0 < b; )
      (b -= ge.find_prev_code_point(
        (function (a) {
          return function (b) {
            return J.fastCodeAt(a[0], b);
          };
        })([a]),
        b
      )),
        ++d;
    return b;
  };
  var jh = function (a, b, c) {
    this.i = 0;
    this.string = a;
    this.index = b;
    this.endIndex = c;
  };
  l["lime._internal.unifill.InternalEncodingIter"] = jh;
  jh.__name__ = ["lime", "_internal", "unifill", "InternalEncodingIter"];
  jh.prototype = {
    string: null,
    index: null,
    endIndex: null,
    hasNext: function () {
      return this.index < this.endIndex;
    },
    i: null,
    next: function () {
      this.i = this.index;
      this.index += pc.codePointWidthAt(this.string, this.index);
      return this.i;
    },
    __class__: jh,
  };
  var he = function () {};
  l["lime._internal.unifill.Unicode"] = he;
  he.__name__ = ["lime", "_internal", "unifill", "Unicode"];
  he.decodeSurrogate = function (a, b) {
    return ((a - 55232) << 10) | (b & 1023);
  };
  he.isHighSurrogate = function (a) {
    return 55296 <= a ? 56319 >= a : !1;
  };
  he.isLowSurrogate = function (a) {
    return 56320 <= a ? 57343 >= a : !1;
  };
  var ed = function () {};
  l["lime._internal.unifill.Unifill"] = ed;
  ed.__name__ = ["lime", "_internal", "unifill", "Unifill"];
  ed.uLength = function (a) {
    return pc.codePointCount(a, 0, a.length);
  };
  ed.uCharAt = function (a, b) {
    b = pc.offsetByCodePoints(a, 0, b);
    return pc.charAt(a, b);
  };
  ed.uCharCodeAt = function (a, b) {
    b = pc.offsetByCodePoints(a, 0, b);
    return pc.codePointAt(a, b);
  };
  ed.uIndexOf = function (a, b, c) {
    null == c && (c = 0);
    b = a.indexOf(b, pc.offsetByCodePoints(a, 0, c));
    return 0 <= b ? pc.codePointCount(a, 0, b) : -1;
  };
  ed.uSubstring = function (a, b, c) {
    b = 0 > b ? 0 : pc.offsetByCodePoints(a, 0, b);
    c = null == c ? a.length : 0 > c ? 0 : pc.offsetByCodePoints(a, 0, c);
    return a.substring(b, c);
  };
  ed.uCompare = function (a, b) {
    for (
      var c = new jh(a, 0, a.length), d = new jh(b, 0, b.length);
      c.hasNext() && d.hasNext();

    ) {
      var e = pc.codePointAt(a, c.next()),
        f = pc.codePointAt(b, d.next());
      if (e < f) return -1;
      if (e > f) return 1;
    }
    return d.hasNext() ? -1 : c.hasNext() ? 1 : 0;
  };
  var ih = {};
  l["lime._internal.unifill._Utf16.Utf16_Impl_"] = ih;
  ih.__name__ = ["lime", "_internal", "unifill", "_Utf16", "Utf16_Impl_"];
  ih.codePointAt = function (a, b) {
    return ge.decode_code_point(
      a.length,
      function (b) {
        return J.fastCodeAt(a, b);
      },
      b
    );
  };
  ih.codePointCount = function (a, b, c) {
    for (var d = 0; b < c; ) {
      var e = J.fastCodeAt(a, b);
      b += ge.code_point_width(e);
      ++d;
    }
    return d;
  };
  var ge = function () {};
  l["lime._internal.unifill._Utf16.Utf16Impl"] = ge;
  ge.__name__ = ["lime", "_internal", "unifill", "_Utf16", "Utf16Impl"];
  ge.code_point_width = function (a) {
    return he.isHighSurrogate(a) ? 2 : 1;
  };
  ge.find_prev_code_point = function (a, b) {
    a = a(b - 1);
    return he.isLowSurrogate(a) ? 2 : 1;
  };
  ge.decode_code_point = function (a, b, c) {
    if (0 > c || a <= c) throw new G(new Nf(c));
    var d = b(c);
    if (he.isHighSurrogate(d)) {
      if (0 > c + 1 || a <= c + 1) throw new G(new Nf(c));
      a = b(c + 1);
      if (he.isLowSurrogate(a)) return he.decodeSurrogate(d, a);
      throw new G(new Nf(c));
    }
    if (he.isLowSurrogate(d)) throw new G(new Nf(c));
    return d;
  };
  var La = function (a, b) {
    null == b && (b = !1);
    if (null != a)
      if (b)
        (b = new Wb()), (b.future = this), Yb.queue({ promise: b, work: a });
      else
        try {
          (this.value = a()), (this.isComplete = !0);
        } catch (c) {
          (ta.lastException = c),
            c instanceof G && (c = c.val),
            (this.error = c),
            (this.isError = !0);
        }
  };
  l["lime.app.Future"] = La;
  La.__name__ = ["lime", "app", "Future"];
  La.withError = function (a) {
    var b = new La();
    b.isError = !0;
    b.error = a;
    return b;
  };
  La.withValue = function (a) {
    var b = new La();
    b.isComplete = !0;
    b.value = a;
    return b;
  };
  La.prototype = {
    error: null,
    isComplete: null,
    isError: null,
    value: null,
    __completeListeners: null,
    __errorListeners: null,
    __progressListeners: null,
    onComplete: function (a) {
      null != a &&
        (this.isComplete
          ? a(this.value)
          : this.isError ||
            (null == this.__completeListeners &&
              (this.__completeListeners = []),
            this.__completeListeners.push(a)));
      return this;
    },
    onError: function (a) {
      null != a &&
        (this.isError
          ? a(this.error)
          : this.isComplete ||
            (null == this.__errorListeners && (this.__errorListeners = []),
            this.__errorListeners.push(a)));
      return this;
    },
    onProgress: function (a) {
      null != a &&
        (null == this.__progressListeners && (this.__progressListeners = []),
        this.__progressListeners.push(a));
      return this;
    },
    then: function (a) {
      if (this.isComplete) return a(this.value);
      if (this.isError) {
        var b = new La();
        b.isError = !0;
        b.error = this.error;
        return b;
      }
      var c = new Wb();
      this.onError(m(c, c.error));
      this.onProgress(m(c, c.progress));
      this.onComplete(function (b) {
        b = a(b);
        b.onError(m(c, c.error));
        b.onComplete(m(c, c.complete));
      });
      return c.future;
    },
    __class__: La,
  };
  var Yb = function () {};
  l["lime.app._Future.FutureWork"] = Yb;
  Yb.__name__ = ["lime", "app", "_Future", "FutureWork"];
  Yb.queue = function (a) {
    null == Yb.threadPool &&
      ((Yb.threadPool = new Ni()),
      Yb.threadPool.doWork.add(Yb.threadPool_doWork),
      Yb.threadPool.onComplete.add(Yb.threadPool_onComplete),
      Yb.threadPool.onError.add(Yb.threadPool_onError));
    Yb.threadPool.queue(a);
  };
  Yb.threadPool_doWork = function (a) {
    try {
      var b = a.work();
      Yb.threadPool.sendComplete({ promise: a.promise, result: b });
    } catch (c) {
      (ta.lastException = c),
        c instanceof G && (c = c.val),
        Yb.threadPool.sendError({ promise: a.promise, error: c });
    }
  };
  Yb.threadPool_onComplete = function (a) {
    a.promise.complete(a.result);
  };
  Yb.threadPool_onError = function (a) {
    a.promise.error(a.error);
  };
  var Wb = function () {
    this.future = new La();
  };
  l["lime.app.Promise"] = Wb;
  Wb.__name__ = ["lime", "app", "Promise"];
  Wb.prototype = {
    future: null,
    complete: function (a) {
      if (
        !this.future.isError &&
        ((this.future.isComplete = !0),
        (this.future.value = a),
        null != this.future.__completeListeners)
      ) {
        for (var b = 0, c = this.future.__completeListeners; b < c.length; ) {
          var d = c[b];
          ++b;
          d(a);
        }
        this.future.__completeListeners = null;
      }
      return this;
    },
    completeWith: function (a) {
      a.onComplete(m(this, this.complete));
      a.onError(m(this, this.error));
      a.onProgress(m(this, this.progress));
      return this;
    },
    error: function (a) {
      if (
        !this.future.isComplete &&
        ((this.future.isError = !0),
        (this.future.error = a),
        null != this.future.__errorListeners)
      ) {
        for (var b = 0, c = this.future.__errorListeners; b < c.length; ) {
          var d = c[b];
          ++b;
          d(a);
        }
        this.future.__errorListeners = null;
      }
      return this;
    },
    progress: function (a, b) {
      if (
        !this.future.isError &&
        !this.future.isComplete &&
        null != this.future.__progressListeners
      )
        for (var c = 0, d = this.future.__progressListeners; c < d.length; ) {
          var e = d[c];
          ++c;
          e(a, b);
        }
      return this;
    },
    __class__: Wb,
  };
  var Oi = function () {
    this.canceled = !1;
    this.__listeners = [];
    this.__priorities = [];
    this.__repeat = [];
  };
  l["lime.app._Event_Float_Float_Float_Void"] = Oi;
  Oi.__name__ = ["lime", "app", "_Event_Float_Float_Float_Void"];
  Oi.prototype = {
    canceled: null,
    __repeat: null,
    __priorities: null,
    remove: function (a) {
      for (var b = this.__listeners.length; 0 <= --b; )
        A.compareMethods(this.__listeners[b], a) &&
          (this.__listeners.splice(b, 1),
          this.__priorities.splice(b, 1),
          this.__repeat.splice(b, 1));
    },
    __listeners: null,
    dispatch: function (a, b, c) {
      this.canceled = !1;
      for (
        var d = this.__listeners, e = this.__repeat, f = 0;
        f < d.length &&
        (d[f](a, b, c), e[f] ? ++f : this.remove(d[f]), !this.canceled);

      );
    },
    __class__: Oi,
  };
  var Pi = function () {
    this.canceled = !1;
    this.__listeners = [];
    this.__priorities = [];
    this.__repeat = [];
  };
  l["lime.app._Event_Float_Float_Int_Void"] = Pi;
  Pi.__name__ = ["lime", "app", "_Event_Float_Float_Int_Void"];
  Pi.prototype = {
    canceled: null,
    __repeat: null,
    __priorities: null,
    add: function (a, b, c) {
      null == c && (c = 0);
      null == b && (b = !1);
      for (var d = 0, e = this.__priorities.length; d < e; ) {
        var f = d++;
        if (c > this.__priorities[f]) {
          this.__listeners.splice(f, 0, a);
          this.__priorities.splice(f, 0, c);
          this.__repeat.splice(f, 0, !b);
          return;
        }
      }
      this.__listeners.push(a);
      this.__priorities.push(c);
      this.__repeat.push(!b);
    },
    cancel: function () {
      this.canceled = !0;
    },
    remove: function (a) {
      for (var b = this.__listeners.length; 0 <= --b; )
        A.compareMethods(this.__listeners[b], a) &&
          (this.__listeners.splice(b, 1),
          this.__priorities.splice(b, 1),
          this.__repeat.splice(b, 1));
    },
    __listeners: null,
    dispatch: function (a, b, c) {
      this.canceled = !1;
      for (
        var d = this.__listeners, e = this.__repeat, f = 0;
        f < d.length &&
        (d[f](a, b, c), e[f] ? ++f : this.remove(d[f]), !this.canceled);

      );
    },
    __class__: Pi,
  };
  var Of = function () {
    this.canceled = !1;
    this.__listeners = [];
    this.__priorities = [];
    this.__repeat = [];
  };
  l["lime.app._Event_Float_Float_Void"] = Of;
  Of.__name__ = ["lime", "app", "_Event_Float_Float_Void"];
  Of.prototype = {
    canceled: null,
    __repeat: null,
    __priorities: null,
    add: function (a, b, c) {
      null == c && (c = 0);
      null == b && (b = !1);
      for (var d = 0, e = this.__priorities.length; d < e; ) {
        var f = d++;
        if (c > this.__priorities[f]) {
          this.__listeners.splice(f, 0, a);
          this.__priorities.splice(f, 0, c);
          this.__repeat.splice(f, 0, !b);
          return;
        }
      }
      this.__listeners.push(a);
      this.__priorities.push(c);
      this.__repeat.push(!b);
    },
    remove: function (a) {
      for (var b = this.__listeners.length; 0 <= --b; )
        A.compareMethods(this.__listeners[b], a) &&
          (this.__listeners.splice(b, 1),
          this.__priorities.splice(b, 1),
          this.__repeat.splice(b, 1));
    },
    __listeners: null,
    dispatch: function (a, b) {
      this.canceled = !1;
      for (
        var c = this.__listeners, d = this.__repeat, e = 0;
        e < c.length &&
        (c[e](a, b), d[e] ? ++e : this.remove(c[e]), !this.canceled);

      );
    },
    __class__: Of,
  };
  var Qi = function () {
    this.canceled = !1;
    this.__listeners = [];
    this.__priorities = [];
    this.__repeat = [];
  };
  l["lime.app._Event_Float_Float_lime_ui_MouseButton_Void"] = Qi;
  Qi.__name__ = ["lime", "app", "_Event_Float_Float_lime_ui_MouseButton_Void"];
  Qi.prototype = {
    canceled: null,
    __repeat: null,
    __priorities: null,
    add: function (a, b, c) {
      null == c && (c = 0);
      null == b && (b = !1);
      for (var d = 0, e = this.__priorities.length; d < e; ) {
        var f = d++;
        if (c > this.__priorities[f]) {
          this.__listeners.splice(f, 0, a);
          this.__priorities.splice(f, 0, c);
          this.__repeat.splice(f, 0, !b);
          return;
        }
      }
      this.__listeners.push(a);
      this.__priorities.push(c);
      this.__repeat.push(!b);
    },
    remove: function (a) {
      for (var b = this.__listeners.length; 0 <= --b; )
        A.compareMethods(this.__listeners[b], a) &&
          (this.__listeners.splice(b, 1),
          this.__priorities.splice(b, 1),
          this.__repeat.splice(b, 1));
    },
    __listeners: null,
    dispatch: function (a, b, c) {
      this.canceled = !1;
      for (
        var d = this.__listeners, e = this.__repeat, f = 0;
        f < d.length &&
        (d[f](a, b, c), e[f] ? ++f : this.remove(d[f]), !this.canceled);

      );
    },
    __class__: Qi,
  };
  var Ri = function () {
    this.canceled = !1;
    this.__listeners = [];
    this.__priorities = [];
    this.__repeat = [];
  };
  l["lime.app._Event_Float_Float_lime_ui_MouseWheelMode_Void"] = Ri;
  Ri.__name__ = [
    "lime",
    "app",
    "_Event_Float_Float_lime_ui_MouseWheelMode_Void",
  ];
  Ri.prototype = {
    canceled: null,
    __repeat: null,
    __priorities: null,
    add: function (a, b, c) {
      null == c && (c = 0);
      null == b && (b = !1);
      for (var d = 0, e = this.__priorities.length; d < e; ) {
        var f = d++;
        if (c > this.__priorities[f]) {
          this.__listeners.splice(f, 0, a);
          this.__priorities.splice(f, 0, c);
          this.__repeat.splice(f, 0, !b);
          return;
        }
      }
      this.__listeners.push(a);
      this.__priorities.push(c);
      this.__repeat.push(!b);
    },
    remove: function (a) {
      for (var b = this.__listeners.length; 0 <= --b; )
        A.compareMethods(this.__listeners[b], a) &&
          (this.__listeners.splice(b, 1),
          this.__priorities.splice(b, 1),
          this.__repeat.splice(b, 1));
    },
    __listeners: null,
    dispatch: function (a, b, c) {
      this.canceled = !1;
      for (
        var d = this.__listeners, e = this.__repeat, f = 0;
        f < d.length &&
        (d[f](a, b, c), e[f] ? ++f : this.remove(d[f]), !this.canceled);

      );
    },
    __class__: Ri,
  };
  var Si = function () {
    this.canceled = !1;
    this.__listeners = [];
    this.__priorities = [];
    this.__repeat = [];
  };
  l["lime.app._Event_Int_Float_Float_Void"] = Si;
  Si.__name__ = ["lime", "app", "_Event_Int_Float_Float_Void"];
  Si.prototype = {
    canceled: null,
    __repeat: null,
    __priorities: null,
    add: function (a, b, c) {
      null == c && (c = 0);
      null == b && (b = !1);
      for (var d = 0, e = this.__priorities.length; d < e; ) {
        var f = d++;
        if (c > this.__priorities[f]) {
          this.__listeners.splice(f, 0, a);
          this.__priorities.splice(f, 0, c);
          this.__repeat.splice(f, 0, !b);
          return;
        }
      }
      this.__listeners.push(a);
      this.__priorities.push(c);
      this.__repeat.push(!b);
    },
    __listeners: null,
    __class__: Si,
  };
  var Ti = function () {
    this.canceled = !1;
    this.__listeners = [];
    this.__priorities = [];
    this.__repeat = [];
  };
  l["lime.app._Event_Int_Float_Void"] = Ti;
  Ti.__name__ = ["lime", "app", "_Event_Int_Float_Void"];
  Ti.prototype = {
    canceled: null,
    __repeat: null,
    __priorities: null,
    add: function (a, b, c) {
      null == c && (c = 0);
      null == b && (b = !1);
      for (var d = 0, e = this.__priorities.length; d < e; ) {
        var f = d++;
        if (c > this.__priorities[f]) {
          this.__listeners.splice(f, 0, a);
          this.__priorities.splice(f, 0, c);
          this.__repeat.splice(f, 0, !b);
          return;
        }
      }
      this.__listeners.push(a);
      this.__priorities.push(c);
      this.__repeat.push(!b);
    },
    remove: function (a) {
      for (var b = this.__listeners.length; 0 <= --b; )
        A.compareMethods(this.__listeners[b], a) &&
          (this.__listeners.splice(b, 1),
          this.__priorities.splice(b, 1),
          this.__repeat.splice(b, 1));
    },
    __listeners: null,
    dispatch: function (a, b) {
      this.canceled = !1;
      for (
        var c = this.__listeners, d = this.__repeat, e = 0;
        e < c.length &&
        (c[e](a, b), d[e] ? ++e : this.remove(c[e]), !this.canceled);

      );
    },
    __class__: Ti,
  };
  var kh = function () {
    this.canceled = !1;
    this.__listeners = [];
    this.__priorities = [];
    this.__repeat = [];
  };
  l["lime.app._Event_Int_Int_Void"] = kh;
  kh.__name__ = ["lime", "app", "_Event_Int_Int_Void"];
  kh.prototype = {
    canceled: null,
    __repeat: null,
    __priorities: null,
    add: function (a, b, c) {
      null == c && (c = 0);
      null == b && (b = !1);
      for (var d = 0, e = this.__priorities.length; d < e; ) {
        var f = d++;
        if (c > this.__priorities[f]) {
          this.__listeners.splice(f, 0, a);
          this.__priorities.splice(f, 0, c);
          this.__repeat.splice(f, 0, !b);
          return;
        }
      }
      this.__listeners.push(a);
      this.__priorities.push(c);
      this.__repeat.push(!b);
    },
    remove: function (a) {
      for (var b = this.__listeners.length; 0 <= --b; )
        A.compareMethods(this.__listeners[b], a) &&
          (this.__listeners.splice(b, 1),
          this.__priorities.splice(b, 1),
          this.__repeat.splice(b, 1));
    },
    __listeners: null,
    dispatch: function (a, b) {
      this.canceled = !1;
      for (
        var c = this.__listeners, d = this.__repeat, e = 0;
        e < c.length &&
        (c[e](a, b), d[e] ? ++e : this.remove(c[e]), !this.canceled);

      );
    },
    __class__: kh,
  };
  var ce = function () {
    this.canceled = !1;
    this.__listeners = [];
    this.__priorities = [];
    this.__repeat = [];
  };
  l["lime.app._Event_Int_Void"] = ce;
  ce.__name__ = ["lime", "app", "_Event_Int_Void"];
  ce.prototype = {
    canceled: null,
    __repeat: null,
    __priorities: null,
    add: function (a, b, c) {
      null == c && (c = 0);
      null == b && (b = !1);
      for (var d = 0, e = this.__priorities.length; d < e; ) {
        var f = d++;
        if (c > this.__priorities[f]) {
          this.__listeners.splice(f, 0, a);
          this.__priorities.splice(f, 0, c);
          this.__repeat.splice(f, 0, !b);
          return;
        }
      }
      this.__listeners.push(a);
      this.__priorities.push(c);
      this.__repeat.push(!b);
    },
    remove: function (a) {
      for (var b = this.__listeners.length; 0 <= --b; )
        A.compareMethods(this.__listeners[b], a) &&
          (this.__listeners.splice(b, 1),
          this.__priorities.splice(b, 1),
          this.__repeat.splice(b, 1));
    },
    __listeners: null,
    dispatch: function (a) {
      this.canceled = !1;
      for (
        var b = this.__listeners, c = this.__repeat, d = 0;
        d < b.length &&
        (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled);

      );
    },
    __class__: ce,
  };
  var Ui = function () {
    this.canceled = !1;
    this.__listeners = [];
    this.__priorities = [];
    this.__repeat = [];
  };
  l["lime.app._Event_Int_lime_ui_JoystickHatPosition_Void"] = Ui;
  Ui.__name__ = ["lime", "app", "_Event_Int_lime_ui_JoystickHatPosition_Void"];
  Ui.prototype = {
    canceled: null,
    __repeat: null,
    __priorities: null,
    add: function (a, b, c) {
      null == c && (c = 0);
      null == b && (b = !1);
      for (var d = 0, e = this.__priorities.length; d < e; ) {
        var f = d++;
        if (c > this.__priorities[f]) {
          this.__listeners.splice(f, 0, a);
          this.__priorities.splice(f, 0, c);
          this.__repeat.splice(f, 0, !b);
          return;
        }
      }
      this.__listeners.push(a);
      this.__priorities.push(c);
      this.__repeat.push(!b);
    },
    __listeners: null,
    __class__: Ui,
  };
  var Vi = function () {
    this.canceled = !1;
    this.__listeners = [];
    this.__priorities = [];
    this.__repeat = [];
  };
  l["lime.app._Event_String_Int_Int_Void"] = Vi;
  Vi.__name__ = ["lime", "app", "_Event_String_Int_Int_Void"];
  Vi.prototype = {
    canceled: null,
    __repeat: null,
    __priorities: null,
    add: function (a, b, c) {
      null == c && (c = 0);
      null == b && (b = !1);
      for (var d = 0, e = this.__priorities.length; d < e; ) {
        var f = d++;
        if (c > this.__priorities[f]) {
          this.__listeners.splice(f, 0, a);
          this.__priorities.splice(f, 0, c);
          this.__repeat.splice(f, 0, !b);
          return;
        }
      }
      this.__listeners.push(a);
      this.__priorities.push(c);
      this.__repeat.push(!b);
    },
    __listeners: null,
    __class__: Vi,
  };
  var lh = function () {
    this.canceled = !1;
    this.__listeners = [];
    this.__priorities = [];
    this.__repeat = [];
  };
  l["lime.app._Event_String_Void"] = lh;
  lh.__name__ = ["lime", "app", "_Event_String_Void"];
  lh.prototype = {
    canceled: null,
    __repeat: null,
    __priorities: null,
    add: function (a, b, c) {
      null == c && (c = 0);
      null == b && (b = !1);
      for (var d = 0, e = this.__priorities.length; d < e; ) {
        var f = d++;
        if (c > this.__priorities[f]) {
          this.__listeners.splice(f, 0, a);
          this.__priorities.splice(f, 0, c);
          this.__repeat.splice(f, 0, !b);
          return;
        }
      }
      this.__listeners.push(a);
      this.__priorities.push(c);
      this.__repeat.push(!b);
    },
    cancel: function () {
      this.canceled = !0;
    },
    has: function (a) {
      for (var b = 0, c = this.__listeners; b < c.length; ) {
        var d = c[b];
        ++b;
        if (A.compareMethods(d, a)) return !0;
      }
      return !1;
    },
    remove: function (a) {
      for (var b = this.__listeners.length; 0 <= --b; )
        A.compareMethods(this.__listeners[b], a) &&
          (this.__listeners.splice(b, 1),
          this.__priorities.splice(b, 1),
          this.__repeat.splice(b, 1));
    },
    __listeners: null,
    dispatch: function (a) {
      this.canceled = !1;
      for (
        var b = this.__listeners, c = this.__repeat, d = 0;
        d < b.length &&
        (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled);

      );
    },
    __class__: lh,
  };
  var fb = function () {
    this.canceled = !1;
    this.__listeners = [];
    this.__priorities = [];
    this.__repeat = [];
  };
  l["lime.app._Event_Void_Void"] = fb;
  fb.__name__ = ["lime", "app", "_Event_Void_Void"];
  fb.prototype = {
    canceled: null,
    __repeat: null,
    __priorities: null,
    add: function (a, b, c) {
      null == c && (c = 0);
      null == b && (b = !1);
      for (var d = 0, e = this.__priorities.length; d < e; ) {
        var f = d++;
        if (c > this.__priorities[f]) {
          this.__listeners.splice(f, 0, a);
          this.__priorities.splice(f, 0, c);
          this.__repeat.splice(f, 0, !b);
          return;
        }
      }
      this.__listeners.push(a);
      this.__priorities.push(c);
      this.__repeat.push(!b);
    },
    remove: function (a) {
      for (var b = this.__listeners.length; 0 <= --b; )
        A.compareMethods(this.__listeners[b], a) &&
          (this.__listeners.splice(b, 1),
          this.__priorities.splice(b, 1),
          this.__repeat.splice(b, 1));
    },
    __listeners: null,
    dispatch: function () {
      this.canceled = !1;
      for (
        var a = this.__listeners, b = this.__repeat, c = 0;
        c < a.length &&
        (a[c](), b[c] ? ++c : this.remove(a[c]), !this.canceled);

      );
    },
    __class__: fb,
  };
  var Je = function () {
    this.canceled = !1;
    this.__listeners = [];
    this.__priorities = [];
    this.__repeat = [];
  };
  l["lime.app._Event_haxe_Function_Void"] = Je;
  Je.__name__ = ["lime", "app", "_Event_haxe_Function_Void"];
  Je.prototype = {
    canceled: null,
    __repeat: null,
    __priorities: null,
    add: function (a, b, c) {
      null == c && (c = 0);
      null == b && (b = !1);
      for (var d = 0, e = this.__priorities.length; d < e; ) {
        var f = d++;
        if (c > this.__priorities[f]) {
          this.__listeners.splice(f, 0, a);
          this.__priorities.splice(f, 0, c);
          this.__repeat.splice(f, 0, !b);
          return;
        }
      }
      this.__listeners.push(a);
      this.__priorities.push(c);
      this.__repeat.push(!b);
    },
    remove: function (a) {
      for (var b = this.__listeners.length; 0 <= --b; )
        A.compareMethods(this.__listeners[b], a) &&
          (this.__listeners.splice(b, 1),
          this.__priorities.splice(b, 1),
          this.__repeat.splice(b, 1));
    },
    __listeners: null,
    dispatch: function (a) {
      this.canceled = !1;
      for (
        var b = this.__listeners, c = this.__repeat, d = 0;
        d < b.length &&
        (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled);

      );
    },
    __class__: Je,
  };
  var mh = function () {
    this.canceled = !1;
    this.__listeners = [];
    this.__priorities = [];
    this.__repeat = [];
  };
  l["lime.app._Event_lime_graphics_RenderContext_Void"] = mh;
  mh.__name__ = ["lime", "app", "_Event_lime_graphics_RenderContext_Void"];
  mh.prototype = {
    canceled: null,
    __repeat: null,
    __priorities: null,
    add: function (a, b, c) {
      null == c && (c = 0);
      null == b && (b = !1);
      for (var d = 0, e = this.__priorities.length; d < e; ) {
        var f = d++;
        if (c > this.__priorities[f]) {
          this.__listeners.splice(f, 0, a);
          this.__priorities.splice(f, 0, c);
          this.__repeat.splice(f, 0, !b);
          return;
        }
      }
      this.__listeners.push(a);
      this.__priorities.push(c);
      this.__repeat.push(!b);
    },
    cancel: function () {
      this.canceled = !0;
    },
    remove: function (a) {
      for (var b = this.__listeners.length; 0 <= --b; )
        A.compareMethods(this.__listeners[b], a) &&
          (this.__listeners.splice(b, 1),
          this.__priorities.splice(b, 1),
          this.__repeat.splice(b, 1));
    },
    __listeners: null,
    dispatch: function (a) {
      this.canceled = !1;
      for (
        var b = this.__listeners, c = this.__repeat, d = 0;
        d < b.length &&
        (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled);

      );
    },
    __class__: mh,
  };
  var Wi = function () {
    this.canceled = !1;
    this.__listeners = [];
    this.__priorities = [];
    this.__repeat = [];
  };
  l["lime.app._Event_lime_ui_GamepadAxis_Float_Void"] = Wi;
  Wi.__name__ = ["lime", "app", "_Event_lime_ui_GamepadAxis_Float_Void"];
  Wi.prototype = {
    canceled: null,
    __repeat: null,
    __priorities: null,
    add: function (a, b, c) {
      null == c && (c = 0);
      null == b && (b = !1);
      for (var d = 0, e = this.__priorities.length; d < e; ) {
        var f = d++;
        if (c > this.__priorities[f]) {
          this.__listeners.splice(f, 0, a);
          this.__priorities.splice(f, 0, c);
          this.__repeat.splice(f, 0, !b);
          return;
        }
      }
      this.__listeners.push(a);
      this.__priorities.push(c);
      this.__repeat.push(!b);
    },
    remove: function (a) {
      for (var b = this.__listeners.length; 0 <= --b; )
        A.compareMethods(this.__listeners[b], a) &&
          (this.__listeners.splice(b, 1),
          this.__priorities.splice(b, 1),
          this.__repeat.splice(b, 1));
    },
    __listeners: null,
    dispatch: function (a, b) {
      this.canceled = !1;
      for (
        var c = this.__listeners, d = this.__repeat, e = 0;
        e < c.length &&
        (c[e](a, b), d[e] ? ++e : this.remove(c[e]), !this.canceled);

      );
    },
    __class__: Wi,
  };
  var nh = function () {
    this.canceled = !1;
    this.__listeners = [];
    this.__priorities = [];
    this.__repeat = [];
  };
  l["lime.app._Event_lime_ui_GamepadButton_Void"] = nh;
  nh.__name__ = ["lime", "app", "_Event_lime_ui_GamepadButton_Void"];
  nh.prototype = {
    canceled: null,
    __repeat: null,
    __priorities: null,
    add: function (a, b, c) {
      null == c && (c = 0);
      null == b && (b = !1);
      for (var d = 0, e = this.__priorities.length; d < e; ) {
        var f = d++;
        if (c > this.__priorities[f]) {
          this.__listeners.splice(f, 0, a);
          this.__priorities.splice(f, 0, c);
          this.__repeat.splice(f, 0, !b);
          return;
        }
      }
      this.__listeners.push(a);
      this.__priorities.push(c);
      this.__repeat.push(!b);
    },
    remove: function (a) {
      for (var b = this.__listeners.length; 0 <= --b; )
        A.compareMethods(this.__listeners[b], a) &&
          (this.__listeners.splice(b, 1),
          this.__priorities.splice(b, 1),
          this.__repeat.splice(b, 1));
    },
    __listeners: null,
    dispatch: function (a) {
      this.canceled = !1;
      for (
        var b = this.__listeners, c = this.__repeat, d = 0;
        d < b.length &&
        (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled);

      );
    },
    __class__: nh,
  };
  var Xi = function () {
    this.canceled = !1;
    this.__listeners = [];
    this.__priorities = [];
    this.__repeat = [];
  };
  l["lime.app._Event_lime_ui_Gamepad_Void"] = Xi;
  Xi.__name__ = ["lime", "app", "_Event_lime_ui_Gamepad_Void"];
  Xi.prototype = {
    canceled: null,
    __repeat: null,
    __priorities: null,
    add: function (a, b, c) {
      null == c && (c = 0);
      null == b && (b = !1);
      for (var d = 0, e = this.__priorities.length; d < e; ) {
        var f = d++;
        if (c > this.__priorities[f]) {
          this.__listeners.splice(f, 0, a);
          this.__priorities.splice(f, 0, c);
          this.__repeat.splice(f, 0, !b);
          return;
        }
      }
      this.__listeners.push(a);
      this.__priorities.push(c);
      this.__repeat.push(!b);
    },
    remove: function (a) {
      for (var b = this.__listeners.length; 0 <= --b; )
        A.compareMethods(this.__listeners[b], a) &&
          (this.__listeners.splice(b, 1),
          this.__priorities.splice(b, 1),
          this.__repeat.splice(b, 1));
    },
    __listeners: null,
    dispatch: function (a) {
      this.canceled = !1;
      for (
        var b = this.__listeners, c = this.__repeat, d = 0;
        d < b.length &&
        (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled);

      );
    },
    __class__: Xi,
  };
  var Yi = function () {
    this.canceled = !1;
    this.__listeners = [];
    this.__priorities = [];
    this.__repeat = [];
  };
  l["lime.app._Event_lime_ui_Joystick_Void"] = Yi;
  Yi.__name__ = ["lime", "app", "_Event_lime_ui_Joystick_Void"];
  Yi.prototype = {
    canceled: null,
    __repeat: null,
    __priorities: null,
    add: function (a, b, c) {
      null == c && (c = 0);
      null == b && (b = !1);
      for (var d = 0, e = this.__priorities.length; d < e; ) {
        var f = d++;
        if (c > this.__priorities[f]) {
          this.__listeners.splice(f, 0, a);
          this.__priorities.splice(f, 0, c);
          this.__repeat.splice(f, 0, !b);
          return;
        }
      }
      this.__listeners.push(a);
      this.__priorities.push(c);
      this.__repeat.push(!b);
    },
    remove: function (a) {
      for (var b = this.__listeners.length; 0 <= --b; )
        A.compareMethods(this.__listeners[b], a) &&
          (this.__listeners.splice(b, 1),
          this.__priorities.splice(b, 1),
          this.__repeat.splice(b, 1));
    },
    __listeners: null,
    dispatch: function (a) {
      this.canceled = !1;
      for (
        var b = this.__listeners, c = this.__repeat, d = 0;
        d < b.length &&
        (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled);

      );
    },
    __class__: Yi,
  };
  var oh = function () {
    this.canceled = !1;
    this.__listeners = [];
    this.__priorities = [];
    this.__repeat = [];
  };
  l["lime.app._Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void"] = oh;
  oh.__name__ = [
    "lime",
    "app",
    "_Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void",
  ];
  oh.prototype = {
    canceled: null,
    __repeat: null,
    __priorities: null,
    add: function (a, b, c) {
      null == c && (c = 0);
      null == b && (b = !1);
      for (var d = 0, e = this.__priorities.length; d < e; ) {
        var f = d++;
        if (c > this.__priorities[f]) {
          this.__listeners.splice(f, 0, a);
          this.__priorities.splice(f, 0, c);
          this.__repeat.splice(f, 0, !b);
          return;
        }
      }
      this.__listeners.push(a);
      this.__priorities.push(c);
      this.__repeat.push(!b);
    },
    cancel: function () {
      this.canceled = !0;
    },
    remove: function (a) {
      for (var b = this.__listeners.length; 0 <= --b; )
        A.compareMethods(this.__listeners[b], a) &&
          (this.__listeners.splice(b, 1),
          this.__priorities.splice(b, 1),
          this.__repeat.splice(b, 1));
    },
    __listeners: null,
    dispatch: function (a, b) {
      this.canceled = !1;
      for (
        var c = this.__listeners, d = this.__repeat, e = 0;
        e < c.length &&
        (c[e](a, b), d[e] ? ++e : this.remove(c[e]), !this.canceled);

      );
    },
    __class__: oh,
  };
  var $f = function () {
    this.canceled = !1;
    this.__listeners = [];
    this.__priorities = [];
    this.__repeat = [];
  };
  l["lime.app._Event_lime_ui_Touch_Void"] = $f;
  $f.__name__ = ["lime", "app", "_Event_lime_ui_Touch_Void"];
  $f.prototype = {
    canceled: null,
    __repeat: null,
    __priorities: null,
    add: function (a, b, c) {
      null == c && (c = 0);
      null == b && (b = !1);
      for (var d = 0, e = this.__priorities.length; d < e; ) {
        var f = d++;
        if (c > this.__priorities[f]) {
          this.__listeners.splice(f, 0, a);
          this.__priorities.splice(f, 0, c);
          this.__repeat.splice(f, 0, !b);
          return;
        }
      }
      this.__listeners.push(a);
      this.__priorities.push(c);
      this.__repeat.push(!b);
    },
    remove: function (a) {
      for (var b = this.__listeners.length; 0 <= --b; )
        A.compareMethods(this.__listeners[b], a) &&
          (this.__listeners.splice(b, 1),
          this.__priorities.splice(b, 1),
          this.__repeat.splice(b, 1));
    },
    __listeners: null,
    dispatch: function (a) {
      this.canceled = !1;
      for (
        var b = this.__listeners, c = this.__repeat, d = 0;
        d < b.length &&
        (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled);

      );
    },
    __class__: $f,
  };
  var si = function () {
    this.canceled = !1;
    this.__listeners = [];
    this.__priorities = [];
    this.__repeat = [];
  };
  l["lime.app._Event_lime_ui_Window_Void"] = si;
  si.__name__ = ["lime", "app", "_Event_lime_ui_Window_Void"];
  si.prototype = {
    canceled: null,
    __repeat: null,
    __priorities: null,
    add: function (a, b, c) {
      null == c && (c = 0);
      null == b && (b = !1);
      for (var d = 0, e = this.__priorities.length; d < e; ) {
        var f = d++;
        if (c > this.__priorities[f]) {
          this.__listeners.splice(f, 0, a);
          this.__priorities.splice(f, 0, c);
          this.__repeat.splice(f, 0, !b);
          return;
        }
      }
      this.__listeners.push(a);
      this.__priorities.push(c);
      this.__repeat.push(!b);
    },
    remove: function (a) {
      for (var b = this.__listeners.length; 0 <= --b; )
        A.compareMethods(this.__listeners[b], a) &&
          (this.__listeners.splice(b, 1),
          this.__priorities.splice(b, 1),
          this.__repeat.splice(b, 1));
    },
    __listeners: null,
    dispatch: function (a) {
      this.canceled = !1;
      for (
        var b = this.__listeners, c = this.__repeat, d = 0;
        d < b.length &&
        (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled);

      );
    },
    __class__: si,
  };
  var qa = function (a, b, c, d, e, f, g) {
    null == e && (e = -1);
    null == d && (d = -1);
    null == c && (c = 0);
    null == b && (b = 0);
    this.offsetX = b;
    this.offsetY = c;
    this.width = d;
    this.height = e;
    this.version = 0;
    null == g && (g = Za.CANVAS);
    this.type = g;
    if (null == a) {
      if (0 < d && 0 < e)
        switch (I.enumIndex(this.type)) {
          case 0:
            this.buffer = new Ie(null, d, e);
            na.createCanvas(this, d, e);
            null != f && 0 != f && this.fillRect(new Dd(0, 0, d, e), f);
            break;
          case 1:
            (a = d * e * 4),
              (a = null != a ? new dd(a) : null),
              (this.buffer = new Ie(a, d, e)),
              null != f && 0 != f && this.fillRect(new Dd(0, 0, d, e), f);
        }
    } else this.__fromImageBuffer(a);
  };
  l["lime.graphics.Image"] = qa;
  qa.__name__ = ["lime", "graphics", "Image"];
  qa.fromBase64 = function (a, b) {
    if (null == a) return null;
    var c = new qa();
    c.__fromBase64(a, b);
    return c;
  };
  qa.fromBitmapData = function (a) {
    return null == a ? null : a.image;
  };
  qa.fromBytes = function (a) {
    if (null == a) return null;
    var b = new qa();
    b.__fromBytes(a);
    return b;
  };
  qa.fromCanvas = function (a) {
    if (null == a) return null;
    var b = new Ie(null, a.width, a.height);
    b.set_src(a);
    a = new qa(b);
    a.type = Za.CANVAS;
    return a;
  };
  qa.fromFile = function (a) {
    if (null == a) return null;
    var b = new qa();
    b.__fromFile(a);
    return b;
  };
  qa.fromImageElement = function (a) {
    if (null == a) return null;
    var b = new Ie(null, a.width, a.height);
    b.set_src(a);
    a = new qa(b);
    a.type = Za.CANVAS;
    return a;
  };
  qa.loadFromBase64 = function (a, b) {
    return null == a || null == b
      ? La.withValue(null)
      : ba.loadImage("data:" + b + ";base64," + a);
  };
  qa.loadFromBytes = function (a) {
    if (null == a) return La.withValue(null);
    if (qa.__isPNG(a)) var b = "image/png";
    else if (qa.__isJPG(a)) b = "image/jpeg";
    else if (qa.__isGIF(a)) b = "image/gif";
    else if (qa.__isWebP(a)) b = "image/webp";
    else return La.withValue(null);
    return qa.loadFromBase64(qa.__base64Encode(a), b);
  };
  qa.loadFromFile = function (a) {
    return null == a ? La.withValue(null) : ba.loadImage(a);
  };
  qa.__base64Encode = function (a) {
    switch (a.length % 3) {
      case 1:
        var b = "==";
        break;
      case 2:
        b = "=";
        break;
      default:
        b = "";
    }
    null == qa.__base64Encoder &&
      (qa.__base64Encoder = new Zf(eb.ofString(qa.__base64Chars)));
    return qa.__base64Encoder.encodeBytes(a).toString() + b;
  };
  qa.__isGIF = function (a) {
    if (null == a || 6 > a.length) return !1;
    a = a.getString(0, 6);
    return "GIF87a" != a ? "GIF89a" == a : !0;
  };
  qa.__isJPG = function (a) {
    return null == a || 4 > a.length
      ? !1
      : 255 == a.get(0) && 216 == a.get(1) && 255 == a.get(a.length - 2)
      ? 217 == a.get(a.length - 1)
      : !1;
  };
  qa.__isPNG = function (a) {
    return null == a || 8 > a.length
      ? !1
      : 137 == a.get(0) &&
        80 == a.get(1) &&
        78 == a.get(2) &&
        71 == a.get(3) &&
        13 == a.get(4) &&
        10 == a.get(5) &&
        26 == a.get(6)
      ? 10 == a.get(7)
      : !1;
  };
  qa.__isWebP = function (a) {
    return null == a || 16 > a.length
      ? !1
      : "RIFF" == a.getString(0, 4)
      ? "WEBP" == a.getString(8, 4)
      : !1;
  };
  qa.prototype = {
    buffer: null,
    dirty: null,
    height: null,
    offsetX: null,
    offsetY: null,
    type: null,
    version: null,
    width: null,
    clone: function () {
      if (null != this.buffer) {
        this.type == Za.CANVAS
          ? na.convertToCanvas(this)
          : na.convertToData(this);
        var a = new qa(
          this.buffer.clone(),
          this.offsetX,
          this.offsetY,
          this.width,
          this.height,
          null,
          this.type
        );
        a.version = this.version;
        return a;
      }
      return new qa(
        null,
        this.offsetX,
        this.offsetY,
        this.width,
        this.height,
        null,
        this.type
      );
    },
    colorTransform: function (a, b) {
      a = this.__clipRect(a);
      if (null != this.buffer && null != a)
        switch (I.enumIndex(this.type)) {
          case 0:
            na.colorTransform(this, a, b);
            break;
          case 1:
            na.convertToData(this);
            Pa.colorTransform(this, a, b);
            break;
          case 2:
            a.offset(this.offsetX, this.offsetY),
              this.buffer.__srcBitmapData.colorTransform(
                a.__toFlashRectangle(),
                Ma.__toFlashColorTransform(b)
              );
        }
    },
    copyChannel: function (a, b, c, d, e) {
      b = this.__clipRect(b);
      if (
        null != this.buffer &&
        null != b &&
        !(
          (e == $a.ALPHA && !this.get_transparent()) ||
          0 >= b.width ||
          0 >= b.height
        )
      )
        switch (
          (b.x + b.width > a.width && (b.width = a.width - b.x),
          b.y + b.height > a.height && (b.height = a.height - b.y),
          I.enumIndex(this.type))
        ) {
          case 0:
            na.copyChannel(this, a, b, c, d, e);
            break;
          case 1:
            na.convertToData(this);
            na.convertToData(a);
            Pa.copyChannel(this, a, b, c, d, e);
            break;
          case 2:
            switch (I.enumIndex(d)) {
              case 0:
                var f = 1;
                break;
              case 1:
                f = 2;
                break;
              case 2:
                f = 4;
                break;
              case 3:
                f = 8;
            }
            switch (I.enumIndex(e)) {
              case 0:
                var g = 1;
                break;
              case 1:
                g = 2;
                break;
              case 2:
                g = 4;
                break;
              case 3:
                g = 8;
            }
            b.offset(a.offsetX, a.offsetY);
            c.offset(this.offsetX, this.offsetY);
            this.buffer.__srcBitmapData.copyChannel(
              a.buffer.get_src(),
              b.__toFlashRectangle(),
              c.__toFlashPoint(),
              f,
              g
            );
        }
    },
    copyPixels: function (a, b, c, d, e, f) {
      null == f && (f = !1);
      if (
        null != this.buffer &&
        null != a &&
        !(0 >= b.width || 0 >= b.height || 0 >= this.width || 0 >= this.height)
      )
        switch (
          (b.x + b.width > a.width && (b.width = a.width - b.x),
          b.y + b.height > a.height && (b.height = a.height - b.y),
          0 > b.x && ((b.width += b.x), (b.x = 0)),
          0 > b.y && ((b.height += b.y), (b.y = 0)),
          c.x + b.width > this.width && (b.width = this.width - c.x),
          c.y + b.height > this.height && (b.height = this.height - c.y),
          0 > c.x && ((b.width += c.x), (b.x -= c.x), (c.x = 0)),
          0 > c.y && ((b.height += c.y), (b.y -= c.y), (c.y = 0)),
          a == this &&
            c.x < b.get_right() &&
            c.y < b.get_bottom() &&
            (a = this.clone()),
          I.enumIndex(this.type))
        ) {
          case 0:
            null != d || a.type != Za.CANVAS
              ? (na.convertToData(this),
                na.convertToData(a),
                null != d && na.convertToData(d),
                Pa.copyPixels(this, a, b, c, d, e, f))
              : (na.convertToCanvas(this),
                na.convertToCanvas(a),
                na.copyPixels(this, a, b, c, d, e, f));
            break;
          case 1:
            na.convertToData(this);
            na.convertToData(a);
            null != d && na.convertToData(d);
            Pa.copyPixels(this, a, b, c, d, e, f);
            break;
          case 2:
            b.offset(a.offsetX, a.offsetY),
              c.offset(this.offsetX, this.offsetY),
              null != d && null != e && e.offset(d.offsetX, d.offsetY),
              this.buffer.__srcBitmapData.copyPixels(
                a.buffer.__srcBitmapData,
                b.__toFlashRectangle(),
                c.__toFlashPoint(),
                null != d ? d.buffer.get_src() : null,
                null != e ? e.__toFlashPoint() : null,
                f
              );
        }
    },
    fillRect: function (a, b, c) {
      a = this.__clipRect(a);
      if (null != this.buffer && null != a)
        switch (I.enumIndex(this.type)) {
          case 0:
            na.fillRect(this, a, b, c);
            break;
          case 1:
            na.convertToData(this);
            if (0 == this.buffer.data.length) break;
            Pa.fillRect(this, a, b, c);
            break;
          case 2:
            a.offset(this.offsetX, this.offsetY);
            if (null == c)
              b =
                ((b & 255) << 24) |
                (((b >>> 24) & 255) << 16) |
                (((b >>> 16) & 255) << 8) |
                ((b >>> 8) & 255);
            else
              switch (c) {
                case 1:
                  break;
                case 2:
                  b =
                    ((b & 255) << 24) |
                    (((b >>> 8) & 255) << 16) |
                    (((b >>> 16) & 255) << 8) |
                    ((b >>> 24) & 255);
                  break;
                default:
                  b =
                    ((b & 255) << 24) |
                    (((b >>> 24) & 255) << 16) |
                    (((b >>> 16) & 255) << 8) |
                    ((b >>> 8) & 255);
              }
            this.buffer.__srcBitmapData.fillRect(a.__toFlashRectangle(), b);
        }
    },
    __clipRect: function (a) {
      return null == a ||
        (0 > a.x && ((a.width -= -a.x), (a.x = 0), 0 >= a.x + a.width)) ||
        (0 > a.y && ((a.height -= -a.y), (a.y = 0), 0 >= a.y + a.height)) ||
        (a.x + a.width >= this.width &&
          ((a.width -= a.x + a.width - this.width), 0 >= a.width)) ||
        (a.y + a.height >= this.height &&
          ((a.height -= a.y + a.height - this.height), 0 >= a.height))
        ? null
        : a;
    },
    __fromBase64: function (a, b, c) {
      var d = this,
        e = new Image();
      e.addEventListener(
        "load",
        function (a) {
          d.buffer = new Ie(null, e.width, e.height);
          d.buffer.__srcImage = e;
          d.offsetX = 0;
          d.offsetY = 0;
          d.width = d.buffer.width;
          d.height = d.buffer.height;
          null != c && c(d);
        },
        !1
      );
      e.src = "data:" + b + ";base64," + a;
    },
    __fromBytes: function (a, b) {
      if (qa.__isPNG(a)) var c = "image/png";
      else if (qa.__isJPG(a)) c = "image/jpeg";
      else if (qa.__isGIF(a)) c = "image/gif";
      else return;
      this.__fromBase64(qa.__base64Encode(a), c, b);
    },
    __fromFile: function (a, b, c) {
      var d = this,
        e = new Image();
      ba.__isSameOrigin(a) || (e.crossOrigin = "Anonymous");
      e.onload = function (a) {
        d.buffer = new Ie(null, e.width, e.height);
        d.buffer.__srcImage = e;
        d.width = e.width;
        d.height = e.height;
        null != b && b(d);
      };
      e.onerror = function (a) {
        null != c && c();
      };
      e.src = a;
    },
    __fromImageBuffer: function (a) {
      this.buffer = a;
      null != a &&
        (-1 == this.width && (this.width = a.width),
        -1 == this.height && (this.height = a.height));
    },
    get_data: function () {
      null == this.buffer.data &&
        0 < this.buffer.width &&
        0 < this.buffer.height &&
        na.convertToData(this);
      return this.buffer.data;
    },
    get_format: function () {
      return this.buffer.format;
    },
    set_format: function (a) {
      this.buffer.format != a &&
        1 == I.enumIndex(this.type) &&
        Pa.setFormat(this, a);
      return (this.buffer.format = a);
    },
    get_premultiplied: function () {
      return this.buffer.premultiplied;
    },
    set_premultiplied: function (a) {
      if (a && !this.buffer.premultiplied)
        switch (I.enumIndex(this.type)) {
          case 0:
          case 1:
            na.convertToData(this), Pa.multiplyAlpha(this);
        }
      else
        !a &&
          this.buffer.premultiplied &&
          1 == I.enumIndex(this.type) &&
          (na.convertToData(this), Pa.unmultiplyAlpha(this));
      return a;
    },
    get_rect: function () {
      return new Dd(0, 0, this.width, this.height);
    },
    get_src: function () {
      null != this.buffer.__srcCanvas ||
        (null == this.buffer.data && this.type != Za.DATA) ||
        na.convertToCanvas(this);
      return this.buffer.get_src();
    },
    get_transparent: function () {
      return null == this.buffer ? !1 : this.buffer.transparent;
    },
    set_transparent: function (a) {
      return null == this.buffer ? !1 : (this.buffer.transparent = a);
    },
    __class__: qa,
    __properties__: {
      get_rect: "get_rect",
      set_transparent: "set_transparent",
      get_transparent: "get_transparent",
      get_src: "get_src",
      set_premultiplied: "set_premultiplied",
      get_premultiplied: "get_premultiplied",
      set_format: "set_format",
      get_format: "get_format",
      get_data: "get_data",
    },
  };
  var Ie = function (a, b, c, d, e) {
    null == d && (d = 32);
    null == c && (c = 0);
    null == b && (b = 0);
    this.data = a;
    this.width = b;
    this.height = c;
    this.bitsPerPixel = d;
    this.format = null == e ? 0 : e;
    this.premultiplied = !1;
    this.transparent = !0;
  };
  l["lime.graphics.ImageBuffer"] = Ie;
  Ie.__name__ = ["lime", "graphics", "ImageBuffer"];
  Ie.prototype = {
    bitsPerPixel: null,
    data: null,
    format: null,
    height: null,
    premultiplied: null,
    transparent: null,
    width: null,
    __srcBitmapData: null,
    __srcCanvas: null,
    __srcContext: null,
    __srcImage: null,
    __srcImageData: null,
    clone: function () {
      var a = new Ie(this.data, this.width, this.height, this.bitsPerPixel);
      if (null != this.data) {
        var b = this.data.byteLength;
        b = null != b ? new dd(b) : null;
        a.data = b;
        b = this.data;
        b = null != b ? new dd(b) : null;
        a.data.set(b);
      } else
        null != this.__srcImageData
          ? ((a.__srcCanvas = T.get_document().createElement("canvas")),
            (a.__srcContext = a.__srcCanvas.getContext("2d")),
            (a.__srcCanvas.width = this.__srcImageData.width),
            (a.__srcCanvas.height = this.__srcImageData.height),
            (a.__srcImageData = a.__srcContext.createImageData(
              this.__srcImageData.width,
              this.__srcImageData.height
            )),
            (b = new Uint8ClampedArray(this.__srcImageData.data)),
            a.__srcImageData.data.set(b))
          : null != this.__srcCanvas
          ? ((a.__srcCanvas = T.get_document().createElement("canvas")),
            (a.__srcContext = a.__srcCanvas.getContext("2d")),
            (a.__srcCanvas.width = this.__srcCanvas.width),
            (a.__srcCanvas.height = this.__srcCanvas.height),
            a.__srcContext.drawImage(this.__srcCanvas, 0, 0))
          : (a.__srcImage = this.__srcImage);
      a.bitsPerPixel = this.bitsPerPixel;
      a.format = this.format;
      a.premultiplied = this.premultiplied;
      a.transparent = this.transparent;
      return a;
    },
    get_src: function () {
      return null != this.__srcImage ? this.__srcImage : this.__srcCanvas;
    },
    set_src: function (a) {
      u.is(a, Image)
        ? (this.__srcImage = a)
        : u.is(a, HTMLCanvasElement) &&
          ((this.__srcCanvas = a),
          (this.__srcContext = this.__srcCanvas.getContext("2d")));
      return a;
    },
    get_stride: function () {
      return 4 * this.width;
    },
    __class__: Ie,
    __properties__: {
      get_stride: "get_stride",
      set_src: "set_src",
      get_src: "get_src",
    },
  };
  var $a = (l["lime.graphics.ImageChannel"] = {
    __ename__: ["lime", "graphics", "ImageChannel"],
    __constructs__: ["RED", "GREEN", "BLUE", "ALPHA"],
  });
  $a.RED = ["RED", 0];
  $a.RED.toString = M;
  $a.RED.__enum__ = $a;
  $a.GREEN = ["GREEN", 1];
  $a.GREEN.toString = M;
  $a.GREEN.__enum__ = $a;
  $a.BLUE = ["BLUE", 2];
  $a.BLUE.toString = M;
  $a.BLUE.__enum__ = $a;
  $a.ALPHA = ["ALPHA", 3];
  $a.ALPHA.toString = M;
  $a.ALPHA.__enum__ = $a;
  var Za = (l["lime.graphics.ImageType"] = {
    __ename__: ["lime", "graphics", "ImageType"],
    __constructs__: ["CANVAS", "DATA", "FLASH", "CUSTOM"],
  });
  Za.CANVAS = ["CANVAS", 0];
  Za.CANVAS.toString = M;
  Za.CANVAS.__enum__ = Za;
  Za.DATA = ["DATA", 1];
  Za.DATA.toString = M;
  Za.DATA.__enum__ = Za;
  Za.FLASH = ["FLASH", 2];
  Za.FLASH.toString = M;
  Za.FLASH.__enum__ = Za;
  Za.CUSTOM = ["CUSTOM", 3];
  Za.CUSTOM.toString = M;
  Za.CUSTOM.__enum__ = Za;
  var Mi = function () {};
  l["lime.graphics.RenderContext"] = Mi;
  Mi.__name__ = ["lime", "graphics", "RenderContext"];
  Mi.prototype = {
    attributes: null,
    canvas2D: null,
    dom: null,
    type: null,
    version: null,
    webgl: null,
    webgl2: null,
    window: null,
    __class__: Mi,
  };
  var Dk = {};
  l["lime.graphics._WebGL2RenderContext.WebGL2RenderContext_Impl_"] = Dk;
  Dk.__name__ = [
    "lime",
    "graphics",
    "_WebGL2RenderContext",
    "WebGL2RenderContext_Impl_",
  ];
  Dk.uniform2fv = function (a, b, c, d, e) {
    null != d ? a.uniform2fv(b, c, d, e) : a.uniform2fv(b, c);
  };
  var rb = {};
  l["lime.graphics._WebGLRenderContext.WebGLRenderContext_Impl_"] = rb;
  rb.__name__ = [
    "lime",
    "graphics",
    "_WebGLRenderContext",
    "WebGLRenderContext_Impl_",
  ];
  rb.bufferData = function (a, b, c, d) {
    a.bufferData(b, c, d);
  };
  rb.texImage2D = function (a, b, c, d, e, f, g, h, n, p) {
    null != h
      ? a.texImage2D(b, c, d, e, f, g, h, n, p)
      : a.texImage2D(b, c, d, e, f, g);
  };
  rb.uniformMatrix2fv = function (a, b, c, d) {
    a.uniformMatrix2fv(b, c, d);
  };
  rb.uniformMatrix3fv = function (a, b, c, d) {
    a.uniformMatrix3fv(b, c, d);
  };
  rb.uniformMatrix4fv = function (a, b, c, d) {
    a.uniformMatrix4fv(b, c, d);
  };
  rb.fromWebGL2RenderContext = function (a) {
    return a;
  };
  var Ek = function (a) {};
  l["lime.graphics.cairo.Cairo"] = Ek;
  Ek.__name__ = ["lime", "graphics", "cairo", "Cairo"];
  Ek.prototype = {
    clip: function () {},
    identityMatrix: function () {},
    newPath: function () {},
    paint: function () {},
    rectangle: function (a, b, c, d) {},
    restore: function () {},
    save: function () {},
    setOperator: function (a) {
      return a;
    },
    setSourceRGB: function (a, b, c) {},
    set_matrix: function (a) {
      return a;
    },
    __class__: Ek,
    __properties__: { set_matrix: "set_matrix" },
  };
  var Fk = {};
  l["lime.graphics.cairo._CairoSurface.CairoSurface_Impl_"] = Fk;
  Fk.__name__ = [
    "lime",
    "graphics",
    "cairo",
    "_CairoSurface",
    "CairoSurface_Impl_",
  ];
  Fk.flush = function (a) {};
  var Mf = function () {};
  l["lime.graphics.opengl.GL"] = Mf;
  Mf.__name__ = ["lime", "graphics", "opengl", "GL"];
  Mf.getParameter = function (a) {
    return Mf.context.getParameter(a);
  };
  var Gk = function () {
    this.STACK_UNDERFLOW = 1284;
    this.STACK_OVERFLOW = 1283;
    this.CONTEXT_FLAG_DEBUG_BIT = 2;
    this.DEBUG_OUTPUT = 37600;
    this.DEBUG_SEVERITY_LOW = 37192;
    this.DEBUG_SEVERITY_MEDIUM = 37191;
    this.DEBUG_SEVERITY_HIGH = 37190;
    this.DEBUG_LOGGED_MESSAGES = 37189;
    this.MAX_DEBUG_LOGGED_MESSAGES = 37188;
    this.MAX_DEBUG_MESSAGE_LENGTH = 37187;
    this.MAX_LABEL_LENGTH = 33512;
    this.SAMPLER = 33510;
    this.QUERY = 33507;
    this.PROGRAM = 33506;
    this.SHADER = 33505;
    this.BUFFER = 33504;
    this.DEBUG_GROUP_STACK_DEPTH = 33389;
    this.MAX_DEBUG_GROUP_STACK_DEPTH = 33388;
    this.DEBUG_SEVERITY_NOTIFICATION = 33387;
    this.DEBUG_TYPE_POP_GROUP = 33386;
    this.DEBUG_TYPE_PUSH_GROUP = 33385;
    this.DEBUG_TYPE_MARKER = 33384;
    this.DEBUG_TYPE_OTHER = 33361;
    this.DEBUG_TYPE_PERFORMANCE = 33360;
    this.DEBUG_TYPE_PORTABILITY = 33359;
    this.DEBUG_TYPE_UNDEFINED_BEHAVIOR = 33358;
    this.DEBUG_TYPE_DEPRECATED_BEHAVIOR = 33357;
    this.DEBUG_TYPE_ERROR = 33356;
    this.DEBUG_SOURCE_OTHER = 33355;
    this.DEBUG_SOURCE_APPLICATION = 33354;
    this.DEBUG_SOURCE_THIRD_PARTY = 33353;
    this.DEBUG_SOURCE_SHADER_COMPILER = 33352;
    this.DEBUG_SOURCE_WINDOW_SYSTEM = 33351;
    this.DEBUG_SOURCE_API = 33350;
    this.DEBUG_CALLBACK_USER_PARAM = 33349;
    this.DEBUG_CALLBACK_FUNCTION = 33348;
    this.DEBUG_NEXT_LOGGED_MESSAGE_LENGTH = 33347;
    this.DEBUG_OUTPUT_SYNCHRONOUS = 33346;
  };
  l["lime.graphics.opengl.ext.KHR_debug"] = Gk;
  Gk.__name__ = ["lime", "graphics", "opengl", "ext", "KHR_debug"];
  Gk.prototype = {
    DEBUG_OUTPUT_SYNCHRONOUS: null,
    DEBUG_NEXT_LOGGED_MESSAGE_LENGTH: null,
    DEBUG_CALLBACK_FUNCTION: null,
    DEBUG_CALLBACK_USER_PARAM: null,
    DEBUG_SOURCE_API: null,
    DEBUG_SOURCE_WINDOW_SYSTEM: null,
    DEBUG_SOURCE_SHADER_COMPILER: null,
    DEBUG_SOURCE_THIRD_PARTY: null,
    DEBUG_SOURCE_APPLICATION: null,
    DEBUG_SOURCE_OTHER: null,
    DEBUG_TYPE_ERROR: null,
    DEBUG_TYPE_DEPRECATED_BEHAVIOR: null,
    DEBUG_TYPE_UNDEFINED_BEHAVIOR: null,
    DEBUG_TYPE_PORTABILITY: null,
    DEBUG_TYPE_PERFORMANCE: null,
    DEBUG_TYPE_OTHER: null,
    DEBUG_TYPE_MARKER: null,
    DEBUG_TYPE_PUSH_GROUP: null,
    DEBUG_TYPE_POP_GROUP: null,
    DEBUG_SEVERITY_NOTIFICATION: null,
    MAX_DEBUG_GROUP_STACK_DEPTH: null,
    DEBUG_GROUP_STACK_DEPTH: null,
    BUFFER: null,
    SHADER: null,
    PROGRAM: null,
    QUERY: null,
    SAMPLER: null,
    MAX_LABEL_LENGTH: null,
    MAX_DEBUG_MESSAGE_LENGTH: null,
    MAX_DEBUG_LOGGED_MESSAGES: null,
    DEBUG_LOGGED_MESSAGES: null,
    DEBUG_SEVERITY_HIGH: null,
    DEBUG_SEVERITY_MEDIUM: null,
    DEBUG_SEVERITY_LOW: null,
    DEBUG_OUTPUT: null,
    CONTEXT_FLAG_DEBUG_BIT: null,
    STACK_OVERFLOW: null,
    STACK_UNDERFLOW: null,
    __class__: Gk,
  };
  var Ma = {};
  l["lime.math._ColorMatrix.ColorMatrix_Impl_"] = Ma;
  Ma.__name__ = ["lime", "math", "_ColorMatrix", "ColorMatrix_Impl_"];
  Ma.getAlphaTable = function (a) {
    if (null == Ma.__alphaTable) {
      var b = new dd(256);
      Ma.__alphaTable = b;
    }
    Ma.__alphaTable[0] = 0;
    for (var c = 1; 256 > c; ) {
      var d = c++;
      b = Math.floor(d * a[18] + 255 * a[19]);
      255 < b && (b = 255);
      0 > b && (b = 0);
      Ma.__alphaTable[d] = b;
    }
    return Ma.__alphaTable;
  };
  Ma.getBlueTable = function (a) {
    if (null == Ma.__blueTable) {
      var b = new dd(256);
      Ma.__blueTable = b;
    }
    for (var c = 0; 256 > c; ) {
      var d = c++;
      b = Math.floor(d * a[12] + 255 * a[14]);
      255 < b && (b = 255);
      0 > b && (b = 0);
      Ma.__blueTable[d] = b;
    }
    return Ma.__blueTable;
  };
  Ma.getGreenTable = function (a) {
    if (null == Ma.__greenTable) {
      var b = new dd(256);
      Ma.__greenTable = b;
    }
    for (var c = 0; 256 > c; ) {
      var d = c++;
      b = Math.floor(d * a[6] + 255 * a[9]);
      255 < b && (b = 255);
      0 > b && (b = 0);
      Ma.__greenTable[d] = b;
    }
    return Ma.__greenTable;
  };
  Ma.getRedTable = function (a) {
    if (null == Ma.__redTable) {
      var b = new dd(256);
      Ma.__redTable = b;
    }
    for (var c = 0; 256 > c; ) {
      var d = c++;
      b = Math.floor(d * a[0] + 255 * a[4]);
      255 < b && (b = 255);
      0 > b && (b = 0);
      Ma.__redTable[d] = b;
    }
    return Ma.__redTable;
  };
  Ma.__toFlashColorTransform = function (a) {
    return null;
  };
  var Na = {};
  l["lime.math._Matrix4.Matrix4_Impl_"] = Na;
  Na.__name__ = ["lime", "math", "_Matrix4", "Matrix4_Impl_"];
  Na._new = function (a) {
    if (null == a || 16 != a.length)
      (a = Na.__identity), (a = null != a ? new de(a) : null);
    return a;
  };
  Na.append = function (a, b) {
    var c = a[0],
      d = a[4],
      e = a[8],
      f = a[12],
      g = a[1],
      h = a[5],
      n = a[9],
      p = a[13],
      k = a[2],
      l = a[6],
      m = a[10],
      q = a[14],
      r = a[3],
      u = a[7],
      t = a[11],
      x = a[15],
      v = Na.get(b, 0),
      w = Na.get(b, 4),
      y = Na.get(b, 8),
      z = Na.get(b, 12),
      A = Na.get(b, 1),
      K = Na.get(b, 5),
      C = Na.get(b, 9),
      B = Na.get(b, 13),
      H = Na.get(b, 2),
      D = Na.get(b, 6),
      F = Na.get(b, 10),
      I = Na.get(b, 14),
      J = Na.get(b, 3),
      G = Na.get(b, 7),
      L = Na.get(b, 11);
    b = Na.get(b, 15);
    a[0] = c * v + g * w + k * y + r * z;
    a[1] = c * A + g * K + k * C + r * B;
    a[2] = c * H + g * D + k * F + r * I;
    a[3] = c * J + g * G + k * L + r * b;
    a[4] = d * v + h * w + l * y + u * z;
    a[5] = d * A + h * K + l * C + u * B;
    a[6] = d * H + h * D + l * F + u * I;
    a[7] = d * J + h * G + l * L + u * b;
    a[8] = e * v + n * w + m * y + t * z;
    a[9] = e * A + n * K + m * C + t * B;
    a[10] = e * H + n * D + m * F + t * I;
    a[11] = e * J + n * G + m * L + t * b;
    a[12] = f * v + p * w + q * y + x * z;
    a[13] = f * A + p * K + q * C + x * B;
    a[14] = f * H + p * D + q * F + x * I;
    a[15] = f * J + p * G + q * L + x * b;
  };
  Na.createOrtho = function (a, b, c, d, e, f, g) {
    var h = 1 / (c - b),
      n = 1 / (e - d),
      p = 1 / (g - f);
    a[0] = 2 * h;
    a[1] = 0;
    a[2] = 0;
    a[3] = 0;
    a[4] = 0;
    a[5] = 2 * n;
    a[6] = 0;
    a[7] = 0;
    a[8] = 0;
    a[9] = 0;
    a[10] = -2 * p;
    a[11] = 0;
    a[12] = -(b + c) * h;
    a[13] = -(d + e) * n;
    a[14] = -(f + g) * p;
    a[15] = 1;
  };
  Na.identity = function (a) {
    a[0] = 1;
    a[1] = 0;
    a[2] = 0;
    a[3] = 0;
    a[4] = 0;
    a[5] = 1;
    a[6] = 0;
    a[7] = 0;
    a[8] = 0;
    a[9] = 0;
    a[10] = 1;
    a[11] = 0;
    a[12] = 0;
    a[13] = 0;
    a[14] = 0;
    a[15] = 1;
  };
  Na.get = function (a, b) {
    return a[b];
  };
  Na.set = function (a, b, c) {
    return (a[b] = c);
  };
  var H = {};
  l["lime.math._RGBA.RGBA_Impl_"] = H;
  H.__name__ = ["lime", "math", "_RGBA", "RGBA_Impl_"];
  var Dd = function (a, b, c, d) {
    null == d && (d = 0);
    null == c && (c = 0);
    null == b && (b = 0);
    null == a && (a = 0);
    this.x = a;
    this.y = b;
    this.width = c;
    this.height = d;
  };
  l["lime.math.Rectangle"] = Dd;
  Dd.__name__ = ["lime", "math", "Rectangle"];
  Dd.prototype = {
    height: null,
    width: null,
    x: null,
    y: null,
    intersection: function (a, b) {
      null == b && (b = new Dd());
      var c = this.x < a.x ? a.x : this.x,
        d = this.get_right() > a.get_right() ? a.get_right() : this.get_right();
      if (d <= c) return b.setEmpty(), b;
      var e = this.y < a.y ? a.y : this.y;
      a =
        this.get_bottom() > a.get_bottom() ? a.get_bottom() : this.get_bottom();
      if (a <= e) return b.setEmpty(), b;
      b.x = c;
      b.y = e;
      b.width = d - c;
      b.height = a - e;
      return b;
    },
    offset: function (a, b) {
      this.x += a;
      this.y += b;
    },
    setEmpty: function () {
      this.x = this.y = this.width = this.height = 0;
    },
    setTo: function (a, b, c, d) {
      this.x = a;
      this.y = b;
      this.width = c;
      this.height = d;
    },
    __toFlashRectangle: function () {
      return null;
    },
    get_bottom: function () {
      return this.y + this.height;
    },
    get_right: function () {
      return this.x + this.width;
    },
    __class__: Dd,
    __properties__: { get_right: "get_right", get_bottom: "get_bottom" },
  };
  var fe = function (a, b) {
    null == b && (b = 0);
    null == a && (a = 0);
    this.x = a;
    this.y = b;
  };
  l["lime.math.Vector2"] = fe;
  fe.__name__ = ["lime", "math", "Vector2"];
  fe.prototype = {
    x: null,
    y: null,
    offset: function (a, b) {
      this.x += a;
      this.y += b;
    },
    setTo: function (a, b) {
      this.x = a;
      this.y = b;
    },
    __toFlashPoint: function () {
      return null;
    },
    __class__: fe,
  };
  var Ki = function (a, b, c, d) {
    null == d && (d = 0);
    null == c && (c = 0);
    null == b && (b = 0);
    null == a && (a = 0);
    this.w = d;
    this.x = a;
    this.y = b;
    this.z = c;
  };
  l["lime.math.Vector4"] = Ki;
  Ki.__name__ = ["lime", "math", "Vector4"];
  Ki.prototype = { w: null, x: null, y: null, z: null, __class__: Ki };
  var Ta = function () {};
  l["lime.media.AudioBuffer"] = Ta;
  Ta.__name__ = ["lime", "media", "AudioBuffer"];
  Ta.fromBase64 = function (a) {
    if (null == a) return null;
    -1 == a.indexOf(",") &&
      (a = "data:" + Ta.__getCodec(df.decode(a)) + ";base64," + a);
    var b = new Ta();
    b.set_src(new Howl({ src: [a], html5: !0, preload: !1 }));
    return b;
  };
  Ta.fromBytes = function (a) {
    if (null == a) return null;
    var b = new Ta();
    b.set_src(
      new Howl({
        src: ["data:" + Ta.__getCodec(a) + ";base64," + df.encode(a)],
        html5: !0,
        preload: !1,
      })
    );
    return b;
  };
  Ta.fromFile = function (a) {
    if (null == a) return null;
    var b = new Ta();
    b.__srcHowl = new Howl({ src: [a], preload: !1 });
    return b;
  };
  Ta.fromFiles = function (a) {
    var b = new Ta();
    b.__srcHowl = new Howl({ src: a, preload: !1 });
    return b;
  };
  Ta.fromVorbisFile = function (a) {
    return null;
  };
  Ta.loadFromFile = function (a) {
    var b = new Wb(),
      c = Ta.fromFile(a);
    null != c
      ? null != c &&
        (c.__srcHowl.on("load", function () {
          b.complete(c);
        }),
        c.__srcHowl.on("loaderror", function (a, c) {
          b.error(c);
        }),
        c.__srcHowl.load())
      : b.error(null);
    return b.future;
  };
  Ta.loadFromFiles = function (a) {
    var b = new Wb(),
      c = Ta.fromFiles(a);
    null != c
      ? (c.__srcHowl.on("load", function () {
          b.complete(c);
        }),
        c.__srcHowl.on("loaderror", function () {
          b.error(null);
        }),
        c.__srcHowl.load())
      : b.error(null);
    return b.future;
  };
  Ta.__getCodec = function (a) {
    switch (a.getString(0, 4)) {
      case "OggS":
        return "audio/ogg";
      case "RIFF":
        if ("WAVE" == a.getString(8, 4)) return "audio/wav";
        var b = a.get(2),
          c = a.get(1);
        switch (a.get(0)) {
          case 73:
            if (68 == c && 51 == b) return "audio/mp3";
            break;
          case 255:
            switch (c) {
              case 243:
              case 250:
              case 251:
                return "audio/mp3";
            }
        }
        break;
      case "fLaC":
        return "audio/flac";
      default:
        switch (((b = a.get(2)), (c = a.get(1)), a.get(0))) {
          case 73:
            if (68 == c && 51 == b) return "audio/mp3";
            break;
          case 255:
            switch (c) {
              case 243:
              case 250:
              case 251:
                return "audio/mp3";
            }
        }
    }
    xa.error("Unsupported sound format", {
      fileName: "AudioBuffer.hx",
      lineNumber: 443,
      className: "lime.media.AudioBuffer",
      methodName: "__getCodec",
    });
    return null;
  };
  Ta.prototype = {
    __srcHowl: null,
    set_src: function (a) {
      return (this.__srcHowl = a);
    },
    __class__: Ta,
    __properties__: { set_src: "set_src" },
  };
  var $i = function (a) {
    if ("custom" != a) {
      if (null == a || "web" == a)
        try {
          (window.AudioContext =
            window.AudioContext || window.webkitAudioContext),
            (this.web = new window.AudioContext()),
            (this.type = "web");
        } catch (b) {
          ta.lastException = b;
        }
      null == this.web &&
        "web" != a &&
        ((this.html5 = new Zi()), (this.type = "html5"));
    } else this.type = "custom";
  };
  l["lime.media.AudioContext"] = $i;
  $i.__name__ = ["lime", "media", "AudioContext"];
  $i.prototype = {
    html5: null,
    openal: null,
    type: null,
    web: null,
    __class__: $i,
  };
  var ye = function () {};
  l["lime.media.AudioManager"] = ye;
  ye.__name__ = ["lime", "media", "AudioManager"];
  ye.init = function (a) {
    if (null == ye.context) {
      if (
        null == a &&
        ((ye.context = new $i()), (a = ye.context), "openal" == a.type)
      ) {
        var b = a.openal,
          c = b.openDevice();
        c = b.createContext(c);
        b.makeContextCurrent(c);
        b.processContext(c);
      }
      ye.context = a;
    }
  };
  var Hk = function (a, b, c, d) {
    null == d && (d = 0);
    null == b && (b = 0);
    this.onComplete = new fb();
    this.buffer = a;
    this.offset = b;
    this.__backend = new Li(this);
    null != c && 0 != c && this.set_length(c);
    this.set_loops(d);
    null != a && this.init();
  };
  l["lime.media.AudioSource"] = Hk;
  Hk.__name__ = ["lime", "media", "AudioSource"];
  Hk.prototype = {
    onComplete: null,
    buffer: null,
    offset: null,
    __backend: null,
    dispose: function () {
      this.__backend.dispose();
    },
    init: function () {
      this.__backend.init();
    },
    play: function () {
      this.__backend.play();
    },
    stop: function () {
      this.__backend.stop();
    },
    get_currentTime: function () {
      return this.__backend.getCurrentTime();
    },
    set_currentTime: function (a) {
      return this.__backend.setCurrentTime(a);
    },
    get_gain: function () {
      return this.__backend.getGain();
    },
    set_gain: function (a) {
      return this.__backend.setGain(a);
    },
    set_length: function (a) {
      return this.__backend.setLength(a);
    },
    set_loops: function (a) {
      return this.__backend.setLoops(a);
    },
    get_position: function () {
      return this.__backend.getPosition();
    },
    set_position: function (a) {
      return this.__backend.setPosition(a);
    },
    __class__: Hk,
    __properties__: {
      set_position: "set_position",
      get_position: "get_position",
      set_loops: "set_loops",
      set_length: "set_length",
      set_gain: "set_gain",
      get_gain: "get_gain",
      set_currentTime: "set_currentTime",
      get_currentTime: "get_currentTime",
    },
  };
  var Zi = function () {};
  l["lime.media.HTML5AudioContext"] = Zi;
  Zi.__name__ = ["lime", "media", "HTML5AudioContext"];
  Zi.prototype = { __class__: Zi };
  var Ik = function () {};
  l["lime.media.OpenALAudioContext"] = Ik;
  Ik.__name__ = ["lime", "media", "OpenALAudioContext"];
  Ik.prototype = {
    createContext: function (a, b) {
      return Ke.createContext(a, b);
    },
    makeContextCurrent: function (a) {
      return Ke.makeContextCurrent(a);
    },
    openDevice: function (a) {
      return Ke.openDevice(a);
    },
    processContext: function (a) {
      Ke.processContext(a);
    },
    __class__: Ik,
  };
  var Ke = function () {};
  l["lime.media.openal.ALC"] = Ke;
  Ke.__name__ = ["lime", "media", "openal", "ALC"];
  Ke.createContext = function (a, b) {
    return null;
  };
  Ke.makeContextCurrent = function (a) {
    return !1;
  };
  Ke.openDevice = function (a) {
    return null;
  };
  Ke.processContext = function (a) {};
  var aj = function () {};
  l["lime.net._IHTTPRequest"] = aj;
  aj.__name__ = ["lime", "net", "_IHTTPRequest"];
  aj.prototype = {
    contentType: null,
    data: null,
    enableResponseHeaders: null,
    followRedirects: null,
    formData: null,
    headers: null,
    method: null,
    responseHeaders: null,
    responseStatus: null,
    timeout: null,
    uri: null,
    userAgent: null,
    withCredentials: null,
    __class__: aj,
  };
  var ie = function (a) {
    this.uri = a;
    this.contentType = "application/x-www-form-urlencoded";
    this.followRedirects = !0;
    this.enableResponseHeaders = !1;
    this.formData = new sa();
    this.headers = [];
    this.method = "GET";
    this.timeout = 3e4;
    this.withCredentials = !1;
    this.__backend = new ba();
    this.__backend.init(this);
  };
  l["lime.net._HTTPRequest.AbstractHTTPRequest"] = ie;
  ie.__name__ = ["lime", "net", "_HTTPRequest", "AbstractHTTPRequest"];
  ie.__interfaces__ = [aj];
  ie.prototype = {
    contentType: null,
    data: null,
    enableResponseHeaders: null,
    followRedirects: null,
    formData: null,
    headers: null,
    method: null,
    responseData: null,
    responseHeaders: null,
    responseStatus: null,
    timeout: null,
    uri: null,
    userAgent: null,
    withCredentials: null,
    __backend: null,
    __class__: ie,
  };
  var Pf = function (a) {
    ie.call(this, a);
  };
  l["lime.net._HTTPRequest_Bytes"] = Pf;
  Pf.__name__ = ["lime", "net", "_HTTPRequest_Bytes"];
  Pf.__super__ = ie;
  Pf.prototype = v(ie.prototype, {
    fromBytes: function (a) {
      return a;
    },
    load: function (a) {
      var b = this;
      null != a && (this.uri = a);
      var c = new Wb();
      a = this.__backend.loadData(this.uri);
      a.onProgress(m(c, c.progress));
      a.onError(m(c, c.error));
      a.onComplete(function (a) {
        b.responseData = b.fromBytes(a);
        c.complete(b.responseData);
      });
      return c.future;
    },
    __class__: Pf,
  });
  var xf = function (a) {
    ie.call(this, a);
  };
  l["lime.net._HTTPRequest_String"] = xf;
  xf.__name__ = ["lime", "net", "_HTTPRequest_String"];
  xf.__super__ = ie;
  xf.prototype = v(ie.prototype, {
    load: function (a) {
      var b = this;
      null != a && (this.uri = a);
      var c = new Wb();
      a = this.__backend.loadText(this.uri);
      a.onProgress(m(c, c.progress));
      a.onError(m(c, c.error));
      a.onComplete(function (a) {
        b.responseData = a;
        c.complete(b.responseData);
      });
      return c.future;
    },
    __class__: xf,
  });
  var gh = function (a, b) {
    null == b && (b = "");
    this.name = a;
    this.value = b;
  };
  l["lime.net.HTTPRequestHeader"] = gh;
  gh.__name__ = ["lime", "net", "HTTPRequestHeader"];
  gh.prototype = { name: null, value: null, __class__: gh };
  var ph = function (a) {
    ie.call(this, a);
  };
  l["lime.net._HTTPRequest_lime_utils_Bytes"] = ph;
  ph.__name__ = ["lime", "net", "_HTTPRequest_lime_utils_Bytes"];
  ph.__super__ = Pf;
  ph.prototype = v(Pf.prototype, {
    fromBytes: function (a) {
      return pd.fromBytes(a);
    },
    __class__: ph,
  });
  var qh = function (a) {
    ie.call(this, a);
  };
  l["lime.net._HTTPRequest_openfl_utils_ByteArray"] = qh;
  qh.__name__ = ["lime", "net", "_HTTPRequest_openfl_utils_ByteArray"];
  qh.__super__ = Pf;
  qh.prototype = v(Pf.prototype, {
    fromBytes: function (a) {
      return fd.fromBytes(a);
    },
    __class__: qh,
  });
  var Nb = function () {};
  l["lime.system.Clipboard"] = Nb;
  Nb.__name__ = ["lime", "system", "Clipboard"];
  Nb.__properties__ = { set_text: "set_text", get_text: "get_text" };
  Nb.__update = function () {
    Nb._text != Nb._text && Nb.onUpdate.dispatch();
  };
  Nb.get_text = function () {
    Nb.__update();
    return Nb._text;
  };
  Nb.set_text = function (a) {
    var b = Nb._text;
    Nb._text = a;
    var c = nc.current.get_window();
    null != c && c.__backend.setClipboard(a);
    Nb._text != b && Nb.onUpdate.dispatch();
    return a;
  };
  var wl = function () {};
  l["lime.system.DisplayMode"] = wl;
  wl.__name__ = ["lime", "system", "DisplayMode"];
  var je = (l["lime.system.Endian"] = {
    __ename__: ["lime", "system", "Endian"],
    __constructs__: ["LITTLE_ENDIAN", "BIG_ENDIAN"],
  });
  je.LITTLE_ENDIAN = ["LITTLE_ENDIAN", 0];
  je.LITTLE_ENDIAN.toString = M;
  je.LITTLE_ENDIAN.__enum__ = je;
  je.BIG_ENDIAN = ["BIG_ENDIAN", 1];
  je.BIG_ENDIAN.toString = M;
  je.BIG_ENDIAN.__enum__ = je;
  var $e = function (a, b) {
    this.onUpdate = new Oi();
    this.type = a;
    this.id = b;
  };
  l["lime.system.Sensor"] = $e;
  $e.__name__ = ["lime", "system", "Sensor"];
  $e.registerSensor = function (a, b) {
    a = new $e(a, b);
    $e.sensors.push(a);
    $e.sensorByID.set(b, a);
    return a;
  };
  $e.prototype = { id: null, onUpdate: null, type: null, __class__: $e };
  var pi = (l["lime.system.SensorType"] = {
    __ename__: ["lime", "system", "SensorType"],
    __constructs__: ["ACCELEROMETER"],
  });
  pi.ACCELEROMETER = ["ACCELEROMETER", 0];
  pi.ACCELEROMETER.toString = M;
  pi.ACCELEROMETER.__enum__ = pi;
  var Db = function () {};
  l["lime.system.System"] = Db;
  Db.__name__ = ["lime", "system", "System"];
  Db.__properties__ = { get_endianness: "get_endianness" };
  Db.embed = F.lime.embed = function (a, b, c, d, e) {
    if (
      null != Db.__applicationEntryPoint &&
      Db.__applicationEntryPoint.exists(a)
    ) {
      var f =
        "string" == typeof b
          ? T.get_document().getElementById(b)
          : null == b
          ? T.get_document().createElement("div")
          : b;
      null == f
        ? T.get_window().console.log(
            "[lime.embed] ERROR: Cannot find target element: " + u.string(b)
          )
        : (null == c && (c = 0),
          null == d && (d = 0),
          null == e && (e = {}),
          A.hasField(e, "background") &&
            "string" == typeof e.background &&
            ((b = J.replace(u.string(e.background), "#", "")),
            -1 < b.indexOf("0x")
              ? (e.background = u.parseInt(b))
              : (e.background = u.parseInt("0x" + b))),
          (e.element = f),
          (e.width = c),
          (e.height = d),
          Db.__applicationEntryPoint.get(a)(e));
    }
  };
  Db.exit = function (a) {};
  Db.getTimer = function () {
    return u["int"](T.get_window().performance.now());
  };
  Db.openURL = function (a, b) {
    null == b && (b = "_blank");
    null != a && T.get_window().open(a, b);
  };
  Db.__registerEntryPoint = function (a, b) {
    null == Db.__applicationEntryPoint &&
      (Db.__applicationEntryPoint = new sa());
    Db.__applicationEntryPoint.set(a, b);
  };
  Db.get_endianness = function () {
    if (null == Db.__endianness) {
      var a = new Ii(2),
        b = null != a ? new dd(a, 0) : null;
      a = null != a ? new Uint16Array(a, 0) : null;
      b[0] = 170;
      b[1] = 187;
      Db.__endianness = 43707 == a[0] ? je.BIG_ENDIAN : je.LITTLE_ENDIAN;
    }
    return Db.__endianness;
  };
  var Ni = function (a, b) {
    null == b && (b = 1);
    null == a && (a = 0);
    this.onRun = new Je();
    this.onError = new Je();
    this.onComplete = new Je();
    this.doWork = new Je();
    this.minThreads = a;
    this.maxThreads = b;
    this.currentThreads = 0;
  };
  l["lime.system.ThreadPool"] = Ni;
  Ni.__name__ = ["lime", "system", "ThreadPool"];
  Ni.prototype = {
    currentThreads: null,
    doWork: null,
    maxThreads: null,
    minThreads: null,
    onComplete: null,
    onError: null,
    onRun: null,
    queue: function (a) {
      this.runWork(a);
    },
    sendComplete: function (a) {
      this.onComplete.dispatch(a);
    },
    sendError: function (a) {
      this.onError.dispatch(a);
    },
    runWork: function (a) {
      this.onRun.dispatch(a);
      this.doWork.dispatch(a);
    },
    __class__: Ni,
  };
  var qc = function (a) {
    null != a && (this.name = a);
    this.unitsPerEM =
      this.underlineThickness =
      this.underlinePosition =
      this.numGlyphs =
      this.height =
      this.descender =
      this.ascender =
        0;
    null != this.__fontID
      ? Q.isLocal(this.__fontID) && this.__fromBytes(Q.getBytes(this.__fontID))
      : null != this.__fontPath && this.__fromFile(this.__fontPath);
  };
  l["lime.text.Font"] = qc;
  qc.__name__ = ["lime", "text", "Font"];
  qc.fromFile = function (a) {
    if (null == a) return null;
    var b = new qc();
    b.__fromFile(a);
    return b;
  };
  qc.loadFromName = function (a) {
    return new qc().__loadFromName(a);
  };
  qc.__measureFontNode = function (a) {
    var b = T.get_document().createElement("span");
    b.setAttribute("aria-hidden", "true");
    var c = T.get_document().createTextNode("BESbswy");
    b.appendChild(c);
    c = b.style;
    c.display = "block";
    c.position = "absolute";
    c.top = "-9999px";
    c.left = "-9999px";
    c.fontSize = "300px";
    c.width = "auto";
    c.height = "auto";
    c.lineHeight = "normal";
    c.margin = "0";
    c.padding = "0";
    c.fontVariant = "normal";
    c.whiteSpace = "nowrap";
    c.fontFamily = a;
    T.get_document().body.appendChild(b);
    return b;
  };
  qc.prototype = {
    ascender: null,
    descender: null,
    height: null,
    name: null,
    numGlyphs: null,
    src: null,
    underlinePosition: null,
    underlineThickness: null,
    unitsPerEM: null,
    __fontID: null,
    __fontPath: null,
    __copyFrom: function (a) {
      null != a &&
        ((this.ascender = a.ascender),
        (this.descender = a.descender),
        (this.height = a.height),
        (this.name = a.name),
        (this.numGlyphs = a.numGlyphs),
        (this.src = a.src),
        (this.underlinePosition = a.underlinePosition),
        (this.underlineThickness = a.underlineThickness),
        (this.unitsPerEM = a.unitsPerEM),
        (this.__fontID = a.__fontID),
        (this.__fontPath = a.__fontPath));
    },
    __fromBytes: function (a) {
      this.__fontPath = null;
    },
    __fromFile: function (a) {
      this.__fontPath = a;
    },
    __loadFromName: function (a) {
      var b = this,
        c = new Wb();
      this.name = a;
      var d = T.get_navigator().userAgent.toLowerCase(),
        e = 0 <= d.indexOf(" safari/") && 0 > d.indexOf(" chrome/");
      d = new pa("(iPhone|iPod|iPad).*AppleWebKit(?!.*Version)", "i").match(d);
      if (
        !e &&
        !d &&
        T.get_document().fonts &&
        ((Ya = T.get_document().fonts), m(Ya, Ya.load))
      )
        T.get_document()
          .fonts.load("1em '" + a + "'")
          .then(
            function (a) {
              c.complete(b);
            },
            function (d) {
              xa.warn('Could not load web font "' + a + '"', {
                fileName: "Font.hx",
                lineNumber: 538,
                className: "lime.text.Font",
                methodName: "__loadFromName",
              });
              c.complete(b);
            }
          );
      else {
        var f = qc.__measureFontNode("'" + a + "', sans-serif"),
          g = qc.__measureFontNode("'" + a + "', serif"),
          h = f.offsetWidth,
          n = g.offsetWidth,
          p = -1,
          k = 0,
          l,
          q;
        p = T.get_window().setInterval(function () {
          k += 1;
          l = f.offsetWidth == h ? g.offsetWidth != n : !0;
          q = 3e3 <= 50 * k;
          if (l || q)
            T.get_window().clearInterval(p),
              f.parentNode.removeChild(f),
              g.parentNode.removeChild(g),
              (g = f = null),
              q &&
                xa.warn('Could not load web font "' + a + '"', {
                  fileName: "Font.hx",
                  lineNumber: 574,
                  className: "lime.text.Font",
                  methodName: "__loadFromName",
                }),
              c.complete(b);
        }, 50);
      }
      return c.future;
    },
    __class__: qc,
  };
  var O = {};
  l["lime.text._UTF8String.UTF8String_Impl_"] = O;
  O.__name__ = ["lime", "text", "_UTF8String", "UTF8String_Impl_"];
  O.__properties__ = { get_length: "get_length" };
  O.charAt = function (a, b) {
    return ed.uCharAt(a, b);
  };
  O.charCodeAt = function (a, b) {
    return 0 > b || b >= ed.uLength(a) ? null : ed.uCharCodeAt(a, b);
  };
  O.indexOf = function (a, b, c) {
    null == c && (c = 0);
    return ed.uIndexOf(a, b, c);
  };
  O.substr = function (a, b, c) {
    null == c && (c = O.get_length(a) - b);
    return qg.sub(a, b, c);
  };
  O.substring = function (a, b, c) {
    return ed.uSubstring(a, b, c);
  };
  O.equals = function (a, b) {
    return null == a || null == b ? a == b : 0 == ed.uCompare(a, b);
  };
  O.get_length = function (a) {
    return null == a ? 0 : ed.uLength(a);
  };
  var xl = function () {};
  l["lime.text.harfbuzz.HBSegmentProperties"] = xl;
  xl.__name__ = ["lime", "text", "harfbuzz", "HBSegmentProperties"];
  var vb = function (a) {
    this.onDisconnect = new fb();
    this.onButtonUp = new nh();
    this.onButtonDown = new nh();
    this.onAxisMove = new Wi();
    this.id = a;
    this.connected = !0;
  };
  l["lime.ui.Gamepad"] = vb;
  vb.__name__ = ["lime", "ui", "Gamepad"];
  vb.__connect = function (a) {
    if (!vb.devices.exists(a)) {
      var b = new vb(a);
      vb.devices.set(a, b);
      vb.onConnect.dispatch(b);
    }
  };
  vb.__disconnect = function (a) {
    var b = vb.devices.get(a);
    null != b && (b.connected = !1);
    vb.devices.remove(a);
    null != b && b.onDisconnect.dispatch();
  };
  vb.prototype = {
    connected: null,
    id: null,
    onAxisMove: null,
    onButtonDown: null,
    onButtonUp: null,
    onDisconnect: null,
    get_guid: function () {
      return zb.__getDeviceData()[this.id].id;
    },
    get_name: function () {
      return zb.__getDeviceData()[this.id].id;
    },
    __class__: vb,
    __properties__: { get_name: "get_name", get_guid: "get_guid" },
  };
  var zb = function (a) {
    this.onTrackballMove = new Si();
    this.onHatMove = new Ui();
    this.onDisconnect = new fb();
    this.onButtonUp = new ce();
    this.onButtonDown = new ce();
    this.onAxisMove = new Ti();
    this.id = a;
    this.connected = !0;
  };
  l["lime.ui.Joystick"] = zb;
  zb.__name__ = ["lime", "ui", "Joystick"];
  zb.__connect = function (a) {
    if (!zb.devices.exists(a)) {
      var b = new zb(a);
      zb.devices.set(a, b);
      zb.onConnect.dispatch(b);
    }
  };
  zb.__disconnect = function (a) {
    var b = zb.devices.get(a);
    null != b && (b.connected = !1);
    zb.devices.remove(a);
    null != b && b.onDisconnect.dispatch();
  };
  zb.__getDeviceData = function () {
    return navigator.getGamepads
      ? navigator.getGamepads()
      : navigator.webkitGetGamepads
      ? navigator.webkitGetGamepads()
      : null;
  };
  zb.prototype = {
    connected: null,
    id: null,
    onAxisMove: null,
    onButtonDown: null,
    onButtonUp: null,
    onDisconnect: null,
    onHatMove: null,
    onTrackballMove: null,
    __class__: zb,
  };
  var ab = {};
  l["lime.ui._KeyModifier.KeyModifier_Impl_"] = ab;
  ab.__name__ = ["lime", "ui", "_KeyModifier", "KeyModifier_Impl_"];
  ab.__properties__ = {
    get_shiftKey: "get_shiftKey",
    get_metaKey: "get_metaKey",
    get_ctrlKey: "get_ctrlKey",
    get_altKey: "get_altKey",
  };
  ab.get_altKey = function (a) {
    return 0 >= (a & 256) ? 0 < (a & 512) : !0;
  };
  ab.get_ctrlKey = function (a) {
    return 0 >= (a & 64) ? 0 < (a & 128) : !0;
  };
  ab.get_metaKey = function (a) {
    return 0 >= (a & 1024) ? 0 < (a & 2048) : !0;
  };
  ab.get_shiftKey = function (a) {
    return 0 >= (a & 1) ? 0 < (a & 2) : !0;
  };
  var P = (l["lime.ui.MouseCursor"] = {
    __ename__: ["lime", "ui", "MouseCursor"],
    __constructs__:
      "ARROW CROSSHAIR DEFAULT MOVE POINTER RESIZE_NESW RESIZE_NS RESIZE_NWSE RESIZE_WE TEXT WAIT WAIT_ARROW CUSTOM".split(
        " "
      ),
  });
  P.ARROW = ["ARROW", 0];
  P.ARROW.toString = M;
  P.ARROW.__enum__ = P;
  P.CROSSHAIR = ["CROSSHAIR", 1];
  P.CROSSHAIR.toString = M;
  P.CROSSHAIR.__enum__ = P;
  P.DEFAULT = ["DEFAULT", 2];
  P.DEFAULT.toString = M;
  P.DEFAULT.__enum__ = P;
  P.MOVE = ["MOVE", 3];
  P.MOVE.toString = M;
  P.MOVE.__enum__ = P;
  P.POINTER = ["POINTER", 4];
  P.POINTER.toString = M;
  P.POINTER.__enum__ = P;
  P.RESIZE_NESW = ["RESIZE_NESW", 5];
  P.RESIZE_NESW.toString = M;
  P.RESIZE_NESW.__enum__ = P;
  P.RESIZE_NS = ["RESIZE_NS", 6];
  P.RESIZE_NS.toString = M;
  P.RESIZE_NS.__enum__ = P;
  P.RESIZE_NWSE = ["RESIZE_NWSE", 7];
  P.RESIZE_NWSE.toString = M;
  P.RESIZE_NWSE.__enum__ = P;
  P.RESIZE_WE = ["RESIZE_WE", 8];
  P.RESIZE_WE.toString = M;
  P.RESIZE_WE.__enum__ = P;
  P.TEXT = ["TEXT", 9];
  P.TEXT.toString = M;
  P.TEXT.__enum__ = P;
  P.WAIT = ["WAIT", 10];
  P.WAIT.toString = M;
  P.WAIT.__enum__ = P;
  P.WAIT_ARROW = ["WAIT_ARROW", 11];
  P.WAIT_ARROW.toString = M;
  P.WAIT_ARROW.__enum__ = P;
  P.CUSTOM = ["CUSTOM", 12];
  P.CUSTOM.toString = M;
  P.CUSTOM.__enum__ = P;
  var Gb = (l["lime.ui.MouseWheelMode"] = {
    __ename__: ["lime", "ui", "MouseWheelMode"],
    __constructs__: ["PIXELS", "LINES", "PAGES", "UNKNOWN"],
  });
  Gb.PIXELS = ["PIXELS", 0];
  Gb.PIXELS.toString = M;
  Gb.PIXELS.__enum__ = Gb;
  Gb.LINES = ["LINES", 1];
  Gb.LINES.toString = M;
  Gb.LINES.__enum__ = Gb;
  Gb.PAGES = ["PAGES", 2];
  Gb.PAGES.toString = M;
  Gb.PAGES.__enum__ = Gb;
  Gb.UNKNOWN = ["UNKNOWN", 3];
  Gb.UNKNOWN.toString = M;
  Gb.UNKNOWN.__enum__ = Gb;
  var Jb = function (a, b, c, d, e, f, g) {
    this.x = a;
    this.y = b;
    this.id = c;
    this.dx = d;
    this.dy = e;
    this.pressure = f;
    this.device = g;
  };
  l["lime.ui.Touch"] = Jb;
  Jb.__name__ = ["lime", "ui", "Touch"];
  Jb.prototype = {
    device: null,
    dx: null,
    dy: null,
    id: null,
    pressure: null,
    x: null,
    y: null,
    __class__: Jb,
  };
  var sg = function (a, b) {
    this.onTextInput = new lh();
    this.onTextEdit = new Vi();
    this.onRestore = new fb();
    this.onResize = new kh();
    this.onRenderContextRestored = new mh();
    this.onRenderContextLost = new fb();
    this.onRender = new mh();
    this.onMove = new Of();
    this.onMouseWheel = new Ri();
    this.onMouseUp = new Pi();
    this.onMouseMoveRelative = new Of();
    this.onMouseMove = new Of();
    this.onMouseDown = new Qi();
    this.onMinimize = new fb();
    this.onLeave = new fb();
    this.onKeyUp = new oh();
    this.onKeyDown = new oh();
    this.onFullscreen = new fb();
    this.onFocusOut = new fb();
    this.onFocusIn = new fb();
    this.onExpose = new fb();
    this.onEnter = new fb();
    this.onDropFile = new lh();
    this.onDeactivate = new fb();
    this.onClose = new fb();
    this.onActivate = new fb();
    this.application = a;
    this.__attributes = null != b ? b : {};
    A.hasField(this.__attributes, "parameters") &&
      (this.parameters = this.__attributes.parameters);
    this.__height = this.__width = 0;
    this.__fullscreen = !1;
    this.__scale = 1;
    this.__y = this.__x = 0;
    this.__title = "";
    this.id = -1;
    this.__backend = new la(this);
  };
  l["lime.ui.Window"] = sg;
  sg.__name__ = ["lime", "ui", "Window"];
  sg.prototype = {
    application: null,
    context: null,
    element: null,
    id: null,
    onActivate: null,
    onClose: null,
    onDeactivate: null,
    onDropFile: null,
    onEnter: null,
    onExpose: null,
    onFocusIn: null,
    onFocusOut: null,
    onFullscreen: null,
    onKeyDown: null,
    onKeyUp: null,
    onLeave: null,
    onMinimize: null,
    onMouseDown: null,
    onMouseMove: null,
    onMouseMoveRelative: null,
    onMouseUp: null,
    onMouseWheel: null,
    onMove: null,
    onRender: null,
    onRenderContextLost: null,
    onRenderContextRestored: null,
    onResize: null,
    onRestore: null,
    onTextEdit: null,
    onTextInput: null,
    parameters: null,
    stage: null,
    __attributes: null,
    __backend: null,
    __fullscreen: null,
    __height: null,
    __resizable: null,
    __scale: null,
    __title: null,
    __width: null,
    __x: null,
    __y: null,
    close: function () {
      this.__backend.close();
    },
    set_cursor: function (a) {
      return this.__backend.setCursor(a);
    },
    get_frameRate: function () {
      return this.__backend.getFrameRate();
    },
    set_frameRate: function (a) {
      return this.__backend.setFrameRate(a);
    },
    get_fullscreen: function () {
      return this.__fullscreen;
    },
    get_height: function () {
      return this.__height;
    },
    get_scale: function () {
      return this.__scale;
    },
    set_textInputEnabled: function (a) {
      return this.__backend.setTextInputEnabled(a);
    },
    get_width: function () {
      return this.__width;
    },
    __class__: sg,
    __properties__: {
      get_scale: "get_scale",
      get_width: "get_width",
      set_textInputEnabled: "set_textInputEnabled",
      get_height: "get_height",
      get_fullscreen: "get_fullscreen",
      set_frameRate: "set_frameRate",
      get_frameRate: "get_frameRate",
      set_cursor: "set_cursor",
    },
  };
  var bj = function () {
    this.enabled = !0;
    this.audio = new sa();
    this.font = new sa();
    this.image = new sa();
    this.version = 549993;
  };
  l["lime.utils.AssetCache"] = bj;
  bj.__name__ = ["lime", "utils", "AssetCache"];
  bj.prototype = {
    audio: null,
    enabled: null,
    image: null,
    font: null,
    version: null,
    exists: function (a, b) {
      return (("IMAGE" == b || null == b) && this.image.exists(a)) ||
        (("FONT" == b || null == b) && this.font.exists(a)) ||
        (("SOUND" == b || "MUSIC" == b || null == b) && this.audio.exists(a))
        ? !0
        : !1;
    },
    set: function (a, b, c) {
      switch (b) {
        case "FONT":
          this.font.set(a, c);
          break;
        case "IMAGE":
          if (!u.is(c, qa))
            throw new G(
              "Cannot cache non-Image asset: " + u.string(c) + " as Image"
            );
          this.image.set(a, c);
          break;
        case "MUSIC":
        case "SOUND":
          if (!u.is(c, Ta))
            throw new G(
              "Cannot cache non-AudioBuffer asset: " +
                u.string(c) +
                " as AudioBuffer"
            );
          this.audio.set(a, c);
          break;
        default:
          throw new G(b + " assets are not cachable");
      }
    },
    clear: function (a) {
      if (null == a)
        (this.audio = new sa()),
          (this.font = new sa()),
          (this.image = new sa());
      else {
        for (var b = this.audio.keys(); b.hasNext(); ) {
          var c = b.next();
          J.startsWith(c, a) && this.audio.remove(c);
        }
        for (b = this.font.keys(); b.hasNext(); )
          (c = b.next()), J.startsWith(c, a) && this.font.remove(c);
        for (b = this.image.keys(); b.hasNext(); )
          (c = b.next()), J.startsWith(c, a) && this.image.remove(c);
      }
    },
    __class__: bj,
  };
  var db = function () {
    this.types = new sa();
    this.sizes = new sa();
    this.preload = new sa();
    this.paths = new sa();
    this.pathGroups = new sa();
    this.classTypes = new sa();
    this.cachedText = new sa();
    this.cachedImages = new sa();
    this.cachedFonts = new sa();
    this.cachedBytes = new sa();
    this.cachedAudioBuffers = new sa();
    this.onChange = new fb();
    this.bytesTotal = this.bytesLoaded = 0;
  };
  l["lime.utils.AssetLibrary"] = db;
  db.__name__ = ["lime", "utils", "AssetLibrary"];
  db.fromManifest = function (a) {
    if (null == a) return null;
    if (null == a.libraryType) var b = new db();
    else if (((b = I.resolveClass(a.libraryType)), null != b))
      b = I.createInstance(b, a.libraryArgs);
    else
      return (
        xa.warn("Could not find library type: " + a.libraryType, {
          fileName: "AssetLibrary.hx",
          lineNumber: 140,
          className: "lime.utils.AssetLibrary",
          methodName: "fromManifest",
        }),
        null
      );
    b.__fromManifest(a);
    return b;
  };
  db.prototype = {
    onChange: null,
    assetsLoaded: null,
    assetsTotal: null,
    bytesLoaded: null,
    bytesLoadedCache: null,
    bytesTotal: null,
    cachedAudioBuffers: null,
    cachedBytes: null,
    cachedFonts: null,
    cachedImages: null,
    cachedText: null,
    classTypes: null,
    loaded: null,
    pathGroups: null,
    paths: null,
    preload: null,
    promise: null,
    sizes: null,
    types: null,
    exists: function (a, b) {
      b = null != b ? r.__cast(b, String) : null;
      a = this.types.get(a);
      return null == a ||
        (a != b &&
          (("SOUND" != b && "MUSIC" != b) || ("MUSIC" != a && "SOUND" != a)) &&
          "BINARY" != b &&
          null != b &&
          ("BINARY" != a || "TEXT" != b))
        ? !1
        : !0;
    },
    getAsset: function (a, b) {
      switch (b) {
        case "BINARY":
          return this.getBytes(a);
        case "FONT":
          return this.getFont(a);
        case "IMAGE":
          return this.getImage(a);
        case "MUSIC":
        case "SOUND":
          return this.getAudioBuffer(a);
        case "TEMPLATE":
          throw new G("Not sure how to get template: " + a);
        case "TEXT":
          return this.getText(a);
        default:
          throw new G("Unknown asset type: " + b);
      }
    },
    getAudioBuffer: function (a) {
      return this.cachedAudioBuffers.exists(a)
        ? this.cachedAudioBuffers.get(a)
        : this.classTypes.exists(a)
        ? Ta.fromBytes(
            r.__cast(I.createInstance(this.classTypes.get(a), []), eb)
          )
        : Ta.fromFile(this.paths.get(a));
    },
    getBytes: function (a) {
      if (this.cachedBytes.exists(a)) return this.cachedBytes.get(a);
      if (this.cachedText.exists(a)) {
        var b = pd.ofString(this.cachedText.get(a));
        this.cachedBytes.set(a, b);
        return b;
      }
      return this.classTypes.exists(a)
        ? r.__cast(I.createInstance(this.classTypes.get(a), []), eb)
        : pd.fromFile(this.paths.get(a));
    },
    getFont: function (a) {
      return this.cachedFonts.exists(a)
        ? this.cachedFonts.get(a)
        : this.classTypes.exists(a)
        ? r.__cast(I.createInstance(this.classTypes.get(a), []), qc)
        : qc.fromFile(this.paths.get(a));
    },
    getImage: function (a) {
      return this.cachedImages.exists(a)
        ? this.cachedImages.get(a)
        : this.classTypes.exists(a)
        ? r.__cast(I.createInstance(this.classTypes.get(a), []), qa)
        : qa.fromFile(this.paths.get(a));
    },
    getText: function (a) {
      if (this.cachedText.exists(a)) return this.cachedText.get(a);
      a = this.getBytes(a);
      return null == a ? null : a.getString(0, a.length);
    },
    isLocal: function (a, b) {
      if (this.classTypes.exists(a)) return !0;
      switch (null != b ? r.__cast(b, String) : null) {
        case "FONT":
          return this.cachedFonts.exists(a);
        case "IMAGE":
          return this.cachedImages.exists(a);
        case "MUSIC":
        case "SOUND":
          return this.cachedAudioBuffers.exists(a);
        default:
          return this.cachedBytes.exists(a) ? !0 : this.cachedText.exists(a);
      }
    },
    load: function () {
      if (this.loaded) return La.withValue(this);
      if (null == this.promise) {
        this.promise = new Wb();
        this.bytesLoadedCache = new sa();
        this.assetsLoaded = 0;
        this.assetsTotal = 1;
        for (var a = this.preload.keys(); a.hasNext(); ) {
          var b = a.next();
          if (this.preload.get(b)) {
            xa.verbose(
              "Preloading asset: " + b + " [" + this.types.get(b) + "]",
              {
                fileName: "AssetLibrary.hx",
                lineNumber: 452,
                className: "lime.utils.AssetLibrary",
                methodName: "load",
              }
            );
            var c = this.types.get(b);
            if (null != c)
              switch (c) {
                case "BINARY":
                  this.assetsTotal++;
                  c = this.loadBytes(b);
                  c.onProgress(
                    (function (a, b) {
                      return function (c, d) {
                        b[0](a[0], c, d);
                      };
                    })([b], [m(this, this.load_onProgress)])
                  );
                  c.onError(
                    (function (a, b) {
                      return function (c) {
                        b[0](a[0], c);
                      };
                    })([b], [m(this, this.load_onError)])
                  );
                  c.onComplete(
                    (function (a, b) {
                      return function (c) {
                        b[0](a[0], c);
                      };
                    })([b], [m(this, this.loadBytes_onComplete)])
                  );
                  break;
                case "FONT":
                  this.assetsTotal++;
                  c = this.loadFont(b);
                  c.onProgress(
                    (function (a, b) {
                      return function (c, d) {
                        b[0](a[0], c, d);
                      };
                    })([b], [m(this, this.load_onProgress)])
                  );
                  c.onError(
                    (function (a, b) {
                      return function (c) {
                        b[0](a[0], c);
                      };
                    })([b], [m(this, this.load_onError)])
                  );
                  c.onComplete(
                    (function (a, b) {
                      return function (c) {
                        b[0](a[0], c);
                      };
                    })([b], [m(this, this.loadFont_onComplete)])
                  );
                  break;
                case "IMAGE":
                  this.assetsTotal++;
                  c = this.loadImage(b);
                  c.onProgress(
                    (function (a, b) {
                      return function (c, d) {
                        b[0](a[0], c, d);
                      };
                    })([b], [m(this, this.load_onProgress)])
                  );
                  c.onError(
                    (function (a, b) {
                      return function (c) {
                        b[0](a[0], c);
                      };
                    })([b], [m(this, this.load_onError)])
                  );
                  c.onComplete(
                    (function (a, b) {
                      return function (c) {
                        b[0](a[0], c);
                      };
                    })([b], [m(this, this.loadImage_onComplete)])
                  );
                  break;
                case "MUSIC":
                case "SOUND":
                  this.assetsTotal++;
                  c = this.loadAudioBuffer(b);
                  c.onProgress(
                    (function (a, b) {
                      return function (c, d) {
                        b[0](a[0], c, d);
                      };
                    })([b], [m(this, this.load_onProgress)])
                  );
                  c.onError(
                    (function (a, b) {
                      return function (c) {
                        b[0](a[0], c);
                      };
                    })([b], [m(this, this.loadAudioBuffer_onError)])
                  );
                  c.onComplete(
                    (function (a, b) {
                      return function (c) {
                        b[0](a[0], c);
                      };
                    })([b], [m(this, this.loadAudioBuffer_onComplete)])
                  );
                  break;
                case "TEXT":
                  this.assetsTotal++,
                    (c = this.loadText(b)),
                    c.onProgress(
                      (function (a, b) {
                        return function (c, d) {
                          b[0](a[0], c, d);
                        };
                      })([b], [m(this, this.load_onProgress)])
                    ),
                    c.onError(
                      (function (a, b) {
                        return function (c) {
                          b[0](a[0], c);
                        };
                      })([b], [m(this, this.load_onError)])
                    ),
                    c.onComplete(
                      (function (a, b) {
                        return function (c) {
                          b[0](a[0], c);
                        };
                      })([b], [m(this, this.loadText_onComplete)])
                    );
              }
          }
        }
        this.__assetLoaded(null);
      }
      return this.promise.future;
    },
    loadAudioBuffer: function (a) {
      return this.cachedAudioBuffers.exists(a)
        ? La.withValue(this.cachedAudioBuffers.get(a))
        : this.classTypes.exists(a)
        ? La.withValue(I.createInstance(this.classTypes.get(a), []))
        : this.pathGroups.exists(a)
        ? Ta.loadFromFiles(this.pathGroups.get(a))
        : Ta.loadFromFile(this.paths.get(a));
    },
    loadBytes: function (a) {
      return this.cachedBytes.exists(a)
        ? La.withValue(this.cachedBytes.get(a))
        : this.classTypes.exists(a)
        ? La.withValue(I.createInstance(this.classTypes.get(a), []))
        : pd.loadFromFile(this.paths.get(a));
    },
    loadFont: function (a) {
      return this.cachedFonts.exists(a)
        ? La.withValue(this.cachedFonts.get(a))
        : this.classTypes.exists(a)
        ? ((a = I.createInstance(this.classTypes.get(a), [])),
          a.__loadFromName(a.name))
        : qc.loadFromName(this.paths.get(a));
    },
    loadImage: function (a) {
      return this.cachedImages.exists(a)
        ? La.withValue(this.cachedImages.get(a))
        : this.classTypes.exists(a)
        ? La.withValue(I.createInstance(this.classTypes.get(a), []))
        : qa.loadFromFile(this.paths.get(a));
    },
    loadText: function (a) {
      if (this.cachedText.exists(a))
        return La.withValue(this.cachedText.get(a));
      if (this.cachedBytes.exists(a) || this.classTypes.exists(a)) {
        var b = this.getBytes(a);
        if (null == b) return La.withValue(null);
        b = b.getString(0, b.length);
        this.cachedText.set(a, b);
        return La.withValue(b);
      }
      return new xf().load(this.paths.get(a));
    },
    unload: function () {},
    __assetLoaded: function (a) {
      this.assetsLoaded++;
      null != a &&
        xa.verbose(
          "Loaded asset: " +
            a +
            " [" +
            this.types.get(a) +
            "] (" +
            (this.assetsLoaded - 1) +
            "/" +
            (this.assetsTotal - 1) +
            ")",
          {
            fileName: "AssetLibrary.hx",
            lineNumber: 698,
            className: "lime.utils.AssetLibrary",
            methodName: "__assetLoaded",
          }
        );
      if (null != a) {
        var b = this.sizes.get(a);
        if (this.bytesLoadedCache.exists(a)) {
          var c = this.bytesLoadedCache.get(a);
          c < b && (this.bytesLoaded += b - c);
        } else this.bytesLoaded += b;
        this.bytesLoadedCache.set(a, b);
      }
      this.assetsLoaded < this.assetsTotal
        ? this.promise.progress(this.bytesLoaded, this.bytesTotal)
        : ((this.loaded = !0),
          this.promise.progress(this.bytesTotal, this.bytesTotal),
          this.promise.complete(this));
    },
    __cacheBreak: function (a) {
      return (a =
        -1 < a.indexOf("?")
          ? a + ("&" + Q.cache.version)
          : a + ("?" + Q.cache.version));
    },
    __fromManifest: function (a) {
      var b = 2 <= a.version,
        c = a.rootPath;
      null == c && (c = "");
      "" != c && (c += "/");
      for (var d = 0, e = a.assets; d < e.length; ) {
        var f = e[d];
        ++d;
        var g = b && A.hasField(f, "size") ? f.size : 100;
        var h = f.id;
        A.hasField(f, "path") &&
          this.paths.set(
            h,
            this.__cacheBreak(c + u.string(A.field(f, "path")))
          );
        if (A.hasField(f, "pathGroup")) {
          var n = A.field(f, "pathGroup");
          for (var p = 0, k = n.length; p < k; ) {
            var l = p++;
            n[l] = this.__cacheBreak(c + n[l]);
          }
          this.pathGroups.set(h, n);
        }
        this.sizes.set(h, g);
        this.types.set(h, f.type);
        A.hasField(f, "preload") && this.preload.set(h, A.field(f, "preload"));
        A.hasField(f, "className") &&
          ((g = I.resolveClass(A.field(f, "className"))),
          this.classTypes.set(h, g));
      }
      b = this.bytesTotal = 0;
      for (a = a.assets; b < a.length; )
        (h = a[b]),
          ++b,
          (h = h.id),
          this.preload.exists(h) &&
            this.preload.get(h) &&
            (this.bytesTotal += this.sizes.get(h));
    },
    loadAudioBuffer_onComplete: function (a, b) {
      this.cachedAudioBuffers.set(a, b);
      if (this.pathGroups.exists(a))
        for (
          var c = this.pathGroups.get(a), d = this.pathGroups.keys();
          d.hasNext();

        ) {
          var e = d.next();
          if (e != a)
            for (var f = 0; f < c.length; ) {
              var g = c[f];
              ++f;
              if (-1 < this.pathGroups.get(e).indexOf(g)) {
                this.cachedAudioBuffers.set(e, b);
                break;
              }
            }
        }
      this.__assetLoaded(a);
    },
    loadAudioBuffer_onError: function (a, b) {
      null != b && "" != b
        ? xa.warn('Could not load "' + a + '": ' + u.string(b), {
            fileName: "AssetLibrary.hx",
            lineNumber: 883,
            className: "lime.utils.AssetLibrary",
            methodName: "loadAudioBuffer_onError",
          })
        : xa.warn('Could not load "' + a + '"', {
            fileName: "AssetLibrary.hx",
            lineNumber: 887,
            className: "lime.utils.AssetLibrary",
            methodName: "loadAudioBuffer_onError",
          });
      this.loadAudioBuffer_onComplete(a, new Ta());
    },
    loadBytes_onComplete: function (a, b) {
      this.cachedBytes.set(a, b);
      this.__assetLoaded(a);
    },
    loadFont_onComplete: function (a, b) {
      this.cachedFonts.set(a, b);
      this.__assetLoaded(a);
    },
    loadImage_onComplete: function (a, b) {
      this.cachedImages.set(a, b);
      this.__assetLoaded(a);
    },
    loadText_onComplete: function (a, b) {
      this.cachedText.set(a, b);
      this.__assetLoaded(a);
    },
    load_onError: function (a, b) {
      null != b && "" != b
        ? this.promise.error('Error loading asset "' + a + '": ' + u.string(b))
        : this.promise.error('Error loading asset "' + a + '"');
    },
    load_onProgress: function (a, b, c) {
      if (0 < b) {
        var d = this.sizes.get(a);
        0 < c
          ? ((b /= c), 1 < b && (b = 1), (b = Math.floor(b * d)))
          : b > d && (b = d);
        this.bytesLoadedCache.exists(a)
          ? ((d = this.bytesLoadedCache.get(a)),
            b != d && (this.bytesLoaded += b - d))
          : (this.bytesLoaded += b);
        this.bytesLoadedCache.set(a, b);
        this.promise.progress(this.bytesLoaded, this.bytesTotal);
      }
    },
    __class__: db,
  };
  var ob = function () {
    this.assets = [];
    this.libraryArgs = [];
    this.version = 2;
  };
  l["lime.utils.AssetManifest"] = ob;
  ob.__name__ = ["lime", "utils", "AssetManifest"];
  ob.fromBytes = function (a, b) {
    return null != a ? ob.parse(a.getString(0, a.length), b) : null;
  };
  ob.fromFile = function (a, b) {
    a = ob.__resolvePath(a);
    b = ob.__resolveRootPath(b, a);
    return null == a ? null : ob.fromBytes(pd.fromFile(a), b);
  };
  ob.loadFromBytes = function (a, b) {
    return La.withValue(ob.fromBytes(a, b));
  };
  ob.loadFromFile = function (a, b) {
    a = ob.__resolvePath(a);
    b = ob.__resolveRootPath(b, a);
    return null == a
      ? null
      : pd.loadFromFile(a).then(function (a) {
          return La.withValue(ob.fromBytes(a, b));
        });
  };
  ob.parse = function (a, b) {
    if (null == a || "" == a) return null;
    a = JSON.parse(a);
    var c = new ob();
    c.name = a.name;
    c.libraryType = a.libraryType;
    c.libraryArgs = a.libraryArgs;
    c.assets = hc.run(a.assets);
    A.hasField(a, "rootPath") && (c.rootPath = a.rootPath);
    null != b &&
      "" != b &&
      (c.rootPath =
        null == c.rootPath || "" == c.rootPath ? b : b + "/" + c.rootPath);
    return c;
  };
  ob.__resolvePath = function (a) {
    if (null == a) return null;
    var b = a.indexOf("?");
    var c = -1 < b ? S.substr(a, 0, b) : a;
    for (J.replace(c, "\\", "/"); J.endsWith(c, "/"); )
      c = S.substr(c, 0, c.length - 1);
    return J.endsWith(c, ".bundle")
      ? -1 < b
        ? c + "/library.json" + S.substr(a, b, null)
        : c + "/library.json"
      : a;
  };
  ob.__resolveRootPath = function (a, b) {
    if (null != a) return a;
    a = b.indexOf("?");
    a = -1 < a ? S.substr(b, 0, a) : b;
    for (J.replace(a, "\\", "/"); J.endsWith(a, "/"); ) {
      if ("/" == a) return a;
      a = S.substr(a, 0, a.length - 1);
    }
    return J.endsWith(a, ".bundle") ? a : rg.directory(a);
  };
  ob.prototype = {
    assets: null,
    libraryArgs: null,
    libraryType: null,
    name: null,
    rootPath: null,
    version: null,
    __class__: ob,
  };
  var Q = function () {};
  l["lime.utils.Assets"] = Q;
  Q.__name__ = ["lime", "utils", "Assets"];
  Q.exists = function (a, b) {
    null == b && (b = "BINARY");
    a = new Qf(a);
    return null != a.library ? a.exists(b) : !1;
  };
  Q.getAsset = function (a, b, c) {
    if (c && Q.cache.enabled)
      switch (b) {
        case "BINARY":
        case "TEXT":
          c = !1;
          break;
        case "FONT":
          var d = Q.cache.font.get(a);
          if (null != d) return d;
          break;
        case "IMAGE":
          d = Q.cache.image.get(a);
          if (Q.isValidImage(d)) return d;
          break;
        case "MUSIC":
        case "SOUND":
          d = Q.cache.audio.get(a);
          if (Q.isValidAudio(d)) return d;
          break;
        case "TEMPLATE":
          throw new G("Not sure how to get template: " + a);
        default:
          return null;
      }
    d = new Qf(a);
    if (null != d.library)
      if (d.exists(b)) {
        if (d.isLocal(b))
          return (
            (d = d.library.getAsset(d.symbolName, b)),
            c && Q.cache.enabled && Q.cache.set(a, b, d),
            d
          );
        xa.error(b + ' asset "' + a + '" exists, but only asynchronously', {
          fileName: "Assets.hx",
          lineNumber: 160,
          className: "lime.utils.Assets",
          methodName: "getAsset",
        });
      } else
        xa.error("There is no " + b + ' asset with an ID of "' + a + '"', {
          fileName: "Assets.hx",
          lineNumber: 166,
          className: "lime.utils.Assets",
          methodName: "getAsset",
        });
    else
      xa.error(Q.__libraryNotFound(d.libraryName), {
        fileName: "Assets.hx",
        lineNumber: 172,
        className: "lime.utils.Assets",
        methodName: "getAsset",
      });
    return null;
  };
  Q.getBytes = function (a) {
    return Q.getAsset(a, "BINARY", !1);
  };
  Q.getImage = function (a, b) {
    null == b && (b = !0);
    return Q.getAsset(a, "IMAGE", b);
  };
  Q.getLibrary = function (a) {
    if (null == a || "" == a) a = "default";
    return Q.libraries.get(a);
  };
  Q.getText = function (a) {
    return Q.getAsset(a, "TEXT", !1);
  };
  Q.isLocal = function (a, b, c) {
    null == c && (c = !0);
    if (c && Q.cache.enabled && Q.cache.exists(a, b)) return !0;
    a = new Qf(a);
    return null != a.library ? a.isLocal(b) : !1;
  };
  Q.isValidAudio = function (a) {
    return null != a;
  };
  Q.isValidImage = function (a) {
    return null != a ? null != a.buffer : !1;
  };
  Q.loadLibrary = function (a) {
    var b = new Wb(),
      c = Q.getLibrary(a);
    if (null != c) return c.load();
    c = a;
    var d = null;
    Q.libraryPaths.exists(a)
      ? ((c = Q.libraryPaths.get(a)), (d = Q.defaultRootPath))
      : J.endsWith(c, ".bundle") && (c += "/library.json");
    ob.loadFromFile(c, d)
      .onComplete(function (c) {
        null == c
          ? b.error('Cannot parse asset manifest for library "' + a + '"')
          : ((c = db.fromManifest(c)),
            null == c
              ? b.error('Cannot open library "' + a + '"')
              : (Q.libraries.set(a, c),
                c.onChange.add(((Ya = Q.onChange), m(Ya, Ya.dispatch))),
                (c = c.load()),
                b.completeWith(c)));
      })
      .onError(function (c) {
        b.error('There is no asset library with an ID of "' + a + '"');
      });
    return b.future;
  };
  Q.registerLibrary = function (a, b) {
    if (Q.libraries.exists(a)) {
      if (Q.libraries.get(a) == b) return;
      Q.unloadLibrary(a);
    }
    null != b && b.onChange.add(Q.library_onChange);
    Q.libraries.set(a, b);
  };
  Q.unloadLibrary = function (a) {
    var b = Q.libraries.get(a);
    null != b &&
      (Q.cache.clear(a + ":"),
      b.onChange.remove(Q.library_onChange),
      b.unload());
    Q.libraries.remove(a);
  };
  Q.__libraryNotFound = function (a) {
    if (null == a || "" == a) a = "default";
    return null == nc.current ||
      null == nc.current.get_preloader() ||
      nc.current.get_preloader().complete
      ? 'There is no asset library named "' + a + '"'
      : 'There is no asset library named "' +
          a +
          '", or it is not yet preloaded';
  };
  Q.library_onChange = function () {
    Q.cache.clear();
    Q.onChange.dispatch();
  };
  var Qf = function (a) {
    var b = a.indexOf(":");
    this.libraryName = a.substring(0, b);
    this.symbolName = a.substring(b + 1);
    this.library = Q.getLibrary(this.libraryName);
  };
  l["lime.utils._Assets.LibrarySymbol"] = Qf;
  Qf.__name__ = ["lime", "utils", "_Assets", "LibrarySymbol"];
  Qf.prototype = {
    library: null,
    libraryName: null,
    symbolName: null,
    isLocal: function (a) {
      return this.library.isLocal(this.symbolName, a);
    },
    exists: function (a) {
      return this.library.exists(this.symbolName, a);
    },
    __class__: Qf,
  };
  var cj = function (a, b) {
    this.bytes = a;
    this.offset = b;
  };
  l["lime.utils.BytePointerData"] = cj;
  cj.__name__ = ["lime", "utils", "BytePointerData"];
  cj.prototype = { bytes: null, offset: null, __class__: cj };
  var pd = {};
  l["lime.utils._Bytes.Bytes_Impl_"] = pd;
  pd.__name__ = ["lime", "utils", "_Bytes", "Bytes_Impl_"];
  pd._new = function (a, b) {
    return new eb(b);
  };
  pd.fromBytes = function (a) {
    return null == a ? null : pd._new(a.length, a.getData());
  };
  pd.fromFile = function (a) {
    return null;
  };
  pd.loadFromFile = function (a) {
    return new ph().load(a);
  };
  pd.ofString = function (a) {
    a = eb.ofString(a);
    return pd._new(a.length, a.getData());
  };
  var xa = function () {};
  l["lime.utils.Log"] = xa;
  xa.__name__ = ["lime", "utils", "Log"];
  xa.error = function (a, b) {
    if (1 <= xa.level) {
      a = "[" + b.className + "] ERROR: " + u.string(a);
      if (xa.throwErrors) throw new G(a);
      console.error(a);
    }
  };
  xa.info = function (a, b) {
    3 <= xa.level && console.info("[" + b.className + "] " + u.string(a));
  };
  xa.println = function (a) {
    console.log(a);
  };
  xa.verbose = function (a, b) {
    5 <= xa.level && xa.println("[" + b.className + "] " + u.string(a));
  };
  xa.warn = function (a, b) {
    2 <= xa.level &&
      console.warn("[" + b.className + "] WARNING: " + u.string(a));
  };
  var ti = function () {
    this.bytesTotalCache = new sa();
    this.bytesLoadedCache2 = new sa();
    this.bytesLoadedCache = new ib();
    this.onProgress = new kh();
    this.onComplete = new fb();
    this.bytesTotal = this.bytesLoaded = 0;
    this.libraries = [];
    this.libraryNames = [];
    this.onProgress.add(m(this, this.update));
  };
  l["lime.utils.Preloader"] = ti;
  ti.__name__ = ["lime", "utils", "Preloader"];
  ti.prototype = {
    complete: null,
    onComplete: null,
    onProgress: null,
    bytesLoaded: null,
    bytesLoadedCache: null,
    bytesLoadedCache2: null,
    bytesTotal: null,
    bytesTotalCache: null,
    initLibraryNames: null,
    libraries: null,
    libraryNames: null,
    loadedLibraries: null,
    preloadComplete: null,
    preloadStarted: null,
    simulateProgress: null,
    addLibrary: function (a) {
      this.libraries.push(a);
    },
    addLibraryName: function (a) {
      -1 == this.libraryNames.indexOf(a) && this.libraryNames.push(a);
    },
    load: function () {
      for (var a = this, b = 0, c = this.libraries; b < c.length; ) {
        var d = c[b];
        ++b;
        this.bytesTotal += d.bytesTotal;
      }
      this.loadedLibraries = -1;
      this.preloadStarted = !1;
      b = 0;
      for (c = this.libraries; b < c.length; )
        (d = [c[b]]),
          ++b,
          xa.verbose("Preloading asset library", {
            fileName: "Preloader.hx",
            lineNumber: 150,
            className: "lime.utils.Preloader",
            methodName: "load",
          }),
          d[0]
            .load()
            .onProgress(
              (function (b) {
                return function (c, d) {
                  a.bytesLoadedCache.exists(b[0])
                    ? (a.bytesLoaded += c - a.bytesLoadedCache.get(b[0]))
                    : (a.bytesLoaded += c);
                  a.bytesLoadedCache.set(b[0], c);
                  a.simulateProgress ||
                    a.onProgress.dispatch(a.bytesLoaded, a.bytesTotal);
                };
              })(d)
            )
            .onComplete(
              (function (b) {
                return function (c) {
                  a.bytesLoadedCache.exists(b[0])
                    ? (a.bytesLoaded +=
                        b[0].bytesTotal - a.bytesLoadedCache.get(b[0]))
                    : (a.bytesLoaded += b[0].bytesTotal);
                  a.loadedAssetLibrary();
                };
              })(d)
            )
            .onError(
              (function () {
                return function (a) {
                  xa.error(a, {
                    fileName: "Preloader.hx",
                    lineNumber: 188,
                    className: "lime.utils.Preloader",
                    methodName: "load",
                  });
                };
              })()
            );
      b = 0;
      for (c = this.libraryNames; b < c.length; ) ++b, (this.bytesTotal += 200);
      this.loadedLibraries++;
      this.preloadStarted = !0;
      this.updateProgress();
    },
    loadedAssetLibrary: function (a) {
      this.loadedLibraries++;
      var b = this.loadedLibraries;
      this.preloadStarted || ++b;
      var c = this.libraries.length + this.libraryNames.length;
      null != a
        ? xa.verbose("Loaded asset library: " + a + " [" + b + "/" + c + "]", {
            fileName: "Preloader.hx",
            lineNumber: 220,
            className: "lime.utils.Preloader",
            methodName: "loadedAssetLibrary",
          })
        : xa.verbose("Loaded asset library [" + b + "/" + c + "]", {
            fileName: "Preloader.hx",
            lineNumber: 224,
            className: "lime.utils.Preloader",
            methodName: "loadedAssetLibrary",
          });
      this.updateProgress();
    },
    start: function () {
      this.complete ||
        this.simulateProgress ||
        !this.preloadComplete ||
        ((this.complete = !0), this.onComplete.dispatch());
    },
    update: function (a, b) {},
    updateProgress: function () {
      var a = this;
      this.simulateProgress ||
        this.onProgress.dispatch(this.bytesLoaded, this.bytesTotal);
      if (
        this.loadedLibraries == this.libraries.length &&
        !this.initLibraryNames
      ) {
        this.initLibraryNames = !0;
        for (var b = 0, c = this.libraryNames; b < c.length; ) {
          var d = [c[b]];
          ++b;
          xa.verbose("Preloading asset library: " + d[0], {
            fileName: "Preloader.hx",
            lineNumber: 273,
            className: "lime.utils.Preloader",
            methodName: "updateProgress",
          });
          Q.loadLibrary(d[0])
            .onProgress(
              (function (b) {
                return function (c, d) {
                  0 < d &&
                    (a.bytesTotalCache.exists(b[0]) ||
                      (a.bytesTotalCache.set(b[0], d),
                      (a.bytesTotal += d - 200)),
                    c > d && (c = d),
                    a.bytesLoadedCache2.exists(b[0])
                      ? (a.bytesLoaded += c - a.bytesLoadedCache2.get(b[0]))
                      : (a.bytesLoaded += c),
                    a.bytesLoadedCache2.set(b[0], c),
                    a.simulateProgress ||
                      a.onProgress.dispatch(a.bytesLoaded, a.bytesTotal));
                };
              })(d)
            )
            .onComplete(
              (function (b) {
                return function (c) {
                  c = 200;
                  a.bytesTotalCache.exists(b[0]) &&
                    (c = a.bytesTotalCache.get(b[0]));
                  a.bytesLoadedCache2.exists(b[0])
                    ? (a.bytesLoaded += c - a.bytesLoadedCache2.get(b[0]))
                    : (a.bytesLoaded += c);
                  a.loadedAssetLibrary(b[0]);
                };
              })(d)
            )
            .onError(
              (function () {
                return function (a) {
                  xa.error(a, {
                    fileName: "Preloader.hx",
                    lineNumber: 332,
                    className: "lime.utils.Preloader",
                    methodName: "updateProgress",
                  });
                };
              })()
            );
        }
      }
      this.simulateProgress ||
        this.loadedLibraries !=
          this.libraries.length + this.libraryNames.length ||
        (this.preloadComplete ||
          ((this.preloadComplete = !0),
          xa.verbose("Preload complete", {
            fileName: "Preloader.hx",
            lineNumber: 346,
            className: "lime.utils.Preloader",
            methodName: "updateProgress",
          })),
        this.start());
    },
    __class__: ti,
  };
  var rh = function () {};
  l["motion.actuators.IGenericActuator"] = rh;
  rh.__name__ = ["motion", "actuators", "IGenericActuator"];
  rh.prototype = { stop: null, __class__: rh };
  var ke = function (a, b, c) {
    this._autoVisible = !0;
    this._delay = 0;
    this._reflect = !1;
    this._repeat = 0;
    this.special = this._snapping = this._smartRotation = this._reverse = !1;
    this.target = a;
    this.properties = c;
    this.duration = b;
    this._ease = Xa.defaultEase;
  };
  l["motion.actuators.GenericActuator"] = ke;
  ke.__name__ = ["motion", "actuators", "GenericActuator"];
  ke.__interfaces__ = [rh];
  ke.prototype = {
    duration: null,
    id: null,
    properties: null,
    target: null,
    _autoVisible: null,
    _delay: null,
    _ease: null,
    _onComplete: null,
    _onCompleteParams: null,
    _onRepeat: null,
    _onRepeatParams: null,
    _onUpdate: null,
    _onUpdateParams: null,
    _onResume: null,
    _onResumeParams: null,
    _onPause: null,
    _onPauseParams: null,
    _reflect: null,
    _repeat: null,
    _reverse: null,
    _smartRotation: null,
    _snapping: null,
    special: null,
    apply: function () {
      for (var a = 0, b = A.fields(this.properties); a < b.length; ) {
        var c = b[a];
        ++a;
        A.hasField(this.target, c)
          ? A.setField(this.target, c, A.field(this.properties, c))
          : A.setProperty(this.target, c, A.field(this.properties, c));
      }
    },
    autoVisible: function (a) {
      null == a && (a = !0);
      this._autoVisible = a;
      return this;
    },
    callMethod: function (a, b) {
      null == b && (b = []);
      return A.callMethod(a, a, b);
    },
    change: function () {
      null != this._onUpdate &&
        this.callMethod(this._onUpdate, this._onUpdateParams);
    },
    complete: function (a) {
      null == a && (a = !0);
      a &&
        (this.change(),
        null != this._onComplete &&
          this.callMethod(this._onComplete, this._onCompleteParams));
      Xa.unload(this);
    },
    delay: function (a) {
      this._delay = a;
      return this;
    },
    ease: function (a) {
      this._ease = a;
      return this;
    },
    move: function () {},
    onComplete: function (a, b) {
      this._onComplete = a;
      this._onCompleteParams = null == b ? [] : b;
      0 == this.duration && this.complete();
      return this;
    },
    onRepeat: function (a, b) {
      this._onRepeat = a;
      this._onRepeatParams = null == b ? [] : b;
      return this;
    },
    onUpdate: function (a, b) {
      this._onUpdate = a;
      this._onUpdateParams = null == b ? [] : b;
      return this;
    },
    onPause: function (a, b) {
      this._onPause = a;
      this._onPauseParams = null == b ? [] : b;
      return this;
    },
    onResume: function (a, b) {
      this._onResume = a;
      this._onResumeParams = null == b ? [] : b;
      return this;
    },
    pause: function () {
      null != this._onPause &&
        this.callMethod(this._onPause, this._onPauseParams);
    },
    reflect: function (a) {
      null == a && (a = !0);
      this._reflect = a;
      this.special = !0;
      return this;
    },
    repeat: function (a) {
      null == a && (a = -1);
      this._repeat = a;
      return this;
    },
    resume: function () {
      null != this._onResume &&
        this.callMethod(this._onResume, this._onResumeParams);
    },
    reverse: function (a) {
      null == a && (a = !0);
      this._reverse = a;
      this.special = !0;
      return this;
    },
    smartRotation: function (a) {
      null == a && (a = !0);
      this._smartRotation = a;
      this.special = !0;
      return this;
    },
    snapping: function (a) {
      null == a && (a = !0);
      this._snapping = a;
      this.special = !0;
      return this;
    },
    stop: function (a, b, c) {},
    __class__: ke,
  };
  var lb = function (a, b, c) {
    this.active = !0;
    this.propertyDetails = [];
    this.toggleVisible =
      this.setVisible =
      this.initialized =
      this.cacheVisible =
      this.paused =
      this.sendChange =
        !1;
    this.startTime = N.getTimer() / 1e3;
    ke.call(this, a, b, c);
    lb.addedEvent ||
      ((lb.addedEvent = !0),
      N.get_current().stage.addEventListener(
        "enterFrame",
        lb.stage_onEnterFrame
      ));
  };
  l["motion.actuators.SimpleActuator"] = lb;
  lb.__name__ = ["motion", "actuators", "SimpleActuator"];
  lb.stage_onEnterFrame = function (a) {
    a = N.getTimer() / 1e3;
    for (var b, c = 0, d = 0, e = lb.actuatorsLength; d < e; )
      d++,
        (b = lb.actuators[c]),
        null != b && b.active
          ? (a >= b.timeOffset && b.update(a), ++c)
          : (lb.actuators.splice(c, 1), --lb.actuatorsLength);
  };
  lb.__super__ = ke;
  lb.prototype = v(ke.prototype, {
    timeOffset: null,
    active: null,
    cacheVisible: null,
    detailsLength: null,
    initialized: null,
    paused: null,
    pauseTime: null,
    propertyDetails: null,
    sendChange: null,
    setVisible: null,
    startTime: null,
    toggleVisible: null,
    apply: function () {
      ke.prototype.apply.call(this);
      this.toggleVisible &&
        A.hasField(this.properties, "alpha") &&
        null != this.getField(this.target, "visible") &&
        this.setField(
          this.target,
          "visible",
          0 < A.field(this.properties, "alpha")
        );
    },
    autoVisible: function (a) {
      null == a && (a = !0);
      this._autoVisible = a;
      a ||
        ((this.toggleVisible = !1),
        this.setVisible &&
          this.setField(this.target, "visible", this.cacheVisible));
      return this;
    },
    delay: function (a) {
      this._delay = a;
      this.timeOffset = this.startTime + a;
      return this;
    },
    getField: function (a, b) {
      return A.hasField(a, b) ? A.field(a, b) : A.getProperty(a, b);
    },
    initialize: function () {
      for (var a, b = 0, c = A.fields(this.properties); b < c.length; ) {
        var d = c[b];
        ++b;
        var e = !0;
        !A.hasField(this.target, d) ||
        (this.target.__properties__ && this.target.__properties__["set_" + d])
          ? ((e = !1), (a = A.getProperty(this.target, d)))
          : (a = A.field(this.target, d));
        if ("number" == typeof a) {
          var f = this.getField(this.properties, d);
          null == a && (a = 0);
          null == f && (f = 0);
          a = new qd(this.target, d, a, f - a, e);
          this.propertyDetails.push(a);
        }
      }
      this.detailsLength = this.propertyDetails.length;
      this.initialized = !0;
    },
    move: function () {
      (this.toggleVisible =
        A.hasField(this.properties, "alpha") && u.is(this.target, Y)) &&
        0 != this.properties.alpha &&
        !this.getField(this.target, "visible") &&
        ((this.setVisible = !0),
        (this.cacheVisible = this.getField(this.target, "visible")),
        this.setField(this.target, "visible", !0));
      this.timeOffset = this.startTime;
      lb.actuators.push(this);
      ++lb.actuatorsLength;
    },
    onUpdate: function (a, b) {
      this._onUpdate = a;
      this._onUpdateParams = null == b ? [] : b;
      this.sendChange = !0;
      return this;
    },
    pause: function () {
      this.paused ||
        ((this.paused = !0),
        ke.prototype.pause.call(this),
        (this.pauseTime = N.getTimer()));
    },
    resume: function () {
      this.paused &&
        ((this.paused = !1),
        (this.timeOffset += (N.getTimer() - this.pauseTime) / 1e3),
        ke.prototype.resume.call(this));
    },
    setField: function (a, b, c) {
      !A.hasField(a, b) || (a.__properties__ && a.__properties__["set_" + b])
        ? A.setProperty(a, b, c)
        : A.setField(a, b, c);
    },
    setProperty: function (a, b) {
      a.isField
        ? A.setField(a.target, a.propertyName, b)
        : A.setProperty(a.target, a.propertyName, b);
    },
    stop: function (a, b, c) {
      if (this.active)
        if (null == a) (this.active = !1), b && this.apply(), this.complete(c);
        else {
          var d = 0;
          for (a = A.fields(a); d < a.length; ) {
            var e = a[d];
            ++d;
            if (A.hasField(this.properties, e)) {
              this.active = !1;
              b && this.apply();
              this.complete(c);
              break;
            }
          }
        }
    },
    update: function (a) {
      if (!this.paused) {
        var b = (a - this.timeOffset) / this.duration;
        1 < b && (b = 1);
        this.initialized || this.initialize();
        if (this.special) {
          var c = this._reverse
            ? this._ease.calculate(1 - b)
            : this._ease.calculate(b);
          for (var d, e = 0, f = this.detailsLength; e < f; ) {
            var g = e++;
            g = this.propertyDetails[g];
            !this._smartRotation ||
            ("rotation" != g.propertyName &&
              "rotationX" != g.propertyName &&
              "rotationY" != g.propertyName &&
              "rotationZ" != g.propertyName)
              ? (d = g.start + g.change * c)
              : ((d = g.change % 360),
                180 < d ? (d -= 360) : -180 > d && (d += 360),
                (d = g.start + d * c));
            this._snapping
              ? this.setProperty(g, Math.round(d))
              : this.setProperty(g, d);
          }
        } else
          for (
            c = this._ease.calculate(b), e = 0, f = this.detailsLength;
            e < f;

          )
            (g = e++),
              (g = this.propertyDetails[g]),
              this.setProperty(g, g.start + g.change * c);
        if (1 == b) {
          if (0 == this._repeat) {
            this.active = !1;
            this.toggleVisible &&
              0 == this.getField(this.target, "alpha") &&
              this.setField(this.target, "visible", !1);
            this.complete(!0);
            return;
          }
          null != this._onRepeat &&
            this.callMethod(this._onRepeat, this._onRepeatParams);
          this._reflect && (this._reverse = !this._reverse);
          this.startTime = a;
          this.timeOffset = this.startTime + this._delay;
          0 < this._repeat && this._repeat--;
        }
        this.sendChange && this.change();
      }
    },
    __class__: lb,
  });
  var dj = function () {};
  l["motion.easing.IEasing"] = dj;
  dj.__name__ = ["motion", "easing", "IEasing"];
  dj.prototype = { calculate: null, __class__: dj };
  var sh = function () {};
  l["motion.easing._Expo.ExpoEaseOut"] = sh;
  sh.__name__ = ["motion", "easing", "_Expo", "ExpoEaseOut"];
  sh.__interfaces__ = [dj];
  sh.prototype = {
    calculate: function (a) {
      return 1 == a ? 1 : 1 - Math.exp(-6.931471805599453 * a);
    },
    __class__: sh,
  };
  var Jk = function () {};
  l["motion.easing.Expo"] = Jk;
  Jk.__name__ = ["motion", "easing", "Expo"];
  var Xa = function () {};
  l["motion.Actuate"] = Xa;
  Xa.__name__ = ["motion", "Actuate"];
  Xa.apply = function (a, b, c) {
    Xa.stop(a, b);
    null == c && (c = Xa.defaultActuator);
    a = I.createInstance(c, [a, 0, b]);
    a.apply();
    return a;
  };
  Xa.getLibrary = function (a, b) {
    null == b && (b = !0);
    !Xa.targetLibraries.exists(a) && b && Xa.targetLibraries.set(a, []);
    return Xa.targetLibraries.get(a);
  };
  Xa.reset = function () {
    for (var a = Xa.targetLibraries.iterator(); a.hasNext(); )
      for (var b = a.next(), c = b.length - 1; 0 <= c; )
        b[c].stop(null, !1, !1), --c;
    Xa.targetLibraries = new ib();
  };
  Xa.stop = function (a, b, c, d) {
    null == d && (d = !0);
    null == c && (c = !1);
    if (null != a)
      if (u.is(a, rh)) a.stop(null, c, d);
      else if (((a = Xa.getLibrary(a, !1)), null != a)) {
        if ("string" == typeof b) {
          var e = {};
          A.setField(e, b, null);
          b = e;
        } else if (b instanceof Array && null == b.__enum__) {
          e = {};
          var f = 0;
          for (b = r.__cast(b, Array); f < b.length; ) {
            var g = b[f];
            ++f;
            A.setField(e, g, null);
          }
          b = e;
        }
        for (e = a.length - 1; 0 <= e; ) a[e].stop(b, c, d), --e;
      }
  };
  Xa.tween = function (a, b, c, d, e) {
    null == d && (d = !0);
    if (null != a) {
      if (0 < b) {
        null == e && (e = Xa.defaultActuator);
        a = I.createInstance(e, [a, b, c]);
        b = Xa.getLibrary(a.target);
        if (d) {
          for (d = b.length - 1; 0 <= d; ) b[d].stop(a.properties, !1, !1), --d;
          b = Xa.getLibrary(a.target);
        }
        b.push(a);
        a.move();
        return a;
      }
      return Xa.apply(a, c, e);
    }
    return null;
  };
  Xa.unload = function (a) {
    var b = a.target;
    Xa.targetLibraries.exists(b) &&
      (S.remove(Xa.targetLibraries.get(b), a),
      0 == Xa.targetLibraries.get(b).length && Xa.targetLibraries.remove(b));
  };
  var Rf = function () {};
  l["motion.IComponentPath"] = Rf;
  Rf.__name__ = ["motion", "IComponentPath"];
  Rf.prototype = {
    get_end: null,
    set_start: null,
    get_start: null,
    strength: null,
    calculate: null,
    __class__: Rf,
    __properties__: {
      set_start: "set_start",
      get_start: "get_start",
      get_end: "get_end",
    },
  };
  var ej = function () {
    this.paths = [];
    this.strength = 0;
  };
  l["motion._MotionPath.ComponentPath"] = ej;
  ej.__name__ = ["motion", "_MotionPath", "ComponentPath"];
  ej.__interfaces__ = [Rf];
  ej.prototype = {
    strength: null,
    paths: null,
    calculate: function (a) {
      if (1 == this.paths.length) return this.paths[0].calculate(a);
      a *= this.strength;
      for (var b = 0, c = this.paths; b < c.length; ) {
        var d = c[b];
        ++b;
        if (a > d.strength) a -= d.strength;
        else return d.calculate(a / d.strength);
      }
      return 0;
    },
    get_start: function () {
      return 0 < this.paths.length ? this.paths[0].get_start() : 0;
    },
    set_start: function (a) {
      return 0 < this.paths.length ? this.paths[0].set_start(a) : 0;
    },
    get_end: function () {
      return 0 < this.paths.length
        ? this.paths[this.paths.length - 1].get_end()
        : this.get_start();
    },
    __class__: ej,
    __properties__: {
      get_end: "get_end",
      set_start: "set_start",
      get_start: "get_start",
    },
  };
  var fj = function (a, b) {
    this.step = 0.01;
    this._x = a;
    this._y = b;
    this.offset = 0;
    this.set_start(this.calculate(0));
  };
  l["motion._MotionPath.RotationPath"] = fj;
  fj.__name__ = ["motion", "_MotionPath", "RotationPath"];
  fj.__interfaces__ = [Rf];
  fj.prototype = {
    offset: null,
    strength: null,
    _start: null,
    step: null,
    _x: null,
    _y: null,
    calculate: function (a) {
      var b = this._x.calculate(a) - this._x.calculate(a + this.step);
      a = this._y.calculate(a) - this._y.calculate(a + this.step);
      b = (180 / Math.PI) * Math.atan2(a, b);
      return (b = (b + this.offset) % 360);
    },
    get_start: function () {
      return this._start;
    },
    set_start: function (a) {
      return this._start;
    },
    get_end: function () {
      return this.calculate(1);
    },
    __class__: fj,
    __properties__: {
      set_start: "set_start",
      get_start: "get_start",
      get_end: "get_end",
    },
  };
  var gj = function (a, b, c) {
    this.filterIndex = -1;
    lb.call(this, a, b, c);
    if (u.is(c.filter, ql))
      for (
        this.filterClass = c.filter,
          0 == a.get_filters().length &&
            a.set_filters([I.createInstance(this.filterClass, [])]),
          b = 0,
          a = a.get_filters();
        b < a.length;

      )
        (c = a[b]), ++b, u.is(c, this.filterClass) && (this.filter = c);
    else
      (this.filterIndex = c.filter),
        (this.filter = a.get_filters()[this.filterIndex]);
  };
  l["motion.actuators.FilterActuator"] = gj;
  gj.__name__ = ["motion", "actuators", "FilterActuator"];
  gj.__super__ = lb;
  gj.prototype = v(lb.prototype, {
    filter: null,
    filterClass: null,
    filterIndex: null,
    apply: function () {
      for (var a = 0, b = A.fields(this.properties); a < b.length; ) {
        var c = b[a];
        ++a;
        "filter" != c &&
          A.setProperty(this.filter, c, A.field(this.properties, c));
      }
      this.setFilter();
    },
    initialize: function () {
      for (var a, b = 0, c = A.fields(this.properties); b < c.length; ) {
        var d = c[b];
        ++b;
        "filter" != d &&
          ((a = this.getField(this.filter, d)),
          (a = new qd(
            this.filter,
            d,
            a,
            A.field(this.properties, d) - a,
            A.hasField(this.filter, "set_" + d)
          )),
          this.propertyDetails.push(a));
      }
      this.detailsLength = this.propertyDetails.length;
      this.initialized = !0;
    },
    setFilter: function () {
      var a = this.target.get_filters();
      if (-1 < this.filterIndex) a[this.filterIndex] = this.filter;
      else
        for (var b = 0, c = a.length; b < c; ) {
          var d = b++;
          u.is(a[d], this.filterClass) && (a[d] = this.filter);
        }
      this.setField(this.target, "filters", a);
    },
    update: function (a) {
      lb.prototype.update.call(this, a);
      this.setFilter();
    },
    __class__: gj,
  });
  var hj = function (a, b, c) {
    this.currentParameters = [];
    this.tweenProperties = {};
    lb.call(this, a, b, c);
    A.hasField(c, "start") || (this.properties.start = []);
    A.hasField(c, "end") || (this.properties.end = this.properties.start);
    a = 0;
    for (b = this.properties.start.length; a < b; )
      (c = a++), this.currentParameters.push(this.properties.start[c]);
  };
  l["motion.actuators.MethodActuator"] = hj;
  hj.__name__ = ["motion", "actuators", "MethodActuator"];
  hj.__super__ = lb;
  hj.prototype = v(lb.prototype, {
    currentParameters: null,
    tweenProperties: null,
    apply: function () {
      this.callMethod(this.target, this.properties.end);
    },
    complete: function (a) {
      null == a && (a = !0);
      for (var b = 0, c = this.properties.start.length; b < c; ) {
        var d = b++;
        this.currentParameters[d] = A.field(this.tweenProperties, "param" + d);
      }
      this.callMethod(this.target, this.currentParameters);
      lb.prototype.complete.call(this, a);
    },
    initialize: function () {
      for (var a, b, c = 0, d = this.properties.start.length; c < d; ) {
        var e = c++;
        a = "param" + e;
        b = this.properties.start[e];
        A.setField(this.tweenProperties, a, b);
        if ("number" == typeof b || ("number" == typeof b && (b | 0) === b))
          (a = new qd(this.tweenProperties, a, b, this.properties.end[e] - b)),
            this.propertyDetails.push(a);
      }
      this.detailsLength = this.propertyDetails.length;
      this.initialized = !0;
    },
    update: function (a) {
      lb.prototype.update.call(this, a);
      if (this.active && !this.paused) {
        a = 0;
        for (var b = this.properties.start.length; a < b; ) {
          var c = a++;
          this.currentParameters[c] = A.field(
            this.tweenProperties,
            "param" + c
          );
        }
        this.callMethod(this.target, this.currentParameters);
      }
    },
    __class__: hj,
  });
  var ij = function (a, b, c) {
    lb.call(this, a, b, c);
  };
  l["motion.actuators.MotionPathActuator"] = ij;
  ij.__name__ = ["motion", "actuators", "MotionPathActuator"];
  ij.__super__ = lb;
  ij.prototype = v(lb.prototype, {
    apply: function () {
      for (var a = 0, b = A.fields(this.properties); a < b.length; ) {
        var c = b[a];
        ++a;
        A.hasField(this.target, c)
          ? A.setField(
              this.target,
              c,
              r.__cast(A.field(this.properties, c), Rf).get_end()
            )
          : A.setProperty(
              this.target,
              c,
              r.__cast(A.field(this.properties, c), Rf).get_end()
            );
      }
    },
    initialize: function () {
      for (var a, b = 0, c = A.fields(this.properties); b < c.length; ) {
        var d = c[b];
        ++b;
        a = r.__cast(A.field(this.properties, d), Rf);
        if (null != a) {
          var e = !0;
          A.hasField(this.target, d)
            ? a.set_start(A.field(this.target, d))
            : ((e = !1), a.set_start(A.getProperty(this.target, d)));
          a = new le(this.target, d, a, e);
          this.propertyDetails.push(a);
        }
      }
      this.detailsLength = this.propertyDetails.length;
      this.initialized = !0;
    },
    update: function (a) {
      if (!this.paused) {
        var b = (a - this.timeOffset) / this.duration;
        1 < b && (b = 1);
        this.initialized || this.initialize();
        if (this.special) {
          var c = this._reverse
            ? this._ease.calculate(1 - b)
            : this._ease.calculate(b);
          for (var d = 0, e = this.propertyDetails; d < e.length; ) {
            var f = e[d];
            ++d;
            this._snapping
              ? f.isField
                ? A.setField(
                    f.target,
                    f.propertyName,
                    Math.round(r.__cast(f, le).path.calculate(c))
                  )
                : A.setProperty(
                    f.target,
                    f.propertyName,
                    Math.round(r.__cast(f, le).path.calculate(c))
                  )
              : f.isField
              ? A.setField(
                  f.target,
                  f.propertyName,
                  r.__cast(f, le).path.calculate(c)
                )
              : A.setProperty(
                  f.target,
                  f.propertyName,
                  r.__cast(f, le).path.calculate(c)
                );
          }
        } else
          for (
            c = this._ease.calculate(b), d = 0, e = this.propertyDetails;
            d < e.length;

          )
            (f = e[d]),
              ++d,
              f.isField
                ? A.setField(
                    f.target,
                    f.propertyName,
                    r.__cast(f, le).path.calculate(c)
                  )
                : A.setProperty(
                    f.target,
                    f.propertyName,
                    r.__cast(f, le).path.calculate(c)
                  );
        if (1 == b) {
          if (0 == this._repeat) {
            this.active = !1;
            this.toggleVisible &&
              0 == this.getField(this.target, "alpha") &&
              this.setField(this.target, "visible", !1);
            this.complete(!0);
            return;
          }
          null != this._onRepeat &&
            this.callMethod(this._onRepeat, this._onRepeatParams);
          this._reflect && (this._reverse = !this._reverse);
          this.startTime = a;
          this.timeOffset = this.startTime + this._delay;
          0 < this._repeat && this._repeat--;
        }
        this.sendChange && this.change();
      }
    },
    __class__: ij,
  });
  var qd = function (a, b, c, d, e) {
    null == e && (e = !0);
    this.target = a;
    this.propertyName = b;
    this.start = c;
    this.change = d;
    this.isField = e;
  };
  l["motion.actuators.PropertyDetails"] = qd;
  qd.__name__ = ["motion", "actuators", "PropertyDetails"];
  qd.prototype = {
    change: null,
    isField: null,
    propertyName: null,
    start: null,
    target: null,
    __class__: qd,
  };
  var le = function (a, b, c, d) {
    null == d && (d = !0);
    qd.call(this, a, b, 0, 0, d);
    this.path = c;
  };
  l["motion.actuators.PropertyPathDetails"] = le;
  le.__name__ = ["motion", "actuators", "PropertyPathDetails"];
  le.__super__ = qd;
  le.prototype = v(qd.prototype, { path: null, __class__: le });
  var jj = function (a, b, c) {
    lb.call(this, a, b, c);
  };
  l["motion.actuators.TransformActuator"] = jj;
  jj.__name__ = ["motion", "actuators", "TransformActuator"];
  jj.__super__ = lb;
  jj.prototype = v(lb.prototype, {
    endColorTransform: null,
    endSoundTransform: null,
    tweenColorTransform: null,
    tweenSoundTransform: null,
    apply: function () {
      this.initialize();
      if (null != this.endColorTransform) {
        var a = this.getField(this.target, "transform");
        this.setField(a, "colorTransform", this.endColorTransform);
      }
      null != this.endSoundTransform &&
        this.setField(this.target, "soundTransform", this.endSoundTransform);
    },
    initialize: function () {
      A.hasField(this.properties, "colorValue") &&
        u.is(this.target, Y) &&
        this.initializeColor();
      (A.hasField(this.properties, "soundVolume") ||
        A.hasField(this.properties, "soundPan")) &&
        this.initializeSound();
      this.detailsLength = this.propertyDetails.length;
      this.initialized = !0;
    },
    initializeColor: function () {
      this.endColorTransform = new Ka();
      var a = this.properties.colorValue,
        b = this.properties.colorStrength;
      if (1 > b) {
        if (0.5 > b) {
          var c = 1;
          b *= 2;
        } else (c = 1 - 2 * (b - 0.5)), (b = 1);
        this.endColorTransform.redMultiplier = c;
        this.endColorTransform.greenMultiplier = c;
        this.endColorTransform.blueMultiplier = c;
        this.endColorTransform.redOffset = b * ((a >> 16) & 255);
        this.endColorTransform.greenOffset = b * ((a >> 8) & 255);
        this.endColorTransform.blueOffset = b * (a & 255);
      } else
        (this.endColorTransform.redMultiplier = 0),
          (this.endColorTransform.greenMultiplier = 0),
          (this.endColorTransform.blueMultiplier = 0),
          (this.endColorTransform.redOffset = (a >> 16) & 255),
          (this.endColorTransform.greenOffset = (a >> 8) & 255),
          (this.endColorTransform.blueOffset = a & 255);
      a =
        "redMultiplier greenMultiplier blueMultiplier redOffset greenOffset blueOffset".split(
          " "
        );
      A.hasField(this.properties, "colorAlpha")
        ? ((this.endColorTransform.alphaMultiplier =
            this.properties.colorAlpha),
          a.push("alphaMultiplier"))
        : (this.endColorTransform.alphaMultiplier = this.getField(
            this.target,
            "alpha"
          ));
      c = this.getField(this.target, "transform");
      c = this.getField(c, "colorTransform");
      this.tweenColorTransform = new Ka();
      for (b = 0; b < a.length; ) {
        var d = a[b];
        ++b;
        var e = this.getField(c, d);
        e = new qd(
          this.tweenColorTransform,
          d,
          e,
          this.getField(this.endColorTransform, d) - e
        );
        this.propertyDetails.push(e);
      }
    },
    initializeSound: function () {
      null == this.getField(this.target, "soundTransform") &&
        this.setField(this.target, "soundTransform", new Sf());
      var a = this.getField(this.target, "soundTransform");
      this.endSoundTransform = this.getField(this.target, "soundTransform");
      this.tweenSoundTransform = new Sf();
      A.hasField(this.properties, "soundVolume") &&
        ((this.endSoundTransform.volume = this.properties.soundVolume),
        this.propertyDetails.push(
          new qd(
            this.tweenSoundTransform,
            "volume",
            a.volume,
            this.endSoundTransform.volume - a.volume
          )
        ));
      A.hasField(this.properties, "soundPan") &&
        ((this.endSoundTransform.pan = this.properties.soundPan),
        this.propertyDetails.push(
          new qd(
            this.tweenSoundTransform,
            "pan",
            a.pan,
            this.endSoundTransform.pan - a.pan
          )
        ));
    },
    update: function (a) {
      lb.prototype.update.call(this, a);
      null != this.endColorTransform &&
        ((a = this.getField(this.target, "transform")),
        this.setField(a, "colorTransform", this.tweenColorTransform));
      null != this.endSoundTransform &&
        this.setField(this.target, "soundTransform", this.tweenSoundTransform);
    },
    __class__: jj,
  });
  var x = function () {};
  l["nape.Config"] = x;
  x.__name__ = ["nape", "Config"];
  var Dc = function () {
    this.zpp_inner = null;
  };
  l["nape.callbacks.Callback"] = Dc;
  Dc.__name__ = ["nape", "callbacks", "Callback"];
  Dc.prototype = {
    zpp_inner: null,
    get_listener: function () {
      return this.zpp_inner.listener.outer;
    },
    toString: function () {
      return "";
    },
    __class__: Dc,
    __properties__: { get_listener: "get_listener" },
  };
  var th = function () {
    this.zpp_inner = null;
  };
  l["nape.callbacks.BodyCallback"] = th;
  th.__name__ = ["nape", "callbacks", "BodyCallback"];
  th.__super__ = Dc;
  th.prototype = v(Dc.prototype, {
    get_body: function () {
      return this.zpp_inner.body.outer;
    },
    toString: function () {
      var a = "Cb:" + ["WAKE", "SLEEP"][this.zpp_inner.event - 2];
      a += ":" + this.get_body().toString();
      return (a += " : listener: " + u.string(this.get_listener()));
    },
    __class__: th,
    __properties__: v(Dc.prototype.__properties__, { get_body: "get_body" }),
  });
  var me = function () {
    this.zpp_inner = null;
  };
  l["nape.callbacks.Listener"] = me;
  me.__name__ = ["nape", "callbacks", "Listener"];
  me.prototype = {
    zpp_inner: null,
    toString: function () {
      var a = "BEGIN END WAKE SLEEP BREAK PRE ONGOING".split(" ")[
        this.zpp_inner.event
      ];
      if (0 == this.zpp_inner.type)
        return (
          "BodyListener{" +
          a +
          "::" +
          u.string(this.zpp_inner.body.outer_zn.get_options()) +
          "}"
        );
      if (1 == this.zpp_inner.type)
        return (
          "ConstraintListener{" +
          a +
          "::" +
          u.string(this.zpp_inner.constraint.outer_zn.get_options()) +
          "}"
        );
      var b = this.zpp_inner.interaction;
      switch (b.itype) {
        case 1:
          var c = "COLLISION";
          break;
        case 2:
          c = "SENSOR";
          break;
        case 4:
          c = "FLUID";
          break;
        default:
          c = "ALL";
      }
      return (
        (2 == this.zpp_inner.type
          ? "InteractionListener{" +
            a +
            "#" +
            c +
            "::" +
            u.string(b.outer_zni.get_options1()) +
            ":" +
            u.string(b.outer_zni.get_options2()) +
            "}"
          : "PreListener{" +
            c +
            "::" +
            u.string(b.outer_znp.get_options1()) +
            ":" +
            u.string(b.outer_znp.get_options2()) +
            "}") +
        " precedence=" +
        this.zpp_inner.precedence
      );
    },
    __class__: me,
  };
  var kj = function (a, b, c, d) {
    null == d && (d = 0);
    this.zpp_inner = this.zpp_inner_zn = null;
    var e = -1;
    a == va.get_WAKE() ? (e = 2) : a == va.get_SLEEP() && (e = 3);
    this.zpp_inner = this.zpp_inner_zn = new uh(Fd.argument(b), e, c);
    this.zpp_inner.outer = this;
    this.zpp_inner_zn.outer_zn = this;
    this.zpp_inner.precedence = d;
  };
  l["nape.callbacks.BodyListener"] = kj;
  kj.__name__ = ["nape", "callbacks", "BodyListener"];
  kj.__super__ = me;
  kj.prototype = v(me.prototype, {
    zpp_inner_zn: null,
    get_options: function () {
      return this.zpp_inner_zn.options.outer;
    },
    __class__: kj,
    __properties__: { get_options: "get_options" },
  });
  var va = function () {};
  l["nape.callbacks.CbEvent"] = va;
  va.__name__ = ["nape", "callbacks", "CbEvent"];
  va.__properties__ = {
    get_PRE: "get_PRE",
    get_BREAK: "get_BREAK",
    get_SLEEP: "get_SLEEP",
    get_WAKE: "get_WAKE",
    get_END: "get_END",
    get_ONGOING: "get_ONGOING",
    get_BEGIN: "get_BEGIN",
  };
  va.get_BEGIN = function () {
    null == z.CbEvent_BEGIN &&
      ((z.CbEvent_BEGIN = new va()), (z.internal = !1));
    return z.CbEvent_BEGIN;
  };
  va.get_ONGOING = function () {
    null == z.CbEvent_ONGOING &&
      ((z.CbEvent_ONGOING = new va()), (z.internal = !1));
    return z.CbEvent_ONGOING;
  };
  va.get_END = function () {
    null == z.CbEvent_END && ((z.CbEvent_END = new va()), (z.internal = !1));
    return z.CbEvent_END;
  };
  va.get_WAKE = function () {
    null == z.CbEvent_WAKE && ((z.CbEvent_WAKE = new va()), (z.internal = !1));
    return z.CbEvent_WAKE;
  };
  va.get_SLEEP = function () {
    null == z.CbEvent_SLEEP &&
      ((z.CbEvent_SLEEP = new va()), (z.internal = !1));
    return z.CbEvent_SLEEP;
  };
  va.get_BREAK = function () {
    null == z.CbEvent_BREAK &&
      ((z.CbEvent_BREAK = new va()), (z.internal = !1));
    return z.CbEvent_BREAK;
  };
  va.get_PRE = function () {
    null == z.CbEvent_PRE && ((z.CbEvent_PRE = new va()), (z.internal = !1));
    return z.CbEvent_PRE;
  };
  va.prototype = {
    toString: function () {
      return this == va.get_PRE()
        ? "PRE"
        : this == va.get_BEGIN()
        ? "BEGIN"
        : this == va.get_ONGOING()
        ? "ONGOING"
        : this == va.get_END()
        ? "END"
        : this == va.get_WAKE()
        ? "WAKE"
        : this == va.get_SLEEP()
        ? "SLEEP"
        : this == va.get_BREAK()
        ? "BREAK"
        : "";
    },
    __class__: va,
  };
  var za = function () {
    this.zpp_inner = new Hb();
    this.zpp_inner.outer = this;
  };
  l["nape.callbacks.CbType"] = za;
  za.__name__ = ["nape", "callbacks", "CbType"];
  za.__properties__ = {
    get_ANY_COMPOUND: "get_ANY_COMPOUND",
    get_ANY_SHAPE: "get_ANY_SHAPE",
    get_ANY_CONSTRAINT: "get_ANY_CONSTRAINT",
    get_ANY_BODY: "get_ANY_BODY",
  };
  za.get_ANY_BODY = function () {
    return Hb.ANY_BODY;
  };
  za.get_ANY_CONSTRAINT = function () {
    return Hb.ANY_CONSTRAINT;
  };
  za.get_ANY_SHAPE = function () {
    return Hb.ANY_SHAPE;
  };
  za.get_ANY_COMPOUND = function () {
    return Hb.ANY_COMPOUND;
  };
  za.prototype = {
    zpp_inner: null,
    get_id: function () {
      return this.zpp_inner.id;
    },
    toString: function () {
      return this == za.get_ANY_BODY()
        ? "ANY_BODY"
        : this == za.get_ANY_SHAPE()
        ? "ANY_SHAPE"
        : this == za.get_ANY_COMPOUND()
        ? "ANY_COMPOUND"
        : this == za.get_ANY_CONSTRAINT()
        ? "ANY_CONSTRAINT"
        : "CbType#" + this.get_id();
    },
    __class__: za,
    __properties__: { get_id: "get_id" },
  };
  var ne = function () {
    this.zpp_next = null;
    this.zpp_critical = !1;
    this.zpp_i = 0;
    this.zpp_inner = null;
  };
  l["nape.callbacks.CbTypeIterator"] = ne;
  ne.__name__ = ["nape", "callbacks", "CbTypeIterator"];
  ne.get = function (a) {
    if (null == ne.zpp_pool) {
      var b = new ne();
      Le.internal = !1;
    } else (b = ne.zpp_pool), (ne.zpp_pool = b.zpp_next);
    b.zpp_i = 0;
    b.zpp_inner = a;
    b.zpp_critical = !1;
    return b;
  };
  ne.prototype = {
    zpp_inner: null,
    zpp_i: null,
    zpp_critical: null,
    zpp_next: null,
    hasNext: function () {
      this.zpp_inner.zpp_inner.valmod();
      var a = this.zpp_inner.get_length();
      this.zpp_critical = !0;
      if (this.zpp_i < a) return !0;
      this.zpp_next = ne.zpp_pool;
      ne.zpp_pool = this;
      this.zpp_inner = null;
      return !1;
    },
    next: function () {
      this.zpp_critical = !1;
      return this.zpp_inner.at(this.zpp_i++);
    },
    __class__: ne,
  };
  var Me = function () {
    this.zpp_inner = new Le();
    this.zpp_inner.outer = this;
  };
  l["nape.callbacks.CbTypeList"] = Me;
  Me.__name__ = ["nape", "callbacks", "CbTypeList"];
  Me.fromArray = function (a) {
    for (var b = new Me(), c = 0; c < a.length; ) {
      var d = a[c];
      ++c;
      b.push(d);
    }
    return b;
  };
  Me.prototype = {
    zpp_inner: null,
    get_length: function () {
      this.zpp_inner.valmod();
      this.zpp_inner.zip_length &&
        ((this.zpp_inner.zip_length = !1),
        (this.zpp_inner.user_length = this.zpp_inner.inner.length));
      return this.zpp_inner.user_length;
    },
    at: function (a) {
      this.zpp_inner.valmod();
      this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a);
      if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite)
        (this.zpp_inner.at_index = a),
          (this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a));
      else
        for (; this.zpp_inner.at_index != a; )
          this.zpp_inner.at_index++,
            (this.zpp_inner.at_ite = this.zpp_inner.at_ite.next);
      return this.zpp_inner.at_ite.elem().outer;
    },
    push: function (a) {
      this.zpp_inner.modify_test();
      this.zpp_inner.valmod();
      var b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0;
      if (b) {
        if (this.zpp_inner.reverse_flag) this.zpp_inner.inner.add(a.zpp_inner);
        else {
          if (null == this.zpp_inner.push_ite) {
            var c = this.empty()
              ? null
              : this.zpp_inner.inner.iterator_at(this.get_length() - 1);
            this.zpp_inner.push_ite = c;
          }
          this.zpp_inner.push_ite = this.zpp_inner.inner.insert(
            this.zpp_inner.push_ite,
            a.zpp_inner
          );
        }
        this.zpp_inner.invalidate();
        null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
      }
      return b;
    },
    unshift: function (a) {
      this.zpp_inner.modify_test();
      this.zpp_inner.valmod();
      var b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0;
      if (b) {
        if (this.zpp_inner.reverse_flag) {
          if (null == this.zpp_inner.push_ite) {
            var c = this.empty()
              ? null
              : this.zpp_inner.inner.iterator_at(this.get_length() - 1);
            this.zpp_inner.push_ite = c;
          }
          this.zpp_inner.push_ite = this.zpp_inner.inner.insert(
            this.zpp_inner.push_ite,
            a.zpp_inner
          );
        } else this.zpp_inner.inner.add(a.zpp_inner);
        this.zpp_inner.invalidate();
        null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
      }
      return b;
    },
    add: function (a) {
      return this.zpp_inner.reverse_flag ? this.push(a) : this.unshift(a);
    },
    empty: function () {
      return this.zpp_inner.inner.empty();
    },
    iterator: function () {
      this.zpp_inner.valmod();
      return ne.get(this);
    },
    toString: function () {
      for (var a = "[", b = !0, c = this.iterator(); c.hasNext(); ) {
        var d = c.next();
        b || (a += ",");
        a += null == d ? "NULL" : d.toString();
        b = !1;
      }
      return a + "]";
    },
    __class__: Me,
    __properties__: { get_length: "get_length" },
  };
  var vh = function () {
    this.zpp_inner = null;
  };
  l["nape.callbacks.ConstraintCallback"] = vh;
  vh.__name__ = ["nape", "callbacks", "ConstraintCallback"];
  vh.__super__ = Dc;
  vh.prototype = v(Dc.prototype, {
    get_constraint: function () {
      return this.zpp_inner.constraint.outer;
    },
    toString: function () {
      var a = "Cb:" + ["WAKE", "SLEEP", "BREAK"][this.zpp_inner.event - 2];
      a += ":" + this.get_constraint().toString();
      return (a += " : listener: " + u.string(this.get_listener()));
    },
    __class__: vh,
    __properties__: v(Dc.prototype.__properties__, {
      get_constraint: "get_constraint",
    }),
  });
  var eh = function (a, b, c, d) {
    null == d && (d = 0);
    this.zpp_inner = this.zpp_inner_zn = null;
    var e = -1;
    a == va.get_WAKE()
      ? (e = 2)
      : a == va.get_SLEEP()
      ? (e = 3)
      : a == va.get_BREAK() && (e = 4);
    this.zpp_inner = this.zpp_inner_zn = new wh(Fd.argument(b), e, c);
    this.zpp_inner.outer = this;
    this.zpp_inner_zn.outer_zn = this;
    this.zpp_inner.precedence = d;
  };
  l["nape.callbacks.ConstraintListener"] = eh;
  eh.__name__ = ["nape", "callbacks", "ConstraintListener"];
  eh.__super__ = me;
  eh.prototype = v(me.prototype, {
    zpp_inner_zn: null,
    get_options: function () {
      return this.zpp_inner_zn.options.outer;
    },
    __class__: eh,
    __properties__: { get_options: "get_options" },
  });
  var xh = function () {
    this.zpp_inner = null;
  };
  l["nape.callbacks.InteractionCallback"] = xh;
  xh.__name__ = ["nape", "callbacks", "InteractionCallback"];
  xh.__super__ = Dc;
  xh.prototype = v(Dc.prototype, {
    get_int1: function () {
      return this.zpp_inner.int1.outer_i;
    },
    get_int2: function () {
      return this.zpp_inner.int2.outer_i;
    },
    get_arbiters: function () {
      return this.zpp_inner.wrap_arbiters;
    },
    toString: function () {
      var a = "Cb:" + "BEGIN END     ONGOING".split(" ")[this.zpp_inner.event];
      a += ":" + this.get_int1().toString() + "/" + this.get_int2().toString();
      a += " : " + this.get_arbiters().toString();
      return (a += " : listener: " + u.string(this.get_listener()));
    },
    __class__: xh,
    __properties__: v(Dc.prototype.__properties__, {
      get_arbiters: "get_arbiters",
      get_int2: "get_int2",
      get_int1: "get_int1",
    }),
  });
  var ee = function (a, b, c, d, e, f) {
    null == f && (f = 0);
    this.zpp_inner = this.zpp_inner_zn = null;
    var g = -1;
    a == va.get_BEGIN()
      ? (g = 0)
      : a == va.get_END()
      ? (g = 1)
      : a == va.get_ONGOING() && (g = 6);
    this.zpp_inner = this.zpp_inner_zn = new ic(
      Fd.argument(c),
      Fd.argument(d),
      g,
      2
    );
    this.zpp_inner.outer = this;
    this.zpp_inner_zn.outer_zni = this;
    this.zpp_inner.precedence = f;
    this.zpp_inner_zn.handleri = e;
    this.set_interactionType(b);
  };
  l["nape.callbacks.InteractionListener"] = ee;
  ee.__name__ = ["nape", "callbacks", "InteractionListener"];
  ee.__super__ = me;
  ee.prototype = v(me.prototype, {
    zpp_inner_zn: null,
    get_options1: function () {
      return this.zpp_inner_zn.options1.outer;
    },
    get_options2: function () {
      return this.zpp_inner_zn.options2.outer;
    },
    get_interactionType: function () {
      var a = this.zpp_inner_zn.itype;
      return 1 == a
        ? Ba.get_COLLISION()
        : 2 == a
        ? Ba.get_SENSOR()
        : 4 == a
        ? Ba.get_FLUID()
        : 7 == a
        ? Ba.get_ANY()
        : null;
    },
    set_interactionType: function (a) {
      this.get_interactionType() != a &&
        ((a =
          a == Ba.get_COLLISION()
            ? 1
            : a == Ba.get_SENSOR()
            ? 2
            : a == Ba.get_FLUID()
            ? 4
            : 7),
        this.zpp_inner_zn.setInteractionType(a));
      return this.get_interactionType();
    },
    __class__: ee,
    __properties__: {
      set_interactionType: "set_interactionType",
      get_interactionType: "get_interactionType",
      get_options2: "get_options2",
      get_options1: "get_options1",
    },
  });
  var Ba = function () {};
  l["nape.callbacks.InteractionType"] = Ba;
  Ba.__name__ = ["nape", "callbacks", "InteractionType"];
  Ba.__properties__ = {
    get_ANY: "get_ANY",
    get_FLUID: "get_FLUID",
    get_SENSOR: "get_SENSOR",
    get_COLLISION: "get_COLLISION",
  };
  Ba.get_COLLISION = function () {
    null == z.InteractionType_COLLISION &&
      ((z.InteractionType_COLLISION = new Ba()), (z.internal = !1));
    return z.InteractionType_COLLISION;
  };
  Ba.get_SENSOR = function () {
    null == z.InteractionType_SENSOR &&
      ((z.InteractionType_SENSOR = new Ba()), (z.internal = !1));
    return z.InteractionType_SENSOR;
  };
  Ba.get_FLUID = function () {
    null == z.InteractionType_FLUID &&
      ((z.InteractionType_FLUID = new Ba()), (z.internal = !1));
    return z.InteractionType_FLUID;
  };
  Ba.get_ANY = function () {
    null == z.InteractionType_ANY &&
      ((z.InteractionType_ANY = new Ba()), (z.internal = !1));
    return z.InteractionType_ANY;
  };
  Ba.prototype = {
    toString: function () {
      return this == Ba.get_COLLISION()
        ? "COLLISION"
        : this == Ba.get_SENSOR()
        ? "SENSOR"
        : this == Ba.get_FLUID()
        ? "FLUID"
        : this == Ba.get_ANY()
        ? "ANY"
        : "";
    },
    __class__: Ba,
  };
  var bc = function () {
    this.zpp_next = null;
    this.zpp_critical = !1;
    this.zpp_i = 0;
    this.zpp_inner = null;
  };
  l["nape.callbacks.ListenerIterator"] = bc;
  bc.__name__ = ["nape", "callbacks", "ListenerIterator"];
  bc.get = function (a) {
    if (null == bc.zpp_pool) {
      var b = new bc();
      Tf.internal = !1;
    } else (b = bc.zpp_pool), (bc.zpp_pool = b.zpp_next);
    b.zpp_i = 0;
    b.zpp_inner = a;
    b.zpp_critical = !1;
    return b;
  };
  bc.prototype = {
    zpp_inner: null,
    zpp_i: null,
    zpp_critical: null,
    zpp_next: null,
    hasNext: function () {
      this.zpp_inner.zpp_inner.valmod();
      var a = this.zpp_inner.get_length();
      this.zpp_critical = !0;
      if (this.zpp_i < a) return !0;
      this.zpp_next = bc.zpp_pool;
      bc.zpp_pool = this;
      this.zpp_inner = null;
      return !1;
    },
    next: function () {
      this.zpp_critical = !1;
      return this.zpp_inner.at(this.zpp_i++);
    },
    __class__: bc,
  };
  var lj = function () {
    this.zpp_inner = new Tf();
    this.zpp_inner.outer = this;
  };
  l["nape.callbacks.ListenerList"] = lj;
  lj.__name__ = ["nape", "callbacks", "ListenerList"];
  lj.prototype = {
    zpp_inner: null,
    get_length: function () {
      this.zpp_inner.valmod();
      this.zpp_inner.zip_length &&
        ((this.zpp_inner.zip_length = !1),
        (this.zpp_inner.user_length = this.zpp_inner.inner.length));
      return this.zpp_inner.user_length;
    },
    at: function (a) {
      this.zpp_inner.valmod();
      this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a);
      if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite)
        (this.zpp_inner.at_index = a),
          (this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a));
      else
        for (; this.zpp_inner.at_index != a; )
          this.zpp_inner.at_index++,
            (this.zpp_inner.at_ite = this.zpp_inner.at_ite.next);
      return this.zpp_inner.at_ite.elem().outer;
    },
    push: function (a) {
      this.zpp_inner.modify_test();
      this.zpp_inner.valmod();
      var b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0;
      if (b) {
        if (this.zpp_inner.reverse_flag) this.zpp_inner.inner.add(a.zpp_inner);
        else {
          if (null == this.zpp_inner.push_ite) {
            var c = this.empty()
              ? null
              : this.zpp_inner.inner.iterator_at(this.get_length() - 1);
            this.zpp_inner.push_ite = c;
          }
          this.zpp_inner.push_ite = this.zpp_inner.inner.insert(
            this.zpp_inner.push_ite,
            a.zpp_inner
          );
        }
        this.zpp_inner.invalidate();
        null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
      }
      return b;
    },
    unshift: function (a) {
      this.zpp_inner.modify_test();
      this.zpp_inner.valmod();
      var b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0;
      if (b) {
        if (this.zpp_inner.reverse_flag) {
          if (null == this.zpp_inner.push_ite) {
            var c = this.empty()
              ? null
              : this.zpp_inner.inner.iterator_at(this.get_length() - 1);
            this.zpp_inner.push_ite = c;
          }
          this.zpp_inner.push_ite = this.zpp_inner.inner.insert(
            this.zpp_inner.push_ite,
            a.zpp_inner
          );
        } else this.zpp_inner.inner.add(a.zpp_inner);
        this.zpp_inner.invalidate();
        null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
      }
      return b;
    },
    add: function (a) {
      return this.zpp_inner.reverse_flag ? this.push(a) : this.unshift(a);
    },
    remove: function (a) {
      this.zpp_inner.modify_test();
      this.zpp_inner.valmod();
      var b = !1;
      for (var c = this.zpp_inner.inner.begin(); null != c; ) {
        if (c.elem() == a.zpp_inner) {
          b = !0;
          break;
        }
        c = c.next;
      }
      b &&
        (null != this.zpp_inner.subber && this.zpp_inner.subber(a),
        this.zpp_inner.dontremove || this.zpp_inner.inner.remove(a.zpp_inner),
        this.zpp_inner.invalidate());
      return b;
    },
    empty: function () {
      return this.zpp_inner.inner.empty();
    },
    iterator: function () {
      this.zpp_inner.valmod();
      return bc.get(this);
    },
    toString: function () {
      for (var a = "[", b = !0, c = this.iterator(); c.hasNext(); ) {
        var d = c.next();
        b || (a += ",");
        a += null == d ? "NULL" : d.toString();
        b = !1;
      }
      return a + "]";
    },
    __class__: lj,
    __properties__: { get_length: "get_length" },
  };
  var Ec = function () {};
  l["nape.callbacks.ListenerType"] = Ec;
  Ec.__name__ = ["nape", "callbacks", "ListenerType"];
  Ec.__properties__ = {
    get_PRE: "get_PRE",
    get_INTERACTION: "get_INTERACTION",
    get_CONSTRAINT: "get_CONSTRAINT",
    get_BODY: "get_BODY",
  };
  Ec.get_BODY = function () {
    null == z.ListenerType_BODY &&
      ((z.ListenerType_BODY = new Ec()), (z.internal = !1));
    return z.ListenerType_BODY;
  };
  Ec.get_CONSTRAINT = function () {
    null == z.ListenerType_CONSTRAINT &&
      ((z.ListenerType_CONSTRAINT = new Ec()), (z.internal = !1));
    return z.ListenerType_CONSTRAINT;
  };
  Ec.get_INTERACTION = function () {
    null == z.ListenerType_INTERACTION &&
      ((z.ListenerType_INTERACTION = new Ec()), (z.internal = !1));
    return z.ListenerType_INTERACTION;
  };
  Ec.get_PRE = function () {
    null == z.ListenerType_PRE &&
      ((z.ListenerType_PRE = new Ec()), (z.internal = !1));
    return z.ListenerType_PRE;
  };
  Ec.prototype = {
    toString: function () {
      return this == Ec.get_BODY()
        ? "BODY"
        : this == Ec.get_CONSTRAINT()
        ? "CONSTRAINT"
        : this == Ec.get_INTERACTION()
        ? "INTERACTION"
        : this == Ec.get_PRE()
        ? "PRE"
        : "";
    },
    __class__: Ec,
  };
  var yf = function (a, b) {
    this.zpp_inner = new Fd();
    this.zpp_inner.outer = this;
    null != a && this.including(a);
    null != b && this.excluding(b);
  };
  l["nape.callbacks.OptionType"] = yf;
  yf.__name__ = ["nape", "callbacks", "OptionType"];
  yf.prototype = {
    zpp_inner: null,
    get_includes: function () {
      null == this.zpp_inner.wrap_includes && this.zpp_inner.setup_includes();
      return this.zpp_inner.wrap_includes;
    },
    get_excludes: function () {
      null == this.zpp_inner.wrap_excludes && this.zpp_inner.setup_excludes();
      return this.zpp_inner.wrap_excludes;
    },
    including: function (a) {
      this.zpp_inner.append(this.zpp_inner.includes, a);
      return this;
    },
    excluding: function (a) {
      this.zpp_inner.append(this.zpp_inner.excludes, a);
      return this;
    },
    toString: function () {
      var a = this.get_includes().toString(),
        b = this.get_excludes().toString();
      return "@{" + a + " excluding " + b + "}";
    },
    __class__: yf,
    __properties__: {
      get_excludes: "get_excludes",
      get_includes: "get_includes",
    },
  };
  var yh = function () {
    this.zpp_inner = null;
  };
  l["nape.callbacks.PreCallback"] = yh;
  yh.__name__ = ["nape", "callbacks", "PreCallback"];
  yh.__super__ = Dc;
  yh.prototype = v(Dc.prototype, {
    get_arbiter: function () {
      return this.zpp_inner.pre_arbiter.wrapper();
    },
    get_int1: function () {
      return this.zpp_inner.int1.outer_i;
    },
    get_int2: function () {
      return this.zpp_inner.int2.outer_i;
    },
    toString: function () {
      var a =
        "Cb:PRE:" +
        (":" + this.get_int1().toString() + "/" + this.get_int2().toString());
      a += " : " + this.get_arbiter().toString();
      return (a += " : listnener: " + u.string(this.get_listener()));
    },
    __class__: yh,
    __properties__: v(Dc.prototype.__properties__, {
      get_int2: "get_int2",
      get_int1: "get_int1",
      get_arbiter: "get_arbiter",
    }),
  });
  var gb = function () {};
  l["nape.callbacks.PreFlag"] = gb;
  gb.__name__ = ["nape", "callbacks", "PreFlag"];
  gb.__properties__ = {
    get_IGNORE_ONCE: "get_IGNORE_ONCE",
    get_ACCEPT_ONCE: "get_ACCEPT_ONCE",
    get_IGNORE: "get_IGNORE",
    get_ACCEPT: "get_ACCEPT",
  };
  gb.get_ACCEPT = function () {
    null == z.PreFlag_ACCEPT &&
      ((z.PreFlag_ACCEPT = new gb()), (z.internal = !1));
    return z.PreFlag_ACCEPT;
  };
  gb.get_IGNORE = function () {
    null == z.PreFlag_IGNORE &&
      ((z.PreFlag_IGNORE = new gb()), (z.internal = !1));
    return z.PreFlag_IGNORE;
  };
  gb.get_ACCEPT_ONCE = function () {
    null == z.PreFlag_ACCEPT_ONCE &&
      ((z.PreFlag_ACCEPT_ONCE = new gb()), (z.internal = !1));
    return z.PreFlag_ACCEPT_ONCE;
  };
  gb.get_IGNORE_ONCE = function () {
    null == z.PreFlag_IGNORE_ONCE &&
      ((z.PreFlag_IGNORE_ONCE = new gb()), (z.internal = !1));
    return z.PreFlag_IGNORE_ONCE;
  };
  gb.prototype = {
    toString: function () {
      return this == gb.get_ACCEPT()
        ? "ACCEPT"
        : this == gb.get_IGNORE()
        ? "IGNORE"
        : this == gb.get_ACCEPT_ONCE()
        ? "ACCEPT_ONCE"
        : this == gb.get_IGNORE_ONCE()
        ? "IGNORE_ONCE"
        : "";
    },
    __class__: gb,
  };
  var mj = function (a, b, c, d, e, f) {
    null == f && (f = !1);
    null == e && (e = 0);
    this.zpp_inner = this.zpp_inner_zn = null;
    this.zpp_inner = this.zpp_inner_zn = new ic(
      Fd.argument(b),
      Fd.argument(c),
      5,
      3
    );
    this.zpp_inner.outer = this;
    this.zpp_inner_zn.outer_znp = this;
    this.zpp_inner.precedence = e;
    this.zpp_inner_zn.pure = f;
    this.zpp_inner_zn.handlerp = d;
    this.set_interactionType(a);
  };
  l["nape.callbacks.PreListener"] = mj;
  mj.__name__ = ["nape", "callbacks", "PreListener"];
  mj.__super__ = me;
  mj.prototype = v(me.prototype, {
    zpp_inner_zn: null,
    get_options1: function () {
      return this.zpp_inner_zn.options1.outer;
    },
    get_options2: function () {
      return this.zpp_inner_zn.options2.outer;
    },
    get_interactionType: function () {
      var a = this.zpp_inner_zn.itype;
      return 1 == a
        ? Ba.get_COLLISION()
        : 2 == a
        ? Ba.get_SENSOR()
        : 4 == a
        ? Ba.get_FLUID()
        : 7 == a
        ? Ba.get_ANY()
        : null;
    },
    set_interactionType: function (a) {
      this.get_interactionType() != a &&
        ((a =
          a == Ba.get_COLLISION()
            ? 1
            : a == Ba.get_SENSOR()
            ? 2
            : a == Ba.get_FLUID()
            ? 4
            : 7),
        this.zpp_inner_zn.setInteractionType(a));
      return this.get_interactionType();
    },
    __class__: mj,
    __properties__: {
      set_interactionType: "set_interactionType",
      get_interactionType: "get_interactionType",
      get_options2: "get_options2",
      get_options1: "get_options1",
    },
  });
  var bb = function () {
    this.zpp_inner.insert_cbtype(za.get_ANY_CONSTRAINT().zpp_inner);
  };
  l["nape.constraint.Constraint"] = bb;
  bb.__name__ = ["nape", "constraint", "Constraint"];
  bb.prototype = {
    zpp_inner: null,
    get_space: function () {
      return null == this.zpp_inner.space ? null : this.zpp_inner.space.outer;
    },
    set_space: function (a) {
      this.get_space() != a &&
        (null != this.zpp_inner.component &&
          (this.zpp_inner.component.woken = !1),
        this.zpp_inner.clearcache(),
        null != this.zpp_inner.space &&
          this.zpp_inner.space.outer.get_constraints().remove(this),
        null != a
          ? a.get_constraints().add(this)
          : (this.zpp_inner.space = null));
      return this.get_space();
    },
    get_active: function () {
      return this.zpp_inner.active;
    },
    set_active: function (a) {
      this.get_active() != a &&
        (null != this.zpp_inner.component &&
          (this.zpp_inner.component.woken = !1),
        this.zpp_inner.clearcache(),
        a
          ? ((this.zpp_inner.active = a),
            this.zpp_inner.activate(),
            null != this.zpp_inner.space &&
              (null != this.zpp_inner.component &&
                (this.zpp_inner.component.sleeping = !0),
              this.zpp_inner.space.wake_constraint(this.zpp_inner, !0)))
          : (null != this.zpp_inner.space &&
              (this.zpp_inner.wake(),
              this.zpp_inner.space.live_constraints.remove(this.zpp_inner)),
            (this.zpp_inner.active = a),
            this.zpp_inner.deactivate()));
      return this.get_active();
    },
    get_ignore: function () {
      return this.zpp_inner.ignore;
    },
    set_ignore: function (a) {
      this.get_ignore() != a &&
        ((this.zpp_inner.ignore = a), this.zpp_inner.wake());
      return this.get_ignore();
    },
    get_stiff: function () {
      return this.zpp_inner.stiff;
    },
    set_stiff: function (a) {
      this.get_stiff() != a &&
        ((this.zpp_inner.stiff = a), this.zpp_inner.wake());
      return this.get_stiff();
    },
    get_frequency: function () {
      return this.zpp_inner.frequency;
    },
    set_frequency: function (a) {
      this.get_frequency() != a &&
        ((this.zpp_inner.frequency = a),
        this.zpp_inner.stiff || this.zpp_inner.wake());
      return this.get_frequency();
    },
    get_damping: function () {
      return this.zpp_inner.damping;
    },
    set_damping: function (a) {
      this.get_damping() != a &&
        ((this.zpp_inner.damping = a),
        this.zpp_inner.stiff || this.zpp_inner.wake());
      return this.get_damping();
    },
    get_maxForce: function () {
      return this.zpp_inner.maxForce;
    },
    set_maxForce: function (a) {
      this.get_maxForce() != a &&
        ((this.zpp_inner.maxForce = a), this.zpp_inner.wake());
      return this.get_maxForce();
    },
    get_breakUnderForce: function () {
      return this.zpp_inner.breakUnderForce;
    },
    set_breakUnderForce: function (a) {
      this.get_breakUnderForce() != a &&
        ((this.zpp_inner.breakUnderForce = a), this.zpp_inner.wake());
      return this.get_breakUnderForce();
    },
    bodyImpulse: function (a) {
      return null;
    },
    get_cbTypes: function () {
      null == this.zpp_inner.wrap_cbTypes && this.zpp_inner.setupcbTypes();
      return this.zpp_inner.wrap_cbTypes;
    },
    toString: function () {
      return "{Constraint}";
    },
    __class__: bb,
    __properties__: {
      get_cbTypes: "get_cbTypes",
      set_breakUnderForce: "set_breakUnderForce",
      get_breakUnderForce: "get_breakUnderForce",
      set_maxForce: "set_maxForce",
      get_maxForce: "get_maxForce",
      set_damping: "set_damping",
      get_damping: "get_damping",
      set_frequency: "set_frequency",
      get_frequency: "get_frequency",
      set_stiff: "set_stiff",
      get_stiff: "get_stiff",
      set_ignore: "set_ignore",
      get_ignore: "get_ignore",
      set_active: "set_active",
      get_active: "get_active",
      set_space: "set_space",
      get_space: "get_space",
    },
  };
  var nj = function (a, b, c, d, e) {
    null == e && (e = 1);
    this.zpp_inner = this.zpp_inner_zn = new zh();
    this.zpp_inner.outer = this;
    this.zpp_inner_zn.outer_zn = this;
    bb.call(this);
    this.set_body1(a);
    this.set_body2(b);
    this.set_jointMin(c);
    this.set_jointMax(d);
    this.set_ratio(e);
  };
  l["nape.constraint.AngleJoint"] = nj;
  nj.__name__ = ["nape", "constraint", "AngleJoint"];
  nj.__super__ = bb;
  nj.prototype = v(bb.prototype, {
    zpp_inner_zn: null,
    get_body1: function () {
      return null == this.zpp_inner_zn.b1 ? null : this.zpp_inner_zn.b1.outer;
    },
    set_body1: function (a) {
      this.zpp_inner.immutable_midstep("Constraint::body1");
      a = null == a ? null : a.zpp_inner;
      a != this.zpp_inner_zn.b1 &&
        (null != this.zpp_inner_zn.b1 &&
          (null != this.get_space() &&
            this.zpp_inner_zn.b2 != this.zpp_inner_zn.b1 &&
            null != this.zpp_inner_zn.b1 &&
            this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),
          this.get_active() &&
            null != this.get_space() &&
            this.zpp_inner_zn.b1.wake()),
        (this.zpp_inner_zn.b1 = a),
        null != this.get_space() &&
          null != a &&
          this.zpp_inner_zn.b2 != a &&
          null != a &&
          a.constraints.add(this.zpp_inner),
        this.get_active() &&
          null != this.get_space() &&
          (this.zpp_inner.wake(), null != a && a.wake()));
      return this.get_body1();
    },
    get_body2: function () {
      return null == this.zpp_inner_zn.b2 ? null : this.zpp_inner_zn.b2.outer;
    },
    set_body2: function (a) {
      this.zpp_inner.immutable_midstep("Constraint::body2");
      a = null == a ? null : a.zpp_inner;
      a != this.zpp_inner_zn.b2 &&
        (null != this.zpp_inner_zn.b2 &&
          (null != this.get_space() &&
            this.zpp_inner_zn.b1 != this.zpp_inner_zn.b2 &&
            null != this.zpp_inner_zn.b2 &&
            this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),
          this.get_active() &&
            null != this.get_space() &&
            this.zpp_inner_zn.b2.wake()),
        (this.zpp_inner_zn.b2 = a),
        null != this.get_space() &&
          null != a &&
          this.zpp_inner_zn.b1 != a &&
          null != a &&
          a.constraints.add(this.zpp_inner),
        this.get_active() &&
          null != this.get_space() &&
          (this.zpp_inner.wake(), null != a && a.wake()));
      return this.get_body2();
    },
    get_jointMin: function () {
      return this.zpp_inner_zn.jointMin;
    },
    set_jointMin: function (a) {
      this.zpp_inner.immutable_midstep("AngleJoint::jointMin");
      this.get_jointMin() != a &&
        ((this.zpp_inner_zn.jointMin = a), this.zpp_inner.wake());
      return this.get_jointMin();
    },
    get_jointMax: function () {
      return this.zpp_inner_zn.jointMax;
    },
    set_jointMax: function (a) {
      this.zpp_inner.immutable_midstep("AngleJoint::jointMax");
      this.get_jointMax() != a &&
        ((this.zpp_inner_zn.jointMax = a), this.zpp_inner.wake());
      return this.get_jointMax();
    },
    get_ratio: function () {
      return this.zpp_inner_zn.ratio;
    },
    set_ratio: function (a) {
      this.zpp_inner.immutable_midstep("AngleJoint::ratio");
      this.get_ratio() != a &&
        ((this.zpp_inner_zn.ratio = a), this.zpp_inner.wake());
      return this.get_ratio();
    },
    bodyImpulse: function (a) {
      return this.get_active()
        ? this.zpp_inner_zn.bodyImpulse(a.zpp_inner)
        : W.get(0, 0, 0);
    },
    __class__: nj,
    __properties__: v(bb.prototype.__properties__, {
      set_ratio: "set_ratio",
      get_ratio: "get_ratio",
      set_jointMax: "set_jointMax",
      get_jointMax: "get_jointMax",
      set_jointMin: "set_jointMin",
      get_jointMin: "get_jointMin",
      set_body2: "set_body2",
      get_body2: "get_body2",
      set_body1: "set_body1",
      get_body1: "get_body1",
    }),
  });
  var Pc = function () {
    this.zpp_next = null;
    this.zpp_critical = !1;
    this.zpp_i = 0;
    this.zpp_inner = null;
  };
  l["nape.constraint.ConstraintIterator"] = Pc;
  Pc.__name__ = ["nape", "constraint", "ConstraintIterator"];
  Pc.get = function (a) {
    if (null == Pc.zpp_pool) {
      var b = new Pc();
      rd.internal = !1;
    } else (b = Pc.zpp_pool), (Pc.zpp_pool = b.zpp_next);
    b.zpp_i = 0;
    b.zpp_inner = a;
    b.zpp_critical = !1;
    return b;
  };
  Pc.prototype = {
    zpp_inner: null,
    zpp_i: null,
    zpp_critical: null,
    zpp_next: null,
    hasNext: function () {
      this.zpp_inner.zpp_inner.valmod();
      var a = this.zpp_inner.get_length();
      this.zpp_critical = !0;
      if (this.zpp_i < a) return !0;
      this.zpp_next = Pc.zpp_pool;
      Pc.zpp_pool = this;
      this.zpp_inner = null;
      return !1;
    },
    next: function () {
      this.zpp_critical = !1;
      return this.zpp_inner.at(this.zpp_i++);
    },
    __class__: Pc,
  };
  var oj = function () {
    this.zpp_inner = new rd();
    this.zpp_inner.outer = this;
  };
  l["nape.constraint.ConstraintList"] = oj;
  oj.__name__ = ["nape", "constraint", "ConstraintList"];
  oj.prototype = {
    zpp_inner: null,
    get_length: function () {
      this.zpp_inner.valmod();
      this.zpp_inner.zip_length &&
        ((this.zpp_inner.zip_length = !1),
        (this.zpp_inner.user_length = this.zpp_inner.inner.length));
      return this.zpp_inner.user_length;
    },
    at: function (a) {
      this.zpp_inner.valmod();
      this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a);
      if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite)
        (this.zpp_inner.at_index = a),
          (this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a));
      else
        for (; this.zpp_inner.at_index != a; )
          this.zpp_inner.at_index++,
            (this.zpp_inner.at_ite = this.zpp_inner.at_ite.next);
      return this.zpp_inner.at_ite.elem().outer;
    },
    push: function (a) {
      this.zpp_inner.modify_test();
      this.zpp_inner.valmod();
      var b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0;
      if (b) {
        if (this.zpp_inner.reverse_flag) this.zpp_inner.inner.add(a.zpp_inner);
        else {
          if (null == this.zpp_inner.push_ite) {
            var c = this.empty()
              ? null
              : this.zpp_inner.inner.iterator_at(this.get_length() - 1);
            this.zpp_inner.push_ite = c;
          }
          this.zpp_inner.push_ite = this.zpp_inner.inner.insert(
            this.zpp_inner.push_ite,
            a.zpp_inner
          );
        }
        this.zpp_inner.invalidate();
        null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
      }
      return b;
    },
    unshift: function (a) {
      this.zpp_inner.modify_test();
      this.zpp_inner.valmod();
      var b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0;
      if (b) {
        if (this.zpp_inner.reverse_flag) {
          if (null == this.zpp_inner.push_ite) {
            var c = this.empty()
              ? null
              : this.zpp_inner.inner.iterator_at(this.get_length() - 1);
            this.zpp_inner.push_ite = c;
          }
          this.zpp_inner.push_ite = this.zpp_inner.inner.insert(
            this.zpp_inner.push_ite,
            a.zpp_inner
          );
        } else this.zpp_inner.inner.add(a.zpp_inner);
        this.zpp_inner.invalidate();
        null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
      }
      return b;
    },
    pop: function () {
      this.zpp_inner.modify_test();
      this.zpp_inner.valmod();
      if (this.zpp_inner.reverse_flag) {
        var a = this.zpp_inner.inner.front();
        var b = a.outer;
        null != this.zpp_inner.subber && this.zpp_inner.subber(b);
        this.zpp_inner.dontremove || this.zpp_inner.inner.pop();
      } else {
        null != this.zpp_inner.at_ite &&
          null == this.zpp_inner.at_ite.next &&
          (this.zpp_inner.at_ite = null);
        b =
          1 == this.get_length()
            ? null
            : this.zpp_inner.inner.iterator_at(this.get_length() - 2);
        a = null == b ? this.zpp_inner.inner.front() : b.next.elem();
        var c = a.outer;
        null != this.zpp_inner.subber && this.zpp_inner.subber(c);
        this.zpp_inner.dontremove || this.zpp_inner.inner.erase(b);
      }
      this.zpp_inner.invalidate();
      return a.outer;
    },
    shift: function () {
      this.zpp_inner.modify_test();
      this.zpp_inner.valmod();
      if (this.zpp_inner.reverse_flag) {
        null != this.zpp_inner.at_ite &&
          null == this.zpp_inner.at_ite.next &&
          (this.zpp_inner.at_ite = null);
        var a =
          1 == this.get_length()
            ? null
            : this.zpp_inner.inner.iterator_at(this.get_length() - 2);
        var b = null == a ? this.zpp_inner.inner.front() : a.next.elem();
        var c = b.outer;
        null != this.zpp_inner.subber && this.zpp_inner.subber(c);
        this.zpp_inner.dontremove || this.zpp_inner.inner.erase(a);
      } else
        (b = this.zpp_inner.inner.front()),
          (a = b.outer),
          null != this.zpp_inner.subber && this.zpp_inner.subber(a),
          this.zpp_inner.dontremove || this.zpp_inner.inner.pop();
      this.zpp_inner.invalidate();
      return b.outer;
    },
    add: function (a) {
      return this.zpp_inner.reverse_flag ? this.push(a) : this.unshift(a);
    },
    remove: function (a) {
      this.zpp_inner.modify_test();
      this.zpp_inner.valmod();
      var b = !1;
      for (var c = this.zpp_inner.inner.begin(); null != c; ) {
        if (c.elem() == a.zpp_inner) {
          b = !0;
          break;
        }
        c = c.next;
      }
      b &&
        (null != this.zpp_inner.subber && this.zpp_inner.subber(a),
        this.zpp_inner.dontremove || this.zpp_inner.inner.remove(a.zpp_inner),
        this.zpp_inner.invalidate());
      return b;
    },
    clear: function () {
      if (this.zpp_inner.reverse_flag) for (; !this.empty(); ) this.pop();
      else for (; !this.empty(); ) this.shift();
    },
    empty: function () {
      return this.zpp_inner.inner.empty();
    },
    iterator: function () {
      this.zpp_inner.valmod();
      return Pc.get(this);
    },
    toString: function () {
      for (var a = "[", b = !0, c = this.iterator(); c.hasNext(); ) {
        var d = c.next();
        b || (a += ",");
        a += null == d ? "NULL" : d.toString();
        b = !1;
      }
      return a + "]";
    },
    foreach: function (a) {
      for (var b = this.iterator(); b.hasNext(); )
        try {
          a(b.next());
        } catch (c) {
          ta.lastException = c;
          b.zpp_next = Pc.zpp_pool;
          Pc.zpp_pool = b;
          b.zpp_inner = null;
          break;
        }
      return this;
    },
    __class__: oj,
    __properties__: { get_length: "get_length" },
  };
  var dh = function (a, b, c, d, e, f) {
    this.zpp_inner = this.zpp_inner_zn = new Ah();
    this.zpp_inner.outer = this;
    this.zpp_inner_zn.outer_zn = this;
    bb.call(this);
    this.set_body1(a);
    this.set_body2(b);
    this.set_anchor1(c);
    this.set_anchor2(d);
    this.set_jointMin(e);
    this.set_jointMax(f);
  };
  l["nape.constraint.DistanceJoint"] = dh;
  dh.__name__ = ["nape", "constraint", "DistanceJoint"];
  dh.__super__ = bb;
  dh.prototype = v(bb.prototype, {
    zpp_inner_zn: null,
    get_body1: function () {
      return null == this.zpp_inner_zn.b1 ? null : this.zpp_inner_zn.b1.outer;
    },
    set_body1: function (a) {
      this.zpp_inner.immutable_midstep("Constraint::body1");
      a = null == a ? null : a.zpp_inner;
      a != this.zpp_inner_zn.b1 &&
        (null != this.zpp_inner_zn.b1 &&
          (null != this.get_space() &&
            this.zpp_inner_zn.b2 != this.zpp_inner_zn.b1 &&
            null != this.zpp_inner_zn.b1 &&
            this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),
          this.get_active() &&
            null != this.get_space() &&
            this.zpp_inner_zn.b1.wake()),
        (this.zpp_inner_zn.b1 = a),
        null != this.get_space() &&
          null != a &&
          this.zpp_inner_zn.b2 != a &&
          null != a &&
          a.constraints.add(this.zpp_inner),
        this.get_active() &&
          null != this.get_space() &&
          (this.zpp_inner.wake(), null != a && a.wake()));
      return this.get_body1();
    },
    get_body2: function () {
      return null == this.zpp_inner_zn.b2 ? null : this.zpp_inner_zn.b2.outer;
    },
    set_body2: function (a) {
      this.zpp_inner.immutable_midstep("Constraint::body2");
      a = null == a ? null : a.zpp_inner;
      a != this.zpp_inner_zn.b2 &&
        (null != this.zpp_inner_zn.b2 &&
          (null != this.get_space() &&
            this.zpp_inner_zn.b1 != this.zpp_inner_zn.b2 &&
            null != this.zpp_inner_zn.b2 &&
            this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),
          this.get_active() &&
            null != this.get_space() &&
            this.zpp_inner_zn.b2.wake()),
        (this.zpp_inner_zn.b2 = a),
        null != this.get_space() &&
          null != a &&
          this.zpp_inner_zn.b1 != a &&
          null != a &&
          a.constraints.add(this.zpp_inner),
        this.get_active() &&
          null != this.get_space() &&
          (this.zpp_inner.wake(), null != a && a.wake()));
      return this.get_body2();
    },
    get_anchor1: function () {
      null == this.zpp_inner_zn.wrap_a1 && this.zpp_inner_zn.setup_a1();
      return this.zpp_inner_zn.wrap_a1;
    },
    set_anchor1: function (a) {
      this.get_anchor1().set(a);
      return this.get_anchor1();
    },
    get_anchor2: function () {
      null == this.zpp_inner_zn.wrap_a2 && this.zpp_inner_zn.setup_a2();
      return this.zpp_inner_zn.wrap_a2;
    },
    set_anchor2: function (a) {
      this.get_anchor2().set(a);
      return this.get_anchor2();
    },
    get_jointMin: function () {
      return this.zpp_inner_zn.jointMin;
    },
    set_jointMin: function (a) {
      this.zpp_inner.immutable_midstep("DistanceJoint::jointMin");
      this.get_jointMin() != a &&
        ((this.zpp_inner_zn.jointMin = a), this.zpp_inner.wake());
      return this.get_jointMin();
    },
    get_jointMax: function () {
      return this.zpp_inner_zn.jointMax;
    },
    set_jointMax: function (a) {
      this.zpp_inner.immutable_midstep("DistanceJoint::jointMax");
      this.get_jointMax() != a &&
        ((this.zpp_inner_zn.jointMax = a), this.zpp_inner.wake());
      return this.get_jointMax();
    },
    bodyImpulse: function (a) {
      return this.get_active()
        ? this.zpp_inner_zn.bodyImpulse(a.zpp_inner)
        : W.get();
    },
    __class__: dh,
    __properties__: v(bb.prototype.__properties__, {
      set_jointMax: "set_jointMax",
      get_jointMax: "get_jointMax",
      set_jointMin: "set_jointMin",
      get_jointMin: "get_jointMin",
      set_anchor2: "set_anchor2",
      get_anchor2: "get_anchor2",
      set_anchor1: "set_anchor1",
      get_anchor1: "get_anchor1",
      set_body2: "set_body2",
      get_body2: "get_body2",
      set_body1: "set_body1",
      get_body1: "get_body1",
    }),
  });
  var De = function (a, b, c, d, e, f, g) {
    this.zpp_inner = this.zpp_inner_zn = new Bh();
    this.zpp_inner.outer = this;
    this.zpp_inner_zn.outer_zn = this;
    bb.call(this);
    this.set_body1(a);
    this.set_body2(b);
    this.set_anchor1(c);
    this.set_anchor2(d);
    this.set_direction(e);
    this.set_jointMin(f);
    this.set_jointMax(g);
  };
  l["nape.constraint.LineJoint"] = De;
  De.__name__ = ["nape", "constraint", "LineJoint"];
  De.__super__ = bb;
  De.prototype = v(bb.prototype, {
    zpp_inner_zn: null,
    get_body1: function () {
      return null == this.zpp_inner_zn.b1 ? null : this.zpp_inner_zn.b1.outer;
    },
    set_body1: function (a) {
      this.zpp_inner.immutable_midstep("Constraint::body1");
      a = null == a ? null : a.zpp_inner;
      a != this.zpp_inner_zn.b1 &&
        (null != this.zpp_inner_zn.b1 &&
          (null != this.get_space() &&
            this.zpp_inner_zn.b2 != this.zpp_inner_zn.b1 &&
            null != this.zpp_inner_zn.b1 &&
            this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),
          this.get_active() &&
            null != this.get_space() &&
            this.zpp_inner_zn.b1.wake()),
        (this.zpp_inner_zn.b1 = a),
        null != this.get_space() &&
          null != a &&
          this.zpp_inner_zn.b2 != a &&
          null != a &&
          a.constraints.add(this.zpp_inner),
        this.get_active() &&
          null != this.get_space() &&
          (this.zpp_inner.wake(), null != a && a.wake()));
      return this.get_body1();
    },
    get_body2: function () {
      return null == this.zpp_inner_zn.b2 ? null : this.zpp_inner_zn.b2.outer;
    },
    set_body2: function (a) {
      this.zpp_inner.immutable_midstep("Constraint::body2");
      a = null == a ? null : a.zpp_inner;
      a != this.zpp_inner_zn.b2 &&
        (null != this.zpp_inner_zn.b2 &&
          (null != this.get_space() &&
            this.zpp_inner_zn.b1 != this.zpp_inner_zn.b2 &&
            null != this.zpp_inner_zn.b2 &&
            this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),
          this.get_active() &&
            null != this.get_space() &&
            this.zpp_inner_zn.b2.wake()),
        (this.zpp_inner_zn.b2 = a),
        null != this.get_space() &&
          null != a &&
          this.zpp_inner_zn.b1 != a &&
          null != a &&
          a.constraints.add(this.zpp_inner),
        this.get_active() &&
          null != this.get_space() &&
          (this.zpp_inner.wake(), null != a && a.wake()));
      return this.get_body2();
    },
    get_anchor1: function () {
      null == this.zpp_inner_zn.wrap_a1 && this.zpp_inner_zn.setup_a1();
      return this.zpp_inner_zn.wrap_a1;
    },
    set_anchor1: function (a) {
      this.get_anchor1().set(a);
      return this.get_anchor1();
    },
    get_anchor2: function () {
      null == this.zpp_inner_zn.wrap_a2 && this.zpp_inner_zn.setup_a2();
      return this.zpp_inner_zn.wrap_a2;
    },
    set_anchor2: function (a) {
      this.get_anchor2().set(a);
      return this.get_anchor2();
    },
    get_direction: function () {
      null == this.zpp_inner_zn.wrap_n && this.zpp_inner_zn.setup_n();
      return this.zpp_inner_zn.wrap_n;
    },
    set_direction: function (a) {
      this.get_direction().set(a);
      return this.get_direction();
    },
    get_jointMin: function () {
      return this.zpp_inner_zn.jointMin;
    },
    set_jointMin: function (a) {
      this.zpp_inner.immutable_midstep("LineJoint::jointMin");
      this.get_jointMin() != a &&
        ((this.zpp_inner_zn.jointMin = a), this.zpp_inner.wake());
      return this.get_jointMin();
    },
    get_jointMax: function () {
      return this.zpp_inner_zn.jointMax;
    },
    set_jointMax: function (a) {
      this.zpp_inner.immutable_midstep("LineJoint::jointMax");
      this.get_jointMax() != a &&
        ((this.zpp_inner_zn.jointMax = a), this.zpp_inner.wake());
      return this.get_jointMax();
    },
    bodyImpulse: function (a) {
      return this.get_active()
        ? this.zpp_inner_zn.bodyImpulse(a.zpp_inner)
        : W.get();
    },
    __class__: De,
    __properties__: v(bb.prototype.__properties__, {
      set_jointMax: "set_jointMax",
      get_jointMax: "get_jointMax",
      set_jointMin: "set_jointMin",
      get_jointMin: "get_jointMin",
      set_direction: "set_direction",
      get_direction: "get_direction",
      set_anchor2: "set_anchor2",
      get_anchor2: "get_anchor2",
      set_anchor1: "set_anchor1",
      get_anchor1: "get_anchor1",
      set_body2: "set_body2",
      get_body2: "get_body2",
      set_body1: "set_body1",
      get_body1: "get_body1",
    }),
  });
  var pj = function (a, b, c, d) {
    null == d && (d = 1);
    null == c && (c = 0);
    this.zpp_inner = this.zpp_inner_zn = new Ch();
    this.zpp_inner.outer = this;
    this.zpp_inner_zn.outer_zn = this;
    bb.call(this);
    this.set_body1(a);
    this.set_body2(b);
    this.set_rate(c);
    this.set_ratio(d);
  };
  l["nape.constraint.MotorJoint"] = pj;
  pj.__name__ = ["nape", "constraint", "MotorJoint"];
  pj.__super__ = bb;
  pj.prototype = v(bb.prototype, {
    zpp_inner_zn: null,
    get_body1: function () {
      return null == this.zpp_inner_zn.b1 ? null : this.zpp_inner_zn.b1.outer;
    },
    set_body1: function (a) {
      this.zpp_inner.immutable_midstep("Constraint::body1");
      a = null == a ? null : a.zpp_inner;
      a != this.zpp_inner_zn.b1 &&
        (null != this.zpp_inner_zn.b1 &&
          (null != this.get_space() &&
            this.zpp_inner_zn.b2 != this.zpp_inner_zn.b1 &&
            null != this.zpp_inner_zn.b1 &&
            this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),
          this.get_active() &&
            null != this.get_space() &&
            this.zpp_inner_zn.b1.wake()),
        (this.zpp_inner_zn.b1 = a),
        null != this.get_space() &&
          null != a &&
          this.zpp_inner_zn.b2 != a &&
          null != a &&
          a.constraints.add(this.zpp_inner),
        this.get_active() &&
          null != this.get_space() &&
          (this.zpp_inner.wake(), null != a && a.wake()));
      return this.get_body1();
    },
    get_body2: function () {
      return null == this.zpp_inner_zn.b2 ? null : this.zpp_inner_zn.b2.outer;
    },
    set_body2: function (a) {
      this.zpp_inner.immutable_midstep("Constraint::body2");
      a = null == a ? null : a.zpp_inner;
      a != this.zpp_inner_zn.b2 &&
        (null != this.zpp_inner_zn.b2 &&
          (null != this.get_space() &&
            this.zpp_inner_zn.b1 != this.zpp_inner_zn.b2 &&
            null != this.zpp_inner_zn.b2 &&
            this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),
          this.get_active() &&
            null != this.get_space() &&
            this.zpp_inner_zn.b2.wake()),
        (this.zpp_inner_zn.b2 = a),
        null != this.get_space() &&
          null != a &&
          this.zpp_inner_zn.b1 != a &&
          null != a &&
          a.constraints.add(this.zpp_inner),
        this.get_active() &&
          null != this.get_space() &&
          (this.zpp_inner.wake(), null != a && a.wake()));
      return this.get_body2();
    },
    get_ratio: function () {
      return this.zpp_inner_zn.ratio;
    },
    set_ratio: function (a) {
      this.zpp_inner.immutable_midstep("MotorJoint::ratio");
      this.get_ratio() != a &&
        ((this.zpp_inner_zn.ratio = a), this.zpp_inner.wake());
      return this.get_ratio();
    },
    get_rate: function () {
      return this.zpp_inner_zn.rate;
    },
    set_rate: function (a) {
      this.zpp_inner.immutable_midstep("MotorJoint::rate");
      this.get_rate() != a &&
        ((this.zpp_inner_zn.rate = a), this.zpp_inner.wake());
      return this.get_rate();
    },
    bodyImpulse: function (a) {
      return this.get_active()
        ? this.zpp_inner_zn.bodyImpulse(a.zpp_inner)
        : W.get();
    },
    __class__: pj,
    __properties__: v(bb.prototype.__properties__, {
      set_rate: "set_rate",
      get_rate: "get_rate",
      set_ratio: "set_ratio",
      get_ratio: "get_ratio",
      set_body2: "set_body2",
      get_body2: "get_body2",
      set_body1: "set_body1",
      get_body1: "get_body1",
    }),
  });
  var ac = function (a, b, c, d) {
    this.zpp_inner = this.zpp_inner_zn = new Dh();
    this.zpp_inner.outer = this;
    this.zpp_inner_zn.outer_zn = this;
    bb.call(this);
    this.set_body1(a);
    this.set_body2(b);
    this.set_anchor1(c);
    this.set_anchor2(d);
  };
  l["nape.constraint.PivotJoint"] = ac;
  ac.__name__ = ["nape", "constraint", "PivotJoint"];
  ac.__super__ = bb;
  ac.prototype = v(bb.prototype, {
    zpp_inner_zn: null,
    get_body1: function () {
      return null == this.zpp_inner_zn.b1 ? null : this.zpp_inner_zn.b1.outer;
    },
    set_body1: function (a) {
      this.zpp_inner.immutable_midstep("Constraint::body1");
      a = null == a ? null : a.zpp_inner;
      a != this.zpp_inner_zn.b1 &&
        (null != this.zpp_inner_zn.b1 &&
          (null != this.get_space() &&
            this.zpp_inner_zn.b2 != this.zpp_inner_zn.b1 &&
            null != this.zpp_inner_zn.b1 &&
            this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),
          this.get_active() &&
            null != this.get_space() &&
            this.zpp_inner_zn.b1.wake()),
        (this.zpp_inner_zn.b1 = a),
        null != this.get_space() &&
          null != a &&
          this.zpp_inner_zn.b2 != a &&
          null != a &&
          a.constraints.add(this.zpp_inner),
        this.get_active() &&
          null != this.get_space() &&
          (this.zpp_inner.wake(), null != a && a.wake()));
      return this.get_body1();
    },
    get_body2: function () {
      return null == this.zpp_inner_zn.b2 ? null : this.zpp_inner_zn.b2.outer;
    },
    set_body2: function (a) {
      this.zpp_inner.immutable_midstep("Constraint::body2");
      a = null == a ? null : a.zpp_inner;
      a != this.zpp_inner_zn.b2 &&
        (null != this.zpp_inner_zn.b2 &&
          (null != this.get_space() &&
            this.zpp_inner_zn.b1 != this.zpp_inner_zn.b2 &&
            null != this.zpp_inner_zn.b2 &&
            this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),
          this.get_active() &&
            null != this.get_space() &&
            this.zpp_inner_zn.b2.wake()),
        (this.zpp_inner_zn.b2 = a),
        null != this.get_space() &&
          null != a &&
          this.zpp_inner_zn.b1 != a &&
          null != a &&
          a.constraints.add(this.zpp_inner),
        this.get_active() &&
          null != this.get_space() &&
          (this.zpp_inner.wake(), null != a && a.wake()));
      return this.get_body2();
    },
    get_anchor1: function () {
      null == this.zpp_inner_zn.wrap_a1 && this.zpp_inner_zn.setup_a1();
      return this.zpp_inner_zn.wrap_a1;
    },
    set_anchor1: function (a) {
      this.get_anchor1().set(a);
      return this.get_anchor1();
    },
    get_anchor2: function () {
      null == this.zpp_inner_zn.wrap_a2 && this.zpp_inner_zn.setup_a2();
      return this.zpp_inner_zn.wrap_a2;
    },
    set_anchor2: function (a) {
      this.get_anchor2().set(a);
      return this.get_anchor2();
    },
    bodyImpulse: function (a) {
      return this.get_active()
        ? this.zpp_inner_zn.bodyImpulse(a.zpp_inner)
        : W.get();
    },
    __class__: ac,
    __properties__: v(bb.prototype.__properties__, {
      set_anchor2: "set_anchor2",
      get_anchor2: "get_anchor2",
      set_anchor1: "set_anchor1",
      get_anchor1: "get_anchor1",
      set_body2: "set_body2",
      get_body2: "get_body2",
      set_body1: "set_body1",
      get_body1: "get_body1",
    }),
  });
  var qj = function (a, b, c, d, e, f, g, h, n, p, k) {
    null == k && (k = 1);
    this.zpp_inner = this.zpp_inner_zn = new Eh();
    this.zpp_inner.outer = this;
    this.zpp_inner_zn.outer_zn = this;
    bb.call(this);
    this.set_body1(a);
    this.set_body2(b);
    this.set_body3(c);
    this.set_body4(d);
    this.set_anchor1(e);
    this.set_anchor2(f);
    this.set_anchor3(g);
    this.set_anchor4(h);
    this.set_ratio(k);
    this.set_jointMin(n);
    this.set_jointMax(p);
  };
  l["nape.constraint.PulleyJoint"] = qj;
  qj.__name__ = ["nape", "constraint", "PulleyJoint"];
  qj.__super__ = bb;
  qj.prototype = v(bb.prototype, {
    zpp_inner_zn: null,
    get_body1: function () {
      return null == this.zpp_inner_zn.b1 ? null : this.zpp_inner_zn.b1.outer;
    },
    set_body1: function (a) {
      this.zpp_inner.immutable_midstep("Constraint::body1");
      a = null == a ? null : a.zpp_inner;
      a != this.zpp_inner_zn.b1 &&
        (null != this.zpp_inner_zn.b1 &&
          (null != this.get_space() &&
            this.zpp_inner_zn.b2 != this.zpp_inner_zn.b1 &&
            this.zpp_inner_zn.b3 != this.zpp_inner_zn.b1 &&
            this.zpp_inner_zn.b4 != this.zpp_inner_zn.b1 &&
            null != this.zpp_inner_zn.b1 &&
            this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),
          this.get_active() &&
            null != this.get_space() &&
            this.zpp_inner_zn.b1.wake()),
        (this.zpp_inner_zn.b1 = a),
        null != this.get_space() &&
          null != a &&
          this.zpp_inner_zn.b2 != a &&
          this.zpp_inner_zn.b3 != a &&
          this.zpp_inner_zn.b4 != a &&
          null != a &&
          a.constraints.add(this.zpp_inner),
        this.get_active() &&
          null != this.get_space() &&
          (this.zpp_inner.wake(), null != a && a.wake()));
      return this.get_body1();
    },
    get_body2: function () {
      return null == this.zpp_inner_zn.b2 ? null : this.zpp_inner_zn.b2.outer;
    },
    set_body2: function (a) {
      this.zpp_inner.immutable_midstep("Constraint::body2");
      a = null == a ? null : a.zpp_inner;
      a != this.zpp_inner_zn.b2 &&
        (null != this.zpp_inner_zn.b2 &&
          (null != this.get_space() &&
            this.zpp_inner_zn.b1 != this.zpp_inner_zn.b2 &&
            this.zpp_inner_zn.b3 != this.zpp_inner_zn.b2 &&
            this.zpp_inner_zn.b4 != this.zpp_inner_zn.b2 &&
            null != this.zpp_inner_zn.b2 &&
            this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),
          this.get_active() &&
            null != this.get_space() &&
            this.zpp_inner_zn.b2.wake()),
        (this.zpp_inner_zn.b2 = a),
        null != this.get_space() &&
          null != a &&
          this.zpp_inner_zn.b1 != a &&
          this.zpp_inner_zn.b3 != a &&
          this.zpp_inner_zn.b4 != a &&
          null != a &&
          a.constraints.add(this.zpp_inner),
        this.get_active() &&
          null != this.get_space() &&
          (this.zpp_inner.wake(), null != a && a.wake()));
      return this.get_body2();
    },
    get_body3: function () {
      return null == this.zpp_inner_zn.b3 ? null : this.zpp_inner_zn.b3.outer;
    },
    set_body3: function (a) {
      this.zpp_inner.immutable_midstep("Constraint::body3");
      a = null == a ? null : a.zpp_inner;
      a != this.zpp_inner_zn.b3 &&
        (null != this.zpp_inner_zn.b3 &&
          (null != this.get_space() &&
            this.zpp_inner_zn.b1 != this.zpp_inner_zn.b3 &&
            this.zpp_inner_zn.b2 != this.zpp_inner_zn.b3 &&
            this.zpp_inner_zn.b4 != this.zpp_inner_zn.b3 &&
            null != this.zpp_inner_zn.b3 &&
            this.zpp_inner_zn.b3.constraints.remove(this.zpp_inner),
          this.get_active() &&
            null != this.get_space() &&
            this.zpp_inner_zn.b3.wake()),
        (this.zpp_inner_zn.b3 = a),
        null != this.get_space() &&
          null != a &&
          this.zpp_inner_zn.b1 != a &&
          this.zpp_inner_zn.b2 != a &&
          this.zpp_inner_zn.b4 != a &&
          null != a &&
          a.constraints.add(this.zpp_inner),
        this.get_active() &&
          null != this.get_space() &&
          (this.zpp_inner.wake(), null != a && a.wake()));
      return this.get_body3();
    },
    get_body4: function () {
      return null == this.zpp_inner_zn.b4 ? null : this.zpp_inner_zn.b4.outer;
    },
    set_body4: function (a) {
      this.zpp_inner.immutable_midstep("Constraint::body4");
      a = null == a ? null : a.zpp_inner;
      a != this.zpp_inner_zn.b4 &&
        (null != this.zpp_inner_zn.b4 &&
          (null != this.get_space() &&
            this.zpp_inner_zn.b1 != this.zpp_inner_zn.b4 &&
            this.zpp_inner_zn.b2 != this.zpp_inner_zn.b4 &&
            this.zpp_inner_zn.b3 != this.zpp_inner_zn.b4 &&
            null != this.zpp_inner_zn.b4 &&
            this.zpp_inner_zn.b4.constraints.remove(this.zpp_inner),
          this.get_active() &&
            null != this.get_space() &&
            this.zpp_inner_zn.b4.wake()),
        (this.zpp_inner_zn.b4 = a),
        null != this.get_space() &&
          null != a &&
          this.zpp_inner_zn.b1 != a &&
          this.zpp_inner_zn.b2 != a &&
          this.zpp_inner_zn.b3 != a &&
          null != a &&
          a.constraints.add(this.zpp_inner),
        this.get_active() &&
          null != this.get_space() &&
          (this.zpp_inner.wake(), null != a && a.wake()));
      return this.get_body4();
    },
    get_anchor1: function () {
      null == this.zpp_inner_zn.wrap_a1 && this.zpp_inner_zn.setup_a1();
      return this.zpp_inner_zn.wrap_a1;
    },
    set_anchor1: function (a) {
      this.get_anchor1().set(a);
      return this.get_anchor1();
    },
    get_anchor2: function () {
      null == this.zpp_inner_zn.wrap_a2 && this.zpp_inner_zn.setup_a2();
      return this.zpp_inner_zn.wrap_a2;
    },
    set_anchor2: function (a) {
      this.get_anchor2().set(a);
      return this.get_anchor2();
    },
    get_anchor3: function () {
      null == this.zpp_inner_zn.wrap_a3 && this.zpp_inner_zn.setup_a3();
      return this.zpp_inner_zn.wrap_a3;
    },
    set_anchor3: function (a) {
      this.get_anchor3().set(a);
      return this.get_anchor3();
    },
    get_anchor4: function () {
      null == this.zpp_inner_zn.wrap_a4 && this.zpp_inner_zn.setup_a4();
      return this.zpp_inner_zn.wrap_a4;
    },
    set_anchor4: function (a) {
      this.get_anchor4().set(a);
      return this.get_anchor4();
    },
    get_jointMin: function () {
      return this.zpp_inner_zn.jointMin;
    },
    set_jointMin: function (a) {
      this.zpp_inner.immutable_midstep("PulleyJoint::jointMin");
      this.get_jointMin() != a &&
        ((this.zpp_inner_zn.jointMin = a), this.zpp_inner.wake());
      return this.get_jointMin();
    },
    get_jointMax: function () {
      return this.zpp_inner_zn.jointMax;
    },
    set_jointMax: function (a) {
      this.zpp_inner.immutable_midstep("PulleyJoint::jointMax");
      this.get_jointMax() != a &&
        ((this.zpp_inner_zn.jointMax = a), this.zpp_inner.wake());
      return this.get_jointMax();
    },
    get_ratio: function () {
      return this.zpp_inner_zn.ratio;
    },
    set_ratio: function (a) {
      this.zpp_inner.immutable_midstep("PulleyJoint::ratio");
      this.get_ratio() != a &&
        ((this.zpp_inner_zn.ratio = a), this.zpp_inner.wake());
      return this.get_ratio();
    },
    bodyImpulse: function (a) {
      return this.get_active()
        ? this.zpp_inner_zn.bodyImpulse(a.zpp_inner)
        : W.get();
    },
    __class__: qj,
    __properties__: v(bb.prototype.__properties__, {
      set_ratio: "set_ratio",
      get_ratio: "get_ratio",
      set_jointMax: "set_jointMax",
      get_jointMax: "get_jointMax",
      set_jointMin: "set_jointMin",
      get_jointMin: "get_jointMin",
      set_anchor4: "set_anchor4",
      get_anchor4: "get_anchor4",
      set_anchor3: "set_anchor3",
      get_anchor3: "get_anchor3",
      set_anchor2: "set_anchor2",
      get_anchor2: "get_anchor2",
      set_anchor1: "set_anchor1",
      get_anchor1: "get_anchor1",
      set_body4: "set_body4",
      get_body4: "get_body4",
      set_body3: "set_body3",
      get_body3: "get_body3",
      set_body2: "set_body2",
      get_body2: "get_body2",
      set_body1: "set_body1",
      get_body1: "get_body1",
    }),
  });
  var rj = function (a, b) {
    null == b && (b = !1);
    this.zpp_inner = this.zpp_inner_zn = new Fh(a, b);
    this.zpp_inner.outer = this;
    this.zpp_inner_zn.outer_zn = this;
    bb.call(this);
  };
  l["nape.constraint.UserConstraint"] = rj;
  rj.__name__ = ["nape", "constraint", "UserConstraint"];
  rj.__super__ = bb;
  rj.prototype = v(bb.prototype, {
    zpp_inner_zn: null,
    __broken: function () {},
    __validate: function () {},
    __prepare: function () {},
    __position: function (a) {},
    __velocity: function (a) {},
    __eff_mass: function (a) {},
    __clamp: function (a) {},
    __impulse: function (a, b, c) {},
    bodyImpulse: function (a) {
      return this.get_active()
        ? this.zpp_inner_zn.bodyImpulse(a.zpp_inner)
        : W.get();
    },
    __class__: rj,
  });
  var Xf = function (a, b, c, d, e) {
    null == e && (e = 0);
    this.zpp_inner = this.zpp_inner_zn = new Gh();
    this.zpp_inner.outer = this;
    this.zpp_inner_zn.outer_zn = this;
    bb.call(this);
    this.set_body1(a);
    this.set_body2(b);
    this.set_anchor1(c);
    this.set_anchor2(d);
    this.set_phase(e);
  };
  l["nape.constraint.WeldJoint"] = Xf;
  Xf.__name__ = ["nape", "constraint", "WeldJoint"];
  Xf.__super__ = bb;
  Xf.prototype = v(bb.prototype, {
    zpp_inner_zn: null,
    get_body1: function () {
      return null == this.zpp_inner_zn.b1 ? null : this.zpp_inner_zn.b1.outer;
    },
    set_body1: function (a) {
      this.zpp_inner.immutable_midstep("Constraint::body1");
      a = null == a ? null : a.zpp_inner;
      a != this.zpp_inner_zn.b1 &&
        (null != this.zpp_inner_zn.b1 &&
          (null != this.get_space() &&
            this.zpp_inner_zn.b2 != this.zpp_inner_zn.b1 &&
            null != this.zpp_inner_zn.b1 &&
            this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),
          this.get_active() &&
            null != this.get_space() &&
            this.zpp_inner_zn.b1.wake()),
        (this.zpp_inner_zn.b1 = a),
        null != this.get_space() &&
          null != a &&
          this.zpp_inner_zn.b2 != a &&
          null != a &&
          a.constraints.add(this.zpp_inner),
        this.get_active() &&
          null != this.get_space() &&
          (this.zpp_inner.wake(), null != a && a.wake()));
      return this.get_body1();
    },
    get_body2: function () {
      return null == this.zpp_inner_zn.b2 ? null : this.zpp_inner_zn.b2.outer;
    },
    set_body2: function (a) {
      this.zpp_inner.immutable_midstep("Constraint::body2");
      a = null == a ? null : a.zpp_inner;
      a != this.zpp_inner_zn.b2 &&
        (null != this.zpp_inner_zn.b2 &&
          (null != this.get_space() &&
            this.zpp_inner_zn.b1 != this.zpp_inner_zn.b2 &&
            null != this.zpp_inner_zn.b2 &&
            this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),
          this.get_active() &&
            null != this.get_space() &&
            this.zpp_inner_zn.b2.wake()),
        (this.zpp_inner_zn.b2 = a),
        null != this.get_space() &&
          null != a &&
          this.zpp_inner_zn.b1 != a &&
          null != a &&
          a.constraints.add(this.zpp_inner),
        this.get_active() &&
          null != this.get_space() &&
          (this.zpp_inner.wake(), null != a && a.wake()));
      return this.get_body2();
    },
    get_anchor1: function () {
      null == this.zpp_inner_zn.wrap_a1 && this.zpp_inner_zn.setup_a1();
      return this.zpp_inner_zn.wrap_a1;
    },
    set_anchor1: function (a) {
      this.get_anchor1().set(a);
      return this.get_anchor1();
    },
    get_anchor2: function () {
      null == this.zpp_inner_zn.wrap_a2 && this.zpp_inner_zn.setup_a2();
      return this.zpp_inner_zn.wrap_a2;
    },
    set_anchor2: function (a) {
      this.get_anchor2().set(a);
      return this.get_anchor2();
    },
    get_phase: function () {
      return this.zpp_inner_zn.phase;
    },
    set_phase: function (a) {
      this.zpp_inner.immutable_midstep("WeldJoint::phase");
      this.get_phase() != a &&
        ((this.zpp_inner_zn.phase = a), this.zpp_inner.wake());
      return this.get_phase();
    },
    bodyImpulse: function (a) {
      return this.get_active()
        ? this.zpp_inner_zn.bodyImpulse(a.zpp_inner)
        : W.get();
    },
    __class__: Xf,
    __properties__: v(bb.prototype.__properties__, {
      set_phase: "set_phase",
      get_phase: "get_phase",
      set_anchor2: "set_anchor2",
      get_anchor2: "get_anchor2",
      set_anchor1: "set_anchor1",
      get_anchor1: "get_anchor1",
      set_body2: "set_body2",
      get_body2: "get_body2",
      set_body1: "set_body1",
      get_body1: "get_body1",
    }),
  });
  var ef = function () {
    this.zpp_inner = null;
  };
  l["nape.dynamics.Arbiter"] = ef;
  ef.__name__ = ["nape", "dynamics", "Arbiter"];
  ef.prototype = {
    zpp_inner: null,
    isCollisionArbiter: function () {
      return this.zpp_inner.type == Ua.COL;
    },
    isFluidArbiter: function () {
      return this.zpp_inner.type == Ua.FLUID;
    },
    get_collisionArbiter: function () {
      return this.isCollisionArbiter() ? this.zpp_inner.colarb.outer_zn : null;
    },
    get_shape1: function () {
      return this.zpp_inner.ws1.id > this.zpp_inner.ws2.id
        ? this.zpp_inner.ws2.outer
        : this.zpp_inner.ws1.outer;
    },
    get_shape2: function () {
      return this.zpp_inner.ws1.id > this.zpp_inner.ws2.id
        ? this.zpp_inner.ws1.outer
        : this.zpp_inner.ws2.outer;
    },
    get_body1: function () {
      return this.zpp_inner.ws1.id > this.zpp_inner.ws2.id
        ? this.zpp_inner.b2.outer
        : this.zpp_inner.b1.outer;
    },
    get_body2: function () {
      return this.zpp_inner.ws1.id > this.zpp_inner.ws2.id
        ? this.zpp_inner.b1.outer
        : this.zpp_inner.b2.outer;
    },
    get_state: function () {
      var a = this.zpp_inner.immState;
      return 5 == a
        ? gb.get_ACCEPT()
        : 1 == a
        ? gb.get_ACCEPT_ONCE()
        : 6 == a
        ? gb.get_IGNORE()
        : gb.get_IGNORE_ONCE();
    },
    totalImpulse: function (a, b) {
      return W.get(0, 0, 0);
    },
    toString: function () {
      var a = this.isCollisionArbiter()
        ? "CollisionArbiter"
        : this.isFluidArbiter()
        ? "FluidArbiter"
        : "SensorArbiter";
      return this.zpp_inner.cleared
        ? a + "(object-pooled)"
        : a +
            "(" +
            this.get_shape1().toString() +
            "|" +
            this.get_shape2().toString() +
            ")" +
            (this.isCollisionArbiter()
              ? "[" + ["SD", "DD"][this.zpp_inner.colarb.stat ? 0 : 1] + "]"
              : "") +
            "<-" +
            this.get_state().toString();
    },
    __class__: ef,
    __properties__: {
      get_state: "get_state",
      get_body2: "get_body2",
      get_body1: "get_body1",
      get_shape2: "get_shape2",
      get_shape1: "get_shape1",
      get_collisionArbiter: "get_collisionArbiter",
    },
  };
  var Gd = function () {
    this.zpp_next = null;
    this.zpp_critical = !1;
    this.zpp_i = 0;
    this.zpp_inner = null;
  };
  l["nape.dynamics.ArbiterIterator"] = Gd;
  Gd.__name__ = ["nape", "dynamics", "ArbiterIterator"];
  Gd.get = function (a) {
    if (null == Gd.zpp_pool) {
      var b = new Gd();
      zf.internal = !1;
    } else (b = Gd.zpp_pool), (Gd.zpp_pool = b.zpp_next);
    b.zpp_i = 0;
    b.zpp_inner = a;
    b.zpp_critical = !1;
    return b;
  };
  Gd.prototype = {
    zpp_inner: null,
    zpp_i: null,
    zpp_critical: null,
    zpp_next: null,
    hasNext: function () {
      this.zpp_inner.zpp_inner.valmod();
      var a = this.zpp_inner.get_length();
      this.zpp_critical = !0;
      if (this.zpp_i < a) return !0;
      this.zpp_next = Gd.zpp_pool;
      Gd.zpp_pool = this;
      this.zpp_inner = null;
      return !1;
    },
    next: function () {
      this.zpp_critical = !1;
      return this.zpp_inner.at(this.zpp_i++);
    },
    __class__: Gd,
  };
  var ag = function () {
    this.zpp_inner = new zf();
    this.zpp_inner.outer = this;
  };
  l["nape.dynamics.ArbiterList"] = ag;
  ag.__name__ = ["nape", "dynamics", "ArbiterList"];
  ag.prototype = {
    zpp_inner: null,
    get_length: function () {
      return this.zpp_gl();
    },
    zpp_gl: function () {
      this.zpp_inner.valmod();
      if (this.zpp_inner.zip_length) {
        this.zpp_inner.zip_length = !1;
        this.zpp_inner.user_length = 0;
        for (var a = this.zpp_inner.inner.begin(); null != a; )
          a.elem().active && this.zpp_inner.user_length++, (a = a.next);
      }
      return this.zpp_inner.user_length;
    },
    zpp_vm: function () {
      this.zpp_inner.valmod();
    },
    at: function (a) {
      this.zpp_vm();
      this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a);
      if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite)
        for (
          this.zpp_inner.at_index = 0,
            this.zpp_inner.at_ite = this.zpp_inner.inner.begin();
          !this.zpp_inner.at_ite.elem().active;

        )
          this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
      for (; this.zpp_inner.at_index != a; )
        for (
          this.zpp_inner.at_index++,
            this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
          !this.zpp_inner.at_ite.elem().active;

        )
          this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
      return this.zpp_inner.at_ite.elem().wrapper();
    },
    iterator: function () {
      this.zpp_vm();
      return Gd.get(this);
    },
    toString: function () {
      for (var a = "[", b = !0, c = this.iterator(); c.hasNext(); ) {
        var d = c.next();
        b || (a += ",");
        a += null == d ? "NULL" : d.toString();
        b = !1;
      }
      return a + "]";
    },
    foreach: function (a) {
      for (var b = this.iterator(); b.hasNext(); )
        try {
          a(b.next());
        } catch (c) {
          ta.lastException = c;
          b.zpp_next = Gd.zpp_pool;
          Gd.zpp_pool = b;
          b.zpp_inner = null;
          break;
        }
      return this;
    },
    __class__: ag,
    __properties__: { get_length: "get_length" },
  };
  var Hd = function () {};
  l["nape.dynamics.ArbiterType"] = Hd;
  Hd.__name__ = ["nape", "dynamics", "ArbiterType"];
  Hd.__properties__ = {
    get_FLUID: "get_FLUID",
    get_SENSOR: "get_SENSOR",
    get_COLLISION: "get_COLLISION",
  };
  Hd.get_COLLISION = function () {
    null == z.ArbiterType_COLLISION &&
      ((z.ArbiterType_COLLISION = new Hd()), (z.internal = !1));
    return z.ArbiterType_COLLISION;
  };
  Hd.get_SENSOR = function () {
    null == z.ArbiterType_SENSOR &&
      ((z.ArbiterType_SENSOR = new Hd()), (z.internal = !1));
    return z.ArbiterType_SENSOR;
  };
  Hd.get_FLUID = function () {
    null == z.ArbiterType_FLUID &&
      ((z.ArbiterType_FLUID = new Hd()), (z.internal = !1));
    return z.ArbiterType_FLUID;
  };
  Hd.prototype = {
    toString: function () {
      return this == Hd.get_COLLISION()
        ? "COLLISION"
        : this == Hd.get_SENSOR()
        ? "SENSOR"
        : this == Hd.get_FLUID()
        ? "FLUID"
        : "";
    },
    __class__: Hd,
  };
  var Hh = function () {
    this.zpp_inner = null;
  };
  l["nape.dynamics.CollisionArbiter"] = Hh;
  Hh.__name__ = ["nape", "dynamics", "CollisionArbiter"];
  Hh.__super__ = ef;
  Hh.prototype = v(ef.prototype, {
    normalImpulse: function (a, b) {
      null == b && (b = !1);
      var c = 0,
        d = 0,
        e = 0,
        f = this.zpp_inner.colarb;
      if (!b || f.oc1.fresh) {
        var g = f.oc1.wrapper().normalImpulse(a);
        c += 1 * g.get_x();
        d += 1 * g.get_y();
        e += 1 * g.get_z();
        g.dispose();
      }
      !f.hc2 ||
        (b && !f.oc2.fresh) ||
        ((a = f.oc2.wrapper().normalImpulse(a)),
        (c += 1 * a.get_x()),
        (d += 1 * a.get_y()),
        (e += 1 * a.get_z()),
        a.dispose());
      return W.get(c, d, e);
    },
    totalImpulse: function (a, b) {
      null == b && (b = !1);
      var c = 0,
        d = 0,
        e = 0,
        f = this.zpp_inner.colarb;
      if (!b || f.oc1.fresh) {
        var g = f.oc1.wrapper().totalImpulse(a);
        c += 1 * g.get_x();
        d += 1 * g.get_y();
        e += 1 * g.get_z();
        g.dispose();
      }
      !f.hc2 ||
        (b && !f.oc2.fresh) ||
        ((a = f.oc2.wrapper().totalImpulse(a)),
        (c += 1 * a.get_x()),
        (d += 1 * a.get_y()),
        (e += 1 * a.get_z()),
        a.dispose());
      return W.get(c, d, e);
    },
    __class__: Hh,
  });
  var sj = function () {
    this.zpp_inner = null;
  };
  l["nape.dynamics.Contact"] = sj;
  sj.__name__ = ["nape", "dynamics", "Contact"];
  sj.prototype = {
    zpp_inner: null,
    normalImpulse: function (a) {
      var b = this.zpp_inner.arbiter.colarb,
        c = this.zpp_inner.inner,
        d = c.jnAcc;
      return null == a
        ? W.get(b.nx * d, b.ny * d)
        : a == b.b1.outer
        ? W.get(b.nx * -d, b.ny * -d, -(b.ny * c.r1x - b.nx * c.r1y) * d)
        : W.get(b.nx * d, b.ny * d, (b.ny * c.r2x - b.nx * c.r2y) * d);
    },
    totalImpulse: function (a) {
      var b = this.zpp_inner.arbiter.colarb,
        c = this.zpp_inner.inner,
        d = c.jnAcc,
        e = c.jtAcc,
        f = b.jrAcc;
      if (null == a) return W.get(b.nx * d - b.ny * e, b.ny * d + b.nx * e, f);
      var g = b.nx * d - b.ny * e;
      d = b.ny * d + b.nx * e;
      return a == b.b1.outer
        ? W.get(-g, -d, -(d * c.r1x - g * c.r1y) - f)
        : W.get(g, d, d * c.r2x - g * c.r2y + f);
    },
    toString: function () {
      return null == this.zpp_inner.arbiter || this.zpp_inner.arbiter.cleared
        ? "{object-pooled}"
        : "{Contact}";
    },
    __class__: sj,
  };
  var Ne = function () {
    this.zpp_next = null;
    this.zpp_critical = !1;
    this.zpp_i = 0;
    this.zpp_inner = null;
  };
  l["nape.dynamics.ContactIterator"] = Ne;
  Ne.__name__ = ["nape", "dynamics", "ContactIterator"];
  Ne.get = function (a) {
    if (null == Ne.zpp_pool) {
      var b = new Ne();
      tg.internal = !1;
    } else (b = Ne.zpp_pool), (Ne.zpp_pool = b.zpp_next);
    b.zpp_i = 0;
    b.zpp_inner = a;
    b.zpp_critical = !1;
    return b;
  };
  Ne.prototype = {
    zpp_inner: null,
    zpp_i: null,
    zpp_critical: null,
    zpp_next: null,
    hasNext: function () {
      this.zpp_inner.zpp_inner.valmod();
      var a = this.zpp_inner.get_length();
      this.zpp_critical = !0;
      if (this.zpp_i < a) return !0;
      this.zpp_next = Ne.zpp_pool;
      Ne.zpp_pool = this;
      this.zpp_inner = null;
      return !1;
    },
    next: function () {
      this.zpp_critical = !1;
      return this.zpp_inner.at(this.zpp_i++);
    },
    __class__: Ne,
  };
  var Kk = function () {
    this.zpp_inner = new tg();
    this.zpp_inner.outer = this;
  };
  l["nape.dynamics.ContactList"] = Kk;
  Kk.__name__ = ["nape", "dynamics", "ContactList"];
  Kk.prototype = {
    zpp_inner: null,
    get_length: function () {
      this.zpp_inner.valmod();
      if (this.zpp_inner.zip_length) {
        this.zpp_inner.zip_length = !1;
        this.zpp_inner.user_length = 0;
        for (var a = this.zpp_inner.inner.begin(); null != a; ) {
          var b = a.elem();
          b.active && b.arbiter.active && this.zpp_inner.user_length++;
          a = a.next;
        }
      }
      return this.zpp_inner.user_length;
    },
    at: function (a) {
      this.zpp_inner.valmod();
      this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a);
      if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite)
        for (
          this.zpp_inner.at_index = 0,
            this.zpp_inner.at_ite = this.zpp_inner.inner.begin();
          ;

        ) {
          var b = this.zpp_inner.at_ite.elem();
          if (b.active && b.arbiter.active) break;
          this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
        }
      for (; this.zpp_inner.at_index != a; )
        for (
          this.zpp_inner.at_index++,
            this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
          ;

        ) {
          b = this.zpp_inner.at_ite.elem();
          if (b.active && b.arbiter.active) break;
          this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
        }
      return this.zpp_inner.at_ite.elem().wrapper();
    },
    iterator: function () {
      this.zpp_inner.valmod();
      return Ne.get(this);
    },
    toString: function () {
      for (var a = "[", b = !0, c = this.iterator(); c.hasNext(); ) {
        var d = c.next();
        b || (a += ",");
        a += null == d ? "NULL" : d.toString();
        b = !1;
      }
      return a + "]";
    },
    __class__: Kk,
    __properties__: { get_length: "get_length" },
  };
  var Ih = function () {
    this.zpp_inner = null;
  };
  l["nape.dynamics.FluidArbiter"] = Ih;
  Ih.__name__ = ["nape", "dynamics", "FluidArbiter"];
  Ih.__super__ = ef;
  Ih.prototype = v(ef.prototype, {
    buoyancyImpulse: function (a) {
      var b = this.zpp_inner.fluidarb;
      return null == a
        ? W.get(b.buoyx, b.buoyy, 0)
        : a.zpp_inner == this.zpp_inner.b2
        ? W.get(b.buoyx, b.buoyy, b.buoyy * b.r2x - b.buoyx * b.r2y)
        : W.get(-b.buoyx, -b.buoyy, -(b.buoyy * b.r1x - b.buoyx * b.r1y));
    },
    dragImpulse: function (a) {
      var b = this.zpp_inner.fluidarb;
      a = null == a || a.zpp_inner == this.zpp_inner.b2 ? 1 : -1;
      return W.get(b.dampx * a, b.dampy * a, b.adamp * a);
    },
    totalImpulse: function (a, b) {
      b = this.buoyancyImpulse(a);
      a = this.dragImpulse(a);
      a.set_x(a.get_x() + b.get_x());
      a.set_y(a.get_y() + b.get_y());
      a.set_z(a.get_z() + b.get_z());
      b.dispose();
      return a;
    },
    __class__: Ih,
  });
  var Lk = function (a) {
    null == a && (a = !1);
    this.zpp_inner = new tj();
    this.zpp_inner.outer = this;
    this.set_ignore(a);
  };
  l["nape.dynamics.InteractionGroup"] = Lk;
  Lk.__name__ = ["nape", "dynamics", "InteractionGroup"];
  Lk.prototype = {
    zpp_inner: null,
    get_ignore: function () {
      return this.zpp_inner.ignore;
    },
    set_ignore: function (a) {
      this.get_ignore() != a &&
        (this.zpp_inner.invalidate(!0), (this.zpp_inner.ignore = a));
      return this.get_ignore();
    },
    toString: function () {
      var a = "InteractionGroup";
      this.get_ignore() && (a += ":ignore");
      return a;
    },
    __class__: Lk,
    __properties__: { set_ignore: "set_ignore", get_ignore: "get_ignore" },
  };
  var ff = function () {
    this.zpp_next = null;
    this.zpp_critical = !1;
    this.zpp_i = 0;
    this.zpp_inner = null;
  };
  l["nape.dynamics.InteractionGroupIterator"] = ff;
  ff.__name__ = ["nape", "dynamics", "InteractionGroupIterator"];
  ff.get = function (a) {
    if (null == ff.zpp_pool) {
      var b = new ff();
      ug.internal = !1;
    } else (b = ff.zpp_pool), (ff.zpp_pool = b.zpp_next);
    b.zpp_i = 0;
    b.zpp_inner = a;
    b.zpp_critical = !1;
    return b;
  };
  ff.prototype = {
    zpp_inner: null,
    zpp_i: null,
    zpp_critical: null,
    zpp_next: null,
    hasNext: function () {
      this.zpp_inner.zpp_inner.valmod();
      var a = this.zpp_inner.get_length();
      this.zpp_critical = !0;
      if (this.zpp_i < a) return !0;
      this.zpp_next = ff.zpp_pool;
      ff.zpp_pool = this;
      this.zpp_inner = null;
      return !1;
    },
    next: function () {
      this.zpp_critical = !1;
      return this.zpp_inner.at(this.zpp_i++);
    },
    __class__: ff,
  };
  var Mk = function () {
    this.zpp_inner = new ug();
    this.zpp_inner.outer = this;
  };
  l["nape.dynamics.InteractionGroupList"] = Mk;
  Mk.__name__ = ["nape", "dynamics", "InteractionGroupList"];
  Mk.prototype = {
    zpp_inner: null,
    get_length: function () {
      this.zpp_inner.valmod();
      this.zpp_inner.zip_length &&
        ((this.zpp_inner.zip_length = !1),
        (this.zpp_inner.user_length = this.zpp_inner.inner.length));
      return this.zpp_inner.user_length;
    },
    at: function (a) {
      this.zpp_inner.valmod();
      this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a);
      if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite)
        (this.zpp_inner.at_index = a),
          (this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a));
      else
        for (; this.zpp_inner.at_index != a; )
          this.zpp_inner.at_index++,
            (this.zpp_inner.at_ite = this.zpp_inner.at_ite.next);
      return this.zpp_inner.at_ite.elem().outer;
    },
    iterator: function () {
      this.zpp_inner.valmod();
      return ff.get(this);
    },
    toString: function () {
      for (var a = "[", b = !0, c = this.iterator(); c.hasNext(); ) {
        var d = c.next();
        b || (a += ",");
        a += null == d ? "NULL" : d.toString();
        b = !1;
      }
      return a + "]";
    },
    __class__: Mk,
    __properties__: { get_length: "get_length" },
  };
  var Nk = function (a, b, c, d) {
    null == d && (d = 0);
    null == c && (c = 0);
    null == b && (b = 0);
    null == a && (a = 0);
    this.zpp_inner = null;
    this.zpp_inner = jc.get(a, b, a + c, b + d);
    this.zpp_inner.outer = this;
  };
  l["nape.geom.AABB"] = Nk;
  Nk.__name__ = ["nape", "geom", "AABB"];
  Nk.prototype = {
    zpp_inner: null,
    toString: function () {
      this.zpp_inner.validate();
      return this.zpp_inner.toString();
    },
    __class__: Nk,
  };
  var Ok = function () {
    this.zpp_inner = null;
  };
  l["nape.geom.ConvexResult"] = Ok;
  Ok.__name__ = ["nape", "geom", "ConvexResult"];
  Ok.prototype = {
    zpp_inner: null,
    get_toi: function () {
      return this.zpp_inner.toiDistance;
    },
    get_shape: function () {
      return this.zpp_inner.shape;
    },
    toString: function () {
      return (
        "{ shape: " +
        u.string(this.get_shape()) +
        " toi: " +
        this.get_toi() +
        " }"
      );
    },
    __class__: Ok,
    __properties__: { get_shape: "get_shape", get_toi: "get_toi" },
  };
  var Oe = function () {
    this.zpp_next = null;
    this.zpp_critical = !1;
    this.zpp_i = 0;
    this.zpp_inner = null;
  };
  l["nape.geom.ConvexResultIterator"] = Oe;
  Oe.__name__ = ["nape", "geom", "ConvexResultIterator"];
  Oe.get = function (a) {
    if (null == Oe.zpp_pool) {
      var b = new Oe();
      vg.internal = !1;
    } else (b = Oe.zpp_pool), (Oe.zpp_pool = b.zpp_next);
    b.zpp_i = 0;
    b.zpp_inner = a;
    b.zpp_critical = !1;
    return b;
  };
  Oe.prototype = {
    zpp_inner: null,
    zpp_i: null,
    zpp_critical: null,
    zpp_next: null,
    hasNext: function () {
      this.zpp_inner.zpp_inner.valmod();
      var a = this.zpp_inner.get_length();
      this.zpp_critical = !0;
      if (this.zpp_i < a) return !0;
      this.zpp_next = Oe.zpp_pool;
      Oe.zpp_pool = this;
      this.zpp_inner = null;
      return !1;
    },
    next: function () {
      this.zpp_critical = !1;
      return this.zpp_inner.at(this.zpp_i++);
    },
    __class__: Oe,
  };
  var Pk = function () {
    this.zpp_inner = new vg();
    this.zpp_inner.outer = this;
  };
  l["nape.geom.ConvexResultList"] = Pk;
  Pk.__name__ = ["nape", "geom", "ConvexResultList"];
  Pk.prototype = {
    zpp_inner: null,
    get_length: function () {
      this.zpp_inner.valmod();
      this.zpp_inner.zip_length &&
        ((this.zpp_inner.zip_length = !1),
        (this.zpp_inner.user_length = this.zpp_inner.inner.length));
      return this.zpp_inner.user_length;
    },
    at: function (a) {
      this.zpp_inner.valmod();
      this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a);
      if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite)
        (this.zpp_inner.at_index = a),
          (this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a));
      else
        for (; this.zpp_inner.at_index != a; )
          this.zpp_inner.at_index++,
            (this.zpp_inner.at_ite = this.zpp_inner.at_ite.next);
      return this.zpp_inner.at_ite.elem();
    },
    iterator: function () {
      this.zpp_inner.valmod();
      return Oe.get(this);
    },
    toString: function () {
      for (var a = "[", b = !0, c = this.iterator(); c.hasNext(); ) {
        var d = c.next();
        b || (a += ",");
        a += null == d ? "NULL" : d.toString();
        b = !1;
      }
      return a + "]";
    },
    __class__: Pk,
    __properties__: { get_length: "get_length" },
  };
  var Af = function (a) {
    this.zpp_pool = this.zpp_inner = null;
    this.zpp_inner = new uj(this);
    if (null != a) {
      if (a instanceof Array && null == a.__enum__)
        for (var b = 0; b < a.length; ) {
          var c = a[b];
          ++b;
          c = kc.get(c.get_x(), c.get_y());
          null == this.zpp_inner.vertices
            ? (this.zpp_inner.vertices = c.prev = c.next = c)
            : ((c.prev = this.zpp_inner.vertices),
              (c.next = this.zpp_inner.vertices.next),
              (this.zpp_inner.vertices.next.prev = c),
              (this.zpp_inner.vertices.next = c));
          this.zpp_inner.vertices = c;
        }
      else if (u.is(a, Rb))
        for (b = a.iterator(); b.hasNext(); )
          (c = b.next()),
            (c = kc.get(c.get_x(), c.get_y())),
            null == this.zpp_inner.vertices
              ? (this.zpp_inner.vertices = c.prev = c.next = c)
              : ((c.prev = this.zpp_inner.vertices),
                (c.next = this.zpp_inner.vertices.next),
                (this.zpp_inner.vertices.next.prev = c),
                (this.zpp_inner.vertices.next = c)),
            (this.zpp_inner.vertices = c);
      else if (u.is(a, Af) && ((b = a.zpp_inner.vertices), null != b))
        for (c = b; ; ) {
          var d = w.get(c.x, c.y);
          c = c.next;
          var e = kc.get(d.get_x(), d.get_y());
          null == this.zpp_inner.vertices
            ? (this.zpp_inner.vertices = e.prev = e.next = e)
            : ((e.prev = this.zpp_inner.vertices),
              (e.next = this.zpp_inner.vertices.next),
              (this.zpp_inner.vertices.next.prev = e),
              (this.zpp_inner.vertices.next = e));
          this.zpp_inner.vertices = e;
          d.dispose();
          if (c == b) break;
        }
      this.skipForward(1);
      if (a instanceof Array && null == a.__enum__)
        for (b = 0; b < a.length; )
          (c = a[b]),
            c.zpp_inner.weak ? (c.dispose(), (c = !0)) : (c = !1),
            c ? a.splice(b, 1) : ++b;
      else if (u.is(a, Rb))
        for (
          null != a.zpp_inner._validate && a.zpp_inner._validate(),
            a = a.zpp_inner.inner,
            b = null,
            c = a.begin();
          null != c;

        )
          (d = c.elem()),
            d.outer.zpp_inner.weak
              ? ((c = a.erase(b)), d.outer.zpp_inner.weak && d.outer.dispose())
              : ((b = c), (c = c.next));
    }
  };
  l["nape.geom.GeomPoly"] = Af;
  Af.__name__ = ["nape", "geom", "GeomPoly"];
  Af.get = function (a) {
    if (null == od.poolGeomPoly) var b = new Af();
    else
      (b = od.poolGeomPoly),
        (od.poolGeomPoly = b.zpp_pool),
        (b.zpp_pool = null);
    if (null != a) {
      if (a instanceof Array && null == a.__enum__)
        for (var c = 0; c < a.length; ) {
          var d = a[c];
          ++c;
          d = kc.get(d.get_x(), d.get_y());
          null == b.zpp_inner.vertices
            ? (b.zpp_inner.vertices = d.prev = d.next = d)
            : ((d.prev = b.zpp_inner.vertices),
              (d.next = b.zpp_inner.vertices.next),
              (b.zpp_inner.vertices.next.prev = d),
              (b.zpp_inner.vertices.next = d));
          b.zpp_inner.vertices = d;
        }
      else if (u.is(a, Rb))
        for (c = a.iterator(); c.hasNext(); )
          (d = c.next()),
            (d = kc.get(d.get_x(), d.get_y())),
            null == b.zpp_inner.vertices
              ? (b.zpp_inner.vertices = d.prev = d.next = d)
              : ((d.prev = b.zpp_inner.vertices),
                (d.next = b.zpp_inner.vertices.next),
                (b.zpp_inner.vertices.next.prev = d),
                (b.zpp_inner.vertices.next = d)),
            (b.zpp_inner.vertices = d);
      else if (u.is(a, Af) && ((c = a.zpp_inner.vertices), null != c))
        for (d = c; ; ) {
          var e = w.get(d.x, d.y);
          d = d.next;
          var f = kc.get(e.get_x(), e.get_y());
          null == b.zpp_inner.vertices
            ? (b.zpp_inner.vertices = f.prev = f.next = f)
            : ((f.prev = b.zpp_inner.vertices),
              (f.next = b.zpp_inner.vertices.next),
              (b.zpp_inner.vertices.next.prev = f),
              (b.zpp_inner.vertices.next = f));
          b.zpp_inner.vertices = f;
          e.dispose();
          if (d == c) break;
        }
      b.skipForward(1);
      if (a instanceof Array && null == a.__enum__)
        for (c = 0; c < a.length; )
          (d = a[c]),
            d.zpp_inner.weak ? (d.dispose(), (d = !0)) : (d = !1),
            d ? a.splice(c, 1) : ++c;
      else if (u.is(a, Rb))
        for (
          null != a.zpp_inner._validate && a.zpp_inner._validate(),
            a = a.zpp_inner.inner,
            c = null,
            d = a.begin();
          null != d;

        )
          (e = d.elem()),
            e.outer.zpp_inner.weak
              ? ((d = a.erase(c)), e.outer.zpp_inner.weak && e.outer.dispose())
              : ((c = d), (d = d.next));
    }
    return b;
  };
  Af.prototype = {
    zpp_pool: null,
    zpp_inner: null,
    skipForward: function (a) {
      if (null != this.zpp_inner.vertices)
        if (0 < a)
          for (; 0 < a--; )
            this.zpp_inner.vertices = this.zpp_inner.vertices.next;
        else if (0 > a)
          for (; 0 > a++; )
            this.zpp_inner.vertices = this.zpp_inner.vertices.prev;
      return this;
    },
    toString: function () {
      var a = "GeomPoly[",
        b = this.zpp_inner.vertices,
        c = this.zpp_inner.vertices;
      if (null != b)
        for (;;) {
          var d = b;
          d != this.zpp_inner.vertices && (a += ",");
          a += "{" + d.x + "," + d.y + "}";
          b = b.next;
          if (b == c) break;
        }
      return a + "]";
    },
    __class__: Af,
  };
  var oe = function () {
    this.zpp_next = null;
    this.zpp_critical = !1;
    this.zpp_i = 0;
    this.zpp_inner = null;
  };
  l["nape.geom.GeomPolyIterator"] = oe;
  oe.__name__ = ["nape", "geom", "GeomPolyIterator"];
  oe.get = function (a) {
    if (null == oe.zpp_pool) {
      var b = new oe();
      yg.internal = !1;
    } else (b = oe.zpp_pool), (oe.zpp_pool = b.zpp_next);
    b.zpp_i = 0;
    b.zpp_inner = a;
    b.zpp_critical = !1;
    return b;
  };
  oe.prototype = {
    zpp_inner: null,
    zpp_i: null,
    zpp_critical: null,
    zpp_next: null,
    hasNext: function () {
      this.zpp_inner.zpp_inner.valmod();
      var a = this.zpp_inner.get_length();
      this.zpp_critical = !0;
      if (this.zpp_i < a) return !0;
      this.zpp_next = oe.zpp_pool;
      oe.zpp_pool = this;
      this.zpp_inner = null;
      return !1;
    },
    next: function () {
      this.zpp_critical = !1;
      return this.zpp_inner.at(this.zpp_i++);
    },
    __class__: oe,
  };
  var Qk = function () {
    this.zpp_inner = new yg();
    this.zpp_inner.outer = this;
  };
  l["nape.geom.GeomPolyList"] = Qk;
  Qk.__name__ = ["nape", "geom", "GeomPolyList"];
  Qk.prototype = {
    zpp_inner: null,
    get_length: function () {
      this.zpp_inner.valmod();
      this.zpp_inner.zip_length &&
        ((this.zpp_inner.zip_length = !1),
        (this.zpp_inner.user_length = this.zpp_inner.inner.length));
      return this.zpp_inner.user_length;
    },
    at: function (a) {
      this.zpp_inner.valmod();
      this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a);
      if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite)
        (this.zpp_inner.at_index = a),
          (this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a));
      else
        for (; this.zpp_inner.at_index != a; )
          this.zpp_inner.at_index++,
            (this.zpp_inner.at_ite = this.zpp_inner.at_ite.next);
      return this.zpp_inner.at_ite.elem().outer;
    },
    iterator: function () {
      this.zpp_inner.valmod();
      return oe.get(this);
    },
    toString: function () {
      for (var a = "[", b = !0, c = this.iterator(); c.hasNext(); ) {
        var d = c.next();
        b || (a += ",");
        a += null == d ? "NULL" : d.toString();
        b = !1;
      }
      return a + "]";
    },
    __class__: Qk,
    __properties__: { get_length: "get_length" },
  };
  var Rk = function (a, b, c, d, e, f) {
    null == f && (f = 0);
    null == e && (e = 0);
    null == d && (d = 1);
    null == c && (c = 0);
    null == b && (b = 0);
    null == a && (a = 1);
    this.zpp_inner = null;
    this.zpp_inner = Bf.get();
    this.zpp_inner.outer = this;
    this.set_a(a);
    this.set_b(b);
    this.set_tx(e);
    this.set_c(c);
    this.set_d(d);
    this.set_ty(f);
  };
  l["nape.geom.Mat23"] = Rk;
  Rk.__name__ = ["nape", "geom", "Mat23"];
  Rk.prototype = {
    zpp_inner: null,
    get_a: function () {
      return this.zpp_inner.a;
    },
    set_a: function (a) {
      this.zpp_inner.a = a;
      this.zpp_inner.invalidate();
      return this.get_a();
    },
    get_b: function () {
      return this.zpp_inner.b;
    },
    set_b: function (a) {
      this.zpp_inner.b = a;
      this.zpp_inner.invalidate();
      return this.get_b();
    },
    get_c: function () {
      return this.zpp_inner.c;
    },
    set_c: function (a) {
      this.zpp_inner.c = a;
      this.zpp_inner.invalidate();
      return this.get_c();
    },
    get_d: function () {
      return this.zpp_inner.d;
    },
    set_d: function (a) {
      this.zpp_inner.d = a;
      this.zpp_inner.invalidate();
      return this.get_d();
    },
    get_tx: function () {
      return this.zpp_inner.tx;
    },
    set_tx: function (a) {
      this.zpp_inner.tx = a;
      this.zpp_inner.invalidate();
      return this.get_tx();
    },
    get_ty: function () {
      return this.zpp_inner.ty;
    },
    set_ty: function (a) {
      this.zpp_inner.ty = a;
      this.zpp_inner.invalidate();
      return this.get_ty();
    },
    toString: function () {
      return (
        "{ a: " +
        this.get_a() +
        " b: " +
        this.get_b() +
        " c: " +
        this.get_c() +
        " d: " +
        this.get_d() +
        " tx: " +
        this.get_tx() +
        " ty: " +
        this.get_ty() +
        " }"
      );
    },
    __class__: Rk,
    __properties__: {
      set_ty: "set_ty",
      get_ty: "get_ty",
      set_tx: "set_tx",
      get_tx: "get_tx",
      set_d: "set_d",
      get_d: "get_d",
      set_c: "set_c",
      get_c: "get_c",
      set_b: "set_b",
      get_b: "get_b",
      set_a: "set_a",
      get_a: "get_a",
    },
  };
  var Sk = function (a, b) {
    this.zpp_inner = new vj(a, b);
    this.zpp_inner.outer = this;
  };
  l["nape.geom.MatMN"] = Sk;
  Sk.__name__ = ["nape", "geom", "MatMN"];
  Sk.prototype = {
    zpp_inner: null,
    get_rows: function () {
      return this.zpp_inner.m;
    },
    get_cols: function () {
      return this.zpp_inner.n;
    },
    x: function (a, b) {
      return this.zpp_inner.x[a * this.get_cols() + b];
    },
    toString: function () {
      for (var a = "{ ", b = !0, c = 0, d = this.get_rows(); c < d; ) {
        var e = c++;
        b || (a += "; ");
        b = !1;
        for (var f = 0, g = this.get_cols(); f < g; ) {
          var h = f++;
          a += this.x(e, h) + " ";
        }
      }
      return a + "}";
    },
    __class__: Sk,
    __properties__: { get_cols: "get_cols", get_rows: "get_rows" },
  };
  var Tk = function () {
    this.zpp_inner = null;
  };
  l["nape.geom.RayResult"] = Tk;
  Tk.__name__ = ["nape", "geom", "RayResult"];
  Tk.prototype = {
    zpp_inner: null,
    get_distance: function () {
      return this.zpp_inner.toiDistance;
    },
    get_inner: function () {
      return this.zpp_inner.inner;
    },
    get_shape: function () {
      return this.zpp_inner.shape;
    },
    toString: function () {
      return (
        "{ shape: " +
        u.string(this.get_shape()) +
        " distance: " +
        this.get_distance() +
        " ?inner: " +
        u.string(this.get_inner()) +
        " }"
      );
    },
    __class__: Tk,
    __properties__: {
      get_shape: "get_shape",
      get_inner: "get_inner",
      get_distance: "get_distance",
    },
  };
  var Zb = function () {
    this.zpp_next = null;
    this.zpp_critical = !1;
    this.zpp_i = 0;
    this.zpp_inner = null;
  };
  l["nape.geom.RayResultIterator"] = Zb;
  Zb.__name__ = ["nape", "geom", "RayResultIterator"];
  Zb.get = function (a) {
    if (null == Zb.zpp_pool) {
      var b = new Zb();
      zg.internal = !1;
    } else (b = Zb.zpp_pool), (Zb.zpp_pool = b.zpp_next);
    b.zpp_i = 0;
    b.zpp_inner = a;
    b.zpp_critical = !1;
    return b;
  };
  Zb.prototype = {
    zpp_inner: null,
    zpp_i: null,
    zpp_critical: null,
    zpp_next: null,
    hasNext: function () {
      this.zpp_inner.zpp_inner.valmod();
      var a = this.zpp_inner.get_length();
      this.zpp_critical = !0;
      if (this.zpp_i < a) return !0;
      this.zpp_next = Zb.zpp_pool;
      Zb.zpp_pool = this;
      this.zpp_inner = null;
      return !1;
    },
    next: function () {
      this.zpp_critical = !1;
      return this.zpp_inner.at(this.zpp_i++);
    },
    __class__: Zb,
  };
  var Uk = function () {
    this.zpp_inner = new zg();
    this.zpp_inner.outer = this;
  };
  l["nape.geom.RayResultList"] = Uk;
  Uk.__name__ = ["nape", "geom", "RayResultList"];
  Uk.prototype = {
    zpp_inner: null,
    get_length: function () {
      this.zpp_inner.valmod();
      this.zpp_inner.zip_length &&
        ((this.zpp_inner.zip_length = !1),
        (this.zpp_inner.user_length = this.zpp_inner.inner.length));
      return this.zpp_inner.user_length;
    },
    at: function (a) {
      this.zpp_inner.valmod();
      this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a);
      if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite)
        (this.zpp_inner.at_index = a),
          (this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a));
      else
        for (; this.zpp_inner.at_index != a; )
          this.zpp_inner.at_index++,
            (this.zpp_inner.at_ite = this.zpp_inner.at_ite.next);
      return this.zpp_inner.at_ite.elem();
    },
    iterator: function () {
      this.zpp_inner.valmod();
      return Zb.get(this);
    },
    toString: function () {
      for (var a = "[", b = !0, c = this.iterator(); c.hasNext(); ) {
        var d = c.next();
        b || (a += ",");
        a += null == d ? "NULL" : d.toString();
        b = !1;
      }
      return a + "]";
    },
    __class__: Uk,
    __properties__: { get_length: "get_length" },
  };
  var gf = function () {
    this.zpp_next = null;
    this.zpp_critical = !1;
    this.zpp_i = 0;
    this.zpp_inner = null;
  };
  l["nape.geom.Vec2Iterator"] = gf;
  gf.__name__ = ["nape", "geom", "Vec2Iterator"];
  gf.get = function (a) {
    if (null == gf.zpp_pool) {
      var b = new gf();
      Ag.internal = !1;
    } else (b = gf.zpp_pool), (gf.zpp_pool = b.zpp_next);
    b.zpp_i = 0;
    b.zpp_inner = a;
    b.zpp_critical = !1;
    return b;
  };
  gf.prototype = {
    zpp_inner: null,
    zpp_i: null,
    zpp_critical: null,
    zpp_next: null,
    hasNext: function () {
      this.zpp_inner.zpp_inner.valmod();
      var a = this.zpp_inner.get_length();
      this.zpp_critical = !0;
      if (this.zpp_i < a) return !0;
      this.zpp_next = gf.zpp_pool;
      gf.zpp_pool = this;
      this.zpp_inner = null;
      return !1;
    },
    next: function () {
      this.zpp_critical = !1;
      return this.zpp_inner.at(this.zpp_i++);
    },
    __class__: gf,
  };
  var Rb = function () {
    this.zpp_inner = new Ag();
    this.zpp_inner.outer = this;
  };
  l["nape.geom.Vec2List"] = Rb;
  Rb.__name__ = ["nape", "geom", "Vec2List"];
  Rb.fromArray = function (a) {
    for (var b = new Rb(), c = 0; c < a.length; ) {
      var d = a[c];
      ++c;
      b.push(d);
    }
    return b;
  };
  Rb.prototype = {
    zpp_inner: null,
    get_length: function () {
      return this.zpp_gl();
    },
    zpp_gl: function () {
      this.zpp_inner.valmod();
      this.zpp_inner.zip_length &&
        ((this.zpp_inner.zip_length = !1),
        (this.zpp_inner.user_length = this.zpp_inner.inner.length));
      return this.zpp_inner.user_length;
    },
    zpp_vm: function () {
      this.zpp_inner.valmod();
    },
    at: function (a) {
      this.zpp_vm();
      this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a);
      if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite)
        (this.zpp_inner.at_index = a),
          (this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a));
      else
        for (; this.zpp_inner.at_index != a; )
          this.zpp_inner.at_index++,
            (this.zpp_inner.at_ite = this.zpp_inner.at_ite.next);
      return this.zpp_inner.at_ite.elem().wrapper();
    },
    push: function (a) {
      this.zpp_inner.modify_test();
      this.zpp_vm();
      var b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0;
      if (b) {
        if (this.zpp_inner.reverse_flag) this.zpp_inner.inner.add(a.zpp_inner);
        else {
          if (null == this.zpp_inner.push_ite) {
            var c = this.empty()
              ? null
              : this.zpp_inner.inner.iterator_at(this.get_length() - 1);
            this.zpp_inner.push_ite = c;
          }
          this.zpp_inner.push_ite = this.zpp_inner.inner.insert(
            this.zpp_inner.push_ite,
            a.zpp_inner
          );
        }
        this.zpp_inner.invalidate();
        null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
      }
      return b;
    },
    empty: function () {
      return 0 == this.get_length();
    },
    iterator: function () {
      this.zpp_vm();
      return gf.get(this);
    },
    toString: function () {
      for (var a = "[", b = !0, c = this.iterator(); c.hasNext(); ) {
        var d = c.next();
        b || (a += ",");
        a += null == d ? "NULL" : d.toString();
        b = !1;
      }
      return a + "]";
    },
    __class__: Rb,
    __properties__: { get_length: "get_length" },
  };
  var W = function (a, b, c) {
    null == c && (c = 0);
    null == b && (b = 0);
    null == a && (a = 0);
    this.zpp_pool = null;
    this.zpp_inner = new wj();
    this.zpp_inner.outer = this;
    this.set_x(a);
    this.set_y(b);
    this.set_z(c);
  };
  l["nape.geom.Vec3"] = W;
  W.__name__ = ["nape", "geom", "Vec3"];
  W.get = function (a, b, c) {
    null == c && (c = 0);
    null == b && (b = 0);
    null == a && (a = 0);
    if (null == od.poolVec3) var d = new W();
    else (d = od.poolVec3), (od.poolVec3 = d.zpp_pool), (d.zpp_pool = null);
    d.setxyz(a, b, c);
    d.zpp_inner.immutable = !1;
    d.zpp_inner._validate = null;
    return d;
  };
  W.prototype = {
    zpp_inner: null,
    zpp_pool: null,
    get_x: function () {
      this.zpp_inner.validate();
      return this.zpp_inner.x;
    },
    set_x: function (a) {
      this.zpp_inner.x = a;
      return this.get_x();
    },
    get_y: function () {
      this.zpp_inner.validate();
      return this.zpp_inner.y;
    },
    set_y: function (a) {
      this.zpp_inner.y = a;
      return this.get_y();
    },
    get_z: function () {
      this.zpp_inner.validate();
      return this.zpp_inner.z;
    },
    set_z: function (a) {
      this.zpp_inner.z = a;
      return this.get_z();
    },
    dispose: function () {
      this.zpp_pool = od.poolVec3;
      od.poolVec3 = this;
    },
    setxyz: function (a, b, c) {
      this.set_x(a);
      this.set_y(b);
      this.set_z(c);
      return this;
    },
    xy: function (a) {
      null == a && (a = !1);
      return w.get(this.get_x(), this.get_y(), a);
    },
    toString: function () {
      return (
        "{ x: " +
        this.get_x() +
        " y: " +
        this.get_y() +
        " z: " +
        this.get_z() +
        " }"
      );
    },
    __class__: W,
    __properties__: {
      set_z: "set_z",
      get_z: "get_z",
      set_y: "set_y",
      get_y: "get_y",
      set_x: "set_x",
      get_x: "get_x",
    },
  };
  var sd = function () {};
  l["nape.geom.Winding"] = sd;
  sd.__name__ = ["nape", "geom", "Winding"];
  sd.__properties__ = {
    get_ANTICLOCKWISE: "get_ANTICLOCKWISE",
    get_CLOCKWISE: "get_CLOCKWISE",
    get_UNDEFINED: "get_UNDEFINED",
  };
  sd.get_UNDEFINED = function () {
    null == z.Winding_UNDEFINED &&
      ((z.Winding_UNDEFINED = new sd()), (z.internal = !1));
    return z.Winding_UNDEFINED;
  };
  sd.get_CLOCKWISE = function () {
    null == z.Winding_CLOCKWISE &&
      ((z.Winding_CLOCKWISE = new sd()), (z.internal = !1));
    return z.Winding_CLOCKWISE;
  };
  sd.get_ANTICLOCKWISE = function () {
    null == z.Winding_ANTICLOCKWISE &&
      ((z.Winding_ANTICLOCKWISE = new sd()), (z.internal = !1));
    return z.Winding_ANTICLOCKWISE;
  };
  sd.prototype = {
    toString: function () {
      return this == sd.get_UNDEFINED()
        ? "UNDEFINED"
        : this == sd.get_CLOCKWISE()
        ? "CLOCKWISE"
        : this == sd.get_ANTICLOCKWISE()
        ? "ANTICLOCKWISE"
        : "";
    },
    __class__: sd,
  };
  var Fc = function () {
    this.zpp_inner_i = null;
  };
  l["nape.phys.Interactor"] = Fc;
  Fc.__name__ = ["nape", "phys", "Interactor"];
  Fc.prototype = {
    zpp_inner_i: null,
    get_id: function () {
      return this.zpp_inner_i.id;
    },
    get_userData: function () {
      null == this.zpp_inner_i.userData && (this.zpp_inner_i.userData = {});
      return this.zpp_inner_i.userData;
    },
    get_cbTypes: function () {
      null == this.zpp_inner_i.wrap_cbTypes && this.zpp_inner_i.setupcbTypes();
      return this.zpp_inner_i.wrap_cbTypes;
    },
    toString: function () {
      return "";
    },
    __class__: Fc,
    __properties__: {
      get_cbTypes: "get_cbTypes",
      get_userData: "get_userData",
      get_id: "get_id",
    },
  };
  var Ra = function (a, b) {
    this.zpp_inner_i = this.graphic = null;
    this.zpp_inner = new hf();
    this.zpp_inner.outer = this;
    this.zpp_inner.outer_i = this;
    this.zpp_inner_i = this.zpp_inner;
    this.graphicOffset = new w(0, 0);
    null != b
      ? ((this.zpp_inner.posx = b.get_x()), (this.zpp_inner.posy = b.get_y()))
      : ((this.zpp_inner.posx = 0), (this.zpp_inner.posy = 0));
    this.set_type(null == a ? oa.get_DYNAMIC() : a);
    null != b && b.zpp_inner.weak && b.dispose();
    this.zpp_inner_i.insert_cbtype(za.get_ANY_BODY().zpp_inner);
  };
  l["nape.phys.Body"] = Ra;
  Ra.__name__ = ["nape", "phys", "Body"];
  Ra.__super__ = Fc;
  Ra.prototype = v(Fc.prototype, {
    zpp_inner: null,
    graphic: null,
    graphicOffset: null,
    get_type: function () {
      return hf.types[this.zpp_inner.type];
    },
    set_type: function (a) {
      this.zpp_inner.immutable_midstep("Body::type");
      this.get_type() != a &&
        ((a = a == oa.get_DYNAMIC() ? 2 : a == oa.get_KINEMATIC() ? 3 : 1),
        1 == a &&
          null != this.zpp_inner.space &&
          ((this.zpp_inner.velx = 0),
          (this.zpp_inner.vely = 0),
          (this.zpp_inner.angvel = 0)),
        this.zpp_inner.invalidate_type(),
        null != this.zpp_inner.space
          ? this.zpp_inner.space.transmitType(this.zpp_inner, a)
          : (this.zpp_inner.type = a));
      return this.get_type();
    },
    isStatic: function () {
      return this.zpp_inner.isStatic();
    },
    isDynamic: function () {
      return this.zpp_inner.isDynamic();
    },
    get_shapes: function () {
      return this.zpp_inner.wrap_shapes;
    },
    get_space: function () {
      return null == this.zpp_inner.space ? null : this.zpp_inner.space.outer;
    },
    set_space: function (a) {
      this.zpp_inner.immutable_midstep("Body::space");
      this.get_space() != a &&
        (null != this.get_space() && (this.zpp_inner.component.woken = !1),
        null != this.get_space() && this.get_space().get_bodies().remove(this),
        null != a && a.get_bodies().add(this));
      return this.get_space();
    },
    get_arbiters: function () {
      null == this.zpp_inner.wrap_arbiters &&
        (this.zpp_inner.wrap_arbiters = zf.get(this.zpp_inner.arbiters, !0));
      return this.zpp_inner.wrap_arbiters;
    },
    get_isSleeping: function () {
      return this.zpp_inner.component.sleeping;
    },
    get_constraints: function () {
      null == this.zpp_inner.wrap_constraints &&
        (this.zpp_inner.wrap_constraints = rd.get(
          this.zpp_inner.constraints,
          !0
        ));
      return this.zpp_inner.wrap_constraints;
    },
    get_position: function () {
      null == this.zpp_inner.wrap_pos && this.zpp_inner.setupPosition();
      return this.zpp_inner.wrap_pos;
    },
    get_velocity: function () {
      null == this.zpp_inner.wrap_vel && this.zpp_inner.setupVelocity();
      return this.zpp_inner.wrap_vel;
    },
    get_rotation: function () {
      return this.zpp_inner.rot;
    },
    set_rotation: function (a) {
      this.zpp_inner.immutable_midstep("Body::rotation");
      this.get_rotation() != a &&
        ((this.zpp_inner.rot = a),
        this.zpp_inner.invalidate_rot(),
        this.zpp_inner.wake());
      return this.get_rotation();
    },
    get_angularVel: function () {
      return this.zpp_inner.angvel;
    },
    set_angularVel: function (a) {
      this.get_angularVel() != a &&
        ((this.zpp_inner.angvel = a), this.zpp_inner.invalidate_wake());
      return this.get_angularVel();
    },
    get_allowMovement: function () {
      return !this.zpp_inner.nomove;
    },
    set_allowMovement: function (a) {
      this.zpp_inner.immutable_midstep(
        "Body::" + (null == a ? "null" : "" + a)
      );
      this.get_allowMovement() != a &&
        ((this.zpp_inner.nomove = !a), this.zpp_inner.invalidate_mass());
      return this.get_allowMovement();
    },
    get_allowRotation: function () {
      return !this.zpp_inner.norotate;
    },
    set_allowRotation: function (a) {
      this.zpp_inner.immutable_midstep(
        "Body::" + (null == a ? "null" : "" + a)
      );
      this.get_allowRotation() != a &&
        ((this.zpp_inner.norotate = !a), this.zpp_inner.invalidate_inertia());
      return this.get_allowRotation();
    },
    get_gravMass: function () {
      this.zpp_inner.validate_gravMass();
      return this.zpp_inner.gravMass;
    },
    set_gravMass: function (a) {
      this.zpp_inner.immutable_midstep("Body::gravMass");
      this.zpp_inner.gravMassMode = 1;
      this.zpp_inner.gravMass = a;
      this.zpp_inner.invalidate_gravMass();
      return this.get_gravMass();
    },
    localPointToWorld: function (a, b) {
      null == b && (b = !1);
      this.zpp_inner.validate_axis();
      var c =
        this.zpp_inner.axisy * a.get_x() - this.zpp_inner.axisx * a.get_y();
      var d =
        a.get_x() * this.zpp_inner.axisx + a.get_y() * this.zpp_inner.axisy;
      a.zpp_inner.weak && a.dispose();
      return w.get(c + this.zpp_inner.posx, d + this.zpp_inner.posy, b);
    },
    worldPointToLocal: function (a, b) {
      null == b && (b = !1);
      this.zpp_inner.validate_axis();
      var c = a.get_x() - this.zpp_inner.posx;
      var d = a.get_y() - this.zpp_inner.posy;
      var e = c * this.zpp_inner.axisy + d * this.zpp_inner.axisx;
      c = d * this.zpp_inner.axisy - c * this.zpp_inner.axisx;
      a.zpp_inner.weak && a.dispose();
      return w.get(e, c, b);
    },
    localVectorToWorld: function (a, b) {
      null == b && (b = !1);
      this.zpp_inner.validate_axis();
      var c =
        this.zpp_inner.axisy * a.get_x() - this.zpp_inner.axisx * a.get_y();
      var d =
        a.get_x() * this.zpp_inner.axisx + a.get_y() * this.zpp_inner.axisy;
      a.zpp_inner.weak && a.dispose();
      return w.get(c, d, b);
    },
    applyImpulse: function (a, b, c) {
      null == c && (c = !1);
      if (c && this.get_isSleeping())
        return (
          a.zpp_inner.weak && a.dispose(),
          null != b && b.zpp_inner.weak && b.dispose(),
          this
        );
      this.zpp_inner.validate_mass();
      var d = this.zpp_inner.imass;
      this.zpp_inner.velx += a.get_x() * d;
      this.zpp_inner.vely += a.get_y() * d;
      if (null != b) {
        d = b.get_x() - this.zpp_inner.posx;
        var e = b.get_y() - this.zpp_inner.posy;
        this.zpp_inner.validate_inertia();
        this.zpp_inner.angvel +=
          (a.get_y() * d - a.get_x() * e) * this.zpp_inner.iinertia;
        b.zpp_inner.weak && b.dispose();
      }
      c || (this.isDynamic() && this.zpp_inner.invalidate_wake());
      a.zpp_inner.weak && a.dispose();
      return this;
    },
    translateShapes: function (a) {
      this.zpp_inner.immutable_midstep("Body::translateShapes()");
      var b = a.zpp_inner.weak;
      a.zpp_inner.weak = !1;
      for (var c = this.zpp_inner.shapes.begin(); null != c; )
        c.elem().outer.translate(a), (c = c.next);
      a.zpp_inner.weak = b;
      a.zpp_inner.weak && a.dispose();
      return this;
    },
    align: function () {
      this.zpp_inner.immutable_midstep("Body::align()");
      this.zpp_inner.validate_localCOM();
      var a = w.get(-this.zpp_inner.localCOMx, -this.zpp_inner.localCOMy);
      this.translateShapes(a);
      var b = this.localVectorToWorld(a);
      this.get_position().subeq(b);
      this.zpp_inner.pre_posx < sb.POSINF() &&
        ((this.zpp_inner.pre_posx -= 1 * b.get_x()),
        (this.zpp_inner.pre_posy -= 1 * b.get_y()));
      a.dispose();
      b.dispose();
      return this;
    },
    setShapeMaterials: function (a) {
      this.zpp_inner.immutable_midstep("Body::setShapeMaterials()");
      for (var b = this.zpp_inner.shapes.begin(); null != b; )
        b.elem().outer.set_material(a), (b = b.next);
      return this;
    },
    get_localCOM: function () {
      null == this.zpp_inner.wrap_localCOM &&
        ((this.zpp_inner.wrap_localCOM = w.get(
          this.zpp_inner.localCOMx,
          this.zpp_inner.localCOMy
        )),
        (this.zpp_inner.wrap_localCOM.zpp_inner._inuse = !0),
        (this.zpp_inner.wrap_localCOM.zpp_inner._immutable = !0),
        (this.zpp_inner.wrap_localCOM.zpp_inner._validate =
          ((Ya = this.zpp_inner), m(Ya, Ya.getlocalCOM))));
      return this.zpp_inner.wrap_localCOM;
    },
    normalImpulse: function (a, b) {
      null == b && (b = !1);
      for (
        var c = 0, d = 0, e = 0, f = this.get_arbiters().iterator();
        f.hasNext();

      ) {
        var g = f.next().zpp_inner;
        g.type != Ua.COL ||
          (null != a && g.b2 != a.zpp_inner && g.b1 != a.zpp_inner) ||
          ((g = g.wrapper().get_collisionArbiter().normalImpulse(this, b)),
          (c += 1 * g.get_x()),
          (d += 1 * g.get_y()),
          (e += 1 * g.get_z()),
          g.dispose());
      }
      return W.get(c, d, e);
    },
    toString: function () {
      return (
        (this.zpp_inner.world
          ? "(space::world"
          : "(" +
            (this.isDynamic()
              ? "dynamic"
              : this.isStatic()
              ? "static"
              : "kinematic")) +
        ")#" +
        this.get_id()
      );
    },
    __class__: Ra,
    __properties__: v(Fc.prototype.__properties__, {
      get_localCOM: "get_localCOM",
      set_gravMass: "set_gravMass",
      get_gravMass: "get_gravMass",
      set_allowRotation: "set_allowRotation",
      get_allowRotation: "get_allowRotation",
      set_allowMovement: "set_allowMovement",
      get_allowMovement: "get_allowMovement",
      set_angularVel: "set_angularVel",
      get_angularVel: "get_angularVel",
      set_rotation: "set_rotation",
      get_rotation: "get_rotation",
      get_velocity: "get_velocity",
      get_position: "get_position",
      get_constraints: "get_constraints",
      get_isSleeping: "get_isSleeping",
      get_arbiters: "get_arbiters",
      set_space: "set_space",
      get_space: "get_space",
      get_shapes: "get_shapes",
      set_type: "set_type",
      get_type: "get_type",
    }),
  });
  var Id = function () {
    this.zpp_next = null;
    this.zpp_critical = !1;
    this.zpp_i = 0;
    this.zpp_inner = null;
  };
  l["nape.phys.BodyIterator"] = Id;
  Id.__name__ = ["nape", "phys", "BodyIterator"];
  Id.get = function (a) {
    if (null == Id.zpp_pool) {
      var b = new Id();
      pe.internal = !1;
    } else (b = Id.zpp_pool), (Id.zpp_pool = b.zpp_next);
    b.zpp_i = 0;
    b.zpp_inner = a;
    b.zpp_critical = !1;
    return b;
  };
  Id.prototype = {
    zpp_inner: null,
    zpp_i: null,
    zpp_critical: null,
    zpp_next: null,
    hasNext: function () {
      this.zpp_inner.zpp_inner.valmod();
      var a = this.zpp_inner.get_length();
      this.zpp_critical = !0;
      if (this.zpp_i < a) return !0;
      this.zpp_next = Id.zpp_pool;
      Id.zpp_pool = this;
      this.zpp_inner = null;
      return !1;
    },
    next: function () {
      this.zpp_critical = !1;
      return this.zpp_inner.at(this.zpp_i++);
    },
    __class__: Id,
  };
  var xj = function () {
    this.zpp_inner = new pe();
    this.zpp_inner.outer = this;
  };
  l["nape.phys.BodyList"] = xj;
  xj.__name__ = ["nape", "phys", "BodyList"];
  xj.prototype = {
    zpp_inner: null,
    get_length: function () {
      this.zpp_inner.valmod();
      this.zpp_inner.zip_length &&
        ((this.zpp_inner.zip_length = !1),
        (this.zpp_inner.user_length = this.zpp_inner.inner.length));
      return this.zpp_inner.user_length;
    },
    at: function (a) {
      this.zpp_inner.valmod();
      this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a);
      if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite)
        (this.zpp_inner.at_index = a),
          (this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a));
      else
        for (; this.zpp_inner.at_index != a; )
          this.zpp_inner.at_index++,
            (this.zpp_inner.at_ite = this.zpp_inner.at_ite.next);
      return this.zpp_inner.at_ite.elem().outer;
    },
    push: function (a) {
      this.zpp_inner.modify_test();
      this.zpp_inner.valmod();
      var b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0;
      if (b) {
        if (this.zpp_inner.reverse_flag) this.zpp_inner.inner.add(a.zpp_inner);
        else {
          if (null == this.zpp_inner.push_ite) {
            var c = this.empty()
              ? null
              : this.zpp_inner.inner.iterator_at(this.get_length() - 1);
            this.zpp_inner.push_ite = c;
          }
          this.zpp_inner.push_ite = this.zpp_inner.inner.insert(
            this.zpp_inner.push_ite,
            a.zpp_inner
          );
        }
        this.zpp_inner.invalidate();
        null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
      }
      return b;
    },
    unshift: function (a) {
      this.zpp_inner.modify_test();
      this.zpp_inner.valmod();
      var b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0;
      if (b) {
        if (this.zpp_inner.reverse_flag) {
          if (null == this.zpp_inner.push_ite) {
            var c = this.empty()
              ? null
              : this.zpp_inner.inner.iterator_at(this.get_length() - 1);
            this.zpp_inner.push_ite = c;
          }
          this.zpp_inner.push_ite = this.zpp_inner.inner.insert(
            this.zpp_inner.push_ite,
            a.zpp_inner
          );
        } else this.zpp_inner.inner.add(a.zpp_inner);
        this.zpp_inner.invalidate();
        null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
      }
      return b;
    },
    pop: function () {
      this.zpp_inner.modify_test();
      this.zpp_inner.valmod();
      if (this.zpp_inner.reverse_flag) {
        var a = this.zpp_inner.inner.front();
        var b = a.outer;
        null != this.zpp_inner.subber && this.zpp_inner.subber(b);
        this.zpp_inner.dontremove || this.zpp_inner.inner.pop();
      } else {
        null != this.zpp_inner.at_ite &&
          null == this.zpp_inner.at_ite.next &&
          (this.zpp_inner.at_ite = null);
        b =
          1 == this.get_length()
            ? null
            : this.zpp_inner.inner.iterator_at(this.get_length() - 2);
        a = null == b ? this.zpp_inner.inner.front() : b.next.elem();
        var c = a.outer;
        null != this.zpp_inner.subber && this.zpp_inner.subber(c);
        this.zpp_inner.dontremove || this.zpp_inner.inner.erase(b);
      }
      this.zpp_inner.invalidate();
      return a.outer;
    },
    shift: function () {
      this.zpp_inner.modify_test();
      this.zpp_inner.valmod();
      if (this.zpp_inner.reverse_flag) {
        null != this.zpp_inner.at_ite &&
          null == this.zpp_inner.at_ite.next &&
          (this.zpp_inner.at_ite = null);
        var a =
          1 == this.get_length()
            ? null
            : this.zpp_inner.inner.iterator_at(this.get_length() - 2);
        var b = null == a ? this.zpp_inner.inner.front() : a.next.elem();
        var c = b.outer;
        null != this.zpp_inner.subber && this.zpp_inner.subber(c);
        this.zpp_inner.dontremove || this.zpp_inner.inner.erase(a);
      } else
        (b = this.zpp_inner.inner.front()),
          (a = b.outer),
          null != this.zpp_inner.subber && this.zpp_inner.subber(a),
          this.zpp_inner.dontremove || this.zpp_inner.inner.pop();
      this.zpp_inner.invalidate();
      return b.outer;
    },
    add: function (a) {
      return this.zpp_inner.reverse_flag ? this.push(a) : this.unshift(a);
    },
    remove: function (a) {
      this.zpp_inner.modify_test();
      this.zpp_inner.valmod();
      var b = !1;
      for (var c = this.zpp_inner.inner.begin(); null != c; ) {
        if (c.elem() == a.zpp_inner) {
          b = !0;
          break;
        }
        c = c.next;
      }
      b &&
        (null != this.zpp_inner.subber && this.zpp_inner.subber(a),
        this.zpp_inner.dontremove || this.zpp_inner.inner.remove(a.zpp_inner),
        this.zpp_inner.invalidate());
      return b;
    },
    clear: function () {
      if (this.zpp_inner.reverse_flag) for (; !this.empty(); ) this.pop();
      else for (; !this.empty(); ) this.shift();
    },
    empty: function () {
      return this.zpp_inner.inner.empty();
    },
    iterator: function () {
      this.zpp_inner.valmod();
      return Id.get(this);
    },
    toString: function () {
      for (var a = "[", b = !0, c = this.iterator(); c.hasNext(); ) {
        var d = c.next();
        b || (a += ",");
        a += null == d ? "NULL" : d.toString();
        b = !1;
      }
      return a + "]";
    },
    __class__: xj,
    __properties__: { get_length: "get_length" },
  };
  var oa = function () {};
  l["nape.phys.BodyType"] = oa;
  oa.__name__ = ["nape", "phys", "BodyType"];
  oa.__properties__ = {
    get_KINEMATIC: "get_KINEMATIC",
    get_DYNAMIC: "get_DYNAMIC",
    get_STATIC: "get_STATIC",
  };
  oa.get_STATIC = function () {
    null == z.BodyType_STATIC &&
      ((z.BodyType_STATIC = new oa()), (z.internal = !1));
    return z.BodyType_STATIC;
  };
  oa.get_DYNAMIC = function () {
    null == z.BodyType_DYNAMIC &&
      ((z.BodyType_DYNAMIC = new oa()), (z.internal = !1));
    return z.BodyType_DYNAMIC;
  };
  oa.get_KINEMATIC = function () {
    null == z.BodyType_KINEMATIC &&
      ((z.BodyType_KINEMATIC = new oa()), (z.internal = !1));
    return z.BodyType_KINEMATIC;
  };
  oa.prototype = {
    toString: function () {
      return this == oa.get_STATIC()
        ? "STATIC"
        : this == oa.get_DYNAMIC()
        ? "DYNAMIC"
        : this == oa.get_KINEMATIC()
        ? "KINEMATIC"
        : "";
    },
    __class__: oa,
  };
  var yj = function () {
    this.zpp_inner_i = null;
    this.zpp_inner = new Jh();
    this.zpp_inner.outer = this;
    this.zpp_inner.outer_i = this;
    this.zpp_inner_i = this.zpp_inner;
    this.zpp_inner.insert_cbtype(za.get_ANY_COMPOUND().zpp_inner);
  };
  l["nape.phys.Compound"] = yj;
  yj.__name__ = ["nape", "phys", "Compound"];
  yj.__super__ = Fc;
  yj.prototype = v(Fc.prototype, {
    zpp_inner: null,
    toString: function () {
      return "Compound" + this.get_id();
    },
    __class__: yj,
  });
  var Jd = function () {
    this.zpp_next = null;
    this.zpp_critical = !1;
    this.zpp_i = 0;
    this.zpp_inner = null;
  };
  l["nape.phys.CompoundIterator"] = Jd;
  Jd.__name__ = ["nape", "phys", "CompoundIterator"];
  Jd.get = function (a) {
    if (null == Jd.zpp_pool) {
      var b = new Jd();
      jf.internal = !1;
    } else (b = Jd.zpp_pool), (Jd.zpp_pool = b.zpp_next);
    b.zpp_i = 0;
    b.zpp_inner = a;
    b.zpp_critical = !1;
    return b;
  };
  Jd.prototype = {
    zpp_inner: null,
    zpp_i: null,
    zpp_critical: null,
    zpp_next: null,
    hasNext: function () {
      this.zpp_inner.zpp_inner.valmod();
      var a = this.zpp_inner.get_length();
      this.zpp_critical = !0;
      if (this.zpp_i < a) return !0;
      this.zpp_next = Jd.zpp_pool;
      Jd.zpp_pool = this;
      this.zpp_inner = null;
      return !1;
    },
    next: function () {
      this.zpp_critical = !1;
      return this.zpp_inner.at(this.zpp_i++);
    },
    __class__: Jd,
  };
  var zj = function () {
    this.zpp_inner = new jf();
    this.zpp_inner.outer = this;
  };
  l["nape.phys.CompoundList"] = zj;
  zj.__name__ = ["nape", "phys", "CompoundList"];
  zj.prototype = {
    zpp_inner: null,
    get_length: function () {
      this.zpp_inner.valmod();
      this.zpp_inner.zip_length &&
        ((this.zpp_inner.zip_length = !1),
        (this.zpp_inner.user_length = this.zpp_inner.inner.length));
      return this.zpp_inner.user_length;
    },
    at: function (a) {
      this.zpp_inner.valmod();
      this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a);
      if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite)
        (this.zpp_inner.at_index = a),
          (this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a));
      else
        for (; this.zpp_inner.at_index != a; )
          this.zpp_inner.at_index++,
            (this.zpp_inner.at_ite = this.zpp_inner.at_ite.next);
      return this.zpp_inner.at_ite.elem().outer;
    },
    remove: function (a) {
      this.zpp_inner.modify_test();
      this.zpp_inner.valmod();
      var b = !1;
      for (var c = this.zpp_inner.inner.begin(); null != c; ) {
        if (c.elem() == a.zpp_inner) {
          b = !0;
          break;
        }
        c = c.next;
      }
      b &&
        (null != this.zpp_inner.subber && this.zpp_inner.subber(a),
        this.zpp_inner.dontremove || this.zpp_inner.inner.remove(a.zpp_inner),
        this.zpp_inner.invalidate());
      return b;
    },
    iterator: function () {
      this.zpp_inner.valmod();
      return Jd.get(this);
    },
    toString: function () {
      for (var a = "[", b = !0, c = this.iterator(); c.hasNext(); ) {
        var d = c.next();
        b || (a += ",");
        a += null == d ? "NULL" : d.toString();
        b = !1;
      }
      return a + "]";
    },
    __class__: zj,
    __properties__: { get_length: "get_length" },
  };
  var Vk = function (a, b) {
    null == b && (b = 1);
    null == a && (a = 1);
    this.zpp_inner = null;
    null == kf.zpp_pool
      ? (this.zpp_inner = new kf())
      : ((this.zpp_inner = kf.zpp_pool),
        (kf.zpp_pool = this.zpp_inner.next),
        (this.zpp_inner.next = null));
    this.zpp_inner.alloc();
    this.zpp_inner.outer = this;
    this.set_density(a);
    this.set_viscosity(b);
  };
  l["nape.phys.FluidProperties"] = Vk;
  Vk.__name__ = ["nape", "phys", "FluidProperties"];
  Vk.prototype = {
    zpp_inner: null,
    get_density: function () {
      return 1e3 * this.zpp_inner.density;
    },
    set_density: function (a) {
      a != this.get_density() &&
        ((this.zpp_inner.density = a / 1e3), this.zpp_inner.invalidate());
      return this.get_density();
    },
    get_viscosity: function () {
      return this.zpp_inner.viscosity;
    },
    set_viscosity: function (a) {
      a != this.get_viscosity() &&
        ((this.zpp_inner.viscosity = a / 1), this.zpp_inner.invalidate());
      return this.get_viscosity();
    },
    get_gravity: function () {
      return this.zpp_inner.wrap_gravity;
    },
    toString: function () {
      return (
        "{ density: " +
        this.get_density() +
        " viscosity: " +
        this.get_viscosity() +
        " gravity: " +
        u.string(this.get_gravity()) +
        " }"
      );
    },
    __class__: Vk,
    __properties__: {
      get_gravity: "get_gravity",
      set_viscosity: "set_viscosity",
      get_viscosity: "get_viscosity",
      set_density: "set_density",
      get_density: "get_density",
    },
  };
  var Kd = function () {};
  l["nape.phys.GravMassMode"] = Kd;
  Kd.__name__ = ["nape", "phys", "GravMassMode"];
  Kd.__properties__ = {
    get_SCALED: "get_SCALED",
    get_FIXED: "get_FIXED",
    get_DEFAULT: "get_DEFAULT",
  };
  Kd.get_DEFAULT = function () {
    null == z.GravMassMode_DEFAULT &&
      ((z.GravMassMode_DEFAULT = new Kd()), (z.internal = !1));
    return z.GravMassMode_DEFAULT;
  };
  Kd.get_FIXED = function () {
    null == z.GravMassMode_FIXED &&
      ((z.GravMassMode_FIXED = new Kd()), (z.internal = !1));
    return z.GravMassMode_FIXED;
  };
  Kd.get_SCALED = function () {
    null == z.GravMassMode_SCALED &&
      ((z.GravMassMode_SCALED = new Kd()), (z.internal = !1));
    return z.GravMassMode_SCALED;
  };
  Kd.prototype = {
    toString: function () {
      return this == Kd.get_DEFAULT()
        ? "DEFAULT"
        : this == Kd.get_FIXED()
        ? "FIXED"
        : this == Kd.get_SCALED()
        ? "SCALED"
        : "";
    },
    __class__: Kd,
  };
  var td = function () {};
  l["nape.phys.InertiaMode"] = td;
  td.__name__ = ["nape", "phys", "InertiaMode"];
  td.__properties__ = { get_FIXED: "get_FIXED", get_DEFAULT: "get_DEFAULT" };
  td.get_DEFAULT = function () {
    null == z.InertiaMode_DEFAULT &&
      ((z.InertiaMode_DEFAULT = new td()), (z.internal = !1));
    return z.InertiaMode_DEFAULT;
  };
  td.get_FIXED = function () {
    null == z.InertiaMode_FIXED &&
      ((z.InertiaMode_FIXED = new td()), (z.internal = !1));
    return z.InertiaMode_FIXED;
  };
  td.prototype = {
    toString: function () {
      return this == td.get_DEFAULT()
        ? "DEFAULT"
        : this == td.get_FIXED()
        ? "FIXED"
        : "";
    },
    __class__: td,
  };
  var Ld = function () {
    this.zpp_next = null;
    this.zpp_critical = !1;
    this.zpp_i = 0;
    this.zpp_inner = null;
  };
  l["nape.phys.InteractorIterator"] = Ld;
  Ld.__name__ = ["nape", "phys", "InteractorIterator"];
  Ld.get = function (a) {
    if (null == Ld.zpp_pool) {
      var b = new Ld();
      Bg.internal = !1;
    } else (b = Ld.zpp_pool), (Ld.zpp_pool = b.zpp_next);
    b.zpp_i = 0;
    b.zpp_inner = a;
    b.zpp_critical = !1;
    return b;
  };
  Ld.prototype = {
    zpp_inner: null,
    zpp_i: null,
    zpp_critical: null,
    zpp_next: null,
    hasNext: function () {
      this.zpp_inner.zpp_inner.valmod();
      var a = this.zpp_inner.get_length();
      this.zpp_critical = !0;
      if (this.zpp_i < a) return !0;
      this.zpp_next = Ld.zpp_pool;
      Ld.zpp_pool = this;
      this.zpp_inner = null;
      return !1;
    },
    next: function () {
      this.zpp_critical = !1;
      return this.zpp_inner.at(this.zpp_i++);
    },
    __class__: Ld,
  };
  var Wk = function () {
    this.zpp_inner = new Bg();
    this.zpp_inner.outer = this;
  };
  l["nape.phys.InteractorList"] = Wk;
  Wk.__name__ = ["nape", "phys", "InteractorList"];
  Wk.prototype = {
    zpp_inner: null,
    get_length: function () {
      this.zpp_inner.valmod();
      this.zpp_inner.zip_length &&
        ((this.zpp_inner.zip_length = !1),
        (this.zpp_inner.user_length = this.zpp_inner.inner.length));
      return this.zpp_inner.user_length;
    },
    at: function (a) {
      this.zpp_inner.valmod();
      this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a);
      if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite)
        (this.zpp_inner.at_index = a),
          (this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a));
      else
        for (; this.zpp_inner.at_index != a; )
          this.zpp_inner.at_index++,
            (this.zpp_inner.at_ite = this.zpp_inner.at_ite.next);
      return this.zpp_inner.at_ite.elem().outer_i;
    },
    iterator: function () {
      this.zpp_inner.valmod();
      return Ld.get(this);
    },
    toString: function () {
      for (var a = "[", b = !0, c = this.iterator(); c.hasNext(); ) {
        var d = c.next();
        b || (a += ",");
        a += null == d ? "NULL" : d.toString();
        b = !1;
      }
      return a + "]";
    },
    __class__: Wk,
    __properties__: { get_length: "get_length" },
  };
  var Md = function () {};
  l["nape.phys.MassMode"] = Md;
  Md.__name__ = ["nape", "phys", "MassMode"];
  Md.__properties__ = { get_FIXED: "get_FIXED", get_DEFAULT: "get_DEFAULT" };
  Md.get_DEFAULT = function () {
    null == z.MassMode_DEFAULT &&
      ((z.MassMode_DEFAULT = new Md()), (z.internal = !1));
    return z.MassMode_DEFAULT;
  };
  Md.get_FIXED = function () {
    null == z.MassMode_FIXED &&
      ((z.MassMode_FIXED = new Md()), (z.internal = !1));
    return z.MassMode_FIXED;
  };
  Md.prototype = {
    toString: function () {
      return this == Md.get_DEFAULT()
        ? "DEFAULT"
        : this == Md.get_FIXED()
        ? "FIXED"
        : "";
    },
    __class__: Md,
  };
  var Aa = function (a, b, c, d, e) {
    null == e && (e = 0.001);
    null == d && (d = 1);
    null == c && (c = 2);
    null == b && (b = 1);
    null == a && (a = 0);
    this.zpp_inner = null;
    null == Ja.zpp_pool
      ? (this.zpp_inner = new Ja())
      : ((this.zpp_inner = Ja.zpp_pool),
        (Ja.zpp_pool = this.zpp_inner.next),
        (this.zpp_inner.next = null));
    this.zpp_inner.alloc();
    this.zpp_inner.outer = this;
    this.set_elasticity(a);
    this.set_dynamicFriction(b);
    this.set_staticFriction(c);
    this.set_density(d);
    this.set_rollingFriction(e);
  };
  l["nape.phys.Material"] = Aa;
  Aa.__name__ = ["nape", "phys", "Material"];
  Aa.wood = function () {
    return new Aa(0.4, 0.2, 0.38, 0.7, 0.005);
  };
  Aa.steel = function () {
    return new Aa(0.2, 0.57, 0.74, 7.8, 0.001);
  };
  Aa.prototype = {
    zpp_inner: null,
    get_elasticity: function () {
      return this.zpp_inner.elasticity;
    },
    set_elasticity: function (a) {
      a != this.get_elasticity() &&
        ((this.zpp_inner.elasticity = a / 1),
        this.zpp_inner.invalidate(Ja.WAKE | Ja.ARBITERS));
      return this.get_elasticity();
    },
    get_dynamicFriction: function () {
      return this.zpp_inner.dynamicFriction;
    },
    set_dynamicFriction: function (a) {
      a != this.get_dynamicFriction() &&
        ((this.zpp_inner.dynamicFriction = a / 1),
        this.zpp_inner.invalidate(Ja.WAKE | Ja.ANGDRAG | Ja.ARBITERS));
      return this.get_dynamicFriction();
    },
    get_staticFriction: function () {
      return this.zpp_inner.staticFriction;
    },
    set_staticFriction: function (a) {
      a != this.get_staticFriction() &&
        ((this.zpp_inner.staticFriction = a / 1),
        this.zpp_inner.invalidate(Ja.WAKE | Ja.ARBITERS));
      return this.get_staticFriction();
    },
    get_density: function () {
      return 1e3 * this.zpp_inner.density;
    },
    set_density: function (a) {
      a != this.get_density() &&
        ((this.zpp_inner.density = a / 1e3),
        this.zpp_inner.invalidate(Ja.WAKE | Ja.PROPS));
      return this.get_density();
    },
    get_rollingFriction: function () {
      return this.zpp_inner.rollingFriction;
    },
    set_rollingFriction: function (a) {
      a != this.get_rollingFriction() &&
        ((this.zpp_inner.rollingFriction = a / 1),
        this.zpp_inner.invalidate(Ja.WAKE | Ja.ARBITERS));
      return this.get_rollingFriction();
    },
    toString: function () {
      return (
        "{ elasticity: " +
        this.get_elasticity() +
        " dynamicFriction: " +
        this.get_dynamicFriction() +
        " staticFriction: " +
        this.get_staticFriction() +
        " density: " +
        this.get_density() +
        " rollingFriction: " +
        this.get_rollingFriction() +
        " }"
      );
    },
    __class__: Aa,
    __properties__: {
      set_rollingFriction: "set_rollingFriction",
      get_rollingFriction: "get_rollingFriction",
      set_density: "set_density",
      get_density: "get_density",
      set_staticFriction: "set_staticFriction",
      get_staticFriction: "get_staticFriction",
      set_dynamicFriction: "set_dynamicFriction",
      get_dynamicFriction: "get_dynamicFriction",
      set_elasticity: "set_elasticity",
      get_elasticity: "get_elasticity",
    },
  };
  var Qc = function () {
    this.zpp_inner_i = this.zpp_inner = null;
  };
  l["nape.shape.Shape"] = Qc;
  Qc.__name__ = ["nape", "shape", "Shape"];
  Qc.__super__ = Fc;
  Qc.prototype = v(Fc.prototype, {
    zpp_inner: null,
    isCircle: function () {
      return this.zpp_inner.isCircle();
    },
    get_worldCOM: function () {
      null == this.zpp_inner.wrap_worldCOM &&
        ((this.zpp_inner.wrap_worldCOM = w.get(
          this.zpp_inner.worldCOMx,
          this.zpp_inner.worldCOMy
        )),
        (this.zpp_inner.wrap_worldCOM.zpp_inner._inuse = !0),
        (this.zpp_inner.wrap_worldCOM.zpp_inner._immutable = !0),
        (this.zpp_inner.wrap_worldCOM.zpp_inner._validate =
          ((Ya = this.zpp_inner), m(Ya, Ya.getworldCOM))));
      return this.zpp_inner.wrap_worldCOM;
    },
    get_material: function () {
      return this.zpp_inner.material.wrapper();
    },
    set_material: function (a) {
      this.zpp_inner.immutable_midstep("Shape::material");
      this.zpp_inner.setMaterial(a.zpp_inner);
      return this.get_material();
    },
    get_filter: function () {
      return this.zpp_inner.filter.wrapper();
    },
    set_filter: function (a) {
      this.zpp_inner.immutable_midstep("Shape::filter");
      this.zpp_inner.setFilter(a.zpp_inner);
      return this.get_filter();
    },
    translate: function (a) {
      this.zpp_inner.immutable_midstep("Shape::translate()");
      0 < a.lsq() &&
        (this.isCircle()
          ? this.zpp_inner.circle.__translate(a.get_x(), a.get_y())
          : this.zpp_inner.polygon.__translate(a.get_x(), a.get_y()));
      a.zpp_inner.weak && a.dispose();
      return this;
    },
    toString: function () {
      return (this.isCircle() ? "Circle" : "Polygon") + "#" + this.get_id();
    },
    __class__: Qc,
    __properties__: v(Fc.prototype.__properties__, {
      set_filter: "set_filter",
      get_filter: "get_filter",
      set_material: "set_material",
      get_material: "get_material",
      get_worldCOM: "get_worldCOM",
    }),
  });
  var Ub = function (a, b, c, d) {
    this.zpp_inner_zn = null;
    Qc.call(this);
    this.zpp_inner_zn = new Kh();
    this.zpp_inner_zn.outer = this;
    this.zpp_inner_zn.outer_zn = this;
    this.zpp_inner_i = this.zpp_inner = this.zpp_inner_zn;
    this.zpp_inner_i.outer_i = this;
    this.set_radius(a);
    null == b
      ? ((this.zpp_inner.localCOMx = 0), (this.zpp_inner.localCOMy = 0))
      : ((this.zpp_inner.localCOMx = b.get_x()),
        (this.zpp_inner.localCOMy = b.get_y()),
        b.zpp_inner.weak && b.dispose());
    null == c
      ? (null == Ja.zpp_pool
          ? (this.zpp_inner.material = new Ja())
          : ((this.zpp_inner.material = Ja.zpp_pool),
            (Ja.zpp_pool = this.zpp_inner.material.next),
            (this.zpp_inner.material.next = null)),
        this.zpp_inner.material.alloc())
      : this.set_material(c);
    null == d
      ? (null == fc.zpp_pool
          ? (this.zpp_inner.filter = new fc())
          : ((this.zpp_inner.filter = fc.zpp_pool),
            (fc.zpp_pool = this.zpp_inner.filter.next),
            (this.zpp_inner.filter.next = null)),
        this.zpp_inner.filter.alloc())
      : this.set_filter(d);
    this.zpp_inner_i.insert_cbtype(za.get_ANY_SHAPE().zpp_inner);
  };
  l["nape.shape.Circle"] = Ub;
  Ub.__name__ = ["nape", "shape", "Circle"];
  Ub.__super__ = Qc;
  Ub.prototype = v(Qc.prototype, {
    zpp_inner_zn: null,
    get_radius: function () {
      return this.zpp_inner_zn.radius;
    },
    set_radius: function (a) {
      this.zpp_inner.immutable_midstep("Circle::radius");
      a != this.get_radius() &&
        ((this.zpp_inner_zn.radius = a), this.zpp_inner_zn.invalidate_radius());
      return this.get_radius();
    },
    __class__: Ub,
    __properties__: v(Qc.prototype.__properties__, {
      set_radius: "set_radius",
      get_radius: "get_radius",
    }),
  });
  var Aj = function () {
    this.zpp_inner = null;
  };
  l["nape.shape.Edge"] = Aj;
  Aj.__name__ = ["nape", "shape", "Edge"];
  Aj.prototype = {
    zpp_inner: null,
    toString: function () {
      if (null == this.zpp_inner.polygon) return "Edge(object-pooled)";
      if (null == this.zpp_inner.polygon.body)
        return (
          this.zpp_inner.polygon.validate_laxi(),
          "{ localNormal : " +
            ("{ x: " +
              this.zpp_inner.lnormx +
              " y: " +
              this.zpp_inner.lnormy +
              " }") +
            " }"
        );
      this.zpp_inner.polygon.validate_gaxi();
      return (
        "{ localNormal : " +
        ("{ x: " +
          this.zpp_inner.lnormx +
          " y: " +
          this.zpp_inner.lnormy +
          " }") +
        " worldNormal : " +
        ("{ x: " +
          this.zpp_inner.gnormx +
          " y: " +
          this.zpp_inner.gnormy +
          " }") +
        " }"
      );
    },
    __class__: Aj,
  };
  var Nd = function () {
    this.zpp_next = null;
    this.zpp_critical = !1;
    this.zpp_i = 0;
    this.zpp_inner = null;
  };
  l["nape.shape.EdgeIterator"] = Nd;
  Nd.__name__ = ["nape", "shape", "EdgeIterator"];
  Nd.get = function (a) {
    if (null == Nd.zpp_pool) {
      var b = new Nd();
      Cg.internal = !1;
    } else (b = Nd.zpp_pool), (Nd.zpp_pool = b.zpp_next);
    b.zpp_i = 0;
    b.zpp_inner = a;
    b.zpp_critical = !1;
    return b;
  };
  Nd.prototype = {
    zpp_inner: null,
    zpp_i: null,
    zpp_critical: null,
    zpp_next: null,
    hasNext: function () {
      this.zpp_inner.zpp_inner.valmod();
      var a = this.zpp_inner.get_length();
      this.zpp_critical = !0;
      if (this.zpp_i < a) return !0;
      this.zpp_next = Nd.zpp_pool;
      Nd.zpp_pool = this;
      this.zpp_inner = null;
      return !1;
    },
    next: function () {
      this.zpp_critical = !1;
      return this.zpp_inner.at(this.zpp_i++);
    },
    __class__: Nd,
  };
  var Xk = function () {
    this.zpp_inner = new Cg();
    this.zpp_inner.outer = this;
  };
  l["nape.shape.EdgeList"] = Xk;
  Xk.__name__ = ["nape", "shape", "EdgeList"];
  Xk.prototype = {
    zpp_inner: null,
    get_length: function () {
      this.zpp_inner.valmod();
      this.zpp_inner.zip_length &&
        ((this.zpp_inner.zip_length = !1),
        (this.zpp_inner.user_length = this.zpp_inner.inner.length));
      return this.zpp_inner.user_length;
    },
    at: function (a) {
      this.zpp_inner.valmod();
      this.zpp_inner.reverse_flag &&
        a != this.get_length() - 1 &&
        (a = this.get_length() - 2 - a);
      if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite)
        (this.zpp_inner.at_index = a),
          (this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a));
      else
        for (; this.zpp_inner.at_index != a; )
          this.zpp_inner.at_index++,
            (this.zpp_inner.at_ite = this.zpp_inner.at_ite.next);
      return this.zpp_inner.at_ite.elem().wrapper();
    },
    iterator: function () {
      this.zpp_inner.valmod();
      return Nd.get(this);
    },
    toString: function () {
      for (var a = "[", b = !0, c = this.iterator(); c.hasNext(); ) {
        var d = c.next();
        b || (a += ",");
        a += null == d ? "NULL" : d.toString();
        b = !1;
      }
      return a + "]";
    },
    __class__: Xk,
    __properties__: { get_length: "get_length" },
  };
  var Sa = function (a, b, c) {
    this.zpp_inner_zn = null;
    Qc.call(this);
    this.zpp_inner_zn = new Lh();
    this.zpp_inner_zn.outer = this;
    this.zpp_inner_zn.outer_zn = this;
    this.zpp_inner_i = this.zpp_inner = this.zpp_inner_zn;
    this.zpp_inner_i.outer_i = this;
    if (a instanceof Array && null == a.__enum__)
      for (var d = 0; d < a.length; ) {
        var e = a[d];
        ++d;
        this.get_localVerts().push(e.copy());
      }
    else if (u.is(a, Rb))
      for (d = a.iterator(); d.hasNext(); )
        (e = d.next()), this.get_localVerts().push(e.copy());
    else if (u.is(a, Af) && ((d = a.zpp_inner.vertices), null != d))
      for (e = d; ; ) {
        var f = w.get(e.x, e.y);
        e = e.next;
        this.get_localVerts().push(f.copy());
        f.dispose();
        if (e == d) break;
      }
    if (a instanceof Array && null == a.__enum__)
      for (d = 0; d < a.length; )
        (e = a[d]),
          e.zpp_inner.weak ? (e.dispose(), (e = !0)) : (e = !1),
          e ? a.splice(d, 1) : ++d;
    else if (u.is(a, Rb))
      for (
        null != a.zpp_inner._validate && a.zpp_inner._validate(),
          a = a.zpp_inner.inner,
          d = null,
          e = a.begin();
        null != e;

      )
        (f = e.elem()),
          f.outer.zpp_inner.weak
            ? ((e = a.erase(d)), f.outer.zpp_inner.weak && f.outer.dispose())
            : ((d = e), (e = e.next));
    null == b
      ? (null == Ja.zpp_pool
          ? (this.zpp_inner.material = new Ja())
          : ((this.zpp_inner.material = Ja.zpp_pool),
            (Ja.zpp_pool = this.zpp_inner.material.next),
            (this.zpp_inner.material.next = null)),
        this.zpp_inner.material.alloc())
      : this.set_material(b);
    null == c
      ? (null == fc.zpp_pool
          ? (this.zpp_inner.filter = new fc())
          : ((this.zpp_inner.filter = fc.zpp_pool),
            (fc.zpp_pool = this.zpp_inner.filter.next),
            (this.zpp_inner.filter.next = null)),
        this.zpp_inner.filter.alloc())
      : this.set_filter(c);
    this.zpp_inner_i.insert_cbtype(za.get_ANY_SHAPE().zpp_inner);
  };
  l["nape.shape.Polygon"] = Sa;
  Sa.__name__ = ["nape", "shape", "Polygon"];
  Sa.rect = function (a, b, c, d, e) {
    null == e && (e = !1);
    return [
      w.get(a, b, e),
      w.get(a + c, b, e),
      w.get(a + c, b + d, e),
      w.get(a, b + d, e),
    ];
  };
  Sa.__super__ = Qc;
  Sa.prototype = v(Qc.prototype, {
    zpp_inner_zn: null,
    get_localVerts: function () {
      null == this.zpp_inner_zn.wrap_lverts && this.zpp_inner_zn.getlverts();
      return this.zpp_inner_zn.wrap_lverts;
    },
    validity: function () {
      return this.zpp_inner_zn.valid();
    },
    __class__: Sa,
    __properties__: v(Qc.prototype.__properties__, {
      get_localVerts: "get_localVerts",
    }),
  });
  var Od = function () {
    this.zpp_next = null;
    this.zpp_critical = !1;
    this.zpp_i = 0;
    this.zpp_inner = null;
  };
  l["nape.shape.ShapeIterator"] = Od;
  Od.__name__ = ["nape", "shape", "ShapeIterator"];
  Od.get = function (a) {
    if (null == Od.zpp_pool) {
      var b = new Od();
      lf.internal = !1;
    } else (b = Od.zpp_pool), (Od.zpp_pool = b.zpp_next);
    b.zpp_i = 0;
    b.zpp_inner = a;
    b.zpp_critical = !1;
    return b;
  };
  Od.prototype = {
    zpp_inner: null,
    zpp_i: null,
    zpp_critical: null,
    zpp_next: null,
    hasNext: function () {
      this.zpp_inner.zpp_inner.valmod();
      var a = this.zpp_inner.get_length();
      this.zpp_critical = !0;
      if (this.zpp_i < a) return !0;
      this.zpp_next = Od.zpp_pool;
      Od.zpp_pool = this;
      this.zpp_inner = null;
      return !1;
    },
    next: function () {
      this.zpp_critical = !1;
      return this.zpp_inner.at(this.zpp_i++);
    },
    __class__: Od,
  };
  var Bj = function () {
    this.zpp_inner = new lf();
    this.zpp_inner.outer = this;
  };
  l["nape.shape.ShapeList"] = Bj;
  Bj.__name__ = ["nape", "shape", "ShapeList"];
  Bj.prototype = {
    zpp_inner: null,
    get_length: function () {
      this.zpp_inner.valmod();
      this.zpp_inner.zip_length &&
        ((this.zpp_inner.zip_length = !1),
        (this.zpp_inner.user_length = this.zpp_inner.inner.length));
      return this.zpp_inner.user_length;
    },
    at: function (a) {
      this.zpp_inner.valmod();
      this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a);
      if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite)
        (this.zpp_inner.at_index = a),
          (this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a));
      else
        for (; this.zpp_inner.at_index != a; )
          this.zpp_inner.at_index++,
            (this.zpp_inner.at_ite = this.zpp_inner.at_ite.next);
      return this.zpp_inner.at_ite.elem().outer;
    },
    push: function (a) {
      this.zpp_inner.modify_test();
      this.zpp_inner.valmod();
      var b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0;
      if (b) {
        if (this.zpp_inner.reverse_flag) this.zpp_inner.inner.add(a.zpp_inner);
        else {
          if (null == this.zpp_inner.push_ite) {
            var c = this.empty()
              ? null
              : this.zpp_inner.inner.iterator_at(this.get_length() - 1);
            this.zpp_inner.push_ite = c;
          }
          this.zpp_inner.push_ite = this.zpp_inner.inner.insert(
            this.zpp_inner.push_ite,
            a.zpp_inner
          );
        }
        this.zpp_inner.invalidate();
        null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
      }
      return b;
    },
    unshift: function (a) {
      this.zpp_inner.modify_test();
      this.zpp_inner.valmod();
      var b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0;
      if (b) {
        if (this.zpp_inner.reverse_flag) {
          if (null == this.zpp_inner.push_ite) {
            var c = this.empty()
              ? null
              : this.zpp_inner.inner.iterator_at(this.get_length() - 1);
            this.zpp_inner.push_ite = c;
          }
          this.zpp_inner.push_ite = this.zpp_inner.inner.insert(
            this.zpp_inner.push_ite,
            a.zpp_inner
          );
        } else this.zpp_inner.inner.add(a.zpp_inner);
        this.zpp_inner.invalidate();
        null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
      }
      return b;
    },
    add: function (a) {
      return this.zpp_inner.reverse_flag ? this.push(a) : this.unshift(a);
    },
    remove: function (a) {
      this.zpp_inner.modify_test();
      this.zpp_inner.valmod();
      var b = !1;
      for (var c = this.zpp_inner.inner.begin(); null != c; ) {
        if (c.elem() == a.zpp_inner) {
          b = !0;
          break;
        }
        c = c.next;
      }
      b &&
        (null != this.zpp_inner.subber && this.zpp_inner.subber(a),
        this.zpp_inner.dontremove || this.zpp_inner.inner.remove(a.zpp_inner),
        this.zpp_inner.invalidate());
      return b;
    },
    empty: function () {
      return this.zpp_inner.inner.empty();
    },
    iterator: function () {
      this.zpp_inner.valmod();
      return Od.get(this);
    },
    toString: function () {
      for (var a = "[", b = !0, c = this.iterator(); c.hasNext(); ) {
        var d = c.next();
        b || (a += ",");
        a += null == d ? "NULL" : d.toString();
        b = !1;
      }
      return a + "]";
    },
    __class__: Bj,
    __properties__: { get_length: "get_length" },
  };
  var gd = function () {};
  l["nape.shape.ShapeType"] = gd;
  gd.__name__ = ["nape", "shape", "ShapeType"];
  gd.__properties__ = { get_POLYGON: "get_POLYGON", get_CIRCLE: "get_CIRCLE" };
  gd.get_CIRCLE = function () {
    null == z.ShapeType_CIRCLE &&
      ((z.ShapeType_CIRCLE = new gd()), (z.internal = !1));
    return z.ShapeType_CIRCLE;
  };
  gd.get_POLYGON = function () {
    null == z.ShapeType_POLYGON &&
      ((z.ShapeType_POLYGON = new gd()), (z.internal = !1));
    return z.ShapeType_POLYGON;
  };
  gd.prototype = {
    toString: function () {
      return this == gd.get_CIRCLE()
        ? "CIRCLE"
        : this == gd.get_POLYGON()
        ? "POLYGON"
        : "";
    },
    __class__: gd,
  };
  var nb = function () {};
  l["nape.shape.ValidationResult"] = nb;
  nb.__name__ = ["nape", "shape", "ValidationResult"];
  nb.__properties__ = {
    get_SELF_INTERSECTING: "get_SELF_INTERSECTING",
    get_CONCAVE: "get_CONCAVE",
    get_DEGENERATE: "get_DEGENERATE",
    get_VALID: "get_VALID",
  };
  nb.get_VALID = function () {
    null == z.ValidationResult_VALID &&
      ((z.ValidationResult_VALID = new nb()), (z.internal = !1));
    return z.ValidationResult_VALID;
  };
  nb.get_DEGENERATE = function () {
    null == z.ValidationResult_DEGENERATE &&
      ((z.ValidationResult_DEGENERATE = new nb()), (z.internal = !1));
    return z.ValidationResult_DEGENERATE;
  };
  nb.get_CONCAVE = function () {
    null == z.ValidationResult_CONCAVE &&
      ((z.ValidationResult_CONCAVE = new nb()), (z.internal = !1));
    return z.ValidationResult_CONCAVE;
  };
  nb.get_SELF_INTERSECTING = function () {
    null == z.ValidationResult_SELF_INTERSECTING &&
      ((z.ValidationResult_SELF_INTERSECTING = new nb()), (z.internal = !1));
    return z.ValidationResult_SELF_INTERSECTING;
  };
  nb.prototype = {
    toString: function () {
      return this == nb.get_VALID()
        ? "VALID"
        : this == nb.get_DEGENERATE()
        ? "DEGENERATE"
        : this == nb.get_CONCAVE()
        ? "CONCAVE"
        : this == nb.get_SELF_INTERSECTING()
        ? "SELF_INTERSECTING"
        : "";
    },
    __class__: nb,
  };
  var hd = function () {};
  l["nape.space.Broadphase"] = hd;
  hd.__name__ = ["nape", "space", "Broadphase"];
  hd.__properties__ = {
    get_SWEEP_AND_PRUNE: "get_SWEEP_AND_PRUNE",
    get_DYNAMIC_AABB_TREE: "get_DYNAMIC_AABB_TREE",
  };
  hd.get_DYNAMIC_AABB_TREE = function () {
    null == z.Broadphase_DYNAMIC_AABB_TREE &&
      ((z.Broadphase_DYNAMIC_AABB_TREE = new hd()), (z.internal = !1));
    return z.Broadphase_DYNAMIC_AABB_TREE;
  };
  hd.get_SWEEP_AND_PRUNE = function () {
    null == z.Broadphase_SWEEP_AND_PRUNE &&
      ((z.Broadphase_SWEEP_AND_PRUNE = new hd()), (z.internal = !1));
    return z.Broadphase_SWEEP_AND_PRUNE;
  };
  hd.prototype = {
    toString: function () {
      return this == hd.get_DYNAMIC_AABB_TREE()
        ? "DYNAMIC_AABB_TREE"
        : this == hd.get_SWEEP_AND_PRUNE()
        ? "SWEEP_AND_PRUNE"
        : "";
    },
    __class__: hd,
  };
  var bh = function (a, b) {
    this.zpp_inner = null;
    this.zpp_inner = new Cj(null == a ? null : a.zpp_inner, b);
    this.zpp_inner.outer = this;
    null != a && a.zpp_inner.weak && a.dispose();
  };
  l["nape.space.Space"] = bh;
  bh.__name__ = ["nape", "space", "Space"];
  bh.prototype = {
    zpp_inner: null,
    get_bodies: function () {
      return this.zpp_inner.wrap_bodies;
    },
    get_constraints: function () {
      return this.zpp_inner.wrap_constraints;
    },
    get_world: function () {
      return this.zpp_inner.__static;
    },
    get_listeners: function () {
      return this.zpp_inner.wrap_listeners;
    },
    clear: function () {
      this.zpp_inner.clear();
    },
    step: function (a, b, c) {
      null == c && (c = 10);
      null == b && (b = 10);
      this.zpp_inner.step(a, b, c);
    },
    __class__: bh,
    __properties__: {
      get_listeners: "get_listeners",
      get_world: "get_world",
      get_constraints: "get_constraints",
      get_bodies: "get_bodies",
    },
  };
  var N = function () {};
  l["openfl.Lib"] = N;
  N.__name__ = ["openfl", "Lib"];
  N.__properties__ = { get_current: "get_current" };
  N.getTimer = function () {
    return Db.getTimer();
  };
  N.getURL = function (a, b) {
    N.navigateToURL(a, b);
  };
  N.navigateToURL = function (a, b) {
    null == b && (b = "_blank");
    var c = a.url;
    if (I["typeof"](a.data) == Ca.TObject) {
      for (var d = "", e = A.fields(a.data), f = 0; f < e.length; ) {
        var g = e[f];
        ++f;
        0 < d.length && (d += "&");
        d += J.urlEncode(g) + "=" + J.urlEncode(u.string(A.field(a.data, g)));
      }
      c = -1 < c.indexOf("?") ? c + ("&" + d) : c + ("?" + d);
    }
    Db.openURL(c, b);
  };
  N.trace = function (a) {
    ca.trace(a, {
      fileName: "Lib.hx",
      lineNumber: 282,
      className: "openfl.Lib",
      methodName: "trace",
    });
  };
  N.get_current = function () {
    null == oc.current && (oc.current = new Gc());
    return oc.current;
  };
  var mf = function () {};
  l["openfl._Vector.IVector"] = mf;
  mf.__name__ = ["openfl", "_Vector", "IVector"];
  mf.prototype = {
    get_length: null,
    get: null,
    __class__: mf,
    __properties__: { get_length: "get_length" },
  };
  var Dj = function (a, b, c) {
    null == c && (c = []);
    this.__array = c;
    null != a && 0 < a && this.set_length(a);
    this.fixed = 1 == b;
  };
  l["openfl._Vector.BoolVector"] = Dj;
  Dj.__name__ = ["openfl", "_Vector", "BoolVector"];
  Dj.__interfaces__ = [mf];
  Dj.prototype = {
    fixed: null,
    __array: null,
    get: function (a) {
      return a >= this.__array.length ? !1 : this.__array[a];
    },
    toJSON: function () {
      return this.__array;
    },
    get_length: function () {
      return this.__array.length;
    },
    set_length: function (a) {
      if (!this.fixed) {
        var b = this.__array.length;
        0 > a && (a = 0);
        if (a > b)
          for (; b < a; ) {
            var c = b++;
            this.__array[c] = !1;
          }
        else for (; this.__array.length > a; ) this.__array.pop();
      }
      return this.__array.length;
    },
    __class__: Dj,
    __properties__: { set_length: "set_length", get_length: "get_length" },
  };
  var sf = function (a, b, c, d) {
    null == d && (d = !1);
    if (d) {
      if (((this.__array = []), null != c)) {
        d = 0;
        for (var e = c.length; d < e; ) {
          var f = d++;
          this.__array[f] = c[f];
        }
      }
    } else null == c && (c = []), (this.__array = c);
    null != a && 0 < a && this.set_length(a);
    this.fixed = 1 == b;
  };
  l["openfl._Vector.FloatVector"] = sf;
  sf.__name__ = ["openfl", "_Vector", "FloatVector"];
  sf.__interfaces__ = [mf];
  sf.prototype = {
    fixed: null,
    __array: null,
    concat: function (a) {
      return null == a
        ? new sf(null, null, this.__array.slice())
        : 0 < a.__array.length
        ? new sf(null, null, this.__array.concat(a.__array))
        : new sf(null, null, this.__array.slice());
    },
    copy: function () {
      return new sf(null, this.fixed, this.__array.slice());
    },
    get: function (a) {
      return this.__array[a];
    },
    push: function (a) {
      return this.fixed ? this.__array.length : this.__array.push(a);
    },
    set: function (a, b) {
      return !this.fixed || a < this.__array.length ? (this.__array[a] = b) : b;
    },
    toJSON: function () {
      return this.__array;
    },
    get_length: function () {
      return this.__array.length;
    },
    set_length: function (a) {
      if (a != this.__array.length && !this.fixed) {
        var b = this.__array.length;
        0 > a && (a = 0);
        if (a > b)
          for (; b < a; ) {
            var c = b++;
            this.__array[c] = 0;
          }
        else for (; this.__array.length > a; ) this.__array.pop();
      }
      return this.__array.length;
    },
    __class__: sf,
    __properties__: { set_length: "set_length", get_length: "get_length" },
  };
  var Ej = function (a, b, c) {
    null == c && (c = []);
    this.__array = c;
    null != a && 0 < a && this.set_length(a);
    this.fixed = 1 == b;
  };
  l["openfl._Vector.FunctionVector"] = Ej;
  Ej.__name__ = ["openfl", "_Vector", "FunctionVector"];
  Ej.__interfaces__ = [mf];
  Ej.prototype = {
    fixed: null,
    __array: null,
    get: function (a) {
      return a >= this.__array.length ? null : this.__array[a];
    },
    toJSON: function () {
      return this.__array;
    },
    get_length: function () {
      return this.__array.length;
    },
    set_length: function (a) {
      if (!this.fixed) {
        var b = this.__array.length;
        0 > a && (a = 0);
        if (a > b)
          for (; b < a; ) {
            var c = b++;
            this.__array[c] = null;
          }
        else for (; this.__array.length > a; ) this.__array.pop();
      }
      return this.__array.length;
    },
    __class__: Ej,
    __properties__: { set_length: "set_length", get_length: "get_length" },
  };
  var Xg = function (a, b, c) {
    null == c && (c = []);
    this.__array = c;
    null != a && 0 < a && this.set_length(a);
    this.fixed = 1 == b;
  };
  l["openfl._Vector.IntVector"] = Xg;
  Xg.__name__ = ["openfl", "_Vector", "IntVector"];
  Xg.__interfaces__ = [mf];
  Xg.prototype = {
    fixed: null,
    __array: null,
    get: function (a) {
      return this.__array[a];
    },
    toJSON: function () {
      return this.__array;
    },
    get_length: function () {
      return this.__array.length;
    },
    set_length: function (a) {
      if (!this.fixed) {
        var b = this.__array.length;
        0 > a && (a = 0);
        if (a > b)
          for (; b < a; ) {
            var c = b++;
            this.__array[c] = 0;
          }
        else for (; this.__array.length > a; ) this.__array.pop();
      }
      return this.__array.length;
    },
    __class__: Xg,
    __properties__: { set_length: "set_length", get_length: "get_length" },
  };
  var ng = function (a, b, c, d) {
    null == d && (d = !1);
    if (d) {
      if (((this.__array = []), null != c)) {
        d = 0;
        for (var e = c.length; d < e; ) {
          var f = d++;
          this.__array[f] = c[f];
        }
      }
    } else null == c && (c = []), (this.__array = c);
    null != a && 0 < a && this.set_length(a);
    this.fixed = 1 == b;
  };
  l["openfl._Vector.ObjectVector"] = ng;
  ng.__name__ = ["openfl", "_Vector", "ObjectVector"];
  ng.__interfaces__ = [mf];
  ng.prototype = {
    fixed: null,
    __array: null,
    get: function (a) {
      return this.__array[a];
    },
    indexOf: function (a, b) {
      null == b && (b = 0);
      for (var c = this.__array.length; b < c; ) {
        var d = b++;
        if (this.__array[d] == a) return d;
      }
      return -1;
    },
    push: function (a) {
      return this.fixed ? this.__array.length : this.__array.push(a);
    },
    set: function (a, b) {
      return !this.fixed || a < this.__array.length ? (this.__array[a] = b) : b;
    },
    splice: function (a, b) {
      return new ng(null, null, this.__array.splice(a, b));
    },
    toJSON: function () {
      return this.__array;
    },
    get_length: function () {
      return this.__array.length;
    },
    set_length: function (a) {
      if (!this.fixed) {
        var b = this.__array.length;
        0 > a && (a = 0);
        if (a > b) for (; b < a; ) b++, this.__array.push(null);
        else for (; this.__array.length > a; ) this.__array.pop();
      }
      return this.__array.length;
    },
    __class__: ng,
    __properties__: { set_length: "set_length", get_length: "get_length" },
  };
  var oc = function () {};
  l["openfl._internal.Lib"] = oc;
  oc.__name__ = ["openfl", "_internal", "Lib"];
  var rc = function () {};
  l["openfl._internal.formats.agal.AGALConverter"] = rc;
  rc.__name__ = ["openfl", "_internal", "formats", "agal", "AGALConverter"];
  rc.prefixFromType = function (a, b) {
    switch (a) {
      case 0:
        return "va";
      case 1:
        return b == Hc.VERTEX ? "vc" : "fc";
      case 2:
        return b == Hc.VERTEX ? "vt" : "ft";
      case 3:
        return "output_";
      case 4:
        return "v";
      case 5:
        return "sampler";
      default:
        throw new G(new xb("Invalid data!"));
    }
  };
  rc.readUInt64 = function (a) {
    var b = a.readInt();
    a = a.readInt();
    return new ka(a, b);
  };
  rc.convertToGLSL = function (a, b) {
    a.position = 0;
    a.set_endian(1);
    var c = a.readByte() & 255;
    if (176 == c) return a.readUTF();
    if (160 != c)
      throw new G(new xb("Magic value must be 0xA0, may not be AGAL"));
    if (1 != a.readInt()) throw new G(new xb("Version must be 1"));
    if (161 != (a.readByte() & 255))
      throw new G(new xb("Shader type ID must be 0xA1"));
    c = 0 == (a.readByte() & 255) ? Hc.VERTEX : Hc.FRAGMENT;
    for (var d = new Fj(), e = new wf(); a.position < fd.get_length(a); ) {
      var f = a.readInt(),
        g = a.readUnsignedInt(),
        h = rc.readUInt64(a),
        n = rc.readUInt64(a);
      g = Dg.parse(g, c);
      h = bg.parse(h, c, g.mask);
      var p = bg.parse(n, c, g.mask);
      e.add("\t");
      switch (f) {
        case 0:
          e.add(g.toGLSL() + " = " + h.toGLSL() + "; // mov");
          d.addDR(g, B.VECTOR_4);
          d.addSR(h, B.VECTOR_4);
          break;
        case 1:
          e.add(
            g.toGLSL() + " = " + h.toGLSL() + " + " + p.toGLSL() + "; // add"
          );
          d.addDR(g, B.VECTOR_4);
          d.addSR(h, B.VECTOR_4);
          d.addSR(p, B.VECTOR_4);
          break;
        case 2:
          e.add(
            g.toGLSL() + " = " + h.toGLSL() + " - " + p.toGLSL() + "; // sub"
          );
          d.addDR(g, B.VECTOR_4);
          d.addSR(h, B.VECTOR_4);
          d.addSR(p, B.VECTOR_4);
          break;
        case 3:
          e.add(
            g.toGLSL() + " = " + h.toGLSL() + " * " + p.toGLSL() + "; // mul"
          );
          d.addDR(g, B.VECTOR_4);
          d.addSR(h, B.VECTOR_4);
          d.addSR(p, B.VECTOR_4);
          break;
        case 4:
          e.add(
            g.toGLSL() + " = " + h.toGLSL() + " / " + p.toGLSL() + "; // div"
          );
          d.addDR(g, B.VECTOR_4);
          d.addSR(h, B.VECTOR_4);
          d.addSR(p, B.VECTOR_4);
          break;
        case 5:
          -1 < h.toGLSL().indexOf(".")
            ? e.add(g.toGLSL() + " = 1.0 / " + h.toGLSL() + "; // rcp")
            : e.add(g.toGLSL() + " = vec4(1) / " + h.toGLSL() + "; // rcp");
          d.addDR(g, B.VECTOR_4);
          d.addSR(h, B.VECTOR_4);
          break;
        case 6:
          e.add(
            g.toGLSL() +
              " = min(" +
              h.toGLSL() +
              ", " +
              p.toGLSL() +
              "); // min"
          );
          d.addDR(g, B.VECTOR_4);
          d.addSR(h, B.VECTOR_4);
          d.addSR(p, B.VECTOR_4);
          break;
        case 7:
          e.add(
            g.toGLSL() +
              " = max(" +
              h.toGLSL() +
              ", " +
              p.toGLSL() +
              "); // max"
          );
          d.addDR(g, B.VECTOR_4);
          d.addSR(h, B.VECTOR_4);
          d.addSR(p, B.VECTOR_4);
          break;
        case 8:
          e.add(g.toGLSL() + " = fract(" + h.toGLSL() + "); // frc");
          d.addDR(g, B.VECTOR_4);
          d.addSR(h, B.VECTOR_4);
          break;
        case 9:
          e.add(g.toGLSL() + " = sqrt(" + h.toGLSL() + "); // sqrt");
          d.addDR(g, B.VECTOR_4);
          d.addSR(h, B.VECTOR_4);
          break;
        case 10:
          e.add(g.toGLSL() + " = inversesqrt(" + h.toGLSL() + "); // rsq");
          d.addDR(g, B.VECTOR_4);
          d.addSR(h, B.VECTOR_4);
          break;
        case 11:
          e.add(
            g.toGLSL() +
              " = pow(" +
              h.toGLSL() +
              ", " +
              p.toGLSL() +
              "); // pow"
          );
          d.addDR(g, B.VECTOR_4);
          d.addSR(h, B.VECTOR_4);
          d.addSR(p, B.VECTOR_4);
          break;
        case 12:
          e.add(g.toGLSL() + " = log2(" + h.toGLSL() + "); // log");
          d.addDR(g, B.VECTOR_4);
          d.addSR(h, B.VECTOR_4);
          break;
        case 13:
          e.add(g.toGLSL() + " = exp2(" + h.toGLSL() + "); // exp");
          d.addDR(g, B.VECTOR_4);
          d.addSR(h, B.VECTOR_4);
          break;
        case 14:
          e.add(g.toGLSL() + " = normalize(" + h.toGLSL() + "); // normalize");
          d.addDR(g, B.VECTOR_4);
          d.addSR(h, B.VECTOR_4);
          break;
        case 15:
          e.add(g.toGLSL() + " = sin(" + h.toGLSL() + "); // sin");
          d.addDR(g, B.VECTOR_4);
          d.addSR(h, B.VECTOR_4);
          break;
        case 16:
          e.add(g.toGLSL() + " = cos(" + h.toGLSL() + "); // cos");
          d.addDR(g, B.VECTOR_4);
          d.addSR(h, B.VECTOR_4);
          break;
        case 17:
          h.sourceMask = p.sourceMask = 7;
          e.add(
            g.toGLSL() +
              " = cross(vec3(" +
              h.toGLSL() +
              "), vec3(" +
              p.toGLSL() +
              ")); // crs"
          );
          d.addDR(g, B.VECTOR_4);
          d.addSR(h, B.VECTOR_4);
          d.addSR(p, B.VECTOR_4);
          break;
        case 18:
          h.sourceMask = p.sourceMask = 7;
          e.add(
            g.toGLSL() +
              " = vec4(dot(vec3(" +
              h.toGLSL() +
              "), vec3(" +
              p.toGLSL() +
              ")))" +
              g.getWriteMask() +
              "; // dp3"
          );
          d.addDR(g, B.VECTOR_4);
          d.addSR(h, B.VECTOR_4);
          d.addSR(p, B.VECTOR_4);
          break;
        case 19:
          h.sourceMask = p.sourceMask = 15;
          e.add(
            g.toGLSL() +
              " = vec4(dot(vec4(" +
              h.toGLSL() +
              "), vec4(" +
              p.toGLSL() +
              ")))" +
              g.getWriteMask() +
              "; // dp4"
          );
          d.addDR(g, B.VECTOR_4);
          d.addSR(h, B.VECTOR_4);
          d.addSR(p, B.VECTOR_4);
          break;
        case 20:
          e.add(g.toGLSL() + " = abs(" + h.toGLSL() + "); // abs");
          d.addDR(g, B.VECTOR_4);
          d.addSR(h, B.VECTOR_4);
          break;
        case 21:
          e.add(g.toGLSL() + " = -" + h.toGLSL() + "; // neg");
          d.addDR(g, B.VECTOR_4);
          d.addSR(h, B.VECTOR_4);
          break;
        case 22:
          e.add(
            g.toGLSL() + " = clamp(" + h.toGLSL() + ", 0.0, 1.0); // saturate"
          );
          d.addDR(g, B.VECTOR_4);
          d.addSR(h, B.VECTOR_4);
          break;
        case 23:
          f = d.getRegisterUsage(p);
          f != B.VECTOR_4 && f != B.VECTOR_4_ARRAY
            ? (e.add(
                g.toGLSL() +
                  " = " +
                  h.toGLSL() +
                  " * mat3(" +
                  p.toGLSL(!1) +
                  "); // m33"
              ),
              d.addDR(g, B.VECTOR_4),
              d.addSR(h, B.VECTOR_4),
              d.addSR(p, B.MATRIX_4_4))
            : ((h.sourceMask = p.sourceMask = 7),
              e.add(
                g.toGLSL() +
                  " = vec3(dot(" +
                  h.toGLSL(!0) +
                  "," +
                  p.toGLSL(!0, 0) +
                  "), dot(" +
                  h.toGLSL(!0) +
                  "," +
                  p.toGLSL(!0, 1) +
                  "),dot(" +
                  h.toGLSL(!0) +
                  "," +
                  p.toGLSL(!0, 2) +
                  ")); // m33"
              ),
              d.addDR(g, B.VECTOR_4),
              d.addSR(h, B.VECTOR_4),
              d.addSR(p, B.VECTOR_4, 0),
              d.addSR(p, B.VECTOR_4, 1),
              d.addSR(p, B.VECTOR_4, 2));
          break;
        case 24:
          f = d.getRegisterUsage(p);
          f != B.VECTOR_4 && f != B.VECTOR_4_ARRAY
            ? (e.add(
                g.toGLSL() +
                  " = " +
                  h.toGLSL() +
                  " * " +
                  p.toGLSL(!1) +
                  "; // m44"
              ),
              d.addDR(g, B.VECTOR_4),
              d.addSR(h, B.VECTOR_4),
              d.addSR(p, B.MATRIX_4_4))
            : ((h.sourceMask = p.sourceMask = 15),
              e.add(
                g.toGLSL() +
                  " = vec4(dot(" +
                  h.toGLSL(!0) +
                  "," +
                  p.toGLSL(!0, 0) +
                  "), dot(" +
                  h.toGLSL(!0) +
                  "," +
                  p.toGLSL(!0, 1) +
                  "), dot(" +
                  h.toGLSL(!0) +
                  "," +
                  p.toGLSL(!0, 2) +
                  "), dot(" +
                  h.toGLSL(!0) +
                  "," +
                  p.toGLSL(!0, 3) +
                  ")); // m44"
              ),
              d.addDR(g, B.VECTOR_4),
              d.addSR(h, B.VECTOR_4),
              d.addSR(p, B.VECTOR_4, 0),
              d.addSR(p, B.VECTOR_4, 1),
              d.addSR(p, B.VECTOR_4, 2),
              d.addSR(p, B.VECTOR_4, 3));
          break;
        case 25:
          g.mask &= 7;
          f = d.getRegisterUsage(p);
          f != B.VECTOR_4 && f != B.VECTOR_4_ARRAY
            ? (e.add(
                g.toGLSL() +
                  " = " +
                  h.toGLSL() +
                  " * " +
                  p.toGLSL(!1) +
                  "; // m34"
              ),
              d.addDR(g, B.VECTOR_4),
              d.addSR(h, B.VECTOR_4),
              d.addSR(p, B.MATRIX_4_4))
            : ((h.sourceMask = p.sourceMask = 15),
              e.add(
                g.toGLSL() +
                  " = vec3(dot(" +
                  h.toGLSL(!0) +
                  "," +
                  p.toGLSL(!0, 0) +
                  "), dot(" +
                  h.toGLSL(!0) +
                  "," +
                  p.toGLSL(!0, 1) +
                  "),dot(" +
                  h.toGLSL(!0) +
                  "," +
                  p.toGLSL(!0, 2) +
                  ")); // m34"
              ),
              d.addDR(g, B.VECTOR_4),
              d.addSR(h, B.VECTOR_4),
              d.addSR(p, B.VECTOR_4, 0),
              d.addSR(p, B.VECTOR_4, 1),
              d.addSR(p, B.VECTOR_4, 2));
          break;
        case 39:
          h.sourceMask = 15;
          e.add("if (any(lessThan(" + h.toGLSL() + ", vec4(0)))) discard;");
          d.addSR(h, B.VECTOR_4);
          break;
        case 40:
          p = Eg.parse(n, c);
          switch (p.d) {
            case 0:
              2 == p.t
                ? ((h.sourceMask = 3),
                  d.addSaR(p, B.SAMPLER_2D_ALPHA),
                  e.add("if (" + p.toGLSL() + "_alphaEnabled) {\n"),
                  e.add(
                    "\t\t" +
                      g.toGLSL() +
                      " = vec4(texture2D(" +
                      p.toGLSL() +
                      ", " +
                      h.toGLSL() +
                      ").xyz, texture2D(" +
                      p.toGLSL() +
                      "_alpha, " +
                      h.toGLSL() +
                      ").x); // tex + alpha\n"
                  ),
                  e.add("\t} else {\n"),
                  e.add(
                    "\t\t" +
                      g.toGLSL() +
                      " = texture2D(" +
                      p.toGLSL() +
                      ", " +
                      h.toGLSL() +
                      "); // tex\n"
                  ),
                  e.add("\t}"))
                : ((h.sourceMask = 3),
                  d.addSaR(p, B.SAMPLER_2D),
                  e.add(
                    g.toGLSL() +
                      " = texture2D(" +
                      p.toGLSL() +
                      ", " +
                      h.toGLSL() +
                      "); // tex"
                  ));
              break;
            case 1:
              2 == p.t
                ? ((h.sourceMask = 7),
                  d.addSaR(p, B.SAMPLER_CUBE_ALPHA),
                  e.add("if (" + p.toGLSL() + "_alphaEnabled) {\n"),
                  e.add(
                    "\t\t" +
                      g.toGLSL() +
                      " = vec4(textureCube(" +
                      p.toGLSL() +
                      ", " +
                      h.toGLSL() +
                      ").xyz, textureCube(" +
                      p.toGLSL() +
                      "_alpha, " +
                      h.toGLSL() +
                      ").x); // tex + alpha\n"
                  ),
                  e.add("\t} else {\n"),
                  e.add(
                    "\t\t" +
                      g.toGLSL() +
                      " = textureCube(" +
                      p.toGLSL() +
                      ", " +
                      h.toGLSL() +
                      "); // tex"
                  ),
                  e.add("\t}"))
                : ((h.sourceMask = 7),
                  e.add(
                    g.toGLSL() +
                      " = textureCube(" +
                      p.toGLSL() +
                      ", " +
                      h.toGLSL() +
                      "); // tex"
                  ),
                  d.addSaR(p, B.SAMPLER_CUBE));
          }
          d.addDR(g, B.VECTOR_4);
          d.addSR(h, B.VECTOR_4);
          null != b && (b[p.n] = p.toSamplerState());
          break;
        case 41:
          h.sourceMask = p.sourceMask = 15;
          e.add(
            g.toGLSL() +
              " = vec4(greaterThanEqual(" +
              h.toGLSL() +
              ", " +
              p.toGLSL() +
              "))" +
              g.getWriteMask() +
              "; // ste"
          );
          d.addDR(g, B.VECTOR_4);
          d.addSR(h, B.VECTOR_4);
          d.addSR(p, B.VECTOR_4);
          break;
        case 42:
          h.sourceMask = p.sourceMask = 15;
          e.add(
            g.toGLSL() +
              " = vec4(lessThan(" +
              h.toGLSL() +
              ", " +
              p.toGLSL() +
              "))" +
              g.getWriteMask() +
              "; // slt"
          );
          d.addDR(g, B.VECTOR_4);
          d.addSR(h, B.VECTOR_4);
          d.addSR(p, B.VECTOR_4);
          break;
        case 44:
          h.sourceMask = p.sourceMask = 15;
          e.add(
            g.toGLSL() +
              " = vec4(equal(" +
              h.toGLSL() +
              ", " +
              p.toGLSL() +
              "))" +
              g.getWriteMask() +
              "; // seq"
          );
          d.addDR(g, B.VECTOR_4);
          d.addSR(h, B.VECTOR_4);
          d.addSR(p, B.VECTOR_4);
          break;
        case 45:
          h.sourceMask = p.sourceMask = 15;
          e.add(
            g.toGLSL() +
              " = vec4(notEqual(" +
              h.toGLSL() +
              ", " +
              p.toGLSL() +
              "))" +
              g.getWriteMask() +
              "; // sne"
          );
          d.addDR(g, B.VECTOR_4);
          d.addSR(h, B.VECTOR_4);
          d.addSR(p, B.VECTOR_4);
          break;
        default:
          throw new G(new xb("Opcode " + f));
      }
      e.add("\n");
    }
    null == rc.limitedProfile &&
      ((a = Mf.getParameter(7938)),
      (rc.limitedProfile =
        -1 < a.indexOf("OpenGL ES") || -1 < a.indexOf("WebGL")));
    a = new wf();
    a.add("// AGAL " + (c == Hc.VERTEX ? "vertex" : "fragment") + " shader\n");
    rc.limitedProfile
      ? (a.add("#version 100\n"), a.add("precision highp float;\n"))
      : a.add("#version 120\n");
    a.add(d.toGLSL(!1));
    c == Hc.VERTEX && a.add("uniform vec4 vcPositionScale;\n");
    a.add("void main() {\n");
    a.add(d.toGLSL(!0));
    a.add(e.toString());
    c == Hc.VERTEX && a.add("\tgl_Position *= vcPositionScale;\n");
    a.add("}\n");
    return a.toString();
  };
  var Dg = function () {};
  l["openfl._internal.formats.agal._AGALConverter.DestRegister"] = Dg;
  Dg.__name__ =
    "openfl _internal formats agal _AGALConverter DestRegister".split(" ");
  Dg.parse = function (a, b) {
    var c = new Dg();
    c.programType = b;
    c.type = (a >>> 24) & 15;
    c.mask = (a >>> 16) & 15;
    c.n = a & 65535;
    return c;
  };
  Dg.prototype = {
    mask: null,
    n: null,
    programType: null,
    type: null,
    getWriteMask: function () {
      var a = ".";
      0 != (this.mask & 1) && (a += "x");
      0 != (this.mask & 2) && (a += "y");
      0 != (this.mask & 4) && (a += "z");
      0 != (this.mask & 8) && (a += "w");
      return a;
    },
    toGLSL: function (a) {
      null == a && (a = !0);
      var b =
        3 == this.type
          ? this.programType == Hc.VERTEX
            ? "gl_Position"
            : "gl_FragColor"
          : rc.prefixFromType(this.type, this.programType) + this.n;
      a && 15 != this.mask && (b += this.getWriteMask());
      return b;
    },
    __class__: Dg,
  };
  var Hc = (l["openfl._internal.formats.agal._AGALConverter.ProgramType"] = {
    __ename__: "openfl _internal formats agal _AGALConverter ProgramType".split(
      " "
    ),
    __constructs__: ["VERTEX", "FRAGMENT"],
  });
  Hc.VERTEX = ["VERTEX", 0];
  Hc.VERTEX.toString = M;
  Hc.VERTEX.__enum__ = Hc;
  Hc.FRAGMENT = ["FRAGMENT", 1];
  Hc.FRAGMENT.toString = M;
  Hc.FRAGMENT.__enum__ = Hc;
  var Fj = function () {
    this.mEntries = [];
  };
  l["openfl._internal.formats.agal.RegisterMap"] = Fj;
  Fj.__name__ = ["openfl", "_internal", "formats", "agal", "RegisterMap"];
  Fj.prototype = {
    mEntries: null,
    add: function (a, b, c, d) {
      for (var e = 0, f = this.mEntries; e < f.length; ) {
        var g = f[e];
        ++e;
        if (g.type == a && g.name == b && g.number == c) {
          if (g.usage != d)
            throw new G(
              new xb("Cannot use register in multiple ways yet (mat4/vec4)")
            );
          return;
        }
      }
      e = new Gj();
      e.type = a;
      e.name = b;
      e.number = c;
      e.usage = d;
      this.mEntries.push(e);
    },
    addDR: function (a, b) {
      this.add(a.type, a.toGLSL(!1), a.n, b);
    },
    addSaR: function (a, b) {
      this.add(a.type, a.toGLSL(), a.n, b);
    },
    addSR: function (a, b, c) {
      null == c && (c = 0);
      0 != a.d
        ? (this.add(
            a.itype,
            rc.prefixFromType(a.itype, a.programType) + a.n,
            a.n,
            B.VECTOR_4
          ),
          this.add(
            a.type,
            rc.prefixFromType(a.type, a.programType) + a.o,
            a.o,
            B.VECTOR_4_ARRAY
          ))
        : this.add(a.type, a.toGLSL(!1, c), a.n + c, b);
    },
    getRegisterUsage: function (a) {
      return 0 != a.d
        ? B.VECTOR_4_ARRAY
        : this.getUsage(a.type, a.toGLSL(!1), a.n);
    },
    getUsage: function (a, b, c) {
      for (var d = 0, e = this.mEntries; d < e.length; ) {
        var f = e[d];
        ++d;
        if (f.type == a && f.name == b && f.number == c) return f.usage;
      }
      return B.UNUSED;
    },
    toGLSL: function (a) {
      this.mEntries.sort(function (a, b) {
        return a.number - b.number;
      });
      this.mEntries.sort(function (a, b) {
        return r.__cast(a.type, rl) - r.__cast(b.type, rl);
      });
      for (var b = new wf(), c = 0, d = this.mEntries.length; c < d; ) {
        var e = c++;
        e = this.mEntries[e];
        if (!((a && 2 != e.type) || (!a && 2 == e.type)) && 3 != e.type) {
          switch (e.type) {
            case 0:
              b.add("attribute ");
              break;
            case 1:
              b.add("uniform ");
              break;
            case 2:
              b.add("\t");
              break;
            case 3:
              break;
            case 4:
              b.add("varying ");
              break;
            case 5:
              b.add("uniform ");
              break;
            default:
              throw new G(new xb());
          }
          switch (I.enumIndex(e.usage)) {
            case 0:
              ca.trace("Missing switch patten: RegisterUsage.UNUSED", {
                fileName: "AGALConverter.hx",
                lineNumber: 826,
                className: "openfl._internal.formats.agal.RegisterMap",
                methodName: "toGLSL",
              });
              break;
            case 1:
              b.add("vec4 ");
              break;
            case 2:
              b.add("mat4 ");
              break;
            case 3:
              b.add("sampler2D ");
              break;
            case 5:
              b.add("samplerCube ");
              break;
            case 7:
              b.add("vec4 ");
          }
          e.usage == B.SAMPLER_2D_ALPHA
            ? (b.add("sampler2D "),
              b.add(e.name),
              b.add(";\n"),
              b.add("uniform "),
              b.add("sampler2D "),
              b.add(e.name + "_alpha"),
              b.add(";\n"),
              b.add("uniform "),
              b.add("bool "),
              b.add(e.name + "_alphaEnabled"))
            : e.usage == B.SAMPLER_CUBE_ALPHA
            ? (b.add("samplerCube "),
              b.add(e.name),
              b.add(";\n"),
              b.add("uniform "),
              b.add("samplerCube "),
              b.add(e.name + "_alpha"),
              b.add(";\n"),
              b.add("uniform "),
              b.add("bool "),
              b.add(e.name + "_alphaEnabled"))
            : e.usage == B.VECTOR_4_ARRAY
            ? b.add(e.name + "[128]")
            : b.add(e.name);
          b.add(";\n");
        }
      }
      return b.toString();
    },
    __class__: Fj,
  };
  var Gj = function () {};
  l["openfl._internal.formats.agal._AGALConverter.RegisterMapEntry"] = Gj;
  Gj.__name__ =
    "openfl _internal formats agal _AGALConverter RegisterMapEntry".split(" ");
  Gj.prototype = {
    name: null,
    number: null,
    type: null,
    usage: null,
    __class__: Gj,
  };
  var B = (l["openfl._internal.formats.agal._AGALConverter.RegisterUsage"] = {
    __ename__:
      "openfl _internal formats agal _AGALConverter RegisterUsage".split(" "),
    __constructs__:
      "UNUSED VECTOR_4 MATRIX_4_4 SAMPLER_2D SAMPLER_2D_ALPHA SAMPLER_CUBE SAMPLER_CUBE_ALPHA VECTOR_4_ARRAY".split(
        " "
      ),
  });
  B.UNUSED = ["UNUSED", 0];
  B.UNUSED.toString = M;
  B.UNUSED.__enum__ = B;
  B.VECTOR_4 = ["VECTOR_4", 1];
  B.VECTOR_4.toString = M;
  B.VECTOR_4.__enum__ = B;
  B.MATRIX_4_4 = ["MATRIX_4_4", 2];
  B.MATRIX_4_4.toString = M;
  B.MATRIX_4_4.__enum__ = B;
  B.SAMPLER_2D = ["SAMPLER_2D", 3];
  B.SAMPLER_2D.toString = M;
  B.SAMPLER_2D.__enum__ = B;
  B.SAMPLER_2D_ALPHA = ["SAMPLER_2D_ALPHA", 4];
  B.SAMPLER_2D_ALPHA.toString = M;
  B.SAMPLER_2D_ALPHA.__enum__ = B;
  B.SAMPLER_CUBE = ["SAMPLER_CUBE", 5];
  B.SAMPLER_CUBE.toString = M;
  B.SAMPLER_CUBE.__enum__ = B;
  B.SAMPLER_CUBE_ALPHA = ["SAMPLER_CUBE_ALPHA", 6];
  B.SAMPLER_CUBE_ALPHA.toString = M;
  B.SAMPLER_CUBE_ALPHA.__enum__ = B;
  B.VECTOR_4_ARRAY = ["VECTOR_4_ARRAY", 7];
  B.VECTOR_4_ARRAY.toString = M;
  B.VECTOR_4_ARRAY.__enum__ = B;
  var Eg = function () {};
  l["openfl._internal.formats.agal._AGALConverter.SamplerRegister"] = Eg;
  Eg.__name__ =
    "openfl _internal formats agal _AGALConverter SamplerRegister".split(" ");
  Eg.parse = function (a, b) {
    var c = new Eg();
    c.programType = b;
    b = new ka(a.high >> 31, a.high >> 28);
    var d = new ka(0, 15);
    b = new ka(b.high & d.high, b.low & d.low);
    c.f = b.low;
    b = new ka(a.high >> 31, a.high >> 24);
    d = new ka(0, 15);
    b = new ka(b.high & d.high, b.low & d.low);
    c.m = b.low;
    b = new ka(a.high >> 31, a.high >> 20);
    d = new ka(0, 15);
    b = new ka(b.high & d.high, b.low & d.low);
    c.w = b.low;
    b = new ka(a.high >> 31, a.high >> 16);
    d = new ka(0, 15);
    b = new ka(b.high & d.high, b.low & d.low);
    c.s = b.low;
    b = new ka(a.high >> 31, a.high >> 12);
    d = new ka(0, 15);
    b = new ka(b.high & d.high, b.low & d.low);
    c.d = b.low;
    b = new ka(a.high >> 31, a.high >> 8);
    d = new ka(0, 15);
    b = new ka(b.high & d.high, b.low & d.low);
    c.t = b.low;
    b = new ka(a.high >> 31, a.high >> 0);
    d = new ka(0, 15);
    b = new ka(b.high & d.high, b.low & d.low);
    c.type = b.low;
    b = new ka(a.high >> 16, (a.high << 16) | (a.low >>> 16));
    d = new ka(0, 255);
    b = new ka(b.high & d.high, b.low & d.low);
    c.b = b.low;
    b = new ka(0, 65535);
    a = new ka(a.high & b.high, a.low & b.low);
    c.n = a.low;
    return c;
  };
  Eg.prototype = {
    b: null,
    d: null,
    f: null,
    m: null,
    n: null,
    programType: null,
    s: null,
    t: null,
    type: null,
    w: null,
    toGLSL: function () {
      return rc.prefixFromType(this.type, this.programType) + this.n;
    },
    toSamplerState: function () {
      switch (this.f) {
        case 0:
          var a = 5;
          break;
        case 1:
          a = 4;
          break;
        default:
          throw new G(new xb());
      }
      switch (this.m) {
        case 0:
          var b = 2;
          break;
        case 1:
          b = 1;
          break;
        case 2:
          b = 0;
          break;
        default:
          throw new G(new xb());
      }
      switch (this.w) {
        case 0:
          var c = 0;
          break;
        case 1:
          c = 2;
          break;
        default:
          throw new G(new xb());
      }
      return new cg(
        c,
        a,
        b,
        ((this.b << 24) >> 24) / 8,
        4 == (this.s & 4),
        1 == (this.s & 1),
        2 == this.t
      );
    },
    __class__: Eg,
  };
  var bg = function () {};
  l["openfl._internal.formats.agal._AGALConverter.SourceRegister"] = bg;
  bg.__name__ =
    "openfl _internal formats agal _AGALConverter SourceRegister".split(" ");
  bg.parse = function (a, b, c) {
    var d = new bg();
    d.programType = b;
    b = new ka(a.high >> 31, a.high >> 31);
    var e = new ka(0, 1);
    b = new ka(b.high & e.high, b.low & e.low);
    d.d = b.low;
    b = new ka(a.high >> 31, a.high >> 16);
    e = new ka(0, 3);
    b = new ka(b.high & e.high, b.low & e.low);
    d.q = b.low;
    b = new ka(a.high >> 31, a.high >> 8);
    e = new ka(0, 15);
    b = new ka(b.high & e.high, b.low & e.low);
    d.itype = b.low;
    b = new ka(a.high >> 31, a.high >> 0);
    e = new ka(0, 15);
    b = new ka(b.high & e.high, b.low & e.low);
    d.type = b.low;
    b = new ka(a.high >> 24, (a.high << 8) | (a.low >>> 24));
    e = new ka(0, 255);
    b = new ka(b.high & e.high, b.low & e.low);
    d.s = b.low;
    b = new ka(a.high >> 16, (a.high << 16) | (a.low >>> 16));
    e = new ka(0, 255);
    b = new ka(b.high & e.high, b.low & e.low);
    d.o = b.low;
    b = new ka(0, 65535);
    a = new ka(a.high & b.high, a.low & b.low);
    d.n = a.low;
    d.sourceMask = c;
    return d;
  };
  bg.prototype = {
    d: null,
    itype: null,
    n: null,
    o: null,
    programType: null,
    q: null,
    s: null,
    sourceMask: null,
    type: null,
    toGLSL: function (a, b) {
      null == b && (b = 0);
      null == a && (a = !0);
      if (3 == this.type)
        return this.programType == Hc.VERTEX ? "gl_Position" : "gl_FragColor";
      var c = 228 == this.s && 15 == this.sourceMask,
        d = "";
      if (5 != this.type && !c)
        for (c = 0; 4 > c; ) {
          var e = c++;
          if (0 != (this.sourceMask & (1 << e)))
            switch ((this.s >> (2 * e)) & 3) {
              case 0:
                d += "x";
                break;
              case 1:
                d += "y";
                break;
              case 2:
                d += "z";
                break;
              case 3:
                d += "w";
            }
        }
      c = rc.prefixFromType(this.type, this.programType);
      0 == this.d
        ? (c += this.n + b)
        : ((c += this.o),
          (e = String.fromCharCode(S.cca("x", 0) + this.q)),
          (e =
            rc.prefixFromType(this.itype, this.programType) + this.n + "." + e),
          (c += "[ int(" + e + ") +" + b + "]"));
      a && "" != d && (c += "." + d);
      return c;
    },
    __class__: bg,
  };
  var U = function () {};
  l["openfl._internal.formats.html.HTMLParser"] = U;
  U.__name__ = ["openfl", "_internal", "formats", "html", "HTMLParser"];
  U.parse = function (a, b, c) {
    a = U.__regexBreakTag.replace(a, "\n");
    a = U.__regexEntities[0].replace(a, '"');
    a = U.__regexEntities[1].replace(a, "'");
    a = U.__regexEntities[2].replace(a, "&");
    a = U.__regexEntities[5].replace(a, " ");
    var d = a.split("<");
    if (1 == d.length)
      (a = U.__regexHTMLTag.replace(a, "")),
        1 < c.get_length() && c.splice(1, c.get_length() - 1),
        (a = U.__regexEntities[3].replace(a, "<")),
        (a = U.__regexEntities[4].replace(a, ">")),
        (c = c.get(0)),
        (c.format = b),
        (c.start = 0),
        (c.end = a.length);
    else {
      c.splice(0, c.get_length());
      a = "";
      for (var e, f = 0, g = d.length; f < g; ) {
        var h = f++;
        e = d[h];
        e = U.__regexEntities[3].replace(e, "<");
        e = U.__regexEntities[4].replace(e, ">");
        d[h] = e;
      }
      e = [b.clone()];
      f = [];
      h = !1;
      for (g = 0; g < d.length; ) {
        var n = d[g];
        ++g;
        if ("" != n) {
          var p = "/" == S.substr(n, 0, 1),
            k = n.indexOf(">"),
            l = k + 1,
            m = n.indexOf(" ");
          m = n.substring(p ? 1 : 0, -1 < m && m < k ? m : k);
          if (p)
            m.toLowerCase() != f[f.length - 1].toLowerCase()
              ? ca.trace("Invalid HTML, unexpected closing tag ignored: " + m, {
                  fileName: "HTMLParser.hx",
                  lineNumber: 101,
                  className: "openfl._internal.formats.html.HTMLParser",
                  methodName: "parse",
                })
              : (f.pop(),
                e.pop(),
                (p = e[e.length - 1].clone()),
                "p" == m.toLowerCase() &&
                  0 < c.get_length() &&
                  ((a += "\n"), (h = !0)),
                l < n.length &&
                  ((h = S.substr(n, l, null)),
                  c.push(new nf(p, a.length, a.length + h.length)),
                  (a += h),
                  (h = !1)));
          else if (((p = e[e.length - 1].clone()), -1 < k)) {
            switch (m.toLowerCase()) {
              case "a":
                U.__regexHref.match(n) &&
                  (p.url = U.__getAttributeMatch(U.__regexHref));
                break;
              case "b":
                p.bold = !0;
                break;
              case "em":
              case "i":
                p.italic = !0;
                break;
              case "font":
                U.__regexFace.match(n) &&
                  (p.font = U.__getAttributeMatch(U.__regexFace));
                U.__regexColor.match(n) &&
                  (p.color = u.parseInt(
                    "0x" + U.__getAttributeMatch(U.__regexColor)
                  ));
                if (U.__regexSize.match(n)) {
                  k = U.__getAttributeMatch(U.__regexSize);
                  var q = S.cca(k, 0);
                  p.size =
                    43 == q || 45 == q
                      ? (2 <= e.length ? e[e.length - 2] : b).size +
                        u.parseInt(k)
                      : u.parseInt(k);
                }
                break;
              case "p":
                0 < c.get_length() && !h && (a += "\n");
                U.__regexAlign.match(n) &&
                  ((k = U.__getAttributeMatch(U.__regexAlign).toLowerCase()),
                  (p.align = Yk.fromString(k)));
                break;
              case "textformat":
                U.__regexBlockIndent.match(n) &&
                  (p.blockIndent = u.parseInt(
                    U.__getAttributeMatch(U.__regexBlockIndent)
                  ));
                U.__regexIndent.match(n) &&
                  (p.indent = u.parseInt(
                    U.__getAttributeMatch(U.__regexIndent)
                  ));
                U.__regexLeading.match(n) &&
                  (p.leading = u.parseInt(
                    U.__getAttributeMatch(U.__regexLeading)
                  ));
                U.__regexLeftMargin.match(n) &&
                  (p.leftMargin = u.parseInt(
                    U.__getAttributeMatch(U.__regexLeftMargin)
                  ));
                U.__regexRightMargin.match(n) &&
                  (p.rightMargin = u.parseInt(
                    U.__getAttributeMatch(U.__regexRightMargin)
                  ));
                if (U.__regexTabStops.match(n)) {
                  k = U.__getAttributeMatch(U.__regexTabStops).split(" ");
                  q = [];
                  for (var r = 0; r < k.length; ) {
                    var t = k[r];
                    ++r;
                    q.push(u.parseInt(t));
                  }
                  p.tabStops = q;
                }
                break;
              case "u":
                p.underline = !0;
            }
            e.push(p);
            f.push(m);
            l < n.length &&
              ((h = n.substring(l)),
              c.push(new nf(p, a.length, a.length + h.length)),
              (a += h),
              (h = !1));
          } else
            c.push(new nf(p, a.length, a.length + n.length)),
              (a += n),
              (h = !1);
        }
      }
      0 == c.get_length() && c.push(new nf(e[0], 0, 0));
    }
    return a;
  };
  U.__getAttributeMatch = function (a) {
    return null != a.matched(2) ? a.matched(2) : a.matched(3);
  };
  var dg = (l["openfl._internal.formats.swf.FilterType"] = {
    __ename__: ["openfl", "_internal", "formats", "swf", "FilterType"],
    __constructs__: [
      "BlurFilter",
      "ColorMatrixFilter",
      "DropShadowFilter",
      "GlowFilter",
    ],
  });
  dg.BlurFilter = function (a, b, c) {
    a = ["BlurFilter", 0, a, b, c];
    a.__enum__ = dg;
    a.toString = M;
    return a;
  };
  dg.ColorMatrixFilter = function (a) {
    a = ["ColorMatrixFilter", 1, a];
    a.__enum__ = dg;
    a.toString = M;
    return a;
  };
  dg.DropShadowFilter = function (a, b, c, d, e, f, g, h, n, p, k) {
    a = ["DropShadowFilter", 2, a, b, c, d, e, f, g, h, n, p, k];
    a.__enum__ = dg;
    a.toString = M;
    return a;
  };
  dg.GlowFilter = function (a, b, c, d, e, f, g, h) {
    a = ["GlowFilter", 3, a, b, c, d, e, f, g, h];
    a.__enum__ = dg;
    a.toString = M;
    return a;
  };
  var sc = function () {
    this.symbols = new mb();
  };
  l["openfl._internal.formats.swf.SWFLite"] = sc;
  sc.__name__ = ["openfl", "_internal", "formats", "swf", "SWFLite"];
  sc.resolveClass = function (a) {
    var b = I.resolveClass(a);
    null == b && (b = I.resolveClass(J.replace(a, "openfl._legacy", "openfl")));
    null == b && (b = I.resolveClass(J.replace(a, "openfl._v2", "openfl")));
    return b;
  };
  sc.resolveEnum = function (a) {
    var b = I.resolveEnum(a);
    null == b && (b = I.resolveEnum(J.replace(a, "openfl._legacy", "openfl")));
    null == b && (b = I.resolveEnum(J.replace(a, "openfl._v2", "openfl")));
    return b;
  };
  sc.unserialize = function (a) {
    if (null == a) return null;
    a = new hc(a);
    a.setResolver({
      resolveClass: sc.resolveClass,
      resolveEnum: sc.resolveEnum,
    });
    return a.unserialize();
  };
  sc.prototype = {
    frameRate: null,
    library: null,
    root: null,
    symbols: null,
    createButton: function (a) {
      return null;
    },
    createMovieClip: function (a) {
      null == a && (a = "");
      if ("" == a) return this.root.__createObject(this);
      for (var b = this.symbols.iterator(); b.hasNext(); ) {
        var c = b.next();
        if (c.className == a && u.is(c, Fg))
          return r.__cast(c, Fg).__createObject(this);
      }
      return null;
    },
    getBitmapData: function (a) {
      for (var b = this.symbols.iterator(); b.hasNext(); ) {
        var c = b.next();
        if (c.className == a && u.is(c, ud)) return ha.getBitmapData(c.path);
      }
      return null;
    },
    hasSymbol: function (a) {
      for (var b = this.symbols.iterator(); b.hasNext(); )
        if (b.next().className == a) return !0;
      return !1;
    },
    serialize: function () {
      var a = new gc();
      a.serialize(this);
      return a.toString();
    },
    __class__: sc,
  };
  var cb = function () {
    db.call(this);
  };
  l["openfl.utils.AssetLibrary"] = cb;
  cb.__name__ = ["openfl", "utils", "AssetLibrary"];
  cb.fromBytes = function (a, b) {
    return cb.fromManifest(ob.fromBytes(fd.toBytes(a), b));
  };
  cb.fromFile = function (a, b) {
    return cb.fromManifest(ob.fromFile(a, b));
  };
  cb.fromManifest = function (a) {
    a = db.fromManifest(a);
    if (null != a) {
      if (u.is(a, cb)) return a;
      var b = new cb();
      b.__proxy = a;
      return b;
    }
    return null;
  };
  cb.loadFromBytes = function (a, b) {
    return ob.loadFromBytes(fd.toBytes(a), b).then(function (a) {
      return cb.loadFromManifest(a);
    });
  };
  cb.loadFromFile = function (a, b) {
    return ob.loadFromFile(a, b).then(function (a) {
      return cb.loadFromManifest(a);
    });
  };
  cb.loadFromManifest = function (a) {
    a = cb.fromManifest(a);
    return null != a
      ? a.load().then(function (a) {
          return La.withValue(a);
        })
      : La.withError("Could not load asset manifest");
  };
  cb.__super__ = db;
  cb.prototype = v(db.prototype, {
    __proxy: null,
    exists: function (a, b) {
      return null != this.__proxy
        ? this.__proxy.exists(a, b)
        : db.prototype.exists.call(this, a, b);
    },
    getAsset: function (a, b) {
      return null != this.__proxy
        ? this.__proxy.getAsset(a, b)
        : db.prototype.getAsset.call(this, a, b);
    },
    getAudioBuffer: function (a) {
      return null != this.__proxy
        ? this.__proxy.getAudioBuffer(a)
        : db.prototype.getAudioBuffer.call(this, a);
    },
    getBytes: function (a) {
      return null != this.__proxy
        ? this.__proxy.getBytes(a)
        : db.prototype.getBytes.call(this, a);
    },
    getFont: function (a) {
      return null != this.__proxy
        ? this.__proxy.getFont(a)
        : db.prototype.getFont.call(this, a);
    },
    getImage: function (a) {
      return null != this.__proxy
        ? this.__proxy.getImage(a)
        : db.prototype.getImage.call(this, a);
    },
    getText: function (a) {
      return null != this.__proxy
        ? this.__proxy.getText(a)
        : db.prototype.getText.call(this, a);
    },
    isLocal: function (a, b) {
      return null != this.__proxy
        ? this.__proxy.isLocal(a, b)
        : db.prototype.isLocal.call(this, a, b);
    },
    load: function () {
      return null != this.__proxy
        ? this.__proxy.load()
        : db.prototype.load.call(this);
    },
    loadAudioBuffer: function (a) {
      return null != this.__proxy
        ? this.__proxy.loadAudioBuffer(a)
        : db.prototype.loadAudioBuffer.call(this, a);
    },
    loadBytes: function (a) {
      return null != this.__proxy
        ? this.__proxy.loadBytes(a)
        : db.prototype.loadBytes.call(this, a);
    },
    loadFont: function (a) {
      return null != this.__proxy
        ? this.__proxy.loadFont(a)
        : db.prototype.loadFont.call(this, a);
    },
    loadImage: function (a) {
      return null != this.__proxy
        ? this.__proxy.loadImage(a)
        : db.prototype.loadImage.call(this, a);
    },
    loadText: function (a) {
      return null != this.__proxy
        ? this.__proxy.loadText(a)
        : db.prototype.loadText.call(this, a);
    },
    unload: function () {
      null != this.__proxy
        ? this.__proxy.unload()
        : db.prototype.unload.call(this);
    },
    __class__: cb,
  });
  var Hj = function (a, b) {
    db.call(this);
    this.id = a;
    this.instanceID = null != b ? b : a;
    this.alphaCheck = new sa();
    this.imageClassNames = new sa();
    this.rootPath = "";
  };
  l["openfl._internal.formats.swf.SWFLiteLibrary"] = Hj;
  Hj.__name__ = ["openfl", "_internal", "formats", "swf", "SWFLiteLibrary"];
  Hj.__super__ = cb;
  Hj.prototype = v(cb.prototype, {
    alphaCheck: null,
    id: null,
    imageClassNames: null,
    instanceID: null,
    preloading: null,
    rootPath: null,
    swf: null,
    exists: function (a, b) {
      return null == this.swf
        ? !1
        : "" == a && "MOVIE_CLIP" == b
        ? !0
        : ("IMAGE" != b && "MOVIE_CLIP" != b) || null == this.swf
        ? !1
        : this.swf.hasSymbol(a);
    },
    getImage: function (a) {
      this.imageClassNames.exists(a) && (a = this.imageClassNames.get(a));
      if (!this.alphaCheck.exists(a))
        for (var b = this.swf.symbols.iterator(); b.hasNext(); ) {
          var c = b.next();
          if (u.is(c, ud) && r.__cast(c, ud).path == a && null != c.alpha) {
            b = cb.prototype.getImage.call(this, a);
            var d = cb.prototype.getImage.call(this, c.alpha);
            this.__copyChannel(b, d);
            this.cachedImages.set(a, b);
            this.cachedImages.remove(c.alpha);
            this.alphaCheck.set(a, !0);
            return b;
          }
        }
      return cb.prototype.getImage.call(this, a);
    },
    getMovieClip: function (a) {
      return null != this.swf ? this.swf.createMovieClip(a) : null;
    },
    isLocal: function (a, b) {
      return !0;
    },
    load: function () {
      var a = this;
      null != this.id && this.preload.set(this.id, !0);
      var b = new Wb();
      this.preloading = !0;
      var c = function (c) {
        a.cachedText.set(a.id, c);
        a.swf = sc.unserialize(c);
        a.swf.library = a;
        for (c = a.swf.symbols.iterator(); c.hasNext(); ) {
          var d = c.next();
          u.is(d, ud) &&
            null != d.className &&
            a.imageClassNames.set(d.className, d.path);
        }
        sc.instances.set(a.instanceID, a.swf);
        a.__load()
          .onProgress(m(b, b.progress))
          .onError(m(b, b.error))
          .onComplete(function (c) {
            a.preloading = !1;
            b.complete(a);
          });
      };
      if (ha.exists(this.id)) {
        for (var d = this.paths.keys(); d.hasNext(); ) {
          var e = d.next();
          this.preload.set(e, !0);
        }
        this.loadText(this.id).onError(m(b, b.error)).onComplete(c);
      } else {
        for (d = this.paths.keys(); d.hasNext(); )
          (e = d.next()), this.preload.set(e, !0);
        d = null;
        d = this.paths.exists(this.id)
          ? this.paths.get(this.id)
          : null != this.rootPath && "" != this.rootPath
          ? this.rootPath + "/" + this.id
          : this.id;
        var f = new Mh();
        f.addEventListener("complete", function (a) {
          c(f.data);
        });
        f.addEventListener("ioError", function (a) {
          b.error(a);
        });
        f.load(new Nh(d));
      }
      return b.future;
    },
    loadImage: function (a) {
      var b = this;
      this.imageClassNames.exists(a) && (a = this.imageClassNames.get(a));
      if (!this.preloading && !this.alphaCheck.exists(a))
        for (var c = this.swf.symbols.iterator(); c.hasNext(); ) {
          var d = c.next();
          if (
            u.is(d, ud) &&
            r.__cast(d, ud).path == a &&
            ((d = [d]), null != d[0].alpha)
          )
            return (
              (c = [new Wb()]),
              this.__loadImage(a)
                .onError(((Ya = c[0]), m(Ya, Ya.error)))
                .onComplete(
                  (function (c, d) {
                    return function (e) {
                      b.__loadImage(d[0].alpha)
                        .onError(((Ya = c[0]), m(Ya, Ya.error)))
                        .onComplete(
                          (function (c, d) {
                            return function (f) {
                              b.__copyChannel(e, f);
                              b.cachedImages.set(a, e);
                              b.cachedImages.remove(d[0].alpha);
                              b.alphaCheck.set(a, !0);
                              c[0].complete(e);
                            };
                          })(c, d)
                        );
                    };
                  })(c, d)
                ),
              c[0].future
            );
        }
      return cb.prototype.loadImage.call(this, a);
    },
    unload: function () {
      if (null != this.swf) {
        sc.instances.exists(this.instanceID) &&
          sc.instances.get(this.instanceID) == this.swf &&
          sc.instances.remove(this.instanceID);
        for (var a, b = this.swf.symbols.iterator(); b.hasNext(); )
          (a = b.next()), u.is(a, ud) && ha.cache.removeBitmapData(a.path);
      }
    },
    __copyChannel: function (a, b) {
      null != b && a.copyChannel(b, b.get_rect(), new fe(), $a.RED, $a.ALPHA);
      a.buffer.premultiplied = !0;
      a.set_premultiplied(!1);
    },
    __fromManifest: function (a) {
      this.rootPath = a.rootPath;
      cb.prototype.__fromManifest.call(this, a);
      this.bytesTotal = 0;
      for (a = this.paths.keys(); a.hasNext(); ) {
        var b = a.next();
        this.bytesTotal += this.sizes.get(b);
      }
    },
    __load: function () {
      return cb.prototype.load.call(this);
    },
    __loadImage: function (a) {
      return cb.prototype.loadImage.call(this, a);
    },
    __class__: Hj,
  });
  var Ic = (l["openfl._internal.formats.swf.ShapeCommand"] = {
    __ename__: ["openfl", "_internal", "formats", "swf", "ShapeCommand"],
    __constructs__:
      "BeginBitmapFill BeginFill BeginGradientFill CurveTo EndFill LineStyle LineTo MoveTo".split(
        " "
      ),
  });
  Ic.BeginBitmapFill = function (a, b, c, d) {
    a = ["BeginBitmapFill", 0, a, b, c, d];
    a.__enum__ = Ic;
    a.toString = M;
    return a;
  };
  Ic.BeginFill = function (a, b) {
    a = ["BeginFill", 1, a, b];
    a.__enum__ = Ic;
    a.toString = M;
    return a;
  };
  Ic.BeginGradientFill = function (a, b, c, d, e, f, g, h) {
    a = ["BeginGradientFill", 2, a, b, c, d, e, f, g, h];
    a.__enum__ = Ic;
    a.toString = M;
    return a;
  };
  Ic.CurveTo = function (a, b, c, d) {
    a = ["CurveTo", 3, a, b, c, d];
    a.__enum__ = Ic;
    a.toString = M;
    return a;
  };
  Ic.EndFill = ["EndFill", 4];
  Ic.EndFill.toString = M;
  Ic.EndFill.__enum__ = Ic;
  Ic.LineStyle = function (a, b, c, d, e, f, g, h) {
    a = ["LineStyle", 5, a, b, c, d, e, f, g, h];
    a.__enum__ = Ic;
    a.toString = M;
    return a;
  };
  Ic.LineTo = function (a, b) {
    a = ["LineTo", 6, a, b];
    a.__enum__ = Ic;
    a.toString = M;
    return a;
  };
  Ic.MoveTo = function (a, b) {
    a = ["MoveTo", 7, a, b];
    a.__enum__ = Ic;
    a.toString = M;
    return a;
  };
  var tc = function () {
    null == tc.empty
      ? ((this.types = []),
        (this.b = []),
        (this.i = []),
        (this.f = []),
        (this.o = []),
        (this.ff = []),
        (this.ii = []),
        (this.copyOnWrite = !0))
      : this.clear();
  };
  l["openfl._internal.renderer.DrawCommandBuffer"] = tc;
  tc.__name__ = ["openfl", "_internal", "renderer", "DrawCommandBuffer"];
  tc.prototype = {
    types: null,
    b: null,
    copyOnWrite: null,
    f: null,
    ff: null,
    i: null,
    ii: null,
    o: null,
    append: function (a) {
      if (0 == this.get_length())
        return (
          (this.types = a.types),
          (this.b = a.b),
          (this.i = a.i),
          (this.f = a.f),
          (this.o = a.o),
          (this.ff = a.ff),
          (this.ii = a.ii),
          (this.copyOnWrite = a.copyOnWrite = !0),
          a
        );
      for (var b = new Pd(a), c = 0, d = a.types; c < d.length; ) {
        var e = d[c];
        ++c;
        switch (I.enumIndex(e)) {
          case 0:
            e = b.readBeginBitmapFill();
            this.beginBitmapFill(e.obj(0), e.obj(1), e.bool(0), e.bool(1));
            break;
          case 1:
            e = b.readBeginFill();
            this.beginFill(e["int"](0), e["float"](0));
            break;
          case 2:
            e = b.readBeginGradientFill();
            this.beginGradientFill(
              e.obj(0),
              e.iArr(0),
              e.fArr(0),
              e.iArr(1),
              e.obj(1),
              e.obj(2),
              e.obj(3),
              e["float"](0)
            );
            break;
          case 3:
            e = b.readBeginShaderFill();
            this.beginShaderFill(e.obj(0));
            break;
          case 4:
            e = b.readCubicCurveTo();
            this.cubicCurveTo(
              e["float"](0),
              e["float"](1),
              e["float"](2),
              e["float"](3),
              e["float"](4),
              e["float"](5)
            );
            break;
          case 5:
            e = b.readCurveTo();
            this.curveTo(
              e["float"](0),
              e["float"](1),
              e["float"](2),
              e["float"](3)
            );
            break;
          case 6:
            e = b.readDrawCircle();
            this.drawCircle(e["float"](0), e["float"](1), e["float"](2));
            break;
          case 7:
            e = b.readDrawEllipse();
            this.drawEllipse(
              e["float"](0),
              e["float"](1),
              e["float"](2),
              e["float"](3)
            );
            break;
          case 8:
            e = b.readDrawQuads();
            this.drawQuads(e.obj(0), e.obj(1), e.obj(2));
            break;
          case 9:
            e = b.readDrawRect();
            this.drawRect(
              e["float"](0),
              e["float"](1),
              e["float"](2),
              e["float"](3)
            );
            break;
          case 10:
            e = b.readDrawRoundRect();
            this.drawRoundRect(
              e["float"](0),
              e["float"](1),
              e["float"](2),
              e["float"](3),
              e["float"](4),
              e.obj(0)
            );
            break;
          case 12:
            e = b.readDrawTriangles();
            this.drawTriangles(e.obj(0), e.obj(1), e.obj(2), e.obj(3));
            break;
          case 13:
            b.readEndFill();
            this.endFill();
            break;
          case 14:
            e = b.readLineBitmapStyle();
            this.lineBitmapStyle(e.obj(0), e.obj(1), e.bool(0), e.bool(1));
            break;
          case 15:
            e = b.readLineGradientStyle();
            this.lineGradientStyle(
              e.obj(0),
              e.iArr(0),
              e.fArr(0),
              e.iArr(1),
              e.obj(1),
              e.obj(2),
              e.obj(3),
              e["float"](0)
            );
            break;
          case 16:
            e = b.readLineStyle();
            this.lineStyle(
              e.obj(0),
              e["int"](0),
              e["float"](0),
              e.bool(0),
              e.obj(1),
              e.obj(2),
              e.obj(3),
              e["float"](1)
            );
            break;
          case 17:
            e = b.readLineTo();
            this.lineTo(e["float"](0), e["float"](1));
            break;
          case 18:
            e = b.readMoveTo();
            this.moveTo(e["float"](0), e["float"](1));
            break;
          case 19:
            e = b.readOverrideMatrix();
            this.overrideMatrix(e.obj(0));
            break;
          case 20:
            b.readWindingEvenOdd();
            this.windingEvenOdd();
            break;
          case 21:
            b.readWindingNonZero(), this.windingNonZero();
        }
      }
      b.destroy();
      return a;
    },
    beginBitmapFill: function (a, b, c, d) {
      this.prepareWrite();
      this.types.push(D.BEGIN_BITMAP_FILL);
      this.o.push(a);
      this.o.push(b);
      this.b.push(c);
      this.b.push(d);
    },
    beginFill: function (a, b) {
      this.prepareWrite();
      this.types.push(D.BEGIN_FILL);
      this.i.push(a);
      this.f.push(b);
    },
    beginGradientFill: function (a, b, c, d, e, f, g, h) {
      this.prepareWrite();
      this.types.push(D.BEGIN_GRADIENT_FILL);
      this.o.push(a);
      this.ii.push(b);
      this.ff.push(c);
      this.ii.push(d);
      this.o.push(e);
      this.o.push(f);
      this.o.push(g);
      this.f.push(h);
    },
    beginShaderFill: function (a) {
      this.prepareWrite();
      this.types.push(D.BEGIN_SHADER_FILL);
      this.o.push(a);
    },
    clear: function () {
      this.types = tc.empty.types;
      this.b = tc.empty.b;
      this.i = tc.empty.i;
      this.f = tc.empty.f;
      this.o = tc.empty.o;
      this.ff = tc.empty.ff;
      this.ii = tc.empty.ii;
      this.copyOnWrite = !0;
    },
    copy: function () {
      var a = new tc();
      a.append(this);
      return a;
    },
    cubicCurveTo: function (a, b, c, d, e, f) {
      this.prepareWrite();
      this.types.push(D.CUBIC_CURVE_TO);
      this.f.push(a);
      this.f.push(b);
      this.f.push(c);
      this.f.push(d);
      this.f.push(e);
      this.f.push(f);
    },
    curveTo: function (a, b, c, d) {
      this.prepareWrite();
      this.types.push(D.CURVE_TO);
      this.f.push(a);
      this.f.push(b);
      this.f.push(c);
      this.f.push(d);
    },
    drawCircle: function (a, b, c) {
      this.prepareWrite();
      this.types.push(D.DRAW_CIRCLE);
      this.f.push(a);
      this.f.push(b);
      this.f.push(c);
    },
    drawEllipse: function (a, b, c, d) {
      this.prepareWrite();
      this.types.push(D.DRAW_ELLIPSE);
      this.f.push(a);
      this.f.push(b);
      this.f.push(c);
      this.f.push(d);
    },
    drawQuads: function (a, b, c) {
      this.prepareWrite();
      this.types.push(D.DRAW_QUADS);
      this.o.push(a);
      this.o.push(b);
      this.o.push(c);
    },
    drawRect: function (a, b, c, d) {
      this.prepareWrite();
      this.types.push(D.DRAW_RECT);
      this.f.push(a);
      this.f.push(b);
      this.f.push(c);
      this.f.push(d);
    },
    drawRoundRect: function (a, b, c, d, e, f) {
      this.prepareWrite();
      this.types.push(D.DRAW_ROUND_RECT);
      this.f.push(a);
      this.f.push(b);
      this.f.push(c);
      this.f.push(d);
      this.f.push(e);
      this.o.push(f);
    },
    drawTriangles: function (a, b, c, d) {
      this.prepareWrite();
      this.types.push(D.DRAW_TRIANGLES);
      this.o.push(a);
      this.o.push(b);
      this.o.push(c);
      this.o.push(d);
    },
    endFill: function () {
      this.prepareWrite();
      this.types.push(D.END_FILL);
    },
    lineBitmapStyle: function (a, b, c, d) {
      this.prepareWrite();
      this.types.push(D.LINE_BITMAP_STYLE);
      this.o.push(a);
      this.o.push(b);
      this.b.push(c);
      this.b.push(d);
    },
    lineGradientStyle: function (a, b, c, d, e, f, g, h) {
      this.prepareWrite();
      this.types.push(D.LINE_GRADIENT_STYLE);
      this.o.push(a);
      this.ii.push(b);
      this.ff.push(c);
      this.ii.push(d);
      this.o.push(e);
      this.o.push(f);
      this.o.push(g);
      this.f.push(h);
    },
    lineStyle: function (a, b, c, d, e, f, g, h) {
      this.prepareWrite();
      this.types.push(D.LINE_STYLE);
      this.o.push(a);
      this.i.push(b);
      this.f.push(c);
      this.b.push(d);
      this.o.push(e);
      this.o.push(f);
      this.o.push(g);
      this.f.push(h);
    },
    lineTo: function (a, b) {
      this.prepareWrite();
      this.types.push(D.LINE_TO);
      this.f.push(a);
      this.f.push(b);
    },
    moveTo: function (a, b) {
      this.prepareWrite();
      this.types.push(D.MOVE_TO);
      this.f.push(a);
      this.f.push(b);
    },
    prepareWrite: function () {
      this.copyOnWrite &&
        ((this.types = this.types.slice()),
        (this.b = this.b.slice()),
        (this.i = this.i.slice()),
        (this.f = this.f.slice()),
        (this.o = this.o.slice()),
        (this.ff = this.ff.slice()),
        (this.ii = this.ii.slice()),
        (this.copyOnWrite = !1));
    },
    overrideMatrix: function (a) {
      this.prepareWrite();
      this.types.push(D.OVERRIDE_MATRIX);
      this.o.push(a);
    },
    windingEvenOdd: function () {
      this.prepareWrite();
      this.types.push(D.WINDING_EVEN_ODD);
    },
    windingNonZero: function () {
      this.prepareWrite();
      this.types.push(D.WINDING_NON_ZERO);
    },
    get_length: function () {
      return this.types.length;
    },
    __class__: tc,
    __properties__: { get_length: "get_length" },
  };
  var Pd = function (a) {
    this.buffer = a;
    this.bPos =
      this.iPos =
      this.fPos =
      this.oPos =
      this.ffPos =
      this.iiPos =
      this.tsPos =
        0;
    this.prev = D.UNKNOWN;
  };
  l["openfl._internal.renderer.DrawCommandReader"] = Pd;
  Pd.__name__ = ["openfl", "_internal", "renderer", "DrawCommandReader"];
  Pd.prototype = {
    buffer: null,
    bPos: null,
    iiPos: null,
    iPos: null,
    ffPos: null,
    fPos: null,
    oPos: null,
    prev: null,
    tsPos: null,
    advance: function () {
      switch (I.enumIndex(this.prev)) {
        case 0:
          this.oPos += 2;
          this.bPos += 2;
          break;
        case 1:
          this.iPos += 1;
          this.fPos += 1;
          break;
        case 2:
          this.oPos += 4;
          this.iiPos += 2;
          this.ffPos += 1;
          this.fPos += 1;
          break;
        case 3:
          this.oPos += 1;
          break;
        case 4:
          this.fPos += 6;
          break;
        case 5:
          this.fPos += 4;
          break;
        case 6:
          this.fPos += 3;
          break;
        case 7:
          this.fPos += 4;
          break;
        case 8:
          this.oPos += 3;
          break;
        case 9:
          this.fPos += 4;
          break;
        case 10:
          this.fPos += 5;
          this.oPos += 1;
          break;
        case 12:
          this.oPos += 4;
          break;
        case 14:
          this.oPos += 2;
          this.bPos += 2;
          break;
        case 15:
          this.oPos += 4;
          this.iiPos += 2;
          this.ffPos += 1;
          this.fPos += 1;
          break;
        case 16:
          this.oPos += 4;
          this.iPos += 1;
          this.fPos += 2;
          this.bPos += 1;
          break;
        case 17:
          this.fPos += 2;
          break;
        case 18:
          this.fPos += 2;
          break;
        case 19:
          this.oPos += 1;
      }
    },
    bool: function (a) {
      return this.buffer.b[this.bPos + a];
    },
    destroy: function () {
      this.buffer = null;
      this.reset();
    },
    fArr: function (a) {
      return this.buffer.ff[this.ffPos + a];
    },
    float: function (a) {
      return this.buffer.f[this.fPos + a];
    },
    iArr: function (a) {
      return this.buffer.ii[this.iiPos + a];
    },
    int: function (a) {
      return this.buffer.i[this.iPos + a];
    },
    obj: function (a) {
      return this.buffer.o[this.oPos + a];
    },
    readBeginBitmapFill: function () {
      this.advance();
      this.prev = D.BEGIN_BITMAP_FILL;
      return this;
    },
    readBeginFill: function () {
      this.advance();
      this.prev = D.BEGIN_FILL;
      return this;
    },
    readBeginGradientFill: function () {
      this.advance();
      this.prev = D.BEGIN_GRADIENT_FILL;
      return this;
    },
    readBeginShaderFill: function () {
      this.advance();
      this.prev = D.BEGIN_SHADER_FILL;
      return this;
    },
    readCubicCurveTo: function () {
      this.advance();
      this.prev = D.CUBIC_CURVE_TO;
      return this;
    },
    readCurveTo: function () {
      this.advance();
      this.prev = D.CURVE_TO;
      return this;
    },
    readDrawCircle: function () {
      this.advance();
      this.prev = D.DRAW_CIRCLE;
      return this;
    },
    readDrawEllipse: function () {
      this.advance();
      this.prev = D.DRAW_ELLIPSE;
      return this;
    },
    readDrawQuads: function () {
      this.advance();
      this.prev = D.DRAW_QUADS;
      return this;
    },
    readDrawRect: function () {
      this.advance();
      this.prev = D.DRAW_RECT;
      return this;
    },
    readDrawRoundRect: function () {
      this.advance();
      this.prev = D.DRAW_ROUND_RECT;
      return this;
    },
    readDrawTriangles: function () {
      this.advance();
      this.prev = D.DRAW_TRIANGLES;
      return this;
    },
    readEndFill: function () {
      this.advance();
      this.prev = D.END_FILL;
      return this;
    },
    readLineBitmapStyle: function () {
      this.advance();
      this.prev = D.LINE_BITMAP_STYLE;
      return this;
    },
    readLineGradientStyle: function () {
      this.advance();
      this.prev = D.LINE_GRADIENT_STYLE;
      return this;
    },
    readLineStyle: function () {
      this.advance();
      this.prev = D.LINE_STYLE;
      return this;
    },
    readLineTo: function () {
      this.advance();
      this.prev = D.LINE_TO;
      return this;
    },
    readMoveTo: function () {
      this.advance();
      this.prev = D.MOVE_TO;
      return this;
    },
    readOverrideMatrix: function () {
      this.advance();
      this.prev = D.OVERRIDE_MATRIX;
      return this;
    },
    readWindingEvenOdd: function () {
      this.advance();
      this.prev = D.WINDING_EVEN_ODD;
      return this;
    },
    readWindingNonZero: function () {
      this.advance();
      this.prev = D.WINDING_NON_ZERO;
      return this;
    },
    reset: function () {
      this.bPos =
        this.iPos =
        this.fPos =
        this.oPos =
        this.ffPos =
        this.iiPos =
        this.tsPos =
          0;
    },
    skip: function (a) {
      this.advance();
      this.prev = a;
    },
    __class__: Pd,
  };
  var D = (l["openfl._internal.renderer.DrawCommandType"] = {
    __ename__: ["openfl", "_internal", "renderer", "DrawCommandType"],
    __constructs__:
      "BEGIN_BITMAP_FILL BEGIN_FILL BEGIN_GRADIENT_FILL BEGIN_SHADER_FILL CUBIC_CURVE_TO CURVE_TO DRAW_CIRCLE DRAW_ELLIPSE DRAW_QUADS DRAW_RECT DRAW_ROUND_RECT DRAW_TILES DRAW_TRIANGLES END_FILL LINE_BITMAP_STYLE LINE_GRADIENT_STYLE LINE_STYLE LINE_TO MOVE_TO OVERRIDE_MATRIX WINDING_EVEN_ODD WINDING_NON_ZERO UNKNOWN".split(
        " "
      ),
  });
  D.BEGIN_BITMAP_FILL = ["BEGIN_BITMAP_FILL", 0];
  D.BEGIN_BITMAP_FILL.toString = M;
  D.BEGIN_BITMAP_FILL.__enum__ = D;
  D.BEGIN_FILL = ["BEGIN_FILL", 1];
  D.BEGIN_FILL.toString = M;
  D.BEGIN_FILL.__enum__ = D;
  D.BEGIN_GRADIENT_FILL = ["BEGIN_GRADIENT_FILL", 2];
  D.BEGIN_GRADIENT_FILL.toString = M;
  D.BEGIN_GRADIENT_FILL.__enum__ = D;
  D.BEGIN_SHADER_FILL = ["BEGIN_SHADER_FILL", 3];
  D.BEGIN_SHADER_FILL.toString = M;
  D.BEGIN_SHADER_FILL.__enum__ = D;
  D.CUBIC_CURVE_TO = ["CUBIC_CURVE_TO", 4];
  D.CUBIC_CURVE_TO.toString = M;
  D.CUBIC_CURVE_TO.__enum__ = D;
  D.CURVE_TO = ["CURVE_TO", 5];
  D.CURVE_TO.toString = M;
  D.CURVE_TO.__enum__ = D;
  D.DRAW_CIRCLE = ["DRAW_CIRCLE", 6];
  D.DRAW_CIRCLE.toString = M;
  D.DRAW_CIRCLE.__enum__ = D;
  D.DRAW_ELLIPSE = ["DRAW_ELLIPSE", 7];
  D.DRAW_ELLIPSE.toString = M;
  D.DRAW_ELLIPSE.__enum__ = D;
  D.DRAW_QUADS = ["DRAW_QUADS", 8];
  D.DRAW_QUADS.toString = M;
  D.DRAW_QUADS.__enum__ = D;
  D.DRAW_RECT = ["DRAW_RECT", 9];
  D.DRAW_RECT.toString = M;
  D.DRAW_RECT.__enum__ = D;
  D.DRAW_ROUND_RECT = ["DRAW_ROUND_RECT", 10];
  D.DRAW_ROUND_RECT.toString = M;
  D.DRAW_ROUND_RECT.__enum__ = D;
  D.DRAW_TILES = ["DRAW_TILES", 11];
  D.DRAW_TILES.toString = M;
  D.DRAW_TILES.__enum__ = D;
  D.DRAW_TRIANGLES = ["DRAW_TRIANGLES", 12];
  D.DRAW_TRIANGLES.toString = M;
  D.DRAW_TRIANGLES.__enum__ = D;
  D.END_FILL = ["END_FILL", 13];
  D.END_FILL.toString = M;
  D.END_FILL.__enum__ = D;
  D.LINE_BITMAP_STYLE = ["LINE_BITMAP_STYLE", 14];
  D.LINE_BITMAP_STYLE.toString = M;
  D.LINE_BITMAP_STYLE.__enum__ = D;
  D.LINE_GRADIENT_STYLE = ["LINE_GRADIENT_STYLE", 15];
  D.LINE_GRADIENT_STYLE.toString = M;
  D.LINE_GRADIENT_STYLE.__enum__ = D;
  D.LINE_STYLE = ["LINE_STYLE", 16];
  D.LINE_STYLE.toString = M;
  D.LINE_STYLE.__enum__ = D;
  D.LINE_TO = ["LINE_TO", 17];
  D.LINE_TO.toString = M;
  D.LINE_TO.__enum__ = D;
  D.MOVE_TO = ["MOVE_TO", 18];
  D.MOVE_TO.toString = M;
  D.MOVE_TO.__enum__ = D;
  D.OVERRIDE_MATRIX = ["OVERRIDE_MATRIX", 19];
  D.OVERRIDE_MATRIX.toString = M;
  D.OVERRIDE_MATRIX.__enum__ = D;
  D.WINDING_EVEN_ODD = ["WINDING_EVEN_ODD", 20];
  D.WINDING_EVEN_ODD.toString = M;
  D.WINDING_EVEN_ODD.__enum__ = D;
  D.WINDING_NON_ZERO = ["WINDING_NON_ZERO", 21];
  D.WINDING_NON_ZERO.toString = M;
  D.WINDING_NON_ZERO.__enum__ = D;
  D.UNKNOWN = ["UNKNOWN", 22];
  D.UNKNOWN.toString = M;
  D.UNKNOWN.__enum__ = D;
  var cg = function (a, b, c, d, e, f, g) {
    null == g && (g = !1);
    null == f && (f = !1);
    null == e && (e = !1);
    null == d && (d = 0);
    null == c && (c = 2);
    null == b && (b = 5);
    null == a && (a = 0);
    this.wrap = a;
    this.filter = b;
    this.mipfilter = c;
    this.lodBias = d;
    this.ignoreSampler = e;
    this.centroid = f;
    this.textureAlpha = g;
  };
  l["openfl._internal.renderer.SamplerState"] = cg;
  cg.__name__ = ["openfl", "_internal", "renderer", "SamplerState"];
  cg.prototype = {
    centroid: null,
    filter: null,
    ignoreSampler: null,
    lodBias: null,
    mipfilter: null,
    mipmapGenerated: null,
    textureAlpha: null,
    wrap: null,
    clone: function () {
      var a = new cg(
        this.wrap,
        this.filter,
        this.mipfilter,
        this.lodBias,
        this.ignoreSampler,
        this.centroid,
        this.textureAlpha
      );
      a.mipmapGenerated = this.mipmapGenerated;
      return a;
    },
    copyFrom: function (a) {
      null == a ||
        a.ignoreSampler ||
        ((this.wrap = a.wrap),
        (this.filter = a.filter),
        (this.mipfilter = a.mipfilter),
        (this.lodBias = a.lodBias),
        (this.centroid = a.centroid),
        (this.textureAlpha = a.textureAlpha));
    },
    equals: function (a) {
      return null == a
        ? !1
        : this.wrap == a.wrap &&
          this.filter == a.filter &&
          this.mipfilter == a.mipfilter &&
          this.lodBias == a.lodBias
        ? this.textureAlpha == a.textureAlpha
        : !1;
    },
    __class__: cg,
  };
  var Ij = function () {
    this.inputRefs = [];
    this.inputFilter = [];
    this.inputMipFilter = [];
    this.inputs = [];
    this.inputWrap = [];
    this.overrideNames = [];
    this.overrideValues = [];
    this.paramLengths = [];
    this.paramPositions = [];
    this.paramRefs_Bool = [];
    this.paramRefs_Float = [];
    this.paramRefs_Int = [];
    this.paramTypes = [];
  };
  l["openfl._internal.renderer.ShaderBuffer"] = Ij;
  Ij.__name__ = ["openfl", "_internal", "renderer", "ShaderBuffer"];
  Ij.prototype = {
    inputCount: null,
    inputRefs: null,
    inputFilter: null,
    inputMipFilter: null,
    inputs: null,
    inputWrap: null,
    overrideCount: null,
    overrideNames: null,
    overrideValues: null,
    paramBoolCount: null,
    paramCount: null,
    paramData: null,
    paramDataBuffer: null,
    paramDataLength: null,
    paramFloatCount: null,
    paramLengths: null,
    paramPositions: null,
    paramRefs_Bool: null,
    paramRefs_Float: null,
    paramRefs_Int: null,
    paramTypes: null,
    shader: null,
    addOverride: function (a, b) {
      this.overrideNames[this.overrideCount] = a;
      this.overrideValues[this.overrideCount] = b;
      this.overrideCount++;
    },
    clearOverride: function () {
      this.overrideCount = 0;
    },
    __class__: Ij,
  };
  var If = function () {};
  l["openfl._internal.renderer.canvas.CanvasBitmap"] = If;
  If.__name__ = ["openfl", "_internal", "renderer", "canvas", "CanvasBitmap"];
  If.render = function (a, b) {
    if (a.__renderable && !(0 >= a.__worldAlpha)) {
      var c = b.context;
      if (
        null != a.__bitmapData &&
        a.__bitmapData.__isValid &&
        a.__bitmapData.readable
      ) {
        b.__setBlendMode(a.__worldBlendMode);
        b.__pushMaskObject(a, !1);
        na.convertToCanvas(a.__bitmapData.image);
        c.globalAlpha = a.__worldAlpha;
        var d = a.__scrollRect;
        b.setTransform(a.__renderTransform, c);
        (b.__allowSmoothing && a.smoothing) || (c.imageSmoothingEnabled = !1);
        null == d
          ? c.drawImage(
              a.__bitmapData.image.get_src(),
              0,
              0,
              a.__bitmapData.image.width,
              a.__bitmapData.image.height
            )
          : c.drawImage(
              a.__bitmapData.image.get_src(),
              d.x,
              d.y,
              d.width,
              d.height
            );
        (b.__allowSmoothing && a.smoothing) || (c.imageSmoothingEnabled = !0);
        b.__popMaskObject(a, !1);
      }
    }
  };
  var Zg = function () {};
  l["openfl._internal.renderer.canvas.CanvasDisplayObject"] = Zg;
  Zg.__name__ = [
    "openfl",
    "_internal",
    "renderer",
    "canvas",
    "CanvasDisplayObject",
  ];
  Zg.render = function (a, b) {
    if (
      !(
        (null == a.opaqueBackground && null == a.__graphics) ||
        !a.__renderable ||
        0 >= a.__worldAlpha
      )
    ) {
      if (
        null != a.opaqueBackground &&
        !a.__isCacheBitmapRender &&
        0 < a.get_width() &&
        0 < a.get_height()
      ) {
        b.__setBlendMode(a.__worldBlendMode);
        b.__pushMaskObject(a);
        var c = b.context;
        b.setTransform(a.__renderTransform, c);
        var d = a.opaqueBackground;
        c.fillStyle =
          "rgb(" +
          ((d >>> 16) & 255) +
          "," +
          ((d >>> 8) & 255) +
          "," +
          (d & 255) +
          ")";
        c.fillRect(0, 0, a.get_width(), a.get_height());
        b.__popMaskObject(a);
      }
      null != a.__graphics && Zk.render(a, b);
    }
  };
  var q = function () {};
  l["openfl._internal.renderer.canvas.CanvasGraphics"] = q;
  q.__name__ = ["openfl", "_internal", "renderer", "canvas", "CanvasGraphics"];
  q.closePath = function (a) {
    null == a && (a = !1);
    null != q.context.strokeStyle &&
      (a || q.context.closePath(),
      q.context.stroke(),
      a && q.context.closePath(),
      q.context.beginPath());
  };
  q.createBitmapFill = function (a, b, c) {
    na.convertToCanvas(a.image);
    q.setSmoothing(c);
    return q.context.createPattern(
      a.image.get_src(),
      b ? "repeat" : "no-repeat"
    );
  };
  q.createGradientPattern = function (a, b, c, d, e, f, g, h) {
    h = g = f = null;
    var n = !1;
    null == e && ((e = ia.__pool.get()), (n = !0));
    switch (a) {
      case 0:
        g = aa.__pool.get();
        g.setTo(-819.2, 0);
        e.__transformPoint(g);
        h = aa.__pool.get();
        h.setTo(819.2, 0);
        e.__transformPoint(h);
        f = q.context.createLinearGradient(g.x, g.y, h.x, h.y);
        break;
      case 1:
        (g = aa.__pool.get()),
          g.setTo(1638.4, 0),
          e.__transformPoint(g),
          (f = q.context.createRadialGradient(
            e.tx,
            e.ty,
            0,
            e.tx,
            e.ty,
            Math.abs((g.x - e.tx) / 2)
          ));
    }
    for (var p, k, l, m, r = 0, E = b.length; r < E; )
      (m = r++),
        (p = b[m]),
        (a = c[m]),
        (k = (p & 16711680) >>> 16),
        (l = (p & 65280) >>> 8),
        (p &= 255),
        (m = d[m] / 255),
        0 > m && (m = 0),
        1 < m && (m = 1),
        f.addColorStop(m, "rgba(" + k + ", " + l + ", " + p + ", " + a + ")");
    null != g && aa.__pool.release(g);
    null != h && aa.__pool.release(h);
    n && ia.__pool.release(e);
    return f;
  };
  q.createTempPatternCanvas = function (a, b, c, d) {
    var e = T.get_document().createElement("canvas"),
      f = e.getContext("2d");
    e.width = c;
    e.height = d;
    a = a.image.get_src();
    f.fillStyle = f.createPattern(a, b ? "repeat" : "no-repeat");
    f.beginPath();
    f.moveTo(0, 0);
    f.lineTo(0, d);
    f.lineTo(c, d);
    f.lineTo(c, 0);
    f.lineTo(0, 0);
    f.closePath();
    q.hitTesting || f.fill(q.windingRule);
    return e;
  };
  q.drawRoundRect = function (a, b, c, d, e, f) {
    null == f && (f = e);
    e *= 0.5;
    f *= 0.5;
    e > c / 2 && (e = c / 2);
    f > d / 2 && (f = d / 2);
    c = a + c;
    d = b + d;
    var g = -e + e * q.SIN45,
      h = -e + e * q.TAN22,
      n = -f + f * q.SIN45,
      p = -f + f * q.TAN22;
    q.context.moveTo(c, d - f);
    q.context.quadraticCurveTo(c, d + p, c + g, d + n);
    q.context.quadraticCurveTo(c + h, d, c - e, d);
    q.context.lineTo(a + e, d);
    q.context.quadraticCurveTo(a - h, d, a - g, d + n);
    q.context.quadraticCurveTo(a, d + p, a, d - f);
    q.context.lineTo(a, b + f);
    q.context.quadraticCurveTo(a, b - p, a - g, b - n);
    q.context.quadraticCurveTo(a - h, b, a + e, b);
    q.context.lineTo(c - e, b);
    q.context.quadraticCurveTo(c + h, b, c + g, b - n);
    q.context.quadraticCurveTo(c, b - p, c, b + f);
    q.context.lineTo(c, d - f);
  };
  q.endFill = function () {
    q.context.beginPath();
    q.playCommands(q.fillCommands, !1);
    q.fillCommands.clear();
  };
  q.endStroke = function () {
    q.context.beginPath();
    q.playCommands(q.strokeCommands, !0);
    q.context.closePath();
    q.strokeCommands.clear();
  };
  q.hitTest = function (a, b, c) {
    q.bounds = a.__bounds;
    q.graphics = a;
    if (
      0 == a.__commands.get_length() ||
      null == q.bounds ||
      0 >= q.bounds.width ||
      0 >= q.bounds.height
    )
      return !1;
    q.hitTesting = !0;
    var d = a.__renderTransform,
      e = d.__transformX(b, c);
    c = d.__transformY(b, c);
    b = e - d.__transformX(q.bounds.x, q.bounds.y);
    c -= d.__transformY(q.bounds.x, q.bounds.y);
    e = a.__canvas;
    var f = a.__context;
    a.__canvas = q.hitTestCanvas;
    a.__context = q.hitTestContext;
    q.context = a.__context;
    q.context.setTransform(d.a, d.b, d.c, d.d, d.tx, d.ty);
    q.fillCommands.clear();
    q.strokeCommands.clear();
    q.hasFill = !1;
    q.hasStroke = !1;
    q.bitmapFill = null;
    q.bitmapRepeat = !1;
    q.windingRule = "evenodd";
    d = new Pd(a.__commands);
    for (var g = 0, h = a.__commands.types; g < h.length; ) {
      var n = h[g];
      ++g;
      switch (I.enumIndex(n)) {
        case 0:
        case 1:
        case 2:
        case 3:
          q.endFill();
          if (q.hasFill && q.context.isPointInPath(b, c, q.windingRule))
            return d.destroy(), (a.__canvas = e), (a.__context = f), !0;
          q.endStroke();
          if (q.hasStroke && q.context.isPointInStroke(b, c))
            return d.destroy(), (a.__canvas = e), (a.__context = f), !0;
          n == D.BEGIN_BITMAP_FILL
            ? ((n = d.readBeginBitmapFill()),
              q.fillCommands.beginBitmapFill(
                n.obj(0),
                n.obj(1),
                n.bool(0),
                n.bool(1)
              ),
              q.strokeCommands.beginBitmapFill(
                n.obj(0),
                n.obj(1),
                n.bool(0),
                n.bool(1)
              ))
            : n == D.BEGIN_GRADIENT_FILL
            ? ((n = d.readBeginGradientFill()),
              q.fillCommands.beginGradientFill(
                n.obj(0),
                n.iArr(0),
                n.fArr(0),
                n.iArr(1),
                n.obj(1),
                n.obj(2),
                n.obj(3),
                n["float"](0)
              ),
              q.strokeCommands.beginGradientFill(
                n.obj(0),
                n.iArr(0),
                n.fArr(0),
                n.iArr(1),
                n.obj(1),
                n.obj(2),
                n.obj(3),
                n["float"](0)
              ))
            : n == D.BEGIN_SHADER_FILL
            ? ((n = d.readBeginShaderFill()),
              q.fillCommands.beginShaderFill(n.obj(0)),
              q.strokeCommands.beginShaderFill(n.obj(0)))
            : ((n = d.readBeginFill()),
              q.fillCommands.beginFill(n["int"](0), 1),
              q.strokeCommands.beginFill(n["int"](0), 1));
          break;
        case 4:
          n = d.readCubicCurveTo();
          q.fillCommands.cubicCurveTo(
            n["float"](0),
            n["float"](1),
            n["float"](2),
            n["float"](3),
            n["float"](4),
            n["float"](5)
          );
          q.strokeCommands.cubicCurveTo(
            n["float"](0),
            n["float"](1),
            n["float"](2),
            n["float"](3),
            n["float"](4),
            n["float"](5)
          );
          break;
        case 5:
          n = d.readCurveTo();
          q.fillCommands.curveTo(
            n["float"](0),
            n["float"](1),
            n["float"](2),
            n["float"](3)
          );
          q.strokeCommands.curveTo(
            n["float"](0),
            n["float"](1),
            n["float"](2),
            n["float"](3)
          );
          break;
        case 6:
          n = d.readDrawCircle();
          q.fillCommands.drawCircle(
            n["float"](0),
            n["float"](1),
            n["float"](2)
          );
          q.strokeCommands.drawCircle(
            n["float"](0),
            n["float"](1),
            n["float"](2)
          );
          break;
        case 7:
          n = d.readDrawEllipse();
          q.fillCommands.drawEllipse(
            n["float"](0),
            n["float"](1),
            n["float"](2),
            n["float"](3)
          );
          q.strokeCommands.drawEllipse(
            n["float"](0),
            n["float"](1),
            n["float"](2),
            n["float"](3)
          );
          break;
        case 9:
          n = d.readDrawRect();
          q.fillCommands.drawRect(
            n["float"](0),
            n["float"](1),
            n["float"](2),
            n["float"](3)
          );
          q.strokeCommands.drawRect(
            n["float"](0),
            n["float"](1),
            n["float"](2),
            n["float"](3)
          );
          break;
        case 10:
          n = d.readDrawRoundRect();
          q.fillCommands.drawRoundRect(
            n["float"](0),
            n["float"](1),
            n["float"](2),
            n["float"](3),
            n["float"](4),
            n.obj(0)
          );
          q.strokeCommands.drawRoundRect(
            n["float"](0),
            n["float"](1),
            n["float"](2),
            n["float"](3),
            n["float"](4),
            n.obj(0)
          );
          break;
        case 13:
          d.readEndFill();
          q.endFill();
          if (q.hasFill && q.context.isPointInPath(b, c, q.windingRule))
            return d.destroy(), (a.__canvas = e), (a.__context = f), !0;
          q.endStroke();
          if (q.hasStroke && q.context.isPointInStroke(b, c))
            return d.destroy(), (a.__canvas = e), (a.__context = f), !0;
          q.hasFill = !1;
          q.bitmapFill = null;
          break;
        case 14:
          n = d.readLineBitmapStyle();
          q.strokeCommands.lineBitmapStyle(
            n.obj(0),
            n.obj(1),
            n.bool(0),
            n.bool(1)
          );
          break;
        case 15:
          n = d.readLineGradientStyle();
          q.strokeCommands.lineGradientStyle(
            n.obj(0),
            n.iArr(0),
            n.fArr(0),
            n.iArr(1),
            n.obj(1),
            n.obj(2),
            n.obj(3),
            n["float"](0)
          );
          break;
        case 16:
          n = d.readLineStyle();
          q.strokeCommands.lineStyle(
            n.obj(0),
            n["int"](0),
            1,
            n.bool(0),
            n.obj(1),
            n.obj(2),
            n.obj(3),
            n["float"](1)
          );
          break;
        case 17:
          n = d.readLineTo();
          q.fillCommands.lineTo(n["float"](0), n["float"](1));
          q.strokeCommands.lineTo(n["float"](0), n["float"](1));
          break;
        case 18:
          n = d.readMoveTo();
          q.fillCommands.moveTo(n["float"](0), n["float"](1));
          q.strokeCommands.moveTo(n["float"](0), n["float"](1));
          break;
        case 20:
          q.windingRule = "evenodd";
          break;
        case 21:
          q.windingRule = "nonzero";
          break;
        default:
          d.skip(n);
      }
    }
    g = !1;
    0 < q.fillCommands.get_length() && q.endFill();
    q.hasFill && q.context.isPointInPath(b, c, q.windingRule) && (g = !0);
    0 < q.strokeCommands.get_length() && q.endStroke();
    q.hasStroke && q.context.isPointInStroke(b, c) && (g = !0);
    d.destroy();
    a.__canvas = e;
    a.__context = f;
    return g;
  };
  q.isCCW = function (a, b, c, d, e, f) {
    return 0 > (c - a) * (f - b) - (d - b) * (e - a);
  };
  q.normalizeUVT = function (a, b) {
    null == b && (b = !1);
    for (var c = -Infinity, d, e = a.get_length(), f = 1, g = e + 1; f < g; )
      (d = f++), (b && 0 == d % 3) || ((d = a.get(d - 1)), c < d && (c = d));
    if (!b) return { max: c, uvt: a };
    f = Eb.toFloatVector(null);
    g = 1;
    for (e += 1; g < e; ) (d = g++), (b && 0 == d % 3) || f.push(a.get(d - 1));
    return { max: c, uvt: f };
  };
  q.playCommands = function (a, b) {
    null == b && (b = !1);
    q.bounds = q.graphics.__bounds;
    var c = q.bounds.x,
      d = q.bounds.y,
      e = 0,
      f = 0,
      g = !1,
      h = 0,
      n = 0,
      p = !1;
    q.windingRule = "evenodd";
    q.setSmoothing(!0);
    var k = !1,
      l = new Pd(a),
      m,
      r,
      E,
      t = null,
      x = null,
      v = 0,
      w = a.types;
    try {
      for (; v < w.length; ) {
        var y = w[v];
        ++v;
        switch (I.enumIndex(y)) {
          case 0:
            var z = l.readBeginBitmapFill();
            q.bitmapFill = z.obj(0);
            var A = z.obj(0),
              C = z.bool(0),
              K = z.bool(1);
            q.context.fillStyle = q.createBitmapFill(A, C, K);
            q.hasFill = !0;
            null != z.obj(1)
              ? ((q.pendingMatrix = z.obj(1)),
                (q.inversePendingMatrix = z.obj(1).clone()),
                q.inversePendingMatrix.invert())
              : ((q.pendingMatrix = null), (q.inversePendingMatrix = null));
            break;
          case 1:
            var B = l.readBeginFill();
            if (0.005 > B["float"](0)) q.hasFill = !1;
            else {
              if (1 == B["float"](0)) {
                var H = J.hex(B["int"](0) & 16777215, 6);
                q.context.fillStyle = "#" + H;
              } else {
                var D = (B["int"](0) & 16711680) >>> 16;
                var F = (B["int"](0) & 65280) >>> 8;
                var G = B["int"](0) & 255;
                var L =
                  "rgba(" + D + ", " + F + ", " + G + ", " + B["float"](0);
                q.context.fillStyle = L + ")";
              }
              q.bitmapFill = null;
              q.setSmoothing(!0);
              q.hasFill = !0;
            }
            break;
          case 2:
            var N = l.readBeginGradientFill(),
              M = N.obj(0),
              S = N.iArr(0),
              O = N.fArr(0),
              V = N.iArr(1),
              T = N.obj(1),
              X = N.obj(2),
              ba = N.obj(3);
            q.context.fillStyle = q.createGradientPattern(
              M,
              S,
              O,
              V,
              T,
              X,
              ba,
              N["float"](0)
            );
            q.bitmapFill = null;
            q.setSmoothing(!0);
            q.hasFill = !0;
            break;
          case 3:
            var Y = l.readBeginShaderFill().obj(0);
            0 < Y.inputCount &&
              ((q.bitmapFill = Y.inputs[0]),
              (q.context.fillStyle = q.createBitmapFill(
                q.bitmapFill,
                0 != Y.inputWrap[0],
                5 != Y.inputFilter[0]
              )),
              (q.hasFill = !0),
              (q.pendingMatrix = null),
              (q.inversePendingMatrix = null));
            break;
          case 4:
            var Q = l.readCubicCurveTo();
            k = !0;
            q.context.bezierCurveTo(
              Q["float"](0) - c,
              Q["float"](1) - d,
              Q["float"](2) - c,
              Q["float"](3) - d,
              Q["float"](4) - c,
              Q["float"](5) - d
            );
            break;
          case 5:
            var U = l.readCurveTo();
            k = !0;
            q.context.quadraticCurveTo(
              U["float"](0) - c,
              U["float"](1) - d,
              U["float"](2) - c,
              U["float"](3) - d
            );
            break;
          case 6:
            var P = l.readDrawCircle();
            k = !0;
            q.context.moveTo(
              P["float"](0) - c + P["float"](2),
              P["float"](1) - d
            );
            q.context.arc(
              P["float"](0) - c,
              P["float"](1) - d,
              P["float"](2),
              0,
              2 * Math.PI,
              !0
            );
            break;
          case 7:
            var ca = l.readDrawEllipse();
            k = !0;
            var W = ca["float"](0);
            var da = ca["float"](1);
            var ea = ca["float"](2);
            var na = ca["float"](3);
            W -= c;
            da -= d;
            var la = (ea / 2) * 0.5522848;
            var pa = (na / 2) * 0.5522848;
            var sa = W + ea;
            var wa = da + na;
            var ta = W + ea / 2;
            var ka = da + na / 2;
            q.context.moveTo(W, ka);
            q.context.bezierCurveTo(W, ka - pa, ta - la, da, ta, da);
            q.context.bezierCurveTo(ta + la, da, sa, ka - pa, sa, ka);
            q.context.bezierCurveTo(sa, ka + pa, ta + la, wa, ta, wa);
            q.context.bezierCurveTo(ta - la, wa, W, ka + pa, W, ka);
            break;
          case 8:
            var qa = l.readDrawQuads(),
              Fa = qa.obj(0),
              ua = qa.obj(1),
              fa = qa.obj(2),
              Ca = null != ua,
              va = !1,
              xa = !1,
              za = Ca ? ua.get_length() : Math.floor(Fa.get_length() / 4);
            if (0 == za) return;
            null != fa &&
              (fa.get_length() >= 6 * za
                ? (xa = va = !0)
                : fa.get_length() >= 4 * za
                ? (va = !0)
                : fa.get_length() >= 2 * za && (xa = !0));
            var ra = Z.__pool.get(),
              oa = ia.__pool.get(),
              Ea = q.graphics.__renderTransform;
            q.context.save();
            for (var Ia = 0, ma = za; Ia < ma; ) {
              var Ga = Ia++;
              var Ha = Ca ? 4 * ua.get(Ga) : 4 * Ga;
              if (
                !(
                  0 > Ha ||
                  (ra.setTo(
                    Fa.get(Ha),
                    Fa.get(Ha + 1),
                    Fa.get(Ha + 2),
                    Fa.get(Ha + 3)
                  ),
                  0 >= ra.width || 0 >= ra.height)
                )
              ) {
                if (va && xa) {
                  var ya = 6 * Ga;
                  oa.setTo(
                    fa.get(ya),
                    fa.get(ya + 1),
                    fa.get(ya + 2),
                    fa.get(ya + 3),
                    fa.get(ya + 4),
                    fa.get(ya + 5)
                  );
                } else
                  va
                    ? ((ya = 4 * Ga),
                      oa.setTo(
                        fa.get(ya),
                        fa.get(ya + 1),
                        fa.get(ya + 2),
                        fa.get(ya + 3),
                        ra.x,
                        ra.y
                      ))
                    : xa
                    ? ((ya = 2 * Ga),
                      (oa.tx = fa.get(ya)),
                      (oa.ty = fa.get(ya + 1)))
                    : ((oa.tx = ra.x), (oa.ty = ra.y));
                oa.tx += e - c;
                oa.ty += f - d;
                oa.concat(Ea);
                q.context.setTransform(oa.a, oa.b, oa.c, oa.d, oa.tx, oa.ty);
                null != q.bitmapFill
                  ? q.context.drawImage(
                      q.bitmapFill.image.get_src(),
                      ra.x,
                      ra.y,
                      ra.width,
                      ra.height,
                      0,
                      0,
                      ra.width,
                      ra.height
                    )
                  : q.context.fillRect(0, 0, ra.width, ra.height);
              }
            }
            Z.__pool.release(ra);
            ia.__pool.release(oa);
            q.context.restore();
            break;
          case 9:
            var ha = l.readDrawRect();
            var Na = !1;
            if (null != q.bitmapFill && !q.hitTesting) {
              var Ba = (E = r = m = 0);
              var Ua = !0;
              null != q.pendingMatrix
                ? 0 != q.pendingMatrix.b || 0 != q.pendingMatrix.c
                  ? (Ua = !1)
                  : (null == t && (t = aa.__pool.get()),
                    null == x && (x = aa.__pool.get()),
                    t.setTo(ha["float"](0), ha["float"](1)),
                    q.inversePendingMatrix.__transformPoint(t),
                    x.setTo(
                      ha["float"](0) + ha["float"](2),
                      ha["float"](1) + ha["float"](3)
                    ),
                    q.inversePendingMatrix.__transformPoint(x),
                    (m = t.y),
                    (Ba = t.x),
                    (E = x.y),
                    (r = x.x))
                : ((m = ha["float"](1)),
                  (Ba = ha["float"](0)),
                  (E = ha["float"](1) + ha["float"](3)),
                  (r = ha["float"](0) + ha["float"](2)));
              Ua &&
                0 <= m &&
                0 <= Ba &&
                r <= q.bitmapFill.width &&
                E <= q.bitmapFill.height &&
                ((Na = !0),
                q.hitTesting ||
                  q.context.drawImage(
                    q.bitmapFill.image.get_src(),
                    Ba,
                    m,
                    r - Ba,
                    E - m,
                    ha["float"](0) - c,
                    ha["float"](1) - d,
                    ha["float"](2),
                    ha["float"](3)
                  ));
            }
            Na ||
              ((k = !0),
              q.context.rect(
                ha["float"](0) - c,
                ha["float"](1) - d,
                ha["float"](2),
                ha["float"](3)
              ));
            break;
          case 10:
            var Ka = l.readDrawRoundRect();
            k = !0;
            q.drawRoundRect(
              Ka["float"](0) - c,
              Ka["float"](1) - d,
              Ka["float"](2),
              Ka["float"](3),
              Ka["float"](4),
              Ka.obj(0)
            );
            break;
          case 12:
            var kb = l.readDrawTriangles(),
              Ja = kb.obj(0),
              Da = kb.obj(1),
              ja = kb.obj(2),
              Aa = null,
              Xa = null == q.bitmapFill;
            if (Xa && null != ja) throw "__break__";
            if (!Xa) {
              if (null == ja) {
                ja = Eb.toFloatVector(null);
                for (
                  var eb = 0, lb = u["int"](Ja.get_length() / 2);
                  eb < lb;

                ) {
                  var bb = eb++;
                  ja.push(Ja.get(2 * bb) - c / q.bitmapFill.width);
                  ja.push(Ja.get(2 * bb + 1) - d / q.bitmapFill.height);
                }
              }
              var Va = ja.get_length() != Ja.get_length(),
                pb = q.normalizeUVT(ja, Va),
                Za = pb.max;
              ja = pb.uvt;
              Aa =
                1 < Za
                  ? q.createTempPatternCanvas(
                      q.bitmapFill,
                      q.bitmapRepeat,
                      u["int"](q.bounds.width),
                      u["int"](q.bounds.height)
                    )
                  : q.createTempPatternCanvas(
                      q.bitmapFill,
                      q.bitmapRepeat,
                      q.bitmapFill.width,
                      q.bitmapFill.height
                    );
            }
            for (
              var La = 0,
                nb = Da.get_length(),
                $a,
                ab,
                jb,
                rb,
                sb,
                qb,
                Wa,
                Oa,
                db,
                Ma,
                gb,
                Sa,
                Pa,
                Qa,
                Ra,
                ob,
                Ya,
                Ta,
                cb,
                ib,
                hb,
                mb,
                zb,
                fb,
                yb,
                vb,
                cd,
                Ab;
              La < nb;

            ) {
              $a = La;
              ab = La + 1;
              jb = La + 2;
              rb = 2 * Da.get($a);
              sb = 2 * Da.get($a) + 1;
              qb = 2 * Da.get(ab);
              Wa = 2 * Da.get(ab) + 1;
              Oa = 2 * Da.get(jb);
              db = 2 * Da.get(jb) + 1;
              Ma = Ja.get(rb) - c;
              gb = Ja.get(sb) - d;
              Sa = Ja.get(qb) - c;
              Pa = Ja.get(Wa) - d;
              Qa = Ja.get(Oa) - c;
              Ra = Ja.get(db) - d;
              switch (kb.obj(3)) {
                case 0:
                  if (q.isCCW(Ma, gb, Sa, Pa, Qa, Ra)) {
                    La += 3;
                    continue;
                  }
                  break;
                case 2:
                  if (!q.isCCW(Ma, gb, Sa, Pa, Qa, Ra)) {
                    La += 3;
                    continue;
                  }
              }
              Xa
                ? (q.context.beginPath(),
                  q.context.moveTo(Ma, gb),
                  q.context.lineTo(Sa, Pa),
                  q.context.lineTo(Qa, Ra),
                  q.context.closePath(),
                  q.hitTesting || q.context.fill(q.windingRule),
                  (La += 3))
                : ((ob = ja.get(rb) * Aa.width),
                  (Ta = ja.get(qb) * Aa.width),
                  (ib = ja.get(Oa) * Aa.width),
                  (Ya = ja.get(sb) * Aa.height),
                  (cb = ja.get(Wa) * Aa.height),
                  (hb = ja.get(db) * Aa.height),
                  (mb = ob * (hb - cb) - Ta * hb + ib * cb + (Ta - ib) * Ya),
                  0 == mb
                    ? ((La += 3), q.context.restore())
                    : (q.context.save(),
                      q.context.beginPath(),
                      q.context.moveTo(Ma, gb),
                      q.context.lineTo(Sa, Pa),
                      q.context.lineTo(Qa, Ra),
                      q.context.closePath(),
                      q.context.clip(),
                      (zb =
                        -(Ya * (Qa - Sa) - cb * Qa + hb * Sa + (cb - hb) * Ma) /
                        mb),
                      (fb =
                        (cb * Ra + Ya * (Pa - Ra) - hb * Pa + (hb - cb) * gb) /
                        mb),
                      (yb =
                        (ob * (Qa - Sa) - Ta * Qa + ib * Sa + (Ta - ib) * Ma) /
                        mb),
                      (vb =
                        -(Ta * Ra + ob * (Pa - Ra) - ib * Pa + (ib - Ta) * gb) /
                        mb),
                      (cd =
                        (ob * (hb * Sa - cb * Qa) +
                          Ya * (Ta * Qa - ib * Sa) +
                          (ib * cb - Ta * hb) * Ma) /
                        mb),
                      (Ab =
                        (ob * (hb * Pa - cb * Ra) +
                          Ya * (Ta * Ra - ib * Pa) +
                          (ib * cb - Ta * hb) * gb) /
                        mb),
                      q.context.transform(zb, fb, yb, vb, cd, Ab),
                      q.context.drawImage(Aa, 0, 0, Aa.width, Aa.height),
                      q.context.restore(),
                      (La += 3)));
            }
            break;
          case 14:
            var wb = l.readLineBitmapStyle();
            b && q.hasStroke && q.closePath();
            q.context.moveTo(e - c, f - d);
            var Cb = wb.obj(0),
              Db = wb.bool(0);
            q.context.strokeStyle = q.createBitmapFill(Cb, Db, wb.bool(1));
            q.hasStroke = !0;
            break;
          case 15:
            var tb = l.readLineGradientStyle();
            b && q.hasStroke && q.closePath();
            q.context.moveTo(e - c, f - d);
            var Hb = tb.obj(0),
              xb = tb.iArr(0),
              Ib = tb.fArr(0),
              Lb = tb.iArr(1),
              Gb = tb.obj(1),
              Kb = tb.obj(2),
              Mb = tb.obj(3);
            q.context.strokeStyle = q.createGradientPattern(
              Hb,
              xb,
              Ib,
              Lb,
              Gb,
              Kb,
              Mb,
              tb["float"](0)
            );
            q.setSmoothing(!0);
            q.hasStroke = !0;
            break;
          case 16:
            var Cd = l.readLineStyle();
            b && q.hasStroke && q.closePath(!0);
            q.context.moveTo(e - c, f - d);
            if (null == Cd.obj(0)) q.hasStroke = !1;
            else {
              var Nb = 0 < Cd.obj(0) ? Cd.obj(0) : 1;
              q.context.lineWidth = Nb;
              var Ob =
                null == Cd.obj(3)
                  ? "round"
                  : $k.toString(Cd.obj(3)).toLowerCase();
              q.context.lineJoin = Ob;
              var Qb =
                null == Cd.obj(2)
                  ? "round"
                  : 0 == Cd.obj(2)
                  ? "butt"
                  : al.toString(Cd.obj(2)).toLowerCase();
              q.context.lineCap = Qb;
              q.context.miterLimit = Cd["float"](1);
              if (1 == Cd["float"](0)) {
                var Rb = J.hex(Cd["int"](0) & 16777215, 6);
                q.context.strokeStyle = "#" + Rb;
              } else {
                D = (Cd["int"](0) & 16711680) >>> 16;
                F = (Cd["int"](0) & 65280) >>> 8;
                G = Cd["int"](0) & 255;
                var Tb =
                  "rgba(" + D + ", " + F + ", " + G + ", " + Cd["float"](0);
                q.context.strokeStyle = Tb + ")";
              }
              q.setSmoothing(!0);
              q.hasStroke = !0;
            }
            break;
          case 17:
            var Jb = l.readLineTo();
            k = !0;
            q.context.lineTo(Jb["float"](0) - c, Jb["float"](1) - d);
            e = Jb["float"](0);
            f = Jb["float"](1);
            e == h && f == n && (g = !0);
            break;
          case 18:
            var Fb = l.readMoveTo();
            q.context.moveTo(Fb["float"](0) - c, Fb["float"](1) - d);
            e = Fb["float"](0);
            f = Fb["float"](1);
            p && (g = !0);
            h = Fb["float"](0);
            n = Fb["float"](1);
            p = !0;
            break;
          case 20:
            q.windingRule = "evenodd";
            break;
          case 21:
            q.windingRule = "nonzero";
            break;
          default:
            l.skip(y);
        }
      }
    } catch (yl) {
      if ("__break__" != yl) throw yl;
    }
    null != t && aa.__pool.release(t);
    null != x && aa.__pool.release(x);
    l.destroy();
    k &&
      (b &&
        q.hasStroke &&
        (q.hasFill && g
          ? (q.context.lineTo(h - c, n - d), q.closePath(!1))
          : g && e == h && f == n && q.closePath(!1),
        q.hitTesting || q.context.stroke()),
      b ||
        (!q.hasFill && null == q.bitmapFill) ||
        (q.context.translate(-q.bounds.x, -q.bounds.y),
        null != q.pendingMatrix
          ? (q.context.transform(
              q.pendingMatrix.a,
              q.pendingMatrix.b,
              q.pendingMatrix.c,
              q.pendingMatrix.d,
              q.pendingMatrix.tx,
              q.pendingMatrix.ty
            ),
            q.hitTesting || q.context.fill(q.windingRule),
            q.context.transform(
              q.inversePendingMatrix.a,
              q.inversePendingMatrix.b,
              q.inversePendingMatrix.c,
              q.inversePendingMatrix.d,
              q.inversePendingMatrix.tx,
              q.inversePendingMatrix.ty
            ))
          : q.hitTesting || q.context.fill(q.windingRule),
        q.context.translate(q.bounds.x, q.bounds.y),
        q.context.closePath()));
  };
  q.render = function (a, b) {
    a.__update(b.__worldTransform);
    if (a.__dirty) {
      q.hitTesting = !1;
      q.graphics = a;
      q.allowSmoothing = b.__allowSmoothing;
      q.bounds = a.__bounds;
      var c = a.__width,
        d = a.__height;
      if (
        !a.__visible ||
        0 == a.__commands.get_length() ||
        null == q.bounds ||
        1 > c ||
        1 > d
      )
        (a.__canvas = null), (a.__context = null), (a.__bitmap = null);
      else {
        null == a.__canvas &&
          ((a.__canvas = T.get_document().createElement("canvas")),
          (a.__context = a.__canvas.getContext("2d")));
        q.context = a.__context;
        var e = a.__renderTransform,
          f = a.__canvas,
          g = b.pixelRatio,
          h = u["int"](c * g),
          n = u["int"](d * g);
        b.__isDOM
          ? (f.width == h && f.height == n
              ? q.context.clearRect(0, 0, h, n)
              : ((f.width = h),
                (f.height = n),
                (f.style.width = c + "px"),
                (f.style.height = d + "px")),
            (b = a.__renderTransform),
            q.context.setTransform(
              b.a * g,
              b.b * g,
              b.c * g,
              b.d * g,
              b.tx * g,
              b.ty * g
            ))
          : (f.width == h && f.height == n
              ? (q.context.closePath(),
                q.context.setTransform(1, 0, 0, 1, 0, 0),
                q.context.clearRect(0, 0, h, n))
              : ((f.width = c), (f.height = d)),
            q.context.setTransform(e.a, e.b, e.c, e.d, e.tx, e.ty));
        q.fillCommands.clear();
        q.strokeCommands.clear();
        q.hasFill = !1;
        q.hasStroke = !1;
        q.bitmapFill = null;
        g = q.bitmapRepeat = !1;
        c = b = 0;
        q.windingRule = "evenodd";
        d = new Pd(a.__commands);
        e = 0;
        for (f = a.__commands.types; e < f.length; )
          switch (((h = f[e]), ++e, I.enumIndex(h))) {
            case 0:
            case 1:
            case 2:
            case 3:
              q.endFill();
              q.endStroke();
              h == D.BEGIN_BITMAP_FILL
                ? ((h = d.readBeginBitmapFill()),
                  q.fillCommands.beginBitmapFill(
                    h.obj(0),
                    h.obj(1),
                    h.bool(0),
                    h.bool(1)
                  ),
                  q.strokeCommands.beginBitmapFill(
                    h.obj(0),
                    h.obj(1),
                    h.bool(0),
                    h.bool(1)
                  ))
                : h == D.BEGIN_GRADIENT_FILL
                ? ((h = d.readBeginGradientFill()),
                  q.fillCommands.beginGradientFill(
                    h.obj(0),
                    h.iArr(0),
                    h.fArr(0),
                    h.iArr(1),
                    h.obj(1),
                    h.obj(2),
                    h.obj(3),
                    h["float"](0)
                  ),
                  q.strokeCommands.beginGradientFill(
                    h.obj(0),
                    h.iArr(0),
                    h.fArr(0),
                    h.iArr(1),
                    h.obj(1),
                    h.obj(2),
                    h.obj(3),
                    h["float"](0)
                  ))
                : h == D.BEGIN_SHADER_FILL
                ? ((h = d.readBeginShaderFill()),
                  q.fillCommands.beginShaderFill(h.obj(0)),
                  q.strokeCommands.beginShaderFill(h.obj(0)))
                : ((h = d.readBeginFill()),
                  q.fillCommands.beginFill(h["int"](0), h["float"](0)),
                  q.strokeCommands.beginFill(h["int"](0), h["float"](0)));
              break;
            case 4:
              h = d.readCubicCurveTo();
              q.fillCommands.cubicCurveTo(
                h["float"](0),
                h["float"](1),
                h["float"](2),
                h["float"](3),
                h["float"](4),
                h["float"](5)
              );
              g
                ? q.strokeCommands.cubicCurveTo(
                    h["float"](0),
                    h["float"](1),
                    h["float"](2),
                    h["float"](3),
                    h["float"](4),
                    h["float"](5)
                  )
                : ((b = h["float"](4)), (c = h["float"](5)));
              break;
            case 5:
              h = d.readCurveTo();
              q.fillCommands.curveTo(
                h["float"](0),
                h["float"](1),
                h["float"](2),
                h["float"](3)
              );
              g
                ? q.strokeCommands.curveTo(
                    h["float"](0),
                    h["float"](1),
                    h["float"](2),
                    h["float"](3)
                  )
                : ((b = h["float"](2)), (c = h["float"](3)));
              break;
            case 6:
              h = d.readDrawCircle();
              q.fillCommands.drawCircle(
                h["float"](0),
                h["float"](1),
                h["float"](2)
              );
              g &&
                q.strokeCommands.drawCircle(
                  h["float"](0),
                  h["float"](1),
                  h["float"](2)
                );
              break;
            case 7:
              h = d.readDrawEllipse();
              q.fillCommands.drawEllipse(
                h["float"](0),
                h["float"](1),
                h["float"](2),
                h["float"](3)
              );
              g &&
                q.strokeCommands.drawEllipse(
                  h["float"](0),
                  h["float"](1),
                  h["float"](2),
                  h["float"](3)
                );
              break;
            case 8:
              h = d.readDrawQuads();
              q.fillCommands.drawQuads(h.obj(0), h.obj(1), h.obj(2));
              break;
            case 9:
              h = d.readDrawRect();
              q.fillCommands.drawRect(
                h["float"](0),
                h["float"](1),
                h["float"](2),
                h["float"](3)
              );
              g &&
                q.strokeCommands.drawRect(
                  h["float"](0),
                  h["float"](1),
                  h["float"](2),
                  h["float"](3)
                );
              break;
            case 10:
              h = d.readDrawRoundRect();
              q.fillCommands.drawRoundRect(
                h["float"](0),
                h["float"](1),
                h["float"](2),
                h["float"](3),
                h["float"](4),
                h.obj(0)
              );
              g &&
                q.strokeCommands.drawRoundRect(
                  h["float"](0),
                  h["float"](1),
                  h["float"](2),
                  h["float"](3),
                  h["float"](4),
                  h.obj(0)
                );
              break;
            case 12:
              h = d.readDrawTriangles();
              q.fillCommands.drawTriangles(
                h.obj(0),
                h.obj(1),
                h.obj(2),
                h.obj(3)
              );
              break;
            case 13:
              d.readEndFill();
              q.endFill();
              q.endStroke();
              g = q.hasFill = !1;
              q.bitmapFill = null;
              c = b = 0;
              break;
            case 14:
              h = d.readLineBitmapStyle();
              g ||
                (0 == b && 0 == c) ||
                (q.strokeCommands.moveTo(b, c), (c = b = 0));
              g = !0;
              q.strokeCommands.lineBitmapStyle(
                h.obj(0),
                h.obj(1),
                h.bool(0),
                h.bool(1)
              );
              break;
            case 15:
              h = d.readLineGradientStyle();
              g ||
                (0 == b && 0 == c) ||
                (q.strokeCommands.moveTo(b, c), (c = b = 0));
              g = !0;
              q.strokeCommands.lineGradientStyle(
                h.obj(0),
                h.iArr(0),
                h.fArr(0),
                h.iArr(1),
                h.obj(1),
                h.obj(2),
                h.obj(3),
                h["float"](0)
              );
              break;
            case 16:
              h = d.readLineStyle();
              g ||
                null == h.obj(0) ||
                (0 == b && 0 == c) ||
                (q.strokeCommands.moveTo(b, c), (c = b = 0));
              g = null != h.obj(0);
              q.strokeCommands.lineStyle(
                h.obj(0),
                h["int"](0),
                h["float"](0),
                h.bool(0),
                h.obj(1),
                h.obj(2),
                h.obj(3),
                h["float"](1)
              );
              break;
            case 17:
              h = d.readLineTo();
              q.fillCommands.lineTo(h["float"](0), h["float"](1));
              g
                ? q.strokeCommands.lineTo(h["float"](0), h["float"](1))
                : ((b = h["float"](0)), (c = h["float"](1)));
              break;
            case 18:
              h = d.readMoveTo();
              q.fillCommands.moveTo(h["float"](0), h["float"](1));
              g
                ? q.strokeCommands.moveTo(h["float"](0), h["float"](1))
                : ((b = h["float"](0)), (c = h["float"](1)));
              break;
            case 20:
              d.readWindingEvenOdd();
              q.fillCommands.windingEvenOdd();
              q.windingRule = "evenodd";
              break;
            case 21:
              d.readWindingNonZero();
              q.fillCommands.windingNonZero();
              q.windingRule = "nonzero";
              break;
            default:
              d.skip(h);
          }
        0 < q.fillCommands.get_length() && q.endFill();
        0 < q.strokeCommands.get_length() && q.endStroke();
        d.destroy();
        a.__bitmap = ma.fromCanvas(a.__canvas);
      }
      a.set___dirty(!1);
    }
  };
  q.renderMask = function (a, b) {
    if (0 != a.__commands.get_length()) {
      q.context = b.context;
      b = new Pd(a.__commands);
      var c = 0;
      for (a = a.__commands.types; c < a.length; ) {
        var d = a[c];
        ++c;
        switch (I.enumIndex(d)) {
          case 4:
            d = b.readCubicCurveTo();
            q.context.bezierCurveTo(
              d["float"](0) - 0,
              d["float"](1) - 0,
              d["float"](2) - 0,
              d["float"](3) - 0,
              d["float"](4) - 0,
              d["float"](5) - 0
            );
            d["float"](4);
            d["float"](5);
            break;
          case 5:
            d = b.readCurveTo();
            q.context.quadraticCurveTo(
              d["float"](0) - 0,
              d["float"](1) - 0,
              d["float"](2) - 0,
              d["float"](3) - 0
            );
            d["float"](2);
            d["float"](3);
            break;
          case 6:
            d = b.readDrawCircle();
            q.context.arc(
              d["float"](0) - 0,
              d["float"](1) - 0,
              d["float"](2),
              0,
              2 * Math.PI,
              !0
            );
            break;
          case 7:
            var e = b.readDrawEllipse();
            d = e["float"](0);
            var f = e["float"](1);
            var g = e["float"](2);
            var h = e["float"](3);
            d -= 0;
            f -= 0;
            e = (g / 2) * 0.5522848;
            var n = (h / 2) * 0.5522848;
            var p = d + g;
            var k = f + h;
            g = d + g / 2;
            h = f + h / 2;
            q.context.moveTo(d, h);
            q.context.bezierCurveTo(d, h - n, g - e, f, g, f);
            q.context.bezierCurveTo(g + e, f, p, h - n, p, h);
            q.context.bezierCurveTo(p, h + n, g + e, k, g, k);
            q.context.bezierCurveTo(g - e, k, d, h + n, d, h);
            break;
          case 9:
            d = b.readDrawRect();
            q.context.beginPath();
            q.context.rect(
              d["float"](0) - 0,
              d["float"](1) - 0,
              d["float"](2),
              d["float"](3)
            );
            q.context.closePath();
            break;
          case 10:
            d = b.readDrawRoundRect();
            q.drawRoundRect(
              d["float"](0) - 0,
              d["float"](1) - 0,
              d["float"](2),
              d["float"](3),
              d["float"](4),
              d.obj(0)
            );
            break;
          case 17:
            d = b.readLineTo();
            q.context.lineTo(d["float"](0) - 0, d["float"](1) - 0);
            d["float"](0);
            d["float"](1);
            break;
          case 18:
            d = b.readMoveTo();
            q.context.moveTo(d["float"](0) - 0, d["float"](1) - 0);
            d["float"](0);
            d["float"](1);
            break;
          default:
            b.skip(d);
        }
      }
      b.destroy();
    }
  };
  q.setSmoothing = function (a) {
    q.allowSmoothing || (a = !1);
    q.context.imageSmoothingEnabled != a &&
      (q.context.imageSmoothingEnabled = a);
  };
  var Zk = function () {};
  l["openfl._internal.renderer.canvas.CanvasShape"] = Zk;
  Zk.__name__ = ["openfl", "_internal", "renderer", "canvas", "CanvasShape"];
  Zk.render = function (a, b) {
    if (a.__renderable && !(0 >= a.__worldAlpha)) {
      var c = a.__graphics;
      if (null != c) {
        q.render(c, b);
        var d = c.__width,
          e = c.__height;
        if (null != c.__canvas) {
          var f = b.context,
            g = a.__scrollRect;
          0 < d &&
            0 < e &&
            (null == g || (0 < g.width && 0 < g.height)) &&
            (b.__setBlendMode(a.__worldBlendMode),
            b.__pushMaskObject(a),
            (f.globalAlpha = a.__worldAlpha),
            b.setTransform(c.__worldTransform, f),
            b.__isDOM && ((g = 1 / b.pixelRatio), f.scale(g, g)),
            f.drawImage(c.__canvas, 0, 0, d, e),
            b.__popMaskObject(a));
        }
      }
    }
  };
  var da = function () {};
  l["openfl._internal.renderer.canvas.CanvasTextField"] = da;
  da.__name__ = [
    "openfl",
    "_internal",
    "renderer",
    "canvas",
    "CanvasTextField",
  ];
  da.render = function (a, b, c) {
    var d = a.__textEngine,
      e = d.background || d.border ? d.bounds : d.textBounds;
    c = a.__graphics;
    a.__dirty &&
      (a.__updateLayout(),
      null == c.__bounds && (c.__bounds = new Z()),
      c.__bounds.copyFrom(e));
    c.__update(b.__worldTransform);
    if (a.__dirty || c.__dirty) {
      var f = c.__width,
        g = c.__height;
      if (
        !(
          (null != d.text && !O.equals(d.text, "")) ||
          d.background ||
          d.border ||
          d.__hasFocus ||
          (1 == d.type && d.selectable)
        ) ||
        ((0 >= d.width || 0 >= d.height) && 2 != d.autoSize)
      )
        (a.__graphics.__canvas = null),
          (a.__graphics.__context = null),
          (a.__graphics.__bitmap = null),
          a.__graphics.set___dirty(!1),
          (a.__dirty = !1);
      else {
        null == a.__graphics.__canvas &&
          ((a.__graphics.__canvas = T.get_document().createElement("canvas")),
          (a.__graphics.__context = a.__graphics.__canvas.getContext("2d")));
        da.context = c.__context;
        var h = c.__renderTransform;
        if (b.__isDOM) {
          var n = b.pixelRatio;
          c.__canvas.width = u["int"](f * n);
          c.__canvas.height = u["int"](g * n);
          c.__canvas.style.width = f + "px";
          c.__canvas.style.height = g + "px";
          f = ia.__pool.get();
          f.copyFrom(h);
          f.scale(n, n);
          b.setTransform(f, da.context);
          ia.__pool.release(f);
        } else
          (c.__canvas.width = f),
            (c.__canvas.height = g),
            da.context.setTransform(h.a, h.b, h.c, h.d, h.tx, h.ty);
        null == da.clearRect &&
          (da.clearRect =
            "undefined" !== typeof navigator &&
            "undefined" !== typeof navigator.isCocoonJS);
        da.clearRect &&
          da.context.clearRect(0, 0, c.__canvas.width, c.__canvas.height);
        if ((null != d.text && "" != d.text) || d.__hasFocus) {
          h = d.text;
          c.__context.imageSmoothingEnabled =
            !b.__allowSmoothing || (0 == d.antiAliasType && 400 == d.sharpness)
              ? !1
              : !0;
          if (d.border || d.background)
            da.context.rect(0.5, 0.5, e.width - 1, e.height - 1),
              d.background &&
                ((b = J.hex(d.backgroundColor & 16777215, 6)),
                (da.context.fillStyle = "#" + b),
                da.context.fill()),
              d.border &&
                ((da.context.lineWidth = 1),
                (b = J.hex(d.borderColor & 16777215, 6)),
                (da.context.strokeStyle = "#" + b),
                da.context.stroke());
          da.context.textBaseline = "top";
          da.context.textAlign = "start";
          b = -a.get_scrollH();
          f = n = 0;
          for (g = a.get_scrollV() - 1; f < g; ) {
            var p = f++;
            n -= d.lineHeights.get(p);
          }
          f = 0;
          g = new pa("(iPad|iPhone|iPod|Firefox)", "g").match(
            T.get_window().navigator.userAgent
          );
          p = 0;
          for (var k = d.layoutGroups; p < k.get_length(); ) {
            var l = k.get(p);
            ++p;
            if (!(l.lineIndex < a.get_scrollV() - 1)) {
              if (l.lineIndex > a.get_scrollV() + d.bottomScrollV - 2) break;
              if (l.format.underline) {
                da.context.beginPath();
                da.context.strokeStyle = "#000000";
                da.context.lineWidth = 0.5;
                var m = l.offsetX + b - e.x;
                var q = l.offsetY + f + n + l.ascent - e.y;
                da.context.moveTo(m, q);
                da.context.lineTo(m + l.width, q);
                da.context.stroke();
              }
              da.context.font = Va.getFont(l.format);
              m = J.hex(l.format.color & 16777215, 6);
              da.context.fillStyle = "#" + m;
              g && (f = 0.185 * l.format.size);
              da.context.fillText(
                O.substring(h, l.startIndex, l.endIndex),
                l.offsetX + b - e.x,
                l.offsetY + f + n - e.y
              );
              if (-1 < a.__caretIndex && d.selectable)
                if (a.__selectionIndex == a.__caretIndex) {
                  if (
                    a.__showCursor &&
                    l.startIndex <= a.__caretIndex &&
                    l.endIndex >= a.__caretIndex
                  ) {
                    q = m = 0;
                    for (var r = a.__caretIndex - l.startIndex; q < r; ) {
                      var t = q++;
                      if (l.positions.length <= t) break;
                      m += l.getAdvance(t);
                    }
                    q = 0;
                    r = a.get_scrollV();
                    for (t = l.lineIndex + 1; r < t; ) {
                      var x = r++;
                      q += d.lineHeights.get(x - 1);
                    }
                    da.context.beginPath();
                    r = J.hex(l.format.color & 16777215, 6);
                    da.context.strokeStyle = "#" + r;
                    da.context.moveTo(
                      l.offsetX + m - a.get_scrollH() - e.x,
                      q + 2 - e.y
                    );
                    da.context.lineWidth = 1;
                    da.context.lineTo(
                      l.offsetX + m - a.get_scrollH() - e.x,
                      q +
                        Va.getFormatHeight(a.get_defaultTextFormat()) -
                        1 -
                        e.y
                    );
                    da.context.stroke();
                    da.context.closePath();
                  }
                } else if (
                  (l.startIndex <= a.__caretIndex &&
                    l.endIndex >= a.__caretIndex) ||
                  (l.startIndex <= a.__selectionIndex &&
                    l.endIndex >= a.__selectionIndex) ||
                  (l.startIndex > a.__caretIndex &&
                    l.endIndex < a.__selectionIndex) ||
                  (l.startIndex > a.__selectionIndex &&
                    l.endIndex < a.__caretIndex)
                )
                  (m = u["int"](Math.min(a.__selectionIndex, a.__caretIndex))),
                    (q = u["int"](
                      Math.max(a.__selectionIndex, a.__caretIndex)
                    )),
                    l.startIndex > m && (m = l.startIndex),
                    l.endIndex < q && (q = l.endIndex),
                    (r = a.getCharBoundaries(m)),
                    q >= O.get_length(d.text)
                      ? ((t = a.getCharBoundaries(O.get_length(d.text) - 1)),
                        (t.x += t.width + 2))
                      : (t = a.getCharBoundaries(q)),
                    null != r &&
                      null != t &&
                      ((da.context.fillStyle = "#000000"),
                      da.context.fillRect(
                        r.x + b,
                        r.y + n,
                        t.x - r.x,
                        l.height
                      ),
                      (da.context.fillStyle = "#FFFFFF"),
                      da.context.fillText(
                        O.substring(h, m, q),
                        b + r.x,
                        l.offsetY + f + n
                      ));
            }
          }
        } else {
          if (d.border || d.background)
            d.border
              ? da.context.rect(0.5, 0.5, e.width - 1, e.height - 1)
              : da.context.rect(0, 0, e.width, e.height),
              d.background &&
                ((e = J.hex(d.backgroundColor & 16777215, 6)),
                (da.context.fillStyle = "#" + e),
                da.context.fill()),
              d.border &&
                ((da.context.lineWidth = 1),
                (da.context.lineCap = "square"),
                (e = J.hex(d.borderColor & 16777215, 6)),
                (da.context.strokeStyle = "#" + e),
                da.context.stroke());
          if (-1 < a.__caretIndex && d.selectable && a.__showCursor) {
            e = -a.get_scrollH();
            b = h = 0;
            for (n = a.get_scrollV() - 1; b < n; )
              (f = b++), (h += d.lineHeights.get(f));
            da.context.beginPath();
            d = J.hex(a.get_defaultTextFormat().color & 16777215, 6);
            da.context.strokeStyle = "#" + d;
            da.context.moveTo(e + 2.5, h + 2.5);
            da.context.lineWidth = 1;
            da.context.lineTo(
              e + 2.5,
              h + Va.getFormatHeight(a.get_defaultTextFormat()) - 1
            );
            da.context.stroke();
            da.context.closePath();
          }
        }
        c.__bitmap = ma.fromCanvas(a.__graphics.__canvas);
        c.__visible = !0;
        a.__dirty = !1;
        c.set___dirty(!1);
      }
    }
  };
  var Ad = function () {};
  l["openfl._internal.renderer.context3D.Context3DBitmap"] = Ad;
  Ad.__name__ = [
    "openfl",
    "_internal",
    "renderer",
    "context3D",
    "Context3DBitmap",
  ];
  Ad.render = function (a, b) {
    if (
      a.__renderable &&
      !(0 >= a.__worldAlpha) &&
      null != a.__bitmapData &&
      a.__bitmapData.__isValid
    ) {
      var c = b.__context3D;
      b.__setBlendMode(a.__worldBlendMode);
      b.__pushMaskObject(a);
      var d = b.__initDisplayShader(a.__worldShader);
      b.setShader(d);
      b.applyBitmapData(
        a.__bitmapData,
        b.__allowSmoothing && (a.smoothing || b.__upscaled)
      );
      b.applyMatrix(b.__getMatrix(a.__renderTransform, a.pixelSnapping));
      b.applyAlpha(a.__worldAlpha);
      b.applyColorTransform(a.__worldColorTransform);
      b.updateShader();
      var e = a.__bitmapData.getVertexBuffer(c);
      null != d.__position && c.setVertexBufferAt(d.__position.index, e, 0, 3);
      null != d.__textureCoord &&
        c.setVertexBufferAt(d.__textureCoord.index, e, 3, 2);
      d = a.__bitmapData.getIndexBuffer(c);
      c.drawTriangles(d);
      b.__clearShader();
      b.__popMaskObject(a);
    }
  };
  Ad.renderMask = function (a, b) {
    if (null != a.__bitmapData && a.__bitmapData.__isValid) {
      var c = b.__context3D,
        d = b.__maskShader;
      b.setShader(d);
      b.applyBitmapData(Cf.opaqueBitmapData, !0);
      b.applyMatrix(b.__getMatrix(a.__renderTransform, a.pixelSnapping));
      b.updateShader();
      var e = a.__bitmapData.getVertexBuffer(c);
      null != d.__position && c.setVertexBufferAt(d.__position.index, e, 0, 3);
      null != d.__textureCoord &&
        c.setVertexBufferAt(d.__textureCoord.index, e, 3, 2);
      a = a.__bitmapData.getIndexBuffer(c);
      c.drawTriangles(a);
      b.__clearShader();
    }
  };
  var Jj = function (a, b, c, d) {
    this.context3D = a;
    this.elementType = b;
    this.dataPerVertex = d;
    this.vertexCount = this.indexCount = 0;
    this.resize(c);
  };
  l["openfl._internal.renderer.context3D.Context3DBuffer"] = Jj;
  Jj.__name__ = [
    "openfl",
    "_internal",
    "renderer",
    "context3D",
    "Context3DBuffer",
  ];
  Jj.prototype = {
    dataPerVertex: null,
    elementCount: null,
    elementType: null,
    indexCount: null,
    vertexBuffer: null,
    vertexBufferData: null,
    vertexCount: null,
    context3D: null,
    flushVertexBufferData: function () {
      this.vertexBufferData.length > this.vertexCount &&
        ((this.vertexCount = this.vertexBufferData.length),
        (this.vertexBuffer = this.context3D.createVertexBuffer(
          this.vertexCount,
          this.dataPerVertex,
          0
        )));
      this.vertexBuffer.uploadFromTypedArray(this.vertexBufferData);
    },
    resize: function (a, b) {
      null == b && (b = -1);
      this.elementCount = a;
      -1 == b && (b = this.dataPerVertex);
      b != this.dataPerVertex &&
        ((this.vertexBuffer = null),
        (this.vertexCount = 0),
        (this.dataPerVertex = b));
      var c = 0;
      switch (I.enumIndex(this.elementType)) {
        case 0:
          c = 4 * a;
          break;
        case 1:
          c = 3 * a;
          break;
        case 2:
          c = 3 * a;
      }
      a = c * b;
      null == this.vertexBufferData
        ? (this.vertexBufferData = null != a ? new de(a) : null)
        : a > this.vertexBufferData.length &&
          ((b = this.vertexBufferData),
          (this.vertexBufferData = null != a ? new de(a) : null),
          this.vertexBufferData.set(b));
    },
    __class__: Jj,
  };
  var vd = (l["openfl._internal.renderer.context3D.Context3DElementType"] = {
    __ename__: [
      "openfl",
      "_internal",
      "renderer",
      "context3D",
      "Context3DElementType",
    ],
    __constructs__: ["QUADS", "TRIANGLES", "TRIANGLE_INDICES"],
  });
  vd.QUADS = ["QUADS", 0];
  vd.QUADS.toString = M;
  vd.QUADS.__enum__ = vd;
  vd.TRIANGLES = ["TRIANGLES", 1];
  vd.TRIANGLES.toString = M;
  vd.TRIANGLES.__enum__ = vd;
  vd.TRIANGLE_INDICES = ["TRIANGLE_INDICES", 2];
  vd.TRIANGLE_INDICES.toString = M;
  vd.TRIANGLE_INDICES.__enum__ = vd;
  var $g = function () {};
  l["openfl._internal.renderer.context3D.Context3DDisplayObject"] = $g;
  $g.__name__ = [
    "openfl",
    "_internal",
    "renderer",
    "context3D",
    "Context3DDisplayObject",
  ];
  $g.render = function (a, b) {
    if (
      !(
        (null == a.opaqueBackground && null == a.__graphics) ||
        !a.__renderable ||
        0 >= a.__worldAlpha
      )
    ) {
      if (
        null != a.opaqueBackground &&
        !a.__isCacheBitmapRender &&
        0 < a.get_width() &&
        0 < a.get_height()
      ) {
        b.__setBlendMode(a.__worldBlendMode);
        b.__pushMaskObject(a);
        var c = b.__context3D,
          d = Z.__pool.get();
        d.setTo(0, 0, a.get_width(), a.get_height());
        b.__pushMaskRect(d, a.__renderTransform);
        var e = a.opaqueBackground;
        c.clear(
          ((e >>> 16) & 255) / 255,
          ((e >>> 8) & 255) / 255,
          (e & 255) / 255,
          1,
          0,
          0,
          1
        );
        b.__popMaskRect();
        b.__popMaskObject(a);
        Z.__pool.release(d);
      }
      null != a.__graphics && Wf.render(a, b);
    }
  };
  var ma = function (a, b, c, d) {
    null == d && (d = -1);
    null == c && (c = !0);
    this.transparent = c;
    null == a && (a = 0);
    null == b && (b = 0);
    0 > a && (a = 0);
    0 > b && (b = 0);
    this.width = a;
    this.height = b;
    this.rect = new Z(0, 0, a, b);
    this.__textureWidth = a;
    this.__textureHeight = b;
    0 < a &&
      0 < b &&
      (c ? 0 == (d & -16777216) && (d = 0) : (d = -16777216 | (d & 16777215)),
      (this.image = new qa(null, 0, 0, a, b, (d << 8) | ((d >>> 24) & 255))),
      this.image.set_transparent(c),
      (this.readable = this.__isValid = !0));
    this.__renderTransform = new ia();
    this.__worldAlpha = 1;
    this.__worldTransform = new ia();
    this.__worldColorTransform = new Ka();
    this.__renderable = !0;
  };
  l["openfl.display.BitmapData"] = ma;
  ma.__name__ = ["openfl", "display", "BitmapData"];
  ma.__interfaces__ = [Wg];
  ma.fromBase64 = function (a, b) {
    return null;
  };
  ma.fromBytes = function (a, b) {
    return null;
  };
  ma.fromCanvas = function (a, b) {
    null == b && (b = !0);
    if (null == a) return null;
    var c = new ma(0, 0, b, 0);
    c.__fromImage(qa.fromCanvas(a));
    c.image.set_transparent(b);
    return c;
  };
  ma.fromFile = function (a) {
    return null;
  };
  ma.fromImage = function (a, b) {
    null == b && (b = !0);
    if (null == a || null == a.buffer) return null;
    var c = new ma(0, 0, b, 0);
    c.__fromImage(a);
    c.image.set_transparent(b);
    return null != c.image ? c : null;
  };
  ma.fromTexture = function (a) {
    if (null == a) return null;
    var b = new ma(a.__width, a.__height, !0, 0);
    b.readable = !1;
    b.__texture = a;
    b.__textureContext = a.__textureContext;
    b.image = null;
    return b;
  };
  ma.loadFromBase64 = function (a, b) {
    return qa.loadFromBase64(a, b).then(function (a) {
      return La.withValue(ma.fromImage(a));
    });
  };
  ma.loadFromBytes = function (a, b) {
    return qa.loadFromBytes(fd.toBytes(a)).then(function (a) {
      a = ma.fromImage(a);
      null != b && a.__applyAlpha(b);
      return La.withValue(a);
    });
  };
  ma.loadFromFile = function (a) {
    return qa.loadFromFile(a).then(function (a) {
      return La.withValue(ma.fromImage(a));
    });
  };
  ma.prototype = {
    height: null,
    image: null,
    readable: null,
    rect: null,
    transparent: null,
    width: null,
    __framebuffer: null,
    __framebufferContext: null,
    __indexBuffer: null,
    __indexBufferContext: null,
    __indexBufferData: null,
    __isValid: null,
    __mask: null,
    __renderable: null,
    __renderTransform: null,
    __scrollRect: null,
    __surface: null,
    __texture: null,
    __textureContext: null,
    __textureHeight: null,
    __textureVersion: null,
    __textureWidth: null,
    __uvRect: null,
    __vertexBuffer: null,
    __vertexBufferContext: null,
    __vertexBufferData: null,
    __worldAlpha: null,
    __worldColorTransform: null,
    __worldTransform: null,
    colorTransform: function (a, b) {
      this.readable &&
        this.image.colorTransform(
          a.__toLimeRectangle(),
          b.__toLimeColorMatrix()
        );
    },
    copyChannel: function (a, b, c, d, e) {
      if (this.readable) {
        switch (d) {
          case 1:
            d = $a.RED;
            break;
          case 2:
            d = $a.GREEN;
            break;
          case 4:
            d = $a.BLUE;
            break;
          case 8:
            d = $a.ALPHA;
            break;
          default:
            return;
        }
        switch (e) {
          case 1:
            e = $a.RED;
            break;
          case 2:
            e = $a.GREEN;
            break;
          case 4:
            e = $a.BLUE;
            break;
          case 8:
            e = $a.ALPHA;
            break;
          default:
            return;
        }
        this.image.copyChannel(
          a.image,
          b.__toLimeRectangle(),
          c.__toLimeVector2(),
          d,
          e
        );
      }
    },
    copyPixels: function (a, b, c, d, e, f) {
      null == f && (f = !1);
      this.readable &&
        null != a &&
        (null != e && ((ma.__tempVector.x = e.x), (ma.__tempVector.y = e.y)),
        this.image.copyPixels(
          a.image,
          b.__toLimeRectangle(),
          c.__toLimeVector2(),
          null != d ? d.image : null,
          null != e ? ma.__tempVector : null,
          f
        ));
    },
    dispose: function () {
      this.image = null;
      this.height = this.width = 0;
      this.rect = null;
      this.readable = this.__isValid = !1;
      this.__textureContext =
        this.__texture =
        this.__framebufferContext =
        this.__framebuffer =
        this.__vertexBuffer =
        this.__surface =
          null;
    },
    draw: function (a, b, c, d, e, f) {
      null == f && (f = !1);
      if (null != a) {
        a.__update(!1, !0);
        var g = ia.__pool.get();
        g.copyFrom(a.__renderTransform);
        g.invert();
        null != b && g.concat(b);
        b = null;
        null != e && ((b = ia.__pool.get()), b.copyFrom(g), b.invert());
        var h = new Ka();
        h.__copyFrom(a.__worldColorTransform);
        h.__invert();
        if (this.readable || null == N.get_current().stage.context3D) {
          if (null != c) {
            var n = Z.__pool.get(),
              p = ia.__pool.get();
            a.__getBounds(n, p);
            var k = Math.ceil(n.width),
              l = Math.ceil(n.height);
            p.tx = -n.x;
            p.ty = -n.y;
            k = new ma(k, l, !0, 0);
            k.draw(a, p);
            k.colorTransform(k.rect, c);
            k.__renderTransform.identity();
            k.__renderTransform.tx = n.x;
            k.__renderTransform.ty = n.y;
            k.__renderTransform.concat(a.__renderTransform);
            k.__worldAlpha = a.__worldAlpha;
            k.__worldColorTransform.__copyFrom(a.__worldColorTransform);
            a = k;
            Z.__pool.release(n);
            ia.__pool.release(p);
          }
          na.convertToCanvas(this.image);
          c = new Ce(this.image.buffer.__srcContext);
          c.__allowSmoothing = f;
          c.__overrideBlendMode = d;
          c.__worldTransform = g;
          c.__worldAlpha = 1 / a.__worldAlpha;
          c.__worldColorTransform = h;
          null != e && c.__pushMaskRect(e, b);
          this.__drawCanvas(a, c);
        } else
          null == this.__textureContext &&
            (this.__textureContext = nc.current.get_window().context),
            null != c && h.__combine(c),
            (c = new fa(N.get_current().stage.context3D, this)),
            (c.__allowSmoothing = f),
            (c.__overrideBlendMode = d),
            (c.__worldTransform = g),
            (c.__worldAlpha = 1 / a.__worldAlpha),
            (c.__worldColorTransform = h),
            c.__resize(this.width, this.height),
            null != e && c.__pushMaskRect(e, b),
            this.__drawGL(a, c);
        null != e && (c.__popMaskRect(), ia.__pool.release(b));
        ia.__pool.release(g);
      }
    },
    fillRect: function (a, b) {
      this.__fillRect(a, b, !0);
    },
    getIndexBuffer: function (a) {
      if (
        null == this.__indexBuffer ||
        this.__indexBufferContext != a.__context
      )
        (this.__indexBufferData = new Uint16Array(6)),
          (this.__indexBufferData[0] = 0),
          (this.__indexBufferData[1] = 1),
          (this.__indexBufferData[2] = 2),
          (this.__indexBufferData[3] = 2),
          (this.__indexBufferData[4] = 1),
          (this.__indexBufferData[5] = 3),
          (this.__indexBufferContext = a.__context),
          (this.__indexBuffer = a.createIndexBuffer(6)),
          this.__indexBuffer.uploadFromTypedArray(this.__indexBufferData);
      return this.__indexBuffer;
    },
    getVertexBuffer: function (a) {
      if (
        null == this.__vertexBuffer ||
        this.__vertexBufferContext != a.__context
      )
        (this.__uvRect = new Z(0, 0, this.width, this.height)),
          (this.__vertexBufferData = new de(56)),
          (this.__vertexBufferData[0] = this.width),
          (this.__vertexBufferData[1] = this.height),
          (this.__vertexBufferData[3] = 1),
          (this.__vertexBufferData[4] = 1),
          (this.__vertexBufferData[15] = this.height),
          (this.__vertexBufferData[18] = 1),
          (this.__vertexBufferData[28] = this.width),
          (this.__vertexBufferData[31] = 1),
          (this.__vertexBufferContext = a.__context),
          (this.__vertexBuffer = a.createVertexBuffer(3, 14)),
          this.__vertexBuffer.uploadFromTypedArray(this.__vertexBufferData);
      return this.__vertexBuffer;
    },
    getTexture: function (a) {
      if (!this.__isValid) return null;
      if (null == this.__texture || this.__textureContext != a.__context)
        (this.__textureContext = a.__context),
          (this.__texture = a.createRectangleTexture(
            this.width,
            this.height,
            1,
            !1
          )),
          (this.__textureVersion = -1);
      na.sync(this.image, !1);
      null != this.image &&
        this.image.version > this.__textureVersion &&
        (null != this.__surface && Fk.flush(this.__surface),
        (a = this.image),
        Ga.__supportsBGRA ||
          0 == a.get_format() ||
          ((a = a.clone()), a.set_format(0)),
        this.__texture.__uploadFromImage(a),
        (this.__textureVersion = this.image.version),
        (this.__textureWidth = a.buffer.width),
        (this.__textureHeight = a.buffer.height));
      this.readable ||
        null == this.image ||
        (this.image = this.__surface = null);
      return this.__texture;
    },
    __applyAlpha: function (a) {
      na.convertToCanvas(this.image);
      na.createImageData(this.image);
      for (
        var b = this.image.buffer.data, c = 0, d = fd.get_length(a);
        c < d;

      ) {
        var e = c++;
        b[4 * e + 3] = a.readUnsignedByte();
      }
      this.image.version++;
    },
    __drawCanvas: function (a, b) {
      var c = this.image.buffer;
      b.__allowSmoothing || b.applySmoothing(c.__srcContext, !1);
      b.__render(a);
      b.__allowSmoothing || b.applySmoothing(c.__srcContext, !0);
      c.__srcContext.setTransform(1, 0, 0, 1, 0, 0);
      c.__srcImageData = null;
      c.data = null;
      this.image.dirty = !0;
      this.image.version++;
    },
    __drawGL: function (a, b) {
      var c = b.__context3D,
        d = c.__state.renderToTexture,
        e = c.__state.renderToTextureDepthStencil,
        f = c.__state.renderToTextureAntiAlias,
        g = c.__state.renderToTextureSurfaceSelector;
      c.setRenderToTexture(this.getTexture(c), !0);
      b.__render(a);
      null != d ? c.setRenderToTexture(d, e, f, g) : c.setRenderToBackBuffer();
    },
    __fillRect: function (a, b, c) {
      if (null != a)
        if (
          (this.transparent && 0 == (b & -16777216) && (b = 0),
          c &&
            null != this.__texture &&
            null != this.__texture.__glFramebuffer &&
            "opengl" == N.get_current().stage.__renderer.__type)
        ) {
          c = N.get_current().stage.__renderer.__context3D;
          var d = !this.rect.equals(a),
            e = c.__state.renderToTexture,
            f = c.__state.renderToTextureDepthStencil,
            g = c.__state.renderToTextureAntiAlias,
            h = c.__state.renderToTextureSurfaceSelector;
          c.setRenderToTexture(this.__texture);
          d && c.setScissorRectangle(a);
          c.clear(
            ((b >>> 16) & 255) / 255,
            ((b >>> 8) & 255) / 255,
            (b & 255) / 255,
            this.transparent ? ((b >>> 24) & 255) / 255 : 1,
            0,
            0,
            1
          );
          d && c.setScissorRectangle(null);
          null != e
            ? c.setRenderToTexture(e, f, g, h)
            : c.setRenderToBackBuffer();
        } else
          this.readable && this.image.fillRect(a.__toLimeRectangle(), b, 1);
    },
    __fromImage: function (a) {
      null != a &&
        null != a.buffer &&
        ((this.image = a),
        (this.width = a.width),
        (this.height = a.height),
        (this.rect = new Z(0, 0, a.width, a.height)),
        (this.__textureWidth = this.width),
        (this.__textureHeight = this.height),
        (this.__isValid = this.readable = !0));
    },
    __getBounds: function (a, b) {
      var c = Z.__pool.get();
      this.rect.__transform(c, b);
      a.__expand(c.x, c.y, c.width, c.height);
      Z.__pool.release(c);
    },
    __renderCairo: function (a) {},
    __renderCanvas: function (a) {
      if (this.readable) {
        this.image.type == Za.DATA && na.convertToCanvas(this.image);
        var b = a.context;
        b.globalAlpha = 1;
        a.setTransform(this.__renderTransform, b);
        b.drawImage(
          this.image.get_src(),
          0,
          0,
          this.image.width,
          this.image.height
        );
      }
    },
    __renderDOM: function (a) {},
    __renderGL: function (a) {
      var b = a.__context3D;
      a.__setBlendMode(10);
      var c = a.__defaultDisplayShader;
      a.setShader(c);
      a.applyBitmapData(this, a.__allowSmoothing && a.__upscaled);
      a.applyMatrix(a.__getMatrix(this.__worldTransform, 1));
      a.applyAlpha(this.__worldAlpha);
      a.applyColorTransform(this.__worldColorTransform);
      a.updateShader();
      var d = this.getVertexBuffer(b);
      null != c.__position && b.setVertexBufferAt(c.__position.index, d, 0, 3);
      null != c.__textureCoord &&
        b.setVertexBufferAt(c.__textureCoord.index, d, 3, 2);
      c = this.getIndexBuffer(b);
      b.drawTriangles(c);
      a.__clearShader();
    },
    __setUVRect: function (a, b, c, d, e) {
      if (
        null != this.getVertexBuffer(a) &&
        (d != this.__uvRect.width ||
          e != this.__uvRect.height ||
          b != this.__uvRect.x ||
          c != this.__uvRect.y)
      ) {
        null == this.__uvRect && (this.__uvRect = new Z());
        this.__uvRect.setTo(b, c, d, e);
        a = 0 < this.__textureWidth ? b / this.__textureWidth : 0;
        c = 0 < this.__textureHeight ? c / this.__textureHeight : 0;
        b = 0 < this.__textureWidth ? d / this.__textureWidth : 0;
        var f = 0 < this.__textureHeight ? e / this.__textureHeight : 0;
        this.__vertexBufferData[0] = d;
        this.__vertexBufferData[1] = e;
        this.__vertexBufferData[3] = a + b;
        this.__vertexBufferData[4] = c + f;
        this.__vertexBufferData[15] = e;
        this.__vertexBufferData[17] = a;
        this.__vertexBufferData[18] = c + f;
        this.__vertexBufferData[28] = d;
        this.__vertexBufferData[31] = a + b;
        this.__vertexBufferData[32] = c;
        this.__vertexBufferData[45] = a;
        this.__vertexBufferData[46] = c;
        this.__vertexBuffer.uploadFromTypedArray(this.__vertexBufferData);
      }
    },
    __update: function (a, b) {
      this.__updateTransforms();
    },
    __updateTransforms: function (a) {
      null == a
        ? this.__worldTransform.identity()
        : this.__worldTransform.copyFrom(a);
      this.__renderTransform.copyFrom(this.__worldTransform);
    },
    __class__: ma,
  };
  var Z = function (a, b, c, d) {
    null == d && (d = 0);
    null == c && (c = 0);
    null == b && (b = 0);
    null == a && (a = 0);
    this.x = a;
    this.y = b;
    this.width = c;
    this.height = d;
  };
  l["openfl.geom.Rectangle"] = Z;
  Z.__name__ = ["openfl", "geom", "Rectangle"];
  Z.prototype = {
    height: null,
    width: null,
    x: null,
    y: null,
    clone: function () {
      return new Z(this.x, this.y, this.width, this.height);
    },
    contains: function (a, b) {
      return a >= this.x && b >= this.y && a < this.get_right()
        ? b < this.get_bottom()
        : !1;
    },
    containsPoint: function (a) {
      return this.contains(a.x, a.y);
    },
    copyFrom: function (a) {
      this.x = a.x;
      this.y = a.y;
      this.width = a.width;
      this.height = a.height;
    },
    equals: function (a) {
      return a == this
        ? !0
        : null != a && this.x == a.x && this.y == a.y && this.width == a.width
        ? this.height == a.height
        : !1;
    },
    intersects: function (a) {
      var b = this.x < a.x ? a.x : this.x;
      if (
        (this.get_right() > a.get_right() ? a.get_right() : this.get_right()) <=
        b
      )
        return !1;
      b = this.y < a.y ? a.y : this.y;
      return (
        (this.get_bottom() > a.get_bottom()
          ? a.get_bottom()
          : this.get_bottom()) > b
      );
    },
    setTo: function (a, b, c, d) {
      this.x = a;
      this.y = b;
      this.width = c;
      this.height = d;
    },
    __contract: function (a, b, c, d) {
      if (0 != this.width || 0 != this.height) {
        var e = 0,
          f = 0,
          g = 0,
          h = 0;
        this.x < a && (e = a - this.x);
        this.y < b && (f = b - this.y);
        this.get_right() > a + c && (g = a + c - this.get_right());
        this.get_bottom() > b + d && (h = b + d - this.get_bottom());
        this.x += e;
        this.y += f;
        this.width += g - e;
        this.height += h - f;
      }
    },
    __expand: function (a, b, c, d) {
      if (0 == this.width && 0 == this.height)
        (this.x = a), (this.y = b), (this.width = c), (this.height = d);
      else {
        var e = this.get_right(),
          f = this.get_bottom();
        this.x > a && ((this.x = a), (this.width = e - a));
        this.y > b && ((this.y = b), (this.height = f - b));
        e < a + c && (this.width = a + c - this.x);
        f < b + d && (this.height = b + d - this.y);
      }
    },
    __toLimeRectangle: function () {
      null == Z.__limeRectangle && (Z.__limeRectangle = new Dd());
      Z.__limeRectangle.setTo(this.x, this.y, this.width, this.height);
      return Z.__limeRectangle;
    },
    __transform: function (a, b) {
      var c = b.a * this.x + b.c * this.y,
        d = c,
        e = b.b * this.x + b.d * this.y,
        f = e,
        g = b.a * (this.x + this.width) + b.c * this.y,
        h = b.b * (this.x + this.width) + b.d * this.y;
      g < c && (c = g);
      h < e && (e = h);
      g > d && (d = g);
      h > f && (f = h);
      g = b.a * (this.x + this.width) + b.c * (this.y + this.height);
      h = b.b * (this.x + this.width) + b.d * (this.y + this.height);
      g < c && (c = g);
      h < e && (e = h);
      g > d && (d = g);
      h > f && (f = h);
      g = b.a * this.x + b.c * (this.y + this.height);
      h = b.b * this.x + b.d * (this.y + this.height);
      g < c && (c = g);
      h < e && (e = h);
      g > d && (d = g);
      h > f && (f = h);
      a.setTo(c + b.tx, e + b.ty, d - c, f - e);
    },
    get_bottom: function () {
      return this.y + this.height;
    },
    get_right: function () {
      return this.x + this.width;
    },
    __class__: Z,
    __properties__: { get_right: "get_right", get_bottom: "get_bottom" },
  };
  var jb = function () {};
  l["openfl._internal.renderer.context3D.Context3DGraphics"] = jb;
  jb.__name__ = [
    "openfl",
    "_internal",
    "renderer",
    "context3D",
    "Context3DGraphics",
  ];
  jb.buildBuffer = function (a, b) {
    var c = 0,
      d = 0,
      e = 0,
      f = new Pd(a.__commands);
    b = b.__context3D;
    for (
      var g = Z.__pool.get(),
        h = ia.__pool.get(),
        n = null,
        p = 0,
        k = a.__commands.types;
      p < k.length;

    ) {
      var l = k[p];
      ++p;
      switch (I.enumIndex(l)) {
        case 0:
          n = f.readBeginBitmapFill().obj(0);
          break;
        case 1:
          n = null;
          f.skip(l);
          break;
        case 3:
          n = f.readBeginShaderFill();
          l = n.obj(0);
          n =
            null == l || null == l.shader || null == l.shader.__bitmap
              ? null
              : n.obj(0).shader.__bitmap.input;
          break;
        case 8:
          if (null != n) {
            var m = f.readDrawQuads();
            l = m.obj(0);
            var q = m.obj(1);
            m = m.obj(2);
            var r = null != q,
              u = !1,
              t = !1,
              x = r ? q.get_length() : Math.floor(l.get_length() / 4);
            if (0 == x) return;
            null != m &&
              (m.get_length() >= 6 * x
                ? (t = u = !0)
                : m.get_length() >= 4 * x
                ? (u = !0)
                : m.get_length() >= 2 * x && (t = !0));
            null == a.__quadBuffer
              ? (a.__quadBuffer = new Jj(b, vd.QUADS, x, 4))
              : a.__quadBuffer.resize(c + x, 4);
            var v = a.__quadBuffer.vertexBufferData;
            var w = n.width;
            var y = n.height;
            for (var z = 0, A = x; z < A; ) {
              var K = z++;
              var C = 16 * (c + K);
              var B = r ? 4 * q.get(K) : 4 * K;
              if (!(0 > B)) {
                g.setTo(l.get(B), l.get(B + 1), l.get(B + 2), l.get(B + 3));
                B = g.width;
                var H = g.height;
                if (!(0 >= B || 0 >= H)) {
                  u && t
                    ? ((K *= 6),
                      h.setTo(
                        m.get(K),
                        m.get(K + 1),
                        m.get(K + 2),
                        m.get(K + 3),
                        m.get(K + 4),
                        m.get(K + 5)
                      ))
                    : u
                    ? ((K *= 4),
                      h.setTo(
                        m.get(K),
                        m.get(K + 1),
                        m.get(K + 2),
                        m.get(K + 3),
                        g.x,
                        g.y
                      ))
                    : t
                    ? ((K *= 2), (h.tx = m.get(K)), (h.ty = m.get(K + 1)))
                    : ((h.tx = g.x), (h.ty = g.y));
                  K = g.x / w;
                  var D = g.y / y;
                  var F = g.get_right() / w;
                  var G = g.get_bottom() / y;
                  var J = h.__transformX(0, 0);
                  var L = h.__transformY(0, 0);
                  var N = h.__transformX(B, 0);
                  var M = h.__transformY(B, 0);
                  var S = h.__transformX(0, H);
                  var O = h.__transformY(0, H);
                  var V = h.__transformX(B, H);
                  B = h.__transformY(B, H);
                  v[C] = J;
                  v[C + 1] = L;
                  v[C + 2] = K;
                  v[C + 3] = D;
                  v[C + 4] = N;
                  v[C + 4 + 1] = M;
                  v[C + 4 + 2] = F;
                  v[C + 4 + 3] = D;
                  v[C + 8] = S;
                  v[C + 8 + 1] = O;
                  v[C + 8 + 2] = K;
                  v[C + 8 + 3] = G;
                  v[C + 12] = V;
                  v[C + 12 + 1] = B;
                  v[C + 12 + 2] = F;
                  v[C + 12 + 3] = G;
                }
              }
            }
            c += x;
          }
          break;
        case 12:
          r = f.readDrawTriangles();
          l = r.obj(0);
          q = r.obj(1);
          m = r.obj(2);
          r.obj(3);
          r = null != q;
          x = Math.floor(l.get_length() / 2);
          u = r ? q.get_length() : x;
          C = (x = (t = null != m) && m.get_length() >= 3 * x) ? 4 : 2;
          w = x ? 3 : 2;
          y = C + 2;
          v = x ? e : d;
          jb.resizeVertexBuffer(a, x, v + u * y);
          z = x ? a.__vertexBufferDataUVT : a.__vertexBufferData;
          H = 0;
          for (K = u; H < K; )
            (D = H++),
              (A = v + D * y),
              (B = r ? 2 * q.get(D) : 2 * D),
              (D = r ? q.get(D) * w : D * w),
              x
                ? ((F = m.get(D + 2)),
                  (z[A] = l.get(B) / F),
                  (z[A + 1] = l.get(B + 1) / F),
                  (z[A + 2] = 0),
                  (z[A + 3] = 1 / F))
                : ((z[A] = l.get(B)), (z[A + 1] = l.get(B + 1))),
              (z[A + C] = t ? m.get(D) : 0),
              (z[A + C + 1] = t ? m.get(D + 1) : 0);
          x ? (e += u * y) : (d += u * y);
          break;
        case 13:
          n = null;
          break;
        default:
          f.skip(l);
      }
    }
    0 < c && a.__quadBuffer.flushVertexBufferData();
    if (0 < d) {
      c = a.__vertexBuffer;
      if (null == c || d > a.__vertexBufferCount)
        (c = b.createVertexBuffer(d, 4, 0)),
          (a.__vertexBuffer = c),
          (a.__vertexBufferCount = d);
      c.uploadFromTypedArray(a.__vertexBufferData);
    }
    if (0 < e) {
      d = a.__vertexBufferUVT;
      if (null == d || e > a.__vertexBufferCountUVT)
        (d = b.createVertexBuffer(e, 6, 0)),
          (a.__vertexBufferUVT = d),
          (a.__vertexBufferCountUVT = e);
      d.uploadFromTypedArray(a.__vertexBufferDataUVT);
    }
    Z.__pool.release(g);
    ia.__pool.release(h);
  };
  jb.isCompatible = function (a) {
    var b = new Pd(a.__commands),
      c = !1,
      d = !1,
      e = !1,
      f = 0;
    for (a = a.__commands.types; f < a.length; ) {
      var g = a[f];
      ++f;
      switch (I.enumIndex(g)) {
        case 0:
          d = !0;
          e = c = !1;
          b.skip(g);
          break;
        case 1:
          d = !1;
          c = !0;
          e = !1;
          b.skip(g);
          break;
        case 3:
          c = d = !1;
          e = !0;
          b.skip(g);
          break;
        case 8:
          if (d || e) b.skip(g);
          else return b.destroy(), !1;
          break;
        case 9:
          if (c) b.skip(g);
          else return b.destroy(), !1;
          break;
        case 12:
          if (d || e) b.skip(g);
          else return b.destroy(), !1;
          break;
        case 13:
          e = c = d = !1;
          b.skip(g);
          break;
        case 18:
          b.skip(g);
          break;
        default:
          return b.destroy(), !1;
      }
    }
    b.destroy();
    return !0;
  };
  jb.render = function (a, b) {
    if (a.__visible && 0 != a.__commands.get_length())
      if ((null != a.__bitmap && !a.__dirty) || !jb.isCompatible(a)) {
        var c = b.__softwareRenderer.__worldTransform;
        b.__softwareRenderer.__worldTransform = b.__worldTransform;
        q.render(a, b.__softwareRenderer);
        b.__softwareRenderer.__worldTransform = c;
      } else {
        a.__bitmap = null;
        a.__update(b.__worldTransform);
        c = a.__width;
        var d = a.__height;
        if (null != a.__bounds && 1 <= c && 1 <= d) {
          (a.__dirty ||
            (null == a.__quadBuffer &&
              null == a.__vertexBuffer &&
              null == a.__vertexBufferUVT)) &&
            jb.buildBuffer(a, b);
          c = new Pd(a.__commands);
          d = b.__context3D;
          for (
            var e = ia.__pool.get(),
              f = null,
              g = null,
              h = !1,
              n = !1,
              p = null,
              k = 0,
              l = 0,
              m = 0,
              r = 0,
              t = 0,
              x = a.__commands.types;
            t < x.length;

          ) {
            var v = x[t];
            ++t;
            switch (I.enumIndex(v)) {
              case 0:
                n = c.readBeginBitmapFill();
                g = n.obj(0);
                h = n.bool(0);
                n = n.bool(1);
                p = f = null;
                break;
              case 1:
                f = c.readBeginFill();
                g = u["int"](f["int"](0));
                f = u["int"](255 * f["float"](0));
                p = (g & 16777215) | (f << 24);
                g = f = null;
                break;
              case 3:
                f = c.readBeginShaderFill().obj(0);
                l = 0;
                g =
                  null == f || null == f.shader || null == f.shader.__bitmap
                    ? null
                    : f.shader.__bitmap.input;
                p = null;
                break;
              case 8:
                if (null != g) {
                  v = c.readDrawQuads();
                  var w = v.obj(0),
                    y = v.obj(1);
                  v.obj(2);
                  v =
                    null != y ? y.get_length() : Math.floor(w.get_length() / 4);
                  y = b.__getMatrix(a.__owner.__renderTransform, 1);
                  null == f || jb.maskRender
                    ? ((w = jb.maskRender
                        ? b.__maskShader
                        : b.__initGraphicsShader(null)),
                      b.setShader(w),
                      b.applyMatrix(y),
                      b.applyBitmapData(g, b.__allowSmoothing && n, h),
                      b.applyAlpha(a.__owner.__worldAlpha),
                      b.applyColorTransform(a.__owner.__worldColorTransform),
                      b.updateShader())
                    : ((w = b.__initShaderBuffer(f)),
                      b.__setShaderBuffer(f),
                      b.applyMatrix(y),
                      b.applyBitmapData(g, !1, h),
                      b.applyAlpha(a.__owner.__worldAlpha),
                      b.applyColorTransform(a.__owner.__worldColorTransform));
                  for (y = k + v; k < y; ) {
                    v = u["int"](Math.min(y - k, d.__quadIndexBufferElements));
                    if (0 >= v) break;
                    null == f || jb.maskRender || b.__updateShaderBuffer(l);
                    null != w.__position &&
                      d.setVertexBufferAt(
                        w.__position.index,
                        a.__quadBuffer.vertexBuffer,
                        16 * k,
                        2
                      );
                    null != w.__textureCoord &&
                      d.setVertexBufferAt(
                        w.__textureCoord.index,
                        a.__quadBuffer.vertexBuffer,
                        16 * k + 2,
                        2
                      );
                    d.drawTriangles(d.__quadIndexBuffer, 0, 2 * v);
                    l += 4 * v;
                    k += v;
                  }
                  b.__clearShader();
                }
                break;
              case 9:
                if (null != p) {
                  var z = c.readDrawRect();
                  v = z["float"](0);
                  w = z["float"](1);
                  y = z["float"](2);
                  var A = z["float"](3);
                  z = p;
                  jb.tempColorTransform.redOffset = (z >>> 16) & 255;
                  jb.tempColorTransform.greenOffset = (z >>> 8) & 255;
                  jb.tempColorTransform.blueOffset = z & 255;
                  jb.tempColorTransform.__combine(
                    a.__owner.__worldColorTransform
                  );
                  e.identity();
                  e.scale(y, A);
                  e.tx = v;
                  e.ty = w;
                  e.concat(a.__owner.__renderTransform);
                  v = jb.maskRender
                    ? b.__maskShader
                    : b.__initGraphicsShader(null);
                  b.setShader(v);
                  b.applyMatrix(b.__getMatrix(e, 1));
                  b.applyBitmapData(jb.blankBitmapData, b.__allowSmoothing, h);
                  b.applyAlpha(
                    (((z >>> 24) & 255) / 255) * a.__owner.__worldAlpha
                  );
                  b.applyColorTransform(jb.tempColorTransform);
                  b.updateShader();
                  w = jb.blankBitmapData.getVertexBuffer(d);
                  null != v.__position &&
                    d.setVertexBufferAt(v.__position.index, w, 0, 3);
                  null != v.__textureCoord &&
                    d.setVertexBufferAt(v.__textureCoord.index, w, 3, 2);
                  v = jb.blankBitmapData.getIndexBuffer(d);
                  d.drawTriangles(v);
                  l += 4;
                  b.__clearShader();
                }
                break;
              case 12:
                v = c.readDrawTriangles();
                y = v.obj(0);
                w = v.obj(1);
                z = v.obj(2);
                v = v.obj(3);
                var C = null != w;
                A = Math.floor(y.get_length() / 2);
                w = C ? w.get_length() : A;
                A = (z = (y = null != z) && z.get_length() >= 3 * A) ? 4 : 2;
                C = A + 2;
                var B = z ? a.__vertexBufferUVT : a.__vertexBuffer,
                  K = z ? r : m,
                  D = b.__getMatrix(a.__owner.__renderTransform, 1);
                if (null == f || jb.maskRender) {
                  var H = jb.maskRender
                    ? b.__maskShader
                    : b.__initGraphicsShader(null);
                  b.setShader(H);
                  b.applyMatrix(D);
                  b.applyBitmapData(g, b.__allowSmoothing && n, h);
                  b.applyAlpha(a.__owner.__worldAlpha);
                  b.applyColorTransform(a.__owner.__worldColorTransform);
                  b.updateShader();
                } else
                  (H = b.__initShaderBuffer(f)),
                    b.__setShaderBuffer(f),
                    b.applyMatrix(D),
                    b.applyBitmapData(g, !1, h),
                    b.applyAlpha(1),
                    b.applyColorTransform(null),
                    b.__updateShaderBuffer(l);
                null != H.__position &&
                  d.setVertexBufferAt(H.__position.index, B, K, z ? 4 : 2);
                null != H.__textureCoord &&
                  d.setVertexBufferAt(H.__textureCoord.index, B, K + A, 2);
                switch (v) {
                  case 0:
                    d.setCulling(0);
                    break;
                  case 2:
                    d.setCulling(1);
                }
                d.__drawTriangles(K, w);
                l += w;
                y ? (r += C * w) : (m += C * w);
                1 != v && d.setCulling(0);
                b.__clearShader();
                break;
              case 13:
                f = p = g = null;
                c.skip(v);
                break;
              case 18:
                v = c.readMoveTo();
                v["float"](0);
                v["float"](1);
                break;
              default:
                c.skip(v);
            }
          }
          ia.__pool.release(e);
        }
        a.set___dirty(!1);
      }
  };
  jb.renderMask = function (a, b) {
    jb.maskRender = !0;
    jb.render(a, b);
    jb.maskRender = !1;
  };
  jb.resizeVertexBuffer = function (a, b, c) {
    var d = b ? a.__vertexBufferDataUVT : a.__vertexBufferData,
      e = null;
    null == d
      ? (e = null != c ? new de(c) : null)
      : c > d.length && ((e = null != c ? new de(c) : null), e.set(d));
    null != e &&
      (b ? (a.__vertexBufferDataUVT = e) : (a.__vertexBufferData = e));
  };
  var Rc = function (a) {
    this.byteCode = a;
    this.precisionHint = 1;
    this.__glSourceDirty = !0;
    this.__numPasses = 1;
    this.__data = Kj._new(a);
  };
  l["openfl.display.Shader"] = Rc;
  Rc.__name__ = ["openfl", "display", "Shader"];
  Rc.prototype = {
    byteCode: null,
    glProgram: null,
    precisionHint: null,
    program: null,
    __alpha: null,
    __bitmap: null,
    __colorMultiplier: null,
    __colorOffset: null,
    __context: null,
    __data: null,
    __glFragmentSource: null,
    __glSourceDirty: null,
    __glVertexSource: null,
    __hasColorTransform: null,
    __inputBitmapData: null,
    __isGenerated: null,
    __matrix: null,
    __numPasses: null,
    __paramBool: null,
    __paramFloat: null,
    __paramInt: null,
    __position: null,
    __textureCoord: null,
    __texture: null,
    __textureSize: null,
    __clearUseArray: function () {
      for (var a = 0, b = this.__paramBool; a < b.length; ) {
        var c = b[a];
        ++a;
        c.__useArray = !1;
      }
      a = 0;
      for (b = this.__paramFloat; a < b.length; )
        (c = b[a]), ++a, (c.__useArray = !1);
      a = 0;
      for (b = this.__paramInt; a < b.length; )
        (c = b[a]), ++a, (c.__useArray = !1);
    },
    __createGLShader: function (a, b) {
      var c = this.__context.gl,
        d = c.createShader(b);
      c.shaderSource(d, a);
      c.compileShader(d);
      0 == c.getShaderParameter(d, c.COMPILE_STATUS) &&
        ((b =
          b == c.VERTEX_SHADER
            ? "Error compiling vertex shader"
            : "Error compiling fragment shader"),
        (b += "\n" + c.getShaderInfoLog(d)),
        xa.error(b + ("\n" + a), {
          fileName: "Shader.hx",
          lineNumber: 180,
          className: "openfl.display.Shader",
          methodName: "__createGLShader",
        }));
      return d;
    },
    __createGLProgram: function (a, b) {
      var c = this.__context.gl;
      a = this.__createGLShader(a, c.VERTEX_SHADER);
      var d = this.__createGLShader(b, c.FRAGMENT_SHADER);
      b = c.createProgram();
      for (var e = 0, f = this.__paramFloat; e < f.length; ) {
        var g = f[e];
        ++e;
        if (
          -1 < g.name.indexOf("Position") &&
          J.startsWith(g.name, "openfl_")
        ) {
          c.bindAttribLocation(b, 0, g.name);
          break;
        }
      }
      c.attachShader(b, a);
      c.attachShader(b, d);
      c.linkProgram(b);
      0 == c.getProgramParameter(b, c.LINK_STATUS) &&
        ((c =
          "Unable to initialize the shader program\n" + c.getProgramInfoLog(b)),
        xa.error(c, {
          fileName: "Shader.hx",
          lineNumber: 218,
          className: "openfl.display.Shader",
          methodName: "__createGLProgram",
        }));
      return b;
    },
    __disable: function () {
      null != this.program && this.__disableGL();
    },
    __disableGL: function () {
      for (
        var a = this.__context.gl, b = 0, c = 0, d = this.__inputBitmapData;
        c < d.length;

      ) {
        var e = d[c];
        ++c;
        e.__disableGL(this.__context, b);
        ++b;
      }
      b = 0;
      for (c = this.__paramBool; b < c.length; )
        (d = c[b]), ++b, d.__disableGL(this.__context);
      b = 0;
      for (c = this.__paramFloat; b < c.length; )
        (d = c[b]), ++b, d.__disableGL(this.__context);
      b = 0;
      for (c = this.__paramInt; b < c.length; )
        (d = c[b]), ++b, d.__disableGL(this.__context);
      this.__context.__bindGLArrayBuffer(null);
      "opengl" == this.__context.__context.type && a.disable(a.TEXTURE_2D);
    },
    __enable: function () {
      this.__init();
      null != this.program && this.__enableGL();
    },
    __enableGL: function () {
      for (
        var a = 0, b = this.__context.gl, c = 0, d = this.__inputBitmapData;
        c < d.length;

      ) {
        var e = d[c];
        ++c;
        b.uniform1i(e.index, a);
        ++a;
      }
      "opengl" == this.__context.__context.type &&
        0 < a &&
        b.enable(b.TEXTURE_2D);
    },
    __init: function () {
      null == this.__data && (this.__data = Kj._new(null));
      null == this.__glFragmentSource ||
        null == this.__glVertexSource ||
        (null != this.program && !this.__glSourceDirty) ||
        this.__initGL();
    },
    __initGL: function () {
      if (this.__glSourceDirty || null == this.__paramBool)
        (this.__glSourceDirty = !1),
          (this.program = null),
          (this.__inputBitmapData = []),
          (this.__paramBool = []),
          (this.__paramFloat = []),
          (this.__paramInt = []),
          this.__processGLData(this.get_glVertexSource(), "attribute"),
          this.__processGLData(this.get_glVertexSource(), "uniform"),
          this.__processGLData(this.get_glFragmentSource(), "uniform");
      if (null != this.__context && null == this.program) {
        var a = this.__context.gl,
          b =
            "#ifdef GL_ES\n\t\t\t\t" +
            (1 == this.precisionHint
              ? "#ifdef GL_FRAGMENT_PRECISION_HIGH\n\t\t\t\tprecision highp float;\n\t\t\t\t#else\n\t\t\t\tprecision mediump float;\n\t\t\t\t#endif"
              : "precision lowp float;") +
            "\n\t\t\t\t#endif\n\t\t\t\t",
          c = b + this.get_glVertexSource();
        b += this.get_glFragmentSource();
        var d = c + b;
        this.__context.__programs.exists(d)
          ? (this.program = this.__context.__programs.get(d))
          : ((this.program = this.__context.createProgram(1)),
            (this.program.__glProgram = this.__createGLProgram(c, b)),
            this.__context.__programs.set(d, this.program));
        if (null != this.program) {
          this.glProgram = this.program.__glProgram;
          c = 0;
          for (b = this.__inputBitmapData; c < b.length; )
            (d = b[c]),
              ++c,
              (d.index = d.__isUniform
                ? a.getUniformLocation(this.glProgram, d.name)
                : a.getAttribLocation(this.glProgram, d.name));
          c = 0;
          for (b = this.__paramBool; c < b.length; )
            (d = b[c]),
              ++c,
              (d.index = d.__isUniform
                ? a.getUniformLocation(this.glProgram, d.name)
                : a.getAttribLocation(this.glProgram, d.name));
          c = 0;
          for (b = this.__paramFloat; c < b.length; )
            (d = b[c]),
              ++c,
              (d.index = d.__isUniform
                ? a.getUniformLocation(this.glProgram, d.name)
                : a.getAttribLocation(this.glProgram, d.name));
          c = 0;
          for (b = this.__paramInt; c < b.length; )
            (d = b[c]),
              ++c,
              (d.index = d.__isUniform
                ? a.getUniformLocation(this.glProgram, d.name)
                : a.getAttribLocation(this.glProgram, d.name));
        }
      }
    },
    __processGLData: function (a, b) {
      var c = 0,
        d;
      for (
        d =
          "uniform" == b
            ? new pa("uniform ([A-Za-z0-9]+) ([A-Za-z0-9_]+)", "")
            : new pa("attribute ([A-Za-z0-9]+) ([A-Za-z0-9_]+)", "");
        d.matchSub(a, c);

      ) {
        var e = d.matched(1);
        var f = d.matched(2);
        if (!J.startsWith(f, "gl_")) {
          c = "uniform" == b;
          if (J.startsWith(e, "sampler")) {
            e = new Lj();
            e.name = f;
            e.__isUniform = c;
            this.__inputBitmapData.push(e);
            switch (f) {
              case "bitmap":
                this.__bitmap = e;
                break;
              case "openfl_Texture":
                this.__texture = e;
            }
            A.setField(this.__data, f, e);
            this.__isGenerated && A.setField(this, f, e);
          } else if (
            !A.hasField(this.__data, f) ||
            null == A.field(this.__data, f)
          ) {
            switch (e) {
              case "bool":
                var g = 0;
                break;
              case "bvec2":
                g = 1;
                break;
              case "bvec3":
                g = 2;
                break;
              case "bvec4":
                g = 3;
                break;
              case "dvec2":
              case "vec2":
                g = 5;
                break;
              case "dvec3":
              case "vec3":
                g = 6;
                break;
              case "double":
              case "float":
                g = 4;
                break;
              case "ivec3":
              case "uvec3":
                g = 10;
                break;
              case "ivec4":
              case "uvec4":
                g = 11;
                break;
              case "mat2":
              case "mat2x2":
                g = 12;
                break;
              case "mat2x3":
                g = 13;
                break;
              case "mat2x4":
                g = 14;
                break;
              case "mat3x2":
                g = 15;
                break;
              case "mat3":
              case "mat3x3":
                g = 16;
                break;
              case "mat3x4":
                g = 17;
                break;
              case "mat4":
              case "mat4x4":
                g = 20;
                break;
              case "mat4x2":
                g = 18;
                break;
              case "mat4x3":
                g = 19;
                break;
              case "int":
              case "uint":
                g = 8;
                break;
              case "ivec2":
              case "uvec2":
                g = 9;
                break;
              case "dvec4":
              case "vec4":
                g = 7;
                break;
              default:
                g = null;
            }
            switch (g) {
              case 1:
              case 5:
              case 9:
                e = 2;
                break;
              case 3:
              case 7:
              case 11:
              case 12:
                e = 4;
                break;
              case 2:
              case 6:
              case 10:
                e = 3;
                break;
              case 16:
                e = 9;
                break;
              case 20:
                e = 16;
                break;
              default:
                e = 1;
            }
            switch (g) {
              case 12:
                var h = 2;
                break;
              case 16:
                h = 3;
                break;
              case 20:
                h = 4;
                break;
              default:
                h = 1;
            }
            switch (g) {
              case 0:
              case 1:
              case 2:
              case 3:
                var n = new Gg();
                n.name = f;
                n.type = g;
                n.__arrayLength = h;
                n.__isBool = !0;
                n.__isUniform = c;
                n.__length = e;
                this.__paramBool.push(n);
                "openfl_HasColorTransform" == f &&
                  (this.__hasColorTransform = n);
                A.setField(this.__data, f, n);
                this.__isGenerated && A.setField(this, f, n);
                break;
              case 8:
              case 9:
              case 10:
              case 11:
                n = new Gg();
                n.name = f;
                n.type = g;
                n.__arrayLength = h;
                n.__isInt = !0;
                n.__isUniform = c;
                n.__length = e;
                this.__paramInt.push(n);
                A.setField(this.__data, f, n);
                this.__isGenerated && A.setField(this, f, n);
                break;
              default:
                n = new Gg();
                n.name = f;
                n.type = g;
                n.__arrayLength = h;
                0 < h &&
                  ((g = h * h),
                  (g = null != g ? new de(g) : null),
                  (n.__uniformMatrix = g));
                n.__isFloat = !0;
                n.__isUniform = c;
                n.__length = e;
                this.__paramFloat.push(n);
                if (J.startsWith(f, "openfl_"))
                  switch (f) {
                    case "openfl_Alpha":
                      this.__alpha = n;
                      break;
                    case "openfl_ColorMultiplier":
                      this.__colorMultiplier = n;
                      break;
                    case "openfl_ColorOffset":
                      this.__colorOffset = n;
                      break;
                    case "openfl_Matrix":
                      this.__matrix = n;
                      break;
                    case "openfl_Position":
                      this.__position = n;
                      break;
                    case "openfl_TextureCoord":
                      this.__textureCoord = n;
                      break;
                    case "openfl_TextureSize":
                      this.__textureSize = n;
                  }
                A.setField(this.__data, f, n);
                this.__isGenerated && A.setField(this, f, n);
            }
          }
          f = d.matchedPos();
          c = f.pos + f.len;
        }
      }
    },
    __update: function () {
      null != this.program && this.__updateGL();
    },
    __updateFromBuffer: function (a, b) {
      null != this.program && this.__updateGLFromBuffer(a, b);
    },
    __updateGL: function () {
      for (var a = 0, b = 0, c = this.__inputBitmapData; b < c.length; ) {
        var d = c[b];
        ++b;
        d.__updateGL(this.__context, a);
        ++a;
      }
      a = 0;
      for (b = this.__paramBool; a < b.length; )
        (c = b[a]), ++a, c.__updateGL(this.__context);
      a = 0;
      for (b = this.__paramFloat; a < b.length; )
        (c = b[a]), ++a, c.__updateGL(this.__context);
      a = 0;
      for (b = this.__paramInt; a < b.length; )
        (c = b[a]), ++a, c.__updateGL(this.__context);
    },
    __updateGLFromBuffer: function (a, b) {
      for (var c = 0, d, e, f, g, h, n = 0, p = a.inputCount; n < p; )
        (h = n++),
          (d = a.inputRefs[h]),
          (e = a.inputs[h]),
          (f = a.inputFilter[h]),
          (g = a.inputMipFilter[h]),
          (h = a.inputWrap[h]),
          null != e && (d.__updateGL(this.__context, c, e, f, g, h), ++c);
      c = this.__context.gl;
      0 < a.paramDataLength
        ? (null == a.paramDataBuffer && (a.paramDataBuffer = c.createBuffer()),
          this.__context.__bindGLArrayBuffer(a.paramDataBuffer),
          rb.bufferData(c, c.ARRAY_BUFFER, a.paramData, c.DYNAMIC_DRAW))
        : this.__context.__bindGLArrayBuffer(null);
      e = d = c = 0;
      f = a.paramBoolCount;
      g = a.paramFloatCount;
      n = a.paramData;
      for (var k, l = (h = null), m = null, q = 0, r = a.paramCount; q < r; ) {
        var t = q++;
        p = !1;
        if (t < f) {
          k = a.paramRefs_Bool[c];
          for (var u = 0, v = a.overrideCount; u < v; ) {
            var x = u++;
            if (k.name == a.overrideNames[x]) {
              h = a.overrideValues[x];
              p = !0;
              break;
            }
          }
          p
            ? k.__updateGL(this.__context, h)
            : k.__updateGLFromBuffer(
                this.__context,
                n,
                a.paramPositions[t],
                a.paramLengths[t],
                b
              );
          ++c;
        } else if (t < f + g) {
          k = a.paramRefs_Float[d];
          u = 0;
          for (v = a.overrideCount; u < v; )
            if (((x = u++), k.name == a.overrideNames[x])) {
              l = a.overrideValues[x];
              p = !0;
              break;
            }
          p
            ? k.__updateGL(this.__context, l)
            : k.__updateGLFromBuffer(
                this.__context,
                n,
                a.paramPositions[t],
                a.paramLengths[t],
                b
              );
          ++d;
        } else {
          k = a.paramRefs_Int[e];
          u = 0;
          for (v = a.overrideCount; u < v; )
            if (((x = u++), k.name == a.overrideNames[x])) {
              m = a.overrideValues[x];
              p = !0;
              break;
            }
          p
            ? k.__updateGL(this.__context, m)
            : k.__updateGLFromBuffer(
                this.__context,
                n,
                a.paramPositions[t],
                a.paramLengths[t],
                b
              );
          ++e;
        }
      }
    },
    get_glFragmentSource: function () {
      return this.__glFragmentSource;
    },
    get_glVertexSource: function () {
      return this.__glVertexSource;
    },
    __class__: Rc,
    __properties__: {
      get_glVertexSource: "get_glVertexSource",
      get_glFragmentSource: "get_glFragmentSource",
    },
  };
  var Cf = function () {
    null == this.__glFragmentSource &&
      (this.__glFragmentSource =
        "varying vec2 openfl_TextureCoordv;\n\t\t\n\t\tuniform sampler2D openfl_Texture;\n\t\t\n\t\tvoid main(void) {\n\t\t\t\n\t\t\tvec4 color = texture2D (openfl_Texture, openfl_TextureCoordv);\n\t\t\t\n\t\t\tif (color.a == 0.0) {\n\t\t\t\t\n\t\t\t\tdiscard;\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\tgl_FragColor = color;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}");
    null == this.__glVertexSource &&
      (this.__glVertexSource =
        "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tvarying vec2 openfl_TextureCoordv;\n\t\t\n\t\tuniform mat4 openfl_Matrix;\n\t\t\n\t\tvoid main(void) {\n\t\t\t\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\t\t\t\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\t\n\t\t}");
    Rc.call(this);
    this.__isGenerated = !0;
    this.__initGL();
  };
  l["openfl._internal.renderer.context3D.Context3DMaskShader"] = Cf;
  Cf.__name__ = [
    "openfl",
    "_internal",
    "renderer",
    "context3D",
    "Context3DMaskShader",
  ];
  Cf.__super__ = Rc;
  Cf.prototype = v(Rc.prototype, {
    openfl_Position: null,
    openfl_TextureCoord: null,
    openfl_Matrix: null,
    openfl_Texture: null,
    __class__: Cf,
  });
  var Wf = function () {};
  l["openfl._internal.renderer.context3D.Context3DShape"] = Wf;
  Wf.__name__ = [
    "openfl",
    "_internal",
    "renderer",
    "context3D",
    "Context3DShape",
  ];
  Wf.render = function (a, b) {
    if (a.__renderable && !(0 >= a.__worldAlpha)) {
      var c = a.__graphics;
      if (null != c) {
        b.__setBlendMode(a.__worldBlendMode);
        b.__pushMaskObject(a);
        jb.render(c, b);
        if (null != c.__bitmap && c.__visible) {
          var d = b.__context3D,
            e = b.__initDisplayShader(a.__worldShader);
          b.setShader(e);
          b.applyBitmapData(c.__bitmap, b.__allowSmoothing);
          b.applyMatrix(b.__getMatrix(c.__worldTransform, 1));
          b.applyAlpha(a.__worldAlpha);
          b.applyColorTransform(a.__worldColorTransform);
          b.updateShader();
          var f = c.__bitmap.getVertexBuffer(d);
          null != e.__position &&
            d.setVertexBufferAt(e.__position.index, f, 0, 3);
          null != e.__textureCoord &&
            d.setVertexBufferAt(e.__textureCoord.index, f, 3, 2);
          c = c.__bitmap.getIndexBuffer(d);
          d.drawTriangles(c);
          b.__clearShader();
        }
        b.__popMaskObject(a);
      }
    }
  };
  Wf.renderMask = function (a, b) {
    var c = a.__graphics;
    if (null != c && (jb.renderMask(c, b), null != c.__bitmap)) {
      a = b.__context3D;
      var d = b.__maskShader;
      b.setShader(d);
      b.applyBitmapData(c.__bitmap, b.__allowSmoothing);
      b.applyMatrix(b.__getMatrix(c.__worldTransform, 1));
      b.updateShader();
      var e = c.__bitmap.getVertexBuffer(a);
      null != d.__position && a.setVertexBufferAt(d.__position.index, e, 0, 3);
      null != d.__textureCoord &&
        a.setVertexBufferAt(d.__textureCoord.index, e, 3, 2);
      c = c.__bitmap.getIndexBuffer(a);
      a.drawTriangles(c);
      b.__clearShader();
    }
  };
  var Oh = function () {
    this.backBufferEnableDepthAndStencil = !1;
    this.blendDestinationFactor = 9;
    this.blendSourceFactor = 2;
    this.colorMaskAlpha =
      this.colorMaskBlue =
      this.colorMaskGreen =
      this.colorMaskRed =
        !0;
    this.culling = 3;
    this.depthCompareMode = 4;
    this.depthMask = !0;
    this.samplerStates = [];
    this.scissorRectangle = new Z();
    this.stencilCompareMode = 0;
    this.stencilPass = this.stencilFail = this.stencilDepthFail = 5;
    this.stencilReadMask = 255;
    this.stencilReferenceValue = 0;
    this.stencilTriangleFace = 2;
    this.stencilWriteMask = 255;
    this.textures = [];
    this.__frontFaceGLCCW = !0;
    this.__glBlendEquation = 32774;
  };
  l["openfl._internal.renderer.context3D.Context3DState"] = Oh;
  Oh.__name__ = [
    "openfl",
    "_internal",
    "renderer",
    "context3D",
    "Context3DState",
  ];
  Oh.prototype = {
    backBufferEnableDepthAndStencil: null,
    blendDestinationFactor: null,
    blendSourceFactor: null,
    colorMaskRed: null,
    colorMaskGreen: null,
    colorMaskBlue: null,
    colorMaskAlpha: null,
    culling: null,
    depthCompareMode: null,
    depthMask: null,
    program: null,
    renderToTexture: null,
    renderToTextureAntiAlias: null,
    renderToTextureDepthStencil: null,
    renderToTextureSurfaceSelector: null,
    samplerStates: null,
    scissorEnabled: null,
    scissorRectangle: null,
    stencilCompareMode: null,
    stencilDepthFail: null,
    stencilFail: null,
    stencilPass: null,
    stencilReadMask: null,
    stencilReferenceValue: null,
    stencilTriangleFace: null,
    stencilWriteMask: null,
    textures: null,
    shader: null,
    __currentGLArrayBuffer: null,
    __currentGLElementArrayBuffer: null,
    __currentGLFramebuffer: null,
    __currentGLTexture2D: null,
    __currentGLTextureCubeMap: null,
    __enableGLBlend: null,
    __enableGLCullFace: null,
    __enableGLDepthTest: null,
    __enableGLScissorTest: null,
    __enableGLStencilTest: null,
    __frontFaceGLCCW: null,
    __glBlendEquation: null,
    __primaryGLFramebuffer: null,
    __class__: Oh,
  };
  var zd = function () {};
  l["openfl._internal.renderer.dom.DOMBitmap"] = zd;
  zd.__name__ = ["openfl", "_internal", "renderer", "dom", "DOMBitmap"];
  zd.clear = function (a, b) {
    null != a.__image &&
      (b.element.removeChild(a.__image),
      (a.__image = null),
      (a.__style = null));
    null != a.__canvas &&
      (b.element.removeChild(a.__canvas),
      (a.__canvas = null),
      (a.__style = null));
  };
  zd.render = function (a, b) {
    null != a.stage &&
    a.__worldVisible &&
    a.__renderable &&
    null != a.__bitmapData &&
    a.__bitmapData.__isValid &&
    a.__bitmapData.readable
      ? (b.__pushMaskObject(a),
        null != a.__bitmapData.image.buffer.__srcImage
          ? zd.renderImage(a, b)
          : zd.renderCanvas(a, b),
        b.__popMaskObject(a))
      : zd.clear(a, b);
  };
  zd.renderCanvas = function (a, b) {
    null != a.__image && (b.element.removeChild(a.__image), (a.__image = null));
    null == a.__canvas &&
      ((a.__canvas = T.get_document().createElement("canvas")),
      (a.__context = a.__canvas.getContext("2d")),
      (a.__imageVersion = -1),
      (b.__allowSmoothing && a.smoothing) ||
        (a.__context.imageSmoothingEnabled = !1),
      b.__initializeElement(a, a.__canvas));
    a.__imageVersion != a.__bitmapData.image.version &&
      (na.convertToCanvas(a.__bitmapData.image),
      (a.__canvas.width = a.__bitmapData.width + 1),
      (a.__canvas.width = a.__bitmapData.width),
      (a.__canvas.height = a.__bitmapData.height),
      a.__context.drawImage(a.__bitmapData.image.buffer.__srcCanvas, 0, 0),
      (a.__imageVersion = a.__bitmapData.image.version));
    b.__updateClip(a);
    b.__applyStyle(a, !0, !0, !0);
  };
  zd.renderImage = function (a, b) {
    null != a.__canvas &&
      (b.element.removeChild(a.__canvas), (a.__canvas = null));
    null == a.__image &&
      ((a.__image = T.get_document().createElement("img")),
      (a.__image.crossOrigin = "Anonymous"),
      (a.__image.src = a.__bitmapData.image.buffer.__srcImage.src),
      b.__initializeElement(a, a.__image));
    b.__updateClip(a);
    b.__applyStyle(a, !0, !0, !0);
  };
  var og = function () {};
  l["openfl._internal.renderer.dom.DOMDisplayObject"] = og;
  og.__name__ = ["openfl", "_internal", "renderer", "dom", "DOMDisplayObject"];
  og.clear = function (a, b) {
    Df.clear(a, b);
  };
  og.render = function (a, b) {
    null != a.opaqueBackground &&
      !a.__isCacheBitmapRender &&
      0 < a.get_width() &&
      a.get_height();
    Df.render(a, b);
  };
  var Df = function () {};
  l["openfl._internal.renderer.dom.DOMShape"] = Df;
  Df.__name__ = ["openfl", "_internal", "renderer", "dom", "DOMShape"];
  Df.clear = function (a, b) {
    null != a.__canvas &&
      (b.element.removeChild(a.__canvas),
      (a.__canvas = null),
      (a.__style = null));
  };
  Df.render = function (a, b) {
    var c = a.__graphics;
    if (null != a.stage && a.__worldVisible && a.__renderable && null != c) {
      q.render(c, b.__canvasRenderer);
      if (c.__dirty || a.__worldAlphaChanged || a.__canvas != c.__canvas)
        null != c.__canvas
          ? a.__canvas != c.__canvas &&
            (null != a.__canvas && b.element.removeChild(a.__canvas),
            (a.__canvas = c.__canvas),
            (a.__context = c.__context),
            b.__initializeElement(a, a.__canvas))
          : Df.clear(a, b);
      if (null != a.__canvas) {
        b.__pushMaskObject(a);
        var d = a.__renderTransform;
        a.__renderTransform = c.__worldTransform;
        c.__transformDirty &&
          ((c.__transformDirty = !1), (a.__renderTransformChanged = !0));
        b.__updateClip(a);
        b.__applyStyle(a, !0, !0, !0);
        a.__renderTransform = d;
        b.__popMaskObject(a);
      }
    } else Df.clear(a, b);
  };
  var hb = function () {};
  l["openfl._internal.renderer.dom.DOMTextField"] = hb;
  hb.__name__ = ["openfl", "_internal", "renderer", "dom", "DOMTextField"];
  hb.clear = function (a, b) {
    null != a.__div &&
      (b.element.removeChild(a.__div), (a.__div = null), (a.__style = null));
  };
  hb.render = function (a, b) {
    var c = a.__textEngine;
    if (null != a.stage && a.__worldVisible && a.__renderable) {
      if (a.__dirty || a.__renderTransformChanged || null == a.__div)
        if ("" != c.text || c.background || c.border || 1 == c.type) {
          null == a.__div &&
            ((a.__div = T.get_document().createElement("div")),
            b.__initializeElement(a, a.__div),
            a.__style.setProperty("outline", "none", null),
            a.__div.addEventListener(
              "input",
              function (b) {
                b.preventDefault();
                a.get_htmlText() != a.__div.innerHTML &&
                  (a.set_htmlText(a.__div.innerHTML), (a.__dirty = !1));
              },
              !0
            ));
          c.wordWrap
            ? a.__style.setProperty("word-wrap", "break-word", null)
            : a.__style.setProperty("white-space", "nowrap", null);
          a.__style.setProperty("overflow", "hidden", null);
          c.selectable
            ? (a.__style.setProperty("cursor", "text", null),
              a.__style.setProperty("-webkit-user-select", "text", null),
              a.__style.setProperty("-moz-user-select", "text", null),
              a.__style.setProperty("-ms-user-select", "text", null),
              a.__style.setProperty("-o-user-select", "text", null))
            : a.__style.setProperty("cursor", "inherit", null);
          a.__div.contentEditable = 1 == c.type;
          var d = a.__style;
          c.background
            ? d.setProperty(
                "background-color",
                "#" + J.hex(c.backgroundColor & 16777215, 6),
                null
              )
            : d.removeProperty("background-color");
          var e = c.width,
            f = c.height,
            g = 1,
            h = a.__textFormat.size,
            n = h,
            p = a.__renderTransform;
          if (1 != p.a || 1 != p.d)
            p.a == p.d
              ? ((g = p.a), (p.a = p.d = 1))
              : p.a > p.d
              ? ((g = p.a), (p.d /= p.a), (p.a = 1))
              : ((g = p.d), (p.a /= p.d), (p.d = 1)),
              (n *= g),
              (e = Math.ceil(e * g)),
              (f = Math.ceil(f * g));
          a.__textFormat.size = n;
          p = c.text;
          var k = 0;
          if (a.__isHTML) {
            for (var l = p; hb.__regexFont.match(l); ) {
              l = hb.__regexFont.matched(0);
              var m = "";
              hb.__regexFace.match(l) &&
                (m +=
                  "font-family:'" +
                  hb.__getAttributeMatch(hb.__regexFace) +
                  "';");
              hb.__regexColor.match(l) &&
                (m +=
                  "color:#" + hb.__getAttributeMatch(hb.__regexColor) + ";");
              if (hb.__regexSize.match(l)) {
                k = hb.__getAttributeMatch(hb.__regexSize);
                var q = S.cca(k, 0);
                k = u.parseFloat(k) * g;
                m += "font-size:" + (43 == q || 45 == q ? n + k : k) + "px;";
              }
              p = J.replace(p, l, "<span style='" + m + "'>");
              l = hb.__regexFont.matchedRight();
            }
            p = hb.__regexCloseFont.replace(p, "</span>");
          } else p = J.htmlEscape(p);
          p = J.replace(p, "<p ", "<p style='margin-top:0; margin-bottom:0;' ");
          g = a.__textFormat.leading;
          a.__textFormat.leading += u["int"](k);
          a.__div.innerHTML = new pa("\r\n", "g").replace(p, "<br>");
          a.__div.innerHTML = new pa("\n", "g").replace(
            a.__div.innerHTML,
            "<br>"
          );
          a.__div.innerHTML = new pa("\r", "g").replace(
            a.__div.innerHTML,
            "<br>"
          );
          d.setProperty("font", Va.getFont(a.__textFormat), null);
          a.__textFormat.size = h;
          a.__textFormat.leading = g;
          d.setProperty("top", "3px", null);
          c.border
            ? (d.setProperty(
                "border",
                "solid 1px #" + J.hex(c.borderColor & 16777215, 6),
                null
              ),
              a.__renderTransform.translate(-1, -1),
              (a.__renderTransformChanged = !0),
              (a.__transformDirty = !0))
            : "" != d.border &&
              (d.removeProperty("border"), (a.__renderTransformChanged = !0));
          d.setProperty(
            "color",
            "#" + J.hex(a.__textFormat.color & 16777215, 6),
            null
          );
          d.setProperty("width", e + "px", null);
          d.setProperty("height", f + "px", null);
          switch (a.__textFormat.align) {
            case 0:
              d.setProperty("text-align", "center", null);
              break;
            case 4:
              d.setProperty("text-align", "right", null);
              break;
            default:
              d.setProperty("text-align", "left", null);
          }
          a.__dirty = !1;
        } else
          null != a.__div && (b.element.removeChild(a.__div), (a.__div = null));
      null != a.__div &&
        ((c = b.__roundPixels),
        (b.__roundPixels = !0),
        b.__updateClip(a),
        b.__applyStyle(a, !0, !0, !0),
        (b.__roundPixels = c));
    } else hb.clear(a, b);
  };
  hb.__getAttributeMatch = function (a) {
    return null != a.matched(2) ? a.matched(2) : a.matched(3);
  };
  var Bb = function () {};
  l["openfl._internal.symbols.SWFSymbol"] = Bb;
  Bb.__name__ = ["openfl", "_internal", "symbols", "SWFSymbol"];
  Bb.prototype = {
    className: null,
    id: null,
    __createObject: function (a) {
      return null;
    },
    __class__: Bb,
  };
  var ud = function () {};
  l["openfl._internal.symbols.BitmapSymbol"] = ud;
  ud.__name__ = ["openfl", "_internal", "symbols", "BitmapSymbol"];
  ud.__super__ = Bb;
  ud.prototype = v(Bb.prototype, {
    alpha: null,
    path: null,
    smooth: null,
    __createObject: function (a) {
      return new Ab(
        ma.fromImage(a.library.getImage(this.path)),
        1,
        0 != this.smooth
      );
    },
    __class__: ud,
  });
  var Mj = function () {};
  l["openfl._internal.symbols.ButtonSymbol"] = Mj;
  Mj.__name__ = ["openfl", "_internal", "symbols", "ButtonSymbol"];
  Mj.__super__ = Bb;
  Mj.prototype = v(Bb.prototype, {
    downState: null,
    hitState: null,
    overState: null,
    upState: null,
    __createObject: function (a) {
      var b = null;
      wd.__initSWF = a;
      wd.__initSymbol = this;
      null != this.className &&
        ((a = I.resolveClass(this.className)),
        null != a && (b = I.createInstance(a, [])));
      null == b && (b = new wd());
      return b;
    },
    __class__: Mj,
  });
  var Nj = function () {};
  l["openfl._internal.symbols.DynamicTextSymbol"] = Nj;
  Nj.__name__ = ["openfl", "_internal", "symbols", "DynamicTextSymbol"];
  Nj.__super__ = Bb;
  Nj.prototype = v(Bb.prototype, {
    align: null,
    border: null,
    color: null,
    fontHeight: null,
    fontID: null,
    fontName: null,
    height: null,
    html: null,
    indent: null,
    input: null,
    leading: null,
    leftMargin: null,
    multiline: null,
    password: null,
    rightMargin: null,
    selectable: null,
    text: null,
    width: null,
    wordWrap: null,
    x: null,
    y: null,
    __createObject: function (a) {
      var b = new wb();
      b.__fromSymbol(a, this);
      return b;
    },
    __class__: Nj,
  });
  var Oj = function () {};
  l["openfl._internal.symbols.FontSymbol"] = Oj;
  Oj.__name__ = ["openfl", "_internal", "symbols", "FontSymbol"];
  Oj.__super__ = Bb;
  Oj.prototype = v(Bb.prototype, {
    advances: null,
    ascent: null,
    bold: null,
    codes: null,
    descent: null,
    glyphs: null,
    italic: null,
    leading: null,
    name: null,
    __class__: Oj,
  });
  var Pj = function () {};
  l["openfl._internal.symbols.ShapeSymbol"] = Pj;
  Pj.__name__ = ["openfl", "_internal", "symbols", "ShapeSymbol"];
  Pj.__super__ = Bb;
  Pj.prototype = v(Bb.prototype, {
    commands: null,
    rendered: null,
    __createObject: function (a) {
      var b = new eg(),
        c = b.get_graphics();
      if (null != this.rendered)
        return c.copyFrom(this.rendered.get_graphics()), b;
      for (var d = 0, e = this.commands; d < e.length; ) {
        var f = e[d];
        ++d;
        switch (I.enumIndex(f)) {
          case 0:
            var g = f[5],
              h = f[4],
              n = f[3];
            f = a.symbols.get(f[2]);
            f = a.library.getImage(f.path);
            null != f && c.beginBitmapFill(ma.fromImage(f), n, h, g);
            break;
          case 1:
            c.beginFill(f[2], f[3]);
            break;
          case 2:
            c.beginGradientFill(f[2], f[3], f[4], f[5], f[6], f[7], f[8], f[9]);
            break;
          case 3:
            c.curveTo(f[2], f[3], f[4], f[5]);
            break;
          case 4:
            c.endFill();
            break;
          case 5:
            g = f[9];
            h = f[8];
            n = f[7];
            var p = f[6],
              k = f[5],
              l = f[4],
              m = f[3];
            f = f[2];
            null != f ? c.lineStyle(f, m, l, k, p, n, h, g) : c.lineStyle();
            break;
          case 6:
            c.lineTo(f[2], f[3]);
            break;
          case 7:
            c.moveTo(f[2], f[3]);
        }
      }
      this.commands = null;
      this.rendered = new eg();
      this.rendered.get_graphics().copyFrom(b.get_graphics());
      return b;
    },
    __class__: Pj,
  });
  var Fg = function () {
    this.frames = [];
  };
  l["openfl._internal.symbols.SpriteSymbol"] = Fg;
  Fg.__name__ = ["openfl", "_internal", "symbols", "SpriteSymbol"];
  Fg.__super__ = Bb;
  Fg.prototype = v(Bb.prototype, {
    baseClassName: null,
    frames: null,
    __createObject: function (a) {
      Gc.__initSWF = a;
      Gc.__initSymbol = this;
      a = null;
      null != this.className && (a = I.resolveClass(this.className));
      null == a &&
        null != this.baseClassName &&
        (a = I.resolveClass(this.baseClassName));
      return null != a ? I.createInstance(a, []) : new Gc();
    },
    __class__: Fg,
  });
  var Qj = function () {};
  l["openfl._internal.symbols.StaticTextSymbol"] = Qj;
  Qj.__name__ = ["openfl", "_internal", "symbols", "StaticTextSymbol"];
  Qj.__super__ = Bb;
  Qj.prototype = v(Bb.prototype, {
    matrix: null,
    records: null,
    rendered: null,
    __createObject: function (a) {
      var b = new Hg(),
        c = b.__graphics;
      if (null != this.rendered)
        return (
          (b.text = this.rendered.text), c.copyFrom(this.rendered.__graphics), b
        );
      var d = "";
      if (null != this.records)
        for (
          var e = null,
            f = 16777215,
            g = this.matrix.tx,
            h = this.matrix.ty,
            n,
            p,
            k = 0,
            l = this.records;
          k < l.length;

        ) {
          var m = l[k];
          ++k;
          null != m.fontID && (e = a.symbols.get(m.fontID));
          null != m.offsetX && (g = this.matrix.tx + 0.05 * m.offsetX);
          null != m.offsetY && (h = this.matrix.ty + 0.05 * m.offsetY);
          null != m.color && (f = m.color);
          if (null != e) {
            n = (m.fontHeight / 1024) * 0.05;
            for (var q = 0, r = m.glyphs.length; q < r; ) {
              var t = q++;
              p = m.glyphs[t];
              d += String.fromCharCode(e.codes[p]);
              var u = 0;
              for (p = e.glyphs[p]; u < p.length; ) {
                var v = p[u];
                ++u;
                switch (I.enumIndex(v)) {
                  case 1:
                    c.beginFill(f & 16777215, ((f >> 24) & 255) / 255);
                    break;
                  case 3:
                    c.curveTo(
                      v[2] * n + g,
                      v[3] * n + h,
                      v[4] * n + g,
                      v[5] * n + h
                    );
                    break;
                  case 4:
                    c.endFill();
                    break;
                  case 5:
                    var x = v[9],
                      w = v[8],
                      y = v[7],
                      z = v[6],
                      A = v[5],
                      K = v[4],
                      C = v[3];
                    v = v[2];
                    null != v
                      ? c.lineStyle(v, C, K, A, z, y, w, x)
                      : c.lineStyle();
                    break;
                  case 6:
                    c.lineTo(v[2] * n + g, v[3] * n + h);
                    break;
                  case 7:
                    c.moveTo(v[2] * n + g, v[3] * n + h);
                }
              }
              g += 0.05 * m.advances[t];
            }
          }
        }
      b.text = d;
      this.records = null;
      this.rendered = new Hg();
      this.rendered.text = d;
      this.rendered.__graphics.copyFrom(b.__graphics);
      return b;
    },
    __class__: Qj,
  });
  var bl = function () {};
  l["openfl._internal.symbols.StaticTextRecord"] = bl;
  bl.__name__ = ["openfl", "_internal", "symbols", "StaticTextRecord"];
  bl.prototype = {
    advances: null,
    color: null,
    fontHeight: null,
    fontID: null,
    glyphs: null,
    offsetX: null,
    offsetY: null,
    __class__: bl,
  };
  var cl = function () {};
  l["openfl._internal.symbols.timeline.Frame"] = cl;
  cl.__name__ = ["openfl", "_internal", "symbols", "timeline", "Frame"];
  cl.prototype = {
    label: null,
    objects: null,
    script: null,
    scriptSource: null,
    __class__: cl,
  };
  var dl = function () {};
  l["openfl._internal.symbols.timeline.FrameObject"] = dl;
  dl.__name__ = ["openfl", "_internal", "symbols", "timeline", "FrameObject"];
  dl.prototype = {
    blendMode: null,
    cacheAsBitmap: null,
    clipDepth: null,
    colorTransform: null,
    depth: null,
    filters: null,
    id: null,
    matrix: null,
    name: null,
    symbol: null,
    type: null,
    visible: null,
    __class__: dl,
  };
  var qe = (l["openfl._internal.symbols.timeline.FrameObjectType"] = {
    __ename__: [
      "openfl",
      "_internal",
      "symbols",
      "timeline",
      "FrameObjectType",
    ],
    __constructs__: ["CREATE", "UPDATE", "DESTROY"],
  });
  qe.CREATE = ["CREATE", 0];
  qe.CREATE.toString = M;
  qe.CREATE.__enum__ = qe;
  qe.UPDATE = ["UPDATE", 1];
  qe.UPDATE.toString = M;
  qe.UPDATE.__enum__ = qe;
  qe.DESTROY = ["DESTROY", 2];
  qe.DESTROY.toString = M;
  qe.DESTROY.__enum__ = qe;
  var Va = function (a) {
    this.textField = a;
    this.height = this.width = 100;
    this.set_text("");
    this.bounds = new Z(0, 0, 0, 0);
    this.textBounds = new Z(0, 0, 0, 0);
    this.type = 0;
    this.autoSize = 2;
    this.embedFonts = !1;
    this.selectable = !0;
    this.borderColor = 0;
    this.border = !1;
    this.backgroundColor = 16777215;
    this.background = !1;
    this.gridFitType = 1;
    this.maxChars = 0;
    this.multiline = !1;
    this.scrollH = this.sharpness = 0;
    this.scrollV = 1;
    this.wordWrap = !1;
    this.lineAscents = Eb.toFloatVector(null);
    this.lineBreaks = Eb.toIntVector(null);
    this.lineDescents = Eb.toFloatVector(null);
    this.lineLeadings = Eb.toFloatVector(null);
    this.lineHeights = Eb.toFloatVector(null);
    this.lineWidths = Eb.toFloatVector(null);
    this.layoutGroups = Eb.toObjectVector(null);
    this.textFormatRanges = Eb.toObjectVector(null);
    Va.__canvas = T.get_document().createElement("canvas");
    Va.__context = Va.__canvas.getContext("2d");
  };
  l["openfl._internal.text.TextEngine"] = Va;
  Va.__name__ = ["openfl", "_internal", "text", "TextEngine"];
  Va.findFont = function (a) {
    return Kb.__fontByName.get(a);
  };
  Va.findFontVariant = function (a) {
    var b = a.font,
      c = a.bold;
    a = a.italic;
    null == b && (b = "_serif");
    var d = J.replace(J.replace(b, " Normal", ""), " Regular", "");
    return c && a && Kb.__fontByName.exists(d + " Bold Italic")
      ? Va.findFont(d + " Bold Italic")
      : c && Kb.__fontByName.exists(d + " Bold")
      ? Va.findFont(d + " Bold")
      : a && Kb.__fontByName.exists(d + " Italic")
      ? Va.findFont(d + " Italic")
      : Va.findFont(b);
  };
  Va.getFormatHeight = function (a) {
    Va.__context.font = Va.getFont(a);
    var b = Va.getFontInstance(a);
    if (null != a.__ascent) {
      var c = a.size * a.__ascent;
      b = a.size * a.__descent;
    } else
      null != b && 0 != b.unitsPerEM
        ? ((c = (b.ascender / b.unitsPerEM) * a.size),
          (b = Math.abs((b.descender / b.unitsPerEM) * a.size)))
        : ((c = a.size), (b = 0.185 * a.size));
    return c + b + a.leading;
  };
  Va.getFont = function (a) {
    var b = a.font,
      c = a.bold,
      d = a.italic;
    null == b && (b = "_serif");
    var e = J.replace(J.replace(b, " Normal", ""), " Regular", "");
    c && d && Kb.__fontByName.exists(e + " Bold Italic")
      ? ((b = e + " Bold Italic"), (d = c = !1))
      : c && Kb.__fontByName.exists(e + " Bold")
      ? ((b = e + " Bold"), (c = !1))
      : d && Kb.__fontByName.exists(e + " Italic")
      ? ((b = e + " Italic"), (d = !1))
      : (c && (-1 < b.indexOf(" Bold ") || J.endsWith(b, " Bold")) && (c = !1),
        d &&
          (-1 < b.indexOf(" Italic ") || J.endsWith(b, " Italic")) &&
          (d = !1));
    c = (d ? "italic " : "normal ") + "normal " + (c ? "bold " : "normal ");
    c += a.size + "px";
    c += "/" + (a.leading + a.size + 3) + "px ";
    switch (b) {
      case "_sans":
        a = "sans-serif";
        break;
      case "_serif":
        a = "serif";
        break;
      case "_typewriter":
        a = "monospace";
        break;
      default:
        a = "'" + new pa("^[\\s'\"]+(.*)[\\s'\"]+$", "").replace(b, "$1") + "'";
    }
    return (c += "" + a);
  };
  Va.getFontInstance = function (a) {
    return Va.findFontVariant(a);
  };
  Va.prototype = {
    antiAliasType: null,
    autoSize: null,
    background: null,
    backgroundColor: null,
    border: null,
    borderColor: null,
    bottomScrollV: null,
    bounds: null,
    embedFonts: null,
    gridFitType: null,
    height: null,
    layoutGroups: null,
    lineAscents: null,
    lineBreaks: null,
    lineDescents: null,
    lineLeadings: null,
    lineHeights: null,
    lineWidths: null,
    maxChars: null,
    maxScrollH: null,
    maxScrollV: null,
    multiline: null,
    numLines: null,
    scrollH: null,
    scrollV: null,
    selectable: null,
    sharpness: null,
    text: null,
    textBounds: null,
    textHeight: null,
    textFormatRanges: null,
    textWidth: null,
    type: null,
    width: null,
    wordWrap: null,
    textField: null,
    __hasFocus: null,
    __restrictRegexp: null,
    __useIntAdvances: null,
    getBounds: function () {
      var a = this.border ? 1 : 0;
      this.bounds.width = this.width + a;
      this.bounds.height = this.height + a;
      for (
        var b = (a = this.width), c = 0, d = this.layoutGroups;
        c < d.get_length();

      ) {
        var e = d.get(c);
        ++c;
        e.offsetX < a && (a = e.offsetX);
        e.offsetY < b && (b = e.offsetY);
      }
      a >= this.width && (a = 2);
      b >= this.height && (b = 2);
      this.textBounds.setTo(
        Math.max(a - 2, 0),
        Math.max(b - 2, 0),
        Math.min(this.textWidth + 4, this.bounds.width + 4),
        Math.min(1.185 * this.textHeight + 4, this.bounds.height + 4)
      );
    },
    getLineBreakIndex: function (a) {
      null == a && (a = 0);
      var b = O.indexOf(this.text, "<br>", a),
        c = O.indexOf(this.text, "\n", a);
      a = O.indexOf(this.text, "\r", a);
      return -1 == c && -1 == b
        ? a
        : -1 == a && -1 == b
        ? c
        : -1 == a && -1 == c
        ? b
        : -1 == c
        ? u["int"](Math.min(b, a))
        : -1 == a
        ? u["int"](Math.min(b, c))
        : -1 == b
        ? u["int"](Math.min(c, a))
        : u["int"](Math.min(Math.min(c, a), b));
    },
    getLineMeasurements: function () {
      this.lineAscents.set_length(0);
      this.lineDescents.set_length(0);
      this.lineLeadings.set_length(0);
      this.lineHeights.set_length(0);
      this.lineWidths.set_length(0);
      var a = 0,
        b = 0,
        c = null,
        d = 0,
        e = 0;
      this.textHeight = this.textWidth = 0;
      this.numLines = 1;
      for (
        var f = (this.maxScrollH = this.bottomScrollV = 0),
          g = this.layoutGroups;
        f < g.get_length();

      ) {
        var h = g.get(f);
        for (++f; h.lineIndex > this.numLines - 1; )
          this.lineAscents.push(a),
            this.lineDescents.push(b),
            this.lineLeadings.push(null != c ? c : 0),
            this.lineHeights.push(d),
            this.lineWidths.push(e),
            (b = a = 0),
            (c = null),
            (e = d = 0),
            this.numLines++,
            this.textHeight <= this.height - 2 && this.bottomScrollV++;
        a = Math.max(a, h.ascent);
        b = Math.max(b, h.descent);
        c = null == c ? h.leading : u["int"](Math.max(c, h.leading));
        d = Math.max(d, h.height);
        e = h.offsetX - 2 + h.width;
        e > this.textWidth && (this.textWidth = e);
        h = h.offsetY - 2 + h.ascent + h.descent;
        h > this.textHeight && (this.textHeight = h);
      }
      0 == this.textHeight &&
        null != this.textField &&
        1 == this.textField.get_type() &&
        ((a = this.textField.__textFormat),
        null != a.__ascent
          ? ((f = a.size * a.__ascent), (g = a.size * a.__descent))
          : ((f = a.size), (g = 0.185 * a.size)),
        (c = a.leading),
        (a = f),
        (b = g),
        (this.textHeight = f + g));
      this.lineAscents.push(a);
      this.lineDescents.push(b);
      this.lineLeadings.push(null != c ? c : 0);
      this.lineHeights.push(d);
      this.lineWidths.push(e);
      1 == this.numLines
        ? ((this.bottomScrollV = 1), 0 < c && (this.textHeight += c))
        : this.textHeight <= this.height - 2 && this.bottomScrollV++;
      if (2 != this.autoSize)
        switch (this.autoSize) {
          case 0:
          case 1:
          case 3:
            this.wordWrap || (this.width = this.textWidth + 4),
              (this.height = this.textHeight + 4),
              (this.bottomScrollV = this.numLines);
        }
      this.maxScrollH =
        this.textWidth > this.width - 4
          ? u["int"](this.textWidth - this.width + 4)
          : 0;
      this.maxScrollV = this.numLines - this.bottomScrollV + 1;
      this.scrollV > this.maxScrollV && (this.scrollV = this.maxScrollV);
      this.scrollH > this.maxScrollH && (this.scrollH = this.maxScrollH);
    },
    getLayoutGroups: function () {
      var a = this;
      this.layoutGroups.set_length(0);
      if (null != this.text && !O.equals(this.text, "")) {
        var b = -1,
          c = null,
          d = null,
          e = wb.__defaultTextFormat.clone(),
          f = 0,
          g = 0,
          h = 0,
          n = 0,
          p = null,
          k = null,
          l = 0,
          m = 0,
          q = 0,
          r = -2,
          t = O.indexOf(this.text, " "),
          u = this.getLineBreakIndex(),
          v = 2,
          x = 2,
          w = 0,
          y = 0,
          z = null,
          A = function (b, c, d) {
            var e = [];
            if (null == a.__useIntAdvances) {
              var f = new pa("Trident/7.0", "");
              a.__useIntAdvances = f.match(T.get_navigator().userAgent);
            }
            if (a.__useIntAdvances) {
              f = 0;
              for (var g, h = c; h < d; )
                (g = h++),
                  (g = Va.__context.measureText(
                    O.substring(b, c, g + 1)
                  ).width),
                  e.push(g - f),
                  (f = g);
            } else
              for (; c < d; )
                (f = c++),
                  f < O.get_length(b) - 1
                    ? ((h = Va.__context.measureText(O.charAt(b, f + 1)).width),
                      (f =
                        Va.__context.measureText(O.substr(b, f, 2)).width - h))
                    : (f = Va.__context.measureText(O.charAt(b, f)).width),
                  e.push(f);
            return e;
          },
          K = function (a) {
            for (var b = 0, c = 0; c < a.length; ) {
              var d = a[c];
              ++c;
              b += d;
            }
            return b;
          },
          C = function (b, d) {
            null == p || p.startIndex != p.endIndex
              ? ((p = new Rj(c.format, b, d)), a.layoutGroups.push(p))
              : ((p.format = c.format), (p.startIndex = b), (p.endIndex = d));
          },
          B = function () {
            var p = a.textFormatRanges.get_length() - 1;
            b < p &&
              ((b += 1),
              (c = a.textFormatRanges.get(b)),
              e.__merge(c.format),
              (Va.__context.font = Va.getFont(e)),
              (d = Va.getFontInstance(e)),
              null != e.__ascent
                ? ((g = e.size * e.__ascent), (n = e.size * e.__descent))
                : null != d && 0 != d.unitsPerEM
                ? ((g = (d.ascender / d.unitsPerEM) * e.size),
                  (n = Math.abs((d.descender / d.unitsPerEM) * e.size)))
                : ((g = e.size), (n = 0.185 * e.size)),
              (f = e.leading),
              (m = g + n + f));
            m > q && (q = m);
            g > h && (h = g);
          },
          H = function () {
            g > h && (h = g);
            m > q && (q = m);
            for (var b = a.layoutGroups.get_length(); -1 < --b; ) {
              var c = a.layoutGroups.get(b);
              if (c.lineIndex < y) break;
              c.lineIndex > y || ((c.ascent = h), (c.height = q));
            }
            x += q;
            q = h = 0;
            y += 1;
            v = 2;
          },
          D = function (b) {
            for (
              var c = O.substring(a.text, w, b),
                d = Va.__context.measureText(c).width;
              v + d > a.width - 2;

            ) {
              for (c = 1; w + c < b + 1; ) {
                d = O.substr(a.text, w, c);
                d = Va.__context.measureText(d).width;
                if (v + d > a.width - 2) {
                  --c;
                  break;
                }
                ++c;
              }
              0 == c && d > a.width - 4 && (c = O.get_length(a.text));
              if (0 == c) {
                v = 2;
                x += p.height;
                y += 1;
                break;
              } else
                C(w, w + c),
                  (p.positions = A(a.text, w, w + c)),
                  (p.offsetX = v),
                  (p.ascent = g),
                  (p.descent = n),
                  (p.leading = f),
                  (p.lineIndex = y),
                  (p.offsetY = x),
                  (p.width = K(p.positions)),
                  (p.height = m),
                  (p = null),
                  H(),
                  (w += c),
                  (k = A(a.text, w, b)),
                  (d = l = K(k));
            }
          };
        B();
        z = c.format;
        for (var F, I = O.get_length(this.text) + 1; w < I; )
          if (-1 < u && (-1 == t || u < t) && c.end >= u)
            w <= u
              ? (this.wordWrap && r <= w && 4 <= this.width && D(u),
                C(w, u),
                (p.positions = A(this.text, w, u)),
                (p.offsetX = v),
                (p.ascent = g),
                (p.descent = n),
                (p.leading = f),
                (p.lineIndex = y),
                (p.offsetY = x),
                (p.width = K(p.positions)),
                (p.height = m),
                (p = null))
              : null != p &&
                p.startIndex != p.endIndex &&
                (p.endIndex == t &&
                  (p.width -= p.getAdvance(p.positions.length - 1)),
                (p = null)),
              c.end == u && (B(), (z = c.format)),
              u >= O.get_length(this.text) - 1 && (x -= q),
              H(),
              (w = u + 1),
              (u = this.getLineBreakIndex(w));
          else if (c.end >= t && -1 < t && w < c.end)
            for (
              null != p && p.startIndex != p.endIndex && (p = null), F = !1;
              w != c.end;

            ) {
              var G = -1;
              -1 == t ? (G = u) : ((G = t + 1), -1 < u && u < G && (G = u));
              if (-1 == G || G > c.end) G = c.end;
              k = A(this.text, w, G);
              l = K(k);
              if (2 == z.align) {
                if (0 < k.length && w == r) {
                  w += 1;
                  var J = k.shift();
                  l -= J;
                  v += J;
                }
                0 < k.length && G == t + 1 && (--G, (J = k.pop()), (l -= J));
              }
              this.wordWrap &&
                v + l > this.width - 2 &&
                ((F = !0),
                0 < k.length &&
                  G == t + 1 &&
                  v + l - k[k.length - 1] <= this.width - 2 &&
                  (F = !1));
              if (F) {
                2 != z.align &&
                  (null != p || 0 < this.layoutGroups.get_length()) &&
                  ((F = p),
                  null == F &&
                    (F = this.layoutGroups.get(
                      this.layoutGroups.get_length() - 1
                    )),
                  (F.width -= F.getAdvance(F.positions.length - 1)),
                  F.endIndex--);
                F = this.layoutGroups.get_length() - 1;
                for (J = 0; ; ) {
                  p = this.layoutGroups.get(F);
                  if (0 < F && p.startIndex > r) ++J;
                  else break;
                  --F;
                }
                w == r + 1 && H();
                v = 2;
                if (0 < J) {
                  F = this.layoutGroups.get(
                    this.layoutGroups.get_length() - J
                  ).offsetX;
                  J = this.layoutGroups.get_length() - J;
                  for (var L = this.layoutGroups.get_length(); J < L; ) {
                    var N = J++;
                    p = this.layoutGroups.get(N);
                    p.offsetX -= F;
                    p.offsetY = x;
                    p.lineIndex = y;
                    v += p.width;
                  }
                }
                4 <= this.width && D(G);
                C(w, G);
                p.positions = k;
                p.offsetX = v;
                p.ascent = g;
                p.descent = n;
                p.leading = f;
                p.lineIndex = y;
                p.offsetY = x;
                p.width = l;
                p.height = m;
                v += l;
                w = G;
                F = !1;
              } else
                null != p && w == t
                  ? 2 != z.align &&
                    ((p.endIndex = t),
                    (p.positions = p.positions.concat(k)),
                    (p.width += l))
                  : null == p || 2 == z.align
                  ? (C(w, G),
                    (p.positions = k),
                    (p.offsetX = v),
                    (p.ascent = g),
                    (p.descent = n),
                    (p.leading = f),
                    (p.lineIndex = y),
                    (p.offsetY = x),
                    (p.width = l),
                    (p.height = m))
                  : ((p.endIndex = G),
                    (p.positions = p.positions.concat(k)),
                    (p.width += l),
                    u == G && ++G),
                  (v += l),
                  (w = G);
              G = O.indexOf(this.text, " ", w);
              c.end <= r
                ? ((p = null), (w = c.end), B())
                : (u == r &&
                    ((p.endIndex = u),
                    0 > u - p.startIndex - p.positions.length &&
                      p.positions.push(0),
                    (w = u + 1)),
                  (r = t),
                  (t = G));
              -1 < u && u <= w && (t > u || -1 == t)
                ? (G = !0)
                : ((G = O.get_length(this.text)), (G = w > G));
              if (G || t > c.end) break;
            }
          else {
            if (w > c.end) break;
            else
              w >= c.end
                ? ((G = O.get_length(this.text)), (G = w == G))
                : (G = !0),
                G &&
                  (this.wordWrap && 4 <= this.width && D(c.end),
                  (k = A(this.text, w, c.end)),
                  (l = K(k)),
                  C(w, c.end),
                  (p.positions = A(this.text, w, c.end)),
                  (p.offsetX = v),
                  (p.ascent = g),
                  (p.descent = n),
                  (p.leading = f),
                  (p.lineIndex = y),
                  (p.offsetY = x),
                  (p.width = K(p.positions)),
                  (p.height = m),
                  (v += l),
                  (w = c.end));
            B();
            if (w == c.end) {
              H();
              w += 1;
              break;
            }
          }
      }
    },
    restrictText: function (a) {
      if (null == a) return a;
      null != this.__restrictRegexp &&
        (a = this.__restrictRegexp.split(a).join(""));
      return a;
    },
    setTextAlignment: function () {
      for (
        var a = -1,
          b = 0,
          c = this.width - 4,
          d,
          e,
          f = !1,
          g = 0,
          h = this.layoutGroups.get_length();
        g < h;

      ) {
        var n = g++;
        d = this.layoutGroups.get(n);
        if (d.lineIndex != a)
          switch (((a = d.lineIndex), d.format.align)) {
            case 0:
              b =
                this.lineWidths.get(a) < c
                  ? Math.round((c - this.lineWidths.get(a)) / 2)
                  : 0;
              break;
            case 2:
              if (this.lineWidths.get(a) < c) {
                e = 1;
                b = n + 1;
                for (var p = this.layoutGroups.get_length(); b < p; ) {
                  var k = b++;
                  if (this.layoutGroups.get(k).lineIndex == a)
                    (0 != k &&
                      32 !=
                        O.charCodeAt(
                          this.text,
                          this.layoutGroups.get(k).startIndex - 1
                        )) ||
                      ++e;
                  else break;
                }
                if (
                  1 < e &&
                  ((d = this.layoutGroups.get(n + e - 1)),
                  (b = O.charCodeAt(this.text, d.endIndex)),
                  d.endIndex < O.get_length(this.text) && 10 != b && 13 != b)
                )
                  for (
                    b = (c - this.lineWidths.get(a)) / (e - 1), f = !0, p = 1;
                    (this.layoutGroups.get(n + p).offsetX += b * p), ++p < e;

                  );
              }
              b = 0;
              break;
            case 4:
              b =
                this.lineWidths.get(a) < c
                  ? Math.round(c - this.lineWidths.get(a))
                  : 0;
              break;
            default:
              b = 0;
          }
        0 < b && (d.offsetX += b);
      }
      f && this.getLineMeasurements();
    },
    update: function () {
      null == this.text || 0 == this.textFormatRanges.get_length()
        ? (this.lineAscents.set_length(0),
          this.lineBreaks.set_length(0),
          this.lineDescents.set_length(0),
          this.lineLeadings.set_length(0),
          this.lineHeights.set_length(0),
          this.lineWidths.set_length(0),
          this.layoutGroups.set_length(0),
          (this.textHeight = this.textWidth = 0),
          (this.numLines = 1),
          (this.maxScrollH = 0),
          (this.bottomScrollV = this.maxScrollV = 1))
        : (this.getLayoutGroups(),
          this.getLineMeasurements(),
          this.setTextAlignment());
      this.getBounds();
    },
    set_text: function (a) {
      return (this.text = a);
    },
    __class__: Va,
    __properties__: { set_text: "set_text" },
  };
  var nf = function (a, b, c) {
    this.format = a;
    this.start = b;
    this.end = c;
  };
  l["openfl._internal.text.TextFormatRange"] = nf;
  nf.__name__ = ["openfl", "_internal", "text", "TextFormatRange"];
  nf.prototype = { end: null, format: null, start: null, __class__: nf };
  var Rj = function (a, b, c) {
    this.format = a;
    this.startIndex = b;
    this.endIndex = c;
  };
  l["openfl._internal.text.TextLayoutGroup"] = Rj;
  Rj.__name__ = ["openfl", "_internal", "text", "TextLayoutGroup"];
  Rj.prototype = {
    ascent: null,
    descent: null,
    endIndex: null,
    format: null,
    height: null,
    leading: null,
    lineIndex: null,
    offsetX: null,
    offsetY: null,
    positions: null,
    startIndex: null,
    width: null,
    getAdvance: function (a) {
      return this.positions[a];
    },
    __class__: Rj,
  };
  var fg = function () {
    this.rollOutStack = [];
  };
  l["openfl._internal.utils.TouchData"] = fg;
  fg.__name__ = ["openfl", "_internal", "utils", "TouchData"];
  fg.prototype = {
    rollOutStack: null,
    touch: null,
    touchDownTarget: null,
    touchOverTarget: null,
    reset: function () {
      this.touchOverTarget = this.touchDownTarget = this.touch = null;
      this.rollOutStack.splice(0, this.rollOutStack.length);
    },
    __class__: fg,
  };
  var Sg = function () {
    nc.call(this);
    null == oc.application && (oc.application = this);
    null == oc.current && (oc.current = new Gc());
    oc.current.__loaderInfo = of.create(null);
    oc.current.__loaderInfo.content = oc.current;
  };
  l["openfl.display.Application"] = Sg;
  Sg.__name__ = ["openfl", "display", "Application"];
  Sg.__super__ = nc;
  Sg.prototype = v(nc.prototype, {
    createWindow: function (a) {
      var b = new mg(this, a);
      this.__windows.push(b);
      this.__windowByID.set(b.id, b);
      var c = m(this, this.__onWindowClose);
      b.onClose.add(
        function () {
          c(b);
        },
        !1,
        -1e4
      );
      null == this.__window &&
        ((this.__window = b),
        b.onActivate.add(m(this, this.onWindowActivate)),
        b.onRenderContextLost.add(m(this, this.onRenderContextLost)),
        b.onRenderContextRestored.add(m(this, this.onRenderContextRestored)),
        b.onDeactivate.add(m(this, this.onWindowDeactivate)),
        b.onDropFile.add(m(this, this.onWindowDropFile)),
        b.onEnter.add(m(this, this.onWindowEnter)),
        b.onExpose.add(m(this, this.onWindowExpose)),
        b.onFocusIn.add(m(this, this.onWindowFocusIn)),
        b.onFocusOut.add(m(this, this.onWindowFocusOut)),
        b.onFullscreen.add(m(this, this.onWindowFullscreen)),
        b.onKeyDown.add(m(this, this.onKeyDown)),
        b.onKeyUp.add(m(this, this.onKeyUp)),
        b.onLeave.add(m(this, this.onWindowLeave)),
        b.onMinimize.add(m(this, this.onWindowMinimize)),
        b.onMouseDown.add(m(this, this.onMouseDown)),
        b.onMouseMove.add(m(this, this.onMouseMove)),
        b.onMouseMoveRelative.add(m(this, this.onMouseMoveRelative)),
        b.onMouseUp.add(m(this, this.onMouseUp)),
        b.onMouseWheel.add(m(this, this.onMouseWheel)),
        b.onMove.add(m(this, this.onWindowMove)),
        b.onRender.add(m(this, this.render)),
        b.onResize.add(m(this, this.onWindowResize)),
        b.onRestore.add(m(this, this.onWindowRestore)),
        b.onTextEdit.add(m(this, this.onTextEdit)),
        b.onTextInput.add(m(this, this.onTextInput)),
        this.onWindowCreate());
      this.onCreateWindow.dispatch(b);
      return b;
    },
    __class__: Sg,
  });
  var Ab = function (a, b, c) {
    null == c && (c = !1);
    Y.call(this);
    this.__bitmapData = a;
    this.pixelSnapping = b;
    this.smoothing = c;
    null == b && (this.pixelSnapping = 1);
  };
  l["openfl.display.Bitmap"] = Ab;
  Ab.__name__ = ["openfl", "display", "Bitmap"];
  Ab.__super__ = Y;
  Ab.prototype = v(Y.prototype, {
    pixelSnapping: null,
    smoothing: null,
    __image: null,
    __bitmapData: null,
    __imageVersion: null,
    __enterFrame: function (a) {
      null != this.__bitmapData &&
        null != this.__bitmapData.image &&
        this.__bitmapData.image.version != this.__imageVersion &&
        this.__setRenderDirty();
    },
    __getBounds: function (a, b) {
      if (null != this.__bitmapData) {
        var c = Z.__pool.get();
        c.setTo(0, 0, this.__bitmapData.width, this.__bitmapData.height);
        c.__transform(c, b);
        a.__expand(c.x, c.y, c.width, c.height);
        Z.__pool.release(c);
      }
    },
    __hitTest: function (a, b, c, d, e, f) {
      if (
        !f.get_visible() ||
        this.__isMask ||
        null == this.__bitmapData ||
        (null != this.get_mask() && !this.get_mask().__hitTestMask(a, b))
      )
        return !1;
      this.__getRenderTransform();
      c = this.__renderTransform.__transformInverseX(a, b);
      a = this.__renderTransform.__transformInverseY(a, b);
      if (
        0 < c &&
        0 < a &&
        c <= this.__bitmapData.width &&
        a <= this.__bitmapData.height
      ) {
        if (null != this.__scrollRect && !this.__scrollRect.contains(c, a))
          return !1;
        null == d || e || d.push(f);
        return !0;
      }
      return !1;
    },
    __hitTestMask: function (a, b) {
      if (null == this.__bitmapData) return !1;
      this.__getRenderTransform();
      var c = this.__renderTransform.__transformInverseX(a, b);
      a = this.__renderTransform.__transformInverseY(a, b);
      return 0 < c &&
        0 < a &&
        c <= this.__bitmapData.width &&
        a <= this.__bitmapData.height
        ? !0
        : !1;
    },
    __renderCairo: function (a) {},
    __renderCairoMask: function (a) {
      a.cairo.rectangle(0, 0, this.get_width(), this.get_height());
    },
    __renderCanvas: function (a) {
      this.__updateCacheBitmap(a, !1);
      null != this.__bitmapData &&
        null != this.__bitmapData.image &&
        (this.__imageVersion = this.__bitmapData.image.version);
      null == this.__cacheBitmap || this.__isCacheBitmapRender
        ? (Zg.render(this, a), If.render(this, a))
        : If.render(this.__cacheBitmap, a);
      this.__renderEvent(a);
    },
    __renderCanvasMask: function (a) {
      a.context.rect(0, 0, this.get_width(), this.get_height());
    },
    __renderDOM: function (a) {
      this.__updateCacheBitmap(a, !1);
      null == this.__cacheBitmap || this.__isCacheBitmapRender
        ? (og.render(this, a), zd.render(this, a))
        : (this.__renderDOMClear(a),
          (this.__cacheBitmap.stage = this.stage),
          zd.render(this.__cacheBitmap, a));
      this.__renderEvent(a);
    },
    __renderDOMClear: function (a) {
      zd.clear(this, a);
    },
    __renderGL: function (a) {
      this.__updateCacheBitmap(a, !1);
      null != this.__bitmapData &&
        null != this.__bitmapData.image &&
        (this.__imageVersion = this.__bitmapData.image.version);
      null == this.__cacheBitmap || this.__isCacheBitmapRender
        ? ($g.render(this, a), Ad.render(this, a))
        : Ad.render(this.__cacheBitmap, a);
      this.__renderEvent(a);
    },
    __renderGLMask: function (a) {
      Ad.renderMask(this, a);
    },
    __updateCacheBitmap: function (a, b) {
      return null == this.__bitmapData ||
        (null == this.__filters &&
          "opengl" == a.__type &&
          null == this.__cacheBitmap)
        ? !1
        : Y.prototype.__updateCacheBitmap.call(
            this,
            a,
            null != this.__bitmapData.image &&
              this.__bitmapData.image.version != this.__imageVersion
          );
    },
    get_bitmapData: function () {
      return this.__bitmapData;
    },
    set_bitmapData: function (a) {
      this.__bitmapData = a;
      this.smoothing = !1;
      this.__setRenderDirty();
      this.__imageVersion = -1;
      return this.__bitmapData;
    },
    get_height: function () {
      return null != this.__bitmapData
        ? this.__bitmapData.height * Math.abs(this.get_scaleY())
        : 0;
    },
    set_height: function (a) {
      return null != this.__bitmapData
        ? (a != this.__bitmapData.height &&
            (this.__setRenderDirty(),
            this.set_scaleY(a / this.__bitmapData.height)),
          a)
        : 0;
    },
    get_width: function () {
      return null != this.__bitmapData
        ? this.__bitmapData.width * Math.abs(this.__scaleX)
        : 0;
    },
    set_width: function (a) {
      return null != this.__bitmapData
        ? (a != this.__bitmapData.width &&
            (this.__setRenderDirty(),
            this.set_scaleX(a / this.__bitmapData.width)),
          a)
        : 0;
    },
    __class__: Ab,
    __properties__: v(Y.prototype.__properties__, {
      set_bitmapData: "set_bitmapData",
      get_bitmapData: "get_bitmapData",
    }),
  });
  var Jc = function () {
    ea.call(this);
    this.__allowSmoothing = !0;
    this.__tempColorTransform = new Ka();
    this.__worldAlpha = 1;
  };
  l["openfl.display.DisplayObjectRenderer"] = Jc;
  Jc.__name__ = ["openfl", "display", "DisplayObjectRenderer"];
  Jc.__super__ = ea;
  Jc.prototype = v(ea.prototype, {
    __allowSmoothing: null,
    __blendMode: null,
    __cleared: null,
    __context: null,
    __overrideBlendMode: null,
    __roundPixels: null,
    __stage: null,
    __tempColorTransform: null,
    __type: null,
    __worldAlpha: null,
    __worldColorTransform: null,
    __worldTransform: null,
    __clear: function () {},
    __popMaskObject: function (a, b) {},
    __pushMaskObject: function (a, b) {},
    __render: function (a) {},
    __resize: function (a, b) {},
    __setBlendMode: function (a) {},
    __class__: Jc,
  });
  var Sj = function (a) {
    Jc.call(this);
  };
  l["openfl.display.CairoRenderer"] = Sj;
  Sj.__name__ = ["openfl", "display", "CairoRenderer"];
  Sj.__super__ = Jc;
  Sj.prototype = v(Jc.prototype, {
    cairo: null,
    __matrix: null,
    __matrix3: null,
    applyMatrix: function (a, b) {
      null == b && (b = this.cairo);
      this.__matrix.copyFrom(a);
      this.cairo == b &&
        null != this.__worldTransform &&
        this.__matrix.concat(this.__worldTransform);
      this.__matrix3.a = this.__matrix.a;
      this.__matrix3.b = this.__matrix.b;
      this.__matrix3.c = this.__matrix.c;
      this.__matrix3.d = this.__matrix.d;
      this.__roundPixels
        ? ((this.__matrix3.tx = Math.round(this.__matrix.tx)),
          (this.__matrix3.ty = Math.round(this.__matrix.ty)))
        : ((this.__matrix3.tx = this.__matrix.tx),
          (this.__matrix3.ty = this.__matrix.ty));
      b.set_matrix(this.__matrix3);
    },
    __clear: function () {
      if (
        null != this.cairo &&
        (this.cairo.identityMatrix(),
        null != this.__stage && this.__stage.__clearBeforeRender)
      ) {
        var a = this.__blendMode;
        this.__setBlendMode(10);
        this.cairo.setSourceRGB(
          this.__stage.__colorSplit[0],
          this.__stage.__colorSplit[1],
          this.__stage.__colorSplit[2]
        );
        this.cairo.paint();
        this.__setBlendMode(a);
      }
    },
    __popMask: function () {
      this.cairo.restore();
    },
    __popMaskObject: function (a, b) {
      null == b && (b = !0);
      a.__isCacheBitmapRender || null == a.__mask || this.__popMask();
      b && null != a.__scrollRect && this.__popMaskRect();
    },
    __popMaskRect: function () {
      this.cairo.restore();
    },
    __pushMask: function (a) {
      this.cairo.save();
      this.applyMatrix(a.__renderTransform, this.cairo);
      this.cairo.newPath();
      a.__renderCairoMask(this);
      this.cairo.clip();
    },
    __pushMaskObject: function (a, b) {
      null == b && (b = !0);
      b &&
        null != a.__scrollRect &&
        this.__pushMaskRect(a.__scrollRect, a.__renderTransform);
      a.__isCacheBitmapRender || null == a.__mask || this.__pushMask(a.__mask);
    },
    __pushMaskRect: function (a, b) {
      this.cairo.save();
      this.applyMatrix(b, this.cairo);
      this.cairo.newPath();
      this.cairo.rectangle(a.x, a.y, a.width, a.height);
      this.cairo.clip();
    },
    __render: function (a) {
      null != this.cairo && a.__renderCairo(this);
    },
    __setBlendMode: function (a) {
      null != this.__overrideBlendMode && (a = this.__overrideBlendMode);
      if (this.__blendMode != a)
        switch (((this.__blendMode = a), a)) {
          case 0:
            this.cairo.setOperator(12);
            break;
          case 2:
            this.cairo.setOperator(17);
            break;
          case 3:
            this.cairo.setOperator(23);
            break;
          case 5:
            this.cairo.setOperator(21);
            break;
          case 7:
            this.cairo.setOperator(2);
            break;
          case 8:
            this.cairo.setOperator(18);
            break;
          case 9:
            this.cairo.setOperator(14);
            break;
          case 11:
            this.cairo.setOperator(16);
            break;
          case 12:
            this.cairo.setOperator(15);
            break;
          default:
            this.cairo.setOperator(2);
        }
    },
    __class__: Sj,
  });
  var Ce = function (a) {
    this.pixelRatio = 1;
    Jc.call(this);
    this.context = a;
    this.__tempMatrix = new ia();
    this.__type = "canvas";
  };
  l["openfl.display.CanvasRenderer"] = Ce;
  Ce.__name__ = ["openfl", "display", "CanvasRenderer"];
  Ce.__super__ = Jc;
  Ce.prototype = v(Jc.prototype, {
    context: null,
    pixelRatio: null,
    __isDOM: null,
    __tempMatrix: null,
    applySmoothing: function (a, b) {
      a.imageSmoothingEnabled = b;
    },
    setTransform: function (a, b) {
      null == b
        ? (b = this.context)
        : this.context == b &&
          null != this.__worldTransform &&
          (this.__tempMatrix.copyFrom(a),
          this.__tempMatrix.concat(this.__worldTransform),
          (a = this.__tempMatrix));
      this.__roundPixels
        ? b.setTransform(a.a, a.b, a.c, a.d, u["int"](a.tx), u["int"](a.ty))
        : b.setTransform(a.a, a.b, a.c, a.d, a.tx, a.ty);
    },
    __clear: function () {
      if (null != this.__stage) {
        var a = this.__blendMode;
        this.__blendMode = null;
        this.__setBlendMode(10);
        this.context.setTransform(1, 0, 0, 1, 0, 0);
        this.context.globalAlpha = 1;
        !this.__stage.__transparent && this.__stage.__clearBeforeRender
          ? ((this.context.fillStyle = this.__stage.__colorString),
            this.context.fillRect(
              0,
              0,
              this.__stage.stageWidth * this.__stage.window.get_scale(),
              this.__stage.stageHeight * this.__stage.window.get_scale()
            ))
          : this.__stage.__transparent &&
            this.__stage.__clearBeforeRender &&
            this.context.clearRect(
              0,
              0,
              this.__stage.stageWidth * this.__stage.window.get_scale(),
              this.__stage.stageHeight * this.__stage.window.get_scale()
            );
        this.__setBlendMode(a);
      }
    },
    __popMask: function () {
      this.context.restore();
    },
    __popMaskObject: function (a, b) {
      null == b && (b = !0);
      a.__isCacheBitmapRender || null == a.__mask || this.__popMask();
      b && null != a.__scrollRect && this.__popMaskRect();
    },
    __popMaskRect: function () {
      this.context.restore();
    },
    __pushMask: function (a) {
      this.context.save();
      this.setTransform(a.__renderTransform, this.context);
      this.context.beginPath();
      a.__renderCanvasMask(this);
      this.context.closePath();
      this.context.clip();
    },
    __pushMaskObject: function (a, b) {
      null == b && (b = !0);
      b &&
        null != a.__scrollRect &&
        this.__pushMaskRect(a.__scrollRect, a.__renderTransform);
      a.__isCacheBitmapRender || null == a.__mask || this.__pushMask(a.__mask);
    },
    __pushMaskRect: function (a, b) {
      this.context.save();
      this.setTransform(b, this.context);
      this.context.beginPath();
      this.context.rect(a.x, a.y, a.width, a.height);
      this.context.clip();
    },
    __render: function (a) {
      a.__renderCanvas(this);
    },
    __setBlendMode: function (a) {
      null != this.__overrideBlendMode && (a = this.__overrideBlendMode);
      if (this.__blendMode != a)
        switch (((this.__blendMode = a), a)) {
          case 0:
            this.context.globalCompositeOperation = "lighter";
            break;
          case 1:
            this.context.globalCompositeOperation = "destination-in";
            break;
          case 2:
            this.context.globalCompositeOperation = "darken";
            break;
          case 3:
            this.context.globalCompositeOperation = "difference";
            break;
          case 4:
            this.context.globalCompositeOperation = "destination-out";
            break;
          case 5:
            this.context.globalCompositeOperation = "hard-light";
            break;
          case 7:
            this.context.globalCompositeOperation = "source-over";
            break;
          case 8:
            this.context.globalCompositeOperation = "lighten";
            break;
          case 9:
            this.context.globalCompositeOperation = "multiply";
            break;
          case 11:
            this.context.globalCompositeOperation = "overlay";
            break;
          case 12:
            this.context.globalCompositeOperation = "screen";
            break;
          default:
            this.context.globalCompositeOperation = "source-over";
        }
    },
    __class__: Ce,
  });
  var al = {};
  l["openfl.display._CapsStyle.CapsStyle_Impl_"] = al;
  al.__name__ = ["openfl", "display", "_CapsStyle", "CapsStyle_Impl_"];
  al.toString = function (a) {
    switch (a) {
      case 0:
        return "none";
      case 1:
        return "round";
      case 2:
        return "square";
      default:
        return null;
    }
  };
  var Ig = function (a) {
    this.pixelRatio = 1;
    Jc.call(this);
    this.element = a;
    Y.__supportDOM = !0;
    a = window.getComputedStyle(document.documentElement, "");
    a = (Array.prototype.slice
      .call(a)
      .join("")
      .match(/-(moz|webkit|ms)-/) ||
      ("" === a.OLink && ["", "o"]))[1];
    "WebKit|Moz|MS|O".match(new RegExp("(" + a + ")", "i"));
    a[0].toUpperCase();
    a.substr(1);
    this.__vendorPrefix = a;
    this.__transformProperty =
      "webkit" == a ? "-webkit-transform" : "transform";
    this.__transformOriginProperty =
      "webkit" == a ? "-webkit-transform-origin" : "transform-origin";
    this.__clipRects = [];
    this.__z = this.__numClipRects = 0;
    this.__type = "dom";
    this.__canvasRenderer = new Ce(null);
    this.__canvasRenderer.__isDOM = !0;
  };
  l["openfl.display.DOMRenderer"] = Ig;
  Ig.__name__ = ["openfl", "display", "DOMRenderer"];
  Ig.__super__ = Jc;
  Ig.prototype = v(Jc.prototype, {
    element: null,
    pixelRatio: null,
    __canvasRenderer: null,
    __clipRects: null,
    __currentClipRect: null,
    __numClipRects: null,
    __transformOriginProperty: null,
    __transformProperty: null,
    __vendorPrefix: null,
    __z: null,
    __applyStyle: function (a, b, c, d) {
      var e = a.__style;
      b &&
        a.__renderTransformChanged &&
        e.setProperty(
          this.__transformProperty,
          a.__renderTransform.to3DString(this.__roundPixels),
          null
        );
      a.__worldZ != ++this.__z &&
        ((a.__worldZ = this.__z),
        e.setProperty(
          "z-index",
          null == a.__worldZ ? "null" : "" + a.__worldZ,
          null
        ));
      c &&
        a.__worldAlphaChanged &&
        (1 > a.__worldAlpha
          ? e.setProperty(
              "opacity",
              null == a.__worldAlpha ? "null" : "" + a.__worldAlpha,
              null
            )
          : e.removeProperty("opacity"));
      d &&
        a.__worldClipChanged &&
        (null == a.__worldClip
          ? e.removeProperty("clip")
          : ((a = a.__worldClip),
            e.setProperty(
              "clip",
              "rect(" +
                a.y +
                "px, " +
                a.get_right() +
                "px, " +
                a.get_bottom() +
                "px, " +
                a.x +
                "px)",
              null
            )));
    },
    __initializeElement: function (a, b) {
      var c = (a.__style = b.style);
      c.setProperty("position", "absolute", null);
      c.setProperty("top", "0", null);
      c.setProperty("left", "0", null);
      c.setProperty(this.__transformOriginProperty, "0 0 0", null);
      this.element.appendChild(b);
      a.__worldAlphaChanged = !0;
      a.__renderTransformChanged = !0;
      a.__worldVisibleChanged = !0;
      a.__worldClipChanged = !0;
      a.__worldClip = null;
      a.__worldZ = -1;
    },
    __popMask: function () {
      this.__popMaskRect();
    },
    __popMaskObject: function (a, b) {
      null == b && (b = !0);
      null != a.__mask && this.__popMask();
      b && null != a.__scrollRect && this.__popMaskRect();
    },
    __popMaskRect: function () {
      0 < this.__numClipRects &&
        (this.__numClipRects--,
        (this.__currentClipRect =
          0 < this.__numClipRects
            ? this.__clipRects[this.__numClipRects - 1]
            : null));
    },
    __pushMask: function (a) {
      this.__pushMaskRect(a.getBounds(a), a.__renderTransform);
    },
    __pushMaskObject: function (a, b) {
      null == b && (b = !0);
      b &&
        null != a.__scrollRect &&
        this.__pushMaskRect(a.__scrollRect, a.__renderTransform);
      null != a.__mask && this.__pushMask(a.__mask);
    },
    __pushMaskRect: function (a, b) {
      this.__numClipRects == this.__clipRects.length &&
        (this.__clipRects[this.__numClipRects] = new Z());
      var c = this.__clipRects[this.__numClipRects];
      a.__transform(c, b);
      0 < this.__numClipRects &&
        ((a = this.__clipRects[this.__numClipRects - 1]),
        c.__contract(a.x, a.y, a.width, a.height));
      0 > c.height && (c.height = 0);
      0 > c.width && (c.width = 0);
      this.__currentClipRect = c;
      this.__numClipRects++;
    },
    __render: function (a) {
      this.element.style.background = this.__stage.__transparent
        ? "none"
        : this.__stage.__colorString;
      this.__z = 1;
      a.__renderDOM(this);
    },
    __setBlendMode: function (a) {
      null != this.__overrideBlendMode && (a = this.__overrideBlendMode);
      this.__blendMode != a && (this.__blendMode = a);
    },
    __updateClip: function (a) {
      if (null == this.__currentClipRect)
        (a.__worldClipChanged = null != a.__worldClip), (a.__worldClip = null);
      else {
        null == a.__worldClip && (a.__worldClip = new Z());
        var b = Z.__pool.get(),
          c = ia.__pool.get();
        c.copyFrom(a.__renderTransform);
        c.invert();
        this.__currentClipRect.__transform(b, c);
        b.equals(a.__worldClip)
          ? (a.__worldClipChanged = !1)
          : (a.__worldClip.copyFrom(b), (a.__worldClipChanged = !0));
        Z.__pool.release(b);
        ia.__pool.release(c);
      }
    },
    __class__: Ig,
  });
  var Ph = function (a) {
    null == this.__glFragmentSource &&
      (this.__glFragmentSource =
        "varying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\t\t\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\t\t\n\t\tvoid main(void) {\n\t\t\t\n\t\t\tvec4 color = texture2D (openfl_Texture, openfl_TextureCoordv);\n\t\t\n\t\tif (color.a == 0.0) {\n\t\t\t\n\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\t\t\t\n\t\t} else if (openfl_HasColorTransform) {\n\t\t\t\n\t\t\tcolor = vec4 (color.rgb / color.a, color.a);\n\t\t\t\n\t\t\tmat4 colorMultiplier = mat4 (0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = 1.0; // openfl_ColorMultiplierv.w;\n\t\t\t\n\t\t\tcolor = clamp (openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\t\t\t\n\t\t\tif (color.a > 0.0) {\n\t\t\t\t\n\t\t\t\tgl_FragColor = vec4 (color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t} else {\n\t\t\t\n\t\t\tgl_FragColor = color * openfl_Alphav;\n\t\t\t\n\t\t}\n\t\t\t\n\t\t}");
    null == this.__glVertexSource &&
      (this.__glVertexSource =
        "attribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\t\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\t\t\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\t\n\t\tvoid main(void) {\n\t\t\t\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\t\t\n\t\tif (openfl_HasColorTransform) {\n\t\t\t\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\t\t\t\n\t\t}\n\t\t\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\t\n\t\t}");
    Rc.call(this, a);
    this.__isGenerated = !0;
    this.__initGL();
  };
  l["openfl.display.DisplayObjectShader"] = Ph;
  Ph.__name__ = ["openfl", "display", "DisplayObjectShader"];
  Ph.__super__ = Rc;
  Ph.prototype = v(Rc.prototype, {
    openfl_Alpha: null,
    openfl_ColorMultiplier: null,
    openfl_ColorOffset: null,
    openfl_Position: null,
    openfl_TextureCoord: null,
    openfl_Matrix: null,
    openfl_HasColorTransform: null,
    openfl_TextureSize: null,
    openfl_Texture: null,
    __class__: Ph,
  });
  var wb = function () {
    this.__renderedOnCanvasWhileOnDOM = this.__forceCachedBitmapUpdate = !1;
    ja.call(this);
    this.__caretIndex = -1;
    this.__displayAsPassword = !1;
    this.__graphics = new zc(this);
    this.__textEngine = new Va(this);
    this.__layoutDirty = !0;
    this.__offsetY = this.__offsetX = 0;
    this.__mouseWheelEnabled = !0;
    this.__text = "";
    null == wb.__defaultTextFormat &&
      ((wb.__defaultTextFormat = new Qd(
        "Times New Roman",
        12,
        0,
        !1,
        !1,
        !1,
        "",
        "",
        3,
        0,
        0,
        0,
        0
      )),
      (wb.__defaultTextFormat.blockIndent = 0),
      (wb.__defaultTextFormat.bullet = !1),
      (wb.__defaultTextFormat.letterSpacing = 0),
      (wb.__defaultTextFormat.kerning = !1));
    this.__textFormat = wb.__defaultTextFormat.clone();
    this.__textEngine.textFormatRanges.push(new nf(this.__textFormat, 0, 0));
    this.addEventListener("mouseDown", m(this, this.this_onMouseDown));
    this.addEventListener("focusIn", m(this, this.this_onFocusIn));
    this.addEventListener("focusOut", m(this, this.this_onFocusOut));
    this.addEventListener("keyDown", m(this, this.this_onKeyDown));
  };
  l["openfl.text.TextField"] = wb;
  wb.__name__ = ["openfl", "text", "TextField"];
  wb.__super__ = ja;
  wb.prototype = v(ja.prototype, {
    __caretIndex: null,
    __cursorTimer: null,
    __dirty: null,
    __displayAsPassword: null,
    __domRender: null,
    __inputEnabled: null,
    __isHTML: null,
    __layoutDirty: null,
    __mouseWheelEnabled: null,
    __offsetX: null,
    __offsetY: null,
    __selectionIndex: null,
    __showCursor: null,
    __symbol: null,
    __text: null,
    __textEngine: null,
    __textFormat: null,
    __div: null,
    __renderedOnCanvasWhileOnDOM: null,
    __rawHtmlText: null,
    __forceCachedBitmapUpdate: null,
    getCharBoundaries: function (a) {
      if (0 > a || a > O.get_length(this.__text) - 1) return null;
      var b = new Z();
      return this.__getCharBoundaries(a, b) ? b : null;
    },
    getLineIndexOfChar: function (a) {
      if (0 > a || a > O.get_length(this.__text)) return -1;
      this.__updateLayout();
      for (
        var b = 0, c = this.__textEngine.layoutGroups;
        b < c.get_length();

      ) {
        var d = c.get(b);
        ++b;
        if (d.startIndex <= a && d.endIndex >= a) return d.lineIndex;
      }
      return -1;
    },
    getLineOffset: function (a) {
      this.__updateLayout();
      if (0 > a || a > this.__textEngine.numLines - 1) return -1;
      for (
        var b = 0, c = this.__textEngine.layoutGroups;
        b < c.get_length();

      ) {
        var d = c.get(b);
        ++b;
        if (d.lineIndex == a) return d.startIndex;
      }
      return 0;
    },
    replaceSelectedText: function (a) {
      this.__replaceSelectedText(a, !1);
    },
    replaceText: function (a, b, c) {
      this.__replaceText(a, b, c, !1);
    },
    setSelection: function (a, b) {
      this.__selectionIndex = a;
      this.__caretIndex = b;
      this.__stopCursorTimer();
      this.__startCursorTimer();
    },
    __allowMouseFocus: function () {
      return 1 == this.__textEngine.type || this.get_tabEnabled()
        ? !0
        : this.get_selectable();
    },
    __caretBeginningOfLine: function () {
      this.__selectionIndex == this.__caretIndex ||
      this.__caretIndex < this.__selectionIndex
        ? (this.__caretIndex = this.getLineOffset(
            this.getLineIndexOfChar(this.__caretIndex)
          ))
        : (this.__selectionIndex = this.getLineOffset(
            this.getLineIndexOfChar(this.__selectionIndex)
          ));
    },
    __caretEndOfLine: function () {
      var a =
        this.__selectionIndex == this.__caretIndex
          ? this.getLineIndexOfChar(this.__caretIndex)
          : this.getLineIndexOfChar(
              u["int"](Math.max(this.__caretIndex, this.__selectionIndex))
            );
      this.__caretIndex =
        a < this.__textEngine.numLines - 1
          ? this.getLineOffset(a + 1) - 1
          : O.get_length(this.__text);
    },
    __caretNextCharacter: function () {
      this.__caretIndex < O.get_length(this.__text) && this.__caretIndex++;
    },
    __caretNextLine: function (a, b) {
      null == a && (a = this.getLineIndexOfChar(this.__caretIndex));
      a < this.__textEngine.numLines - 1
        ? (null == b && (b = this.__caretIndex),
          (this.__caretIndex = this.__getCharIndexOnDifferentLine(b, a + 1)))
        : (this.__caretIndex = O.get_length(this.__text));
    },
    __caretPreviousCharacter: function () {
      0 < this.__caretIndex && this.__caretIndex--;
    },
    __caretPreviousLine: function (a, b) {
      null == a && (a = this.getLineIndexOfChar(this.__caretIndex));
      0 < a
        ? (null == b && (b = this.__caretIndex),
          (this.__caretIndex = this.__getCharIndexOnDifferentLine(b, a - 1)))
        : (this.__caretIndex = 0);
    },
    __disableInput: function () {
      this.__inputEnabled &&
        null != this.stage &&
        (this.stage.window.set_textInputEnabled(!1),
        this.stage.window.onTextInput.remove(m(this, this.window_onTextInput)),
        this.stage.window.onKeyDown.remove(m(this, this.window_onKeyDown)),
        (this.__inputEnabled = !1),
        this.__stopCursorTimer());
    },
    __dispatch: function (a) {
      if (2 == a.eventPhase && "mouseUp" == a.type) {
        var b = this.__getGroup(this.get_mouseX(), this.get_mouseY(), !0);
        null != b &&
          ((b = b.format.url),
          null != b &&
            "" != b &&
            (J.startsWith(b, "event:")
              ? this.dispatchEvent(new Pe("link", !1, !1, S.substr(b, 6, null)))
              : N.getURL(new Nh(b))));
      }
      return ja.prototype.__dispatch.call(this, a);
    },
    __enableInput: function () {
      null != this.stage &&
        (this.stage.window.set_textInputEnabled(!0),
        this.__inputEnabled ||
          (this.stage.window.set_textInputEnabled(!0),
          this.stage.window.onTextInput.has(m(this, this.window_onTextInput)) ||
            (this.stage.window.onTextInput.add(
              m(this, this.window_onTextInput)
            ),
            this.stage.window.onKeyDown.add(m(this, this.window_onKeyDown))),
          (this.__inputEnabled = !0),
          this.__startCursorTimer()));
    },
    __fromSymbol: function (a, b) {
      this.__symbol = b;
      this.set_width(b.width);
      this.set_height(b.height);
      this.__offsetX = b.x;
      this.__offsetY = b.y;
      this.set_multiline(b.multiline);
      this.set_wordWrap(b.wordWrap);
      this.set_displayAsPassword(b.password);
      b.border && (this.set_border(!0), this.set_background(!0));
      this.set_selectable(b.selectable);
      b.input && this.set_type(1);
      var c = new Qd();
      null != b.color && (c.color = b.color & 16777215);
      c.size = Math.round(b.fontHeight / 20);
      a = a.symbols.get(b.fontID);
      null != a &&
        ((c.__ascent = a.ascent / 20 / 1024),
        (c.__descent = a.descent / 20 / 1024));
      c.font = b.fontName;
      a = !1;
      var d = c.font;
      if (null == d) a = !0;
      else
        switch (d) {
          case "":
          case "_sans":
          case "_serif":
          case "_typewriter":
            a = !0;
            break;
          default:
            d = 0;
            for (var e = Kb.enumerateFonts(); d < e.length; ) {
              var f = e[d];
              ++d;
              if (f.get_fontName() == c.font) {
                a = !0;
                break;
              }
            }
        }
      if (!a)
        for (
          d = new pa("[^a-zA-Z]+", "g"), e = 0, f = Kb.enumerateFonts();
          e < f.length;

        ) {
          var g = f[e];
          ++e;
          if (
            S.substr(d.replace(g.get_fontName(), ""), 0, b.fontName.length) ==
            b.fontName
          ) {
            c.font = g.get_fontName();
            a = !0;
            break;
          }
        }
      a
        ? this.set_embedFonts(!0)
        : wb.__missingFontWarning.exists(c.font) ||
          (wb.__missingFontWarning.set(c.font, !0),
          xa.warn(
            'Could not find required font "' +
              c.font +
              '", it has not been embedded',
            {
              fileName: "TextField.hx",
              lineNumber: 1668,
              className: "openfl.text.TextField",
              methodName: "__fromSymbol",
            }
          ));
      null != b.align &&
        ("center" == b.align
          ? (c.align = 0)
          : "right" == b.align
          ? (c.align = 4)
          : "justify" == b.align && (c.align = 2),
        (c.leftMargin = u["int"](b.leftMargin / 20)),
        (c.rightMargin = u["int"](b.rightMargin / 20)),
        (c.indent = u["int"](b.indent / 20)),
        (c.leading = u["int"](b.leading / 20)));
      this.set_defaultTextFormat(c);
      null != b.text &&
        (b.html ? this.set_htmlText(b.text) : this.set_text(b.text));
    },
    __getBounds: function (a, b) {
      this.__updateLayout();
      var c = Z.__pool.get();
      c.copyFrom(this.__textEngine.bounds);
      b.tx += this.__offsetX;
      b.ty += this.__offsetY;
      c.__transform(c, b);
      a.__expand(c.x, c.y, c.width, c.height);
      Z.__pool.release(c);
    },
    __getCharBoundaries: function (a, b) {
      if (0 > a || a > O.get_length(this.__text) - 1) return !1;
      this.__updateLayout();
      for (
        var c = 0, d = this.__textEngine.layoutGroups;
        c < d.get_length();

      ) {
        var e = d.get(c);
        ++c;
        if (a >= e.startIndex && a <= e.endIndex)
          try {
            for (var f = e.offsetX, g = 0, h = a - e.startIndex; g < h; ) {
              var n = g++;
              f += e.getAdvance(n);
            }
            var p = e.getAdvance(a - e.startIndex);
            b.setTo(f, e.offsetY, p, e.ascent + e.descent);
            return !0;
          } catch (Vf) {
            ta.lastException = Vf;
          }
      }
      return !1;
    },
    __getCharIndexOnDifferentLine: function (a, b) {
      if (
        0 > a ||
        a > O.get_length(this.__text) ||
        0 > b ||
        b > this.__textEngine.numLines - 1
      )
        return -1;
      for (
        var c = null, d = null, e = 0, f = this.__textEngine.layoutGroups;
        e < f.get_length();

      ) {
        var g = f.get(e);
        ++e;
        if (a >= g.startIndex && a <= g.endIndex) {
          c = g.offsetX;
          for (var h = 0, n = a - g.startIndex; h < n; ) {
            var p = h++;
            c += g.getAdvance(p);
          }
          if (null != d) return this.__getPosition(c, d);
        }
        if (g.lineIndex == b) {
          d = g.offsetY + g.height / 2;
          g = 0;
          for (h = this.get_scrollV() - 1; g < h; )
            (n = g++), (d -= this.__textEngine.lineHeights.get(n));
          if (null != c) return this.__getPosition(c, d);
        }
      }
      return -1;
    },
    __getCursor: function () {
      var a = this.__getGroup(this.get_mouseX(), this.get_mouseY(), !0);
      return null != a && "" != a.format.url
        ? P.POINTER
        : this.__textEngine.selectable
        ? P.TEXT
        : null;
    },
    __getGroup: function (a, b, c) {
      null == c && (c = !1);
      this.__updateLayout();
      a += this.get_scrollH();
      for (var d = 0, e = this.get_scrollV() - 1; d < e; ) {
        var f = d++;
        b += this.__textEngine.lineHeights.get(f);
      }
      !c &&
        b > this.__textEngine.textHeight &&
        (b = this.__textEngine.textHeight);
      d = !0;
      f = 0;
      for (var g = this.__textEngine.layoutGroups.get_length(); f < g; ) {
        var h = f++;
        e = this.__textEngine.layoutGroups.get(h);
        h =
          h < this.__textEngine.layoutGroups.get_length() - 1
            ? this.__textEngine.layoutGroups.get(h + 1)
            : null;
        d &&
          (b < e.offsetY && (b = e.offsetY),
          a < e.offsetX && (a = e.offsetX),
          (d = !1));
        if ((b >= e.offsetY && b <= e.offsetY + e.height) || (!c && null == h))
          if (
            (a >= e.offsetX && a <= e.offsetX + e.width) ||
            (!c && (null == h || h.lineIndex != e.lineIndex))
          )
            return e;
      }
      return null;
    },
    __getPosition: function (a, b) {
      b = this.__getGroup(a, b);
      if (null == b) return O.get_length(this.__text);
      for (var c = 0, d = 0, e = b.positions.length; d < e; ) {
        var f = d++;
        c += b.getAdvance(f);
        if (a <= b.offsetX + c) {
          if (a <= b.offsetX + (c - b.getAdvance(f)) + b.getAdvance(f) / 2)
            return b.startIndex + f;
          if (b.startIndex + f < b.endIndex) return b.startIndex + f + 1;
          break;
        }
      }
      return b.endIndex;
    },
    __hitTest: function (a, b, c, d, e, f) {
      if (
        !f.get_visible() ||
        this.__isMask ||
        (e && !this.mouseEnabled) ||
        (null != this.get_mask() && !this.get_mask().__hitTestMask(a, b))
      )
        return !1;
      this.__getRenderTransform();
      this.__updateLayout();
      c = this.__renderTransform.__transformInverseX(a, b);
      a = this.__renderTransform.__transformInverseY(a, b);
      return this.__textEngine.bounds.contains(c, a)
        ? (null != d && d.push(f), !0)
        : !1;
    },
    __hitTestMask: function (a, b) {
      this.__getRenderTransform();
      this.__updateLayout();
      var c = this.__renderTransform.__transformInverseX(a, b);
      a = this.__renderTransform.__transformInverseY(a, b);
      return this.__textEngine.bounds.contains(c, a) ? !0 : !1;
    },
    __renderCairo: function (a) {},
    __renderCanvas: function (a) {
      a.__isDOM &&
        !this.__renderedOnCanvasWhileOnDOM &&
        ((this.__renderedOnCanvasWhileOnDOM = !0),
        1 == this.get_type() &&
          this.replaceText(0, O.get_length(this.__text), this.__text),
        this.__isHTML &&
          this.__updateText(
            U.parse(
              this.__text,
              this.__textFormat,
              this.__textEngine.textFormatRanges
            )
          ),
        (this.__layoutDirty = this.__dirty = !0),
        this.__setRenderDirty());
      if (
        null == this.get_mask() ||
        (0 < this.get_mask().get_width() && 0 < this.get_mask().get_height())
      )
        if (
          (this.__updateCacheBitmap(a, !1),
          null == this.__cacheBitmap || this.__isCacheBitmapRender)
        ) {
          da.render(this, a, this.__worldTransform);
          var b = !1;
          0 == this.__textEngine.antiAliasType &&
            1 == this.__textEngine.gridFitType &&
            (b = a.context.imageSmoothingEnabled) &&
            (a.context.imageSmoothingEnabled = !1);
          Zg.render(this, a);
          b && (a.context.imageSmoothingEnabled = !0);
        } else If.render(this.__cacheBitmap, a);
    },
    __renderDOM: function (a) {
      this.__domRender = !0;
      this.__updateCacheBitmap(a, this.__forceCachedBitmapUpdate);
      this.__domRender = this.__forceCachedBitmapUpdate = !1;
      null == this.__cacheBitmap || this.__isCacheBitmapRender
        ? (this.__renderedOnCanvasWhileOnDOM &&
            ((this.__renderedOnCanvasWhileOnDOM = !1),
            this.__isHTML &&
              null != this.__rawHtmlText &&
              (this.__updateText(this.__rawHtmlText),
              (this.__layoutDirty = this.__dirty = !0),
              this.__setRenderDirty())),
          hb.render(this, a))
        : (this.__renderDOMClear(a),
          (this.__cacheBitmap.stage = this.stage),
          zd.render(this.__cacheBitmap, a));
      this.__renderEvent(a);
    },
    __renderDOMClear: function (a) {
      hb.clear(this, a);
    },
    __renderGL: function (a) {
      this.__updateCacheBitmap(a, !1);
      null == this.__cacheBitmap || this.__isCacheBitmapRender
        ? (da.render(this, a.__softwareRenderer, this.__worldTransform),
          $g.render(this, a))
        : Ad.render(this.__cacheBitmap, a);
      this.__renderEvent(a);
    },
    __renderGLMask: function (a) {
      da.render(this, a.__softwareRenderer, this.__worldTransform);
      ja.prototype.__renderGLMask.call(this, a);
    },
    __replaceSelectedText: function (a, b) {
      null == b && (b = !0);
      null == a && (a = "");
      if ("" != a || this.__selectionIndex != this.__caretIndex) {
        var c =
            this.__caretIndex < this.__selectionIndex
              ? this.__caretIndex
              : this.__selectionIndex,
          d =
            this.__caretIndex > this.__selectionIndex
              ? this.__caretIndex
              : this.__selectionIndex;
        if (
          !(
            c == d &&
            0 < this.__textEngine.maxChars &&
            O.get_length(this.__text) == this.__textEngine.maxChars
          )
        ) {
          c > O.get_length(this.__text) && (c = O.get_length(this.__text));
          d > O.get_length(this.__text) && (d = O.get_length(this.__text));
          if (d < c) {
            var e = d;
            d = c;
            c = e;
          }
          0 > c && (c = 0);
          this.__replaceText(c, d, a, b);
          a = c + O.get_length(r.__cast(a, String));
          a > O.get_length(this.__text) && (a = O.get_length(this.__text));
          this.setSelection(a, a);
          this.__updateScrollH();
        }
      }
    },
    __replaceText: function (a, b, c, d) {
      if (!(b < a || 0 > a || b > O.get_length(this.__text) || null == c)) {
        d &&
          ((c = this.__textEngine.restrictText(c)),
          0 < this.__textEngine.maxChars &&
            ((d = b - a),
            (d = this.__textEngine.maxChars - O.get_length(this.__text) + d),
            0 >= d ? (c = "") : d < c.length && (c = S.substr(c, 0, d))));
        this.__updateText(
          O.substring(this.__text, 0, a) + c + O.substring(this.__text, b)
        );
        b > O.get_length(this.__text) && (b = O.get_length(this.__text));
        d = c.length - (b - a);
        for (
          var e = 0, f;
          e < this.__textEngine.textFormatRanges.get_length();

        )
          (f = this.__textEngine.textFormatRanges.get(e)),
            f.start <= a && f.end >= b
              ? ((f.end += d), ++e)
              : f.start >= a && f.end <= b
              ? (0 < e
                  ? this.__textEngine.textFormatRanges.splice(e, 1)
                  : ((f.start = 0), (f.end = a + c.length), ++e),
                (d -= f.end - f.start))
              : (f.start > a && f.start <= b && (f.start += d), ++e);
        this.__updateScrollH();
        this.__layoutDirty = this.__dirty = !0;
        this.__setRenderDirty();
      }
    },
    __shouldCacheHardware: function (a) {
      return 1 == a ? !0 : !1;
    },
    __startCursorTimer: function () {
      this.__cursorTimer = Fe.delay(m(this, this.__startCursorTimer), 600);
      this.__showCursor = !this.__showCursor;
      this.__dirty = !0;
      this.__setRenderDirty();
    },
    __startTextInput: function () {
      0 > this.__caretIndex &&
        (this.__selectionIndex = this.__caretIndex = O.get_length(this.__text));
      (Y.__supportDOM ? this.__renderedOnCanvasWhileOnDOM : 1) &&
        this.__enableInput();
    },
    __stopCursorTimer: function () {
      null != this.__cursorTimer &&
        (this.__cursorTimer.stop(), (this.__cursorTimer = null));
      this.__showCursor &&
        ((this.__showCursor = !1),
        (this.__dirty = !0),
        this.__setRenderDirty());
    },
    __stopTextInput: function () {
      (Y.__supportDOM ? this.__renderedOnCanvasWhileOnDOM : 1) &&
        this.__disableInput();
    },
    __updateCacheBitmap: function (a, b) {
      return null != this.__filters ||
        "opengl" != a.__type ||
        null != this.__cacheBitmap ||
        this.__domRender
        ? ja.prototype.__updateCacheBitmap.call(this, a, b || this.__dirty)
          ? (null != this.__cacheBitmap &&
              ((this.__cacheBitmap.__renderTransform.tx -= this.__offsetX),
              (this.__cacheBitmap.__renderTransform.ty -= this.__offsetY)),
            !0)
          : !1
        : !1;
    },
    __updateLayout: function () {
      if (this.__layoutDirty) {
        var a = this.__textEngine.width;
        this.__textEngine.update();
        if (2 != this.__textEngine.autoSize) {
          if (this.__textEngine.width != a)
            switch (this.__textEngine.autoSize) {
              case 0:
                this.set_x(this.get_x() + (a - this.__textEngine.width) / 2);
                break;
              case 3:
                this.set_x(this.get_x() + (a - this.__textEngine.width));
            }
          this.__textEngine.getBounds();
        }
        this.__layoutDirty = !1;
      }
    },
    __updateScrollH: function () {
      if (!this.get_multiline() && 1 == this.get_type()) {
        this.__layoutDirty = !0;
        this.__updateLayout();
        var a = this.__textEngine.textWidth - this.__textEngine.width + 4;
        0 < a
          ? this.__caretIndex >= O.get_length(this.get_text())
            ? this.set_scrollH(Math.ceil(a))
            : ((a = Z.__pool.get()),
              this.__getCharBoundaries(this.__caretIndex, a),
              a.x < this.get_scrollH()
                ? this.set_scrollH(Math.floor(a.x - 2))
                : a.x > this.get_scrollH() + this.__textEngine.width &&
                  this.set_scrollH(
                    Math.ceil(a.x - this.__textEngine.width - 2)
                  ),
              Z.__pool.release(a))
          : this.set_scrollH(0);
      }
    },
    __updateText: function (a) {
      Y.__supportDOM &&
        this.__renderedOnCanvasWhileOnDOM &&
        (this.__forceCachedBitmapUpdate = this.__text != a);
      this.__textEngine.set_text(a);
      this.__text = this.__textEngine.text;
      O.get_length(this.__text) < this.__caretIndex &&
        (this.__selectionIndex = this.__caretIndex = O.get_length(this.__text));
      if (
        !this.__displayAsPassword ||
        (Y.__supportDOM && !this.__renderedOnCanvasWhileOnDOM)
      )
        this.__textEngine.set_text(this.__text);
      else {
        a = "";
        for (var b = 0, c = O.get_length(this.get_text()); b < c; )
          b++, (a += "*");
        this.__textEngine.set_text(a);
      }
    },
    __updateTransforms: function (a) {
      ja.prototype.__updateTransforms.call(this, a);
      this.__renderTransform.__translateTransformed(
        this.__offsetX,
        this.__offsetY
      );
    },
    set_background: function (a) {
      a != this.__textEngine.background &&
        ((this.__dirty = !0), this.__setRenderDirty());
      return (this.__textEngine.background = a);
    },
    set_border: function (a) {
      a != this.__textEngine.border &&
        ((this.__dirty = !0), this.__setRenderDirty());
      return (this.__textEngine.border = a);
    },
    get_defaultTextFormat: function () {
      return this.__textFormat.clone();
    },
    set_defaultTextFormat: function (a) {
      this.__textFormat.__merge(a);
      this.__dirty = this.__layoutDirty = !0;
      this.__setRenderDirty();
      return a;
    },
    set_displayAsPassword: function (a) {
      a != this.__displayAsPassword &&
        ((this.__layoutDirty = this.__dirty = !0),
        this.__setRenderDirty(),
        (this.__displayAsPassword = a),
        this.__updateText(this.__text));
      return a;
    },
    set_embedFonts: function (a) {
      return (this.__textEngine.embedFonts = a);
    },
    get_height: function () {
      this.__updateLayout();
      return this.__textEngine.height * Math.abs(this.get_scaleY());
    },
    set_height: function (a) {
      a != this.__textEngine.height &&
        (this.__setTransformDirty(),
        (this.__layoutDirty = this.__dirty = !0),
        this.__setRenderDirty(),
        (this.__textEngine.height = a));
      return this.__textEngine.height * Math.abs(this.get_scaleY());
    },
    get_htmlText: function () {
      return this.__isHTML ? this.__rawHtmlText : this.__text;
    },
    set_htmlText: function (a) {
      (this.__isHTML && this.__text == a) ||
        ((this.__layoutDirty = this.__dirty = !0), this.__setRenderDirty());
      this.__isHTML = !0;
      this.__rawHtmlText = a;
      a = U.parse(a, this.__textFormat, this.__textEngine.textFormatRanges);
      if (Y.__supportDOM) {
        1 < this.__textEngine.textFormatRanges.get_length() &&
          this.__textEngine.textFormatRanges.splice(
            1,
            this.__textEngine.textFormatRanges.get_length() - 1
          );
        var b = this.__textEngine.textFormatRanges.get(0);
        b.format = this.__textFormat;
        b.start = 0;
        this.__renderedOnCanvasWhileOnDOM
          ? ((b.end = a.length), this.__updateText(a))
          : ((b.end = this.__rawHtmlText.length),
            this.__updateText(this.__rawHtmlText));
      } else this.__updateText(a);
      return a;
    },
    get_multiline: function () {
      return this.__textEngine.multiline;
    },
    set_multiline: function (a) {
      a != this.__textEngine.multiline &&
        ((this.__layoutDirty = this.__dirty = !0),
        this.__updateText(this.__text),
        this.__updateScrollH(),
        this.__setRenderDirty());
      return (this.__textEngine.multiline = a);
    },
    get_scrollH: function () {
      return this.__textEngine.scrollH;
    },
    set_scrollH: function (a) {
      this.__updateLayout();
      a > this.__textEngine.maxScrollH && (a = this.__textEngine.maxScrollH);
      0 > a && (a = 0);
      a != this.__textEngine.scrollH &&
        ((this.__dirty = !0),
        this.__setRenderDirty(),
        this.dispatchEvent(new X("scroll")));
      return (this.__textEngine.scrollH = a);
    },
    get_scrollV: function () {
      return this.__textEngine.scrollV;
    },
    get_selectable: function () {
      return this.__textEngine.selectable;
    },
    set_selectable: function (a) {
      a != this.__textEngine.selectable &&
        1 == this.get_type() &&
        (null != this.stage && this.stage.get_focus() == this
          ? this.__startTextInput()
          : a || this.__stopTextInput());
      return (this.__textEngine.selectable = a);
    },
    get_tabEnabled: function () {
      return null == this.__tabEnabled
        ? 1 == this.__textEngine.type
        : this.__tabEnabled;
    },
    get_text: function () {
      return this.__text;
    },
    set_text: function (a) {
      if (this.__isHTML || this.__text != a)
        (this.__layoutDirty = this.__dirty = !0), this.__setRenderDirty();
      else return a;
      1 < this.__textEngine.textFormatRanges.get_length() &&
        this.__textEngine.textFormatRanges.splice(
          1,
          this.__textEngine.textFormatRanges.get_length() - 1
        );
      var b = this.__textEngine.textFormatRanges.get(0);
      b.format = this.__textFormat;
      b.start = 0;
      b.end = O.get_length(a);
      this.__isHTML = !1;
      this.__updateText(a);
      return a;
    },
    set_textColor: function (a) {
      a != this.__textFormat.color &&
        ((this.__dirty = !0), this.__setRenderDirty());
      for (
        var b = 0, c = this.__textEngine.textFormatRanges;
        b < c.get_length();

      ) {
        var d = c.get(b);
        ++b;
        d.format.color = a;
      }
      return (this.__textFormat.color = a);
    },
    get_type: function () {
      return this.__textEngine.type;
    },
    set_type: function (a) {
      a != this.__textEngine.type &&
        (1 == a
          ? (this.addEventListener(
              "addedToStage",
              m(this, this.this_onAddedToStage)
            ),
            this.this_onFocusIn(null),
            (this.__textEngine.__useIntAdvances = !0))
          : (this.removeEventListener(
              "addedToStage",
              m(this, this.this_onAddedToStage)
            ),
            this.__stopTextInput(),
            (this.__textEngine.__useIntAdvances = null)),
        (this.__layoutDirty = this.__dirty = !0),
        this.__setRenderDirty());
      return (this.__textEngine.type = a);
    },
    get_width: function () {
      this.__updateLayout();
      return this.__textEngine.width * Math.abs(this.__scaleX);
    },
    set_width: function (a) {
      a != this.__textEngine.width &&
        (this.__setTransformDirty(),
        (this.__layoutDirty = this.__dirty = !0),
        this.__setRenderDirty(),
        (this.__textEngine.width = a));
      return this.__textEngine.width * Math.abs(this.__scaleX);
    },
    set_wordWrap: function (a) {
      a != this.__textEngine.wordWrap &&
        ((this.__layoutDirty = this.__dirty = !0), this.__setRenderDirty());
      return (this.__textEngine.wordWrap = a);
    },
    get_x: function () {
      return this.__transform.tx + this.__offsetX;
    },
    set_x: function (a) {
      a != this.__transform.tx + this.__offsetX && this.__setTransformDirty();
      return (this.__transform.tx = a - this.__offsetX);
    },
    get_y: function () {
      return this.__transform.ty + this.__offsetY;
    },
    set_y: function (a) {
      a != this.__transform.ty + this.__offsetY && this.__setTransformDirty();
      return (this.__transform.ty = a - this.__offsetY);
    },
    stage_onMouseMove: function (a) {
      null != this.stage &&
        this.__textEngine.selectable &&
        0 <= this.__selectionIndex &&
        (this.__updateLayout(),
        (a = this.__getPosition(
          this.get_mouseX() + this.get_scrollH(),
          this.get_mouseY()
        )),
        a != this.__caretIndex &&
          ((this.__caretIndex = a),
          Y.__supportDOM
            ? this.__renderedOnCanvasWhileOnDOM &&
              (this.__forceCachedBitmapUpdate = !0)
            : ((this.__dirty = !0), this.__setRenderDirty())));
    },
    stage_onMouseUp: function (a) {
      if (
        null != this.stage &&
        (this.stage.removeEventListener(
          "mouseMove",
          m(this, this.stage_onMouseMove)
        ),
        this.stage.removeEventListener(
          "mouseUp",
          m(this, this.stage_onMouseUp)
        ),
        this.stage.get_focus() == this)
      ) {
        this.__getWorldTransform();
        this.__updateLayout();
        this.__worldTransform.__transformInverseX(this.get_x(), this.get_y());
        this.__worldTransform.__transformInverseY(this.get_x(), this.get_y());
        var b = this.__getPosition(
          this.get_mouseX() + this.get_scrollH(),
          this.get_mouseY()
        );
        a = u["int"](Math.min(this.__selectionIndex, b));
        b = u["int"](Math.max(this.__selectionIndex, b));
        this.__selectionIndex = a;
        this.__caretIndex = b;
        this.__inputEnabled &&
          (this.this_onFocusIn(null),
          this.__stopCursorTimer(),
          this.__startCursorTimer(),
          Y.__supportDOM &&
            this.__renderedOnCanvasWhileOnDOM &&
            (this.__forceCachedBitmapUpdate = !0));
      }
    },
    this_onAddedToStage: function (a) {
      this.this_onFocusIn(null);
    },
    this_onFocusIn: function (a) {
      1 == this.get_type() &&
        null != this.stage &&
        this.stage.get_focus() == this &&
        this.__startTextInput();
    },
    this_onFocusOut: function (a) {
      this.__stopCursorTimer();
      null != a.relatedObject && u.is(a.relatedObject, wb)
        ? (null != this.stage &&
            (this.stage.window.onTextInput.remove(
              m(this, this.window_onTextInput)
            ),
            this.stage.window.onKeyDown.remove(m(this, this.window_onKeyDown))),
          (this.__inputEnabled = !1))
        : this.__stopTextInput();
      this.__selectionIndex != this.__caretIndex &&
        ((this.__selectionIndex = this.__caretIndex),
        (this.__dirty = !0),
        this.__setRenderDirty());
    },
    this_onKeyDown: function (a) {
      this.get_selectable() &&
        1 != this.get_type() &&
        67 == a.keyCode &&
        (a.commandKey || a.ctrlKey) &&
        this.__caretIndex != this.__selectionIndex &&
        Nb.set_text(
          O.substring(this.__text, this.__caretIndex, this.__selectionIndex)
        );
    },
    this_onMouseDown: function (a) {
      if (this.get_selectable() || 1 == this.get_type())
        this.__updateLayout(),
          (this.__selectionIndex = this.__caretIndex =
            this.__getPosition(
              this.get_mouseX() + this.get_scrollH(),
              this.get_mouseY()
            )),
          Y.__supportDOM || ((this.__dirty = !0), this.__setRenderDirty()),
          this.stage.addEventListener(
            "mouseMove",
            m(this, this.stage_onMouseMove)
          ),
          this.stage.addEventListener("mouseUp", m(this, this.stage_onMouseUp));
    },
    window_onKeyDown: function (a, b) {
      switch (a) {
        case 8:
          this.__selectionIndex == this.__caretIndex &&
            0 < this.__caretIndex &&
            (this.__selectionIndex = this.__caretIndex - 1);
          this.__selectionIndex != this.__caretIndex &&
            (this.replaceSelectedText(""),
            (this.__selectionIndex = this.__caretIndex),
            this.dispatchEvent(new X("change", !0)));
          break;
        case 97:
          this.get_selectable() &&
            (ab.get_metaKey(b) || ab.get_ctrlKey(b)) &&
            ((this.__caretIndex = O.get_length(this.__text)),
            (this.__selectionIndex = 0));
          break;
        case 99:
          (ab.get_metaKey(b) || ab.get_ctrlKey(b)) &&
            this.__caretIndex != this.__selectionIndex &&
            Nb.set_text(
              O.substring(this.__text, this.__caretIndex, this.__selectionIndex)
            );
          break;
        case 120:
          (ab.get_metaKey(b) || ab.get_ctrlKey(b)) &&
            this.__caretIndex != this.__selectionIndex &&
            (Nb.set_text(
              O.substring(this.__text, this.__caretIndex, this.__selectionIndex)
            ),
            this.replaceSelectedText(""),
            this.dispatchEvent(new X("change", !0)));
          break;
        case 127:
          this.__selectionIndex == this.__caretIndex &&
            this.__caretIndex < O.get_length(this.__text) &&
            (this.__selectionIndex = this.__caretIndex + 1);
          this.__selectionIndex != this.__caretIndex &&
            (this.replaceSelectedText(""),
            (this.__selectionIndex = this.__caretIndex),
            this.dispatchEvent(new X("change", !0)));
          break;
        case 1073741898:
          this.get_selectable() &&
            (this.__caretBeginningOfLine(),
            this.__stopCursorTimer(),
            this.__startCursorTimer());
          break;
        case 1073741901:
          this.get_selectable() &&
            (this.__caretEndOfLine(),
            this.__stopCursorTimer(),
            this.__startCursorTimer());
          break;
        case 1073741903:
          this.get_selectable() &&
            (ab.get_metaKey(b)
              ? (this.__caretEndOfLine(),
                ab.get_shiftKey(b) ||
                  (this.__selectionIndex = this.__caretIndex))
              : ab.get_shiftKey(b)
              ? this.__caretNextCharacter()
              : (this.__selectionIndex == this.__caretIndex
                  ? this.__caretNextCharacter()
                  : (this.__caretIndex = u["int"](
                      Math.max(this.__caretIndex, this.__selectionIndex)
                    )),
                (this.__selectionIndex = this.__caretIndex)),
            this.__updateScrollH(),
            this.__stopCursorTimer(),
            this.__startCursorTimer());
          break;
        case 1073741904:
          this.get_selectable() &&
            (ab.get_metaKey(b)
              ? (this.__caretBeginningOfLine(),
                ab.get_shiftKey(b) ||
                  (this.__selectionIndex = this.__caretIndex))
              : ab.get_shiftKey(b)
              ? this.__caretPreviousCharacter()
              : (this.__selectionIndex == this.__caretIndex
                  ? this.__caretPreviousCharacter()
                  : (this.__caretIndex = u["int"](
                      Math.min(this.__caretIndex, this.__selectionIndex)
                    )),
                (this.__selectionIndex = this.__caretIndex)),
            this.__updateScrollH(),
            this.__stopCursorTimer(),
            this.__startCursorTimer());
          break;
        case 1073741905:
          this.get_selectable() &&
            this.__textEngine.multiline &&
            (ab.get_shiftKey(b)
              ? this.__caretNextLine()
              : (this.__selectionIndex == this.__caretIndex
                  ? this.__caretNextLine()
                  : ((a = this.getLineIndexOfChar(
                      u["int"](
                        Math.max(this.__caretIndex, this.__selectionIndex)
                      )
                    )),
                    this.__caretNextLine(
                      a,
                      u["int"](
                        Math.min(this.__caretIndex, this.__selectionIndex)
                      )
                    )),
                (this.__selectionIndex = this.__caretIndex)),
            this.__stopCursorTimer(),
            this.__startCursorTimer());
          break;
        case 1073741906:
          this.get_selectable() &&
            this.__textEngine.multiline &&
            (ab.get_shiftKey(b)
              ? this.__caretPreviousLine()
              : (this.__selectionIndex == this.__caretIndex
                  ? this.__caretPreviousLine()
                  : ((a = this.getLineIndexOfChar(
                      u["int"](
                        Math.min(this.__caretIndex, this.__selectionIndex)
                      )
                    )),
                    this.__caretPreviousLine(
                      a,
                      u["int"](
                        Math.min(this.__caretIndex, this.__selectionIndex)
                      )
                    )),
                (this.__selectionIndex = this.__caretIndex)),
            this.__stopCursorTimer(),
            this.__startCursorTimer());
          break;
        case 13:
        case 1073741912:
          this.__textEngine.multiline &&
            ((a = new Pe("textInput", !0, !0, "\n")),
            this.dispatchEvent(a),
            a.isDefaultPrevented() ||
              (this.__replaceSelectedText("\n", !0),
              this.dispatchEvent(new X("change", !0))));
      }
    },
    window_onTextInput: function (a) {
      this.__replaceSelectedText(a, !0);
      this.dispatchEvent(new X("change", !0));
    },
    __class__: wb,
    __properties__: v(ja.prototype.__properties__, {
      set_wordWrap: "set_wordWrap",
      set_type: "set_type",
      get_type: "get_type",
      set_textColor: "set_textColor",
      set_text: "set_text",
      get_text: "get_text",
      set_selectable: "set_selectable",
      get_selectable: "get_selectable",
      get_scrollV: "get_scrollV",
      set_scrollH: "set_scrollH",
      get_scrollH: "get_scrollH",
      set_multiline: "set_multiline",
      get_multiline: "get_multiline",
      set_htmlText: "set_htmlText",
      get_htmlText: "get_htmlText",
      set_embedFonts: "set_embedFonts",
      set_displayAsPassword: "set_displayAsPassword",
      set_defaultTextFormat: "set_defaultTextFormat",
      get_defaultTextFormat: "get_defaultTextFormat",
      set_border: "set_border",
      set_background: "set_background",
    }),
  });
  var Tj = function (a, b, c) {
    null == c && (c = 0);
    null == b && (b = 10);
    null == a && (a = 10);
    wb.call(this);
    this.set_x(a);
    this.set_y(b);
    this.currentFPS = 0;
    this.set_selectable(!1);
    this.mouseEnabled = !1;
    this.set_defaultTextFormat(new Qd("_sans", 12, c));
    this.set_text("FPS: ");
    this.cacheCount = 0;
    this.times = [];
    this.addEventListener("enterFrame", m(this, this.this_onEnterFrame));
  };
  l["openfl.display.FPS"] = Tj;
  Tj.__name__ = ["openfl", "display", "FPS"];
  Tj.__super__ = wb;
  Tj.prototype = v(wb.prototype, {
    currentFPS: null,
    cacheCount: null,
    times: null,
    this_onEnterFrame: function (a) {
      a = Fe.stamp();
      for (this.times.push(a); this.times[0] < a - 1; ) this.times.shift();
      a = this.times.length;
      this.currentFPS = Math.round((a + this.cacheCount) / 2);
      a != this.cacheCount && this.set_text("FPS: " + this.currentFPS);
      this.cacheCount = a;
    },
    __class__: Tj,
  });
  var Qh = function (a, b) {
    ea.call(this);
    this.__name = a;
    this.__frame = b;
  };
  l["openfl.display.FrameLabel"] = Qh;
  Qh.__name__ = ["openfl", "display", "FrameLabel"];
  Qh.__super__ = ea;
  Qh.prototype = v(ea.prototype, {
    __frame: null,
    __name: null,
    get_frame: function () {
      return this.__frame;
    },
    get_name: function () {
      return this.__name;
    },
    __class__: Qh,
    __properties__: { get_name: "get_name", get_frame: "get_frame" },
  });
  var zc = function (a) {
    this.__dirty = !0;
    this.__owner = a;
    this.__commands = new tc();
    this.__shaderBufferPool = new Be(function () {
      return new Ij();
    });
    this.__positionY = this.__positionX = this.__strokePadding = 0;
    this.__renderTransform = new ia();
    this.__usedShaderBuffers = new bd();
    this.__worldTransform = new ia();
    this.__height = this.__width = 0;
    this.moveTo(0, 0);
  };
  l["openfl.display.Graphics"] = zc;
  zc.__name__ = ["openfl", "display", "Graphics"];
  zc.prototype = {
    __bounds: null,
    __commands: null,
    __dirty: null,
    __height: null,
    __positionX: null,
    __positionY: null,
    __quadBuffer: null,
    __renderTransform: null,
    __shaderBufferPool: null,
    __strokePadding: null,
    __transformDirty: null,
    __triangleIndexBuffer: null,
    __triangleIndexBufferCount: null,
    __triangleIndexBufferData: null,
    __usedShaderBuffers: null,
    __vertexBuffer: null,
    __vertexBufferCount: null,
    __vertexBufferCountUVT: null,
    __vertexBufferData: null,
    __vertexBufferDataUVT: null,
    __vertexBufferUVT: null,
    __visible: null,
    __owner: null,
    __width: null,
    __worldTransform: null,
    __canvas: null,
    __context: null,
    __bitmap: null,
    beginBitmapFill: function (a, b, c, d) {
      null == d && (d = !1);
      null == c && (c = !0);
      this.__commands.beginBitmapFill(a, null != b ? b.clone() : null, c, d);
      this.__visible = !0;
    },
    beginFill: function (a, b) {
      null == b && (b = 1);
      null == a && (a = 0);
      this.__commands.beginFill(a & 16777215, b);
      0 < b && (this.__visible = !0);
    },
    beginGradientFill: function (a, b, c, d, e, f, g, h) {
      null == h && (h = 0);
      null == g && (g = 1);
      null == f && (f = 0);
      if (null != b && 0 != b.length) {
        if (null == c) {
          c = [];
          for (var n = 0, p = b.length; n < p; ) n++, c.push(1);
        }
        if (null == d)
          for (d = [], n = 0, p = b.length; n < p; ) {
            var k = n++;
            d.push(Math.ceil((k / b.length) * 255));
          }
        if (!(c.length < b.length || d.length < b.length))
          for (
            this.__commands.beginGradientFill(a, b, c, d, e, f, g, h), a = 0;
            a < c.length;

          )
            if (((b = c[a]), ++a, 0 < b)) {
              this.__visible = !0;
              break;
            }
      }
    },
    clear: function () {
      for (var a = this.__usedShaderBuffers.iterator(); a.hasNext(); ) {
        var b = a.next();
        this.__shaderBufferPool.release(b);
      }
      this.__usedShaderBuffers.clear();
      this.__commands.clear();
      this.__strokePadding = 0;
      null != this.__bounds &&
        (this.set___dirty(!0),
        (this.__transformDirty = !0),
        (this.__bounds = null));
      this.__visible = !1;
      this.__positionY = this.__positionX = 0;
      this.moveTo(0, 0);
    },
    copyFrom: function (a) {
      this.__bounds = null != a.__bounds ? a.__bounds.clone() : null;
      this.__commands = a.__commands.copy();
      this.set___dirty(!0);
      this.__strokePadding = a.__strokePadding;
      this.__positionX = a.__positionX;
      this.__positionY = a.__positionY;
      this.__transformDirty = !0;
      this.__visible = a.__visible;
    },
    curveTo: function (a, b, c, d) {
      this.__inflateBounds(
        this.__positionX - this.__strokePadding,
        this.__positionY - this.__strokePadding
      );
      this.__inflateBounds(
        this.__positionX + this.__strokePadding,
        this.__positionY + this.__strokePadding
      );
      var e =
        (a < c && a > this.__positionX) || (a > c && a < this.__positionX)
          ? c
          : this.__calculateBezierQuadPoint(
              (this.__positionX - a) / (this.__positionX - 2 * a + c),
              this.__positionX,
              a,
              c
            );
      var f =
        (b < d && b > this.__positionY) || (b > d && b < this.__positionY)
          ? d
          : this.__calculateBezierQuadPoint(
              (this.__positionY - b) / (this.__positionY - 2 * b + d),
              this.__positionY,
              b,
              d
            );
      this.__inflateBounds(e - this.__strokePadding, f - this.__strokePadding);
      this.__inflateBounds(e + this.__strokePadding, f + this.__strokePadding);
      this.__positionX = c;
      this.__positionY = d;
      this.__commands.curveTo(a, b, c, d);
      this.set___dirty(!0);
    },
    drawRect: function (a, b, c, d) {
      if (0 != c || 0 != d) {
        var e = 0 > c ? -1 : 1,
          f = 0 > d ? -1 : 1;
        this.__inflateBounds(
          a - this.__strokePadding * e,
          b - this.__strokePadding * f
        );
        this.__inflateBounds(
          a + c + this.__strokePadding * e,
          b + d + this.__strokePadding * f
        );
        this.__commands.drawRect(a, b, c, d);
        this.set___dirty(!0);
      }
    },
    endFill: function () {
      this.__commands.endFill();
    },
    lineStyle: function (a, b, c, d, e, f, g, h) {
      null == h && (h = 3);
      null == e && (e = 2);
      null == d && (d = !1);
      null == c && (c = 1);
      null == b && (b = 0);
      null != a &&
        (1 == g
          ? a > this.__strokePadding && (this.__strokePadding = a)
          : a / 2 > this.__strokePadding && (this.__strokePadding = a / 2));
      this.__commands.lineStyle(a, b, c, d, e, f, g, h);
      null != a && (this.__visible = !0);
    },
    lineTo: function (a, b) {
      isFinite(a) &&
        isFinite(b) &&
        (this.__inflateBounds(
          this.__positionX - this.__strokePadding,
          this.__positionY - this.__strokePadding
        ),
        this.__inflateBounds(
          this.__positionX + this.__strokePadding,
          this.__positionY + this.__strokePadding
        ),
        (this.__positionX = a),
        (this.__positionY = b),
        this.__inflateBounds(
          this.__positionX - this.__strokePadding,
          this.__positionY - this.__strokePadding
        ),
        this.__inflateBounds(
          this.__positionX + 2 * this.__strokePadding,
          this.__positionY + this.__strokePadding
        ),
        this.__commands.lineTo(a, b),
        this.set___dirty(!0));
    },
    moveTo: function (a, b) {
      this.__positionX = a;
      this.__positionY = b;
      this.__commands.moveTo(a, b);
    },
    __calculateBezierQuadPoint: function (a, b, c, d) {
      var e = 1 - a;
      return e * e * b + 2 * e * a * c + a * a * d;
    },
    __cleanup: function () {
      null != this.__bounds &&
        null != this.__canvas &&
        (this.set___dirty(!0), (this.__transformDirty = !0));
      this.__context = this.__canvas = this.__bitmap = null;
    },
    __getBounds: function (a, b) {
      if (null != this.__bounds) {
        var c = Z.__pool.get();
        this.__bounds.__transform(c, b);
        a.__expand(c.x, c.y, c.width, c.height);
        Z.__pool.release(c);
      }
    },
    __hitTest: function (a, b, c, d) {
      if (null == this.__bounds) return !1;
      var e = d.__transformInverseX(a, b);
      a = d.__transformInverseY(a, b);
      return e > this.__bounds.x &&
        a > this.__bounds.y &&
        this.__bounds.contains(e, a)
        ? c
          ? q.hitTest(this, e, a)
          : !0
        : !1;
    },
    __inflateBounds: function (a, b) {
      null == this.__bounds
        ? ((this.__bounds = new Z(a, b, 0, 0)), (this.__transformDirty = !0))
        : (a < this.__bounds.x &&
            ((this.__bounds.width += this.__bounds.x - a),
            (this.__bounds.x = a),
            (this.__transformDirty = !0)),
          b < this.__bounds.y &&
            ((this.__bounds.height += this.__bounds.y - b),
            (this.__bounds.y = b),
            (this.__transformDirty = !0)),
          a > this.__bounds.x + this.__bounds.width &&
            (this.__bounds.width = a - this.__bounds.x),
          b > this.__bounds.y + this.__bounds.height &&
            (this.__bounds.height = b - this.__bounds.y));
    },
    __update: function (a) {
      if (
        !(
          null == this.__bounds ||
          0 >= this.__bounds.width ||
          0 >= this.__bounds.height
        )
      ) {
        var b = this.__owner.__renderTransform;
        if (null != b) {
          var c = 0 == b.b ? Math.abs(b.a) : Math.sqrt(b.a * b.a + b.b * b.b);
          var d = 0 == b.c ? Math.abs(b.d) : Math.sqrt(b.c * b.c + b.d * b.d);
          null != a &&
            ((c = 0 == a.b ? c * a.a : c * Math.sqrt(a.a * a.a + a.b * a.b)),
            (d = 0 == a.c ? d * a.d : d * Math.sqrt(a.c * a.c + a.d * a.d)));
          a = this.__bounds.width * c;
          d *= this.__bounds.height;
          if (1 > a || 1 > d)
            (1 <= this.__width || 1 <= this.__height) && this.set___dirty(!0),
              (this.__height = this.__width = 0);
          else {
            null != zc.maxTextureWidth &&
              a > zc.maxTextureWidth &&
              (a = zc.maxTextureWidth);
            null != zc.maxTextureWidth &&
              d > zc.maxTextureHeight &&
              (d = zc.maxTextureHeight);
            this.__renderTransform.a = a / this.__bounds.width;
            this.__renderTransform.d = d / this.__bounds.height;
            c = 1 / this.__renderTransform.a;
            var e = 1 / this.__renderTransform.d;
            this.__worldTransform.a = c * b.a;
            this.__worldTransform.b = c * b.b;
            this.__worldTransform.c = e * b.c;
            this.__worldTransform.d = e * b.d;
            e = this.__bounds.x;
            var f = this.__bounds.y;
            c = e * b.a + f * b.c + b.tx;
            b = e * b.b + f * b.d + b.ty;
            this.__worldTransform.tx = Math.floor(c);
            this.__worldTransform.ty = Math.floor(b);
            this.__renderTransform.tx =
              this.__worldTransform.__transformInverseX(c, b);
            this.__renderTransform.ty =
              this.__worldTransform.__transformInverseY(c, b);
            b = Math.ceil(a + this.__renderTransform.tx);
            a = Math.ceil(d + this.__renderTransform.ty);
            (b == this.__width && a == this.__height) || this.set___dirty(!0);
            this.__width = b;
            this.__height = a;
          }
        }
      }
    },
    set___dirty: function (a) {
      a && null != this.__owner && this.__owner.__setRenderDirty();
      return (this.__dirty = a);
    },
    __class__: zc,
    __properties__: { set___dirty: "set___dirty" },
  };
  var Rh = function (a) {
    null == this.__glFragmentSource &&
      (this.__glFragmentSource =
        "varying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\t\t\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform sampler2D bitmap;\n\t\t\n\t\tvoid main(void) {\n\t\t\t\n\t\t\tvec4 color = texture2D (bitmap, openfl_TextureCoordv);\n\t\t\n\t\tif (color.a == 0.0) {\n\t\t\t\n\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\t\t\t\n\t\t} else if (openfl_HasColorTransform) {\n\t\t\t\n\t\t\tcolor = vec4 (color.rgb / color.a, color.a);\n\t\t\t\n\t\t\tmat4 colorMultiplier = mat4 (0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = 1.0; // openfl_ColorMultiplierv.w;\n\t\t\t\n\t\t\tcolor = clamp (openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\t\t\t\n\t\t\tif (color.a > 0.0) {\n\t\t\t\t\n\t\t\t\tgl_FragColor = vec4 (color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t} else {\n\t\t\t\n\t\t\tgl_FragColor = color * openfl_Alphav;\n\t\t\t\n\t\t}\n\t\t\t\n\t\t}");
    null == this.__glVertexSource &&
      (this.__glVertexSource =
        "attribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\t\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\t\t\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\t\n\t\tvoid main(void) {\n\t\t\t\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\t\t\n\t\tif (openfl_HasColorTransform) {\n\t\t\t\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\t\t\t\n\t\t}\n\t\t\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\t\n\t\t}");
    Rc.call(this, a);
    this.__isGenerated = !0;
    this.__initGL();
  };
  l["openfl.display.GraphicsShader"] = Rh;
  Rh.__name__ = ["openfl", "display", "GraphicsShader"];
  Rh.__super__ = Rc;
  Rh.prototype = v(Rc.prototype, {
    openfl_Alpha: null,
    openfl_ColorMultiplier: null,
    openfl_ColorOffset: null,
    openfl_Position: null,
    openfl_TextureCoord: null,
    openfl_Matrix: null,
    openfl_HasColorTransform: null,
    openfl_TextureSize: null,
    bitmap: null,
    __class__: Rh,
  });
  var $k = {};
  l["openfl.display._JointStyle.JointStyle_Impl_"] = $k;
  $k.__name__ = ["openfl", "display", "_JointStyle", "JointStyle_Impl_"];
  $k.toString = function (a) {
    switch (a) {
      case 0:
        return "bevel";
      case 1:
        return "miter";
      case 2:
        return "round";
      default:
        return null;
    }
  };
  var Uj = function () {
    Lb.call(this);
    this.contentLoaderInfo = of.create(this);
    this.uncaughtErrorEvents = this.contentLoaderInfo.uncaughtErrorEvents;
  };
  l["openfl.display.Loader"] = Uj;
  Uj.__name__ = ["openfl", "display", "Loader"];
  Uj.__super__ = Lb;
  Uj.prototype = v(Lb.prototype, {
    contentLoaderInfo: null,
    uncaughtErrorEvents: null,
    __class__: Uj,
  });
  var of = function () {
    ea.call(this);
    this.applicationDomain = Rd.currentDomain;
    this.bytesTotal = this.bytesLoaded = 0;
    this.childAllowsParent = !0;
    this.parameters = {};
  };
  l["openfl.display.LoaderInfo"] = of;
  of.__name__ = ["openfl", "display", "LoaderInfo"];
  of.create = function (a) {
    var b = new of();
    b.uncaughtErrorEvents = new Sh();
    null != a ? (b.loader = a) : (b.url = of.__rootURL);
    return b;
  };
  of.__super__ = ea;
  of.prototype = v(ea.prototype, {
    applicationDomain: null,
    bytesLoaded: null,
    bytesTotal: null,
    childAllowsParent: null,
    content: null,
    loader: null,
    parameters: null,
    uncaughtErrorEvents: null,
    url: null,
    __completed: null,
    __complete: function () {
      this.__completed ||
        (this.bytesLoaded < this.bytesTotal &&
          (this.bytesLoaded = this.bytesTotal),
        this.__update(this.bytesLoaded, this.bytesTotal),
        (this.__completed = !0),
        this.dispatchEvent(new X("complete")));
    },
    __update: function (a, b) {
      this.bytesLoaded = a;
      this.bytesTotal = b;
      this.dispatchEvent(new gg("progress", !1, !1, a, b));
    },
    __class__: of,
  });
  var Gc = function () {
    wa.call(this);
    this.__currentFrame = 1;
    this.__currentLabels = [];
    this.__totalFrames = 0;
    this.enabled = !0;
    null != Gc.__initSymbol &&
      ((this.__swf = Gc.__initSWF),
      (this.__symbol = Gc.__initSymbol),
      (Gc.__initSWF = null),
      (Gc.__initSymbol = null),
      this.__fromSymbol(this.__swf, this.__symbol));
  };
  l["openfl.display.MovieClip"] = Gc;
  Gc.__name__ = ["openfl", "display", "MovieClip"];
  Gc.__super__ = wa;
  Gc.prototype = v(wa.prototype, {
    enabled: null,
    __activeInstances: null,
    __activeInstancesByFrameObjectID: null,
    __currentFrame: null,
    __currentFrameLabel: null,
    __currentLabel: null,
    __currentLabels: null,
    __frameScripts: null,
    __frameTime: null,
    __hasDown: null,
    __hasOver: null,
    __hasUp: null,
    __lastFrameScriptEval: null,
    __lastFrameUpdate: null,
    __mouseIsDown: null,
    __playing: null,
    __swf: null,
    __symbol: null,
    __timeElapsed: null,
    __totalFrames: null,
    gotoAndPlay: function (a, b) {
      this.play();
      this.__goto(this.__resolveFrameReference(a));
    },
    gotoAndStop: function (a, b) {
      this.stop();
      this.__goto(this.__resolveFrameReference(a));
    },
    play: function () {
      null == this.__symbol ||
        this.__playing ||
        2 > this.__totalFrames ||
        ((this.__playing = !0),
        (this.__frameTime = u["int"](1e3 / this.__swf.frameRate)),
        (this.__timeElapsed = 0));
    },
    stop: function () {
      this.__playing = !1;
    },
    __enterFrame: function (a) {
      if (null != this.__symbol && this.__playing) {
        var b = this.__getNextFrame(a);
        if (this.__lastFrameScriptEval == b) {
          wa.prototype.__enterFrame.call(this, a);
          return;
        }
        if (null != this.__frameScripts) {
          if (b < this.__currentFrame) {
            if (!this.__evaluateFrameScripts(this.__totalFrames)) {
              wa.prototype.__enterFrame.call(this, a);
              return;
            }
            this.__currentFrame = 1;
          }
          if (!this.__evaluateFrameScripts(b)) {
            wa.prototype.__enterFrame.call(this, a);
            return;
          }
        } else this.__currentFrame = b;
      }
      if (
        null != this.__symbol &&
        this.__currentFrame != this.__lastFrameUpdate
      ) {
        this.__updateFrameLabel();
        var c = new mb();
        b = 0;
        for (var d = this.__currentFrame; b < d; ) {
          var e = b++;
          e = this.__symbol.frames[e];
          if (null != e.objects)
            for (var f = 0, g = e.objects; f < g.length; ) {
              var h = g[f];
              ++f;
              switch (I.enumIndex(h.type)) {
                case 0:
                  e = this.__activeInstancesByFrameObjectID.get(h.id);
                  null != e &&
                    (c.set(h.id, e),
                    this.__updateDisplayObject(e.displayObject, h, !0));
                  break;
                case 1:
                  e = c.get(h.id);
                  null != e &&
                    null != e.displayObject &&
                    this.__updateDisplayObject(e.displayObject, h);
                  break;
                case 2:
                  c.remove(h.id);
              }
            }
        }
        b = [];
        d = [];
        for (e = c.iterator(); e.hasNext(); )
          (c = e.next()),
            -1 == b.indexOf(c) && (b.push(c), 0 < c.clipDepth && d.push(c));
        b.sort(m(this, this.__sortDepths));
        f = 0;
        for (g = b.length; f < g; ) {
          h = f++;
          var n = this.__children[h];
          e = b[h];
          c = e.depth;
          var p = e.displayObject;
          n != p ? ((e = p), this.addChildAt(p, h)) : (e = this.__children[h]);
          h = !1;
          for (n = 0; n < d.length; )
            if (((p = d[n]), ++n, c > p.depth && c <= p.clipDepth)) {
              e.set_mask(p.displayObject);
              h = !0;
              break;
            }
          0 < d.length && !h && null != e.get_mask() && e.set_mask(null);
        }
        d = b.length;
        for (e = this.__children.length; d < e; ) {
          b = this.__children[d];
          c = 0;
          for (f = this.__activeInstances; c < f.length; )
            (g = f[c]),
              ++c,
              g.displayObject == b &&
                (u.is(b, Gc) && b.gotoAndPlay(1),
                this.removeChild(b),
                --d,
                --e);
          ++d;
        }
        this.__lastFrameUpdate = this.__currentFrame;
      }
      wa.prototype.__enterFrame.call(this, a);
    },
    __evaluateFrameScripts: function (a) {
      var b = this.__currentFrame;
      for (a += 1; b < a; ) {
        var c = b++;
        if (c != this.__lastFrameScriptEval) {
          this.__currentFrame = this.__lastFrameScriptEval = c;
          if (
            this.__frameScripts.exists(c) &&
            (this.__frameScripts.get(c)(), this.__currentFrame != c)
          )
            return !1;
          if (!this.__playing) break;
        }
      }
      return !0;
    },
    __fromSymbol: function (a, b) {
      var c = this;
      if (null == this.__activeInstances) {
        this.__swf = a;
        this.__symbol = b;
        this.__activeInstances = [];
        this.__activeInstancesByFrameObjectID = new mb();
        this.__currentFrame = 1;
        this.__lastFrameUpdate = this.__lastFrameScriptEval = -1;
        this.__totalFrames = this.__symbol.frames.length;
        for (var d = 0, e = this.__symbol.frames.length; d < e; ) {
          var f = d++;
          a = f + 1;
          b = this.__symbol.frames[f];
          null != b.label && this.__currentLabels.push(new Qh(b.label, f + 1));
          if (null != b.script)
            null == this.__frameScripts && (this.__frameScripts = new mb()),
              this.__frameScripts.set(a, b.script);
          else if (null != b.scriptSource) {
            null == this.__frameScripts && (this.__frameScripts = new mb());
            try {
              var g = (function (a) {
                return function () {
                  try {
                    a[0].call(c);
                  } catch (xg) {
                    (ta.lastException = xg),
                      xg instanceof G && (xg = xg.val),
                      ca.trace(
                        "Error evaluating frame script\n " +
                          u.string(xg) +
                          "\n" +
                          ta
                            .exceptionStack()
                            .map(
                              (function () {
                                return function (a) {
                                  return a[2];
                                };
                              })()
                            )
                            .join("\n") +
                          "\n" +
                          u.string(xg.stack) +
                          "\n" +
                          a[0].toString(),
                        {
                          fileName: "MovieClip.hx",
                          lineNumber: 699,
                          className: "openfl.display.MovieClip",
                          methodName: "__fromSymbol",
                        }
                      );
                  }
                };
              })([eval("(function(){" + b.scriptSource + "})")]);
              this.__frameScripts.set(a, g);
            } catch (Hl) {
              (ta.lastException = Hl),
                null != this.__symbol.className
                  ? xa.warn(
                      'Unable to evaluate frame script source for symbol "' +
                        this.__symbol.className +
                        '" frame ' +
                        a +
                        "\n" +
                        b.scriptSource,
                      {
                        fileName: "MovieClip.hx",
                        lineNumber: 715,
                        className: "openfl.display.MovieClip",
                        methodName: "__fromSymbol",
                      }
                    )
                  : xa.warn(
                      "Unable to evaluate frame script source:\n" +
                        b.scriptSource,
                      {
                        fileName: "MovieClip.hx",
                        lineNumber: 719,
                        className: "openfl.display.MovieClip",
                        methodName: "__fromSymbol",
                      }
                    );
            }
          }
        }
        a = 0;
        for (b = this.__totalFrames; a < b; )
          if (
            ((d = a++),
            (g = d + 1),
            (e = this.__symbol.frames[d]),
            null != e.objects)
          ) {
            d = 0;
            for (var h = e.objects; d < h.length; ) {
              var n = h[d];
              ++d;
              if (
                n.type == qe.CREATE &&
                !this.__activeInstancesByFrameObjectID.exists(n.id)
              ) {
                e = null;
                f = !1;
                var p = 0;
                for (var k = this.__activeInstances; p < k.length; ) {
                  var l = k[p];
                  ++p;
                  if (
                    null != l.displayObject &&
                    l.characterID == n.symbol &&
                    l.depth == n.depth
                  ) {
                    e = l;
                    f = !0;
                    break;
                  }
                }
                null == e &&
                  ((p = this.__swf.symbols.get(n.symbol)),
                  null != p &&
                    ((p = p.__createObject(this.__swf)),
                    null != p &&
                      ((p.parent = this),
                      (p.stage = this.stage),
                      null != this.stage &&
                        p.dispatchEvent(new X("addedToStage", !1, !1)),
                      (e = new Vj(
                        g,
                        n.id,
                        n.symbol,
                        n.depth,
                        p,
                        n.clipDepth
                      )))));
                null != e &&
                  (this.__activeInstancesByFrameObjectID.set(n.id, e),
                  f ||
                    (this.__activeInstances.push(e),
                    this.__updateDisplayObject(e.displayObject, n)));
              }
            }
          }
        1 < this.__totalFrames && this.play();
        this.__enterFrame(0);
        g = 0;
        for (a = I.getInstanceFields(I.getClass(this)); g < a.length; )
          for (b = a[g], ++g, d = 0, e = this.__children; d < e.length; )
            (f = e[d]), ++d, f.get_name() == b && A.setField(this, b, f);
      }
    },
    __getNextFrame: function (a) {
      this.__timeElapsed += a;
      a =
        this.__currentFrame + Math.floor(this.__timeElapsed / this.__frameTime);
      1 > a && (a = 1);
      a > this.__totalFrames &&
        (a = Math.floor((a - 1) % this.__totalFrames) + 1);
      this.__timeElapsed %= this.__frameTime;
      return a;
    },
    __goto: function (a) {
      null != this.__symbol &&
        (1 > a ? (a = 1) : a > this.__totalFrames && (a = this.__totalFrames),
        (this.__currentFrame = a),
        this.__enterFrame(0));
    },
    __resolveFrameReference: function (a) {
      if ("number" == typeof a && (a | 0) === a) return a;
      if ("string" == typeof a) {
        for (var b = 0, c = this.__currentLabels; b < c.length; ) {
          var d = c[b];
          ++b;
          if (d.get_name() == a) return d.get_frame();
        }
        throw new G(
          new pg("Error #2109: Frame label " + a + " not found in scene.")
        );
      }
      throw new G("Invalid type for frame " + I.getClassName(a));
    },
    __sortDepths: function (a, b) {
      return a.depth - b.depth;
    },
    __updateDisplayObject: function (a, b, c) {
      null == c && (c = !1);
      if (null != a) {
        null != b.name && a.set_name(b.name);
        null != b.matrix && a.get_transform().set_matrix(b.matrix);
        null != b.colorTransform
          ? a.get_transform().set_colorTransform(b.colorTransform)
          : c &&
            !a.get_transform().get_colorTransform().__isDefault() &&
            a.get_transform().set_colorTransform(new Ka());
        if (null != b.filters) {
          c = [];
          for (var d = 0, e = b.filters; d < e.length; ) {
            var f = e[d];
            ++d;
            switch (I.enumIndex(f)) {
              case 0:
                c.push(new Qe(f[2], f[3], f[4]));
                break;
              case 1:
                c.push(new xd(f[2]));
                break;
              case 2:
                c.push(
                  new Th(
                    f[2],
                    f[3],
                    f[4],
                    f[5],
                    f[6],
                    f[7],
                    f[8],
                    f[9],
                    f[10],
                    f[11],
                    f[12]
                  )
                );
                break;
              case 3:
                c.push(new Sc(f[2], f[3], f[4], f[5], f[6], f[7], f[8], f[9]));
            }
          }
          a.set_filters(c);
        } else a.set_filters(null);
        null != b.visible && a.set_visible(b.visible);
        null != b.blendMode && a.set_blendMode(b.blendMode);
      }
    },
    __updateFrameLabel: function () {
      this.__currentFrameLabel =
        this.__symbol.frames[this.__currentFrame - 1].label;
      if (null != this.__currentFrameLabel)
        this.__currentLabel = this.__currentFrameLabel;
      else {
        this.__currentLabel = null;
        for (var a = 0, b = this.__currentLabels; a < b.length; ) {
          var c = b[a];
          ++a;
          if (c.get_frame() < this.__currentFrame)
            this.__currentLabel = c.get_name();
          else break;
        }
      }
    },
    __onMouseDown: function (a) {
      this.__hasDown && this.gotoAndStop("_down");
      this.__mouseIsDown = !0;
      this.stage.addEventListener("mouseUp", m(this, this.__onMouseUp));
    },
    __onMouseUp: function (a) {
      this.__mouseIsDown = !1;
      null != this.stage &&
        this.stage.removeEventListener("mouseUp", m(this, this.__onMouseUp));
      a.currentTarget == this && this.__hasOver
        ? this.gotoAndStop("_over")
        : this.__hasUp && this.gotoAndStop("_up");
    },
    __onRollOut: function (a) {
      this.__mouseIsDown && this.__hasOver
        ? this.gotoAndStop("_over")
        : this.__hasUp && this.gotoAndStop("_up");
    },
    __onRollOver: function (a) {
      this.__hasOver && this.gotoAndStop("_over");
    },
    set_buttonMode: function (a) {
      if (this.__buttonMode != a) {
        if (a) {
          this.__hasUp = this.__hasOver = this.__hasDown = !1;
          for (var b = 0, c = this.__currentLabels; b < c.length; ) {
            var d = c[b];
            ++b;
            switch (d.get_name()) {
              case "_down":
                this.__hasDown = !0;
                break;
              case "_over":
                this.__hasOver = !0;
                break;
              case "_up":
                this.__hasUp = !0;
            }
          }
          if (this.__hasDown || this.__hasOver || this.__hasUp)
            this.addEventListener("rollOver", m(this, this.__onRollOver)),
              this.addEventListener("rollOut", m(this, this.__onRollOut)),
              this.addEventListener("mouseUp", m(this, this.__onMouseUp)),
              this.addEventListener("mouseDown", m(this, this.__onMouseDown));
        } else
          this.removeEventListener("rollOver", m(this, this.__onRollOver)),
            this.removeEventListener("rollOut", m(this, this.__onRollOut)),
            this.removeEventListener("mouseUp", m(this, this.__onMouseUp)),
            this.removeEventListener("mouseDown", m(this, this.__onMouseDown));
        this.__buttonMode = a;
      }
      return a;
    },
    __class__: Gc,
  });
  var Vj = function (a, b, c, d, e, f) {
    this.initFrame = a;
    this.initFrameObjectID = b;
    this.characterID = c;
    this.depth = d;
    this.displayObject = e;
    this.clipDepth = f;
  };
  l["openfl.display._MovieClip.FrameSymbolInstance"] = Vj;
  Vj.__name__ = ["openfl", "display", "_MovieClip", "FrameSymbolInstance"];
  Vj.prototype = {
    characterID: null,
    clipDepth: null,
    depth: null,
    displayObject: null,
    initFrame: null,
    initFrameObjectID: null,
    __class__: Vj,
  };
  var fa = function (a, b) {
    Jc.call(this);
    this.__context3D = a;
    this.__context = a.__context;
    this.__gl = this.gl = a.__context.webgl;
    this.__defaultRenderTarget = b;
    this.__flipped = null == this.__defaultRenderTarget;
    null == zc.maxTextureWidth &&
      (zc.maxTextureWidth = zc.maxTextureHeight =
        this.__gl.getParameter(this.__gl.MAX_TEXTURE_SIZE));
    this.__matrix = Na._new();
    this.__values = [];
    this.__softwareRenderer = new Ce(null);
    this.__type = "opengl";
    this.__setBlendMode(10);
    this.__context3D.__setGLBlend(!0);
    this.__clipRects = [];
    this.__maskObjects = [];
    this.__numClipRects = 0;
    this.__projection = Na._new();
    this.__projectionFlipped = Na._new();
    this.__stencilReference = 0;
    this.__tempRect = new Z();
    this.__defaultDisplayShader = new Ph();
    this.__defaultGraphicsShader = new Rh();
    this.__defaultShader = this.__defaultDisplayShader;
    this.__initShader(this.__defaultShader);
    this.__scrollRectMasks = new Be(function () {
      return new eg();
    });
    this.__maskShader = new Cf();
  };
  l["openfl.display.OpenGLRenderer"] = fa;
  fa.__name__ = ["openfl", "display", "OpenGLRenderer"];
  fa.__super__ = Jc;
  fa.prototype = v(Jc.prototype, {
    gl: null,
    __context3D: null,
    __clipRects: null,
    __currentDisplayShader: null,
    __currentGraphicsShader: null,
    __currentShader: null,
    __currentShaderBuffer: null,
    __defaultDisplayShader: null,
    __defaultGraphicsShader: null,
    __defaultRenderTarget: null,
    __defaultShader: null,
    __displayHeight: null,
    __displayWidth: null,
    __flipped: null,
    __gl: null,
    __height: null,
    __maskShader: null,
    __matrix: null,
    __maskObjects: null,
    __numClipRects: null,
    __offsetX: null,
    __offsetY: null,
    __projection: null,
    __projectionFlipped: null,
    __scrollRectMasks: null,
    __softwareRenderer: null,
    __stencilReference: null,
    __tempRect: null,
    __updatedStencil: null,
    __upscaled: null,
    __values: null,
    __width: null,
    applyAlpha: function (a) {
      fa.__alphaValue[0] = a;
      null != this.__currentShaderBuffer
        ? this.__currentShaderBuffer.addOverride(
            "openfl_Alpha",
            fa.__alphaValue
          )
        : null != this.__currentShader &&
          null != this.__currentShader.__alpha &&
          (this.__currentShader.__alpha.value = fa.__alphaValue);
    },
    applyBitmapData: function (a, b, c) {
      null == c && (c = !1);
      null != this.__currentShaderBuffer
        ? null != a &&
          ((fa.__textureSizeValue[0] = a.__textureWidth),
          (fa.__textureSizeValue[1] = a.__textureHeight),
          this.__currentShaderBuffer.addOverride(
            "openfl_TextureSize",
            fa.__textureSizeValue
          ))
        : null != this.__currentShader &&
          (null != this.__currentShader.__bitmap &&
            ((this.__currentShader.__bitmap.input = a),
            (this.__currentShader.__bitmap.filter = b ? 4 : 5),
            (this.__currentShader.__bitmap.mipFilter = 2),
            (this.__currentShader.__bitmap.wrap = c ? 2 : 0)),
          null != this.__currentShader.__texture &&
            ((this.__currentShader.__texture.input = a),
            (this.__currentShader.__texture.filter = b ? 4 : 5),
            (this.__currentShader.__texture.mipFilter = 2),
            (this.__currentShader.__texture.wrap = c ? 2 : 0)),
          null != this.__currentShader.__textureSize &&
            (null != a
              ? ((fa.__textureSizeValue[0] = a.__textureWidth),
                (fa.__textureSizeValue[1] = a.__textureHeight),
                (this.__currentShader.__textureSize.value =
                  fa.__textureSizeValue))
              : (this.__currentShader.__textureSize.value = null)));
    },
    applyColorTransform: function (a) {
      var b = null != a && !a.__isDefault();
      this.applyHasColorTransform(b);
      b
        ? (a.__setArrays(fa.__colorMultipliersValue, fa.__colorOffsetsValue),
          null != this.__currentShaderBuffer
            ? (this.__currentShaderBuffer.addOverride(
                "openfl_ColorMultiplier",
                fa.__colorMultipliersValue
              ),
              this.__currentShaderBuffer.addOverride(
                "openfl_ColorOffset",
                fa.__colorOffsetsValue
              ))
            : null != this.__currentShader &&
              (null != this.__currentShader.__colorMultiplier &&
                (this.__currentShader.__colorMultiplier.value =
                  fa.__colorMultipliersValue),
              null != this.__currentShader.__colorOffset &&
                (this.__currentShader.__colorOffset.value =
                  fa.__colorOffsetsValue)))
        : null != this.__currentShaderBuffer
        ? (this.__currentShaderBuffer.addOverride(
            "openfl_ColorMultiplier",
            fa.__emptyColorValue
          ),
          this.__currentShaderBuffer.addOverride(
            "openfl_ColorOffset",
            fa.__emptyColorValue
          ))
        : null != this.__currentShader &&
          (null != this.__currentShader.__colorMultiplier &&
            (this.__currentShader.__colorMultiplier.value =
              fa.__emptyColorValue),
          null != this.__currentShader.__colorOffset &&
            (this.__currentShader.__colorOffset.value = fa.__emptyColorValue));
    },
    applyHasColorTransform: function (a) {
      fa.__hasColorTransformValue[0] = a;
      null != this.__currentShaderBuffer
        ? this.__currentShaderBuffer.addOverride(
            "openfl_HasColorTransform",
            fa.__hasColorTransformValue
          )
        : null != this.__currentShader &&
          null != this.__currentShader.__hasColorTransform &&
          (this.__currentShader.__hasColorTransform.value =
            fa.__hasColorTransformValue);
    },
    applyMatrix: function (a) {
      null != this.__currentShaderBuffer
        ? this.__currentShaderBuffer.addOverride("openfl_Matrix", a)
        : null != this.__currentShader &&
          null != this.__currentShader.__matrix &&
          (this.__currentShader.__matrix.value = a);
    },
    setShader: function (a) {
      this.__currentShaderBuffer = null;
      this.__currentShader != a &&
        (null == a
          ? ((this.__currentShader = null), this.__context3D.setProgram(null))
          : ((this.__currentShader = a),
            this.__initShader(a),
            this.__context3D.setProgram(a.program),
            this.__context3D.__flushGLProgram(),
            this.__currentShader.__enable(),
            (this.__context3D.__state.shader = a)));
    },
    setViewport: function () {
      this.__gl.viewport(
        this.__offsetX,
        this.__offsetY,
        this.__displayWidth,
        this.__displayHeight
      );
    },
    updateShader: function () {
      null != this.__currentShader &&
        (null != this.__currentShader.__position &&
          (this.__currentShader.__position.__useArray = !0),
        null != this.__currentShader.__textureCoord &&
          (this.__currentShader.__textureCoord.__useArray = !0),
        this.__context3D.setProgram(this.__currentShader.program),
        this.__context3D.__flushGLProgram(),
        this.__context3D.__flushGLTextures(),
        this.__currentShader.__update());
    },
    __clear: function () {
      null == this.__stage || this.__stage.__transparent
        ? this.__context3D.clear(0, 0, 0, 0, 0, 0, 1)
        : this.__context3D.clear(
            this.__stage.__colorSplit[0],
            this.__stage.__colorSplit[1],
            this.__stage.__colorSplit[2],
            1,
            0,
            0,
            1
          );
      this.__cleared = !0;
    },
    __clearShader: function () {
      null != this.__currentShader &&
        (null == this.__currentShaderBuffer
          ? null != this.__currentShader.__bitmap &&
            (this.__currentShader.__bitmap.input = null)
          : this.__currentShaderBuffer.clearOverride(),
        null != this.__currentShader.__texture &&
          (this.__currentShader.__texture.input = null),
        null != this.__currentShader.__textureSize &&
          (this.__currentShader.__textureSize.value = null),
        null != this.__currentShader.__hasColorTransform &&
          (this.__currentShader.__hasColorTransform.value = null),
        null != this.__currentShader.__position &&
          (this.__currentShader.__position.value = null),
        null != this.__currentShader.__matrix &&
          (this.__currentShader.__matrix.value = null),
        this.__currentShader.__clearUseArray());
    },
    __copyShader: function (a) {
      this.__currentShader = a.__currentShader;
      this.__currentShaderBuffer = a.__currentShaderBuffer;
      this.__currentDisplayShader = a.__currentDisplayShader;
      this.__currentGraphicsShader = a.__currentGraphicsShader;
    },
    __getMatrix: function (a, b) {
      var c = ia.__pool.get();
      c.copyFrom(a);
      c.concat(this.__worldTransform);
      if (
        0 == b ||
        (1 == b &&
          0 == c.b &&
          0 == c.c &&
          1.001 > c.a &&
          0.999 < c.a &&
          1.001 > c.d &&
          0.999 < c.d)
      )
        (c.tx = Math.round(c.tx)), (c.ty = Math.round(c.ty));
      Na.identity(this.__matrix);
      Na.set(this.__matrix, 0, c.a);
      Na.set(this.__matrix, 1, c.b);
      Na.set(this.__matrix, 4, c.c);
      Na.set(this.__matrix, 5, c.d);
      Na.set(this.__matrix, 12, c.tx);
      Na.set(this.__matrix, 13, c.ty);
      Na.append(
        this.__matrix,
        this.__flipped ? this.__projectionFlipped : this.__projection
      );
      for (a = 0; 16 > a; )
        (b = a++), (this.__values[b] = Na.get(this.__matrix, b));
      ia.__pool.release(c);
      return this.__values;
    },
    __initShader: function (a) {
      return null != a
        ? (null == a.__context &&
            ((a.__context = this.__context3D), a.__init()),
          a)
        : this.__defaultShader;
    },
    __initDisplayShader: function (a) {
      return null != a
        ? (null == a.__context &&
            ((a.__context = this.__context3D), a.__init()),
          a)
        : this.__defaultDisplayShader;
    },
    __initGraphicsShader: function (a) {
      return null != a
        ? (null == a.__context &&
            ((a.__context = this.__context3D), a.__init()),
          a)
        : this.__defaultGraphicsShader;
    },
    __initShaderBuffer: function (a) {
      return null != a
        ? this.__initGraphicsShader(a.shader)
        : this.__defaultGraphicsShader;
    },
    __popMask: function () {
      if (0 != this.__stencilReference) {
        var a = this.__maskObjects.pop();
        1 < this.__stencilReference
          ? (this.__context3D.setStencilActions(2, 1, 0, 0, 5),
            this.__context3D.setStencilReferenceValue(
              this.__stencilReference,
              255,
              255
            ),
            this.__context3D.setColorMask(!1, !1, !1, !1),
            a.__renderGLMask(this),
            this.__stencilReference--,
            this.__context3D.setStencilActions(2, 1, 5, 5, 5),
            this.__context3D.setStencilReferenceValue(
              this.__stencilReference,
              255,
              0
            ),
            this.__context3D.setColorMask(!0, !0, !0, !0))
          : ((this.__stencilReference = 0),
            this.__context3D.setStencilActions(),
            this.__context3D.setStencilReferenceValue(0, 0, 0));
      }
    },
    __popMaskObject: function (a, b) {
      null == b && (b = !0);
      null != a.__mask && this.__popMask();
      b &&
        null != a.__scrollRect &&
        (0 != a.__renderTransform.b || 0 != a.__renderTransform.c
          ? (this.__scrollRectMasks.release(
              this.__maskObjects[this.__maskObjects.length - 1]
            ),
            this.__popMask())
          : this.__popMaskRect());
    },
    __popMaskRect: function () {
      0 < this.__numClipRects &&
        (this.__numClipRects--,
        0 < this.__numClipRects
          ? this.__scissorRect(this.__clipRects[this.__numClipRects - 1])
          : this.__scissorRect());
    },
    __pushMask: function (a) {
      0 == this.__stencilReference &&
        (this.__context3D.clear(0, 0, 0, 0, 0, 0, 4),
        (this.__updatedStencil = !0));
      this.__context3D.setStencilActions(2, 1, 2, 5, 5);
      this.__context3D.setStencilReferenceValue(
        this.__stencilReference,
        255,
        255
      );
      this.__context3D.setColorMask(!1, !1, !1, !1);
      a.__renderGLMask(this);
      this.__maskObjects.push(a);
      this.__stencilReference++;
      this.__context3D.setStencilActions(2, 1, 5, 5, 5);
      this.__context3D.setStencilReferenceValue(
        this.__stencilReference,
        255,
        0
      );
      this.__context3D.setColorMask(!0, !0, !0, !0);
    },
    __pushMaskObject: function (a, b) {
      null == b && (b = !0);
      b &&
        null != a.__scrollRect &&
        (0 != a.__renderTransform.b || 0 != a.__renderTransform.c
          ? ((b = this.__scrollRectMasks.get()),
            b.get_graphics().clear(),
            b.get_graphics().beginFill(65280),
            b
              .get_graphics()
              .drawRect(
                a.__scrollRect.x,
                a.__scrollRect.y,
                a.__scrollRect.width,
                a.__scrollRect.height
              ),
            b.__renderTransform.copyFrom(a.__renderTransform),
            this.__pushMask(b))
          : this.__pushMaskRect(a.__scrollRect, a.__renderTransform));
      null != a.__mask && this.__pushMask(a.__mask);
    },
    __pushMaskRect: function (a, b) {
      this.__numClipRects == this.__clipRects.length &&
        (this.__clipRects[this.__numClipRects] = new Z());
      var c = ia.__pool.get();
      c.copyFrom(b);
      c.concat(this.__worldTransform);
      b = this.__clipRects[this.__numClipRects];
      a.__transform(b, c);
      0 < this.__numClipRects &&
        ((a = this.__clipRects[this.__numClipRects - 1]),
        b.__contract(a.x, a.y, a.width, a.height));
      0 > b.height && (b.height = 0);
      0 > b.width && (b.width = 0);
      ia.__pool.release(c);
      this.__scissorRect(b);
      this.__numClipRects++;
    },
    __render: function (a) {
      this.__context3D.setColorMask(!0, !0, !0, !0);
      this.__context3D.setCulling(3);
      this.__context3D.setDepthTest(!1, 0);
      this.__context3D.setStencilActions();
      this.__context3D.setStencilReferenceValue(0, 0, 0);
      this.__context3D.setScissorRectangle(null);
      this.__blendMode = null;
      this.__setBlendMode(10);
      if (null == this.__defaultRenderTarget) {
        if (
          (this.__gl.viewport(
            this.__offsetX,
            this.__offsetY,
            this.__displayWidth,
            this.__displayHeight
          ),
          (this.__upscaled =
            1 != this.__worldTransform.a || 1 != this.__worldTransform.d),
          a.__renderGL(this),
          0 < this.__offsetX || 0 < this.__offsetY)
        )
          0 < this.__offsetX &&
            (fa.__scissorRectangle.setTo(0, 0, this.__offsetX, this.__height),
            this.__context3D.setScissorRectangle(fa.__scissorRectangle),
            this.__context3D.clear(0, 0, 0, 1, 0, 0, 1),
            fa.__scissorRectangle.setTo(
              this.__offsetX + this.__displayWidth,
              0,
              this.__width,
              this.__height
            ),
            this.__context3D.setScissorRectangle(fa.__scissorRectangle),
            this.__context3D.clear(0, 0, 0, 1, 0, 0, 1)),
            0 < this.__offsetY &&
              (fa.__scissorRectangle.setTo(0, 0, this.__width, this.__offsetY),
              this.__context3D.setScissorRectangle(fa.__scissorRectangle),
              this.__context3D.clear(0, 0, 0, 1, 0, 0, 1),
              fa.__scissorRectangle.setTo(
                0,
                this.__offsetY + this.__displayHeight,
                this.__width,
                this.__height
              ),
              this.__context3D.setScissorRectangle(fa.__scissorRectangle),
              this.__context3D.clear(0, 0, 0, 1, 0, 0, 1)),
            this.__context3D.setScissorRectangle(null);
      } else {
        this.__gl.viewport(
          this.__offsetX,
          this.__offsetY,
          this.__displayWidth,
          this.__displayHeight
        );
        var b = a.__mask,
          c = a.__scrollRect;
        a.__mask = null;
        a.__scrollRect = null;
        a.__renderGL(this);
        a.__mask = b;
        a.__scrollRect = c;
      }
      this.__context3D.present();
    },
    __renderFilterPass: function (a, b, c, d) {
      null == d && (d = !0);
      if (null != a && null != b && null != this.__defaultRenderTarget) {
        var e = this.__context3D.__state.renderToTexture,
          f = this.__context3D.__state.renderToTextureDepthStencil,
          g = this.__context3D.__state.renderToTextureAntiAlias,
          h = this.__context3D.__state.renderToTextureSurfaceSelector;
        this.__context3D.setRenderToTexture(
          this.__defaultRenderTarget.getTexture(this.__context3D),
          !1
        );
        d && this.__context3D.clear(0, 0, 0, 0, 0, 0, 1);
        b = this.__initShader(b);
        this.setShader(b);
        this.applyAlpha(1);
        this.applyBitmapData(a, c);
        this.applyColorTransform(null);
        this.applyMatrix(this.__getMatrix(a.__renderTransform, 1));
        this.updateShader();
        c = a.getVertexBuffer(this.__context3D);
        null != b.__position &&
          this.__context3D.setVertexBufferAt(b.__position.index, c, 0, 3);
        null != b.__textureCoord &&
          this.__context3D.setVertexBufferAt(b.__textureCoord.index, c, 3, 2);
        a = a.getIndexBuffer(this.__context3D);
        this.__context3D.drawTriangles(a);
        null != e
          ? this.__context3D.setRenderToTexture(e, f, g, h)
          : this.__context3D.setRenderToBackBuffer();
        this.__clearShader();
      }
    },
    __resize: function (a, b) {
      this.__width = a;
      this.__height = b;
      a =
        null == this.__defaultRenderTarget
          ? this.__stage.stageWidth
          : this.__defaultRenderTarget.width;
      b =
        null == this.__defaultRenderTarget
          ? this.__stage.stageHeight
          : this.__defaultRenderTarget.height;
      this.__offsetX =
        null == this.__defaultRenderTarget
          ? Math.round(this.__worldTransform.__transformX(0, 0))
          : 0;
      this.__offsetY =
        null == this.__defaultRenderTarget
          ? Math.round(this.__worldTransform.__transformY(0, 0))
          : 0;
      this.__displayWidth =
        null == this.__defaultRenderTarget
          ? Math.round(
              this.__worldTransform.__transformX(a, 0) - this.__offsetX
            )
          : a;
      this.__displayHeight =
        null == this.__defaultRenderTarget
          ? Math.round(
              this.__worldTransform.__transformY(0, b) - this.__offsetY
            )
          : b;
      Na.createOrtho(
        this.__projection,
        this.__offsetX,
        this.__displayWidth + this.__offsetX,
        this.__offsetY,
        this.__displayHeight + this.__offsetY,
        -1e3,
        1e3
      );
      Na.createOrtho(
        this.__projectionFlipped,
        this.__offsetX,
        this.__displayWidth + this.__offsetX,
        this.__displayHeight + this.__offsetY,
        this.__offsetY,
        -1e3,
        1e3
      );
    },
    __resumeClipAndMask: function (a) {
      0 < this.__stencilReference
        ? (this.__context3D.setStencilActions(2, 1, 5, 5, 5),
          this.__context3D.setStencilReferenceValue(
            this.__stencilReference,
            255,
            0
          ))
        : (this.__context3D.setStencilActions(),
          this.__context3D.setStencilReferenceValue(0, 0, 0));
      0 < this.__numClipRects
        ? this.__scissorRect(this.__clipRects[this.__numClipRects - 1])
        : this.__scissorRect();
    },
    __scissorRect: function (a) {
      if (null != a) {
        var b = Math.floor(a.x),
          c = Math.floor(a.y),
          d = 0 < a.width ? Math.ceil(a.get_right()) - b : 0;
        a = 0 < a.height ? Math.ceil(a.get_bottom()) - c : 0;
        0 > d && (d = 0);
        0 > a && (a = 0);
        fa.__scissorRectangle.setTo(b, c, d, a);
        this.__context3D.setScissorRectangle(fa.__scissorRectangle);
      } else this.__context3D.setScissorRectangle(null);
    },
    __setBlendMode: function (a) {
      null != this.__overrideBlendMode && (a = this.__overrideBlendMode);
      if (this.__blendMode != a)
        switch (((this.__blendMode = a), a)) {
          case 0:
            this.__context3D.setBlendFactors(2, 2);
            break;
          case 9:
            this.__context3D.setBlendFactors(1, 5);
            break;
          case 12:
            this.__context3D.setBlendFactors(2, 6);
            break;
          case 14:
            this.__context3D.setBlendFactors(2, 2);
            this.__context3D.__setGLBlendEquation(
              this.__gl.FUNC_REVERSE_SUBTRACT
            );
            break;
          default:
            this.__context3D.setBlendFactors(2, 5);
        }
    },
    __setRenderTarget: function (a) {
      this.__defaultRenderTarget = a;
      this.__flipped = null == a;
      null != a && this.__resize(a.width, a.height);
    },
    __setShaderBuffer: function (a) {
      this.setShader(a.shader);
      this.__currentShaderBuffer = a;
    },
    __suspendClipAndMask: function () {
      0 < this.__stencilReference &&
        (this.__context3D.setStencilActions(),
        this.__context3D.setStencilReferenceValue(0, 0, 0));
      0 < this.__numClipRects && this.__scissorRect();
    },
    __updateShaderBuffer: function (a) {
      null != this.__currentShader &&
        null != this.__currentShaderBuffer &&
        this.__currentShader.__updateFromBuffer(this.__currentShaderBuffer, a);
    },
    __class__: fa,
  });
  var ui = (F.openfl.display.Preloader = function (a) {
    this.onComplete = new fb();
    this.display = a;
    null != a &&
      (a.addEventListener("unload", m(this, this.display_onUnload)),
      N.get_current().addChild(a),
      Gamezy24SDK.gameLoadingStart(),
      ca.trace("start", {
        fileName: "Preloader.hx",
        lineNumber: 39,
        className: "openfl.display.Preloader",
        methodName: "new",
      }));
  });
  l["openfl.display.Preloader"] = ui;
  ui.__name__ = ["openfl", "display", "Preloader"];
  ui.prototype = {
    onComplete: null,
    complete: null,
    display: null,
    ready: null,
    start: function () {
      this.ready = !0;
      ca.trace("finish", {
        fileName: "Preloader.hx",
        lineNumber: 55,
        className: "openfl.display.Preloader",
        methodName: "start",
      });
      Gamezy24SDK.gameLoadingFinished();
      N.get_current().get_loaderInfo().__complete();
      if (null != this.display) {
        var a = new X("complete", !0, !0);
        this.display.dispatchEvent(a);
        a.isDefaultPrevented() || this.display.dispatchEvent(new X("unload"));
      } else
        this.complete || ((this.complete = !0), this.onComplete.dispatch());
    },
    update: function (a, b) {
      var c = {};
      c.percentageDone = a / b;
      Gamezy24SDK.gameLoadingProgress(c);
      N.get_current().get_loaderInfo().__update(a, b);
      null != this.display &&
        this.display.dispatchEvent(new gg("progress", !0, !0, a, b));
    },
    display_onUnload: function (a) {
      null != this.display &&
        (this.display.removeEventListener(
          "unload",
          m(this, this.display_onUnload)
        ),
        this.display.parent == N.get_current() &&
          N.get_current().removeChild(this.display),
        N.get_current().stage.set_focus(null),
        (this.display = null));
      this.ready &&
        !this.complete &&
        ((this.complete = !0), this.onComplete.dispatch());
    },
    __class__: ui,
  };
  var Tg = function () {
    wa.call(this);
    var a = this.getBackgroundColor(),
      b = 0;
    70 >
      0.299 * ((a >> 16) & 255) +
        0.587 * ((a >> 8) & 255) +
        0.114 * (a & 255) && (b = 16777215);
    a = this.getHeight() / 2 - 3.5;
    var c = this.getWidth() - 60;
    this.outline = new wa();
    this.outline.get_graphics().beginFill(b, 0.07);
    this.outline.get_graphics().drawRect(0, 0, c, 7);
    this.outline.set_x(30);
    this.outline.set_y(a);
    this.outline.set_alpha(0);
    this.addChild(this.outline);
    this.progress = new wa();
    this.progress.get_graphics().beginFill(b, 0.35);
    this.progress.get_graphics().drawRect(0, 0, c - 4, 3);
    this.progress.set_x(32);
    this.progress.set_y(a + 2);
    this.progress.set_scaleX(0);
    this.progress.set_alpha(0);
    this.addChild(this.progress);
    this.startAnimation = N.getTimer() + 100;
    this.endAnimation = this.startAnimation + 1e3;
    this.addEventListener("addedToStage", m(this, this.this_onAddedToStage));
  };
  l["openfl.display.DefaultPreloader"] = Tg;
  Tg.__name__ = ["openfl", "display", "DefaultPreloader"];
  Tg.__super__ = wa;
  Tg.prototype = v(wa.prototype, {
    endAnimation: null,
    outline: null,
    progress: null,
    startAnimation: null,
    getBackgroundColor: function () {
      var a = N.get_current().stage.window.context.attributes;
      return A.hasField(a, "background") && null != a.background
        ? a.background
        : 0;
    },
    getHeight: function () {
      var a = N.get_current().stage.window.get_height();
      return 0 < a ? a : N.get_current().stage.stageHeight;
    },
    getWidth: function () {
      var a = N.get_current().stage.window.get_width();
      return 0 < a ? a : N.get_current().stage.stageWidth;
    },
    onInit: function () {
      this.addEventListener("enterFrame", m(this, this.this_onEnterFrame));
    },
    onLoaded: function () {
      this.removeEventListener("enterFrame", m(this, this.this_onEnterFrame));
      this.dispatchEvent(new X("unload"));
    },
    onUpdate: function (a, b) {
      var c = 0;
      0 < b && ((c = a / b), 1 < c && (c = 1));
      this.progress.set_scaleX(c);
    },
    this_onAddedToStage: function (a) {
      this.removeEventListener(
        "addedToStage",
        m(this, this.this_onAddedToStage)
      );
      this.onInit();
      this.onUpdate(
        this.get_loaderInfo().bytesLoaded,
        this.get_loaderInfo().bytesTotal
      );
      this.addEventListener("progress", m(this, this.this_onProgress));
      this.addEventListener("complete", m(this, this.this_onComplete));
    },
    this_onComplete: function (a) {
      a.preventDefault();
      this.removeEventListener("progress", m(this, this.this_onProgress));
      this.removeEventListener("complete", m(this, this.this_onComplete));
      this.onLoaded();
    },
    this_onEnterFrame: function (a) {
      a =
        (N.getTimer() - this.startAnimation) /
        (this.endAnimation - this.startAnimation);
      0 > a && (a = 0);
      1 < a && (a = 1);
      this.outline.set_alpha(a);
      this.progress.set_alpha(a);
    },
    this_onProgress: function (a) {
      this.onUpdate(u["int"](a.bytesLoaded), u["int"](a.bytesTotal));
    },
    __class__: Tg,
  });
  var Kj = {};
  l["openfl.display._ShaderData.ShaderData_Impl_"] = Kj;
  Kj.__name__ = ["openfl", "display", "_ShaderData", "ShaderData_Impl_"];
  Kj._new = function (a) {
    return {};
  };
  var Lj = function () {
    this.channels = 0;
    this.filter = 5;
    this.index = this.height = 0;
    this.mipFilter = 2;
    this.wrap = this.width = 0;
  };
  l["openfl.display.ShaderInput"] = Lj;
  Lj.__name__ = ["openfl", "display", "ShaderInput"];
  Lj.prototype = {
    channels: null,
    filter: null,
    height: null,
    index: null,
    input: null,
    mipFilter: null,
    name: null,
    width: null,
    wrap: null,
    __isUniform: null,
    __disableGL: function (a, b) {
      a.setTextureAt(b, null);
    },
    __updateGL: function (a, b, c, d, e, f) {
      c = null != c ? c : this.input;
      d = null != d ? d : this.filter;
      e = null != e ? e : this.mipFilter;
      f = null != f ? f : this.wrap;
      null != c
        ? (a.setTextureAt(b, c.getTexture(a)), a.setSamplerStateAt(b, f, d, e))
        : a.setTextureAt(b, null);
    },
    __class__: Lj,
  };
  var Gg = function () {
    this.index = 0;
  };
  l["openfl.display.ShaderParameter"] = Gg;
  Gg.__name__ = ["openfl", "display", "ShaderParameter"];
  Gg.prototype = {
    index: null,
    name: null,
    type: null,
    value: null,
    __arrayLength: null,
    __isBool: null,
    __isFloat: null,
    __isInt: null,
    __isUniform: null,
    __length: null,
    __uniformMatrix: null,
    __useArray: null,
    __disableGL: function (a) {
      a = a.gl;
      if (!this.__isUniform)
        for (var b = 0, c = this.__arrayLength; b < c; ) {
          var d = b++;
          a.disableVertexAttribArray(this.index + d);
        }
    },
    __updateGL: function (a, b) {
      a = a.gl;
      var c = null != b ? b : this.value,
        d = this.__isBool ? c : null;
      b = this.__isFloat ? c : null;
      var e = this.__isInt ? c : null;
      if (this.__isUniform)
        if (null != c && c.length >= this.__length)
          switch (this.type) {
            case 0:
              a.uniform1i(this.index, d[0] ? 1 : 0);
              break;
            case 1:
              a.uniform2i(this.index, d[0] ? 1 : 0, d[1] ? 1 : 0);
              break;
            case 2:
              a.uniform3i(this.index, d[0] ? 1 : 0, d[1] ? 1 : 0, d[2] ? 1 : 0);
              break;
            case 3:
              a.uniform4i(
                this.index,
                d[0] ? 1 : 0,
                d[1] ? 1 : 0,
                d[2] ? 1 : 0,
                d[3] ? 1 : 0
              );
              break;
            case 4:
              a.uniform1f(this.index, b[0]);
              break;
            case 5:
              a.uniform2f(this.index, b[0], b[1]);
              break;
            case 6:
              a.uniform3f(this.index, b[0], b[1], b[2]);
              break;
            case 7:
              a.uniform4f(this.index, b[0], b[1], b[2], b[3]);
              break;
            case 8:
              a.uniform1i(this.index, e[0]);
              break;
            case 9:
              a.uniform2i(this.index, e[0], e[1]);
              break;
            case 10:
              a.uniform3i(this.index, e[0], e[1], e[2]);
              break;
            case 11:
              a.uniform4i(this.index, e[0], e[1], e[2], e[3]);
              break;
            case 12:
              for (c = 0; 4 > c; ) (d = c++), (this.__uniformMatrix[d] = b[d]);
              rb.uniformMatrix2fv(a, this.index, !1, this.__uniformMatrix);
              break;
            case 16:
              for (c = 0; 9 > c; ) (d = c++), (this.__uniformMatrix[d] = b[d]);
              rb.uniformMatrix3fv(a, this.index, !1, this.__uniformMatrix);
              break;
            case 20:
              for (c = 0; 16 > c; ) (d = c++), (this.__uniformMatrix[d] = b[d]);
              rb.uniformMatrix4fv(a, this.index, !1, this.__uniformMatrix);
          }
        else
          switch (this.type) {
            case 1:
            case 9:
              a.uniform2i(this.index, 0, 0);
              break;
            case 3:
            case 11:
              a.uniform4i(this.index, 0, 0, 0, 0);
              break;
            case 4:
              a.uniform1f(this.index, 0);
              break;
            case 5:
              a.uniform2f(this.index, 0, 0);
              break;
            case 6:
              a.uniform3f(this.index, 0, 0, 0);
              break;
            case 7:
              a.uniform4f(this.index, 0, 0, 0, 0);
              break;
            case 0:
            case 8:
              a.uniform1i(this.index, 0);
              break;
            case 2:
            case 10:
              a.uniform3i(this.index, 0, 0, 0);
              break;
            case 12:
              for (b = 0; 4 > b; ) (c = b++), (this.__uniformMatrix[c] = 0);
              rb.uniformMatrix2fv(a, this.index, !1, this.__uniformMatrix);
              break;
            case 16:
              for (b = 0; 9 > b; ) (c = b++), (this.__uniformMatrix[c] = 0);
              rb.uniformMatrix3fv(a, this.index, !1, this.__uniformMatrix);
              break;
            case 20:
              for (b = 0; 16 > b; ) (c = b++), (this.__uniformMatrix[c] = 0);
              rb.uniformMatrix4fv(a, this.index, !1, this.__uniformMatrix);
          }
      else if (this.__useArray || (null != c && c.length != this.__length))
        for (b = 0, c = this.__arrayLength; b < c; )
          (d = b++), a.enableVertexAttribArray(this.index + d);
      else {
        for (var f = 0, g = this.__arrayLength; f < g; ) {
          var h = f++;
          a.disableVertexAttribArray(this.index + h);
        }
        if (null != c)
          switch (this.type) {
            case 0:
              a.vertexAttrib1f(this.index, d[0] ? 1 : 0);
              break;
            case 1:
              a.vertexAttrib2f(this.index, d[0] ? 1 : 0, d[1] ? 1 : 0);
              break;
            case 2:
              a.vertexAttrib3f(
                this.index,
                d[0] ? 1 : 0,
                d[1] ? 1 : 0,
                d[2] ? 1 : 0
              );
              break;
            case 3:
              a.vertexAttrib4f(
                this.index,
                d[0] ? 1 : 0,
                d[1] ? 1 : 0,
                d[2] ? 1 : 0,
                d[3] ? 1 : 0
              );
              break;
            case 4:
              a.vertexAttrib1f(this.index, b[0]);
              break;
            case 5:
              a.vertexAttrib2f(this.index, b[0], b[1]);
              break;
            case 6:
              a.vertexAttrib3f(this.index, b[0], b[1], b[2]);
              break;
            case 7:
              a.vertexAttrib4f(this.index, b[0], b[1], b[2], b[3]);
              break;
            case 8:
              a.vertexAttrib1f(this.index, e[0]);
              break;
            case 9:
              a.vertexAttrib2f(this.index, e[0], e[1]);
              break;
            case 10:
              a.vertexAttrib3f(this.index, e[0], e[1], e[2]);
              break;
            case 11:
              a.vertexAttrib4f(this.index, e[0], e[1], e[2], e[3]);
              break;
            case 12:
              for (c = 0; 2 > c; )
                (d = c++),
                  a.vertexAttrib2f(this.index + d, b[2 * d], b[2 * d + 1]);
              break;
            case 16:
              for (c = 0; 3 > c; )
                (d = c++),
                  a.vertexAttrib3f(
                    this.index + d,
                    b[3 * d],
                    b[3 * d + 1],
                    b[3 * d + 2]
                  );
              break;
            case 20:
              for (c = 0; 4 > c; )
                (d = c++),
                  a.vertexAttrib4f(
                    this.index + d,
                    b[4 * d],
                    b[4 * d + 1],
                    b[4 * d + 2],
                    b[4 * d + 3]
                  );
          }
        else
          switch (this.type) {
            case 1:
            case 5:
            case 9:
              a.vertexAttrib2f(this.index, 0, 0);
              break;
            case 3:
            case 7:
            case 11:
              a.vertexAttrib4f(this.index, 0, 0, 0, 0);
              break;
            case 0:
            case 4:
            case 8:
              a.vertexAttrib1f(this.index, 0);
              break;
            case 2:
            case 6:
            case 10:
              a.vertexAttrib3f(this.index, 0, 0, 0);
              break;
            case 12:
              for (b = 0; 2 > b; )
                (c = b++), a.vertexAttrib2f(this.index + c, 0, 0);
              break;
            case 16:
              for (b = 0; 3 > b; )
                (c = b++), a.vertexAttrib3f(this.index + c, 0, 0, 0);
              break;
            case 20:
              for (b = 0; 4 > b; )
                (c = b++), a.vertexAttrib4f(this.index + c, 0, 0, 0, 0);
          }
      }
    },
    __updateGLFromBuffer: function (a, b, c, d, e) {
      a = a.gl;
      if (this.__isUniform) {
        if (d >= this.__length)
          switch (this.type) {
            case 1:
            case 9:
              a.uniform2i(this.index, u["int"](b[c]), u["int"](b[c + 1]));
              break;
            case 3:
            case 11:
              a.uniform4i(
                this.index,
                u["int"](b[c]),
                u["int"](b[c + 1]),
                u["int"](b[c + 2]),
                u["int"](b[c + 3])
              );
              break;
            case 4:
              a.uniform1f(this.index, b[c]);
              break;
            case 5:
              a.uniform2f(this.index, b[c], b[c + 1]);
              break;
            case 6:
              a.uniform3f(this.index, b[c], b[c + 1], b[c + 2]);
              break;
            case 7:
              a.uniform4f(this.index, b[c], b[c + 1], b[c + 2], b[c + 3]);
              break;
            case 0:
            case 8:
              a.uniform1i(this.index, u["int"](b[c]));
              break;
            case 2:
            case 10:
              a.uniform3i(
                this.index,
                u["int"](b[c]),
                u["int"](b[c + 1]),
                u["int"](b[c + 2])
              );
              break;
            case 12:
              for (d = 0; 4 > d; )
                (e = d++), (this.__uniformMatrix[e] = b[c + e]);
              rb.uniformMatrix2fv(a, this.index, !1, this.__uniformMatrix);
              break;
            case 16:
              for (d = 0; 9 > d; )
                (e = d++), (this.__uniformMatrix[e] = b[c + e]);
              rb.uniformMatrix3fv(a, this.index, !1, this.__uniformMatrix);
              break;
            case 20:
              for (d = 0; 16 > d; )
                (e = d++), (this.__uniformMatrix[e] = b[c + e]);
              rb.uniformMatrix4fv(a, this.index, !1, this.__uniformMatrix);
          }
      } else if (
        J.startsWith(this.name, "openfl_") ||
        (0 != d && d != this.__length)
      ) {
        b = a.FLOAT;
        this.__isBool ? (b = a.INT) : this.__isInt && (b = a.INT);
        for (var f = 0, g = this.__arrayLength; f < g; ) {
          var h = f++;
          a.enableVertexAttribArray(this.index + h);
        }
        if (0 < d)
          for (d = 0, f = this.__arrayLength; d < f; )
            (g = d++),
              a.vertexAttribPointer(
                this.index + g,
                this.__length,
                b,
                !1,
                4 * this.__length,
                4 * (c + e * this.__length + g * this.__arrayLength)
              );
      } else {
        e = 0;
        for (f = this.__arrayLength; e < f; )
          (g = e++), a.disableVertexAttribArray(this.index + g);
        if (0 < d)
          switch (this.type) {
            case 1:
            case 5:
            case 9:
              a.vertexAttrib2f(this.index, b[c], b[c + 1]);
              break;
            case 3:
            case 7:
            case 11:
              a.vertexAttrib4f(this.index, b[c], b[c + 1], b[c + 2], b[c + 3]);
              break;
            case 0:
            case 4:
            case 8:
              a.vertexAttrib1f(this.index, b[c]);
              break;
            case 2:
            case 6:
            case 10:
              a.vertexAttrib3f(this.index, b[c], b[c + 1], b[c + 2]);
              break;
            case 12:
              for (d = 0; 2 > d; )
                (e = d++),
                  a.vertexAttrib2f(
                    this.index + e,
                    b[c + 2 * e],
                    b[c + 2 * e + 1]
                  );
              break;
            case 16:
              for (d = 0; 3 > d; )
                (e = d++),
                  a.vertexAttrib3f(
                    this.index + e,
                    b[c + 3 * e],
                    b[c + 3 * e + 1],
                    b[c + 3 * e + 2]
                  );
              break;
            case 20:
              for (d = 0; 4 > d; )
                (e = d++),
                  a.vertexAttrib4f(
                    this.index + e,
                    b[c + 4 * e],
                    b[c + 4 * e + 1],
                    b[c + 4 * e + 2],
                    b[c + 4 * e + 3]
                  );
          }
        else
          switch (this.type) {
            case 1:
            case 5:
            case 9:
              a.vertexAttrib2f(this.index, 0, 0);
              break;
            case 3:
            case 7:
            case 11:
              a.vertexAttrib4f(this.index, 0, 0, 0, 0);
              break;
            case 0:
            case 4:
            case 8:
              a.vertexAttrib1f(this.index, 0);
              break;
            case 2:
            case 6:
            case 10:
              a.vertexAttrib3f(this.index, 0, 0, 0);
              break;
            case 12:
              for (c = 0; 2 > c; )
                (b = c++), a.vertexAttrib2f(this.index + b, 0, 0);
              break;
            case 16:
              for (c = 0; 3 > c; )
                (b = c++), a.vertexAttrib3f(this.index + b, 0, 0, 0);
              break;
            case 20:
              for (c = 0; 4 > c; )
                (b = c++), a.vertexAttrib4f(this.index + b, 0, 0, 0, 0);
          }
      }
    },
    __class__: Gg,
  };
  var eg = function () {
    Y.call(this);
  };
  l["openfl.display.Shape"] = eg;
  eg.__name__ = ["openfl", "display", "Shape"];
  eg.__super__ = Y;
  eg.prototype = v(Y.prototype, {
    get_graphics: function () {
      null == this.__graphics && (this.__graphics = new zc(this));
      return this.__graphics;
    },
    __class__: eg,
    __properties__: v(Y.prototype.__properties__, {
      get_graphics: "get_graphics",
    }),
  });
  var wd = function (a, b, c, d) {
    ja.call(this);
    this.enabled = !0;
    this.trackAsMenu = !1;
    this.useHandCursor = !0;
    this.__upState = null != a ? a : new Y();
    this.__overState = b;
    this.__downState = c;
    this.set_hitTestState(null != d ? d : new Y());
    this.addEventListener("mouseDown", m(this, this.__this_onMouseDown));
    this.addEventListener("mouseOut", m(this, this.__this_onMouseOut));
    this.addEventListener("mouseOver", m(this, this.__this_onMouseOver));
    this.addEventListener("mouseUp", m(this, this.__this_onMouseUp));
    this.__tabEnabled = !0;
    this.set___currentState(this.__upState);
    null != wd.__initSymbol &&
      ((a = wd.__initSWF),
      (this.__symbol = wd.__initSymbol),
      (wd.__initSWF = null),
      (wd.__initSymbol = null),
      this.__fromSymbol(a, this.__symbol));
  };
  l["openfl.display.SimpleButton"] = wd;
  wd.__name__ = ["openfl", "display", "SimpleButton"];
  wd.__super__ = ja;
  wd.prototype = v(ja.prototype, {
    enabled: null,
    trackAsMenu: null,
    useHandCursor: null,
    __currentState: null,
    __downState: null,
    __hitTestState: null,
    __ignoreEvent: null,
    __overState: null,
    __previousStates: null,
    __symbol: null,
    __upState: null,
    __fromSymbol: function (a, b) {
      this.__symbol = b;
      null != b.downState && this.set_downState(b.downState.__createObject(a));
      null != b.hitState && this.set_hitTestState(b.hitState.__createObject(a));
      null != b.overState && this.set_overState(b.overState.__createObject(a));
      null != b.upState && this.set_upState(b.upState.__createObject(a));
    },
    __getBounds: function (a, b) {
      ja.prototype.__getBounds.call(this, a, b);
      var c = ia.__pool.get();
      Y.__calculateAbsoluteTransform(this.__currentState.__transform, b, c);
      this.__currentState.__getBounds(a, c);
      ia.__pool.release(c);
    },
    __getCursor: function () {
      return this.useHandCursor && !this.__ignoreEvent ? P.POINTER : null;
    },
    __hitTest: function (a, b, c, d, e, f) {
      var g = !1;
      if (null != this.get_hitTestState())
        this.get_hitTestState().__hitTest(a, b, c, d, e, f) &&
          (null != d && (0 == d.length ? (d[0] = f) : (d[d.length - 1] = f)),
          (g = !0));
      else if (null != this.__currentState) {
        if (
          !f.get_visible() ||
          this.__isMask ||
          (e && !this.mouseEnabled) ||
          (null != this.get_mask() && !this.get_mask().__hitTestMask(a, b))
        )
          return !1;
        this.__currentState.__hitTest(a, b, c, d, e, f) && (g = e);
      }
      if (null != d)
        for (; 1 < d.length && d[d.length - 1] == d[d.length - 2]; ) d.pop();
      return g;
    },
    __hitTestMask: function (a, b) {
      var c = !1;
      this.__currentState.__hitTestMask(a, b) && (c = !0);
      return c;
    },
    __renderCairo: function (a) {
      !this.__renderable ||
        0 >= this.__worldAlpha ||
        null == this.__currentState ||
        (a.__pushMaskObject(this),
        this.__currentState.__renderCairo(a),
        a.__popMaskObject(this),
        this.__renderEvent(a));
    },
    __renderCairoMask: function (a) {
      this.__currentState.__renderCairoMask(a);
    },
    __renderCanvas: function (a) {
      !this.__renderable ||
        0 >= this.__worldAlpha ||
        null == this.__currentState ||
        (a.__pushMaskObject(this),
        this.__currentState.__renderCanvas(a),
        a.__popMaskObject(this),
        this.__renderEvent(a));
    },
    __renderCanvasMask: function (a) {
      this.__currentState.__renderCanvasMask(a);
    },
    __renderDOM: function (a) {
      a.__pushMaskObject(this);
      for (var b = 0, c = this.__previousStates; b < c.get_length(); ) {
        var d = c.get(b);
        ++b;
        d.__renderDOM(a);
      }
      this.__previousStates.set_length(0);
      null != this.__currentState &&
        (this.__currentState.stage != this.stage &&
          this.__currentState.__setStageReference(this.stage),
        this.__currentState.__renderDOM(a));
      a.__popMaskObject(this);
      this.__renderEvent(a);
    },
    __renderGL: function (a) {
      !this.__renderable ||
        0 >= this.__worldAlpha ||
        null == this.__currentState ||
        (a.__pushMaskObject(this),
        this.__currentState.__renderGL(a),
        a.__popMaskObject(this),
        this.__renderEvent(a));
    },
    __renderGLMask: function (a) {
      null != this.__currentState && this.__currentState.__renderGLMask(a);
    },
    __setStageReference: function (a) {
      ja.prototype.__setStageReference.call(this, a);
      null != this.__currentState && this.__currentState.__setStageReference(a);
      null != this.get_hitTestState() &&
        this.get_hitTestState() != this.__currentState &&
        this.get_hitTestState().__setStageReference(a);
    },
    __setTransformDirty: function () {
      ja.prototype.__setTransformDirty.call(this);
      null != this.__currentState && this.__currentState.__setTransformDirty();
      null != this.get_hitTestState() &&
        this.get_hitTestState() != this.__currentState &&
        this.get_hitTestState().__setTransformDirty();
    },
    __update: function (a, b) {
      ja.prototype.__update.call(this, a, b);
      b &&
        (null != this.__currentState && this.__currentState.__update(a, !0),
        null != this.get_hitTestState() &&
          this.get_hitTestState() != this.__currentState &&
          this.get_hitTestState().__update(a, !0));
    },
    __updateTransforms: function (a) {
      ja.prototype.__updateTransforms.call(this, a);
      null != this.__currentState && this.__currentState.__updateTransforms();
      null != this.get_hitTestState() &&
        this.get_hitTestState() != this.__currentState &&
        this.get_hitTestState().__updateTransforms();
    },
    get_downState: function () {
      return this.__downState;
    },
    set_downState: function (a) {
      null != this.__downState &&
        this.__currentState == this.__downState &&
        this.set___currentState(this.__downState);
      return (this.__downState = a);
    },
    get_hitTestState: function () {
      return this.__hitTestState;
    },
    set_hitTestState: function (a) {
      null != this.__hitTestState &&
        this.__hitTestState != a &&
        this.__hitTestState != this.get_downState() &&
        this.__hitTestState != this.get_upState() &&
        this.__hitTestState != this.get_overState() &&
        (this.__hitTestState.__renderParent = null);
      null != a && ((a.__renderParent = this), a.__setRenderDirty());
      return (this.__hitTestState = a);
    },
    get_overState: function () {
      return this.__overState;
    },
    set_overState: function (a) {
      null != this.__overState &&
        this.__currentState == this.__overState &&
        this.set___currentState(a);
      return (this.__overState = a);
    },
    get_upState: function () {
      return this.__upState;
    },
    set_upState: function (a) {
      null != this.__upState &&
        this.__currentState == this.__upState &&
        this.set___currentState(a);
      return (this.__upState = a);
    },
    set___currentState: function (a) {
      null != this.__currentState &&
        this.__currentState != this.get_hitTestState() &&
        (this.__currentState.__renderParent = null);
      null != a && null != a.parent && a.parent.removeChild(a);
      Y.__supportDOM &&
        null == this.__previousStates &&
        (this.__previousStates = Eb.toObjectVector(null));
      if (a != this.__currentState) {
        if (Y.__supportDOM) {
          null != this.__currentState &&
            (this.__currentState.__setStageReference(null),
            this.__previousStates.push(this.__currentState));
          var b = this.__previousStates.indexOf(a, 0);
          -1 < b && this.__previousStates.splice(b, 1);
        }
        null != a && ((a.__renderParent = this), a.__setRenderDirty());
        this.__setRenderDirty();
      }
      return (this.__currentState = a);
    },
    __this_onMouseDown: function (a) {
      this.set___currentState(this.get_downState());
    },
    __this_onMouseOut: function (a) {
      this.__ignoreEvent = !1;
      this.get_upState() != this.__currentState &&
        this.set___currentState(this.get_upState());
    },
    __this_onMouseOver: function (a) {
      a.buttonDown && (this.__ignoreEvent = !0);
      this.get_overState() == this.__currentState ||
        null == this.get_overState() ||
        this.__ignoreEvent ||
        this.set___currentState(this.get_overState());
    },
    __this_onMouseUp: function (a) {
      this.__ignoreEvent = !1;
      null != this.get_overState()
        ? this.set___currentState(this.get_overState())
        : this.set___currentState(this.get_upState());
    },
    __class__: wd,
    __properties__: v(ja.prototype.__properties__, {
      set___currentState: "set___currentState",
      set_upState: "set_upState",
      get_upState: "get_upState",
      set_overState: "set_overState",
      get_overState: "get_overState",
      set_hitTestState: "set_hitTestState",
      get_hitTestState: "get_hitTestState",
      set_downState: "set_downState",
      get_downState: "get_downState",
    }),
  });
  var Jg = function (a, b) {
    Lb.call(this);
    this.set_name(null);
    this.__color = -1;
    this.__colorSplit = [255, 255, 255];
    this.__colorString = "#FFFFFF";
    this.__contentsScaleFactor = 1;
    this.__deltaTime = 0;
    this.__displayState = 2;
    this.__logicalHeight =
      this.__logicalWidth =
      this.__lastClickTime =
      this.__mouseY =
      this.__mouseX =
        0;
    this.__displayMatrix = new ia();
    this.__renderDirty = !0;
    this.stage3Ds = Eb.toObjectVector(null);
    for (var c = 0; 4 > c; ) c++, this.stage3Ds.push(new Uh(this));
    this.stage = this;
    this.align = 6;
    this.allowsFullScreenInteractive = this.allowsFullScreen = !0;
    this.__quality = 1;
    this.__scaleMode = 2;
    this.showDefaultContextMenu = !0;
    this.softKeyboardRect = new Z();
    this.stageFocusRect = !0;
    this.__macKeyboard =
      (/AppleWebKit/.test(navigator.userAgent) &&
        /Mobile\/\w+/.test(navigator.userAgent)) ||
      /Mac/.test(navigator.platform);
    this.__clearBeforeRender = !0;
    this.__forceRender = !1;
    this.__stack = [];
    this.__rollOutStack = [];
    this.__mouseOutStack = [];
    this.__touchData = new mb();
    this.application = a.application;
    this.window = a;
    this.set_color(b);
    this.__contentsScaleFactor = a.get_scale();
    this.__wasFullscreen = a.get_fullscreen();
    this.__resize();
    null == N.get_current().stage && this.stage.addChild(N.get_current());
  };
  l["openfl.display.Stage"] = Jg;
  Jg.__name__ = ["openfl", "display", "Stage"];
  Jg.__interfaces__ = [Rg];
  Jg.__super__ = Lb;
  Jg.prototype = v(Lb.prototype, {
    align: null,
    allowsFullScreen: null,
    allowsFullScreenInteractive: null,
    application: null,
    context3D: null,
    showDefaultContextMenu: null,
    softKeyboardRect: null,
    stage3Ds: null,
    stageFocusRect: null,
    stageHeight: null,
    stageWidth: null,
    window: null,
    __cacheFocus: null,
    __clearBeforeRender: null,
    __color: null,
    __colorSplit: null,
    __colorString: null,
    __contentsScaleFactor: null,
    __deltaTime: null,
    __displayMatrix: null,
    __displayState: null,
    __dragBounds: null,
    __dragObject: null,
    __dragOffsetX: null,
    __dragOffsetY: null,
    __focus: null,
    __forceRender: null,
    __invalidated: null,
    __lastClickTime: null,
    __logicalWidth: null,
    __logicalHeight: null,
    __macKeyboard: null,
    __mouseDownLeft: null,
    __mouseDownMiddle: null,
    __mouseDownRight: null,
    __mouseOutStack: null,
    __mouseOverTarget: null,
    __mouseX: null,
    __mouseY: null,
    __pendingMouseEvent: null,
    __pendingMouseX: null,
    __pendingMouseY: null,
    __primaryTouch: null,
    __quality: null,
    __renderer: null,
    __rendering: null,
    __rollOutStack: null,
    __scaleMode: null,
    __stack: null,
    __touchData: null,
    __transparent: null,
    __wasDirty: null,
    __wasFullscreen: null,
    onGamepadAxisMove: function (a, b, c) {
      try {
        Ha.__onGamepadAxisMove(a, b, c);
      } catch (d) {
        (ta.lastException = d),
          d instanceof G && (d = d.val),
          this.__handleError(d);
      }
    },
    onGamepadButtonDown: function (a, b) {
      try {
        Ha.__onGamepadButtonDown(a, b);
      } catch (c) {
        (ta.lastException = c),
          c instanceof G && (c = c.val),
          this.__handleError(c);
      }
    },
    onGamepadButtonUp: function (a, b) {
      try {
        Ha.__onGamepadButtonUp(a, b);
      } catch (c) {
        (ta.lastException = c),
          c instanceof G && (c = c.val),
          this.__handleError(c);
      }
    },
    onGamepadConnect: function (a) {
      try {
        Ha.__onGamepadConnect(a);
      } catch (b) {
        (ta.lastException = b),
          b instanceof G && (b = b.val),
          this.__handleError(b);
      }
    },
    onGamepadDisconnect: function (a) {
      try {
        Ha.__onGamepadDisconnect(a);
      } catch (b) {
        (ta.lastException = b),
          b instanceof G && (b = b.val),
          this.__handleError(b);
      }
    },
    onKeyDown: function (a, b, c) {
      null != this.window && this.window == a && this.__onKey("keyDown", b, c);
    },
    onKeyUp: function (a, b, c) {
      null != this.window && this.window == a && this.__onKey("keyUp", b, c);
    },
    onModuleExit: function (a) {
      null != this.window && this.__broadcastEvent(new X("deactivate"));
    },
    onMouseDown: function (a, b, c, d) {
      if (null != this.window && this.window == a) {
        this.__dispatchPendingMouseEvent();
        switch (d) {
          case 1:
            var e = "middleMouseDown";
            break;
          case 2:
            e = "rightMouseDown";
            break;
          default:
            e = "mouseDown";
        }
        this.__onMouse(
          e,
          u["int"](b * a.get_scale()),
          u["int"](c * a.get_scale()),
          d
        );
      }
    },
    onMouseMove: function (a, b, c) {
      null != this.window &&
        this.window == a &&
        ((this.__pendingMouseEvent = !0),
        (this.__pendingMouseX = u["int"](b * a.get_scale())),
        (this.__pendingMouseY = u["int"](c * a.get_scale())));
    },
    onMouseMoveRelative: function (a, b, c) {},
    onMouseUp: function (a, b, c, d) {
      if (null != this.window && this.window == a) {
        this.__dispatchPendingMouseEvent();
        switch (d) {
          case 1:
            var e = "middleMouseUp";
            break;
          case 2:
            e = "rightMouseUp";
            break;
          default:
            e = "mouseUp";
        }
        this.__onMouse(
          e,
          u["int"](b * a.get_scale()),
          u["int"](c * a.get_scale()),
          d
        );
        this.showDefaultContextMenu || 2 != d || a.onMouseUp.cancel();
      }
    },
    onMouseWheel: function (a, b, c, d) {
      null != this.window &&
        this.window == a &&
        (this.__dispatchPendingMouseEvent(),
        d == Gb.PIXELS
          ? this.__onMouseWheel(
              u["int"](b * a.get_scale()),
              u["int"](c * a.get_scale()),
              d
            )
          : this.__onMouseWheel(u["int"](b), u["int"](c), d));
    },
    onRenderContextLost: function () {
      this.__renderer = null;
    },
    onRenderContextRestored: function (a) {
      this.__createRenderer();
    },
    onTextEdit: function (a, b, c, d) {},
    onTextInput: function (a, b) {
      if (null != this.window && this.window == a) {
        var c = [];
        null == this.__focus
          ? this.__getInteractive(c)
          : this.__focus.__getInteractive(c);
        b = new Pe("textInput", !0, !0, b);
        0 < c.length
          ? (c.reverse(), this.__dispatchStack(b, c))
          : this.__dispatchEvent(b);
        b.isDefaultPrevented() && a.onTextInput.cancel();
      }
    },
    onTouchMove: function (a) {
      this.__onTouch("touchMove", a);
    },
    onTouchEnd: function (a) {
      this.__primaryTouch == a && (this.__primaryTouch = null);
      this.__onTouch("touchEnd", a);
    },
    onTouchStart: function (a) {
      null == this.__primaryTouch && (this.__primaryTouch = a);
      this.__onTouch("touchBegin", a);
    },
    onWindowActivate: function (a) {},
    onWindowClose: function (a) {
      this.window == a && (this.window = null);
      this.__primaryTouch = null;
      this.__broadcastEvent(new X("deactivate"));
    },
    onWindowCreate: function (a) {
      null != this.window &&
        this.window == a &&
        null != a.context &&
        this.__createRenderer();
    },
    onWindowDeactivate: function (a) {},
    onWindowDropFile: function (a, b) {},
    onWindowEnter: function (a) {},
    onWindowExpose: function (a) {
      null != this.window && this.window == a && (this.__renderDirty = !0);
    },
    onWindowFocusIn: function (a) {
      null != this.window &&
        this.window == a &&
        ((this.__renderDirty = !0),
        this.__broadcastEvent(new X("activate")),
        this.set_focus(this.__cacheFocus));
    },
    onWindowFocusOut: function (a) {
      null != this.window &&
        this.window == a &&
        ((this.__primaryTouch = null),
        this.__broadcastEvent(new X("deactivate")),
        (a = this.get_focus()),
        this.set_focus(null),
        (this.__cacheFocus = a));
    },
    onWindowFullscreen: function (a) {
      null != this.window &&
        this.window == a &&
        (this.__resize(),
        this.__wasFullscreen ||
          ((this.__wasFullscreen = !0),
          2 == this.__displayState && (this.__displayState = 1),
          this.__dispatchEvent(new Ae("fullScreen", !1, !1, !0, !0))));
    },
    onWindowLeave: function (a) {
      null == this.window ||
        this.window != a ||
        ua.__buttonDown ||
        (this.__dispatchPendingMouseEvent(),
        this.__dispatchEvent(new X("mouseLeave")));
    },
    onWindowMinimize: function (a) {},
    onWindowMove: function (a, b, c) {},
    onWindowResize: function (a, b, c) {
      null != this.window &&
        this.window == a &&
        (this.__resize(),
        this.__wasFullscreen &&
          !a.get_fullscreen() &&
          ((this.__wasFullscreen = !1),
          (this.__displayState = 2),
          this.__dispatchEvent(new Ae("fullScreen", !1, !1, !1, !0))));
    },
    onWindowRestore: function (a) {
      null != this.window &&
        this.window == a &&
        this.__wasFullscreen &&
        !a.get_fullscreen() &&
        ((this.__wasFullscreen = !1),
        (this.__displayState = 2),
        this.__dispatchEvent(new Ae("fullScreen", !1, !1, !1, !0)));
    },
    render: function (a) {
      if (!this.__rendering) {
        this.__rendering = !0;
        this.__broadcastEvent(new X("enterFrame"));
        this.__broadcastEvent(new X("frameConstructed"));
        this.__broadcastEvent(new X("exitFrame"));
        this.__renderable = !0;
        this.__enterFrame(this.__deltaTime);
        this.__deltaTime = 0;
        a =
          null != this.__renderer && (this.__renderDirty || this.__forceRender);
        this.__invalidated &&
          a &&
          ((this.__invalidated = !1), this.__broadcastEvent(new X("render")));
        this.__update(!1, !0);
        if (null != this.__renderer) {
          if (null != this.context3D) {
            for (var b = 0, c = this.stage3Ds; b < c.get_length(); ) {
              var d = c.get(b);
              ++b;
              this.context3D.__renderStage3D(d);
            }
            this.context3D.__present && (a = !0);
          }
          a
            ? (null == this.context3D && this.__renderer.__clear(),
              this.__renderer.__render(this))
            : null == this.context3D && this.window.onRender.cancel();
          null != this.context3D &&
            (this.context3D.__present
              ? (this.__renderer.__cleared || this.__renderer.__clear(),
                (this.context3D.__present = !1))
              : this.window.onRender.cancel());
          this.__renderer.__cleared = !1;
        }
        this.__rendering = !1;
      }
    },
    update: function (a) {
      this.__deltaTime = a;
      this.__dispatchPendingMouseEvent();
    },
    __addWindow: function (a) {
      if (this.window == a) {
        var b = m(this, this.onWindowActivate);
        a.onActivate.add(function () {
          b(a);
        });
        var c = m(this, this.onWindowClose);
        a.onClose.add(
          function () {
            c(a);
          },
          !1,
          -9e3
        );
        var d = m(this, this.onWindowDeactivate);
        a.onDeactivate.add(function () {
          d(a);
        });
        var e = m(this, this.onWindowDropFile);
        a.onDropFile.add(function (b) {
          e(a, b);
        });
        var f = m(this, this.onWindowEnter);
        a.onEnter.add(function () {
          f(a);
        });
        var g = m(this, this.onWindowExpose);
        a.onExpose.add(function () {
          g(a);
        });
        var h = m(this, this.onWindowFocusIn);
        a.onFocusIn.add(function () {
          h(a);
        });
        var n = m(this, this.onWindowFocusOut);
        a.onFocusOut.add(function () {
          n(a);
        });
        var p = m(this, this.onWindowFullscreen);
        a.onFullscreen.add(function () {
          p(a);
        });
        var k = m(this, this.onKeyDown);
        a.onKeyDown.add(function (b, c) {
          k(a, b, c);
        });
        var l = m(this, this.onKeyUp);
        a.onKeyUp.add(function (b, c) {
          l(a, b, c);
        });
        var q = m(this, this.onWindowLeave);
        a.onLeave.add(function () {
          q(a);
        });
        var r = m(this, this.onWindowMinimize);
        a.onMinimize.add(function () {
          r(a);
        });
        var u = m(this, this.onMouseDown);
        a.onMouseDown.add(function (b, c, d) {
          u(a, b, c, d);
        });
        var t = m(this, this.onMouseMove);
        a.onMouseMove.add(function (b, c) {
          t(a, b, c);
        });
        var v = m(this, this.onMouseMoveRelative);
        a.onMouseMoveRelative.add(function (b, c) {
          v(a, b, c);
        });
        var w = m(this, this.onMouseUp);
        a.onMouseUp.add(function (b, c, d) {
          w(a, b, c, d);
        });
        var x = m(this, this.onMouseWheel);
        a.onMouseWheel.add(function (b, c, d) {
          x(a, b, c, d);
        });
        var y = m(this, this.onWindowMove);
        a.onMove.add(function (b, c) {
          y(a, b, c);
        });
        a.onRender.add(m(this, this.render));
        a.onRenderContextLost.add(m(this, this.onRenderContextLost));
        a.onRenderContextRestored.add(m(this, this.onRenderContextRestored));
        var z = m(this, this.onWindowResize);
        a.onResize.add(function (b, c) {
          z(a, b, c);
        });
        var A = m(this, this.onWindowRestore);
        a.onRestore.add(function () {
          A(a);
        });
        var C = m(this, this.onTextEdit);
        a.onTextEdit.add(function (b, c, d) {
          C(a, b, c, d);
        });
        var K = m(this, this.onTextInput);
        a.onTextInput.add(function (b) {
          K(a, b);
        });
        this.onWindowCreate(a);
      }
    },
    __broadcastEvent: function (a) {
      if (Y.__broadcastEvents.exists(a.type))
        for (var b = Y.__broadcastEvents.get(a.type), c = 0; c < b.length; ) {
          var d = b[c];
          ++c;
          if (d.stage == this || null == d.stage)
            try {
              d.__dispatch(a);
            } catch (e) {
              (ta.lastException = e),
                e instanceof G && (e = e.val),
                this.__handleError(e);
            }
        }
    },
    __createRenderer: function () {
      var a = 1;
      1 < this.window.get_scale() &&
        (a = this.window.devicePixelRatio ? !0 : 1);
      switch (this.window.context.type) {
        case "canvas":
          this.__renderer = new Ce(this.window.context.canvas2D);
          r.__cast(this.__renderer, Ce).pixelRatio = a;
          break;
        case "dom":
          this.__renderer = new Ig(this.window.context.dom);
          r.__cast(this.__renderer, Ig).pixelRatio = a;
          break;
        case "opengl":
        case "opengles":
        case "webgl":
          (this.context3D = new Da(this)),
            this.context3D.configureBackBuffer(
              this.stageWidth,
              this.stageHeight,
              0,
              !0,
              !0,
              !0
            ),
            this.context3D.present(),
            (this.__renderer = new fa(this.context3D));
      }
      null != this.__renderer &&
        ((a = this.get_quality()),
        (this.__renderer.__allowSmoothing = 2 != a),
        (this.__renderer.__worldTransform = this.__displayMatrix),
        (this.__renderer.__stage = this),
        this.__renderer.__resize(
          u["int"](this.window.get_width() * this.window.get_scale()),
          u["int"](this.window.get_height() * this.window.get_scale())
        ));
    },
    __dispatchEvent: function (a) {
      try {
        return Lb.prototype.__dispatchEvent.call(this, a);
      } catch (b) {
        return (
          (ta.lastException = b),
          b instanceof G && (b = b.val),
          this.__handleError(b),
          !1
        );
      }
    },
    __dispatchPendingMouseEvent: function () {
      this.__pendingMouseEvent &&
        (this.__onMouse(
          "mouseMove",
          this.__pendingMouseX,
          this.__pendingMouseY,
          0
        ),
        (this.__pendingMouseEvent = !1));
    },
    __dispatchStack: function (a, b) {
      try {
        var c = b.length;
        if (0 == c) {
          a.eventPhase = 2;
          var d = a.target;
          d.__dispatch(a);
        } else {
          a.eventPhase = 1;
          a.target = b[b.length - 1];
          for (var e = 0, f = c - 1; e < f; ) {
            var g = e++;
            b[g].__dispatch(a);
            if (a.__isCanceled) return;
          }
          a.eventPhase = 2;
          d = a.target;
          d.__dispatch(a);
          if (!a.__isCanceled && a.bubbles)
            for (a.eventPhase = 3, d = c - 2; 0 <= d; ) {
              b[d].__dispatch(a);
              if (a.__isCanceled) break;
              --d;
            }
        }
      } catch (h) {
        (ta.lastException = h),
          h instanceof G && (h = h.val),
          this.__handleError(h);
      }
    },
    __dispatchTarget: function (a, b) {
      try {
        return a.__dispatchEvent(b);
      } catch (c) {
        return (
          (ta.lastException = c),
          c instanceof G && (c = c.val),
          this.__handleError(c),
          !1
        );
      }
    },
    __drag: function (a) {
      var b = this.__dragObject.parent;
      null != b && b.__getWorldTransform().__transformInversePoint(a);
      b = a.x + this.__dragOffsetX;
      a = a.y + this.__dragOffsetY;
      null != this.__dragBounds &&
        (b < this.__dragBounds.x
          ? (b = this.__dragBounds.x)
          : b > this.__dragBounds.get_right() &&
            (b = this.__dragBounds.get_right()),
        a < this.__dragBounds.y
          ? (a = this.__dragBounds.y)
          : a > this.__dragBounds.get_bottom() &&
            (a = this.__dragBounds.get_bottom()));
      this.__dragObject.set_x(b);
      this.__dragObject.set_y(a);
    },
    __getInteractive: function (a) {
      null != a && a.push(this);
      return !0;
    },
    __globalToLocal: function (a, b) {
      a != b && b.copyFrom(a);
      return b;
    },
    __handleError: function (a) {
      var b = new Vh("uncaughtError", !0, !0, a);
      try {
        N.get_current().__loaderInfo.uncaughtErrorEvents.dispatchEvent(b);
      } catch (e) {
        ta.lastException = e;
      }
      if (!b.__preventDefault) {
        try {
          var c = ta.lastException;
          if (
            null != c &&
            A.hasField(c, "stack") &&
            null != c.stack &&
            "" != c.stack
          )
            console.log(c.stack), (a.stack = c.stack);
          else {
            var d = ta.toString(ta.callStack());
            console.log(d);
          }
        } catch (e) {
          ta.lastException = e;
        }
        throw a;
      }
    },
    __onKey: function (a, b, c) {
      this.__dispatchPendingMouseEvent();
      ua.__altKey = ab.get_altKey(c);
      ua.__commandKey = ab.get_metaKey(c);
      ua.__ctrlKey = ab.get_ctrlKey(c);
      ua.__shiftKey = ab.get_shiftKey(c);
      var d = [];
      null == this.__focus
        ? this.__getInteractive(d)
        : this.__focus.__getInteractive(d);
      if (0 < d.length) {
        var e = wg.__getKeyLocation(b);
        b = wg.__convertKeyCode(b);
        var f = wg.__getCharCode(b, ab.get_shiftKey(c));
        c = new Wh(
          a,
          !0,
          !0,
          f,
          b,
          e,
          this.__macKeyboard
            ? ab.get_ctrlKey(c) || ab.get_metaKey(c)
            : ab.get_ctrlKey(c),
          ab.get_altKey(c),
          ab.get_shiftKey(c),
          ab.get_ctrlKey(c),
          ab.get_metaKey(c)
        );
        d.reverse();
        this.__dispatchStack(c, d);
        c.__preventDefault &&
          ("keyDown" == a
            ? this.window.onKeyDown.cancel()
            : this.window.onKeyUp.cancel());
      }
    },
    __onGamepadConnect: function (a) {
      this.onGamepadConnect(a);
      var b = m(this, this.onGamepadAxisMove);
      a.onAxisMove.add(function (c, d) {
        b(a, c, d);
      });
      var c = m(this, this.onGamepadButtonDown);
      a.onButtonDown.add(function (b) {
        c(a, b);
      });
      var d = m(this, this.onGamepadButtonUp);
      a.onButtonUp.add(function (b) {
        d(a, b);
      });
      var e = m(this, this.onGamepadDisconnect);
      a.onDisconnect.add(function () {
        e(a);
      });
    },
    __onMouse: function (a, b, c, d) {
      if (!(2 < d)) {
        var e = aa.__pool.get();
        e.setTo(b, c);
        this.__displayMatrix.__transformInversePoint(e);
        this.__mouseX = e.x;
        this.__mouseY = e.y;
        c = [];
        if (this.__hitTest(this.__mouseX, this.__mouseY, !0, c, !0, this))
          var f = c[c.length - 1];
        else (f = this), (c = [this]);
        null == f && (f = this);
        var g = null;
        switch (a) {
          case "middleMouseDown":
            this.__mouseDownMiddle = f;
            break;
          case "middleMouseUp":
            this.__mouseDownMiddle == f && (g = "middleClick");
            this.__mouseDownMiddle = null;
            break;
          case "mouseDown":
            f.__allowMouseFocus() ? this.set_focus(f) : this.set_focus(null);
            this.__mouseDownLeft = f;
            ua.__buttonDown = !0;
            break;
          case "mouseUp":
            null != this.__mouseDownLeft &&
              ((ua.__buttonDown = !1),
              0 > this.__mouseX ||
              0 > this.__mouseY ||
              this.__mouseX > this.stageWidth ||
              this.__mouseY > this.stageHeight
                ? this.__dispatchEvent(
                    ua.__create(
                      "releaseOutside",
                      1,
                      this.__mouseX,
                      this.__mouseY,
                      new aa(this.__mouseX, this.__mouseY),
                      this
                    )
                  )
                : this.__mouseDownLeft == f && (g = "click"),
              (this.__mouseDownLeft = null));
            break;
          case "rightMouseDown":
            this.__mouseDownRight = f;
            break;
          case "rightMouseUp":
            this.__mouseDownRight == f && (g = "rightClick"),
              (this.__mouseDownRight = null);
        }
        b = aa.__pool.get();
        this.__dispatchStack(
          ua.__create(
            a,
            d,
            this.__mouseX,
            this.__mouseY,
            f.__globalToLocal(e, b),
            f
          ),
          c
        );
        null != g &&
          (this.__dispatchStack(
            ua.__create(
              g,
              d,
              this.__mouseX,
              this.__mouseY,
              f.__globalToLocal(e, b),
              f
            ),
            c
          ),
          "mouseUp" == a &&
            r.__cast(f, ja).doubleClickEnabled &&
            ((a = N.getTimer()),
            500 > a - this.__lastClickTime
              ? (this.__dispatchStack(
                  ua.__create(
                    "doubleClick",
                    d,
                    this.__mouseX,
                    this.__mouseY,
                    f.__globalToLocal(e, b),
                    f
                  ),
                  c
                ),
                (this.__lastClickTime = 0))
              : (this.__lastClickTime = a)));
        if ("auto" == Wj.__cursor && !Wj.__hidden) {
          g = null;
          if (null != this.__mouseDownLeft)
            g = this.__mouseDownLeft.__getCursor();
          else
            for (a = 0; a < c.length; )
              if (((g = c[a]), ++a, (g = g.__getCursor()), null != g)) {
                this.window.set_cursor(g);
                break;
              }
          null == g && this.window.set_cursor(P.ARROW);
        }
        f != this.__mouseOverTarget &&
          null != this.__mouseOverTarget &&
          ((a = ua.__create(
            "mouseOut",
            d,
            this.__mouseX,
            this.__mouseY,
            this.__mouseOverTarget.__globalToLocal(e, b),
            this.__mouseOverTarget
          )),
          this.__dispatchStack(a, this.__mouseOutStack));
        g = 0;
        for (var h = this.__rollOutStack; g < h.length; ) {
          var n = h[g];
          ++g;
          -1 == c.indexOf(n) &&
            (S.remove(this.__rollOutStack, n),
            (a = ua.__create(
              "rollOut",
              d,
              this.__mouseX,
              this.__mouseY,
              this.__mouseOverTarget.__globalToLocal(e, b),
              this.__mouseOverTarget
            )),
            (a.bubbles = !1),
            this.__dispatchTarget(n, a));
        }
        for (g = 0; g < c.length; )
          (h = c[g]),
            ++g,
            -1 == this.__rollOutStack.indexOf(h) &&
              null != this.__mouseOverTarget &&
              (h.hasEventListener("rollOver") &&
                ((a = ua.__create(
                  "rollOver",
                  d,
                  this.__mouseX,
                  this.__mouseY,
                  this.__mouseOverTarget.__globalToLocal(e, b),
                  h
                )),
                (a.bubbles = !1),
                this.__dispatchTarget(h, a)),
              (h.hasEventListener("rollOut") ||
                h.hasEventListener("rollOver")) &&
                this.__rollOutStack.push(h));
        f != this.__mouseOverTarget &&
          (null != f &&
            ((a = ua.__create(
              "mouseOver",
              d,
              this.__mouseX,
              this.__mouseY,
              f.__globalToLocal(e, b),
              f
            )),
            this.__dispatchStack(a, c)),
          (this.__mouseOverTarget = f),
          (this.__mouseOutStack = c));
        null != this.__dragObject &&
          (this.__drag(e),
          (d = null),
          this.__mouseOverTarget == this.__dragObject
            ? ((c = this.__dragObject.mouseEnabled),
              (f = this.__dragObject.mouseChildren),
              (this.__dragObject.mouseEnabled = !1),
              (this.__dragObject.mouseChildren = !1),
              (a = []),
              this.__hitTest(this.__mouseX, this.__mouseY, !0, a, !0, this) &&
                (d = a[a.length - 1]),
              (this.__dragObject.mouseEnabled = c),
              (this.__dragObject.mouseChildren = f))
            : this.__mouseOverTarget != this && (d = this.__mouseOverTarget),
          (this.__dragObject.dropTarget = d));
        aa.__pool.release(e);
        aa.__pool.release(b);
      }
    },
    __onMouseWheel: function (a, b, c) {
      var d = this.__mouseX,
        e = this.__mouseY;
      a = [];
      this.__hitTest(this.__mouseX, this.__mouseY, !0, a, !0, this)
        ? (c = a[a.length - 1])
        : ((c = this), (a = [this]));
      null == c && (c = this);
      var f = aa.__pool.get();
      f.setTo(d, e);
      this.__displayMatrix.__transformInversePoint(f);
      b = u["int"](b);
      this.__dispatchStack(
        ua.__create(
          "mouseWheel",
          0,
          this.__mouseX,
          this.__mouseY,
          c.__globalToLocal(f, f),
          c,
          b
        ),
        a
      );
      aa.__pool.release(f);
    },
    __onTouch: function (a, b) {
      var c = aa.__pool.get();
      c.setTo(
        Math.round(b.x * this.window.get_width() * this.window.get_scale()),
        Math.round(b.y * this.window.get_height() * this.window.get_scale())
      );
      this.__displayMatrix.__transformInversePoint(c);
      var d = c.x,
        e = c.y,
        f = [];
      if (this.__hitTest(d, e, !1, f, !0, this)) var g = f[f.length - 1];
      else (g = this), (f = [this]);
      null == g && (g = this);
      var h = b.id;
      if (this.__touchData.exists(h)) var n = this.__touchData.get(h);
      else
        (n = fg.__pool.get()),
          n.reset(),
          (n.touch = b),
          this.__touchData.set(h, n);
      var p = null,
        k = !1;
      switch (a) {
        case "touchBegin":
          n.touchDownTarget = g;
          break;
        case "touchEnd":
          n.touchDownTarget == g && (p = "touchTap"),
            (n.touchDownTarget = null),
            (k = !0);
      }
      var l = aa.__pool.get(),
        m = this.__primaryTouch == b;
      a = tb.__create(a, null, d, e, g.__globalToLocal(c, l), g);
      a.touchPointID = h;
      a.isPrimaryTouchPoint = m;
      a.pressure = b.pressure;
      this.__dispatchStack(a, f);
      null != p &&
        ((a = tb.__create(p, null, d, e, g.__globalToLocal(c, l), g)),
        (a.touchPointID = h),
        (a.isPrimaryTouchPoint = m),
        (a.pressure = b.pressure),
        this.__dispatchStack(a, f));
      p = n.touchOverTarget;
      g != p &&
        null != p &&
        ((a = tb.__create("touchOut", null, d, e, p.__globalToLocal(c, l), p)),
        (a.touchPointID = h),
        (a.isPrimaryTouchPoint = m),
        (a.pressure = b.pressure),
        this.__dispatchTarget(p, a));
      for (var q = n.rollOutStack, r = 0; r < q.length; ) {
        var u = q[r];
        ++r;
        -1 == f.indexOf(u) &&
          (S.remove(q, u),
          (a = tb.__create(
            "touchRollOut",
            null,
            d,
            e,
            p.__globalToLocal(c, l),
            p
          )),
          (a.touchPointID = h),
          (a.isPrimaryTouchPoint = m),
          (a.bubbles = !1),
          (a.pressure = b.pressure),
          this.__dispatchTarget(u, a));
      }
      for (r = 0; r < f.length; )
        (u = f[r]),
          ++r,
          -1 == q.indexOf(u) &&
            (u.hasEventListener("touchRollOver") &&
              ((a = tb.__create(
                "touchRollOver",
                null,
                d,
                e,
                p.__globalToLocal(c, l),
                u
              )),
              (a.touchPointID = h),
              (a.isPrimaryTouchPoint = m),
              (a.bubbles = !1),
              (a.pressure = b.pressure),
              this.__dispatchTarget(u, a)),
            u.hasEventListener("touchRollOut") && q.push(u));
      g != p &&
        (null != g &&
          ((a = tb.__create(
            "touchOver",
            null,
            d,
            e,
            g.__globalToLocal(c, l),
            g
          )),
          (a.touchPointID = h),
          (a.isPrimaryTouchPoint = m),
          (a.bubbles = !0),
          (a.pressure = b.pressure),
          this.__dispatchTarget(g, a)),
        (n.touchOverTarget = g));
      aa.__pool.release(c);
      aa.__pool.release(l);
      k && (this.__touchData.remove(h), n.reset(), fg.__pool.release(n));
    },
    __registerLimeModule: function (a) {
      a.onCreateWindow.add(m(this, this.__addWindow));
      a.onUpdate.add(m(this, this.update));
      a.onExit.add(m(this, this.onModuleExit), !1, 0);
      for (a = vb.devices.iterator(); a.hasNext(); ) {
        var b = a.next();
        this.__onGamepadConnect(b);
      }
      vb.onConnect.add(m(this, this.__onGamepadConnect));
      Jb.onStart.add(m(this, this.onTouchStart));
      Jb.onMove.add(m(this, this.onTouchMove));
      Jb.onEnd.add(m(this, this.onTouchEnd));
    },
    __resize: function () {
      var a = this.stageWidth,
        b = this.stageHeight,
        c = u["int"](this.window.get_width() * this.window.get_scale()),
        d = u["int"](this.window.get_height() * this.window.get_scale());
      this.__logicalWidth = c;
      this.__logicalHeight = d;
      this.__displayMatrix.identity();
      if (0 == this.__logicalWidth && 0 == this.__logicalHeight)
        (this.stageWidth = c), (this.stageHeight = d);
      else {
        this.stageWidth = this.__logicalWidth;
        this.stageHeight = this.__logicalHeight;
        var e = Math.min(c / this.stageWidth, d / this.stageHeight),
          f = Math.round((c - this.stageWidth * e) / 2),
          g = Math.round((d - this.stageHeight * e) / 2);
        this.__displayMatrix.scale(e, e);
        this.__displayMatrix.translate(f, g);
      }
      null != this.context3D &&
        this.context3D.configureBackBuffer(
          this.stageWidth,
          this.stageHeight,
          0,
          !0,
          !0,
          !0
        );
      e = 0;
      for (f = this.stage3Ds; e < f.get_length(); )
        (g = f.get(e)), ++e, g.__resize(this.stageWidth, this.stageHeight);
      null != this.__renderer && this.__renderer.__resize(c, d);
      if (this.stageWidth != a || this.stageHeight != b)
        (this.__renderDirty = !0),
          this.__setTransformDirty(),
          this.__dispatchEvent(new X("resize"));
    },
    __setLogicalSize: function (a, b) {
      this.__logicalWidth = a;
      this.__logicalHeight = b;
      this.__resize();
    },
    __update: function (a, b) {
      a
        ? this.__transformDirty &&
          (Lb.prototype.__update.call(this, !0, b),
          b && (this.__transformDirty = !1))
        : this.__transformDirty || this.__renderDirty
        ? (Lb.prototype.__update.call(this, !1, b),
          b && Y.__supportDOM && (this.__wasDirty = !0))
        : !this.__renderDirty &&
          this.__wasDirty &&
          (Lb.prototype.__update.call(this, !1, b),
          b && (this.__wasDirty = !1));
    },
    set_color: function (a) {
      null == a
        ? ((this.__transparent = !0), (a = 0))
        : (this.__transparent = !1);
      this.__color != a &&
        ((this.__colorSplit[0] = ((a & 16711680) >>> 16) / 255),
        (this.__colorSplit[1] = ((a & 65280) >>> 8) / 255),
        (this.__colorSplit[2] = (a & 255) / 255),
        (this.__colorString = "#" + J.hex(a & 16777215, 6)),
        (this.__renderDirty = !0),
        (this.__color = -16777216 | (a & 16777215)));
      return a;
    },
    get_focus: function () {
      return this.__focus;
    },
    set_focus: function (a) {
      if (a != this.__focus) {
        var b = this.__focus;
        this.__cacheFocus = this.__focus = a;
        if (null != b) {
          var c = new Kg("focusOut", !0, !1, a, !1, 0),
            d = [];
          b.__getInteractive(d);
          d.reverse();
          this.__dispatchStack(c, d);
        }
        null != a &&
          ((b = new Kg("focusIn", !0, !1, b, !1, 0)),
          (c = []),
          a.__getInteractive(c),
          c.reverse(),
          this.__dispatchStack(b, c));
      }
      return a;
    },
    get_frameRate: function () {
      return null != this.window ? this.window.get_frameRate() : 0;
    },
    set_frameRate: function (a) {
      return null != this.window ? this.window.set_frameRate(a) : a;
    },
    set_height: function (a) {
      return this.get_height();
    },
    get_mouseX: function () {
      return this.__mouseX;
    },
    get_mouseY: function () {
      return this.__mouseY;
    },
    get_quality: function () {
      return this.__quality;
    },
    set_rotation: function (a) {
      return 0;
    },
    set_scaleMode: function (a) {
      return (this.__scaleMode = a);
    },
    set_scaleX: function (a) {
      return 0;
    },
    set_scaleY: function (a) {
      return 0;
    },
    set_transform: function (a) {
      return this.get_transform();
    },
    set_width: function (a) {
      return this.get_width();
    },
    set_x: function (a) {
      return 0;
    },
    set_y: function (a) {
      return 0;
    },
    __class__: Jg,
    __properties__: v(Lb.prototype.__properties__, {
      set_scaleMode: "set_scaleMode",
      get_quality: "get_quality",
      set_frameRate: "set_frameRate",
      get_frameRate: "get_frameRate",
      set_focus: "set_focus",
      get_focus: "get_focus",
      set_color: "set_color",
    }),
  });
  var Uh = function (a) {
    ea.call(this);
    this.__stage = a;
    this.__height = 0;
    this.__projectionTransform = new Xh();
    this.__renderTransform = new Xh();
    this.__y = this.__x = this.__width = 0;
    this.visible = !0;
    0 < a.stageWidth &&
      0 < a.stageHeight &&
      this.__resize(a.stageWidth, a.stageHeight);
  };
  l["openfl.display.Stage3D"] = Uh;
  Uh.__name__ = ["openfl", "display", "Stage3D"];
  Uh.__super__ = ea;
  Uh.prototype = v(ea.prototype, {
    context3D: null,
    visible: null,
    __height: null,
    __indexBuffer: null,
    __projectionTransform: null,
    __renderTransform: null,
    __stage: null,
    __vertexBuffer: null,
    __width: null,
    __x: null,
    __y: null,
    __canvas: null,
    __resize: function (a, b) {
      if (a != this.__width || b != this.__height) {
        null != this.__canvas &&
          ((this.__canvas.width = a), (this.__canvas.height = b));
        for (
          var c = this.__projectionTransform,
            d = [
              2 / (0 < a ? a : 1),
              0,
              0,
              0,
              0,
              -2 / (0 < b ? b : 1),
              0,
              0,
              0,
              0,
              -0.001,
              0,
              -1,
              1,
              0,
              1,
            ],
            e = Eb.toFloatVector(null),
            f = 0,
            g = d.length;
          f < g;

        ) {
          var h = f++;
          e.set(h, d[h]);
        }
        c.copyRawDataFrom(e);
        this.__renderTransform.identity();
        this.__renderTransform.appendTranslation(this.__x, this.__y, 0);
        this.__renderTransform.append(this.__projectionTransform);
        this.__width = a;
        this.__height = b;
      }
    },
    get_x: function () {
      return this.__x;
    },
    get_y: function () {
      return this.__y;
    },
    __class__: Uh,
    __properties__: { get_y: "get_y", get_x: "get_x" },
  });
  var mg = function (a, b) {
    sg.call(this, a, b);
    this.stage = new Jg(
      this,
      A.hasField(b.context, "background") ? b.context.background : 16777215
    );
    if (A.hasField(b, "parameters"))
      try {
        this.stage.get_loaderInfo().parameters = b.parameters;
      } catch (c) {
        ta.lastException = c;
      }
    A.hasField(b, "resizable") &&
      !b.resizable &&
      this.stage.__setLogicalSize(b.width, b.height);
    a.addModule(this.stage);
  };
  l["openfl.display.Window"] = mg;
  mg.__name__ = ["openfl", "display", "Window"];
  mg.__super__ = sg;
  mg.prototype = v(sg.prototype, { __class__: mg });
  var Da = function (a, b, c) {
    this.driverInfo = "OpenGL (Direct blitting)";
    this.backBufferHeight = this.backBufferWidth = 0;
    ea.call(this);
    this.__stage = a;
    this.__contextState = b;
    this.__stage3D = c;
    this.__context = a.window.context;
    this.gl = this.__context.webgl;
    null == this.__contextState && (this.__contextState = new Oh());
    this.__state = new Oh();
    this.__vertexConstants = new de(512);
    this.__fragmentConstants = new de(512);
    a = [1, 1, 1, 1];
    this.__positionScale = null != a ? new de(a) : null;
    this.__programs = new sa();
    -1 == Da.GL_MAX_VIEWPORT_DIMS &&
      (Da.GL_MAX_VIEWPORT_DIMS = this.gl.getParameter(
        this.gl.MAX_VIEWPORT_DIMS
      ));
    this.maxBackBufferHeight = this.maxBackBufferWidth =
      Da.GL_MAX_VIEWPORT_DIMS;
    -1 == Da.GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT &&
      ((a = this.gl.getExtension("EXT_texture_filter_anisotropic")),
      (null != a && A.hasField(a, "MAX_TEXTURE_MAX_ANISOTROPY_EXT")) ||
        (a = this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")),
      (null != a && A.hasField(a, "MAX_TEXTURE_MAX_ANISOTROPY_EXT")) ||
        (a = this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")),
      null != a
        ? ((Da.GL_TEXTURE_MAX_ANISOTROPY_EXT = a.TEXTURE_MAX_ANISOTROPY_EXT),
          (Da.GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT = this.gl.getParameter(
            a.MAX_TEXTURE_MAX_ANISOTROPY_EXT
          )))
        : ((Da.GL_TEXTURE_MAX_ANISOTROPY_EXT = 0),
          (Da.GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT = 0)));
    -1 == Da.GL_DEPTH_STENCIL && (Da.GL_DEPTH_STENCIL = this.gl.DEPTH_STENCIL);
    if (null == Da.__driverInfo) {
      a = this.gl.getParameter(this.gl.VENDOR);
      b = this.gl.getParameter(this.gl.VERSION);
      c = this.gl.getParameter(this.gl.RENDERER);
      var d = this.gl.getParameter(this.gl.SHADING_LANGUAGE_VERSION);
      Da.__driverInfo =
        "OpenGL Vendor=" +
        a +
        " Version=" +
        b +
        " Renderer=" +
        c +
        " GLSL=" +
        d;
    }
    this.driverInfo = Da.__driverInfo;
    this.__quadIndexBufferElements = 16383;
    a = this.__quadIndexBufferCount = 6 * this.__quadIndexBufferElements;
    a = null != a ? new Uint16Array(a) : null;
    d = c = b = 0;
    for (var e = this.__quadIndexBufferElements; d < e; )
      d++,
        (a[b] = c),
        (a[b + 1] = c + 1),
        (a[b + 2] = c + 2),
        (a[b + 3] = c + 2),
        (a[b + 4] = c + 1),
        (a[b + 5] = c + 3),
        (b += 6),
        (c += 4);
    this.__quadIndexBuffer = this.createIndexBuffer(
      this.__quadIndexBufferCount
    );
    this.__quadIndexBuffer.uploadFromTypedArray(a);
  };
  l["openfl.display3D.Context3D"] = Da;
  Da.__name__ = ["openfl", "display3D", "Context3D"];
  Da.__super__ = ea;
  Da.prototype = v(ea.prototype, {
    backBufferHeight: null,
    backBufferWidth: null,
    driverInfo: null,
    maxBackBufferHeight: null,
    maxBackBufferWidth: null,
    gl: null,
    __backBufferAntiAlias: null,
    __backBufferTexture: null,
    __backBufferWantsBestResolution: null,
    __backBufferWantsBestResolutionOnBrowserZoom: null,
    __context: null,
    __contextState: null,
    __renderStage3DProgram: null,
    __enableErrorChecking: null,
    __fragmentConstants: null,
    __frontBufferTexture: null,
    __positionScale: null,
    __present: null,
    __programs: null,
    __quadIndexBuffer: null,
    __quadIndexBufferCount: null,
    __quadIndexBufferElements: null,
    __stage: null,
    __stage3D: null,
    __state: null,
    __vertexConstants: null,
    clear: function (a, b, c, d, e, f, g) {
      null == g && (g = 7);
      null == f && (f = 0);
      null == e && (e = 1);
      null == d && (d = 1);
      null == c && (c = 0);
      null == b && (b = 0);
      null == a && (a = 0);
      this.__flushGLFramebuffer();
      this.__flushGLViewport();
      var h = 0;
      if (0 != (g & 1)) {
        null != this.__state.renderToTexture ||
          this.__stage.context3D != this ||
          this.__stage.__renderer.__cleared ||
          (this.__stage.__renderer.__cleared = !0);
        h |= this.gl.COLOR_BUFFER_BIT;
        if (
          1 != this.__contextState.colorMaskRed ||
          1 != this.__contextState.colorMaskGreen ||
          1 != this.__contextState.colorMaskBlue ||
          1 != this.__contextState.colorMaskAlpha
        )
          this.gl.colorMask(!0, !0, !0, !0),
            (this.__contextState.colorMaskRed = !0),
            (this.__contextState.colorMaskGreen = !0),
            (this.__contextState.colorMaskBlue = !0),
            (this.__contextState.colorMaskAlpha = !0);
        this.gl.clearColor(a, b, c, d);
      }
      0 != (g & 2) &&
        ((h |= this.gl.DEPTH_BUFFER_BIT),
        1 != this.__contextState.depthMask &&
          (this.gl.depthMask(!0), (this.__contextState.depthMask = !0)),
        this.gl.clearDepth(e));
      0 != (g & 4) &&
        ((h |= this.gl.STENCIL_BUFFER_BIT),
        255 != this.__contextState.stencilWriteMask &&
          (this.gl.stencilMask(255),
          (this.__contextState.stencilWriteMask = 255)),
        this.gl.clearStencil(f),
        (this.__contextState.stencilWriteMask = 255));
      0 != h && (this.__setGLScissorTest(!1), this.gl.clear(h));
    },
    configureBackBuffer: function (a, b, c, d, e, f) {
      null == f && (f = !1);
      null == e && (e = !1);
      null == d && (d = !0);
      if (null == this.__stage3D)
        (this.backBufferWidth = a),
          (this.backBufferHeight = b),
          (this.__backBufferAntiAlias = c),
          (this.__state.backBufferEnableDepthAndStencil = d),
          (this.__backBufferWantsBestResolution = e),
          (this.__backBufferWantsBestResolutionOnBrowserZoom = f);
      else {
        if (
          null == this.__backBufferTexture ||
          this.backBufferWidth != a ||
          this.backBufferHeight != b
        ) {
          this.__backBufferTexture = this.createRectangleTexture(a, b, 1, !0);
          this.__frontBufferTexture = this.createRectangleTexture(a, b, 1, !0);
          null == this.__stage3D.__vertexBuffer &&
            (this.__stage3D.__vertexBuffer = this.createVertexBuffer(4, 5));
          var g = Eb.toFloatVector(null, null, null, [
            a,
            b,
            0,
            1,
            1,
            0,
            b,
            0,
            0,
            1,
            a,
            0,
            0,
            1,
            0,
            0,
            0,
            0,
            0,
            0,
          ]);
          this.__stage3D.__vertexBuffer.uploadFromVector(g, 0, 20);
          null == this.__stage3D.__indexBuffer &&
            ((this.__stage3D.__indexBuffer = this.createIndexBuffer(6)),
            (g = Eb.toIntVector(null, null, null, [0, 1, 2, 2, 1, 3])),
            this.__stage3D.__indexBuffer.uploadFromVector(g, 0, 6));
        }
        this.backBufferWidth = a;
        this.backBufferHeight = b;
        this.__backBufferAntiAlias = c;
        this.__state.backBufferEnableDepthAndStencil = d;
        this.__backBufferWantsBestResolution = e;
        this.__backBufferWantsBestResolutionOnBrowserZoom = f;
        this.__state.__primaryGLFramebuffer =
          this.__backBufferTexture.__getGLFramebuffer(d, c, 0);
        this.__frontBufferTexture.__getGLFramebuffer(d, c, 0);
      }
    },
    createIndexBuffer: function (a, b) {
      null == b && (b = 1);
      return new Xj(this, a, b);
    },
    createProgram: function (a) {
      null == a && (a = 0);
      return new Yj(this, a);
    },
    createRectangleTexture: function (a, b, c, d) {
      return new Lg(this, a, b, el.toString(c), d);
    },
    createVertexBuffer: function (a, b, c) {
      null == c && (c = 1);
      return new Zj(this, a, b, Yh.toString(c));
    },
    drawTriangles: function (a, b, c) {
      null == c && (c = -1);
      null == b && (b = 0);
      null == this.__state.renderToTexture &&
        (this.__stage.context3D != this ||
          this.__stage.__renderer.__cleared ||
          this.__stage.__renderer.__clear());
      this.__flushGL();
      null != this.__state.program && this.__state.program.__flush();
      c = -1 == c ? a.__numIndices : 3 * c;
      this.__bindGLElementArrayBuffer(a.__id);
      this.gl.drawElements(this.gl.TRIANGLES, c, a.__elementType, b);
    },
    present: function () {
      this.setRenderToBackBuffer();
      if (null != this.__stage3D) {
        var a = this.__backBufferTexture;
        this.__backBufferTexture = this.__frontBufferTexture;
        this.__frontBufferTexture = a;
        this.__state.__primaryGLFramebuffer =
          this.__backBufferTexture.__getGLFramebuffer(
            this.__state.backBufferEnableDepthAndStencil,
            this.__backBufferAntiAlias,
            0
          );
      }
      this.__present = !0;
    },
    setBlendFactors: function (a, b) {
      this.__state.blendSourceFactor = a;
      this.__state.blendDestinationFactor = b;
      this.__setGLBlendEquation(this.gl.FUNC_ADD);
    },
    setColorMask: function (a, b, c, d) {
      this.__state.colorMaskRed = a;
      this.__state.colorMaskGreen = b;
      this.__state.colorMaskBlue = c;
      this.__state.colorMaskAlpha = d;
    },
    setCulling: function (a) {
      this.__state.culling = a;
    },
    setDepthTest: function (a, b) {
      this.__state.depthMask = a;
      this.__state.depthCompareMode = b;
    },
    setProgram: function (a) {
      this.__state.program = a;
      this.__state.shader = null;
      if (null != a)
        for (var b = 0, c = a.__samplerStates.length; b < c; ) {
          var d = b++;
          null == this.__state.samplerStates[d]
            ? (this.__state.samplerStates[d] = a.__samplerStates[d].clone())
            : this.__state.samplerStates[d].copyFrom(a.__samplerStates[d]);
        }
    },
    setProgramConstantsFromMatrix: function (a, b, c, d) {
      null == d && (d = !1);
      if (null != this.__state.program && 1 == this.__state.program.__format) {
        this.__flushGLProgram();
        a = new de(16);
        for (var e = 0; 16 > e; ) {
          var f = e++;
          a[f] = c.rawData.get(f);
        }
        rb.uniformMatrix4fv(this.gl, b, d, a);
      } else
        (e = (a = 1 == a) ? this.__vertexConstants : this.__fragmentConstants),
          (c = c.rawData),
          (f = 4 * b),
          d
            ? ((e[f++] = c.get(0)),
              (e[f++] = c.get(4)),
              (e[f++] = c.get(8)),
              (e[f++] = c.get(12)),
              (e[f++] = c.get(1)),
              (e[f++] = c.get(5)),
              (e[f++] = c.get(9)),
              (e[f++] = c.get(13)),
              (e[f++] = c.get(2)),
              (e[f++] = c.get(6)),
              (e[f++] = c.get(10)),
              (e[f++] = c.get(14)),
              (e[f++] = c.get(3)),
              (e[f++] = c.get(7)),
              (e[f++] = c.get(11)))
            : ((e[f++] = c.get(0)),
              (e[f++] = c.get(1)),
              (e[f++] = c.get(2)),
              (e[f++] = c.get(3)),
              (e[f++] = c.get(4)),
              (e[f++] = c.get(5)),
              (e[f++] = c.get(6)),
              (e[f++] = c.get(7)),
              (e[f++] = c.get(8)),
              (e[f++] = c.get(9)),
              (e[f++] = c.get(10)),
              (e[f++] = c.get(11)),
              (e[f++] = c.get(12)),
              (e[f++] = c.get(13)),
              (e[f++] = c.get(14))),
          (e[f++] = c.get(15)),
          null != this.__state.program &&
            this.__state.program.__markDirty(a, b, 4);
    },
    setRenderToBackBuffer: function () {
      this.__state.renderToTexture = null;
    },
    setRenderToTexture: function (a, b, c, d) {
      null == d && (d = 0);
      null == c && (c = 0);
      null == b && (b = !1);
      this.__state.renderToTexture = a;
      this.__state.renderToTextureDepthStencil = b;
      this.__state.renderToTextureAntiAlias = c;
      this.__state.renderToTextureSurfaceSelector = d;
    },
    setSamplerStateAt: function (a, b, c, d) {
      null == this.__state.samplerStates[a] &&
        (this.__state.samplerStates[a] = new cg());
      a = this.__state.samplerStates[a];
      a.wrap = b;
      a.filter = c;
      a.mipfilter = d;
    },
    setScissorRectangle: function (a) {
      null != a
        ? ((this.__state.scissorEnabled = !0),
          this.__state.scissorRectangle.copyFrom(a))
        : (this.__state.scissorEnabled = !1);
    },
    setStencilActions: function (a, b, c, d, e) {
      null == e && (e = 5);
      null == d && (d = 5);
      null == c && (c = 5);
      null == b && (b = 0);
      null == a && (a = 2);
      this.__state.stencilTriangleFace = a;
      this.__state.stencilCompareMode = b;
      this.__state.stencilPass = c;
      this.__state.stencilDepthFail = d;
      this.__state.stencilFail = e;
    },
    setStencilReferenceValue: function (a, b, c) {
      null == c && (c = 255);
      null == b && (b = 255);
      this.__state.stencilReferenceValue = a;
      this.__state.stencilReadMask = b;
      this.__state.stencilWriteMask = c;
    },
    setTextureAt: function (a, b) {
      this.__state.textures[a] = b;
    },
    setVertexBufferAt: function (a, b, c, d) {
      null == d && (d = 4);
      null == c && (c = 0);
      if (null == b)
        this.gl.disableVertexAttribArray(a), this.__bindGLArrayBuffer(null);
      else
        switch (
          (this.__bindGLArrayBuffer(b.__id),
          this.gl.enableVertexAttribArray(a),
          (c *= 4),
          d)
        ) {
          case 0:
            this.gl.vertexAttribPointer(
              a,
              4,
              this.gl.UNSIGNED_BYTE,
              !0,
              b.__stride,
              c
            );
            break;
          case 1:
            this.gl.vertexAttribPointer(a, 1, this.gl.FLOAT, !1, b.__stride, c);
            break;
          case 2:
            this.gl.vertexAttribPointer(a, 2, this.gl.FLOAT, !1, b.__stride, c);
            break;
          case 3:
            this.gl.vertexAttribPointer(a, 3, this.gl.FLOAT, !1, b.__stride, c);
            break;
          case 4:
            this.gl.vertexAttribPointer(a, 4, this.gl.FLOAT, !1, b.__stride, c);
            break;
          default:
            throw new G(new xb());
        }
    },
    __bindGLArrayBuffer: function (a) {
      this.__contextState.__currentGLArrayBuffer != a &&
        (this.gl.bindBuffer(this.gl.ARRAY_BUFFER, a),
        (this.__contextState.__currentGLArrayBuffer = a));
    },
    __bindGLElementArrayBuffer: function (a) {
      this.__contextState.__currentGLElementArrayBuffer != a &&
        (this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, a),
        (this.__contextState.__currentGLElementArrayBuffer = a));
    },
    __bindGLFramebuffer: function (a) {
      this.__contextState.__currentGLFramebuffer != a &&
        (this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, a),
        (this.__contextState.__currentGLFramebuffer = a));
    },
    __bindGLTexture2D: function (a) {
      this.gl.bindTexture(this.gl.TEXTURE_2D, a);
      this.__contextState.__currentGLTexture2D = a;
    },
    __bindGLTextureCubeMap: function (a) {
      this.gl.bindTexture(this.gl.TEXTURE_CUBE_MAP, a);
      this.__contextState.__currentGLTextureCubeMap = a;
    },
    __drawTriangles: function (a, b) {
      null == a && (a = 0);
      null == this.__state.renderToTexture &&
        (this.__stage.context3D != this ||
          this.__stage.__renderer.__cleared ||
          this.__stage.__renderer.__clear());
      this.__flushGL();
      null != this.__state.program && this.__state.program.__flush();
      this.gl.drawArrays(this.gl.TRIANGLES, a, b);
    },
    __flushGL: function () {
      this.__flushGLProgram();
      this.__flushGLFramebuffer();
      this.__flushGLViewport();
      this.__flushGLBlend();
      this.__flushGLColor();
      this.__flushGLCulling();
      this.__flushGLDepth();
      this.__flushGLScissor();
      this.__flushGLStencil();
      this.__flushGLTextures();
    },
    __flushGLBlend: function () {
      if (
        this.__contextState.blendDestinationFactor !=
          this.__state.blendDestinationFactor ||
        this.__contextState.blendSourceFactor != this.__state.blendSourceFactor
      ) {
        switch (this.__state.blendSourceFactor) {
          case 0:
            var a = this.gl.DST_ALPHA;
            break;
          case 1:
            a = this.gl.DST_COLOR;
            break;
          case 2:
            a = this.gl.ONE;
            break;
          case 3:
            a = this.gl.ONE_MINUS_DST_ALPHA;
            break;
          case 4:
            a = this.gl.ONE_MINUS_DST_COLOR;
            break;
          case 5:
            a = this.gl.ONE_MINUS_SRC_ALPHA;
            break;
          case 6:
            a = this.gl.ONE_MINUS_SRC_COLOR;
            break;
          case 7:
            a = this.gl.SRC_ALPHA;
            break;
          case 8:
            a = this.gl.SRC_COLOR;
            break;
          case 9:
            a = this.gl.ZERO;
            break;
          default:
            throw new G(new xb());
        }
        switch (this.__state.blendDestinationFactor) {
          case 0:
            var b = this.gl.DST_ALPHA;
            break;
          case 1:
            b = this.gl.DST_COLOR;
            break;
          case 2:
            b = this.gl.ONE;
            break;
          case 3:
            b = this.gl.ONE_MINUS_DST_ALPHA;
            break;
          case 4:
            b = this.gl.ONE_MINUS_DST_COLOR;
            break;
          case 5:
            b = this.gl.ONE_MINUS_SRC_ALPHA;
            break;
          case 6:
            b = this.gl.ONE_MINUS_SRC_COLOR;
            break;
          case 7:
            b = this.gl.SRC_ALPHA;
            break;
          case 8:
            b = this.gl.SRC_COLOR;
            break;
          case 9:
            b = this.gl.ZERO;
            break;
          default:
            throw new G(new xb());
        }
        this.__setGLBlend(!0);
        this.gl.blendFunc(a, b);
        this.__contextState.blendDestinationFactor =
          this.__state.blendDestinationFactor;
        this.__contextState.blendSourceFactor = this.__state.blendSourceFactor;
      }
    },
    __flushGLColor: function () {
      if (
        this.__contextState.colorMaskRed != this.__state.colorMaskRed ||
        this.__contextState.colorMaskGreen != this.__state.colorMaskGreen ||
        this.__contextState.colorMaskBlue != this.__state.colorMaskBlue ||
        this.__contextState.colorMaskAlpha != this.__state.colorMaskAlpha
      )
        this.gl.colorMask(
          this.__state.colorMaskRed,
          this.__state.colorMaskGreen,
          this.__state.colorMaskBlue,
          this.__state.colorMaskAlpha
        ),
          (this.__contextState.colorMaskRed = this.__state.colorMaskRed),
          (this.__contextState.colorMaskGreen = this.__state.colorMaskGreen),
          (this.__contextState.colorMaskBlue = this.__state.colorMaskBlue),
          (this.__contextState.colorMaskAlpha = this.__state.colorMaskAlpha);
    },
    __flushGLCulling: function () {
      if (this.__contextState.culling != this.__state.culling) {
        if (3 == this.__state.culling) this.__setGLCullFace(!1);
        else
          switch ((this.__setGLCullFace(!0), this.__state.culling)) {
            case 0:
              this.gl.cullFace(this.gl.BACK);
              break;
            case 1:
              this.gl.cullFace(this.gl.FRONT);
              break;
            case 2:
              this.gl.cullFace(this.gl.FRONT_AND_BACK);
              break;
            case 3:
              break;
            default:
              throw new G(new xb());
          }
        this.__contextState.culling = this.__state.culling;
      }
    },
    __flushGLDepth: function () {
      var a =
        this.__state.depthMask &&
        (null != this.__state.renderToTexture
          ? this.__state.renderToTextureDepthStencil
          : this.__state.backBufferEnableDepthAndStencil);
      this.__contextState.depthMask != a &&
        (this.gl.depthMask(a), (this.__contextState.depthMask = a));
      if (
        this.__contextState.depthCompareMode != this.__state.depthCompareMode
      ) {
        switch (this.__state.depthCompareMode) {
          case 0:
            this.gl.depthFunc(this.gl.ALWAYS);
            break;
          case 1:
            this.gl.depthFunc(this.gl.EQUAL);
            break;
          case 2:
            this.gl.depthFunc(this.gl.GREATER);
            break;
          case 3:
            this.gl.depthFunc(this.gl.GEQUAL);
            break;
          case 4:
            this.gl.depthFunc(this.gl.LESS);
            break;
          case 5:
            this.gl.depthFunc(this.gl.LEQUAL);
            break;
          case 6:
            this.gl.depthFunc(this.gl.NEVER);
            break;
          case 7:
            this.gl.depthFunc(this.gl.NOTEQUAL);
            break;
          default:
            throw new G(new xb());
        }
        this.__contextState.depthCompareMode = this.__state.depthCompareMode;
      }
    },
    __flushGLFramebuffer: function () {
      if (null != this.__state.renderToTexture) {
        if (
          this.__contextState.renderToTexture != this.__state.renderToTexture ||
          this.__contextState.renderToTextureSurfaceSelector !=
            this.__state.renderToTextureSurfaceSelector
        ) {
          var a = this.__state.renderToTexture.__getGLFramebuffer(
            this.__state.renderToTextureDepthStencil,
            this.__state.renderToTextureAntiAlias,
            this.__state.renderToTextureSurfaceSelector
          );
          this.__bindGLFramebuffer(a);
          this.__contextState.renderToTexture = this.__state.renderToTexture;
          this.__contextState.renderToTextureAntiAlias =
            this.__state.renderToTextureAntiAlias;
          this.__contextState.renderToTextureDepthStencil =
            this.__state.renderToTextureDepthStencil;
          this.__contextState.renderToTextureSurfaceSelector =
            this.__state.renderToTextureSurfaceSelector;
        }
        this.__setGLDepthTest(this.__state.renderToTextureDepthStencil);
        this.__setGLStencilTest(this.__state.renderToTextureDepthStencil);
        this.__setGLFrontFace(!0);
      } else {
        if (
          null == this.__stage &&
          0 == this.backBufferWidth &&
          0 == this.backBufferHeight
        )
          throw new G(new Ob("Context3D backbuffer has not been configured"));
        if (
          null != this.__contextState.renderToTexture ||
          this.__contextState.__currentGLFramebuffer !=
            this.__state.__primaryGLFramebuffer ||
          this.__contextState.backBufferEnableDepthAndStencil !=
            this.__state.backBufferEnableDepthAndStencil
        )
          this.__bindGLFramebuffer(this.__state.__primaryGLFramebuffer),
            (this.__contextState.renderToTexture = null),
            (this.__contextState.backBufferEnableDepthAndStencil =
              this.__state.backBufferEnableDepthAndStencil);
        this.__setGLDepthTest(this.__state.backBufferEnableDepthAndStencil);
        this.__setGLStencilTest(this.__state.backBufferEnableDepthAndStencil);
        this.__setGLFrontFace(this.__stage.context3D != this);
      }
    },
    __flushGLProgram: function () {
      var a = this.__state.shader,
        b = this.__state.program;
      this.__contextState.shader != a &&
        (null != this.__contextState.shader &&
          this.__contextState.shader.__disable(),
        null != a && a.__enable(),
        (this.__contextState.shader = a));
      this.__contextState.program != b &&
        (null != this.__contextState.program &&
          this.__contextState.program.__disable(),
        null != b && b.__enable(),
        (this.__contextState.program = b));
      null != b &&
        0 == b.__format &&
        ((this.__positionScale[1] =
          this.__stage.context3D == this && null == this.__state.renderToTexture
            ? 1
            : -1),
        b.__setPositionScale(this.__positionScale));
    },
    __flushGLScissor: function () {
      if (this.__state.scissorEnabled) {
        this.__setGLScissorTest(!0);
        this.__contextState.scissorEnabled = !0;
        var a = u["int"](this.__state.scissorRectangle.x),
          b = u["int"](this.__state.scissorRectangle.y),
          c = u["int"](this.__state.scissorRectangle.width),
          d = u["int"](this.__state.scissorRectangle.height);
        null == this.__state.renderToTexture &&
          null == this.__stage3D &&
          (b =
            u["int"](
              this.__stage.window.get_height() * this.__stage.window.get_scale()
            ) -
            u["int"](this.__state.scissorRectangle.height) -
            b);
        if (
          this.__contextState.scissorRectangle.x != a ||
          this.__contextState.scissorRectangle.y != b ||
          this.__contextState.scissorRectangle.width != c ||
          this.__contextState.scissorRectangle.height != d
        )
          this.gl.scissor(a, b, c, d),
            this.__contextState.scissorRectangle.setTo(a, b, c, d);
      } else
        this.__contextState.scissorEnabled != this.__state.scissorEnabled &&
          (this.__setGLScissorTest(!1),
          (this.__contextState.scissorEnabled = !1));
    },
    __flushGLStencil: function () {
      var a = this,
        b = function (b) {
          switch (b) {
            case 0:
              return a.gl.ALWAYS;
            case 1:
              return a.gl.EQUAL;
            case 2:
              return a.gl.GREATER;
            case 3:
              return a.gl.GEQUAL;
            case 4:
              return a.gl.LESS;
            case 5:
              return a.gl.LEQUAL;
            case 6:
              return a.gl.NEVER;
            case 7:
              return a.gl.NOTEQUAL;
            default:
              return a.gl.EQUAL;
          }
        },
        c = function (b) {
          switch (b) {
            case 0:
              return a.gl.BACK;
            case 1:
              return a.gl.FRONT;
            case 2:
              return a.gl.FRONT_AND_BACK;
            case 3:
              return a.gl.NONE;
            default:
              return a.gl.FRONT_AND_BACK;
          }
        },
        d = function (b) {
          switch (b) {
            case 0:
              return a.gl.DECR;
            case 1:
              return a.gl.DECR_WRAP;
            case 2:
              return a.gl.INCR;
            case 3:
              return a.gl.INCR_WRAP;
            case 4:
              return a.gl.INVERT;
            case 5:
              return a.gl.KEEP;
            case 6:
              return a.gl.REPLACE;
            case 7:
              return a.gl.ZERO;
            default:
              return a.gl.KEEP;
          }
        };
      if (
        this.__contextState.stencilTriangleFace !=
          this.__state.stencilTriangleFace ||
        this.__contextState.stencilPass != this.__state.stencilPass ||
        this.__contextState.stencilDepthFail != this.__state.stencilDepthFail ||
        this.__contextState.stencilFail != this.__state.stencilFail
      )
        this.gl.stencilOpSeparate(
          c(this.__state.stencilTriangleFace),
          d(this.__state.stencilFail),
          d(this.__state.stencilDepthFail),
          d(this.__state.stencilPass)
        ),
          (this.__contextState.stencilTriangleFace =
            this.__state.stencilTriangleFace),
          (this.__contextState.stencilPass = this.__state.stencilPass),
          (this.__contextState.stencilDepthFail =
            this.__state.stencilDepthFail),
          (this.__contextState.stencilFail = this.__state.stencilFail);
      this.__contextState.stencilWriteMask != this.__state.stencilWriteMask &&
        (this.gl.stencilMask(this.__state.stencilWriteMask),
        (this.__contextState.stencilWriteMask = this.__state.stencilWriteMask));
      if (
        this.__contextState.stencilCompareMode !=
          this.__state.stencilCompareMode ||
        this.__contextState.stencilReferenceValue !=
          this.__state.stencilReferenceValue ||
        this.__contextState.stencilReadMask != this.__state.stencilReadMask
      )
        this.gl.stencilFunc(
          b(this.__state.stencilCompareMode),
          this.__state.stencilReferenceValue,
          this.__state.stencilReadMask
        ),
          (this.__contextState.stencilCompareMode =
            this.__state.stencilCompareMode),
          (this.__contextState.stencilReferenceValue =
            this.__state.stencilReferenceValue),
          (this.__contextState.stencilReadMask = this.__state.stencilReadMask);
    },
    __flushGLTextures: function () {
      for (var a = 0, b, c, d = 0, e = this.__state.textures.length; d < e; ) {
        var f = d++;
        b = this.__state.textures[f];
        c = this.__state.samplerStates[f];
        null == c &&
          ((this.__state.samplerStates[f] = new cg()),
          (c = this.__state.samplerStates[f]));
        this.gl.activeTexture(this.gl.TEXTURE0 + a);
        null != b
          ? (b.__textureTarget == this.gl.TEXTURE_2D
              ? this.__bindGLTexture2D(b.__getTexture())
              : this.__bindGLTextureCubeMap(b.__getTexture()),
            (this.__contextState.textures[f] = b),
            b.__setSamplerState(c))
          : this.__bindGLTexture2D(null);
        null != this.__state.program &&
          0 == this.__state.program.__format &&
          c.textureAlpha &&
          (this.gl.activeTexture(this.gl.TEXTURE0 + a + 4),
          null != b && null != b.__alphaTexture
            ? (b.__alphaTexture.__textureTarget == this.gl.TEXTURE_2D
                ? this.__bindGLTexture2D(b.__alphaTexture.__getTexture())
                : this.__bindGLTextureCubeMap(b.__alphaTexture.__getTexture()),
              b.__alphaTexture.__setSamplerState(c),
              this.gl.uniform1i(
                this.__state.program.__agalAlphaSamplerEnabled[a].location,
                1
              ))
            : (this.__bindGLTexture2D(null),
              this.gl.uniform1i(
                this.__state.program.__agalAlphaSamplerEnabled[a].location,
                0
              )));
        ++a;
      }
    },
    __flushGLViewport: function () {
      if (null == this.__state.renderToTexture)
        if (this.__stage.context3D == this) {
          var a = null == this.__stage3D ? 0 : u["int"](this.__stage3D.get_x()),
            b = u["int"](
              this.__stage.window.get_height() *
                this.__stage.window.get_scale() -
                this.backBufferHeight -
                (null == this.__stage3D ? 0 : this.__stage3D.get_y())
            );
          this.gl.viewport(a, b, this.backBufferWidth, this.backBufferHeight);
        } else
          this.gl.viewport(0, 0, this.backBufferWidth, this.backBufferHeight);
      else
        (b = a = 0),
          u.is(this.__state.renderToTexture, Mg)
            ? ((b = this.__state.renderToTexture),
              (a = b.__width),
              (b = b.__height))
            : u.is(this.__state.renderToTexture, Lg)
            ? ((b = this.__state.renderToTexture),
              (a = b.__width),
              (b = b.__height))
            : u.is(this.__state.renderToTexture, Zh) &&
              ((b = this.__state.renderToTexture), (b = a = b.__size)),
          this.gl.viewport(0, 0, a, b);
    },
    __renderStage3D: function (a) {
      var b = a.context3D;
      if (
        null != b &&
        b != this &&
        null != b.__frontBufferTexture &&
        a.visible &&
        0 < this.backBufferHeight &&
        0 < this.backBufferWidth
      ) {
        if (null == this.__renderStage3DProgram) {
          var c = new L();
          c.assemble(ak.toString(1), "m44 op, va0, vc0\nmov v0, va1");
          var d = new L();
          d.assemble(
            ak.toString(0),
            "tex ft1, v0, fs0 <2d,nearest,nomip>\nmov oc, ft1"
          );
          this.__renderStage3DProgram = this.createProgram();
          this.__renderStage3DProgram.upload(c.agalcode, d.agalcode);
        }
        this.setProgram(this.__renderStage3DProgram);
        this.setBlendFactors(2, 9);
        this.setColorMask(!0, !0, !0, !0);
        this.setCulling(3);
        this.setDepthTest(!1, 0);
        this.setStencilActions();
        this.setStencilReferenceValue(0, 0, 0);
        this.setScissorRectangle(null);
        this.setTextureAt(0, b.__frontBufferTexture);
        this.setVertexBufferAt(0, a.__vertexBuffer, 0, 3);
        this.setVertexBufferAt(1, a.__vertexBuffer, 3, 2);
        this.setProgramConstantsFromMatrix(1, 0, a.__renderTransform, !0);
        this.drawTriangles(a.__indexBuffer);
        this.__present = !0;
      }
    },
    __setGLBlend: function (a) {
      this.__contextState.__enableGLBlend != a &&
        (a ? this.gl.enable(this.gl.BLEND) : this.gl.disable(this.gl.BLEND),
        (this.__contextState.__enableGLBlend = a));
    },
    __setGLBlendEquation: function (a) {
      this.__contextState.__glBlendEquation != a &&
        (this.gl.blendEquation(a), (this.__contextState.__glBlendEquation = a));
    },
    __setGLCullFace: function (a) {
      this.__contextState.__enableGLCullFace != a &&
        (a
          ? this.gl.enable(this.gl.CULL_FACE)
          : this.gl.disable(this.gl.CULL_FACE),
        (this.__contextState.__enableGLCullFace = a));
    },
    __setGLDepthTest: function (a) {
      this.__contextState.__enableGLDepthTest != a &&
        (a
          ? this.gl.enable(this.gl.DEPTH_TEST)
          : this.gl.disable(this.gl.DEPTH_TEST),
        (this.__contextState.__enableGLDepthTest = a));
    },
    __setGLFrontFace: function (a) {
      this.__contextState.__frontFaceGLCCW != a &&
        (this.gl.frontFace(a ? this.gl.CCW : this.gl.CW),
        (this.__contextState.__frontFaceGLCCW = a));
    },
    __setGLScissorTest: function (a) {
      this.__contextState.__enableGLScissorTest != a &&
        (a
          ? this.gl.enable(this.gl.SCISSOR_TEST)
          : this.gl.disable(this.gl.SCISSOR_TEST),
        (this.__contextState.__enableGLScissorTest = a));
    },
    __setGLStencilTest: function (a) {
      this.__contextState.__enableGLStencilTest != a &&
        (a
          ? this.gl.enable(this.gl.STENCIL_TEST)
          : this.gl.disable(this.gl.STENCIL_TEST),
        (this.__contextState.__enableGLStencilTest = a));
    },
    __class__: Da,
  });
  var Yh = {};
  l["openfl.display3D._Context3DBufferUsage.Context3DBufferUsage_Impl_"] = Yh;
  Yh.__name__ = [
    "openfl",
    "display3D",
    "_Context3DBufferUsage",
    "Context3DBufferUsage_Impl_",
  ];
  Yh.fromString = function (a) {
    switch (a) {
      case "dynamicDraw":
        return 0;
      case "staticDraw":
        return 1;
      default:
        return null;
    }
  };
  Yh.toString = function (a) {
    switch (a) {
      case 0:
        return "dynamicDraw";
      case 1:
        return "staticDraw";
      default:
        return null;
    }
  };
  var ak = {};
  l["openfl.display3D._Context3DProgramType.Context3DProgramType_Impl_"] = ak;
  ak.__name__ = [
    "openfl",
    "display3D",
    "_Context3DProgramType",
    "Context3DProgramType_Impl_",
  ];
  ak.toString = function (a) {
    switch (a) {
      case 0:
        return "fragment";
      case 1:
        return "vertex";
      default:
        return null;
    }
  };
  var el = {};
  l["openfl.display3D._Context3DTextureFormat.Context3DTextureFormat_Impl_"] =
    el;
  el.__name__ = [
    "openfl",
    "display3D",
    "_Context3DTextureFormat",
    "Context3DTextureFormat_Impl_",
  ];
  el.toString = function (a) {
    switch (a) {
      case 0:
        return "bgrPacked565";
      case 1:
        return "bgra";
      case 2:
        return "bgraPacked4444";
      case 3:
        return "compressed";
      case 4:
        return "compressedAlpha";
      case 5:
        return "rgbaHalfFloat";
      default:
        return null;
    }
  };
  var Xj = function (a, b, c) {
    this.__context = a;
    this.__numIndices = b;
    a = this.__context.gl;
    this.__elementType = a.UNSIGNED_SHORT;
    this.__id = a.createBuffer();
    this.__usage = 0 == c ? a.DYNAMIC_DRAW : a.STATIC_DRAW;
  };
  l["openfl.display3D.IndexBuffer3D"] = Xj;
  Xj.__name__ = ["openfl", "display3D", "IndexBuffer3D"];
  Xj.prototype = {
    __context: null,
    __elementType: null,
    __id: null,
    __numIndices: null,
    __tempUInt16Array: null,
    __usage: null,
    uploadFromTypedArray: function (a, b) {
      null != a &&
        ((b = this.__context.gl),
        this.__context.__bindGLElementArrayBuffer(this.__id),
        rb.bufferData(b, b.ELEMENT_ARRAY_BUFFER, a, this.__usage));
    },
    uploadFromVector: function (a, b, c) {
      if (null != a) {
        var d = b + c,
          e = this.__tempUInt16Array;
        if (null == this.__tempUInt16Array || this.__tempUInt16Array.length < c)
          (this.__tempUInt16Array = null != c ? new Uint16Array(c) : null),
            null != e && this.__tempUInt16Array.set(e);
        for (c = b; c < d; )
          (e = c++), (this.__tempUInt16Array[e - b] = a.get(e));
        this.uploadFromTypedArray(this.__tempUInt16Array);
      }
    },
    __class__: Xj,
  };
  var Yj = function (a, b) {
    this.__context = a;
    this.__format = b;
    0 == this.__format
      ? ((this.__agalSamplerUsageMask = 0),
        (this.__agalUniforms = new bd()),
        (this.__agalSamplerUniforms = new bd()),
        (this.__agalAlphaSamplerUniforms = new bd()),
        (this.__agalAlphaSamplerEnabled = []))
      : ((this.__glslAttribNames = []),
        (this.__glslAttribTypes = []),
        (this.__glslSamplerNames = []),
        (this.__glslUniformNames = []),
        (this.__glslUniformTypes = []));
    this.__samplerStates = [];
  };
  l["openfl.display3D.Program3D"] = Yj;
  Yj.__name__ = ["openfl", "display3D", "Program3D"];
  Yj.prototype = {
    __agalAlphaSamplerEnabled: null,
    __agalAlphaSamplerUniforms: null,
    __agalFragmentUniformMap: null,
    __agalPositionScale: null,
    __agalSamplerUniforms: null,
    __agalSamplerUsageMask: null,
    __agalUniforms: null,
    __agalVertexUniformMap: null,
    __context: null,
    __format: null,
    __glFragmentShader: null,
    __glFragmentSource: null,
    __glProgram: null,
    __glslAttribNames: null,
    __glslAttribTypes: null,
    __glslSamplerNames: null,
    __glslUniformNames: null,
    __glslUniformTypes: null,
    __glVertexShader: null,
    __glVertexSource: null,
    __samplerStates: null,
    upload: function (a, b) {
      if (0 == this.__format) {
        var c = [];
        a = rc.convertToGLSL(a, null);
        b = rc.convertToGLSL(b, c);
        5 == xa.level &&
          (xa.info(a, {
            fileName: "Program3D.hx",
            lineNumber: 176,
            className: "openfl.display3D.Program3D",
            methodName: "upload",
          }),
          xa.info(b, {
            fileName: "Program3D.hx",
            lineNumber: 177,
            className: "openfl.display3D.Program3D",
            methodName: "upload",
          }));
        this.__deleteShaders();
        this.__uploadFromGLSL(a, b);
        this.__buildAGALUniformList();
        b = 0;
        for (a = c.length; b < a; ) {
          var d = b++;
          this.__samplerStates[d] = c[d];
        }
      }
    },
    __buildAGALUniformList: function () {
      if (1 != this.__format) {
        var a = this.__context.gl;
        this.__agalUniforms.clear();
        this.__agalSamplerUniforms.clear();
        this.__agalAlphaSamplerUniforms.clear();
        this.__agalAlphaSamplerEnabled = [];
        this.__agalSamplerUsageMask = 0;
        var b = a.getProgramParameter(this.__glProgram, a.ACTIVE_UNIFORMS);
        for (var c = new bd(), d = new bd(), e = 0; e < b; ) {
          var f = e++,
            g = a.getActiveUniform(this.__glProgram, f),
            h = g.name,
            n = g.size,
            p = g.type;
          g = new bk(this.__context);
          g.name = h;
          g.size = n;
          g.type = p;
          g.location = a.getUniformLocation(this.__glProgram, g.name);
          h = g.name.indexOf("[");
          0 <= h && (g.name = g.name.substring(0, h));
          switch (g.type) {
            case 35674:
              g.regCount = 2;
              break;
            case 35675:
              g.regCount = 3;
              break;
            case 35676:
              g.regCount = 4;
              break;
            default:
              g.regCount = 1;
          }
          g.regCount *= g.size;
          this.__agalUniforms.add(g);
          if ("vcPositionScale" == g.name) this.__agalPositionScale = g;
          else if (J.startsWith(g.name, "vc"))
            (g.regIndex = u.parseInt(g.name.substring(2))),
              (g.regData = this.__context.__vertexConstants),
              c.add(g);
          else if (J.startsWith(g.name, "fc"))
            (g.regIndex = u.parseInt(g.name.substring(2))),
              (g.regData = this.__context.__fragmentConstants),
              d.add(g);
          else if (
            J.startsWith(g.name, "sampler") &&
            -1 == g.name.indexOf("alpha")
          )
            for (
              g.regIndex = u.parseInt(g.name.substring(7)),
                this.__agalSamplerUniforms.add(g),
                h = 0,
                n = g.regCount;
              h < n;

            )
              (p = h++), (this.__agalSamplerUsageMask |= 1 << (g.regIndex + p));
          else
            J.startsWith(g.name, "sampler") && J.endsWith(g.name, "_alpha")
              ? ((h = g.name.indexOf("_") - 7),
                (g.regIndex = u.parseInt(g.name.substring(7, 7 + h)) + 4),
                this.__agalAlphaSamplerUniforms.add(g))
              : J.startsWith(g.name, "sampler") &&
                J.endsWith(g.name, "_alphaEnabled") &&
                ((g.regIndex = u.parseInt(g.name.substring(7))),
                (this.__agalAlphaSamplerEnabled[g.regIndex] = g));
          5 == xa.level &&
            ca.trace(
              "" +
                f +
                " name:" +
                g.name +
                " type:" +
                g.type +
                " size:" +
                g.size +
                " location:" +
                u.string(g.location),
              {
                fileName: "Program3D.hx",
                lineNumber: 361,
                className: "openfl.display3D.Program3D",
                methodName: "__buildAGALUniformList",
              }
            );
        }
        this.__agalVertexUniformMap = new $h(Di.array(c));
        this.__agalFragmentUniformMap = new $h(Di.array(d));
      }
    },
    __deleteShaders: function () {
      var a = this.__context.gl;
      null != this.__glProgram && (this.__glProgram = null);
      null != this.__glVertexShader &&
        (a.deleteShader(this.__glVertexShader), (this.__glVertexShader = null));
      null != this.__glFragmentShader &&
        (a.deleteShader(this.__glFragmentShader),
        (this.__glFragmentShader = null));
    },
    __disable: function () {},
    __enable: function () {
      var a = this.__context.gl;
      a.useProgram(this.__glProgram);
      if (0 == this.__format) {
        this.__agalVertexUniformMap.markAllDirty();
        this.__agalFragmentUniformMap.markAllDirty();
        for (var b = this.__agalSamplerUniforms.iterator(); b.hasNext(); ) {
          var c = b.next();
          if (1 == c.regCount) a.uniform1i(c.location, c.regIndex);
          else throw new G(new xb("!!! TODO: uniform location on webgl"));
        }
        for (b = this.__agalAlphaSamplerUniforms.iterator(); b.hasNext(); )
          if (((c = b.next()), 1 == c.regCount))
            a.uniform1i(c.location, c.regIndex);
          else throw new G(new xb("!!! TODO: uniform location on webgl"));
      }
    },
    __flush: function () {
      0 == this.__format &&
        (this.__agalVertexUniformMap.flush(),
        this.__agalFragmentUniformMap.flush());
    },
    __markDirty: function (a, b, c) {
      1 != this.__format &&
        (a
          ? this.__agalVertexUniformMap.markDirty(b, c)
          : this.__agalFragmentUniformMap.markDirty(b, c));
    },
    __setPositionScale: function (a) {
      1 != this.__format &&
        null != this.__agalPositionScale &&
        this.__context.gl.uniform4fv(this.__agalPositionScale.location, a);
    },
    __uploadFromGLSL: function (a, b) {
      var c = this.__context.gl;
      this.__glVertexSource = a;
      this.__glFragmentSource = b;
      this.__glVertexShader = c.createShader(c.VERTEX_SHADER);
      c.shaderSource(this.__glVertexShader, a);
      c.compileShader(this.__glVertexShader);
      if (0 == c.getShaderParameter(this.__glVertexShader, c.COMPILE_STATUS)) {
        var d =
          "Error compiling vertex shader\n" +
          c.getShaderInfoLog(this.__glVertexShader);
        xa.error(d + ("\n" + a), {
          fileName: "Program3D.hx",
          lineNumber: 692,
          className: "openfl.display3D.Program3D",
          methodName: "__uploadFromGLSL",
        });
      }
      this.__glFragmentShader = c.createShader(c.FRAGMENT_SHADER);
      c.shaderSource(this.__glFragmentShader, b);
      c.compileShader(this.__glFragmentShader);
      0 == c.getShaderParameter(this.__glFragmentShader, c.COMPILE_STATUS) &&
        ((d =
          "Error compiling fragment shader\n" +
          c.getShaderInfoLog(this.__glFragmentShader)),
        xa.error(d + ("\n" + b), {
          fileName: "Program3D.hx",
          lineNumber: 705,
          className: "openfl.display3D.Program3D",
          methodName: "__uploadFromGLSL",
        }));
      this.__glProgram = c.createProgram();
      if (0 == this.__format)
        for (b = 0; 16 > b; ) {
          d = b++;
          var e = "va" + d;
          -1 != a.indexOf(" " + e) &&
            c.bindAttribLocation(this.__glProgram, d, e);
        }
      else
        for (a = 0, b = this.__glslAttribNames; a < b.length; )
          if (
            ((d = b[a]),
            ++a,
            -1 < d.indexOf("Position") && J.startsWith(d, "openfl_"))
          ) {
            c.bindAttribLocation(this.__glProgram, 0, d);
            break;
          }
      c.attachShader(this.__glProgram, this.__glVertexShader);
      c.attachShader(this.__glProgram, this.__glFragmentShader);
      c.linkProgram(this.__glProgram);
      0 == c.getProgramParameter(this.__glProgram, c.LINK_STATUS) &&
        ((c =
          "Unable to initialize the shader program\n" +
          c.getProgramInfoLog(this.__glProgram)),
        xa.error(c, {
          fileName: "Program3D.hx",
          lineNumber: 751,
          className: "openfl.display3D.Program3D",
          methodName: "__uploadFromGLSL",
        }));
    },
    __class__: Yj,
  };
  var bk = function (a) {
    this.context = a;
    this.isDirty = !0;
    this.regDataPointer = new cj(null, 0);
  };
  l["openfl.display3D.Uniform"] = bk;
  bk.__name__ = ["openfl", "display3D", "Uniform"];
  bk.prototype = {
    name: null,
    location: null,
    type: null,
    size: null,
    regData: null,
    regIndex: null,
    regCount: null,
    isDirty: null,
    context: null,
    regDataPointer: null,
    flush: function () {
      var a = this.context.gl,
        b = 4 * this.regIndex;
      switch (this.type) {
        case 35664:
          Dk.uniform2fv(
            a,
            this.location,
            this.__getUniformRegisters(b, 2 * this.regCount)
          );
          break;
        case 35665:
          var c = this.location;
          b = this.__getUniformRegisters(b, 3 * this.regCount);
          a.uniform3fv(c, b);
          break;
        case 35666:
          c = this.location;
          b = this.__getUniformRegisters(b, 4 * this.regCount);
          a.uniform4fv(c, b);
          break;
        case 35674:
          rb.uniformMatrix2fv(
            a,
            this.location,
            !1,
            this.__getUniformRegisters(b, 4 * this.size)
          );
          break;
        case 35675:
          rb.uniformMatrix3fv(
            a,
            this.location,
            !1,
            this.__getUniformRegisters(b, 9 * this.size)
          );
          break;
        case 35676:
          rb.uniformMatrix4fv(
            a,
            this.location,
            !1,
            this.__getUniformRegisters(b, 16 * this.size)
          );
          break;
        default:
          (c = this.location),
            (b = this.__getUniformRegisters(b, 4 * this.regCount)),
            a.uniform4fv(c, b);
      }
    },
    __getUniformRegisters: function (a, b) {
      return this.regData.subarray(a, a + b);
    },
    __class__: bk,
  };
  var $h = function (a) {
    this.__uniforms = a;
    this.__uniforms.sort(function (a, b) {
      return A.compare(a.regIndex, b.regIndex);
    });
    for (var b = (a = 0), c = this.__uniforms; b < c.length; ) {
      var d = c[b];
      ++b;
      d.regIndex + d.regCount > a && (a = d.regIndex + d.regCount);
    }
    this.__registerLookup = Eb.toObjectVector(null, a);
    a = 0;
    for (b = this.__uniforms; a < b.length; ) {
      c = b[a];
      ++a;
      d = 0;
      for (var e = c.regCount; d < e; ) {
        var f = d++;
        this.__registerLookup.set(c.regIndex + f, c);
      }
    }
    this.__anyDirty = this.__allDirty = !0;
  };
  l["openfl.display3D.UniformMap"] = $h;
  $h.__name__ = ["openfl", "display3D", "UniformMap"];
  $h.prototype = {
    __allDirty: null,
    __anyDirty: null,
    __registerLookup: null,
    __uniforms: null,
    flush: function () {
      if (this.__anyDirty) {
        for (var a = 0, b = this.__uniforms; a < b.length; ) {
          var c = b[a];
          ++a;
          if (this.__allDirty || c.isDirty) c.flush(), (c.isDirty = !1);
        }
        this.__anyDirty = this.__allDirty = !1;
      }
    },
    markAllDirty: function () {
      this.__anyDirty = this.__allDirty = !0;
    },
    markDirty: function (a, b) {
      if (!this.__allDirty)
        for (
          b = a + b,
            b > this.__registerLookup.get_length() &&
              (b = this.__registerLookup.get_length());
          a < b;

        ) {
          var c = this.__registerLookup.get(a);
          null != c
            ? ((this.__anyDirty = c.isDirty = !0),
              (a = c.regIndex + c.regCount))
            : ++a;
        }
    },
    __class__: $h,
  };
  var Zj = function (a, b, c, d) {
    this.__context = a;
    this.__numVertices = b;
    this.__vertexSize = c;
    a = this.__context.gl;
    this.__id = a.createBuffer();
    this.__stride = 4 * this.__vertexSize;
    this.__usage = 0 == Yh.fromString(d) ? a.DYNAMIC_DRAW : a.STATIC_DRAW;
  };
  l["openfl.display3D.VertexBuffer3D"] = Zj;
  Zj.__name__ = ["openfl", "display3D", "VertexBuffer3D"];
  Zj.prototype = {
    __context: null,
    __id: null,
    __numVertices: null,
    __stride: null,
    __tempFloat32Array: null,
    __usage: null,
    __vertexSize: null,
    uploadFromTypedArray: function (a, b) {
      null != a &&
        ((b = this.__context.gl),
        this.__context.__bindGLArrayBuffer(this.__id),
        rb.bufferData(b, b.ARRAY_BUFFER, a, this.__usage));
    },
    uploadFromVector: function (a, b, c) {
      if (null != a) {
        b *= this.__vertexSize;
        var d = c * this.__vertexSize;
        c = b + d;
        var e = this.__tempFloat32Array;
        if (
          null == this.__tempFloat32Array ||
          this.__tempFloat32Array.length < d
        )
          (this.__tempFloat32Array = null != d ? new de(d) : null),
            null != e && this.__tempFloat32Array.set(e);
        for (d = b; d < c; )
          (e = d++), (this.__tempFloat32Array[e - b] = a.get(e));
        this.uploadFromTypedArray(this.__tempFloat32Array);
      }
    },
    __class__: Zj,
  };
  var Ga = function (a) {
    ea.call(this);
    this.__context = a;
    var b = this.__context.gl;
    this.__textureID = b.createTexture();
    this.__textureContext = this.__context.__context;
    if (null == Ga.__supportsBGRA) {
      Ga.__textureInternalFormat = b.RGBA;
      Ga.__supportsBGRA = !1;
      Ga.__textureFormat = b.RGBA;
      Ga.__compressedFormats = new mb();
      Ga.__compressedFormatsAlpha = new mb();
      a = b.getExtension("WEBGL_compressed_texture_s3tc");
      var c = b.getExtension("WEBGL_compressed_texture_etc1");
      b = b.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
      null != a &&
        (Ga.__compressedFormats.set(0, a.COMPRESSED_RGBA_S3TC_DXT1_EXT),
        Ga.__compressedFormatsAlpha.set(0, a.COMPRESSED_RGBA_S3TC_DXT5_EXT));
      null != c &&
        (Ga.__compressedFormats.set(2, c.COMPRESSED_RGB_ETC1_WEBGL),
        Ga.__compressedFormatsAlpha.set(2, c.COMPRESSED_RGB_ETC1_WEBGL));
      null != b &&
        (Ga.__compressedFormats.set(1, b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG),
        Ga.__compressedFormatsAlpha.set(1, b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG));
    }
    this.__internalFormat = Ga.__textureInternalFormat;
    this.__format = Ga.__textureFormat;
  };
  l["openfl.display3D.textures.TextureBase"] = Ga;
  Ga.__name__ = ["openfl", "display3D", "textures", "TextureBase"];
  Ga.__super__ = ea;
  Ga.prototype = v(ea.prototype, {
    __alphaTexture: null,
    __context: null,
    __format: null,
    __glDepthRenderbuffer: null,
    __glFramebuffer: null,
    __glStencilRenderbuffer: null,
    __height: null,
    __internalFormat: null,
    __optimizeForRenderToTexture: null,
    __samplerState: null,
    __streamingLevels: null,
    __textureContext: null,
    __textureID: null,
    __textureTarget: null,
    __width: null,
    __getGLFramebuffer: function (a, b, c) {
      b = this.__context.gl;
      null == this.__glFramebuffer &&
        ((this.__glFramebuffer = b.createFramebuffer()),
        this.__context.__bindGLFramebuffer(this.__glFramebuffer),
        b.framebufferTexture2D(
          b.FRAMEBUFFER,
          b.COLOR_ATTACHMENT0,
          b.TEXTURE_2D,
          this.__textureID,
          0
        ),
        this.__context.__enableErrorChecking &&
          ((c = b.checkFramebufferStatus(b.FRAMEBUFFER)),
          c != b.FRAMEBUFFER_COMPLETE &&
            ca.trace(
              "Error: Context3D.setRenderToTexture status:" +
                c +
                " width:" +
                this.__width +
                " height:" +
                this.__height,
              {
                fileName: "TextureBase.hx",
                lineNumber: 176,
                className: "openfl.display3D.textures.TextureBase",
                methodName: "__getGLFramebuffer",
              }
            )));
      a &&
        null == this.__glDepthRenderbuffer &&
        (this.__context.__bindGLFramebuffer(this.__glFramebuffer),
        0 != Da.GL_DEPTH_STENCIL
          ? ((this.__glStencilRenderbuffer = this.__glDepthRenderbuffer =
              b.createRenderbuffer()),
            b.bindRenderbuffer(b.RENDERBUFFER, this.__glDepthRenderbuffer),
            b.renderbufferStorage(
              b.RENDERBUFFER,
              Da.GL_DEPTH_STENCIL,
              this.__width,
              this.__height
            ),
            b.framebufferRenderbuffer(
              b.FRAMEBUFFER,
              b.DEPTH_STENCIL_ATTACHMENT,
              b.RENDERBUFFER,
              this.__glDepthRenderbuffer
            ))
          : ((this.__glDepthRenderbuffer = b.createRenderbuffer()),
            (this.__glStencilRenderbuffer = b.createRenderbuffer()),
            b.bindRenderbuffer(b.RENDERBUFFER, this.__glDepthRenderbuffer),
            b.renderbufferStorage(
              b.RENDERBUFFER,
              b.DEPTH_COMPONENT16,
              this.__width,
              this.__height
            ),
            b.bindRenderbuffer(b.RENDERBUFFER, this.__glStencilRenderbuffer),
            b.renderbufferStorage(
              b.RENDERBUFFER,
              b.STENCIL_INDEX8,
              this.__width,
              this.__height
            ),
            b.framebufferRenderbuffer(
              b.FRAMEBUFFER,
              b.DEPTH_ATTACHMENT,
              b.RENDERBUFFER,
              this.__glDepthRenderbuffer
            ),
            b.framebufferRenderbuffer(
              b.FRAMEBUFFER,
              b.STENCIL_ATTACHMENT,
              b.RENDERBUFFER,
              this.__glStencilRenderbuffer
            )),
        this.__context.__enableErrorChecking &&
          ((a = b.checkFramebufferStatus(b.FRAMEBUFFER)),
          a != b.FRAMEBUFFER_COMPLETE &&
            ca.trace(
              "Error: Context3D.setRenderToTexture status:" +
                a +
                " width:" +
                this.__width +
                " height:" +
                this.__height,
              {
                fileName: "TextureBase.hx",
                lineNumber: 218,
                className: "openfl.display3D.textures.TextureBase",
                methodName: "__getGLFramebuffer",
              }
            )),
        b.bindRenderbuffer(b.RENDERBUFFER, null));
      return this.__glFramebuffer;
    },
    __getTexture: function () {
      return this.__textureID;
    },
    __setSamplerState: function (a) {
      if (!a.equals(this.__samplerState)) {
        var b = this.__context.gl;
        this.__context.__bindGLTexture2D(this.__textureID);
        var c;
        switch (a.wrap) {
          case 0:
            var d = (c = b.CLAMP_TO_EDGE);
            break;
          case 1:
            c = b.CLAMP_TO_EDGE;
            d = b.REPEAT;
            break;
          case 2:
            d = c = b.REPEAT;
            break;
          case 3:
            c = b.REPEAT;
            d = b.CLAMP_TO_EDGE;
            break;
          default:
            throw new G(new Ob("wrap bad enum"));
        }
        var e = 5 == a.filter ? b.NEAREST : b.LINEAR;
        switch (a.mipfilter) {
          case 0:
            var f =
              5 == a.filter ? b.NEAREST_MIPMAP_LINEAR : b.LINEAR_MIPMAP_LINEAR;
            break;
          case 1:
            f =
              5 == a.filter
                ? b.NEAREST_MIPMAP_NEAREST
                : b.LINEAR_MIPMAP_NEAREST;
            break;
          case 2:
            f = 5 == a.filter ? b.NEAREST : b.LINEAR;
            break;
          default:
            throw new G(new Ob("mipfiter bad enum"));
        }
        b.texParameteri(this.__textureTarget, b.TEXTURE_MIN_FILTER, f);
        b.texParameteri(this.__textureTarget, b.TEXTURE_MAG_FILTER, e);
        b.texParameteri(this.__textureTarget, b.TEXTURE_WRAP_S, c);
        b.texParameteri(this.__textureTarget, b.TEXTURE_WRAP_T, d);
        null == this.__samplerState && (this.__samplerState = a.clone());
        this.__samplerState.copyFrom(a);
        return !0;
      }
      return !1;
    },
    __class__: Ga,
  });
  var Zh = function (a, b, c, d, e) {
    Ga.call(this, a);
    this.__width = this.__height = this.__size = b;
    this.__optimizeForRenderToTexture = d;
    this.__streamingLevels = e;
    this.__textureTarget = this.__context.gl.TEXTURE_CUBE_MAP;
    this.__uploadedSides = 0;
  };
  l["openfl.display3D.textures.CubeTexture"] = Zh;
  Zh.__name__ = ["openfl", "display3D", "textures", "CubeTexture"];
  Zh.__super__ = Ga;
  Zh.prototype = v(Ga.prototype, {
    __framebufferSurface: null,
    __size: null,
    __uploadedSides: null,
    __getGLFramebuffer: function (a, b, c) {
      var d = this.__context.gl;
      null == this.__glFramebuffer &&
        ((this.__glFramebuffer = d.createFramebuffer()),
        (this.__framebufferSurface = -1));
      if (
        this.__framebufferSurface != c &&
        ((this.__framebufferSurface = c),
        this.__context.__bindGLFramebuffer(this.__glFramebuffer),
        d.framebufferTexture2D(
          d.FRAMEBUFFER,
          d.COLOR_ATTACHMENT0,
          d.TEXTURE_CUBE_MAP_POSITIVE_X + c,
          this.__textureID,
          0
        ),
        this.__context.__enableErrorChecking)
      ) {
        var e = d.checkFramebufferStatus(d.FRAMEBUFFER);
        e != d.FRAMEBUFFER_COMPLETE &&
          ca.trace(
            "Error: Context3D.setRenderToTexture status:" +
              e +
              " width:" +
              this.__width +
              " height:" +
              this.__height,
            {
              fileName: "CubeTexture.hx",
              lineNumber: 165,
              className: "openfl.display3D.textures.CubeTexture",
              methodName: "__getGLFramebuffer",
            }
          );
      }
      return Ga.prototype.__getGLFramebuffer.call(this, a, b, c);
    },
    __setSamplerState: function (a) {
      if (Ga.prototype.__setSamplerState.call(this, a)) {
        var b = this.__context.gl;
        2 == a.mipfilter ||
          this.__samplerState.mipmapGenerated ||
          (b.generateMipmap(b.TEXTURE_CUBE_MAP),
          (this.__samplerState.mipmapGenerated = !0));
        if (0 != Da.GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT) {
          switch (a.filter) {
            case 0:
              a = 16;
              break;
            case 1:
              a = 2;
              break;
            case 2:
              a = 4;
              break;
            case 3:
              a = 8;
              break;
            default:
              a = 1;
          }
          a > Da.GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT &&
            (a = Da.GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT);
          b.texParameterf(
            b.TEXTURE_CUBE_MAP,
            Da.GL_TEXTURE_MAX_ANISOTROPY_EXT,
            a
          );
        }
        return !0;
      }
      return !1;
    },
    __class__: Zh,
  });
  var Lg = function (a, b, c, d, e) {
    Ga.call(this, a);
    this.__width = b;
    this.__height = c;
    this.__optimizeForRenderToTexture = e;
    this.__textureTarget = this.__context.gl.TEXTURE_2D;
    this.uploadFromTypedArray(null);
    e && this.__getGLFramebuffer(!0, 0, 0);
  };
  l["openfl.display3D.textures.RectangleTexture"] = Lg;
  Lg.__name__ = ["openfl", "display3D", "textures", "RectangleTexture"];
  Lg.__super__ = Ga;
  Lg.prototype = v(Ga.prototype, {
    uploadFromTypedArray: function (a) {
      var b = this.__context.gl;
      this.__context.__bindGLTexture2D(this.__textureID);
      rb.texImage2D(
        b,
        this.__textureTarget,
        0,
        this.__internalFormat,
        this.__width,
        this.__height,
        0,
        this.__format,
        b.UNSIGNED_BYTE,
        a
      );
      this.__context.__bindGLTexture2D(null);
    },
    __setSamplerState: function (a) {
      if (Ga.prototype.__setSamplerState.call(this, a)) {
        var b = this.__context.gl;
        if (0 != Da.GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT) {
          switch (a.filter) {
            case 0:
              a = 16;
              break;
            case 1:
              a = 2;
              break;
            case 2:
              a = 4;
              break;
            case 3:
              a = 8;
              break;
            default:
              a = 1;
          }
          a > Da.GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT &&
            (a = Da.GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT);
          b.texParameterf(b.TEXTURE_2D, Da.GL_TEXTURE_MAX_ANISOTROPY_EXT, a);
        }
        return !0;
      }
      return !1;
    },
    __uploadFromImage: function (a) {
      var b = this.__context.gl,
        c;
      if (1 == a.buffer.bitsPerPixel) var d = (c = b.ALPHA);
      else (c = Ga.__textureInternalFormat), (d = Ga.__textureFormat);
      this.__context.__bindGLTexture2D(this.__textureID);
      a.type == Za.DATA || a.get_premultiplied()
        ? !a.get_premultiplied() &&
          a.get_transparent() &&
          b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1)
        : b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);
      a.type == Za.DATA
        ? rb.texImage2D(
            b,
            b.TEXTURE_2D,
            0,
            c,
            a.buffer.width,
            a.buffer.height,
            0,
            d,
            b.UNSIGNED_BYTE,
            a.get_data()
          )
        : rb.texImage2D(b, b.TEXTURE_2D, 0, c, d, b.UNSIGNED_BYTE, a.get_src());
      this.__context.__bindGLTexture2D(null);
    },
    __class__: Lg,
  });
  var Mg = function (a, b, c, d, e, f) {
    Ga.call(this, a);
    this.__width = b;
    this.__height = c;
    this.__optimizeForRenderToTexture = e;
    this.__streamingLevels = f;
    a = this.__context.gl;
    this.__textureTarget = a.TEXTURE_2D;
    this.__context.__bindGLTexture2D(this.__textureID);
    rb.texImage2D(
      a,
      this.__textureTarget,
      0,
      this.__internalFormat,
      this.__width,
      this.__height,
      0,
      this.__format,
      a.UNSIGNED_BYTE,
      null
    );
    this.__context.__bindGLTexture2D(null);
    e && this.__getGLFramebuffer(!0, 0, 0);
  };
  l["openfl.display3D.textures.Texture"] = Mg;
  Mg.__name__ = ["openfl", "display3D", "textures", "Texture"];
  Mg.__super__ = Ga;
  Mg.prototype = v(Ga.prototype, {
    __setSamplerState: function (a) {
      if (Ga.prototype.__setSamplerState.call(this, a)) {
        var b = this.__context.gl;
        2 == a.mipfilter ||
          this.__samplerState.mipmapGenerated ||
          (b.generateMipmap(b.TEXTURE_2D),
          (this.__samplerState.mipmapGenerated = !0));
        if (0 != Da.GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT) {
          switch (a.filter) {
            case 0:
              a = 16;
              break;
            case 1:
              a = 2;
              break;
            case 2:
              a = 4;
              break;
            case 3:
              a = 8;
              break;
            default:
              a = 1;
          }
          a > Da.GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT &&
            (a = Da.GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT);
          b.texParameterf(b.TEXTURE_2D, Da.GL_TEXTURE_MAX_ANISOTROPY_EXT, a);
        }
        return !0;
      }
      return !1;
    },
    __class__: Mg,
  });
  var ck = function (a) {
    Ga.call(this, a);
    this.__textureTarget = this.__context.gl.TEXTURE_2D;
  };
  l["openfl.display3D.textures.VideoTexture"] = ck;
  ck.__name__ = ["openfl", "display3D", "textures", "VideoTexture"];
  ck.__super__ = Ga;
  ck.prototype = v(Ga.prototype, {
    __netStream: null,
    __getTexture: function () {
      if (
        !this.__netStream.__video.paused ||
        this.__netStream.get___seeking()
      ) {
        this.__netStream.set___seeking(!1);
        var a = this.__context.gl;
        this.__context.__bindGLTexture2D(this.__textureID);
        rb.texImage2D(
          a,
          a.TEXTURE_2D,
          0,
          a.RGBA,
          a.RGBA,
          a.UNSIGNED_BYTE,
          this.__netStream.__video
        );
      }
      return this.__textureID;
    },
    __class__: ck,
  });
  var Ob = function (a, b) {
    null == b && (b = 0);
    null == a && (a = "");
    this.message = a;
    this.errorID = b;
    this.name = "Error";
  };
  l["openfl.errors.Error"] = Ob;
  Ob.__name__ = ["openfl", "errors", "Error"];
  Ob.prototype = {
    errorID: null,
    message: null,
    name: null,
    toString: function () {
      return null != this.message ? this.message : "Error";
    },
    __class__: Ob,
  };
  var pg = function (a) {
    null == a && (a = "");
    Ob.call(this, a);
    this.name = "ArgumentError";
  };
  l["openfl.errors.ArgumentError"] = pg;
  pg.__name__ = ["openfl", "errors", "ArgumentError"];
  pg.__super__ = Ob;
  pg.prototype = v(Ob.prototype, { __class__: pg });
  var re = function (a) {
    null == a && (a = "");
    Ob.call(this, a);
    this.name = "IOError";
  };
  l["openfl.errors.IOError"] = re;
  re.__name__ = ["openfl", "errors", "IOError"];
  re.__super__ = Ob;
  re.prototype = v(Ob.prototype, { __class__: re });
  var Ng = function (a, b) {
    re.call(this, "End of file was encountered");
    this.name = "EOFError";
    this.errorID = 2030;
  };
  l["openfl.errors.EOFError"] = Ng;
  Ng.__name__ = ["openfl", "errors", "EOFError"];
  Ng.__super__ = re;
  Ng.prototype = v(re.prototype, { __class__: Ng });
  var xb = function (a) {
    null == a && (a = "");
    Ob.call(this, a, 0);
    this.name = "IllegalOperationError";
  };
  l["openfl.errors.IllegalOperationError"] = xb;
  xb.__name__ = ["openfl", "errors", "IllegalOperationError"];
  xb.__super__ = Ob;
  xb.prototype = v(Ob.prototype, { __class__: xb });
  var Jf = function (a) {
    null == a && (a = "");
    Ob.call(this, a, 0);
    this.name = "TypeError";
  };
  l["openfl.errors.TypeError"] = Jf;
  Jf.__name__ = ["openfl", "errors", "TypeError"];
  Jf.__super__ = Ob;
  Jf.prototype = v(Ob.prototype, { __class__: Jf });
  var X = function (a, b, c) {
    null == c && (c = !1);
    null == b && (b = !1);
    this.type = a;
    this.bubbles = b;
    this.cancelable = c;
    this.eventPhase = 2;
  };
  l["openfl.events.Event"] = X;
  X.__name__ = ["openfl", "events", "Event"];
  X.prototype = {
    bubbles: null,
    cancelable: null,
    currentTarget: null,
    eventPhase: null,
    target: null,
    type: null,
    __isCanceled: null,
    __isCanceledNow: null,
    __preventDefault: null,
    isDefaultPrevented: function () {
      return this.__preventDefault;
    },
    preventDefault: function () {
      this.cancelable && (this.__preventDefault = !0);
    },
    __class__: X,
  };
  var se = function (a, b, c, d) {
    null == d && (d = !1);
    null == c && (c = !1);
    null == b && (b = !1);
    X.call(this, a, b, c);
    this.activating = d;
  };
  l["openfl.events.ActivityEvent"] = se;
  se.__name__ = ["openfl", "events", "ActivityEvent"];
  se.__super__ = X;
  se.prototype = v(X.prototype, { activating: null, __class__: se });
  var Pe = function (a, b, c, d) {
    null == d && (d = "");
    null == c && (c = !1);
    null == b && (b = !1);
    X.call(this, a, b, c);
    this.text = d;
  };
  l["openfl.events.TextEvent"] = Pe;
  Pe.__name__ = ["openfl", "events", "TextEvent"];
  Pe.__super__ = X;
  Pe.prototype = v(X.prototype, { text: null, __class__: Pe });
  var uc = function (a, b, c, d, e) {
    null == e && (e = 0);
    null == d && (d = "");
    null == c && (c = !1);
    null == b && (b = !1);
    Pe.call(this, a, b, c, d);
    this.errorID = e;
  };
  l["openfl.events.ErrorEvent"] = uc;
  uc.__name__ = ["openfl", "events", "ErrorEvent"];
  uc.__super__ = Pe;
  uc.prototype = v(Pe.prototype, { errorID: null, __class__: uc });
  var Vg = function (a) {
    this.active = !1;
    this.reset(a);
  };
  l["openfl.events._EventDispatcher.DispatchIterator"] = Vg;
  Vg.__name__ = ["openfl", "events", "_EventDispatcher", "DispatchIterator"];
  Vg.prototype = {
    active: null,
    index: null,
    isCopy: null,
    list: null,
    copy: function () {
      this.isCopy || ((this.list = this.list.slice()), (this.isCopy = !0));
    },
    hasNext: function () {
      return this.index < this.list.length;
    },
    next: function () {
      return this.list[this.index++];
    },
    remove: function (a, b) {
      if (this.active)
        if (this.isCopy) {
          b = this.index;
          for (var c = this.list.length; b < c; ) {
            var d = b++;
            if (this.list[d] == a) {
              this.list.splice(d, 1);
              break;
            }
          }
        } else b < this.index && this.index--;
    },
    reset: function (a) {
      this.list = a;
      this.isCopy = !1;
      this.index = 0;
    },
    start: function () {
      this.active = !0;
    },
    stop: function () {
      this.active = !1;
    },
    __class__: Vg,
  };
  var Ug = function (a, b, c) {
    this.callback = a;
    this.useCapture = b;
    this.priority = c;
  };
  l["openfl.events._EventDispatcher.Listener"] = Ug;
  Ug.__name__ = ["openfl", "events", "_EventDispatcher", "Listener"];
  Ug.prototype = {
    callback: null,
    priority: null,
    useCapture: null,
    match: function (a, b) {
      return A.compareMethods(this.callback, a) ? this.useCapture == b : !1;
    },
    __class__: Ug,
  };
  var Kg = function (a, b, c, d, e, f) {
    null == f && (f = 0);
    null == e && (e = !1);
    null == c && (c = !1);
    null == b && (b = !1);
    X.call(this, a, b, c);
    this.keyCode = f;
    this.shiftKey = e;
    this.relatedObject = d;
  };
  l["openfl.events.FocusEvent"] = Kg;
  Kg.__name__ = ["openfl", "events", "FocusEvent"];
  Kg.__super__ = X;
  Kg.prototype = v(X.prototype, {
    keyCode: null,
    relatedObject: null,
    shiftKey: null,
    __class__: Kg,
  });
  var Ae = function (a, b, c, d, e) {
    null == e && (e = !1);
    null == d && (d = !1);
    null == c && (c = !1);
    null == b && (b = !1);
    se.call(this, a, b, c);
    this.fullScreen = d;
    this.interactive = e;
  };
  l["openfl.events.FullScreenEvent"] = Ae;
  Ae.__name__ = ["openfl", "events", "FullScreenEvent"];
  Ae.__super__ = se;
  Ae.prototype = v(se.prototype, {
    fullScreen: null,
    interactive: null,
    __class__: Ae,
  });
  var Uf = function (a, b, c, d) {
    null == c && (c = !1);
    null == b && (b = !0);
    X.call(this, a, b, c);
    this.device = d;
  };
  l["openfl.events.GameInputEvent"] = Uf;
  Uf.__name__ = ["openfl", "events", "GameInputEvent"];
  Uf.__super__ = X;
  Uf.prototype = v(X.prototype, { device: null, __class__: Uf });
  var ai = function (a, b, c, d, e) {
    null == e && (e = !1);
    null == d && (d = 0);
    null == c && (c = !1);
    null == b && (b = !1);
    this.status = d;
    this.redirected = e;
    X.call(this, a, b, c);
  };
  l["openfl.events.HTTPStatusEvent"] = ai;
  ai.__name__ = ["openfl", "events", "HTTPStatusEvent"];
  ai.__super__ = X;
  ai.prototype = v(X.prototype, {
    redirected: null,
    responseHeaders: null,
    responseURL: null,
    status: null,
    __class__: ai,
  });
  var Og = function (a, b, c, d, e) {
    null == e && (e = 0);
    null == d && (d = "");
    null == c && (c = !1);
    null == b && (b = !0);
    uc.call(this, a, b, c, d, e);
  };
  l["openfl.events.IOErrorEvent"] = Og;
  Og.__name__ = ["openfl", "events", "IOErrorEvent"];
  Og.__super__ = uc;
  Og.prototype = v(uc.prototype, { __class__: Og });
  var Wh = function (a, b, c, d, e, f, g, h, n, p, k) {
    null == k && (k = !1);
    null == p && (p = !1);
    null == n && (n = !1);
    null == h && (h = !1);
    null == g && (g = !1);
    null == e && (e = 0);
    null == d && (d = 0);
    null == c && (c = !1);
    null == b && (b = !1);
    X.call(this, a, b, c);
    this.charCode = d;
    this.keyCode = e;
    this.keyLocation = null != f ? f : 0;
    this.ctrlKey = g;
    this.altKey = h;
    this.shiftKey = n;
    this.controlKey = p;
    this.commandKey = k;
  };
  l["openfl.events.KeyboardEvent"] = Wh;
  Wh.__name__ = ["openfl", "events", "KeyboardEvent"];
  Wh.__super__ = X;
  Wh.prototype = v(X.prototype, {
    altKey: null,
    charCode: null,
    ctrlKey: null,
    commandKey: null,
    controlKey: null,
    keyCode: null,
    keyLocation: null,
    shiftKey: null,
    __class__: Wh,
  });
  var ua = function (a, b, c, d, e, f, g, h, n, p, k, l, m) {
    null == m && (m = 0);
    null == l && (l = !1);
    null == k && (k = 0);
    null == p && (p = !1);
    null == n && (n = !1);
    null == h && (h = !1);
    null == g && (g = !1);
    null == e && (e = 0);
    null == d && (d = 0);
    null == c && (c = !1);
    null == b && (b = !0);
    X.call(this, a, b, c);
    this.shiftKey = n;
    this.altKey = h;
    this.ctrlKey = g;
    this.bubbles = b;
    this.relatedObject = f;
    this.delta = k;
    this.localX = d;
    this.localY = e;
    this.buttonDown = p;
    this.commandKey = l;
    this.clickCount = m;
    this.isRelatedObjectInaccessible = !1;
    this.stageY = this.stageX = NaN;
  };
  l["openfl.events.MouseEvent"] = ua;
  ua.__name__ = ["openfl", "events", "MouseEvent"];
  ua.__create = function (a, b, c, d, e, f, g) {
    null == g && (g = 0);
    a = new ua(
      a,
      !0,
      !1,
      e.x,
      e.y,
      null,
      ua.__ctrlKey,
      ua.__altKey,
      ua.__shiftKey,
      ua.__buttonDown,
      g,
      ua.__commandKey
    );
    a.stageX = c;
    a.stageY = d;
    a.target = f;
    return a;
  };
  ua.__super__ = X;
  ua.prototype = v(X.prototype, {
    altKey: null,
    buttonDown: null,
    commandKey: null,
    clickCount: null,
    ctrlKey: null,
    delta: null,
    isRelatedObjectInaccessible: null,
    localX: null,
    localY: null,
    relatedObject: null,
    shiftKey: null,
    stageX: null,
    stageY: null,
    __class__: ua,
  });
  var Ef = function (a, b, c, d) {
    null == c && (c = !1);
    null == b && (b = !1);
    this.info = d;
    X.call(this, a, b, c);
  };
  l["openfl.events.NetStatusEvent"] = Ef;
  Ef.__name__ = ["openfl", "events", "NetStatusEvent"];
  Ef.__super__ = X;
  Ef.prototype = v(X.prototype, { info: null, __class__: Ef });
  var gg = function (a, b, c, d, e) {
    null == e && (e = 0);
    null == d && (d = 0);
    null == c && (c = !1);
    null == b && (b = !1);
    X.call(this, a, b, c);
    this.bytesLoaded = d;
    this.bytesTotal = e;
  };
  l["openfl.events.ProgressEvent"] = gg;
  gg.__name__ = ["openfl", "events", "ProgressEvent"];
  gg.__super__ = X;
  gg.prototype = v(X.prototype, {
    bytesLoaded: null,
    bytesTotal: null,
    __class__: gg,
  });
  var Yg = function (a, b, c, d, e, f) {
    null == f && (f = !0);
    null == c && (c = !1);
    null == b && (b = !1);
    X.call(this, a, b, c);
    this.objectMatrix = d;
    this.objectColorTransform = e;
    this.allowSmoothing = f;
  };
  l["openfl.events.RenderEvent"] = Yg;
  Yg.__name__ = ["openfl", "events", "RenderEvent"];
  Yg.__super__ = X;
  Yg.prototype = v(X.prototype, {
    allowSmoothing: null,
    objectColorTransform: null,
    objectMatrix: null,
    renderer: null,
    __class__: Yg,
  });
  var bi = function (a, b, c, d, e) {
    null == e && (e = 0);
    null == d && (d = "");
    null == c && (c = !1);
    null == b && (b = !1);
    uc.call(this, a, b, c, d, e);
  };
  l["openfl.events.SecurityErrorEvent"] = bi;
  bi.__name__ = ["openfl", "events", "SecurityErrorEvent"];
  bi.__super__ = uc;
  bi.prototype = v(uc.prototype, { __class__: bi });
  var hg = function (a, b, c) {
    null == c && (c = !1);
    null == b && (b = !1);
    X.call(this, a, b, c);
  };
  l["openfl.events.TimerEvent"] = hg;
  hg.__name__ = ["openfl", "events", "TimerEvent"];
  hg.__super__ = X;
  hg.prototype = v(X.prototype, { __class__: hg });
  var tb = function (
    a,
    b,
    c,
    d,
    e,
    f,
    g,
    h,
    n,
    p,
    k,
    l,
    m,
    q,
    r,
    u,
    t,
    v,
    w,
    x
  ) {
    null == u && (u = !1);
    null == r && (r = !1);
    null == q && (q = !1);
    null == m && (m = !1);
    null == l && (l = !1);
    null == p && (p = 0);
    null == n && (n = 0);
    null == h && (h = 0);
    null == g && (g = 0);
    null == f && (f = 0);
    null == e && (e = !1);
    null == d && (d = 0);
    null == c && (c = !1);
    null == b && (b = !0);
    X.call(this, a, b, c);
    this.touchPointID = d;
    this.isPrimaryTouchPoint = e;
    this.localX = f;
    this.localY = g;
    this.sizeX = h;
    this.sizeY = n;
    this.pressure = p;
    this.relatedObject = k;
    this.ctrlKey = l;
    this.altKey = m;
    this.shiftKey = q;
    this.commandKey = r;
    this.controlKey = u;
    this.stageY = this.stageX = NaN;
  };
  l["openfl.events.TouchEvent"] = tb;
  tb.__name__ = ["openfl", "events", "TouchEvent"];
  tb.__create = function (a, b, c, d, e, f) {
    a = new tb(a, !0, !1, 0, !0, e.x, e.y, 1, 1, 1);
    a.stageX = c;
    a.stageY = d;
    a.target = f;
    return a;
  };
  tb.__super__ = X;
  tb.prototype = v(X.prototype, {
    altKey: null,
    commandKey: null,
    controlKey: null,
    ctrlKey: null,
    isPrimaryTouchPoint: null,
    localX: null,
    localY: null,
    pressure: null,
    relatedObject: null,
    shiftKey: null,
    sizeX: null,
    sizeY: null,
    stageX: null,
    stageY: null,
    touchPointID: null,
    __class__: tb,
  });
  var Vh = function (a, b, c, d) {
    null == c && (c = !0);
    null == b && (b = !0);
    uc.call(this, a, b, c);
    this.error = d;
  };
  l["openfl.events.UncaughtErrorEvent"] = Vh;
  Vh.__name__ = ["openfl", "events", "UncaughtErrorEvent"];
  Vh.__super__ = uc;
  Vh.prototype = v(uc.prototype, { error: null, __class__: Vh });
  var Sh = function () {
    ea.call(this);
  };
  l["openfl.events.UncaughtErrorEvents"] = Sh;
  Sh.__name__ = ["openfl", "events", "UncaughtErrorEvents"];
  Sh.__super__ = ea;
  Sh.prototype = v(ea.prototype, { __class__: Sh });
  var Tc = function () {
    this.__leftExtension = this.__bottomExtension = 0;
    this.__needSecondBitmapData = !0;
    this.__numShaderPasses = 0;
    this.__preserveObject = !1;
    this.__rightExtension = 0;
    this.__shaderBlendMode = 10;
    this.__topExtension = 0;
    this.__smooth = !0;
  };
  l["openfl.filters.BitmapFilter"] = Tc;
  Tc.__name__ = ["openfl", "filters", "BitmapFilter"];
  Tc.prototype = {
    __bottomExtension: null,
    __leftExtension: null,
    __needSecondBitmapData: null,
    __numShaderPasses: null,
    __preserveObject: null,
    __renderDirty: null,
    __rightExtension: null,
    __shaderBlendMode: null,
    __smooth: null,
    __topExtension: null,
    __applyFilter: function (a, b, c, d) {
      return b;
    },
    __initShader: function (a, b) {
      return null;
    },
    __class__: Tc,
  };
  var vc = function (a) {
    null == this.__glFragmentSource &&
      (this.__glFragmentSource =
        "varying vec2 openfl_TextureCoordv;\n\t\t\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\t\t\n\t\tvoid main(void) {\n\t\t\t\n\t\t\tgl_FragColor = texture2D (openfl_Texture, openfl_TextureCoordv);\n\t\t\t\n\t\t}");
    null == this.__glVertexSource &&
      (this.__glVertexSource =
        "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\t\n\t\tvarying vec2 openfl_TextureCoordv;\n\t\t\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\t\t\n\t\tvoid main(void) {\n\t\t\t\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\t\t\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\t\n\t\t}");
    Rc.call(this, a);
    this.__isGenerated = !0;
    this.__initGL();
  };
  l["openfl.filters.BitmapFilterShader"] = vc;
  vc.__name__ = ["openfl", "filters", "BitmapFilterShader"];
  vc.__super__ = Rc;
  vc.prototype = v(Rc.prototype, {
    openfl_Position: null,
    openfl_TextureCoord: null,
    openfl_Matrix: null,
    openfl_TextureSize: null,
    openfl_Texture: null,
    __class__: vc,
  });
  var ci = function () {
    null == this.__glFragmentSource &&
      (this.__glFragmentSource =
        "uniform sampler2D openfl_Texture;\n\t\t\n\t\tvarying vec2 vBlurCoords[7];\n\t\t\n\t\tvoid main(void) {\n\t\t\t\n\t\t\tvec4 sum = vec4(0.0);\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[0]) * 0.00443;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[1]) * 0.05399;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[2]) * 0.24197;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[3]) * 0.39894;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[4]) * 0.24197;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[5]) * 0.05399;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[6]) * 0.00443;\n\t\t\t\n\t\t\tgl_FragColor = sum;\n\t\t\t\n\t\t}");
    null == this.__glVertexSource &&
      (this.__glVertexSource =
        "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\t\n\t\tuniform mat4 openfl_Matrix;\n\t\t\n\t\tuniform vec2 uRadius;\n\t\tvarying vec2 vBlurCoords[7];\n\t\tuniform vec2 uTextureSize;\n\t\t\n\t\tvoid main(void) {\n\t\t\t\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\t\n\t\t\tvec2 r = uRadius / uTextureSize;\n\t\t\tvBlurCoords[0] = openfl_TextureCoord - r * 1.0;\n\t\t\tvBlurCoords[1] = openfl_TextureCoord - r * 0.75;\n\t\t\tvBlurCoords[2] = openfl_TextureCoord - r * 0.5;\n\t\t\tvBlurCoords[3] = openfl_TextureCoord;\n\t\t\tvBlurCoords[4] = openfl_TextureCoord + r * 0.5;\n\t\t\tvBlurCoords[5] = openfl_TextureCoord + r * 0.75;\n\t\t\tvBlurCoords[6] = openfl_TextureCoord + r * 1.0;\n\t\t\t\n\t\t}");
    vc.call(this);
    this.uRadius.value = [0, 0];
    this.__isGenerated = !0;
    this.__initGL();
  };
  l["openfl.filters._BlurFilter.BlurShader"] = ci;
  ci.__name__ = ["openfl", "filters", "_BlurFilter", "BlurShader"];
  ci.__super__ = vc;
  ci.prototype = v(vc.prototype, {
    __update: function () {
      this.uTextureSize.value = [
        this.__texture.input.width,
        this.__texture.input.height,
      ];
      vc.prototype.__update.call(this);
    },
    uRadius: null,
    uTextureSize: null,
    __class__: ci,
  });
  var Qe = function (a, b, c) {
    null == c && (c = 1);
    null == b && (b = 4);
    null == a && (a = 4);
    Tc.call(this);
    this.set_blurX(a);
    this.set_blurY(b);
    this.set_quality(c);
    this.__needSecondBitmapData = !0;
    this.__preserveObject = !1;
    this.__renderDirty = !0;
  };
  l["openfl.filters.BlurFilter"] = Qe;
  Qe.__name__ = ["openfl", "filters", "BlurFilter"];
  Qe.__super__ = Tc;
  Qe.prototype = v(Tc.prototype, {
    __blurX: null,
    __blurY: null,
    __horizontalPasses: null,
    __quality: null,
    __verticalPasses: null,
    __applyFilter: function (a, b, c, d) {
      return Pa.gaussianBlur(
        a.image,
        b.image,
        c.__toLimeRectangle(),
        d.__toLimeVector2(),
        this.__blurX,
        this.__blurY,
        this.__quality
      ) == a.image
        ? a
        : b;
    },
    __initShader: function (a, b) {
      b <= this.__horizontalPasses
        ? ((a = Math.pow(0.5, b >> 1)),
          (Qe.__blurShader.uRadius.value[0] = this.get_blurX() * a),
          (Qe.__blurShader.uRadius.value[1] = 0))
        : ((a = Math.pow(0.5, (b - this.__horizontalPasses) >> 1)),
          (Qe.__blurShader.uRadius.value[0] = 0),
          (Qe.__blurShader.uRadius.value[1] = this.get_blurY() * a));
      return Qe.__blurShader;
    },
    get_blurX: function () {
      return this.__blurX;
    },
    set_blurX: function (a) {
      a != this.__blurX &&
        ((this.__blurX = a),
        (this.__renderDirty = !0),
        (this.__rightExtension = this.__leftExtension =
          0 < a ? Math.ceil(a) : 0));
      return a;
    },
    get_blurY: function () {
      return this.__blurY;
    },
    set_blurY: function (a) {
      a != this.__blurY &&
        ((this.__blurY = a),
        (this.__renderDirty = !0),
        (this.__bottomExtension = this.__topExtension =
          0 < a ? Math.ceil(a) : 0));
      return a;
    },
    set_quality: function (a) {
      this.__horizontalPasses =
        0 >= this.__blurX ? 0 : Math.round((a / 4) * this.__blurX) + 1;
      this.__verticalPasses =
        0 >= this.__blurY ? 0 : Math.round((a / 4) * this.__blurY) + 1;
      this.__numShaderPasses = this.__horizontalPasses + this.__verticalPasses;
      a != this.__quality && (this.__renderDirty = !0);
      return (this.__quality = a);
    },
    __class__: Qe,
    __properties__: {
      set_quality: "set_quality",
      set_blurY: "set_blurY",
      get_blurY: "get_blurY",
      set_blurX: "set_blurX",
      get_blurX: "get_blurX",
    },
  });
  var di = function () {
    null == this.__glFragmentSource &&
      (this.__glFragmentSource =
        "varying vec2 openfl_TextureCoordv;\n\t\tuniform sampler2D openfl_Texture;\n\t\t\n\t\tuniform mat4 uMultipliers;\n\t\tuniform vec4 uOffsets;\n\t\t\n\t\tvoid main(void) {\n\t\t\t\n\t\t\tvec4 color = texture2D (openfl_Texture, openfl_TextureCoordv);\n\t\t\t\n\t\t\tif (color.a == 0.0) {\n\t\t\t\t\n\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\tcolor = vec4 (color.rgb / color.a, color.a);\n\t\t\t\tcolor = uOffsets + color * uMultipliers;\n\t\t\t\t\n\t\t\t\tgl_FragColor = vec4 (color.rgb * color.a, color.a);\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}");
    null == this.__glVertexSource &&
      (this.__glVertexSource =
        "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\t\n\t\tvarying vec2 openfl_TextureCoordv;\n\t\t\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\t\n\t\tvoid main(void) {\n\t\t\t\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\t\t\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t\t\n\t\t}");
    vc.call(this);
    this.uMultipliers.value = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];
    this.uOffsets.value = [0, 0, 0, 0];
    this.__isGenerated = !0;
    this.__initGL();
  };
  l["openfl.filters._ColorMatrixFilter.ColorMatrixShader"] = di;
  di.__name__ = [
    "openfl",
    "filters",
    "_ColorMatrixFilter",
    "ColorMatrixShader",
  ];
  di.__super__ = vc;
  di.prototype = v(vc.prototype, {
    init: function (a) {
      var b = this.uMultipliers.value,
        c = this.uOffsets.value;
      b[0] = a[0];
      b[1] = a[1];
      b[2] = a[2];
      b[3] = a[3];
      b[4] = a[5];
      b[5] = a[6];
      b[6] = a[7];
      b[7] = a[8];
      b[8] = a[10];
      b[9] = a[11];
      b[10] = a[12];
      b[11] = a[13];
      b[12] = a[15];
      b[13] = a[16];
      b[14] = a[17];
      b[15] = a[18];
      c[0] = a[4] / 255;
      c[1] = a[9] / 255;
      c[2] = a[14] / 255;
      c[3] = a[19] / 255;
    },
    uMultipliers: null,
    uOffsets: null,
    __class__: di,
  });
  var xd = function (a) {
    Tc.call(this);
    this.set_matrix(a);
    this.__numShaderPasses = 1;
    this.__needSecondBitmapData = !1;
  };
  l["openfl.filters.ColorMatrixFilter"] = xd;
  xd.__name__ = ["openfl", "filters", "ColorMatrixFilter"];
  xd.__super__ = Tc;
  xd.prototype = v(Tc.prototype, {
    __matrix: null,
    __applyFilter: function (a, b, c, d) {
      var e = b.image,
        f = a.image;
      na.convertToData(e);
      na.convertToData(f);
      var g = e.get_data(),
        h = f.get_data(),
        n = u["int"](d.x - c.x);
      d = u["int"](d.y - c.y);
      b = 4 * b.width;
      var p = 4 * a.width,
        k = e.buffer.format,
        l = f.buffer.format;
      e = e.buffer.premultiplied;
      f = f.buffer.premultiplied;
      for (
        var m, q = 0, r, t, v = u["int"](c.y), w = u["int"](c.height);
        v < w;

      )
        for (var x = v++, y = u["int"](c.x), z = u["int"](c.width); y < z; ) {
          t = y++;
          r = x * b + 4 * t;
          t = (x + n) * p + 4 * (t + d);
          switch (k) {
            case 0:
              m =
                ((g[r] & 255) << 24) |
                ((g[r + 1] & 255) << 16) |
                ((g[r + 2] & 255) << 8) |
                (g[r + 3] & 255);
              break;
            case 1:
              m =
                ((g[r + 1] & 255) << 24) |
                ((g[r + 2] & 255) << 16) |
                ((g[r + 3] & 255) << 8) |
                (g[r] & 255);
              break;
            case 2:
              m =
                ((g[r + 2] & 255) << 24) |
                ((g[r + 1] & 255) << 16) |
                ((g[r] & 255) << 8) |
                (g[r + 3] & 255);
          }
          e &&
            0 != (m & 255) &&
            255 != (m & 255) &&
            ((H.unmult = 255 / (m & 255)),
            (m =
              ((H.__clamp[Math.round(((m >>> 24) & 255) * H.unmult)] & 255) <<
                24) |
              ((H.__clamp[Math.round(((m >>> 16) & 255) * H.unmult)] & 255) <<
                16) |
              ((H.__clamp[Math.round(((m >>> 8) & 255) * H.unmult)] & 255) <<
                8) |
              (m & 255)));
          0 == (m & 255)
            ? (q = 0)
            : ((q =
                ((u["int"](
                  Math.max(
                    0,
                    Math.min(
                      this.__matrix[0] * ((m >>> 24) & 255) +
                        this.__matrix[1] * ((m >>> 16) & 255) +
                        this.__matrix[2] * ((m >>> 8) & 255) +
                        this.__matrix[3] * (m & 255) +
                        this.__matrix[4],
                      255
                    )
                  )
                ) &
                  255) <<
                  24) |
                (((q >>> 16) & 255) << 16) |
                (((q >>> 8) & 255) << 8) |
                (q & 255)),
              (r = u["int"](
                Math.max(
                  0,
                  Math.min(
                    this.__matrix[5] * ((m >>> 24) & 255) +
                      this.__matrix[6] * ((m >>> 16) & 255) +
                      this.__matrix[7] * ((m >>> 8) & 255) +
                      this.__matrix[8] * (m & 255) +
                      this.__matrix[9],
                    255
                  )
                )
              )),
              (q =
                (((q >>> 24) & 255) << 24) |
                ((r & 255) << 16) |
                (((q >>> 8) & 255) << 8) |
                (q & 255)),
              (r = u["int"](
                Math.max(
                  0,
                  Math.min(
                    this.__matrix[10] * ((m >>> 24) & 255) +
                      this.__matrix[11] * ((m >>> 16) & 255) +
                      this.__matrix[12] * ((m >>> 8) & 255) +
                      this.__matrix[13] * (m & 255) +
                      this.__matrix[14],
                    255
                  )
                )
              )),
              (q =
                (((q >>> 24) & 255) << 24) |
                (((q >>> 16) & 255) << 16) |
                ((r & 255) << 8) |
                (q & 255)),
              (r = u["int"](
                Math.max(
                  0,
                  Math.min(
                    this.__matrix[15] * ((m >>> 24) & 255) +
                      this.__matrix[16] * ((m >>> 16) & 255) +
                      this.__matrix[17] * ((m >>> 8) & 255) +
                      this.__matrix[18] * (m & 255) +
                      this.__matrix[19],
                    255
                  )
                )
              )),
              (q =
                (((q >>> 24) & 255) << 24) |
                (((q >>> 16) & 255) << 16) |
                (((q >>> 8) & 255) << 8) |
                (r & 255)));
          f &&
            (0 == (q & 255)
              ? 0 != q && (q = 0)
              : 255 != (q & 255) &&
                ((H.a16 = H.__alpha16[q & 255]),
                (q =
                  ((((((q >>> 24) & 255) * H.a16) >> 16) & 255) << 24) |
                  ((((((q >>> 16) & 255) * H.a16) >> 16) & 255) << 16) |
                  ((((((q >>> 8) & 255) * H.a16) >> 16) & 255) << 8) |
                  (q & 255))));
          switch (l) {
            case 0:
              h[t] = (q >>> 24) & 255;
              h[t + 1] = (q >>> 16) & 255;
              h[t + 2] = (q >>> 8) & 255;
              h[t + 3] = q & 255;
              break;
            case 1:
              h[t] = q & 255;
              h[t + 1] = (q >>> 24) & 255;
              h[t + 2] = (q >>> 16) & 255;
              h[t + 3] = (q >>> 8) & 255;
              break;
            case 2:
              (h[t] = (q >>> 8) & 255),
                (h[t + 1] = (q >>> 16) & 255),
                (h[t + 2] = (q >>> 24) & 255),
                (h[t + 3] = q & 255);
          }
        }
      a.image.dirty = !0;
      return a;
    },
    __initShader: function (a, b) {
      xd.__colorMatrixShader.init(this.get_matrix());
      return xd.__colorMatrixShader;
    },
    get_matrix: function () {
      return this.__matrix;
    },
    set_matrix: function (a) {
      null == a &&
        (a = [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0]);
      return (this.__matrix = a);
    },
    __class__: xd,
    __properties__: { set_matrix: "set_matrix", get_matrix: "get_matrix" },
  });
  var Th = function (a, b, c, d, e, f, g, h, n, p, k) {
    null == k && (k = !1);
    null == p && (p = !1);
    null == n && (n = !1);
    null == h && (h = 1);
    null == g && (g = 1);
    null == f && (f = 4);
    null == e && (e = 4);
    null == d && (d = 1);
    null == c && (c = 0);
    null == b && (b = 45);
    null == a && (a = 4);
    Tc.call(this);
    this.__offsetY = this.__offsetX = 0;
    this.__distance = a;
    this.__angle = b;
    this.__color = c;
    this.__alpha = d;
    this.__blurX = e;
    this.__blurY = f;
    this.__strength = g;
    this.__quality = h;
    this.__inner = n;
    this.__knockout = p;
    this.__hideObject = k;
    this.__updateSize();
    this.__needSecondBitmapData = !0;
    this.__preserveObject = !this.__hideObject;
    this.__renderDirty = !0;
  };
  l["openfl.filters.DropShadowFilter"] = Th;
  Th.__name__ = ["openfl", "filters", "DropShadowFilter"];
  Th.__super__ = Tc;
  Th.prototype = v(Tc.prototype, {
    __alpha: null,
    __angle: null,
    __blurX: null,
    __blurY: null,
    __color: null,
    __distance: null,
    __hideObject: null,
    __inner: null,
    __knockout: null,
    __offsetX: null,
    __offsetY: null,
    __quality: null,
    __strength: null,
    __applyFilter: function (a, b, c, d) {
      b.colorTransform(
        b.rect,
        new Ka(
          0,
          0,
          0,
          this.__alpha,
          (this.__color >> 16) & 255,
          (this.__color >> 8) & 255,
          this.__color & 255,
          0
        )
      );
      d = new aa(this.__offsetX, this.__offsetY);
      return Pa.gaussianBlur(
        a.image,
        b.image,
        c.__toLimeRectangle(),
        d.__toLimeVector2(),
        this.__blurX,
        this.__blurY,
        this.__quality,
        this.__strength
      ) == a.image
        ? a
        : b;
    },
    __updateSize: function () {
      this.__offsetX = u["int"](
        this.__distance * Math.cos((this.__angle * Math.PI) / 180)
      );
      this.__offsetY = u["int"](
        this.__distance * Math.sin((this.__angle * Math.PI) / 180)
      );
      this.__topExtension = Math.ceil(
        (0 > this.__offsetY ? -this.__offsetY : 0) + this.__blurY
      );
      this.__bottomExtension = Math.ceil(
        (0 < this.__offsetY ? this.__offsetY : 0) + this.__blurY
      );
      this.__leftExtension = Math.ceil(
        (0 > this.__offsetX ? -this.__offsetX : 0) + this.__blurX
      );
      this.__rightExtension = Math.ceil(
        (0 < this.__offsetX ? this.__offsetX : 0) + this.__blurX
      );
    },
    __class__: Th,
  });
  var ei = function () {
    null == this.__glFragmentSource &&
      (this.__glFragmentSource =
        "uniform sampler2D openfl_Texture;\n\t\t\n\t\tuniform vec4 uColor;\n\t\t\n\t\tvarying vec2 vBlurCoords[7];\n\t\t\n\t\tvoid main(void) {\n\t\t\t\n\t\t\tfloat a = 0.0;\n\t\t\ta += texture2D(openfl_Texture, vBlurCoords[0]).a * 0.00443;\n\t\t\ta += texture2D(openfl_Texture, vBlurCoords[1]).a * 0.05399;\n\t\t\ta += texture2D(openfl_Texture, vBlurCoords[2]).a * 0.24197;\n\t\t\ta += texture2D(openfl_Texture, vBlurCoords[3]).a * 0.39894;\n\t\t\ta += texture2D(openfl_Texture, vBlurCoords[4]).a * 0.24197;\n\t\t\ta += texture2D(openfl_Texture, vBlurCoords[5]).a * 0.05399;\n\t\t\ta += texture2D(openfl_Texture, vBlurCoords[6]).a * 0.00443;\n\t\t\ta *= uColor.a;\n\t\t\t\n\t\t\tgl_FragColor = vec4(uColor.rgb * a, a);\n\t\t\t\n\t\t}");
    null == this.__glVertexSource &&
      (this.__glVertexSource =
        "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\t\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\t\t\n\t\tuniform vec2 uRadius;\n\t\tvarying vec2 vBlurCoords[7];\n\t\t\n\t\tvoid main(void) {\n\t\t\t\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\t\n\t\t\tvec2 r = uRadius / openfl_TextureSize;\n\t\t\tvBlurCoords[0] = openfl_TextureCoord - r * 1.0;\n\t\t\tvBlurCoords[1] = openfl_TextureCoord - r * 0.75;\n\t\t\tvBlurCoords[2] = openfl_TextureCoord - r * 0.5;\n\t\t\tvBlurCoords[3] = openfl_TextureCoord;\n\t\t\tvBlurCoords[4] = openfl_TextureCoord + r * 0.5;\n\t\t\tvBlurCoords[5] = openfl_TextureCoord + r * 0.75;\n\t\t\tvBlurCoords[6] = openfl_TextureCoord + r * 1.0;\n\t\t\t\n\t\t}");
    vc.call(this);
    this.uRadius.value = [0, 0];
    this.uColor.value = [0, 0, 0, 0];
    this.__isGenerated = !0;
    this.__initGL();
  };
  l["openfl.filters._GlowFilter.GlowShader"] = ei;
  ei.__name__ = ["openfl", "filters", "_GlowFilter", "GlowShader"];
  ei.__super__ = vc;
  ei.prototype = v(vc.prototype, {
    uRadius: null,
    uColor: null,
    __class__: ei,
  });
  var Sc = function (a, b, c, d, e, f, g, h) {
    null == h && (h = !1);
    null == g && (g = !1);
    null == f && (f = 1);
    null == e && (e = 2);
    null == d && (d = 6);
    null == c && (c = 6);
    null == b && (b = 1);
    null == a && (a = 16711680);
    Tc.call(this);
    this.__color = a;
    this.__alpha = b;
    this.set_blurX(c);
    this.set_blurY(d);
    this.__strength = e;
    this.set_quality(f);
    this.__inner = g;
    this.__knockout = h;
    this.__renderDirty =
      this.__preserveObject =
      this.__needSecondBitmapData =
        !0;
  };
  l["openfl.filters.GlowFilter"] = Sc;
  Sc.__name__ = ["openfl", "filters", "GlowFilter"];
  Sc.__super__ = Tc;
  Sc.prototype = v(Tc.prototype, {
    __alpha: null,
    __blurX: null,
    __blurY: null,
    __color: null,
    __horizontalPasses: null,
    __inner: null,
    __knockout: null,
    __quality: null,
    __strength: null,
    __verticalPasses: null,
    __applyFilter: function (a, b, c, d) {
      a.colorTransform(
        a.rect,
        new Ka(
          0,
          0,
          0,
          this.__alpha,
          (this.__color >> 16) & 255,
          (this.__color >> 8) & 255,
          this.__color & 255,
          0
        )
      );
      return Pa.gaussianBlur(
        a.image,
        b.image,
        c.__toLimeRectangle(),
        d.__toLimeVector2(),
        this.__blurX,
        this.__blurY,
        this.__quality,
        this.__strength
      ) == a.image
        ? a
        : b;
    },
    __initShader: function (a, b) {
      b <= this.__horizontalPasses
        ? ((a = Math.pow(0.5, b >> 1)),
          (Sc.__glowShader.uRadius.value[0] = this.get_blurX() * a),
          (Sc.__glowShader.uRadius.value[1] = 0))
        : ((a = Math.pow(0.5, (b - this.__horizontalPasses) >> 1)),
          (Sc.__glowShader.uRadius.value[0] = 0),
          (Sc.__glowShader.uRadius.value[1] = this.get_blurY() * a));
      Sc.__glowShader.uColor.value[0] = ((this.get_color() >> 16) & 255) / 255;
      Sc.__glowShader.uColor.value[1] = ((this.get_color() >> 8) & 255) / 255;
      Sc.__glowShader.uColor.value[2] = (this.get_color() & 255) / 255;
      Sc.__glowShader.uColor.value[3] = this.get_alpha();
      return Sc.__glowShader;
    },
    get_alpha: function () {
      return this.__alpha;
    },
    get_blurX: function () {
      return this.__blurX;
    },
    set_blurX: function (a) {
      a != this.__blurX &&
        ((this.__blurX = a),
        (this.__renderDirty = !0),
        (this.__rightExtension = this.__leftExtension =
          0 < a ? Math.ceil(1.5 * a) : 0));
      return a;
    },
    get_blurY: function () {
      return this.__blurY;
    },
    set_blurY: function (a) {
      a != this.__blurY &&
        ((this.__blurY = a),
        (this.__renderDirty = !0),
        (this.__bottomExtension = this.__topExtension =
          0 < a ? Math.ceil(1.5 * a) : 0));
      return a;
    },
    get_color: function () {
      return this.__color;
    },
    set_quality: function (a) {
      this.__horizontalPasses =
        0 >= this.__blurX ? 0 : Math.round((a / 4) * this.__blurX) + 1;
      this.__verticalPasses =
        0 >= this.__blurY ? 0 : Math.round((a / 4) * this.__blurY) + 1;
      this.__numShaderPasses = this.__horizontalPasses + this.__verticalPasses;
      a != this.__quality && (this.__renderDirty = !0);
      return (this.__quality = a);
    },
    __class__: Sc,
    __properties__: {
      set_quality: "set_quality",
      get_color: "get_color",
      set_blurY: "set_blurY",
      get_blurY: "get_blurY",
      set_blurX: "set_blurX",
      get_blurX: "get_blurX",
      get_alpha: "get_alpha",
    },
  });
  var Xh = function (a) {
    if (null != a && 16 == a.get_length()) this.rawData = a.concat(null);
    else {
      a = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];
      for (var b = Eb.toFloatVector(null), c = 0, d = a.length; c < d; ) {
        var e = c++;
        b.set(e, a[e]);
      }
      this.rawData = b;
    }
  };
  l["openfl.geom.Matrix3D"] = Xh;
  Xh.__name__ = ["openfl", "geom", "Matrix3D"];
  Xh.prototype = {
    rawData: null,
    append: function (a) {
      var b = this.rawData.get(0),
        c = this.rawData.get(4),
        d = this.rawData.get(8),
        e = this.rawData.get(12),
        f = this.rawData.get(1),
        g = this.rawData.get(5),
        h = this.rawData.get(9),
        n = this.rawData.get(13),
        p = this.rawData.get(2),
        k = this.rawData.get(6),
        l = this.rawData.get(10),
        m = this.rawData.get(14),
        q = this.rawData.get(3),
        r = this.rawData.get(7),
        u = this.rawData.get(11),
        t = this.rawData.get(15),
        v = a.rawData.get(0),
        w = a.rawData.get(4),
        x = a.rawData.get(8),
        y = a.rawData.get(12),
        z = a.rawData.get(1),
        A = a.rawData.get(5),
        C = a.rawData.get(9),
        B = a.rawData.get(13),
        H = a.rawData.get(2),
        D = a.rawData.get(6),
        F = a.rawData.get(10),
        G = a.rawData.get(14),
        J = a.rawData.get(3),
        I = a.rawData.get(7),
        L = a.rawData.get(11);
      a = a.rawData.get(15);
      this.rawData.set(0, b * v + f * w + p * x + q * y);
      this.rawData.set(1, b * z + f * A + p * C + q * B);
      this.rawData.set(2, b * H + f * D + p * F + q * G);
      this.rawData.set(3, b * J + f * I + p * L + q * a);
      this.rawData.set(4, c * v + g * w + k * x + r * y);
      this.rawData.set(5, c * z + g * A + k * C + r * B);
      this.rawData.set(6, c * H + g * D + k * F + r * G);
      this.rawData.set(7, c * J + g * I + k * L + r * a);
      this.rawData.set(8, d * v + h * w + l * x + u * y);
      this.rawData.set(9, d * z + h * A + l * C + u * B);
      this.rawData.set(10, d * H + h * D + l * F + u * G);
      this.rawData.set(11, d * J + h * I + l * L + u * a);
      this.rawData.set(12, e * v + n * w + m * x + t * y);
      this.rawData.set(13, e * z + n * A + m * C + t * B);
      this.rawData.set(14, e * H + n * D + m * F + t * G);
      this.rawData.set(15, e * J + n * I + m * L + t * a);
    },
    appendTranslation: function (a, b, c) {
      var d = this.rawData;
      d.set(12, d.get(12) + a);
      a = this.rawData;
      a.set(13, a.get(13) + b);
      b = this.rawData;
      b.set(14, b.get(14) + c);
    },
    copyRawDataFrom: function (a, b, c) {
      null == c && (c = !1);
      null == b && (b = 0);
      c && this.transpose();
      for (var d = 0, e = a.get_length() - b; d < e; ) {
        var f = d++;
        this.rawData.set(f, a.get(f + b));
      }
      c && this.transpose();
    },
    identity: function () {
      for (
        var a = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],
          b = Eb.toFloatVector(null),
          c = 0,
          d = a.length;
        c < d;

      ) {
        var e = c++;
        b.set(e, a[e]);
      }
      this.rawData = b;
    },
    transpose: function () {
      var a = this.rawData.copy();
      this.rawData.set(1, a.get(4));
      this.rawData.set(2, a.get(8));
      this.rawData.set(3, a.get(12));
      this.rawData.set(4, a.get(1));
      this.rawData.set(6, a.get(9));
      this.rawData.set(7, a.get(13));
      this.rawData.set(8, a.get(2));
      this.rawData.set(9, a.get(6));
      this.rawData.set(11, a.get(14));
      this.rawData.set(12, a.get(3));
      this.rawData.set(13, a.get(7));
      this.rawData.set(14, a.get(11));
    },
    __class__: Xh,
  };
  var aa = function (a, b) {
    null == b && (b = 0);
    null == a && (a = 0);
    this.x = a;
    this.y = b;
  };
  l["openfl.geom.Point"] = aa;
  aa.__name__ = ["openfl", "geom", "Point"];
  aa.distance = function (a, b) {
    var c = a.x - b.x;
    a = a.y - b.y;
    return Math.sqrt(c * c + a * a);
  };
  aa.interpolate = function (a, b, c) {
    return new aa(b.x + c * (a.x - b.x), b.y + c * (a.y - b.y));
  };
  aa.polar = function (a, b) {
    return new aa(a * Math.cos(b), a * Math.sin(b));
  };
  aa.prototype = {
    x: null,
    y: null,
    copyFrom: function (a) {
      this.x = a.x;
      this.y = a.y;
    },
    setTo: function (a, b) {
      this.x = a;
      this.y = b;
    },
    __toLimeVector2: function () {
      null == aa.__limeVector2 && (aa.__limeVector2 = new fe());
      aa.__limeVector2.setTo(this.x, this.y);
      return aa.__limeVector2;
    },
    __class__: aa,
  };
  var ah = function (a) {
    this.__colorTransform = new Ka();
    this.concatenatedColorTransform = new Ka();
    this.pixelBounds = new Z();
    this.__displayObject = a;
    this.__hasMatrix = !0;
  };
  l["openfl.geom.Transform"] = ah;
  ah.__name__ = ["openfl", "geom", "Transform"];
  ah.prototype = {
    concatenatedColorTransform: null,
    pixelBounds: null,
    __colorTransform: null,
    __displayObject: null,
    __hasMatrix: null,
    __hasMatrix3D: null,
    get_colorTransform: function () {
      return this.__colorTransform;
    },
    set_colorTransform: function (a) {
      this.__colorTransform.__equals(a) ||
        (this.__colorTransform.__copyFrom(a),
        null != a && this.__displayObject.set_alpha(a.alphaMultiplier),
        this.__displayObject.__setRenderDirty());
      return this.__colorTransform;
    },
    get_matrix: function () {
      return this.__hasMatrix ? this.__displayObject.__transform.clone() : null;
    },
    set_matrix: function (a) {
      if (null == a) return (this.__hasMatrix = !1), null;
      this.__hasMatrix = !0;
      this.__hasMatrix3D = !1;
      null != this.__displayObject &&
        this.__setTransform(a.a, a.b, a.c, a.d, a.tx, a.ty);
      return a;
    },
    __setTransform: function (a, b, c, d, e, f) {
      if (null != this.__displayObject) {
        var g = 0 == b ? a : Math.sqrt(a * a + b * b);
        var h = 0 == c ? a : Math.sqrt(c * c + d * d);
        this.__displayObject.__scaleX = g;
        this.__displayObject.__scaleY = h;
        g = (180 / Math.PI) * Math.atan2(d, c) - 90;
        g != this.__displayObject.__rotation &&
          ((this.__displayObject.__rotation = g),
          (g *= Math.PI / 180),
          (this.__displayObject.__rotationSine = Math.sin(g)),
          (this.__displayObject.__rotationCosine = Math.cos(g)));
        this.__displayObject.__transform.a = a;
        this.__displayObject.__transform.b = b;
        this.__displayObject.__transform.c = c;
        this.__displayObject.__transform.d = d;
        this.__displayObject.__transform.tx = e;
        this.__displayObject.__transform.ty = f;
        this.__displayObject.__setTransformDirty();
      }
    },
    __class__: ah,
    __properties__: {
      set_matrix: "set_matrix",
      get_matrix: "get_matrix",
      set_colorTransform: "set_colorTransform",
      get_colorTransform: "get_colorTransform",
    },
  };
  var fl = function () {};
  l["openfl.geom.Vector3D"] = fl;
  fl.__name__ = ["openfl", "geom", "Vector3D"];
  fl.prototype = { __class__: fl };
  var zl = function () {};
  l["openfl.media.ID3Info"] = zl;
  zl.__name__ = ["openfl", "media", "ID3Info"];
  var dk = function (a, b) {
    ea.call(this, this);
    this.bytesTotal = this.bytesLoaded = 0;
    this.isBuffering = !1;
    this.url = null;
    null != a && this.load(a, b);
  };
  l["openfl.media.Sound"] = dk;
  dk.__name__ = ["openfl", "media", "Sound"];
  dk.__super__ = ea;
  dk.prototype = v(ea.prototype, {
    bytesLoaded: null,
    bytesTotal: null,
    isBuffering: null,
    url: null,
    __buffer: null,
    load: function (a, b) {
      var c = this;
      this.url = a.url;
      a = Q.getLibrary("default");
      if (null != a && a.cachedAudioBuffers.exists(this.url))
        this.AudioBuffer_onURLLoad(a.cachedAudioBuffers.get(this.url));
      else
        Ta.loadFromFile(this.url)
          .onComplete(m(this, this.AudioBuffer_onURLLoad))
          .onError(function (a) {
            c.AudioBuffer_onURLLoad(null);
          });
    },
    AudioBuffer_onURLLoad: function (a) {
      null == a
        ? this.dispatchEvent(new Og("ioError"))
        : ((this.__buffer = a), this.dispatchEvent(new X("complete")));
    },
    __class__: dk,
  });
  var ek = function (a, b) {
    ea.call(this, this);
    this.rightPeak = this.leftPeak = 1;
    this.__soundTransform = null != b ? b : new Sf();
    null != a &&
      ((this.__source = a),
      this.__source.onComplete.add(m(this, this.source_onComplete)),
      (this.__isValid = !0),
      this.__source.play());
    te.__registerSoundChannel(this);
  };
  l["openfl.media.SoundChannel"] = ek;
  ek.__name__ = ["openfl", "media", "SoundChannel"];
  ek.__super__ = ea;
  ek.prototype = v(ea.prototype, {
    leftPeak: null,
    rightPeak: null,
    __isValid: null,
    __soundTransform: null,
    __source: null,
    stop: function () {
      te.__unregisterSoundChannel(this);
      this.__isValid && (this.__source.stop(), this.__dispose());
    },
    __dispose: function () {
      this.__isValid &&
        (this.__source.onComplete.remove(m(this, this.source_onComplete)),
        this.__source.dispose(),
        (this.__isValid = !1));
    },
    __updateTransform: function () {
      this.set_soundTransform(this.get_soundTransform());
    },
    get_position: function () {
      return this.__isValid
        ? this.__source.get_currentTime() + this.__source.offset
        : 0;
    },
    set_position: function (a) {
      if (!this.__isValid) return 0;
      this.__source.set_currentTime(u["int"](a) - this.__source.offset);
      return a;
    },
    get_soundTransform: function () {
      return this.__soundTransform.clone();
    },
    set_soundTransform: function (a) {
      if (null != a) {
        this.__soundTransform.pan = a.pan;
        this.__soundTransform.volume = a.volume;
        var b = te.__soundTransform.pan + this.__soundTransform.pan;
        -1 > b && (b = -1);
        1 < b && (b = 1);
        var c = te.__soundTransform.volume * this.__soundTransform.volume;
        this.__isValid &&
          (this.__source.set_gain(c),
          (c = this.__source.get_position()),
          (c.x = b),
          (c.z = -1 * Math.sqrt(1 - Math.pow(b, 2))),
          this.__source.set_position(c));
      }
      return a;
    },
    source_onComplete: function () {
      te.__unregisterSoundChannel(this);
      this.__dispose();
      this.dispatchEvent(new X("soundComplete"));
    },
    __class__: ek,
    __properties__: {
      set_soundTransform: "set_soundTransform",
      get_soundTransform: "get_soundTransform",
      set_position: "set_position",
      get_position: "get_position",
    },
  });
  var Al = function () {};
  l["openfl.media.SoundLoaderContext"] = Al;
  Al.__name__ = ["openfl", "media", "SoundLoaderContext"];
  var Sf = function (a, b) {
    null == b && (b = 0);
    null == a && (a = 1);
    this.volume = a;
    this.pan = b;
    this.rightToRight =
      this.rightToLeft =
      this.leftToRight =
      this.leftToLeft =
        0;
  };
  l["openfl.media.SoundTransform"] = Sf;
  Sf.__name__ = ["openfl", "media", "SoundTransform"];
  Sf.prototype = {
    leftToLeft: null,
    leftToRight: null,
    pan: null,
    rightToLeft: null,
    rightToRight: null,
    volume: null,
    clone: function () {
      return new Sf(this.volume, this.pan);
    },
    __class__: Sf,
  };
  var te = function () {};
  l["openfl.media.SoundMixer"] = te;
  te.__name__ = ["openfl", "media", "SoundMixer"];
  te.__registerSoundChannel = function (a) {
    te.__soundChannels.push(a);
  };
  te.__unregisterSoundChannel = function (a) {
    S.remove(te.__soundChannels, a);
  };
  var fk = function () {
    ea.call(this);
  };
  l["openfl.net.NetConnection"] = fk;
  fk.__name__ = ["openfl", "net", "NetConnection"];
  fk.__super__ = ea;
  fk.prototype = v(ea.prototype, { __class__: fk });
  var gk = function (a, b) {
    ea.call(this);
    this.__connection = a;
    this.__video = T.get_document().createElement("video");
    this.__video.setAttribute("playsinline", "");
    this.__video.setAttribute("webkit-playsinline", "");
    this.__video.addEventListener("error", m(this, this.video_onError), !1);
    this.__video.addEventListener("waiting", m(this, this.video_onWaiting), !1);
    this.__video.addEventListener("ended", m(this, this.video_onEnd), !1);
    this.__video.addEventListener("pause", m(this, this.video_onPause), !1);
    this.__video.addEventListener("seeking", m(this, this.video_onSeeking), !1);
    this.__video.addEventListener("playing", m(this, this.video_onPlaying), !1);
    this.__video.addEventListener(
      "timeupdate",
      m(this, this.video_onTimeUpdate),
      !1
    );
    this.__video.addEventListener(
      "loadstart",
      m(this, this.video_onLoadStart),
      !1
    );
    this.__video.addEventListener("stalled", m(this, this.video_onStalled), !1);
    this.__video.addEventListener(
      "durationchanged",
      m(this, this.video_onDurationChanged),
      !1
    );
    this.__video.addEventListener("canplay", m(this, this.video_onCanPlay), !1);
    this.__video.addEventListener(
      "canplaythrough",
      m(this, this.video_onCanPlayThrough),
      !1
    );
    this.__video.addEventListener(
      "loadedmetadata",
      m(this, this.video_onLoadMetaData),
      !1
    );
  };
  l["openfl.net.NetStream"] = gk;
  gk.__name__ = ["openfl", "net", "NetStream"];
  gk.__super__ = ea;
  gk.prototype = v(ea.prototype, {
    client: null,
    time: null,
    __connection: null,
    __seeking: null,
    __video: null,
    __playStatus: function (a) {
      if (null != this.__video && null != this.client)
        try {
          var b = this.client.onPlayStatus;
          b({
            code: a,
            duration: this.__video.duration,
            position: this.__video.currentTime,
            speed: this.__video.playbackRate,
            start: this.__video.startTime,
          });
        } catch (c) {
          ta.lastException = c;
        }
    },
    video_onCanPlay: function (a) {
      this.__playStatus("NetStream.Play.canplay");
    },
    video_onCanPlayThrough: function (a) {
      this.__playStatus("NetStream.Play.canplaythrough");
    },
    video_onDurationChanged: function (a) {
      this.__playStatus("NetStream.Play.durationchanged");
    },
    video_onEnd: function (a) {
      this.__connection.dispatchEvent(
        new Ef("netStatus", !1, !1, { code: "NetStream.Play.Stop" })
      );
      this.__connection.dispatchEvent(
        new Ef("netStatus", !1, !1, { code: "NetStream.Play.Complete" })
      );
      this.__playStatus("NetStream.Play.Complete");
    },
    video_onError: function (a) {
      this.__connection.dispatchEvent(
        new Ef("netStatus", !1, !1, { code: "NetStream.Play.Stop" })
      );
      this.__playStatus("NetStream.Play.error");
    },
    video_onLoadMetaData: function (a) {
      if (null != this.__video && null != this.client)
        try {
          var b = this.client.onMetaData;
          b({
            width: this.__video.videoWidth,
            height: this.__video.videoHeight,
            duration: this.__video.duration,
          });
        } catch (c) {
          ta.lastException = c;
        }
    },
    video_onLoadStart: function (a) {
      this.__playStatus("NetStream.Play.loadstart");
    },
    video_onPause: function (a) {
      this.__playStatus("NetStream.Play.pause");
    },
    video_onPlaying: function (a) {
      this.__connection.dispatchEvent(
        new Ef("netStatus", !1, !1, { code: "NetStream.Play.Start" })
      );
      this.__playStatus("NetStream.Play.playing");
    },
    video_onSeeking: function (a) {
      this.__playStatus("NetStream.Play.seeking");
      this.__connection.dispatchEvent(
        new Ef("netStatus", !1, !1, { code: "NetStream.Seek.Complete" })
      );
    },
    video_onStalled: function (a) {
      this.__playStatus("NetStream.Play.stalled");
    },
    video_onTimeUpdate: function (a) {
      null != this.__video &&
        ((this.time = this.__video.currentTime),
        this.__playStatus("NetStream.Play.timeupdate"));
    },
    video_onWaiting: function (a) {
      this.__playStatus("NetStream.Play.waiting");
    },
    get___seeking: function () {
      return this.__seeking ? !0 : this.__video.seeking;
    },
    set___seeking: function (a) {
      return (this.__seeking = a);
    },
    __class__: gk,
    __properties__: {
      set___seeking: "set___seeking",
      get___seeking: "get___seeking",
    },
  });
  var Fb = function () {
    ea.call(this);
    this.client = this;
    this.objectEncoding = Fb.defaultObjectEncoding;
  };
  l["openfl.net.SharedObject"] = Fb;
  Fb.__name__ = ["openfl", "net", "SharedObject"];
  Fb.getLocal = function (a, b, c) {
    c = " ~%&\\;:\"',<>?#".split("");
    var d = !0;
    if (null == a || "" == a) d = !1;
    else
      for (var e = 0; e < c.length; ) {
        var f = c[e];
        ++e;
        if (-1 < a.indexOf(f)) {
          d = !1;
          break;
        }
      }
    if (!d) throw new G(new Ob("Error #2134: Cannot create SharedObject."));
    null == b && (b = T.get_window().location.href);
    null == Fb.__sharedObjects &&
      ((Fb.__sharedObjects = new sa()),
      null != nc.current && nc.current.onExit.add(Fb.application_onExit));
    c = b + "/" + a;
    if (!Fb.__sharedObjects.exists(c)) {
      d = new Fb();
      d.data = {};
      d.__localPath = b;
      d.__name = a;
      e = null;
      try {
        var g = T.getLocalStorage();
        null != g && (e = g.getItem(b + ":" + a));
      } catch (n) {
        ta.lastException = n;
      }
      if (null != e && "" != e)
        try {
          var h = new hc(e);
          h.setResolver({
            resolveEnum: I.resolveEnum,
            resolveClass: Fb.__resolveClass,
          });
          d.data = h.unserialize();
        } catch (n) {
          ta.lastException = n;
        }
      Fb.__sharedObjects.set(c, d);
    }
    return Fb.__sharedObjects.get(c);
  };
  Fb.__resolveClass = function (a) {
    return null != a
      ? (J.startsWith(a, "neash.") && (a = J.replace(a, "neash.", "openfl.")),
        J.startsWith(a, "native.") && (a = J.replace(a, "native.", "openfl.")),
        J.startsWith(a, "flash.") && (a = J.replace(a, "flash.", "openfl.")),
        J.startsWith(a, "openfl._v2.") &&
          (a = J.replace(a, "openfl._v2.", "openfl.")),
        J.startsWith(a, "openfl._legacy.") &&
          (a = J.replace(a, "openfl._legacy.", "openfl.")),
        I.resolveClass(a))
      : null;
  };
  Fb.application_onExit = function (a) {
    for (a = Fb.__sharedObjects.iterator(); a.hasNext(); ) a.next().flush();
  };
  Fb.__super__ = ea;
  Fb.prototype = v(ea.prototype, {
    client: null,
    data: null,
    objectEncoding: null,
    __localPath: null,
    __name: null,
    flush: function (a) {
      if (0 == A.fields(this.data).length) return 0;
      a = gc.run(this.data);
      try {
        var b = T.getLocalStorage();
        null != b &&
          (b.removeItem(this.__localPath + ":" + this.__name),
          b.setItem(this.__localPath + ":" + this.__name, a));
      } catch (c) {
        return (ta.lastException = c), 1;
      }
      return 0;
    },
    __class__: Fb,
  });
  var Mh = function (a) {
    ea.call(this);
    this.bytesTotal = this.bytesLoaded = 0;
    this.dataFormat = 1;
    null != a && this.load(a);
  };
  l["openfl.net.URLLoader"] = Mh;
  Mh.__name__ = ["openfl", "net", "URLLoader"];
  Mh.__super__ = ea;
  Mh.prototype = v(ea.prototype, {
    bytesLoaded: null,
    bytesTotal: null,
    data: null,
    dataFormat: null,
    __httpRequest: null,
    load: function (a) {
      var b = this;
      if (0 == this.dataFormat) {
        var c = new qh();
        this.__prepareRequest(c, a);
        c.load()
          .onProgress(m(this, this.httpRequest_onProgress))
          .onError(m(this, this.httpRequest_onError))
          .onComplete(function (a) {
            b.__dispatchStatus();
            b.data = a;
            a = new X("complete");
            b.dispatchEvent(a);
          });
      } else
        (c = new xf()),
          this.__prepareRequest(c, a),
          c
            .load()
            .onProgress(m(this, this.httpRequest_onProgress))
            .onError(m(this, this.httpRequest_onError))
            .onComplete(function (a) {
              b.__dispatchStatus();
              b.data = a;
              a = new X("complete");
              b.dispatchEvent(a);
            });
    },
    __dispatchStatus: function () {
      var a = new ai("httpStatus", !1, !1, this.__httpRequest.responseStatus);
      a.responseURL = this.__httpRequest.uri;
      var b = [];
      if (
        this.__httpRequest.enableResponseHeaders &&
        null != this.__httpRequest.responseHeaders
      )
        for (
          var c = 0, d = this.__httpRequest.responseHeaders;
          c < d.length;

        ) {
          var e = d[c];
          ++c;
          b.push(new hk(e.name, e.value));
        }
      a.responseHeaders = b;
      this.dispatchEvent(a);
    },
    __prepareRequest: function (a, b) {
      this.__httpRequest = a;
      this.__httpRequest.uri = b.url;
      switch (b.method) {
        case "DELETE":
          a = "DELETE";
          break;
        case "HEAD":
          a = "HEAD";
          break;
        case "OPTIONS":
          a = "OPTIONS";
          break;
        case "POST":
          a = "POST";
          break;
        case "PUT":
          a = "PUT";
          break;
        default:
          a = "GET";
      }
      this.__httpRequest.method = a;
      if (null != b.data)
        if (I["typeof"](b.data) == Ca.TObject) {
          a = A.fields(b.data);
          for (var c = 0; c < a.length; ) {
            var d = a[c];
            ++c;
            this.__httpRequest.formData.set(d, A.field(b.data, d));
          }
        } else
          u.is(b.data, eb)
            ? (this.__httpRequest.data = b.data)
            : (this.__httpRequest.data = eb.ofString(u.string(b.data)));
      this.__httpRequest.contentType = b.contentType;
      if (null != b.requestHeaders)
        for (a = 0, c = b.requestHeaders; a < c.length; )
          (d = c[a]),
            ++a,
            this.__httpRequest.headers.push(new gh(d.name, d.value));
      this.__httpRequest.followRedirects = b.followRedirects;
      this.__httpRequest.timeout = u["int"](b.idleTimeout);
      this.__httpRequest.withCredentials = b.manageCookies;
      this.__httpRequest.userAgent = b.userAgent;
      this.__httpRequest.enableResponseHeaders = !0;
    },
    httpRequest_onError: function (a) {
      this.__dispatchStatus();
      var b = 403 == a ? new bi("securityError") : new Og("ioError");
      b.text = u.string(a);
      this.dispatchEvent(b);
    },
    httpRequest_onProgress: function (a, b) {
      var c = new gg("progress");
      c.bytesLoaded = a;
      c.bytesTotal = b;
      this.dispatchEvent(c);
    },
    __class__: Mh,
  });
  var Nh = function (a) {
    null != a && (this.url = a);
    this.contentType = null;
    this.followRedirects = Ff.followRedirects;
    this.idleTimeout = 0 < Ff.idleTimeout ? Ff.idleTimeout : 3e4;
    this.manageCookies = Ff.manageCookies;
    this.method = "GET";
    this.requestHeaders = [];
    this.userAgent = Ff.userAgent;
  };
  l["openfl.net.URLRequest"] = Nh;
  Nh.__name__ = ["openfl", "net", "URLRequest"];
  Nh.prototype = {
    contentType: null,
    data: null,
    followRedirects: null,
    idleTimeout: null,
    manageCookies: null,
    method: null,
    requestHeaders: null,
    url: null,
    userAgent: null,
    __class__: Nh,
  };
  var Ff = function () {};
  l["openfl.net.URLRequestDefaults"] = Ff;
  Ff.__name__ = ["openfl", "net", "URLRequestDefaults"];
  var hk = function (a, b) {
    null == b && (b = "");
    null == a && (a = "");
    this.name = a;
    this.value = b;
  };
  l["openfl.net.URLRequestHeader"] = hk;
  hk.__name__ = ["openfl", "net", "URLRequestHeader"];
  hk.prototype = { name: null, value: null, __class__: hk };
  var Rd = function (a) {
    this.parentDomain = null != a ? a : Rd.currentDomain;
  };
  l["openfl.system.ApplicationDomain"] = Rd;
  Rd.__name__ = ["openfl", "system", "ApplicationDomain"];
  Rd.prototype = { parentDomain: null, __class__: Rd };
  var Kb = function (a) {
    qc.call(this, a);
  };
  l["openfl.text.Font"] = Kb;
  Kb.__name__ = ["openfl", "text", "Font"];
  Kb.enumerateFonts = function (a) {
    return Kb.__registeredFonts;
  };
  Kb.fromFile = function (a) {
    var b = new Kb();
    b.__fromFile(a);
    return b;
  };
  Kb.loadFromName = function (a) {
    return qc.loadFromName(a).then(function (a) {
      var b = new Kb();
      b.__fromLimeFont(a);
      return La.withValue(b);
    });
  };
  Kb.__super__ = qc;
  Kb.prototype = v(qc.prototype, {
    __fromLimeFont: function (a) {
      this.__copyFrom(a);
    },
    get_fontName: function () {
      return this.name;
    },
    __class__: Kb,
    __properties__: { get_fontName: "get_fontName" },
  });
  var Hg = function () {
    Y.call(this);
    this.__graphics = new zc(this);
  };
  l["openfl.text.StaticText"] = Hg;
  Hg.__name__ = ["openfl", "text", "StaticText"];
  Hg.__super__ = Y;
  Hg.prototype = v(Y.prototype, { text: null, __class__: Hg });
  var Qd = function (a, b, c, d, e, f, g, h, n, p, k, l, m) {
    this.font = a;
    this.size = b;
    this.color = c;
    this.bold = d;
    this.italic = e;
    this.underline = f;
    this.url = g;
    this.target = h;
    this.align = n;
    this.leftMargin = p;
    this.rightMargin = k;
    this.indent = l;
    this.leading = m;
  };
  l["openfl.text.TextFormat"] = Qd;
  Qd.__name__ = ["openfl", "text", "TextFormat"];
  Qd.prototype = {
    align: null,
    blockIndent: null,
    bold: null,
    bullet: null,
    color: null,
    font: null,
    indent: null,
    italic: null,
    kerning: null,
    leading: null,
    leftMargin: null,
    letterSpacing: null,
    rightMargin: null,
    size: null,
    tabStops: null,
    target: null,
    underline: null,
    url: null,
    __ascent: null,
    __descent: null,
    clone: function () {
      var a = new Qd(
        this.font,
        this.size,
        this.color,
        this.bold,
        this.italic,
        this.underline,
        this.url,
        this.target
      );
      a.align = this.align;
      a.leftMargin = this.leftMargin;
      a.rightMargin = this.rightMargin;
      a.indent = this.indent;
      a.leading = this.leading;
      a.blockIndent = this.blockIndent;
      a.bullet = this.bullet;
      a.kerning = this.kerning;
      a.letterSpacing = this.letterSpacing;
      a.tabStops = this.tabStops;
      a.__ascent = this.__ascent;
      a.__descent = this.__descent;
      return a;
    },
    __merge: function (a) {
      null != a.font && (this.font = a.font);
      null != a.size && (this.size = a.size);
      null != a.color && (this.color = a.color);
      null != a.bold && (this.bold = a.bold);
      null != a.italic && (this.italic = a.italic);
      null != a.underline && (this.underline = a.underline);
      null != a.url && "" != a.url && (this.url = a.url);
      "" == a.url && null == this.url && (this.url = "");
      null != a.target && (this.target = a.target);
      null != a.align && (this.align = a.align);
      null != a.leftMargin && (this.leftMargin = a.leftMargin);
      null != a.rightMargin && (this.rightMargin = a.rightMargin);
      null != a.indent && (this.indent = a.indent);
      null != a.leading && (this.leading = a.leading);
      null != a.blockIndent && (this.blockIndent = a.blockIndent);
      null != a.bullet && (this.bullet = a.bullet);
      null != a.kerning && (this.kerning = a.kerning);
      null != a.letterSpacing && (this.letterSpacing = a.letterSpacing);
      null != a.tabStops && (this.tabStops = a.tabStops);
      null != a.__ascent && (this.__ascent = a.__ascent);
      null != a.__descent && (this.__descent = a.__descent);
    },
    __class__: Qd,
  };
  var Yk = {};
  l["openfl.text._TextFormatAlign.TextFormatAlign_Impl_"] = Yk;
  Yk.__name__ = ["openfl", "text", "_TextFormatAlign", "TextFormatAlign_Impl_"];
  Yk.fromString = function (a) {
    switch (a) {
      case "center":
        return 0;
      case "end":
        return 1;
      case "justify":
        return 2;
      case "left":
        return 3;
      case "right":
        return 4;
      case "start":
        return 5;
      default:
        return null;
    }
  };
  var Ha = function () {
    ea.call(this);
    Ha.__instances.push(this);
  };
  l["openfl.ui.GameInput"] = Ha;
  Ha.__name__ = ["openfl", "ui", "GameInput"];
  Ha.__getDevice = function (a) {
    if (null == a) return null;
    if (!Ha.__devices.exists(a)) {
      var b = new ik(a.get_guid(), a.get_name());
      Ha.__deviceList.push(b);
      Ha.__devices.set(a, b);
      Ha.numDevices = Ha.__deviceList.length;
    }
    return Ha.__devices.get(a);
  };
  Ha.__onGamepadAxisMove = function (a, b, c) {
    a = Ha.__getDevice(a);
    if (null != a && a.enabled) {
      if (!a.__axis.exists(b)) {
        switch (b) {
          case 0:
            var d = "LEFT_X";
            break;
          case 1:
            d = "LEFT_Y";
            break;
          case 2:
            d = "RIGHT_X";
            break;
          case 3:
            d = "RIGHT_Y";
            break;
          case 4:
            d = "TRIGGER_LEFT";
            break;
          case 5:
            d = "TRIGGER_RIGHT";
            break;
          default:
            d = "UNKNOWN (" + b + ")";
        }
        d = new ue(a, "AXIS_" + d, -1, 1);
        a.__axis.set(b, d);
        a.__controls.push(d);
      }
      b = a.__axis.get(b);
      b.value = c;
      b.dispatchEvent(new X("change"));
    }
  };
  Ha.__onGamepadButtonDown = function (a, b) {
    a = Ha.__getDevice(a);
    if (null != a && a.enabled) {
      if (!a.__button.exists(b)) {
        switch (b) {
          case 0:
            var c = "A";
            break;
          case 1:
            c = "B";
            break;
          case 2:
            c = "X";
            break;
          case 3:
            c = "Y";
            break;
          case 4:
            c = "BACK";
            break;
          case 5:
            c = "GUIDE";
            break;
          case 6:
            c = "START";
            break;
          case 7:
            c = "LEFT_STICK";
            break;
          case 8:
            c = "RIGHT_STICK";
            break;
          case 9:
            c = "LEFT_SHOULDER";
            break;
          case 10:
            c = "RIGHT_SHOULDER";
            break;
          case 11:
            c = "DPAD_UP";
            break;
          case 12:
            c = "DPAD_DOWN";
            break;
          case 13:
            c = "DPAD_LEFT";
            break;
          case 14:
            c = "DPAD_RIGHT";
            break;
          default:
            c = "UNKNOWN (" + b + ")";
        }
        c = new ue(a, "BUTTON_" + c, 0, 1);
        a.__button.set(b, c);
        a.__controls.push(c);
      }
      b = a.__button.get(b);
      b.value = 1;
      b.dispatchEvent(new X("change"));
    }
  };
  Ha.__onGamepadButtonUp = function (a, b) {
    a = Ha.__getDevice(a);
    if (null != a && a.enabled) {
      if (!a.__button.exists(b)) {
        switch (b) {
          case 0:
            var c = "A";
            break;
          case 1:
            c = "B";
            break;
          case 2:
            c = "X";
            break;
          case 3:
            c = "Y";
            break;
          case 4:
            c = "BACK";
            break;
          case 5:
            c = "GUIDE";
            break;
          case 6:
            c = "START";
            break;
          case 7:
            c = "LEFT_STICK";
            break;
          case 8:
            c = "RIGHT_STICK";
            break;
          case 9:
            c = "LEFT_SHOULDER";
            break;
          case 10:
            c = "RIGHT_SHOULDER";
            break;
          case 11:
            c = "DPAD_UP";
            break;
          case 12:
            c = "DPAD_DOWN";
            break;
          case 13:
            c = "DPAD_LEFT";
            break;
          case 14:
            c = "DPAD_RIGHT";
            break;
          default:
            c = "UNKNOWN (" + b + ")";
        }
        c = new ue(a, "BUTTON_" + c, 0, 1);
        a.__button.set(b, c);
        a.__controls.push(c);
      }
      b = a.__button.get(b);
      b.value = 0;
      b.dispatchEvent(new X("change"));
    }
  };
  Ha.__onGamepadConnect = function (a) {
    a = Ha.__getDevice(a);
    if (null != a)
      for (var b = 0, c = Ha.__instances; b < c.length; ) {
        var d = c[b];
        ++b;
        d.dispatchEvent(new Uf("deviceAdded", !0, !1, a));
      }
  };
  Ha.__onGamepadDisconnect = function (a) {
    var b = Ha.__devices.get(a);
    if (null != b) {
      Ha.__devices.exists(a) &&
        (S.remove(Ha.__deviceList, Ha.__devices.get(a)),
        Ha.__devices.remove(a));
      Ha.numDevices = Ha.__deviceList.length;
      a = 0;
      for (var c = Ha.__instances; a < c.length; ) {
        var d = c[a];
        ++a;
        d.dispatchEvent(new Uf("deviceRemoved", !0, !1, b));
      }
    }
  };
  Ha.__super__ = ea;
  Ha.prototype = v(ea.prototype, {
    addEventListener: function (a, b, c, d, e) {
      null == e && (e = !1);
      null == d && (d = 0);
      null == c && (c = !1);
      ea.prototype.addEventListener.call(this, a, b, c, d, e);
      if ("deviceAdded" == a)
        for (a = 0, b = Ha.__deviceList; a < b.length; )
          (c = b[a]), ++a, this.dispatchEvent(new Uf("deviceAdded", !0, !1, c));
    },
    __class__: Ha,
  });
  var ue = function (a, b, c, d, e) {
    null == e && (e = 0);
    ea.call(this);
    this.device = a;
    this.id = b;
    this.minValue = c;
    this.maxValue = d;
    this.value = e;
  };
  l["openfl.ui.GameInputControl"] = ue;
  ue.__name__ = ["openfl", "ui", "GameInputControl"];
  ue.__super__ = ea;
  ue.prototype = v(ea.prototype, {
    device: null,
    id: null,
    maxValue: null,
    minValue: null,
    value: null,
    __class__: ue,
  });
  var ik = function (a, b) {
    this.__controls = [];
    this.__button = new mb();
    this.__axis = new mb();
    this.id = a;
    this.name = b;
    for (b = 0; 6 > b; ) {
      var c = b++;
      a = new ue(this, "AXIS_" + c, -1, 1);
      this.__axis.set(c, a);
      this.__controls.push(a);
    }
    for (b = 0; 15 > b; )
      (c = b++),
        (a = new ue(this, "BUTTON_" + c, 0, 1)),
        this.__button.set(c, a),
        this.__controls.push(a);
  };
  l["openfl.ui.GameInputDevice"] = ik;
  ik.__name__ = ["openfl", "ui", "GameInputDevice"];
  ik.prototype = {
    enabled: null,
    id: null,
    name: null,
    __axis: null,
    __button: null,
    __controls: null,
    __class__: ik,
  };
  var wg = function () {};
  l["openfl.ui.Keyboard"] = wg;
  wg.__name__ = ["openfl", "ui", "Keyboard"];
  wg.__convertKeyCode = function (a) {
    switch (a) {
      case 8:
        return 8;
      case 9:
        return 9;
      case 13:
        return 13;
      case 27:
        return 27;
      case 32:
        return 32;
      case 33:
        return 49;
      case 34:
        return 222;
      case 35:
        return 51;
      case 36:
        return 52;
      case 37:
        return 53;
      case 38:
        return 55;
      case 39:
        return 222;
      case 40:
        return 57;
      case 41:
        return 48;
      case 42:
        return 56;
      case 44:
        return 188;
      case 45:
        return 189;
      case 46:
        return 190;
      case 47:
        return 191;
      case 48:
        return 48;
      case 49:
        return 49;
      case 50:
        return 50;
      case 51:
        return 51;
      case 52:
        return 52;
      case 53:
        return 53;
      case 54:
        return 54;
      case 55:
        return 55;
      case 56:
        return 56;
      case 57:
        return 57;
      case 58:
        return 186;
      case 59:
        return 186;
      case 60:
        return 60;
      case 61:
        return 187;
      case 62:
        return 190;
      case 63:
        return 191;
      case 64:
        return 50;
      case 91:
        return 219;
      case 92:
        return 220;
      case 93:
        return 221;
      case 94:
        return 54;
      case 95:
        return 189;
      case 96:
        return 192;
      case 97:
        return 65;
      case 98:
        return 66;
      case 99:
        return 67;
      case 100:
        return 68;
      case 101:
        return 69;
      case 102:
        return 70;
      case 103:
        return 71;
      case 104:
        return 72;
      case 105:
        return 73;
      case 106:
        return 74;
      case 107:
        return 75;
      case 108:
        return 76;
      case 109:
        return 77;
      case 110:
        return 78;
      case 111:
        return 79;
      case 112:
        return 80;
      case 113:
        return 81;
      case 114:
        return 82;
      case 115:
        return 83;
      case 116:
        return 84;
      case 117:
        return 85;
      case 118:
        return 86;
      case 119:
        return 87;
      case 120:
        return 88;
      case 121:
        return 89;
      case 122:
        return 90;
      case 127:
        return 46;
      case 1073741881:
        return 20;
      case 1073741882:
        return 112;
      case 1073741883:
        return 113;
      case 1073741884:
        return 114;
      case 1073741885:
        return 115;
      case 1073741886:
        return 116;
      case 1073741887:
        return 117;
      case 1073741888:
        return 118;
      case 1073741889:
        return 119;
      case 1073741890:
        return 120;
      case 1073741891:
        return 121;
      case 1073741892:
        return 122;
      case 1073741893:
        return 123;
      case 1073741894:
        return 301;
      case 1073741895:
        return 145;
      case 1073741896:
        return 19;
      case 1073741897:
        return 45;
      case 1073741898:
        return 36;
      case 1073741899:
        return 33;
      case 1073741901:
        return 35;
      case 1073741902:
        return 34;
      case 1073741903:
        return 39;
      case 1073741904:
        return 37;
      case 1073741905:
        return 40;
      case 1073741906:
        return 38;
      case 1073741907:
        return 144;
      case 1073741908:
        return 111;
      case 1073741909:
        return 106;
      case 1073741910:
        return 109;
      case 1073741911:
        return 107;
      case 1073741912:
        return 13;
      case 1073741913:
        return 97;
      case 1073741914:
        return 98;
      case 1073741915:
        return 99;
      case 1073741916:
        return 100;
      case 1073741917:
        return 101;
      case 1073741918:
        return 102;
      case 1073741919:
        return 103;
      case 1073741920:
        return 104;
      case 1073741921:
        return 105;
      case 1073741922:
        return 96;
      case 1073741923:
        return 110;
      case 1073741925:
        return 302;
      case 1073741928:
        return 124;
      case 1073741929:
        return 125;
      case 1073741930:
        return 126;
      case 1073741982:
        return 13;
      case 1073742044:
        return 110;
      case 1073742048:
        return 17;
      case 1073742049:
        return 16;
      case 1073742050:
        return 18;
      case 1073742051:
        return 15;
      case 1073742052:
        return 17;
      case 1073742053:
        return 16;
      case 1073742054:
        return 18;
      case 1073742055:
        return 15;
      default:
        return a;
    }
  };
  wg.__getCharCode = function (a, b) {
    null == b && (b = !1);
    if (b) {
      switch (a) {
        case 48:
          return 41;
        case 49:
          return 33;
        case 50:
          return 64;
        case 51:
          return 35;
        case 52:
          return 36;
        case 53:
          return 37;
        case 54:
          return 94;
        case 55:
          return 38;
        case 56:
          return 42;
        case 57:
          return 40;
        case 186:
          return 58;
        case 187:
          return 43;
        case 188:
          return 60;
        case 189:
          return 95;
        case 190:
          return 62;
        case 191:
          return 63;
        case 192:
          return 126;
        case 219:
          return 123;
        case 220:
          return 124;
        case 221:
          return 125;
        case 222:
          return 34;
      }
      if (65 <= a && 90 >= a) return a - 65 + 65;
    } else {
      switch (a) {
        case 8:
          return 8;
        case 9:
          return 9;
        case 13:
          return 13;
        case 27:
          return 27;
        case 32:
          return 32;
        case 186:
          return 59;
        case 187:
          return 61;
        case 188:
          return 44;
        case 189:
          return 45;
        case 190:
          return 46;
        case 191:
          return 47;
        case 192:
          return 96;
        case 219:
          return 91;
        case 220:
          return 92;
        case 221:
          return 93;
        case 222:
          return 39;
      }
      if (48 <= a && 57 >= a) return a - 48 + 48;
      if (65 <= a && 90 >= a) return a - 65 + 97;
    }
    if (96 <= a && 105 >= a) return a - 96 + 48;
    switch (a) {
      case 8:
        return 8;
      case 13:
        return 13;
      case 46:
        return 127;
      case 106:
        return 42;
      case 107:
        return 43;
      case 108:
        return 44;
      case 110:
        return 45;
      case 111:
        return 46;
    }
    return 0;
  };
  wg.__getKeyLocation = function (a) {
    switch (a) {
      case 1073741908:
      case 1073741909:
      case 1073741910:
      case 1073741911:
      case 1073741912:
      case 1073741913:
      case 1073741914:
      case 1073741915:
      case 1073741916:
      case 1073741917:
      case 1073741918:
      case 1073741919:
      case 1073741920:
      case 1073741921:
      case 1073741922:
      case 1073741923:
      case 1073742044:
        return 3;
      case 1073742048:
      case 1073742049:
      case 1073742050:
      case 1073742051:
        return 1;
      case 1073742052:
      case 1073742053:
      case 1073742054:
      case 1073742055:
        return 2;
      default:
        return 0;
    }
  };
  var Wj = function () {};
  l["openfl.ui.Mouse"] = Wj;
  Wj.__name__ = ["openfl", "ui", "Mouse"];
  var L = function (a) {
    null == a && (a = !1);
    this.debugEnabled = a;
    L.initialized || L.init();
  };
  l["openfl.utils.AGALMiniAssembler"] = L;
  L.__name__ = ["openfl", "utils", "AGALMiniAssembler"];
  L.init = function () {
    L.initialized = !0;
    var a = L.OPMAP,
      b = new ra("mov", 2, 0, 0);
    a.set("mov", b);
    var c = L.OPMAP,
      d = new ra("add", 3, 1, 0);
    c.set("add", d);
    var e = L.OPMAP,
      f = new ra("sub", 3, 2, 0);
    e.set("sub", f);
    var g = L.OPMAP,
      h = new ra("mul", 3, 3, 0);
    g.set("mul", h);
    var n = L.OPMAP,
      p = new ra("div", 3, 4, 0);
    n.set("div", p);
    var k = L.OPMAP,
      l = new ra("rcp", 2, 5, 0);
    k.set("rcp", l);
    var m = L.OPMAP,
      q = new ra("min", 3, 6, 0);
    m.set("min", q);
    var r = L.OPMAP,
      u = new ra("max", 3, 7, 0);
    r.set("max", u);
    var t = L.OPMAP,
      v = new ra("frc", 2, 8, 0);
    t.set("frc", v);
    var w = L.OPMAP,
      x = new ra("sqt", 2, 9, 0);
    w.set("sqt", x);
    var y = L.OPMAP,
      z = new ra("rsq", 2, 10, 0);
    y.set("rsq", z);
    var A = L.OPMAP,
      C = new ra("pow", 3, 11, 0);
    A.set("pow", C);
    var B = L.OPMAP,
      H = new ra("log", 2, 12, 0);
    B.set("log", H);
    var D = L.OPMAP,
      F = new ra("exp", 2, 13, 0);
    D.set("exp", F);
    var G = L.OPMAP,
      J = new ra("nrm", 2, 14, 0);
    G.set("nrm", J);
    var I = L.OPMAP,
      N = new ra("sin", 2, 15, 0);
    I.set("sin", N);
    var M = L.OPMAP,
      S = new ra("cos", 2, 16, 0);
    M.set("cos", S);
    var O = L.OPMAP,
      V = new ra("crs", 3, 17, 0);
    O.set("crs", V);
    var T = L.OPMAP,
      X = new ra("dp3", 3, 18, 0);
    T.set("dp3", X);
    var Q = L.OPMAP,
      P = new ra("dp4", 3, 19, 0);
    Q.set("dp4", P);
    var Y = L.OPMAP,
      U = new ra("abs", 2, 20, 0);
    Y.set("abs", U);
    var Z = L.OPMAP,
      W = new ra("neg", 2, 21, 0);
    Z.set("neg", W);
    var ca = L.OPMAP,
      ba = new ra("sat", 2, 22, 0);
    ca.set("sat", ba);
    var da = L.OPMAP,
      fa = new ra("m33", 3, 23, 16);
    da.set("m33", fa);
    var ea = L.OPMAP,
      ia = new ra("m44", 3, 24, 16);
    ea.set("m44", ia);
    var na = L.OPMAP,
      oa = new ra("m34", 3, 25, 16);
    na.set("m34", oa);
    var la = L.OPMAP,
      ha = new ra("ddx", 2, 26, 288);
    la.set("ddx", ha);
    var pa = L.OPMAP,
      ka = new ra("ddy", 2, 27, 288);
    pa.set("ddy", ka);
    var ta = L.OPMAP,
      sa = new ra("ife", 2, 28, 897);
    ta.set("ife", sa);
    var wa = L.OPMAP,
      Fa = new ra("ine", 2, 29, 897);
    wa.set("ine", Fa);
    var aa = L.OPMAP,
      qa = new ra("ifg", 2, 30, 897);
    aa.set("ifg", qa);
    var ya = L.OPMAP,
      ua = new ra("ifl", 2, 31, 897);
    ya.set("ifl", ua);
    var Ca = L.OPMAP,
      ja = new ra("els", 0, 32, 1921);
    Ca.set("els", ja);
    var va = L.OPMAP,
      za = new ra("eif", 0, 33, 1409);
    va.set("eif", za);
    var xa = L.OPMAP,
      Ja = new ra("kil", 1, 39, 160);
    xa.set("kil", Ja);
    var Aa = L.OPMAP,
      Ga = new ra("tex", 3, 40, 40);
    Aa.set("tex", Ga);
    var Ha = L.OPMAP,
      Ia = new ra("sge", 3, 41, 0);
    Ha.set("sge", Ia);
    var Da = L.OPMAP,
      Ea = new ra("slt", 3, 42, 0);
    Da.set("slt", Ea);
    var Ka = L.OPMAP,
      ma = new ra("sgn", 2, 43, 0);
    Ka.set("sgn", ma);
    var Ba = L.OPMAP,
      La = new ra("seq", 3, 44, 0);
    Ba.set("seq", La);
    var kb = L.OPMAP,
      Na = new ra("sne", 3, 45, 0);
    kb.set("sne", Na);
    var Sa = L.SAMPLEMAP,
      Pa = new pb("rgba", 8, 0);
    Sa.set("rgba", Pa);
    var Ua = L.SAMPLEMAP,
      Qa = new pb("compressed", 8, 1);
    Ua.set("compressed", Qa);
    var Ra = L.SAMPLEMAP,
      Xa = new pb("compressedalpha", 8, 2);
    Ra.set("compressedalpha", Xa);
    var Ma = L.SAMPLEMAP,
      Ta = new pb("dxt1", 8, 1);
    Ma.set("dxt1", Ta);
    var gb = L.SAMPLEMAP,
      cb = new pb("dxt5", 8, 2);
    gb.set("dxt5", cb);
    var ib = L.SAMPLEMAP,
      eb = new pb("video", 8, 3);
    ib.set("video", eb);
    var bb = L.SAMPLEMAP,
      hb = new pb("2d", 12, 0);
    bb.set("2d", hb);
    var lb = L.SAMPLEMAP,
      Va = new pb("3d", 12, 2);
    lb.set("3d", Va);
    var $a = L.SAMPLEMAP,
      ab = new pb("cube", 12, 1);
    $a.set("cube", ab);
    var jb = L.SAMPLEMAP,
      ob = new pb("mipnearest", 24, 1);
    jb.set("mipnearest", ob);
    var rb = L.SAMPLEMAP,
      Za = new pb("miplinear", 24, 2);
    rb.set("miplinear", Za);
    var sb = L.SAMPLEMAP,
      qb = new pb("mipnone", 24, 0);
    sb.set("mipnone", qb);
    var Wa = L.SAMPLEMAP,
      mb = new pb("nomip", 24, 0);
    Wa.set("nomip", mb);
    var Oa = L.SAMPLEMAP,
      nb = new pb("nearest", 28, 0);
    Oa.set("nearest", nb);
    var Ya = L.SAMPLEMAP,
      db = new pb("linear", 28, 1);
    Ya.set("linear", db);
    var tb = L.SAMPLEMAP,
      zb = new pb("anisotropic2x", 28, 2);
    tb.set("anisotropic2x", zb);
    var wb = L.SAMPLEMAP,
      fb = new pb("anisotropic4x", 28, 3);
    wb.set("anisotropic4x", fb);
    var yb = L.SAMPLEMAP,
      vb = new pb("anisotropic8x", 28, 4);
    yb.set("anisotropic8x", vb);
    var Ab = L.SAMPLEMAP,
      Cb = new pb("anisotropic16x", 28, 5);
    Ab.set("anisotropic16x", Cb);
    var Db = L.SAMPLEMAP,
      Eb = new pb("centroid", 16, 1);
    Db.set("centroid", Eb);
    var Fb = L.SAMPLEMAP,
      Hb = new pb("single", 16, 2);
    Fb.set("single", Hb);
    var xb = L.SAMPLEMAP,
      Ib = new pb("ignoresampler", 16, 4);
    xb.set("ignoresampler", Ib);
    var Lb = L.SAMPLEMAP,
      Gb = new pb("repeat", 20, 1);
    Lb.set("repeat", Gb);
    var Kb = L.SAMPLEMAP,
      Jb = new pb("wrap", 20, 1);
    Kb.set("wrap", Jb);
    var Mb = L.SAMPLEMAP,
      Nb = new pb("clamp", 20, 0);
    Mb.set("clamp", Nb);
    var Ob = L.SAMPLEMAP,
      Qb = new pb("clamp_u_repeat_v", 20, 2);
    Ob.set("clamp_u_repeat_v", Qb);
    var Rb = L.SAMPLEMAP,
      Tb = new pb("repeat_u_clamp_v", 20, 3);
    Rb.set("repeat_u_clamp_v", Tb);
  };
  L.prototype = {
    agalcode: null,
    error: null,
    verbose: null,
    debugEnabled: null,
    assemble: function (a, b, c, d) {
      null == d && (d = !1);
      null == c && (c = 1);
      var e = N.getTimer();
      this.agalcode = new Pb(0);
      this.error = "";
      var f = !1;
      "fragment" == a
        ? (f = !0)
        : "vertex" != a &&
          (this.error =
            'ERROR: mode needs to be "fragment" or "vertex" but is "' +
            a +
            '".');
      this.agalcode.set_endian(1);
      this.agalcode.writeByte(160);
      this.agalcode.writeUnsignedInt(c);
      this.agalcode.writeByte(161);
      this.agalcode.writeByte(f ? 1 : 0);
      this.initregmap(c, d);
      a = J.replace(b, "\r", "\n").split("\n");
      b = 0;
      d = a.length;
      for (
        var g = new pa("<.*>", "g"),
          h = new pa("([\\w\\.\\-\\+]+)", "gi"),
          n = new pa("^\\w{3}", "ig"),
          p = new pa(
            "vc\\[([vofi][acostdip]?[d]?)(\\d*)?(\\.[xyzw](\\+\\d{1,3})?)?\\](\\.[xyzw]{1,4})?|([vofi][acostdip]?[d]?)(\\d*)?(\\.[xyzw]{1,4})?",
            "gi"
          ),
          k = new pa("\\[.*\\]", "ig"),
          l = new pa("^\\b[A-Za-z]{1,3}", "ig"),
          m = new pa("\\d+", ""),
          q = new pa("(\\.[xyzw]{1,4})", ""),
          r = new pa("[A-Za-z]{1,3}", "ig"),
          t = new pa("(\\.[xyzw]{1,1})", ""),
          v = new pa("\\+\\d{1,3}", "ig"),
          w = 0;
        w < d && "" == this.error;

      ) {
        var x = J.trim(a[w]),
          y = x.indexOf("//");
        -1 != y && (x = S.substr(x, 0, y));
        var z = g.match(x) ? g.matchedPos().pos : -1;
        y = null;
        -1 != z &&
          ((y = this.match(S.substr(x, z, null), h)), (x = S.substr(x, 0, z)));
        z = null;
        n.match(x) && ((z = n.matched(0)), (z = L.OPMAP.get(z)));
        if (null == z)
          3 <= x.length &&
            ca.trace("warning: bad line " + w + ": " + a[w], {
              fileName: "AGALMiniAssembler.hx",
              lineNumber: 284,
              className: "openfl.utils.AGALMiniAssembler",
              methodName: "assemble",
            });
        else if (
          (this.debugEnabled &&
            ca.trace(z, {
              fileName: "AGALMiniAssembler.hx",
              lineNumber: 296,
              className: "openfl.utils.AGALMiniAssembler",
              methodName: "assemble",
            }),
          null == z)
        )
          3 <= x.length &&
            ca.trace("warning: bad line " + w + ": " + a[w], {
              fileName: "AGALMiniAssembler.hx",
              lineNumber: 304,
              className: "openfl.utils.AGALMiniAssembler",
              methodName: "assemble",
            });
        else {
          x = S.substr(x, x.indexOf(z.name) + z.name.length, null);
          if (0 != (z.flags & 256) && 2 > c) {
            this.error = "error: opcode requires version 2.";
            break;
          }
          if (0 != (z.flags & 64) && f) {
            this.error = "error: opcode is only allowed in vertex programs.";
            break;
          }
          if (0 != (z.flags & 32) && !f) {
            this.error = "error: opcode is only allowed in fragment programs.";
            break;
          }
          this.verbose &&
            ca.trace("emit opcode=" + u.string(z), {
              fileName: "AGALMiniAssembler.hx",
              lineNumber: 338,
              className: "openfl.utils.AGALMiniAssembler",
              methodName: "assemble",
            });
          this.agalcode.writeUnsignedInt(z.emitCode);
          ++b;
          if (4096 < b) {
            this.error = "error: too many opcodes. maximum is 4096.";
            break;
          }
          var A = this.match(x, p);
          if (A.length != z.numRegister) {
            this.error =
              "error: wrong number of operands. found " +
              A.length +
              " but expected " +
              z.numRegister +
              ".";
            break;
          }
          x = !1;
          for (var C = 160, B = 0, H = A.length; B < H; ) {
            var D = B++,
              F = !1,
              G = this.match(A[D], k);
            0 < G.length &&
              ((A[D] = J.replace(A[D], G[0], "0")),
              this.verbose &&
                ca.trace("IS REL", {
                  fileName: "AGALMiniAssembler.hx",
                  lineNumber: 377,
                  className: "openfl.utils.AGALMiniAssembler",
                  methodName: "assemble",
                }),
              (F = !0));
            var I = this.match(A[D], l);
            if (0 == I.length) {
              this.error =
                "error: could not parse operand " + D + " (" + A[D] + ").";
              x = !0;
              break;
            }
            var M = L.REGMAP.get(I[0]);
            this.debugEnabled &&
              ca.trace(M, {
                fileName: "AGALMiniAssembler.hx",
                lineNumber: 399,
                className: "openfl.utils.AGALMiniAssembler",
                methodName: "assemble",
              });
            if (null == M) {
              this.error =
                "error: could not find register name for operand " +
                D +
                " (" +
                A[D] +
                ").";
              x = !0;
              break;
            }
            if (f) {
              if (0 == (M.flags & 32)) {
                this.error =
                  "error: register operand " +
                  D +
                  " (" +
                  A[D] +
                  ") only allowed in vertex programs.";
                x = !0;
                break;
              }
              if (F) {
                this.error =
                  "error: register operand " +
                  D +
                  " (" +
                  A[D] +
                  ") relative adressing not allowed in fragment programs.";
                x = !0;
                break;
              }
            } else if (0 == (M.flags & 64)) {
              this.error =
                "error: register operand " +
                D +
                " (" +
                A[D] +
                ") only allowed in fragment programs.";
              x = !0;
              break;
            }
            I = A[D].indexOf(M.name) + M.name.length;
            A[D] = S.substr(A[D], I, null);
            var O = F ? this.match(G[0], m) : this.match(A[D], m);
            I = 0;
            0 < O.length && (I = u.parseInt(O[0]));
            if (Mb.gt(I, M.range)) {
              this.error =
                "error: register operand " +
                D +
                " (" +
                A[D] +
                ") index exceeds limit of " +
                u.string(Mb.toFloat(M.range + 1)) +
                ".";
              x = !0;
              break;
            }
            var V = this.match(A[D], q),
              T = 0 == D && 0 == (z.flags & 128),
              X = 2 == D && 0 != (z.flags & 8),
              Q = 0,
              P = 0,
              Y = 0;
            if (T && F) {
              this.error = "error: relative can not be destination";
              x = !0;
              break;
            }
            if (0 < V.length) {
              for (var U = (O = 0), Z = V[0].length, W = 1; W < Z; )
                (U = S.cca(V[0], W) - 120),
                  Mb.gt(U, 2) && (U = 3),
                  (O = T ? O | (1 << U) : O | (U << ((W - 1) << 1))),
                  ++W;
              if (!T) for (; 4 >= W; ) (O |= U << ((W - 1) << 1)), ++W;
            } else O = T ? 15 : 228;
            if (F) {
              V = this.match(G[0], r);
              Q = L.REGMAP.get(V[0]);
              if (null == Q) {
                this.error = "error: bad index register";
                x = !0;
                break;
              }
              Q = Q.emitCode;
              U = this.match(G[0], t);
              if (0 == U.length) {
                this.error = "error: bad index register select";
                x = !0;
                break;
              }
              P = S.cca(U[0], 1) - 120;
              Mb.gt(P, 2) && (P = 3);
              G = this.match(G[0], v);
              0 < G.length && (Y = u.parseInt(G[0]));
              if (0 > Y || 255 < Y) {
                this.error =
                  "error: index offset " + Y + " out of bounds. [0..255]";
                x = !0;
                break;
              }
              this.verbose &&
                ca.trace(
                  "RELATIVE: type=" +
                    Q +
                    "==" +
                    V[0] +
                    " sel=" +
                    u.string(Mb.toFloat(P)) +
                    "==" +
                    U[0] +
                    " idx=" +
                    u.string(Mb.toFloat(I)) +
                    " offset=" +
                    Y,
                  {
                    fileName: "AGALMiniAssembler.hx",
                    lineNumber: 574,
                    className: "openfl.utils.AGALMiniAssembler",
                    methodName: "assemble",
                  }
                );
            }
            this.verbose &&
              ca.trace(
                "  emit argcode=" +
                  u.string(M) +
                  "[" +
                  u.string(Mb.toFloat(I)) +
                  "][" +
                  O +
                  "]",
                {
                  fileName: "AGALMiniAssembler.hx",
                  lineNumber: 582,
                  className: "openfl.utils.AGALMiniAssembler",
                  methodName: "assemble",
                }
              );
            if (T)
              this.agalcode.writeShort(I),
                this.agalcode.writeByte(O),
                this.agalcode.writeByte(M.emitCode),
                (C -= 32);
            else {
              if (X) {
                this.verbose &&
                  ca.trace("  emit sampler", {
                    fileName: "AGALMiniAssembler.hx",
                    lineNumber: 599,
                    className: "openfl.utils.AGALMiniAssembler",
                    methodName: "assemble",
                  });
                D = 5;
                G = F = 0;
                for (M = null == y ? 0 : y.length; G < M; )
                  (O = G++),
                    this.verbose &&
                      ca.trace("    opt: " + y[O], {
                        fileName: "AGALMiniAssembler.hx",
                        lineNumber: 611,
                        className: "openfl.utils.AGALMiniAssembler",
                        methodName: "assemble",
                      }),
                    (T = L.SAMPLEMAP.get(y[O])),
                    null == T
                      ? ((F = u.parseFloat(y[O])),
                        this.verbose &&
                          ca.trace("    bias: " + F, {
                            fileName: "AGALMiniAssembler.hx",
                            lineNumber: 625,
                            className: "openfl.utils.AGALMiniAssembler",
                            methodName: "assemble",
                          }))
                      : (16 != T.flag && (D &= ~(15 << T.flag)),
                        (D |= T.mask << T.flag));
                this.agalcode.writeShort(I);
                this.agalcode.writeByte(u["int"](8 * F));
                this.agalcode.writeByte(0);
                this.agalcode.writeUnsignedInt(D);
                this.verbose &&
                  ca.trace("    bits: " + (D - 5), {
                    fileName: "AGALMiniAssembler.hx",
                    lineNumber: 650,
                    className: "openfl.utils.AGALMiniAssembler",
                    methodName: "assemble",
                  });
              } else
                0 == D && (this.agalcode.writeUnsignedInt(0), (C -= 32)),
                  this.agalcode.writeShort(I),
                  this.agalcode.writeByte(Y),
                  this.agalcode.writeByte(O),
                  this.agalcode.writeByte(M.emitCode),
                  this.agalcode.writeByte(Q),
                  this.agalcode.writeShort(F ? P | 32768 : 0);
              C -= 64;
            }
          }
          for (y = 0; y < C; ) this.agalcode.writeByte(0), (y += 8);
          if (x) break;
        }
        ++w;
      }
      "" != this.error &&
        ((this.error += "\n  at line " + w + " " + a[w]),
        fd.set_length(this.agalcode, 0),
        ca.trace(this.error, {
          fileName: "AGALMiniAssembler.hx",
          lineNumber: 703,
          className: "openfl.utils.AGALMiniAssembler",
          methodName: "assemble",
        }));
      if (this.debugEnabled) {
        c = "generated bytecode:";
        f = 0;
        for (a = fd.get_length(this.agalcode); f < a; )
          (b = f++),
            0 == b % 16 && (c += "\n"),
            0 == b % 4 && (c += " "),
            (b = J.hex(this.agalcode.get(b), 2)),
            2 > b.length && (b = "0" + b),
            (c += b);
        ca.trace(c, {
          fileName: "AGALMiniAssembler.hx",
          lineNumber: 739,
          className: "openfl.utils.AGALMiniAssembler",
          methodName: "assemble",
        });
      }
      this.verbose &&
        ca.trace(
          "AGALMiniAssembler.assemble time: " + (N.getTimer() - e) / 1e3 + "s",
          {
            fileName: "AGALMiniAssembler.hx",
            lineNumber: 745,
            className: "openfl.utils.AGALMiniAssembler",
            methodName: "assemble",
          }
        );
      return this.agalcode;
    },
    initregmap: function (a, b) {
      var c = L.REGMAP,
        d = new Kc(
          "va",
          "vertex attribute",
          0,
          b ? 1024 : 1 == a || 2 == a ? 7 : 15,
          66
        );
      c.set("va", d);
      c = L.REGMAP;
      d = new Kc("vc", "vertex constant", 1, b ? 1024 : 1 == a ? 127 : 249, 66);
      c.set("vc", d);
      c = L.REGMAP;
      d = new Kc("vt", "vertex temporary", 2, b ? 1024 : 1 == a ? 7 : 25, 67);
      c.set("vt", d);
      c = L.REGMAP;
      d = new Kc("vo", "vertex output", 3, b ? 1024 : 0, 65);
      c.set("vo", d);
      c = L.REGMAP;
      d = new Kc("vi", "varying", 4, b ? 1024 : 1 == a ? 7 : 9, 99);
      c.set("vi", d);
      c = L.REGMAP;
      d = new Kc(
        "fc",
        "fragment constant",
        1,
        b ? 1024 : 1 == a ? 27 : 2 == a ? 63 : 199,
        34
      );
      c.set("fc", d);
      c = L.REGMAP;
      d = new Kc("ft", "fragment temporary", 2, b ? 1024 : 1 == a ? 7 : 25, 35);
      c.set("ft", d);
      c = L.REGMAP;
      d = new Kc("fs", "texture sampler", 5, b ? 1024 : 7, 34);
      c.set("fs", d);
      c = L.REGMAP;
      d = new Kc("fo", "fragment output", 3, b ? 1024 : 1 == a ? 0 : 3, 33);
      c.set("fo", d);
      c = L.REGMAP;
      a = new Kc(
        "fd",
        "fragment depth output",
        6,
        b ? 1024 : 1 == a ? -1 : 0,
        33
      );
      c.set("fd", a);
      a = L.REGMAP;
      b = new Kc("iid", "instance id", 7, b ? 1024 : 0, 66);
      a.set("iid", b);
      b = L.REGMAP;
      a = L.REGMAP.get("vo");
      b.set("op", a);
      b = L.REGMAP;
      a = L.REGMAP.get("vi");
      b.set("i", a);
      b = L.REGMAP;
      a = L.REGMAP.get("vi");
      b.set("v", a);
      b = L.REGMAP;
      a = L.REGMAP.get("fo");
      b.set("oc", a);
      b = L.REGMAP;
      a = L.REGMAP.get("fd");
      b.set("od", a);
      b = L.REGMAP;
      a = L.REGMAP.get("vi");
      b.set("fi", a);
    },
    match: function (a, b) {
      for (var c = [], d = 0; b.matchSub(a, d); )
        (d = b.matched(0)), c.push(d), (d = b.matchedPos().pos + d.length);
      return c;
    },
    __class__: L,
  };
  var ra = function (a, b, c, d) {
    this.name = a;
    this.numRegister = b;
    this.emitCode = c;
    this.flags = d;
  };
  l["openfl.utils._AGALMiniAssembler.OpCode"] = ra;
  ra.__name__ = ["openfl", "utils", "_AGALMiniAssembler", "OpCode"];
  ra.prototype = {
    emitCode: null,
    flags: null,
    name: null,
    numRegister: null,
    toString: function () {
      return (
        '[OpCode name="' +
        this.name +
        '", numRegister=' +
        this.numRegister +
        ", emitCode=" +
        this.emitCode +
        ", flags=" +
        this.flags +
        "]"
      );
    },
    __class__: ra,
  };
  var Kc = function (a, b, c, d, e) {
    this.name = a;
    this.longName = b;
    this.emitCode = c;
    this.range = d;
    this.flags = e;
  };
  l["openfl.utils._AGALMiniAssembler.Register"] = Kc;
  Kc.__name__ = ["openfl", "utils", "_AGALMiniAssembler", "Register"];
  Kc.prototype = {
    emitCode: null,
    name: null,
    longName: null,
    flags: null,
    range: null,
    toString: function () {
      return (
        '[Register name="' +
        this.name +
        '", longName="' +
        this.longName +
        '", emitCode=' +
        u.string(Mb.toFloat(this.emitCode)) +
        ", range=" +
        u.string(Mb.toFloat(this.range)) +
        ", flags=" +
        u.string(Mb.toFloat(this.flags)) +
        "]"
      );
    },
    __class__: Kc,
  };
  var pb = function (a, b, c) {
    this.name = a;
    this.flag = b;
    this.mask = c;
  };
  l["openfl.utils._AGALMiniAssembler.Sampler"] = pb;
  pb.__name__ = ["openfl", "utils", "_AGALMiniAssembler", "Sampler"];
  pb.prototype = { flag: null, mask: null, name: null, __class__: pb };
  var jk = function () {};
  l["openfl.utils.IAssetCache"] = jk;
  jk.__name__ = ["openfl", "utils", "IAssetCache"];
  jk.prototype = {
    get_enabled: null,
    getBitmapData: null,
    hasBitmapData: null,
    removeBitmapData: null,
    setBitmapData: null,
    __class__: jk,
    __properties__: { get_enabled: "get_enabled" },
  };
  var fi = function () {
    this.__enabled = !0;
    this.bitmapData = new sa();
    this.font = new sa();
    this.sound = new sa();
  };
  l["openfl.utils.AssetCache"] = fi;
  fi.__name__ = ["openfl", "utils", "AssetCache"];
  fi.__interfaces__ = [jk];
  fi.prototype = {
    bitmapData: null,
    font: null,
    sound: null,
    __enabled: null,
    getBitmapData: function (a) {
      return this.bitmapData.get(a);
    },
    hasBitmapData: function (a) {
      return this.bitmapData.exists(a);
    },
    removeBitmapData: function (a) {
      Q.cache.image.remove(a);
      return this.bitmapData.remove(a);
    },
    setBitmapData: function (a, b) {
      this.bitmapData.set(a, b);
    },
    get_enabled: function () {
      return this.__enabled;
    },
    __class__: fi,
    __properties__: { get_enabled: "get_enabled" },
  };
  var ha = function () {};
  l["openfl.utils.Assets"] = ha;
  ha.__name__ = ["openfl", "utils", "Assets"];
  ha.exists = function (a, b) {
    return Q.exists(a, b);
  };
  ha.getBitmapData = function (a, b) {
    null == b && (b = !0);
    if (b && ha.cache.get_enabled() && ha.cache.hasBitmapData(a)) {
      var c = ha.cache.getBitmapData(a);
      if (ha.isValidBitmapData(c)) return c;
    }
    c = Q.getImage(a, !1);
    return null != c
      ? ((c = ma.fromImage(c)),
        b && ha.cache.get_enabled() && ha.cache.setBitmapData(a, c),
        c)
      : null;
  };
  ha.getText = function (a) {
    return Q.getText(a);
  };
  ha.isValidBitmapData = function (a) {
    return null != a && null != a.image;
  };
  var fd = {};
  l["openfl.utils._ByteArray.ByteArray_Impl_"] = fd;
  fd.__name__ = ["openfl", "utils", "_ByteArray", "ByteArray_Impl_"];
  fd.__properties__ = { set_length: "set_length", get_length: "get_length" };
  fd.fromBytes = function (a) {
    return null == a ? null : u.is(a, Pb) ? a : Pb.fromBytes(a);
  };
  fd.toBytes = function (a) {
    return a;
  };
  fd.get_length = function (a) {
    return null == a ? 0 : a.length;
  };
  fd.set_length = function (a, b) {
    0 < b && (a.__resize(b), b < a.position && (a.position = b));
    return (a.length = b);
  };
  var kk = function () {};
  l["openfl.utils.IDataOutput"] = kk;
  kk.__name__ = ["openfl", "utils", "IDataOutput"];
  kk.prototype = { __class__: kk };
  var lk = function () {};
  l["openfl.utils.IDataInput"] = lk;
  lk.__name__ = ["openfl", "utils", "IDataInput"];
  lk.prototype = { __class__: lk };
  var Pb = function (a) {
    null == a && (a = 0);
    var b = eb.alloc(a);
    eb.call(this, b.b.buffer);
    this.__length = a;
    null == Pb.__defaultEndian &&
      (Db.get_endianness() == je.LITTLE_ENDIAN
        ? (Pb.__defaultEndian = 1)
        : (Pb.__defaultEndian = 0));
    this.set_endian(Pb.__defaultEndian);
    this.position = 0;
  };
  l["openfl.utils.ByteArrayData"] = Pb;
  Pb.__name__ = ["openfl", "utils", "ByteArrayData"];
  Pb.__interfaces__ = [kk, lk];
  Pb.fromBytes = function (a) {
    var b = new Pb();
    b.__fromBytes(a);
    return b;
  };
  Pb.__super__ = eb;
  Pb.prototype = v(eb.prototype, {
    position: null,
    __endian: null,
    __length: null,
    readByte: function () {
      var a = this.readUnsignedByte();
      return 0 != (a & 128) ? a - 256 : a;
    },
    readInt: function () {
      var a = this.readUnsignedByte(),
        b = this.readUnsignedByte(),
        c = this.readUnsignedByte(),
        d = this.readUnsignedByte();
      return 1 == this.get_endian()
        ? (d << 24) | (c << 16) | (b << 8) | a
        : (a << 24) | (b << 16) | (c << 8) | d;
    },
    readUnsignedByte: function () {
      if (this.position < this.length) return this.get(this.position++);
      throw new G(new Ng());
    },
    readUnsignedInt: function () {
      var a = this.readUnsignedByte(),
        b = this.readUnsignedByte(),
        c = this.readUnsignedByte(),
        d = this.readUnsignedByte();
      return 1 == this.get_endian()
        ? (d << 24) | (c << 16) | (b << 8) | a
        : (a << 24) | (b << 16) | (c << 8) | d;
    },
    readUnsignedShort: function () {
      var a = this.readUnsignedByte(),
        b = this.readUnsignedByte();
      return 1 == this.get_endian() ? (b << 8) + a : (a << 8) | b;
    },
    readUTF: function () {
      var a = this.readUnsignedShort();
      return this.readUTFBytes(a);
    },
    readUTFBytes: function (a) {
      if (this.position + a > this.length) throw new G(new Ng());
      this.position += a;
      return this.getString(this.position - a, a);
    },
    writeByte: function (a) {
      this.__resize(this.position + 1);
      this.set(this.position++, a & 255);
    },
    writeInt: function (a) {
      this.__resize(this.position + 4);
      1 == this.get_endian()
        ? (this.set(this.position++, a & 255),
          this.set(this.position++, (a >> 8) & 255),
          this.set(this.position++, (a >> 16) & 255),
          this.set(this.position++, (a >> 24) & 255))
        : (this.set(this.position++, (a >> 24) & 255),
          this.set(this.position++, (a >> 16) & 255),
          this.set(this.position++, (a >> 8) & 255),
          this.set(this.position++, a & 255));
    },
    writeShort: function (a) {
      this.__resize(this.position + 2);
      1 == this.get_endian()
        ? (this.set(this.position++, a), this.set(this.position++, a >> 8))
        : (this.set(this.position++, a >> 8), this.set(this.position++, a));
    },
    writeUnsignedInt: function (a) {
      this.writeInt(a);
    },
    __fromBytes: function (a) {
      this.__setData(a);
      this.length = a.length;
    },
    __resize: function (a) {
      if (a > this.__length) {
        var b = eb.alloc((3 * (a + 1)) >> 1);
        if (0 < this.__length) {
          var c = this.length;
          this.length = this.__length;
          b.blit(0, this, 0, this.__length);
          this.length = c;
        }
        this.__setData(b);
      }
      this.length < a && (this.length = a);
    },
    __setData: function (a) {
      this.b = a.b;
      this.__length = a.length;
      this.data = a.data;
    },
    get_endian: function () {
      return this.__endian;
    },
    set_endian: function (a) {
      return (this.__endian = a);
    },
    __class__: Pb,
    __properties__: { set_endian: "set_endian", get_endian: "get_endian" },
  });
  var gl = function () {};
  l["haxe.lang.Iterator"] = gl;
  gl.__name__ = ["haxe", "lang", "Iterator"];
  gl.prototype = { hasNext: null, next: null, __class__: gl };
  var hl = function () {};
  l["haxe.lang.Iterable"] = hl;
  hl.__name__ = ["haxe", "lang", "Iterable"];
  hl.prototype = { iterator: null, __class__: hl };
  var $b = function (a, b) {
    null == b && (b = 0);
    if (isNaN(a) || 0 > a)
      throw new G(
        new Ob("The delay specified is negative or not a finite number")
      );
    ea.call(this);
    this.__delay = a;
    this.__repeatCount = b;
    this.running = !1;
    this.currentCount = 0;
  };
  l["openfl.utils.Timer"] = $b;
  $b.__name__ = ["openfl", "utils", "Timer"];
  $b.__super__ = ea;
  $b.prototype = v(ea.prototype, {
    currentCount: null,
    running: null,
    __delay: null,
    __repeatCount: null,
    __timerID: null,
    start: function () {
      this.running ||
        ((this.running = !0),
        (this.__timerID = T.get_window().setInterval(
          m(this, this.timer_onTimer),
          u["int"](this.__delay)
        )));
    },
    stop: function () {
      this.running = !1;
      null != this.__timerID &&
        (T.get_window().clearInterval(this.__timerID), (this.__timerID = null));
    },
    set_delay: function (a) {
      this.__delay = a;
      this.running && (this.stop(), this.start());
      return this.__delay;
    },
    timer_onTimer: function () {
      this.currentCount++;
      0 < this.__repeatCount && this.currentCount >= this.__repeatCount
        ? (this.stop(),
          this.dispatchEvent(new hg("timer")),
          this.dispatchEvent(new hg("timerComplete")))
        : this.dispatchEvent(new hg("timer"));
    },
    __class__: $b,
    __properties__: { set_delay: "set_delay" },
  });
  var y = function (a, b) {
    null == b && (b = !1);
    this.BoxId = 0;
    this.OpenDirection = "";
    this.Speed = this.Try = this.Start = this.StopTime = 0;
    this.EndPoint = "none";
    this.End = 0;
    this.Enabled = this.AutoChange = !1;
    this.Switch = this.ChangeDirection = this.Activate = "";
    this.Closed = !1;
    this.Direction = "";
    this.spark1 =
      this.spark2 =
      this.magnetic1 =
      this.magnet =
      this.magnetic2 =
      this.sensor =
      this.cargo =
      this.light =
      this.beam =
      this.blades =
      this.w1 =
      this.w2 =
        null;
    wa.call(this);
    this.smoothing = b;
    this.spritesheet = a;
    this.behaviorQueue = [];
    this.bitmap = new Ab();
    this.addChild(this.bitmap);
  };
  l["spritesheet.AnimatedSprite"] = y;
  y.__name__ = ["spritesheet", "AnimatedSprite"];
  y.__super__ = wa;
  y.prototype = v(wa.prototype, {
    bitmap: null,
    currentBehavior: null,
    currentFrameIndex: null,
    smoothing: null,
    spritesheet: null,
    behaviorComplete: null,
    behaviorQueue: null,
    loopTime: null,
    timeElapsed: null,
    spark1: null,
    spark2: null,
    magnetic1: null,
    magnet: null,
    magnetic2: null,
    sensor: null,
    cargo: null,
    light: null,
    beam: null,
    blades: null,
    w1: null,
    w2: null,
    Direction: null,
    Closed: null,
    Switch: null,
    ChangeDirection: null,
    Activate: null,
    Enabled: null,
    AutoChange: null,
    End: null,
    EndPoint: null,
    Speed: null,
    Try: null,
    Start: null,
    StopTime: null,
    OpenDirection: null,
    BoxId: null,
    resolveBehavior: function (a) {
      return u.is(a, t)
        ? a
        : "string" == typeof a && null != this.spritesheet
        ? this.spritesheet.behaviors.get(a)
        : null;
    },
    showBehavior: function (a, b) {
      null == b && (b = !0);
      this.behaviorQueue = [];
      this.updateBehavior(this.resolveBehavior(a), b);
    },
    update: function (a) {
      this.behaviorComplete ||
        ((this.timeElapsed += a),
        (a = this.timeElapsed / this.loopTime),
        1 <= a &&
          (this.currentBehavior.loop
            ? (a -= Math.floor(a))
            : ((this.behaviorComplete = !0), (a = 1))),
        (this.currentFrameIndex = Math.round(
          a * (this.currentBehavior.frames.length - 1)
        )),
        (a = this.spritesheet.getFrame(
          this.currentBehavior.frames[this.currentFrameIndex]
        )),
        this.bitmap.set_bitmapData(a.bitmapData),
        (this.bitmap.smoothing = this.smoothing),
        this.bitmap.set_x(a.offsetX - this.currentBehavior.originX),
        this.bitmap.set_y(a.offsetY - this.currentBehavior.originY),
        this.behaviorComplete &&
          (0 < this.behaviorQueue.length
            ? this.updateBehavior(this.behaviorQueue.shift())
            : this.hasEventListener("complete") &&
              this.dispatchEvent(new X("complete"))));
    },
    updateBehavior: function (a, b) {
      null == b && (b = !0);
      if (null != a) {
        if (b || a != this.currentBehavior)
          (this.currentBehavior = a),
            (this.timeElapsed = 0),
            (this.behaviorComplete = !1),
            (this.loopTime = u["int"]((a.frames.length / a.frameRate) * 1e3)),
            null == this.bitmap.get_bitmapData() && this.update(0);
      } else
        this.bitmap.set_bitmapData(null),
          (this.currentBehavior = null),
          (this.currentFrameIndex = -1),
          (this.behaviorComplete = !0);
    },
    __class__: y,
  });
  var bf = function (a, b, c, d) {
    this.sourceImage = a;
    this.sourceImageAlpha = d;
    null == b
      ? ((this.frames = []), (this.totalFrames = 0))
      : ((this.frames = b), (this.totalFrames = b.length));
    this.behaviors = null == c ? new sa() : c;
  };
  l["spritesheet.Spritesheet"] = bf;
  bf.__name__ = ["spritesheet", "Spritesheet"];
  bf.prototype = {
    behaviors: null,
    totalFrames: null,
    frames: null,
    sourceImage: null,
    sourceImageAlpha: null,
    addBehavior: function (a) {
      this.behaviors.set(a.name, a);
    },
    addFrame: function (a) {
      this.frames.push(a);
      this.totalFrames++;
    },
    generateBitmap: function (a) {
      a = this.frames[a];
      var b = new ma(a.width, a.height, !0),
        c = new Z(a.x, a.y, a.width, a.height),
        d = new aa();
      b.copyPixels(this.sourceImage, c, d);
      null != this.sourceImageAlpha &&
        b.copyChannel(this.sourceImageAlpha, c, d, 2, 8);
      a.bitmapData = b;
    },
    getFrame: function (a, b) {
      null == b && (b = !0);
      var c = this.frames[a];
      null != c && null == c.bitmapData && b && this.generateBitmap(a);
      return c;
    },
    updateImage: function (a, b) {
      this.sourceImage = a;
      this.sourceImageAlpha = b;
      a = 0;
      for (b = this.frames; a < b.length; ) {
        var c = b[a];
        ++a;
        null != c.bitmapData && (c.bitmapData = null);
      }
    },
    __class__: bf,
  };
  var t = function (a, b, c, d, e, f) {
    null == f && (f = 0);
    null == e && (e = 0);
    null == d && (d = 30);
    null == c && (c = !1);
    null == a && (a = "");
    "" == a && (a = "behavior" + t.uniqueID++);
    null == b && (b = []);
    this.name = a;
    this.frames = b;
    this.loop = c;
    this.frameRate = d;
    this.originX = e;
    this.originY = f;
    this.frameData = [];
    a = 0;
    for (b = this.frames.length; a < b; ) a++, this.frameData.push(null);
  };
  l["spritesheet.data.BehaviorData"] = t;
  t.__name__ = ["spritesheet", "data", "BehaviorData"];
  t.prototype = {
    frameData: null,
    frameRate: null,
    frames: null,
    loop: null,
    name: null,
    originX: null,
    originY: null,
    __class__: t,
  };
  var Yf = function (a, b, c, d, e, f) {
    null == f && (f = 0);
    null == e && (e = 0);
    null == d && (d = 0);
    null == c && (c = 0);
    null == b && (b = 0);
    null == a && (a = 0);
    this.x = a;
    this.y = b;
    this.width = c;
    this.height = d;
    this.offsetX = e;
    this.offsetY = f;
  };
  l["spritesheet.data.SpritesheetFrame"] = Yf;
  Yf.__name__ = ["spritesheet", "data", "SpritesheetFrame"];
  Yf.prototype = {
    bitmapData: null,
    height: null,
    offsetX: null,
    offsetY: null,
    width: null,
    x: null,
    y: null,
    __class__: Yf,
  };
  var Hi = function () {};
  l["spritesheet.importers.BitmapImporter"] = Hi;
  Hi.__name__ = ["spritesheet", "importers", "BitmapImporter"];
  Hi.create = function (a, b, c, d, e, f, g) {
    null == g && (g = 1);
    null == f && (f = 0);
    var h = [];
    f = c * b + f;
    for (var n = 0; n < c; )
      for (var p = n++, k = 0, l = b; k < l; ) {
        var m = k++;
        if (h.length < f) {
          var q = d * m,
            r = e * p;
          m = new Yf(q, r, d, e, 0, 0);
          if (1 != g) {
            var u = new ma(d, e, !0, 0);
            u.copyPixels(a, new Z(q, r, d, e), new aa());
            q = new Ab(u);
            q.smoothing = !0;
            r = new ia();
            r.scale(g, g);
            u = new ma(Math.round(d * g), Math.round(e * g), !0, 0);
            u.draw(q, r);
            m.bitmapData = u;
          }
          h.push(m);
        }
      }
    for (; h.length < f; ) h.push(new Yf());
    return new bf(a, h);
  };
  var uf = function () {};
  l["tjson.TJSON"] = uf;
  uf.__name__ = ["tjson", "TJSON"];
  uf.parse = function (a, b, c) {
    null == b && (b = "JSON Data");
    return new mk(a, b, c).doParse();
  };
  var mk = function (a, b, c) {
    null == b && (b = "JSON Data");
    this.json = a;
    this.fileName = b;
    this.currentLine = 1;
    this.lastSymbolQuoted = !1;
    this.pos = 0;
    this.floatRegex = new pa("^-?[0-9]*\\.[0-9]+$", "");
    this.intRegex = new pa("^-?[0-9]+$", "");
    this.strProcessor = null == c ? m(this, this.defaultStringProcessor) : c;
    this.cache = [];
  };
  l["tjson.TJSONParser"] = mk;
  mk.__name__ = ["tjson", "TJSONParser"];
  mk.prototype = {
    pos: null,
    json: null,
    lastSymbolQuoted: null,
    fileName: null,
    currentLine: null,
    cache: null,
    floatRegex: null,
    intRegex: null,
    strProcessor: null,
    doParse: function () {
      try {
        var a = this.getNextSymbol();
        switch (a) {
          case "[":
            return this.doArray();
          case "{":
            return this.doObject();
          default:
            return this.convertSymbolToProperType(a);
        }
      } catch (b) {
        ta.lastException = b;
        b instanceof G && (b = b.val);
        if (r.__instanceof(b, String))
          throw new G(
            this.fileName + " on line " + this.currentLine + ": " + b
          );
        throw b;
      }
    },
    doObject: function () {
      var a = {},
        b = !1;
      for (this.cache.push(a); this.pos < this.json.length; ) {
        var c = this.getNextSymbol();
        if ("," != c || this.lastSymbolQuoted) {
          if ("}" == c && !this.lastSymbolQuoted)
            return b && null != a.TJ_unserialize && a.TJ_unserialize(), a;
          var d = this.getNextSymbol();
          if (":" != d)
            throw new G("Expected ':' but got '" + d + "' instead.");
          d = this.getNextSymbol();
          if ("_hxcls" == c) {
            a = I.resolveClass(d);
            if (null == a) throw new G("Invalid class name - " + d);
            a = I.createEmptyInstance(a);
            this.cache.pop();
            this.cache.push(a);
            b = !0;
          } else
            (d =
              "{" != d || this.lastSymbolQuoted
                ? "[" != d || this.lastSymbolQuoted
                  ? this.convertSymbolToProperType(d)
                  : this.doArray()
                : this.doObject()),
              A.setField(a, c, d);
        }
      }
      throw new G("Unexpected end of file. Expected '}'");
    },
    doArray: function () {
      for (var a = [], b; this.pos < this.json.length; )
        if (((b = this.getNextSymbol()), "," != b || this.lastSymbolQuoted)) {
          if ("]" != b || this.lastSymbolQuoted)
            b =
              "{" != b || this.lastSymbolQuoted
                ? "[" != b || this.lastSymbolQuoted
                  ? this.convertSymbolToProperType(b)
                  : this.doArray()
                : this.doObject();
          else return a;
          a.push(b);
        }
      throw new G("Unexpected end of file. Expected ']'");
    },
    convertSymbolToProperType: function (a) {
      return this.lastSymbolQuoted
        ? J.startsWith(a, uf.OBJECT_REFERENCE_PREFIX)
          ? ((a = u.parseInt(
              S.substr(a, uf.OBJECT_REFERENCE_PREFIX.length, null)
            )),
            this.cache[a])
          : a
        : this.looksLikeFloat(a)
        ? u.parseFloat(a)
        : this.looksLikeInt(a)
        ? u.parseInt(a)
        : "true" == a.toLowerCase()
        ? !0
        : "false" == a.toLowerCase()
        ? !1
        : "null" == a.toLowerCase()
        ? null
        : a;
    },
    looksLikeFloat: function (a) {
      return this.floatRegex.match(a)
        ? !0
        : this.intRegex.match(a)
        ? ((a = this.intRegex.matched(0)),
          45 == S.cca(a, 0) ? "-2147483648" < a : "2147483647" < a)
        : !1;
    },
    looksLikeInt: function (a) {
      return this.intRegex.match(a);
    },
    getNextSymbol: function () {
      this.lastSymbolQuoted = !1;
      for (
        var a, b = !1, c = "", d = "", e = !1, f = !1, g = !1, h = !1;
        this.pos < this.json.length;

      )
        if (
          ((a = this.json.charAt(this.pos++)),
          "\n" != a || f || this.currentLine++,
          g)
        ) {
          if ("\n" == a || "\r" == a) (g = !1), this.pos++;
        } else if (h)
          "*" == a &&
            "/" == this.json.charAt(this.pos) &&
            ((h = !1), this.pos++);
        else if (b) {
          if (e) {
            e = !1;
            if ("'" == a || '"' == a) {
              d += a;
              continue;
            }
            if ("t" == a) {
              d += "\t";
              continue;
            }
            if ("n" == a) {
              d += "\n";
              continue;
            }
            if ("\\" == a) {
              d += "\\";
              continue;
            }
            if ("r" == a) {
              d += "\r";
              continue;
            }
            if ("/" == a) {
              d += "/";
              continue;
            }
            if ("u" == a) {
              for (var n = (a = 0); 4 > n; ) {
                n++;
                if (this.pos >= this.json.length)
                  throw new G("Unfinished UTF8 character");
                var p = S.cca(this.json, this.pos++);
                a <<= 4;
                if (48 <= p && 57 >= p) a += p - 48;
                else if (65 <= p && 70 >= p) a += 10 + p - 65;
                else if (97 <= p && 102 >= p) a += 10 + p - 95;
                else throw new G("Not a hex digit");
              }
              n = new qg();
              n.addChar(a);
              d += n.toString();
              continue;
            }
            throw new G("Invalid escape sequence '\\" + a + "'");
          }
          if ("\\" == a) e = !0;
          else {
            if (a == c) return d;
            d += a;
          }
        } else {
          if ("/" == a)
            if (((n = this.json.charAt(this.pos)), "/" == n)) {
              g = !0;
              this.pos++;
              continue;
            } else if ("*" == n) {
              h = !0;
              this.pos++;
              continue;
            }
          if (f) {
            if (
              " " == a ||
              "\n" == a ||
              "\r" == a ||
              "\t" == a ||
              "," == a ||
              ":" == a ||
              "}" == a ||
              "]" == a
            )
              return this.pos--, d;
            d += a;
          } else if (" " != a && "\t" != a && "\n" != a && "\r" != a) {
            if (
              "{" == a ||
              "}" == a ||
              "[" == a ||
              "]" == a ||
              "," == a ||
              ":" == a
            )
              return a;
            "'" == a || '"' == a
              ? ((b = !0), (c = a), (this.lastSymbolQuoted = !0))
              : ((f = !0), (d = a));
          }
        }
      if (b) throw new G("Unexpected end of data. Expected ( " + c + " )");
      return d;
    },
    defaultStringProcessor: function (a) {
      return a;
    },
    __class__: mk,
  };
  var sb = function () {};
  l["zpp_nape.ZPP_Const"] = sb;
  sb.__name__ = ["zpp_nape", "ZPP_Const"];
  sb.POSINF = function () {
    return Infinity;
  };
  sb.NEGINF = function () {
    return -Infinity;
  };
  var Ib = function () {};
  l["zpp_nape.ZPP_ID"] = Ib;
  Ib.__name__ = ["zpp_nape", "ZPP_ID"];
  Ib.Constraint = function () {
    return Ib._Constraint++;
  };
  Ib.Interactor = function () {
    return Ib._Interactor++;
  };
  Ib.CbType = function () {
    return Ib._CbType++;
  };
  Ib.CbSet = function () {
    return Ib._CbSet++;
  };
  Ib.Listener = function () {
    return Ib._Listener++;
  };
  var Re = function () {
    this.body = this.constraint = null;
    this.pre_swapped = !1;
    this.int1 =
      this.int2 =
      this.set =
      this.wrap_arbiters =
      this.pre_arbiter =
        null;
    this.length = 0;
    this.listener = this.next = this.prev = null;
    this.event = 0;
    this.outer_body = this.outer_con = this.outer_int = null;
    this.length = 0;
  };
  l["zpp_nape.callbacks.ZPP_Callback"] = Re;
  Re.__name__ = ["zpp_nape", "callbacks", "ZPP_Callback"];
  Re.prototype = {
    outer_body: null,
    outer_con: null,
    outer_int: null,
    wrapper_body: function () {
      null == this.outer_body &&
        ((this.outer_body = new th()), (this.outer_body.zpp_inner = this));
      return this.outer_body;
    },
    wrapper_con: function () {
      null == this.outer_con &&
        ((this.outer_con = new vh()), (this.outer_con.zpp_inner = this));
      return this.outer_con;
    },
    wrapper_int: function () {
      null == this.outer_int &&
        ((this.outer_int = new xh()), (this.outer_int.zpp_inner = this));
      this.genarbs();
      return this.outer_int;
    },
    event: null,
    listener: null,
    next: null,
    prev: null,
    length: null,
    push: function (a) {
      null != this.prev ? (this.prev.next = a) : (this.next = a);
      a.prev = this.prev;
      a.next = null;
      this.prev = a;
      this.length++;
    },
    pop: function () {
      var a = this.next;
      this.next = a.next;
      null == this.next ? (this.prev = null) : (this.next.prev = null);
      this.length--;
      return a;
    },
    empty: function () {
      return null == this.next;
    },
    free: function () {
      this.listener =
        this.constraint =
        this.body =
        this.int1 =
        this.int2 =
          null;
      null != this.wrap_arbiters && (this.wrap_arbiters.zpp_inner.inner = null);
      this.set = null;
    },
    alloc: function () {},
    int1: null,
    int2: null,
    set: null,
    wrap_arbiters: null,
    pre_arbiter: null,
    pre_swapped: null,
    genarbs: function () {
      null == this.wrap_arbiters
        ? (this.wrap_arbiters = zf.get(this.set.arbiters, !0))
        : (this.wrap_arbiters.zpp_inner.inner = this.set.arbiters);
      this.wrap_arbiters.zpp_inner.zip_length = !0;
      this.wrap_arbiters.zpp_inner.at_ite = null;
    },
    body: null,
    constraint: null,
    __class__: Re,
  };
  var Ea = function () {
    this.interactors = this.constraints = null;
    this.zip_conlisteners = !1;
    this.conlisteners = null;
    this.zip_bodylisteners = !1;
    this.bodylisteners = null;
    this.zip_listeners = !1;
    this.manager = this.cbpairs = this.listeners = null;
    this.id = 0;
    this.next = null;
    this.count = 0;
    this.cbTypes = new Sd();
    this.listeners = new ig();
    this.zip_listeners = !0;
    this.bodylisteners = new gi();
    this.zip_bodylisteners = !0;
    this.conlisteners = new hi();
    this.zip_conlisteners = !0;
    this.constraints = new Se();
    this.interactors = new ve();
    this.id = Ib.CbSet();
    this.cbpairs = new nk();
  };
  l["zpp_nape.callbacks.ZPP_CbSet"] = Ea;
  Ea.__name__ = ["zpp_nape", "callbacks", "ZPP_CbSet"];
  Ea.setlt = function (a, b) {
    a = a.cbTypes.begin();
    for (b = b.cbTypes.begin(); null != a && null != b; ) {
      var c = a.elem(),
        d = b.elem();
      if (Hb.setlt(c, d)) return !0;
      if (Hb.setlt(d, c)) return !1;
      a = a.next;
      b = b.next;
    }
    return null != b ? null == a : !1;
  };
  Ea.get = function (a) {
    if (null == Ea.zpp_pool) var b = new Ea();
    else (b = Ea.zpp_pool), (Ea.zpp_pool = b.next), (b.next = null);
    b.alloc();
    var c = null;
    for (a = a.begin(); null != a; ) {
      var d = a.elem();
      c = b.cbTypes.insert(c, d);
      d.cbsets.add(b);
      a = a.next;
    }
    return b;
  };
  Ea.empty_intersection = function (a, b) {
    return a.manager.pair(a, b).empty_intersection();
  };
  Ea.single_intersection = function (a, b, c) {
    return a.manager.pair(a, b).single_intersection(c);
  };
  Ea.find_all = function (a, b, c, d) {
    a.manager.pair(a, b).forall(c, d);
  };
  Ea.prototype = {
    cbTypes: null,
    count: null,
    next: null,
    id: null,
    manager: null,
    cbpairs: null,
    increment: function () {
      this.count++;
    },
    decrement: function () {
      return 0 == --this.count;
    },
    invalidate_pairs: function () {
      for (var a = this.cbpairs.begin(); null != a; )
        a.elem().invalidate(), (a = a.next);
    },
    listeners: null,
    zip_listeners: null,
    invalidate_listeners: function () {
      this.zip_listeners = !0;
      this.invalidate_pairs();
    },
    validate_listeners: function () {
      this.zip_listeners &&
        ((this.zip_listeners = !1), this.realvalidate_listeners());
    },
    realvalidate_listeners: function () {
      this.listeners.clear();
      for (var a = this.cbTypes.begin(); null != a; ) {
        var b = a.elem(),
          c = null,
          d = this.listeners.begin();
        for (b = b.listeners.begin(); null != b; ) {
          var e = b.elem();
          null != d && d.elem() == e
            ? ((b = b.next), (c = d), (d = d.next))
            : null == d || Qb.setlt(e, d.elem())
            ? (this.manager.valid_listener(e) &&
                (c = this.listeners.inlined_insert(c, e)),
              (b = b.next))
            : ((c = d), (d = d.next));
        }
        a = a.next;
      }
    },
    bodylisteners: null,
    zip_bodylisteners: null,
    invalidate_bodylisteners: function () {
      this.zip_bodylisteners = !0;
    },
    validate_bodylisteners: function () {
      this.zip_bodylisteners &&
        ((this.zip_bodylisteners = !1), this.realvalidate_bodylisteners());
    },
    realvalidate_bodylisteners: function () {
      this.bodylisteners.clear();
      for (var a = this.cbTypes.begin(); null != a; ) {
        var b = a.elem(),
          c = null,
          d = this.bodylisteners.begin();
        for (b = b.bodylisteners.begin(); null != b; ) {
          var e = b.elem();
          null != d && d.elem() == e
            ? ((b = b.next), (c = d), (d = d.next))
            : null == d || Qb.setlt(e, d.elem())
            ? (!e.options.excluded(this.cbTypes) &&
                this.manager.valid_listener(e) &&
                (c = this.bodylisteners.inlined_insert(c, e)),
              (b = b.next))
            : ((c = d), (d = d.next));
        }
        a = a.next;
      }
    },
    conlisteners: null,
    zip_conlisteners: null,
    invalidate_conlisteners: function () {
      this.zip_conlisteners = !0;
    },
    validate_conlisteners: function () {
      this.zip_conlisteners &&
        ((this.zip_conlisteners = !1), this.realvalidate_conlisteners());
    },
    realvalidate_conlisteners: function () {
      this.conlisteners.clear();
      for (var a = this.cbTypes.begin(); null != a; ) {
        var b = a.elem(),
          c = null,
          d = this.conlisteners.begin();
        for (b = b.conlisteners.begin(); null != b; ) {
          var e = b.elem();
          null != d && d.elem() == e
            ? ((b = b.next), (c = d), (d = d.next))
            : null == d || Qb.setlt(e, d.elem())
            ? (!e.options.excluded(this.cbTypes) &&
                this.manager.valid_listener(e) &&
                (c = this.conlisteners.inlined_insert(c, e)),
              (b = b.next))
            : ((c = d), (d = d.next));
        }
        a = a.next;
      }
    },
    validate: function () {
      this.validate_listeners();
      this.validate_bodylisteners();
      this.validate_conlisteners();
    },
    interactors: null,
    constraints: null,
    addConstraint: function (a) {
      this.constraints.add(a);
    },
    addInteractor: function (a) {
      this.interactors.add(a);
    },
    remConstraint: function (a) {
      this.constraints.remove(a);
    },
    remInteractor: function (a) {
      this.interactors.remove(a);
    },
    free: function () {
      this.listeners.clear();
      this.zip_listeners = !0;
      this.bodylisteners.clear();
      this.zip_bodylisteners = !0;
      this.conlisteners.clear();
      for (this.zip_conlisteners = !0; !this.cbTypes.empty(); )
        this.cbTypes.pop_unsafe().cbsets.remove(this);
    },
    alloc: function () {},
    __class__: Ea,
  };
  var cc = function () {
    this.listeners = null;
    this.zip_listeners = !1;
    this.a = this.b = this.next = null;
    this.listeners = new ig();
  };
  l["zpp_nape.callbacks.ZPP_CbSetPair"] = cc;
  cc.__name__ = ["zpp_nape", "callbacks", "ZPP_CbSetPair"];
  cc.get = function (a, b) {
    if (null == cc.zpp_pool) var c = new cc();
    else (c = cc.zpp_pool), (cc.zpp_pool = c.next), (c.next = null);
    c.alloc();
    Ea.setlt(a, b) ? ((c.a = a), (c.b = b)) : ((c.a = b), (c.b = a));
    return c;
  };
  cc.setlt = function (a, b) {
    return Ea.setlt(a.a, b.a) ? !0 : a.a == b.a ? Ea.setlt(a.b, b.b) : !1;
  };
  cc.prototype = {
    a: null,
    b: null,
    next: null,
    free: function () {
      this.a = this.b = null;
      this.listeners.clear();
    },
    alloc: function () {
      this.zip_listeners = !0;
    },
    compatible: function (a) {
      return a.options1.compatible(this.a.cbTypes) &&
        a.options2.compatible(this.b.cbTypes)
        ? !0
        : a.options2.compatible(this.a.cbTypes)
        ? a.options1.compatible(this.b.cbTypes)
        : !1;
    },
    zip_listeners: null,
    listeners: null,
    invalidate: function () {
      this.zip_listeners = !0;
    },
    validate: function () {
      this.zip_listeners && ((this.zip_listeners = !1), this.__validate());
    },
    __validate: function () {
      this.listeners.clear();
      for (
        var a = this.a.listeners.begin(), b = this.b.listeners.begin();
        null != a && null != b;

      ) {
        var c = a.elem(),
          d = b.elem();
        c == d
          ? (this.compatible(c) && this.listeners.add(c),
            (a = a.next),
            (b = b.next))
          : Qb.setlt(c, d)
          ? (a = a.next)
          : (b = b.next);
      }
    },
    empty_intersection: function () {
      return this.listeners.empty();
    },
    single_intersection: function (a) {
      var b = this.listeners.begin();
      return null != b && b.elem() == a ? null == b.next : !1;
    },
    forall: function (a, b) {
      for (var c = this.listeners.begin(); null != c; ) {
        var d = c.elem();
        d.event == a && b(d);
        c = c.next;
      }
    },
    __class__: cc,
  };
  var ig = function () {
    this.length = 0;
    this.modified = this.pushmod = !1;
    this.head = null;
  };
  l["zpp_nape.util.ZNPList_ZPP_InteractionListener"] = ig;
  ig.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_InteractionListener"];
  ig.prototype = {
    head: null,
    begin: function () {
      return this.head;
    },
    modified: null,
    pushmod: null,
    length: null,
    add: function (a) {
      return this.inlined_add(a);
    },
    inlined_add: function (a) {
      if (null == Uc.zpp_pool) var b = new Uc();
      else (b = Uc.zpp_pool), (Uc.zpp_pool = b.next), (b.next = null);
      b.alloc();
      b.elt = a;
      b.next = this.begin();
      this.head = b;
      this.modified = !0;
      this.length++;
      return a;
    },
    inlined_insert: function (a, b) {
      if (null == Uc.zpp_pool) var c = new Uc();
      else (c = Uc.zpp_pool), (Uc.zpp_pool = c.next), (c.next = null);
      c.alloc();
      c.elt = b;
      b = c;
      null == a
        ? ((b.next = this.begin()), (this.head = b))
        : ((b.next = a.next), (a.next = b));
      this.pushmod = this.modified = !0;
      this.length++;
      return b;
    },
    inlined_pop: function () {
      var a = this.begin();
      this.head = a.next;
      a.free();
      a.next = Uc.zpp_pool;
      Uc.zpp_pool = a;
      this.empty() && (this.pushmod = !0);
      this.modified = !0;
      this.length--;
    },
    remove: function (a) {
      this.inlined_try_remove(a);
    },
    inlined_try_remove: function (a) {
      for (var b = null, c = this.begin(), d = !1; null != c; ) {
        if (c.elem() == a) {
          this.inlined_erase(b);
          d = !0;
          break;
        }
        b = c;
        c = c.next;
      }
      return d;
    },
    inlined_erase: function (a) {
      var b;
      if (null == a) {
        var c = this.begin();
        this.head = b = c.next;
        this.empty() && (this.pushmod = !0);
      } else
        (c = a.next),
          (b = c.next),
          (a.next = b),
          null == b && (this.pushmod = !0);
      a = c;
      a.free();
      a.next = Uc.zpp_pool;
      Uc.zpp_pool = a;
      this.modified = !0;
      this.length--;
      this.pushmod = !0;
      return b;
    },
    clear: function () {
      this.inlined_clear();
    },
    inlined_clear: function () {
      for (; !this.empty(); ) this.inlined_pop();
      this.pushmod = !0;
    },
    empty: function () {
      return null == this.begin();
    },
    __class__: ig,
  };
  var gi = function () {
    this.length = 0;
    this.modified = this.pushmod = !1;
    this.head = null;
  };
  l["zpp_nape.util.ZNPList_ZPP_BodyListener"] = gi;
  gi.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_BodyListener"];
  gi.prototype = {
    head: null,
    begin: function () {
      return this.head;
    },
    modified: null,
    pushmod: null,
    length: null,
    inlined_insert: function (a, b) {
      if (null == we.zpp_pool) var c = new we();
      else (c = we.zpp_pool), (we.zpp_pool = c.next), (c.next = null);
      c.alloc();
      c.elt = b;
      b = c;
      null == a
        ? ((b.next = this.begin()), (this.head = b))
        : ((b.next = a.next), (a.next = b));
      this.pushmod = this.modified = !0;
      this.length++;
      return b;
    },
    inlined_pop: function () {
      var a = this.begin();
      this.head = a.next;
      a.free();
      a.next = we.zpp_pool;
      we.zpp_pool = a;
      this.empty() && (this.pushmod = !0);
      this.modified = !0;
      this.length--;
    },
    remove: function (a) {
      this.inlined_try_remove(a);
    },
    inlined_try_remove: function (a) {
      for (var b = null, c = this.begin(), d = !1; null != c; ) {
        if (c.elem() == a) {
          this.inlined_erase(b);
          d = !0;
          break;
        }
        b = c;
        c = c.next;
      }
      return d;
    },
    inlined_erase: function (a) {
      var b;
      if (null == a) {
        var c = this.begin();
        this.head = b = c.next;
        this.empty() && (this.pushmod = !0);
      } else
        (c = a.next),
          (b = c.next),
          (a.next = b),
          null == b && (this.pushmod = !0);
      a = c;
      a.free();
      a.next = we.zpp_pool;
      we.zpp_pool = a;
      this.modified = !0;
      this.length--;
      this.pushmod = !0;
      return b;
    },
    clear: function () {
      this.inlined_clear();
    },
    inlined_clear: function () {
      for (; !this.empty(); ) this.inlined_pop();
      this.pushmod = !0;
    },
    empty: function () {
      return null == this.begin();
    },
    __class__: gi,
  };
  var hi = function () {
    this.length = 0;
    this.modified = this.pushmod = !1;
    this.head = null;
  };
  l["zpp_nape.util.ZNPList_ZPP_ConstraintListener"] = hi;
  hi.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_ConstraintListener"];
  hi.prototype = {
    head: null,
    begin: function () {
      return this.head;
    },
    modified: null,
    pushmod: null,
    length: null,
    inlined_insert: function (a, b) {
      if (null == Te.zpp_pool) var c = new Te();
      else (c = Te.zpp_pool), (Te.zpp_pool = c.next), (c.next = null);
      c.alloc();
      c.elt = b;
      b = c;
      null == a
        ? ((b.next = this.begin()), (this.head = b))
        : ((b.next = a.next), (a.next = b));
      this.pushmod = this.modified = !0;
      this.length++;
      return b;
    },
    inlined_pop: function () {
      var a = this.begin();
      this.head = a.next;
      a.free();
      a.next = Te.zpp_pool;
      Te.zpp_pool = a;
      this.empty() && (this.pushmod = !0);
      this.modified = !0;
      this.length--;
    },
    remove: function (a) {
      this.inlined_try_remove(a);
    },
    inlined_try_remove: function (a) {
      for (var b = null, c = this.begin(), d = !1; null != c; ) {
        if (c.elem() == a) {
          this.inlined_erase(b);
          d = !0;
          break;
        }
        b = c;
        c = c.next;
      }
      return d;
    },
    inlined_erase: function (a) {
      var b;
      if (null == a) {
        var c = this.begin();
        this.head = b = c.next;
        this.empty() && (this.pushmod = !0);
      } else
        (c = a.next),
          (b = c.next),
          (a.next = b),
          null == b && (this.pushmod = !0);
      a = c;
      a.free();
      a.next = Te.zpp_pool;
      Te.zpp_pool = a;
      this.modified = !0;
      this.length--;
      this.pushmod = !0;
      return b;
    },
    clear: function () {
      this.inlined_clear();
    },
    inlined_clear: function () {
      for (; !this.empty(); ) this.inlined_pop();
      this.pushmod = !0;
    },
    empty: function () {
      return null == this.begin();
    },
    __class__: hi,
  };
  var Se = function () {
    this.length = 0;
    this.modified = this.pushmod = !1;
    this.head = null;
  };
  l["zpp_nape.util.ZNPList_ZPP_Constraint"] = Se;
  Se.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Constraint"];
  Se.prototype = {
    head: null,
    begin: function () {
      return this.head;
    },
    modified: null,
    pushmod: null,
    length: null,
    add: function (a) {
      return this.inlined_add(a);
    },
    inlined_add: function (a) {
      if (null == Vc.zpp_pool) var b = new Vc();
      else (b = Vc.zpp_pool), (Vc.zpp_pool = b.next), (b.next = null);
      b.alloc();
      b.elt = a;
      b.next = this.begin();
      this.head = b;
      this.modified = !0;
      this.length++;
      return a;
    },
    insert: function (a, b) {
      return this.inlined_insert(a, b);
    },
    inlined_insert: function (a, b) {
      if (null == Vc.zpp_pool) var c = new Vc();
      else (c = Vc.zpp_pool), (Vc.zpp_pool = c.next), (c.next = null);
      c.alloc();
      c.elt = b;
      b = c;
      null == a
        ? ((b.next = this.begin()), (this.head = b))
        : ((b.next = a.next), (a.next = b));
      this.pushmod = this.modified = !0;
      this.length++;
      return b;
    },
    pop: function () {
      this.inlined_pop();
    },
    inlined_pop: function () {
      var a = this.begin();
      this.head = a.next;
      a.free();
      a.next = Vc.zpp_pool;
      Vc.zpp_pool = a;
      this.empty() && (this.pushmod = !0);
      this.modified = !0;
      this.length--;
    },
    pop_unsafe: function () {
      return this.inlined_pop_unsafe();
    },
    inlined_pop_unsafe: function () {
      var a = this.front();
      this.pop();
      return a;
    },
    remove: function (a) {
      this.inlined_try_remove(a);
    },
    inlined_try_remove: function (a) {
      for (var b = null, c = this.begin(), d = !1; null != c; ) {
        if (c.elem() == a) {
          this.inlined_erase(b);
          d = !0;
          break;
        }
        b = c;
        c = c.next;
      }
      return d;
    },
    erase: function (a) {
      return this.inlined_erase(a);
    },
    inlined_erase: function (a) {
      var b;
      if (null == a) {
        var c = this.begin();
        this.head = b = c.next;
        this.empty() && (this.pushmod = !0);
      } else
        (c = a.next),
          (b = c.next),
          (a.next = b),
          null == b && (this.pushmod = !0);
      a = c;
      a.free();
      a.next = Vc.zpp_pool;
      Vc.zpp_pool = a;
      this.modified = !0;
      this.length--;
      this.pushmod = !0;
      return b;
    },
    clear: function () {
      this.inlined_clear();
    },
    inlined_clear: function () {
      for (; !this.empty(); ) this.inlined_pop();
      this.pushmod = !0;
    },
    empty: function () {
      return null == this.begin();
    },
    front: function () {
      return this.begin().elem();
    },
    iterator_at: function (a) {
      for (var b = this.begin(); 0 < a-- && null != b; ) b = b.next;
      return b;
    },
    __class__: Se,
  };
  var ve = function () {
    this.length = 0;
    this.modified = this.pushmod = !1;
    this.head = null;
  };
  l["zpp_nape.util.ZNPList_ZPP_Interactor"] = ve;
  ve.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Interactor"];
  ve.prototype = {
    head: null,
    begin: function () {
      return this.head;
    },
    modified: null,
    pushmod: null,
    length: null,
    add: function (a) {
      return this.inlined_add(a);
    },
    inlined_add: function (a) {
      if (null == Td.zpp_pool) var b = new Td();
      else (b = Td.zpp_pool), (Td.zpp_pool = b.next), (b.next = null);
      b.alloc();
      b.elt = a;
      b.next = this.begin();
      this.head = b;
      this.modified = !0;
      this.length++;
      return a;
    },
    pop: function () {
      this.inlined_pop();
    },
    inlined_pop: function () {
      var a = this.begin();
      this.head = a.next;
      a.free();
      a.next = Td.zpp_pool;
      Td.zpp_pool = a;
      this.empty() && (this.pushmod = !0);
      this.modified = !0;
      this.length--;
    },
    pop_unsafe: function () {
      return this.inlined_pop_unsafe();
    },
    inlined_pop_unsafe: function () {
      var a = this.front();
      this.pop();
      return a;
    },
    remove: function (a) {
      this.inlined_try_remove(a);
    },
    inlined_try_remove: function (a) {
      for (var b = null, c = this.begin(), d = !1; null != c; ) {
        if (c.elem() == a) {
          this.inlined_erase(b);
          d = !0;
          break;
        }
        b = c;
        c = c.next;
      }
      return d;
    },
    inlined_erase: function (a) {
      var b;
      if (null == a) {
        var c = this.begin();
        this.head = b = c.next;
        this.empty() && (this.pushmod = !0);
      } else
        (c = a.next),
          (b = c.next),
          (a.next = b),
          null == b && (this.pushmod = !0);
      a = c;
      a.free();
      a.next = Td.zpp_pool;
      Td.zpp_pool = a;
      this.modified = !0;
      this.length--;
      this.pushmod = !0;
      return b;
    },
    clear: function () {
      this.inlined_clear();
    },
    inlined_clear: function () {
      for (; !this.empty(); ) this.inlined_pop();
      this.pushmod = !0;
    },
    empty: function () {
      return null == this.begin();
    },
    front: function () {
      return this.begin().elem();
    },
    iterator_at: function (a) {
      for (var b = this.begin(); 0 < a-- && null != b; ) b = b.next;
      return b;
    },
    __class__: ve,
  };
  var Gf = function () {
    this.length = 0;
    this.modified = this.pushmod = !1;
    this.head = null;
  };
  l["zpp_nape.util.ZNPList_ZPP_CbSet"] = Gf;
  Gf.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_CbSet"];
  Gf.prototype = {
    head: null,
    begin: function () {
      return this.head;
    },
    modified: null,
    pushmod: null,
    length: null,
    add: function (a) {
      return this.inlined_add(a);
    },
    inlined_add: function (a) {
      if (null == Wc.zpp_pool) var b = new Wc();
      else (b = Wc.zpp_pool), (Wc.zpp_pool = b.next), (b.next = null);
      b.alloc();
      b.elt = a;
      b.next = this.begin();
      this.head = b;
      this.modified = !0;
      this.length++;
      return a;
    },
    pop: function () {
      this.inlined_pop();
    },
    inlined_pop: function () {
      var a = this.begin();
      this.head = a.next;
      a.free();
      a.next = Wc.zpp_pool;
      Wc.zpp_pool = a;
      this.empty() && (this.pushmod = !0);
      this.modified = !0;
      this.length--;
    },
    pop_unsafe: function () {
      return this.inlined_pop_unsafe();
    },
    inlined_pop_unsafe: function () {
      var a = this.front();
      this.pop();
      return a;
    },
    remove: function (a) {
      this.inlined_try_remove(a);
    },
    inlined_try_remove: function (a) {
      for (var b = null, c = this.begin(), d = !1; null != c; ) {
        if (c.elem() == a) {
          this.inlined_erase(b);
          d = !0;
          break;
        }
        b = c;
        c = c.next;
      }
      return d;
    },
    inlined_erase: function (a) {
      var b;
      if (null == a) {
        var c = this.begin();
        this.head = b = c.next;
        this.empty() && (this.pushmod = !0);
      } else
        (c = a.next),
          (b = c.next),
          (a.next = b),
          null == b && (this.pushmod = !0);
      a = c;
      a.free();
      a.next = Wc.zpp_pool;
      Wc.zpp_pool = a;
      this.modified = !0;
      this.length--;
      this.pushmod = !0;
      return b;
    },
    empty: function () {
      return null == this.begin();
    },
    front: function () {
      return this.begin().elem();
    },
    __class__: Gf,
  };
  var Hb = function () {
    this.cbsets =
      this.listeners =
      this.bodylisteners =
      this.conlisteners =
        null;
    this.id = 0;
    this.outer = null;
    this.id = Ib.CbType();
    this.listeners = new ig();
    this.bodylisteners = new gi();
    this.conlisteners = new hi();
    this.constraints = new Se();
    this.interactors = new ve();
    this.cbsets = new Gf();
  };
  l["zpp_nape.callbacks.ZPP_CbType"] = Hb;
  Hb.__name__ = ["zpp_nape", "callbacks", "ZPP_CbType"];
  Hb.setlt = function (a, b) {
    return a.id < b.id;
  };
  Hb.prototype = {
    outer: null,
    id: null,
    cbsets: null,
    interactors: null,
    constraints: null,
    addConstraint: function (a) {
      this.constraints.add(a);
    },
    addInteractor: function (a) {
      this.interactors.add(a);
    },
    remConstraint: function (a) {
      this.constraints.remove(a);
    },
    remInteractor: function (a) {
      this.interactors.remove(a);
    },
    listeners: null,
    addint: function (a) {
      for (var b = null, c = this.listeners.begin(); null != c; ) {
        var d = c.elem();
        if (Qb.setlt(a, d)) break;
        b = c;
        c = c.next;
      }
      this.listeners.inlined_insert(b, a);
      this.invalidateint();
    },
    removeint: function (a) {
      this.listeners.remove(a);
      this.invalidateint();
    },
    invalidateint: function () {
      for (var a = this.cbsets.begin(); null != a; )
        a.elem().invalidate_listeners(), (a = a.next);
    },
    bodylisteners: null,
    addbody: function (a) {
      for (var b = null, c = this.bodylisteners.begin(); null != c; ) {
        var d = c.elem();
        if (Qb.setlt(a, d)) break;
        b = c;
        c = c.next;
      }
      this.bodylisteners.inlined_insert(b, a);
      this.invalidatebody();
    },
    removebody: function (a) {
      this.bodylisteners.remove(a);
      this.invalidatebody();
    },
    invalidatebody: function () {
      for (var a = this.cbsets.begin(); null != a; )
        a.elem().invalidate_bodylisteners(), (a = a.next);
    },
    conlisteners: null,
    addconstraint: function (a) {
      for (var b = null, c = this.conlisteners.begin(); null != c; ) {
        var d = c.elem();
        if (Qb.setlt(a, d)) break;
        b = c;
        c = c.next;
      }
      this.conlisteners.inlined_insert(b, a);
      this.invalidateconstraint();
    },
    removeconstraint: function (a) {
      this.conlisteners.remove(a);
      this.invalidateconstraint();
    },
    invalidateconstraint: function () {
      for (var a = this.cbsets.begin(); null != a; )
        a.elem().invalidate_conlisteners(), (a = a.next);
    },
    __class__: Hb,
  };
  var z = function () {};
  l["zpp_nape.util.ZPP_Flags"] = z;
  z.__name__ = ["zpp_nape", "util", "ZPP_Flags"];
  var Qb = function () {
    this.body = this.constraint = this.interaction = this.space = null;
    this.id = this.type = this.event = this.precedence = 0;
    this.outer = null;
    this.id = Ib.Listener();
  };
  l["zpp_nape.callbacks.ZPP_Listener"] = Qb;
  Qb.__name__ = ["zpp_nape", "callbacks", "ZPP_Listener"];
  Qb.setlt = function (a, b) {
    return a.precedence <= b.precedence
      ? a.precedence == b.precedence
        ? a.id > b.id
        : !1
      : !0;
  };
  Qb.prototype = {
    outer: null,
    id: null,
    type: null,
    event: null,
    precedence: null,
    body: null,
    constraint: null,
    interaction: null,
    space: null,
    addedToSpace: function () {},
    removedFromSpace: function () {},
    __class__: Qb,
  };
  var uh = function (a, b, c) {
    this.outer_zn = this.options = this.handler = null;
    Qb.call(this);
    this.event = b;
    this.handler = c;
    this.body = this;
    this.type = 0;
    this.options = a.zpp_inner;
  };
  l["zpp_nape.callbacks.ZPP_BodyListener"] = uh;
  uh.__name__ = ["zpp_nape", "callbacks", "ZPP_BodyListener"];
  uh.__super__ = Qb;
  uh.prototype = v(Qb.prototype, {
    outer_zn: null,
    options: null,
    handler: null,
    addedToSpace: function () {
      this.options.handler = m(this, this.cbtype_change);
      for (var a = this.options.includes.begin(); null != a; )
        a.elem().addbody(this), (a = a.next);
    },
    removedFromSpace: function () {
      for (var a = this.options.includes.begin(); null != a; )
        a.elem().removebody(this), (a = a.next);
      this.options.handler = null;
    },
    cbtype_change: function (a, b, c) {
      this.removedFromSpace();
      this.options.effect_change(a, b, c);
      this.addedToSpace();
    },
    __class__: uh,
  });
  var wh = function (a, b, c) {
    this.outer_zn = this.options = this.handler = null;
    Qb.call(this);
    this.event = b;
    this.handler = c;
    this.constraint = this;
    this.type = 1;
    this.options = a.zpp_inner;
  };
  l["zpp_nape.callbacks.ZPP_ConstraintListener"] = wh;
  wh.__name__ = ["zpp_nape", "callbacks", "ZPP_ConstraintListener"];
  wh.__super__ = Qb;
  wh.prototype = v(Qb.prototype, {
    outer_zn: null,
    options: null,
    handler: null,
    addedToSpace: function () {
      this.options.handler = m(this, this.cbtype_change);
      for (var a = this.options.includes.begin(); null != a; )
        a.elem().addconstraint(this), (a = a.next);
    },
    removedFromSpace: function () {
      for (var a = this.options.includes.begin(); null != a; )
        a.elem().removeconstraint(this), (a = a.next);
      this.options.handler = null;
    },
    cbtype_change: function (a, b, c) {
      this.removedFromSpace();
      this.options.effect_change(a, b, c);
      this.addedToSpace();
    },
    __class__: wh,
  });
  var Sd = function () {
    this.length = 0;
    this.modified = this.pushmod = !1;
    this.head = null;
  };
  l["zpp_nape.util.ZNPList_ZPP_CbType"] = Sd;
  Sd.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_CbType"];
  Sd.prototype = {
    head: null,
    begin: function () {
      return this.head;
    },
    modified: null,
    pushmod: null,
    length: null,
    add: function (a) {
      return this.inlined_add(a);
    },
    inlined_add: function (a) {
      if (null == Xc.zpp_pool) var b = new Xc();
      else (b = Xc.zpp_pool), (Xc.zpp_pool = b.next), (b.next = null);
      b.alloc();
      b.elt = a;
      b.next = this.begin();
      this.head = b;
      this.modified = !0;
      this.length++;
      return a;
    },
    insert: function (a, b) {
      return this.inlined_insert(a, b);
    },
    inlined_insert: function (a, b) {
      if (null == Xc.zpp_pool) var c = new Xc();
      else (c = Xc.zpp_pool), (Xc.zpp_pool = c.next), (c.next = null);
      c.alloc();
      c.elt = b;
      b = c;
      null == a
        ? ((b.next = this.begin()), (this.head = b))
        : ((b.next = a.next), (a.next = b));
      this.pushmod = this.modified = !0;
      this.length++;
      return b;
    },
    pop: function () {
      this.inlined_pop();
    },
    inlined_pop: function () {
      var a = this.begin();
      this.head = a.next;
      a.free();
      a.next = Xc.zpp_pool;
      Xc.zpp_pool = a;
      this.empty() && (this.pushmod = !0);
      this.modified = !0;
      this.length--;
    },
    pop_unsafe: function () {
      return this.inlined_pop_unsafe();
    },
    inlined_pop_unsafe: function () {
      var a = this.front();
      this.pop();
      return a;
    },
    remove: function (a) {
      this.inlined_try_remove(a);
    },
    inlined_try_remove: function (a) {
      for (var b = null, c = this.begin(), d = !1; null != c; ) {
        if (c.elem() == a) {
          this.inlined_erase(b);
          d = !0;
          break;
        }
        b = c;
        c = c.next;
      }
      return d;
    },
    inlined_erase: function (a) {
      var b;
      if (null == a) {
        var c = this.begin();
        this.head = b = c.next;
        this.empty() && (this.pushmod = !0);
      } else
        (c = a.next),
          (b = c.next),
          (a.next = b),
          null == b && (this.pushmod = !0);
      a = c;
      a.free();
      a.next = Xc.zpp_pool;
      Xc.zpp_pool = a;
      this.modified = !0;
      this.length--;
      this.pushmod = !0;
      return b;
    },
    clear: function () {
      this.inlined_clear();
    },
    inlined_clear: function () {
      for (; !this.empty(); ) this.inlined_pop();
      this.pushmod = !0;
    },
    empty: function () {
      return null == this.begin();
    },
    has: function (a) {
      return this.inlined_has(a);
    },
    inlined_has: function (a) {
      var b = !1;
      for (var c = this.begin(); null != c; ) {
        if (c.elem() == a) {
          b = !0;
          break;
        }
        c = c.next;
      }
      return b;
    },
    front: function () {
      return this.begin().elem();
    },
    iterator_at: function (a) {
      for (var b = this.begin(); 0 < a-- && null != b; ) b = b.next;
      return b;
    },
    __class__: Sd,
  };
  var ic = function (a, b, c, d) {
    this.handlerp = null;
    this.allowSleepingCallbacks = this.pure = !1;
    this.options1 = this.options2 = this.handleri = null;
    this.itype = 0;
    this.outer_zni = this.outer_znp = null;
    Qb.call(this);
    this.type = d;
    this.interaction = this;
    this.event = c;
    this.options1 = a.zpp_inner;
    this.options2 = b.zpp_inner;
    this.allowSleepingCallbacks = !1;
  };
  l["zpp_nape.callbacks.ZPP_InteractionListener"] = ic;
  ic.__name__ = ["zpp_nape", "callbacks", "ZPP_InteractionListener"];
  ic.__super__ = Qb;
  ic.prototype = v(Qb.prototype, {
    outer_zni: null,
    outer_znp: null,
    itype: null,
    options1: null,
    options2: null,
    handleri: null,
    allowSleepingCallbacks: null,
    pure: null,
    handlerp: null,
    setInteractionType: function (a) {
      this.itype = a;
    },
    CbSetset: function (a, b, c) {
      var d = ic.UCbSet,
        e = ic.VCbSet,
        f = ic.WCbSet;
      a = a.begin();
      for (var g = b.begin(); null != a && null != g; ) {
        var h = a.elem(),
          n = g.elem();
        h == n
          ? (f.inlined_add(h), (a = a.next), (g = g.next))
          : Ea.setlt(h, n)
          ? (d.inlined_add(h), (a = a.next))
          : (e.inlined_add(n), (g = g.next));
      }
      for (; null != a; ) d.inlined_add(a.elem()), (a = a.next);
      for (; null != g; ) e.inlined_add(g.elem()), (g = g.next);
      for (; !d.empty(); )
        for (a = d.pop_unsafe(), g = b.begin(); null != g; )
          (h = g.elem()), c(a, h), (g = g.next);
      for (; !e.empty(); )
        for (b = e.pop_unsafe(), d = f.begin(); null != d; )
          (a = d.elem()), c(b, a), (d = d.next);
      for (; !f.empty(); )
        for (e = f.pop_unsafe(), c(e, e), b = f.begin(); null != b; )
          (d = b.elem()), c(e, d), (b = b.next);
    },
    CbTypeset: function (a, b, c) {
      var d = ic.UCbType,
        e = ic.VCbType,
        f = ic.WCbType;
      a = a.begin();
      for (var g = b.begin(); null != a && null != g; ) {
        var h = a.elem(),
          n = g.elem();
        h == n
          ? (f.inlined_add(h), (a = a.next), (g = g.next))
          : Hb.setlt(h, n)
          ? (d.inlined_add(h), (a = a.next))
          : (e.inlined_add(n), (g = g.next));
      }
      for (; null != a; ) d.inlined_add(a.elem()), (a = a.next);
      for (; null != g; ) e.inlined_add(g.elem()), (g = g.next);
      for (; !d.empty(); )
        for (a = d.pop_unsafe(), g = b.begin(); null != g; )
          (h = g.elem()), c(a, h), (g = g.next);
      for (; !e.empty(); )
        for (b = e.pop_unsafe(), d = f.begin(); null != d; )
          (a = d.elem()), c(b, a), (d = d.next);
      for (; !f.empty(); )
        for (e = f.pop_unsafe(), c(e, e), b = f.begin(); null != b; )
          (d = b.elem()), c(e, d), (b = b.next);
    },
    with_uniquesets: function (a) {
      var b = this;
      if (null == yb.zpp_pool) var c = new yb();
      else (c = yb.zpp_pool), (yb.zpp_pool = c.next), (c.next = null);
      c.alloc();
      c.lt = cc.setlt;
      this.CbTypeset(
        this.options1.includes,
        this.options2.includes,
        function (a, d) {
          b.CbSetset(a.cbsets, d.cbsets, function (a, d) {
            a.validate();
            d.validate();
            Ea.single_intersection(a, d, b) &&
              ((a = cc.get(a, d)), c.try_insert(a));
          });
        }
      );
      c.clear_with(function (c) {
        a
          ? b.space.freshListenerType(c.a, c.b)
          : b.space.nullListenerType(c.a, c.b);
        c.free();
        c.next = cc.zpp_pool;
        cc.zpp_pool = c;
      });
      var d = c;
      d.free();
      d.next = yb.zpp_pool;
      yb.zpp_pool = d;
    },
    with_union: function (a) {
      for (
        var b = this.options1.includes.begin(),
          c = this.options2.includes.begin();
        null != b && null != c;

      ) {
        var d = b.elem(),
          e = c.elem();
        d == e
          ? (a(d), (b = b.next), (c = c.next))
          : Hb.setlt(d, e)
          ? (a(d), (b = b.next))
          : (a(e), (c = c.next));
      }
      for (; null != b; ) a(b.elem()), (b = b.next);
      for (; null != c; ) a(c.elem()), (c = c.next);
    },
    addedToSpace: function () {
      var a = this,
        b = 3 == this.type;
      this.with_union(function (c) {
        c.addint(a);
        if (b)
          for (c = c.interactors.begin(); null != c; )
            c.elem().wake(), (c = c.next);
      });
      this.options1.handler = m(this, this.cbtype_change1);
      this.options2.handler = m(this, this.cbtype_change2);
      this.with_uniquesets(!0);
    },
    removedFromSpace: function () {
      var a = this;
      this.with_uniquesets(!1);
      var b = 3 == this.type;
      this.with_union(function (c) {
        c.removeint(a);
        if (b)
          for (c = c.interactors.begin(); null != c; )
            c.elem().wake(), (c = c.next);
      });
      this.options1.handler = null;
      this.options2.handler = null;
    },
    cbtype_change1: function (a, b, c) {
      this.cbtype_change(this.options1, a, b, c);
    },
    cbtype_change2: function (a, b, c) {
      this.cbtype_change(this.options2, a, b, c);
    },
    cbtype_change: function (a, b, c, d) {
      this.space.revoke_listener(this);
      this.removedFromSpace();
      a.effect_change(b, c, d);
      this.addedToSpace();
      this.space.unrevoke_listener(this);
    },
    __class__: ic,
  });
  var Fd = function () {
    this.outer =
      this.handler =
      this.includes =
      this.excludes =
      this.wrap_includes =
      this.wrap_excludes =
        null;
    this.includes = new Sd();
    this.excludes = new Sd();
  };
  l["zpp_nape.callbacks.ZPP_OptionType"] = Fd;
  Fd.__name__ = ["zpp_nape", "callbacks", "ZPP_OptionType"];
  Fd.argument = function (a) {
    return null == a ? new yf() : u.is(a, yf) ? a : new yf().including(a);
  };
  Fd.prototype = {
    outer: null,
    handler: null,
    includes: null,
    excludes: null,
    wrap_includes: null,
    wrap_excludes: null,
    setup_includes: function () {
      this.wrap_includes = Le.get(this.includes, !0);
    },
    setup_excludes: function () {
      this.wrap_excludes = Le.get(this.excludes, !0);
    },
    excluded: function (a) {
      return this.nonemptyintersection(a, this.excludes);
    },
    included: function (a) {
      return this.nonemptyintersection(a, this.includes);
    },
    compatible: function (a) {
      return this.included(a) ? !this.excluded(a) : !1;
    },
    nonemptyintersection: function (a, b) {
      var c = !1;
      a = a.begin();
      for (b = b.begin(); null != b && null != a; ) {
        var d = b.elem(),
          e = a.elem();
        if (d == e) {
          c = !0;
          break;
        } else Hb.setlt(d, e) ? (b = b.next) : (a = a.next);
      }
      return c;
    },
    effect_change: function (a, b, c) {
      if (b)
        if (c) {
          b = null;
          for (c = this.includes.begin(); null != c; ) {
            var d = c.elem();
            if (Hb.setlt(a, d)) break;
            b = c;
            c = c.next;
          }
          this.includes.inlined_insert(b, a);
        } else this.includes.remove(a);
      else if (c) {
        b = null;
        for (c = this.excludes.begin(); null != c; ) {
          d = c.elem();
          if (Hb.setlt(a, d)) break;
          b = c;
          c = c.next;
        }
        this.excludes.inlined_insert(b, a);
      } else this.excludes.remove(a);
    },
    append_type: function (a, b) {
      a == this.includes
        ? this.includes.has(b) ||
          (this.excludes.has(b)
            ? null != this.handler
              ? this.handler(b, !1, !1)
              : this.effect_change(b, !1, !1)
            : null != this.handler
            ? this.handler(b, !0, !0)
            : this.effect_change(b, !0, !0))
        : this.excludes.has(b) ||
          (this.includes.has(b)
            ? null != this.handler
              ? this.handler(b, !0, !1)
              : this.effect_change(b, !0, !1)
            : null != this.handler
            ? this.handler(b, !1, !0)
            : this.effect_change(b, !1, !0));
    },
    append: function (a, b) {
      if (u.is(b, za)) this.append_type(a, b.zpp_inner);
      else if (u.is(b, Me))
        for (b = b.iterator(); b.hasNext(); ) {
          var c = b.next();
          this.append_type(a, c.zpp_inner);
        }
      else if (b instanceof Array && null == b.__enum__)
        for (c = 0; c < b.length; ) {
          var d = b[c];
          ++c;
          this.append_type(a, d.zpp_inner);
        }
    },
    __class__: Fd,
  };
  var Qa = function () {
    this.pre_dt = 0;
    this.cbTypes = this.cbSet = this.wrap_cbTypes = null;
    this.ignore = this.__velocity = !1;
    this.component = null;
    this.breakUnderForce = this.breakUnderError = this.removeOnBreak = !1;
    this.frequency = this.damping = this.maxForce = this.maxError = 0;
    this.active = this.stiff = !1;
    this.compound = this.space = null;
    this.id = 0;
    this.outer = null;
    this.__velocity = !1;
    this.id = Ib.Constraint();
    this.active = this.stiff = !0;
    this.ignore = !1;
    this.frequency = 10;
    this.damping = 1;
    this.maxForce = sb.POSINF();
    this.maxError = sb.POSINF();
    this.breakUnderForce = !1;
    this.removeOnBreak = !0;
    this.pre_dt = -1;
    this.cbTypes = new Sd();
  };
  l["zpp_nape.constraint.ZPP_Constraint"] = Qa;
  Qa.__name__ = ["zpp_nape", "constraint", "ZPP_Constraint"];
  Qa.prototype = {
    outer: null,
    id: null,
    compound: null,
    space: null,
    active: null,
    stiff: null,
    frequency: null,
    damping: null,
    maxForce: null,
    maxError: null,
    breakUnderForce: null,
    breakUnderError: null,
    removeOnBreak: null,
    component: null,
    ignore: null,
    __velocity: null,
    immutable_midstep: function (a) {},
    cbTypes: null,
    cbSet: null,
    wrap_cbTypes: null,
    setupcbTypes: function () {
      this.wrap_cbTypes = Le.get(this.cbTypes);
      this.wrap_cbTypes.zpp_inner.adder = m(this, this.wrap_cbTypes_adder);
      this.wrap_cbTypes.zpp_inner.subber = m(this, this.wrap_cbTypes_subber);
      this.wrap_cbTypes.zpp_inner.dontremove = !0;
    },
    wrap_cbTypes_subber: function (a) {
      a = a.zpp_inner;
      this.cbTypes.has(a) &&
        (null != this.space && (this.dealloc_cbSet(), a.remConstraint(this)),
        this.cbTypes.remove(a),
        null != this.space && (this.alloc_cbSet(), this.wake()));
    },
    wrap_cbTypes_adder: function (a) {
      this.insert_cbtype(a.zpp_inner);
      return !1;
    },
    insert_cbtype: function (a) {
      if (!this.cbTypes.has(a)) {
        null != this.space && (this.dealloc_cbSet(), a.addConstraint(this));
        for (var b = null, c = this.cbTypes.begin(); null != c; ) {
          var d = c.elem();
          if (Hb.setlt(a, d)) break;
          b = c;
          c = c.next;
        }
        this.cbTypes.inlined_insert(b, a);
        null != this.space && (this.alloc_cbSet(), this.wake());
      }
    },
    alloc_cbSet: function () {
      null != (this.cbSet = this.space.cbsets.get(this.cbTypes)) &&
        (this.cbSet.increment(), this.cbSet.addConstraint(this));
    },
    dealloc_cbSet: function () {
      if (null != this.cbSet) {
        this.cbSet.remConstraint(this);
        if (this.cbSet.decrement()) {
          this.space.cbsets.remove(this.cbSet);
          var a = this.cbSet;
          a.free();
          a.next = Ea.zpp_pool;
          Ea.zpp_pool = a;
        }
        this.cbSet = null;
      }
    },
    activate: function () {
      null != this.space && this.activeInSpace();
    },
    deactivate: function () {
      null != this.space && this.inactiveOrOutSpace();
    },
    addedToSpace: function () {
      this.active && this.activeInSpace();
      this.activeBodies();
      for (var a = this.cbTypes.begin(); null != a; )
        a.elem().addConstraint(this), (a = a.next);
    },
    removedFromSpace: function () {
      this.active && this.inactiveOrOutSpace();
      this.inactiveBodies();
      for (var a = this.cbTypes.begin(); null != a; )
        a.elem().remConstraint(this), (a = a.next);
    },
    activeInSpace: function () {
      this.alloc_cbSet();
      null == lc.zpp_pool
        ? (this.component = new lc())
        : ((this.component = lc.zpp_pool),
          (lc.zpp_pool = this.component.next),
          (this.component.next = null));
      this.component.alloc();
      this.component.isBody = !1;
      this.component.constraint = this;
    },
    inactiveOrOutSpace: function () {
      this.dealloc_cbSet();
      var a = this.component;
      a.free();
      a.next = lc.zpp_pool;
      lc.zpp_pool = a;
      this.component = null;
    },
    activeBodies: function () {},
    inactiveBodies: function () {},
    clearcache: function () {},
    wake_connected: function () {},
    forest: function () {},
    pair_exists: function (a, b) {
      return !1;
    },
    broken: function () {},
    warmStart: function () {},
    pre_dt: null,
    preStep: function (a) {
      return !1;
    },
    applyImpulseVel: function () {
      return !1;
    },
    applyImpulsePos: function () {
      return !1;
    },
    wake: function () {
      null != this.space && this.space.wake_constraint(this);
    },
    __class__: Qa,
  };
  var zh = function () {
    this.stepped = !1;
    this.kMass = this.jAcc = this.jMax = this.gamma = this.bias = 0;
    this.b1 = this.b2 = null;
    this.scale = 0;
    this.slack = this.equal = !1;
    this.ratio = this.jointMin = this.jointMax = 0;
    this.outer_zn = null;
    Qa.call(this);
    this.ratio = 1;
    this.jAcc = 0;
    this.slack = !1;
    this.jMax = sb.POSINF();
    this.stepped = !1;
  };
  l["zpp_nape.constraint.ZPP_AngleJoint"] = zh;
  zh.__name__ = ["zpp_nape", "constraint", "ZPP_AngleJoint"];
  zh.__super__ = Qa;
  zh.prototype = v(Qa.prototype, {
    outer_zn: null,
    ratio: null,
    jointMin: null,
    jointMax: null,
    slack: null,
    equal: null,
    scale: null,
    bodyImpulse: function (a) {
      return this.stepped
        ? a == this.b1
          ? W.get(0, 0, -this.scale * this.jAcc)
          : W.get(0, 0, this.ratio * this.scale * this.jAcc)
        : W.get(0, 0, 0);
    },
    activeBodies: function () {
      null != this.b1 && this.b1.constraints.add(this);
      this.b2 != this.b1 && null != this.b2 && this.b2.constraints.add(this);
    },
    inactiveBodies: function () {
      null != this.b1 && this.b1.constraints.remove(this);
      this.b2 != this.b1 && null != this.b2 && this.b2.constraints.remove(this);
    },
    b1: null,
    b2: null,
    kMass: null,
    jAcc: null,
    jMax: null,
    gamma: null,
    bias: null,
    stepped: null,
    wake_connected: function () {
      null != this.b1 && this.b1.isDynamic() && this.b1.wake();
      null != this.b2 && this.b2.isDynamic() && this.b2.wake();
    },
    forest: function () {
      if (this.b1.isDynamic()) {
        if (this.b1.component == this.b1.component.parent)
          var a = this.b1.component;
        else {
          a = this.b1.component;
          for (var b = null; a != a.parent; ) {
            var c = a.parent;
            a.parent = b;
            b = a;
            a = c;
          }
          for (; null != b; ) (c = b.parent), (b.parent = a), (b = c);
        }
        if (this.component == this.component.parent) b = this.component;
        else {
          b = this.component;
          for (c = null; b != b.parent; ) {
            var d = b.parent;
            b.parent = c;
            c = b;
            b = d;
          }
          for (; null != c; ) (d = c.parent), (c.parent = b), (c = d);
        }
        a != b &&
          (a.rank < b.rank
            ? (a.parent = b)
            : a.rank > b.rank
            ? (b.parent = a)
            : ((b.parent = a), a.rank++));
      }
      if (this.b2.isDynamic()) {
        if (this.b2.component == this.b2.component.parent)
          a = this.b2.component;
        else {
          a = this.b2.component;
          for (b = null; a != a.parent; )
            (c = a.parent), (a.parent = b), (b = a), (a = c);
          for (; null != b; ) (c = b.parent), (b.parent = a), (b = c);
        }
        if (this.component == this.component.parent) b = this.component;
        else {
          b = this.component;
          for (c = null; b != b.parent; )
            (d = b.parent), (b.parent = c), (c = b), (b = d);
          for (; null != c; ) (d = c.parent), (c.parent = b), (c = d);
        }
        a != b &&
          (a.rank < b.rank
            ? (a.parent = b)
            : a.rank > b.rank
            ? (b.parent = a)
            : ((b.parent = a), a.rank++));
      }
    },
    pair_exists: function (a, b) {
      return this.b1.id != a || this.b2.id != b
        ? this.b1.id == b
          ? this.b2.id == a
          : !1
        : !0;
    },
    clearcache: function () {
      this.jAcc = 0;
      this.pre_dt = -1;
      this.slack = !1;
    },
    preStep: function (a) {
      -1 == this.pre_dt && (this.pre_dt = a);
      var b = a / this.pre_dt;
      this.pre_dt = a;
      this.stepped = !0;
      this.equal = this.jointMin == this.jointMax;
      var c = this.ratio * this.b2.rot - this.b1.rot;
      this.equal
        ? ((c -= this.jointMax), (this.slack = !1), (this.scale = 1))
        : c < this.jointMin
        ? ((c = this.jointMin - c), (this.scale = -1), (this.slack = !1))
        : c > this.jointMax
        ? ((c -= this.jointMax), (this.scale = 1), (this.slack = !1))
        : ((c = this.scale = 0), (this.slack = !0));
      if (!this.slack) {
        this.kMass =
          this.b1.sinertia + this.ratio * this.ratio * this.b2.sinertia;
        0 != this.kMass ? (this.kMass = 1 / this.kMass) : (this.jAcc = 0);
        if (this.stiff) this.gamma = this.bias = 0;
        else {
          if (this.breakUnderError && c * c > this.maxError * this.maxError)
            return !0;
          var d = 2 * Math.PI * this.frequency;
          this.gamma = 1 / (a * d * (2 * this.damping + d * a));
          var e = 1 / (1 + this.gamma);
          d = a * d * d * this.gamma;
          this.gamma *= e;
          this.kMass *= e;
          this.bias = -c * d;
          this.bias < -this.maxError
            ? (this.bias = -this.maxError)
            : this.bias > this.maxError && (this.bias = this.maxError);
        }
        this.jAcc *= b;
        this.jMax = this.maxForce * a;
      }
      return !1;
    },
    warmStart: function () {
      this.slack ||
        ((this.b1.angvel -= this.scale * this.b1.iinertia * this.jAcc),
        (this.b2.angvel +=
          this.ratio * this.scale * this.b2.iinertia * this.jAcc));
    },
    applyImpulseVel: function () {
      if (this.slack) return !1;
      var a =
          this.kMass *
            (this.bias -
              this.scale *
                (this.ratio * (this.b2.angvel + this.b2.kinangvel) -
                  this.b1.angvel -
                  this.b1.kinangvel)) -
          this.jAcc * this.gamma,
        b = this.jAcc;
      this.jAcc += a;
      !this.equal && 0 < this.jAcc && (this.jAcc = 0);
      if (
        this.breakUnderForce &&
        (this.jAcc > this.jMax || this.jAcc < -this.jMax)
      )
        return !0;
      this.stiff ||
        (this.jAcc > this.jMax
          ? (this.jAcc = this.jMax)
          : this.jAcc < -this.jMax && (this.jAcc = -this.jMax));
      a = this.jAcc - b;
      this.b1.angvel -= this.scale * this.b1.iinertia * a;
      this.b2.angvel += this.ratio * this.scale * this.b2.iinertia * a;
      return !1;
    },
    applyImpulsePos: function () {
      var a = this.ratio * this.b2.rot - this.b1.rot;
      if (this.equal) {
        a -= this.jointMax;
        var b = !1;
        this.scale = 1;
      } else
        a < this.jointMin
          ? ((a = this.jointMin - a), (this.scale = -1), (b = !1))
          : a > this.jointMax
          ? ((a -= this.jointMax), (this.scale = 1), (b = !1))
          : ((a = this.scale = 0), (b = !0));
      if (!b) {
        if (this.breakUnderError && a * a > this.maxError * this.maxError)
          return !0;
        b = -(0.5 * a) * this.kMass;
        if (this.equal || 0 > b)
          this.b1.delta_rot(-this.scale * b * this.b1.iinertia),
            this.b2.delta_rot(this.ratio * this.scale * b * this.b2.iinertia);
      }
      return !1;
    },
    __class__: zh,
  });
  var Ah = function () {
    this.stepped = !1;
    this.kMass = this.jAcc = this.jMax = this.gamma = this.bias = 0;
    this.wrap_a2 = null;
    this.a2localx = this.a2localy = this.a2relx = this.a2rely = 0;
    this.wrap_a1 = this.b2 = null;
    this.a1localx = this.a1localy = this.a1relx = this.a1rely = 0;
    this.b1 = null;
    this.nx = this.ny = this.cx1 = this.cx2 = 0;
    this.slack = this.equal = !1;
    this.jointMin = this.jointMax = 0;
    this.outer_zn = null;
    Qa.call(this);
    this.jAcc =
      this.a2rely =
      this.a2relx =
      this.a2localy =
      this.a2localx =
      this.a1rely =
      this.a1relx =
      this.a1localy =
      this.a1localx =
        0;
    this.jMax = sb.POSINF();
    this.stepped = !1;
    this.cx1 = this.cx2 = 0;
  };
  l["zpp_nape.constraint.ZPP_DistanceJoint"] = Ah;
  Ah.__name__ = ["zpp_nape", "constraint", "ZPP_DistanceJoint"];
  Ah.__super__ = Qa;
  Ah.prototype = v(Qa.prototype, {
    outer_zn: null,
    jointMin: null,
    jointMax: null,
    slack: null,
    equal: null,
    nx: null,
    ny: null,
    cx1: null,
    cx2: null,
    bodyImpulse: function (a) {
      return this.stepped
        ? a == this.b1
          ? W.get(
              -this.jAcc * this.nx,
              -this.jAcc * this.ny,
              -this.cx1 * this.jAcc
            )
          : W.get(
              this.jAcc * this.nx,
              this.jAcc * this.ny,
              this.cx2 * this.jAcc
            )
        : W.get(0, 0, 0);
    },
    activeBodies: function () {
      null != this.b1 && this.b1.constraints.add(this);
      this.b2 != this.b1 && null != this.b2 && this.b2.constraints.add(this);
    },
    inactiveBodies: function () {
      null != this.b1 && this.b1.constraints.remove(this);
      this.b2 != this.b1 && null != this.b2 && this.b2.constraints.remove(this);
    },
    b1: null,
    a1localx: null,
    a1localy: null,
    a1relx: null,
    a1rely: null,
    validate_a1: function () {
      this.wrap_a1.zpp_inner.x = this.a1localx;
      this.wrap_a1.zpp_inner.y = this.a1localy;
    },
    invalidate_a1: function (a) {
      this.immutable_midstep("Constraint::a1");
      this.a1localx = a.x;
      this.a1localy = a.y;
      this.wake();
    },
    setup_a1: function () {
      this.wrap_a1 = w.get(this.a1localx, this.a1localy);
      this.wrap_a1.zpp_inner._inuse = !0;
      this.wrap_a1.zpp_inner._validate = m(this, this.validate_a1);
      this.wrap_a1.zpp_inner._invalidate = m(this, this.invalidate_a1);
    },
    wrap_a1: null,
    b2: null,
    a2localx: null,
    a2localy: null,
    a2relx: null,
    a2rely: null,
    validate_a2: function () {
      this.wrap_a2.zpp_inner.x = this.a2localx;
      this.wrap_a2.zpp_inner.y = this.a2localy;
    },
    invalidate_a2: function (a) {
      this.immutable_midstep("Constraint::a2");
      this.a2localx = a.x;
      this.a2localy = a.y;
      this.wake();
    },
    setup_a2: function () {
      this.wrap_a2 = w.get(this.a2localx, this.a2localy);
      this.wrap_a2.zpp_inner._inuse = !0;
      this.wrap_a2.zpp_inner._validate = m(this, this.validate_a2);
      this.wrap_a2.zpp_inner._invalidate = m(this, this.invalidate_a2);
    },
    wrap_a2: null,
    kMass: null,
    jAcc: null,
    jMax: null,
    gamma: null,
    bias: null,
    stepped: null,
    wake_connected: function () {
      null != this.b1 && this.b1.isDynamic() && this.b1.wake();
      null != this.b2 && this.b2.isDynamic() && this.b2.wake();
    },
    forest: function () {
      if (this.b1.isDynamic()) {
        if (this.b1.component == this.b1.component.parent)
          var a = this.b1.component;
        else {
          a = this.b1.component;
          for (var b = null; a != a.parent; ) {
            var c = a.parent;
            a.parent = b;
            b = a;
            a = c;
          }
          for (; null != b; ) (c = b.parent), (b.parent = a), (b = c);
        }
        if (this.component == this.component.parent) b = this.component;
        else {
          b = this.component;
          for (c = null; b != b.parent; ) {
            var d = b.parent;
            b.parent = c;
            c = b;
            b = d;
          }
          for (; null != c; ) (d = c.parent), (c.parent = b), (c = d);
        }
        a != b &&
          (a.rank < b.rank
            ? (a.parent = b)
            : a.rank > b.rank
            ? (b.parent = a)
            : ((b.parent = a), a.rank++));
      }
      if (this.b2.isDynamic()) {
        if (this.b2.component == this.b2.component.parent)
          a = this.b2.component;
        else {
          a = this.b2.component;
          for (b = null; a != a.parent; )
            (c = a.parent), (a.parent = b), (b = a), (a = c);
          for (; null != b; ) (c = b.parent), (b.parent = a), (b = c);
        }
        if (this.component == this.component.parent) b = this.component;
        else {
          b = this.component;
          for (c = null; b != b.parent; )
            (d = b.parent), (b.parent = c), (c = b), (b = d);
          for (; null != c; ) (d = c.parent), (c.parent = b), (c = d);
        }
        a != b &&
          (a.rank < b.rank
            ? (a.parent = b)
            : a.rank > b.rank
            ? (b.parent = a)
            : ((b.parent = a), a.rank++));
      }
    },
    pair_exists: function (a, b) {
      return this.b1.id != a || this.b2.id != b
        ? this.b1.id == b
          ? this.b2.id == a
          : !1
        : !0;
    },
    clearcache: function () {
      this.jAcc = 0;
      this.pre_dt = -1;
    },
    preStep: function (a) {
      -1 == this.pre_dt && (this.pre_dt = a);
      var b = a / this.pre_dt;
      this.pre_dt = a;
      this.stepped = !0;
      this.equal = this.jointMin == this.jointMax;
      this.a1relx =
        this.b1.axisy * this.a1localx - this.b1.axisx * this.a1localy;
      this.a1rely =
        this.a1localx * this.b1.axisx + this.a1localy * this.b1.axisy;
      this.a2relx =
        this.b2.axisy * this.a2localx - this.b2.axisx * this.a2localy;
      this.a2rely =
        this.a2localx * this.b2.axisx + this.a2localy * this.b2.axisy;
      this.nx = this.b2.posx + this.a2relx - (this.b1.posx + this.a1relx);
      this.ny = this.b2.posy + this.a2rely - (this.b1.posy + this.a1rely);
      var c = this.nx * this.nx + this.ny * this.ny;
      if (c < x.epsilon) (c = this.ny = this.nx = 0), (this.slack = !0);
      else {
        c = Fa.sqrt(c);
        var d = 1 / c;
        this.nx *= d;
        this.ny *= d;
        this.equal
          ? ((c -= this.jointMax), (this.slack = !1))
          : c < this.jointMin
          ? ((c = this.jointMin - c),
            (this.nx = -this.nx),
            (this.ny = -this.ny),
            (this.slack = !1))
          : c > this.jointMax
          ? ((c -= this.jointMax), (this.slack = !1))
          : ((c = this.ny = this.nx = 0), (this.slack = !0));
      }
      if (!this.slack) {
        this.cx1 = this.ny * this.a1relx - this.nx * this.a1rely;
        this.cx2 = this.ny * this.a2relx - this.nx * this.a2rely;
        this.kMass =
          this.b1.smass +
          this.b2.smass +
          this.cx1 * this.cx1 * this.b1.sinertia +
          this.cx2 * this.cx2 * this.b2.sinertia;
        0 != this.kMass ? (this.kMass = 1 / this.kMass) : (this.jAcc = 0);
        if (this.stiff) this.gamma = this.bias = 0;
        else {
          if (this.breakUnderError && c * c > this.maxError * this.maxError)
            return !0;
          var e = 2 * Math.PI * this.frequency;
          this.gamma = 1 / (a * e * (2 * this.damping + e * a));
          d = 1 / (1 + this.gamma);
          e = a * e * e * this.gamma;
          this.gamma *= d;
          this.kMass *= d;
          this.bias = -c * e;
          this.bias < -this.maxError
            ? (this.bias = -this.maxError)
            : this.bias > this.maxError && (this.bias = this.maxError);
        }
        this.jAcc *= b;
        this.jMax = this.maxForce * a;
      }
      return !1;
    },
    warmStart: function () {
      if (!this.slack) {
        var a = this.b1.imass * this.jAcc;
        this.b1.velx -= this.nx * a;
        this.b1.vely -= this.ny * a;
        a = this.b2.imass * this.jAcc;
        this.b2.velx += this.nx * a;
        this.b2.vely += this.ny * a;
        this.b1.angvel -= this.cx1 * this.b1.iinertia * this.jAcc;
        this.b2.angvel += this.cx2 * this.b2.iinertia * this.jAcc;
      }
    },
    applyImpulseVel: function () {
      if (this.slack) return !1;
      var a =
          this.kMass *
            (this.bias -
              (this.nx *
                (this.b2.velx +
                  this.b2.kinvelx -
                  this.b1.velx -
                  this.b1.kinvelx) +
                this.ny *
                  (this.b2.vely +
                    this.b2.kinvely -
                    this.b1.vely -
                    this.b1.kinvely) +
                (this.b2.angvel + this.b2.kinangvel) * this.cx2 -
                (this.b1.angvel + this.b1.kinangvel) * this.cx1)) -
          this.jAcc * this.gamma,
        b = this.jAcc;
      this.jAcc += a;
      !this.equal && 0 < this.jAcc && (this.jAcc = 0);
      if (this.breakUnderForce && this.jAcc < -this.jMax) return !0;
      !this.stiff && this.jAcc < -this.jMax && (this.jAcc = -this.jMax);
      a = this.jAcc - b;
      b = this.b1.imass * a;
      this.b1.velx -= this.nx * b;
      this.b1.vely -= this.ny * b;
      b = this.b2.imass * a;
      this.b2.velx += this.nx * b;
      this.b2.vely += this.ny * b;
      this.b1.angvel -= this.cx1 * this.b1.iinertia * a;
      this.b2.angvel += this.cx2 * this.b2.iinertia * a;
      return !1;
    },
    applyImpulsePos: function () {
      var a = this.b1.axisy * this.a1localx - this.b1.axisx * this.a1localy;
      var b = this.a1localx * this.b1.axisx + this.a1localy * this.b1.axisy;
      var c = this.b2.axisy * this.a2localx - this.b2.axisx * this.a2localy;
      var d = this.a2localx * this.b2.axisx + this.a2localy * this.b2.axisy;
      var e = this.b2.posx + c - (this.b1.posx + a);
      var f = this.b2.posy + d - (this.b1.posy + b);
      var g = e * e + f * f;
      if (g < x.epsilon) {
        g = f = e = 0;
        var h = !0;
      } else
        (g = Fa.sqrt(g)),
          (h = 1 / g),
          (e *= h),
          (f *= h),
          this.equal
            ? ((g -= this.jointMax), (h = !1))
            : g < this.jointMin
            ? ((g = this.jointMin - g), (e = -e), (f = -f), (h = !1))
            : g > this.jointMax
            ? ((g -= this.jointMax), (h = !1))
            : ((g = f = e = 0), (h = !0));
      if (!h) {
        if (this.breakUnderError && g * g > this.maxError * this.maxError)
          return !0;
        if (g * g < x.constraintLinearSlop * x.constraintLinearSlop) return !1;
        g *= 0.5;
        6 < g * g &&
          ((h = this.b1.smass + this.b2.smass),
          h > x.epsilon && ((h = (0.75 / h) * -g), this.equal || 0 > h)) &&
          ((g = h * this.b1.imass),
          (this.b1.posx -= e * g),
          (this.b1.posy -= f * g),
          (g = h * this.b2.imass),
          (this.b2.posx += e * g),
          (this.b2.posy += f * g),
          (e = this.b2.posx + c - (this.b1.posx + a)),
          (f = this.b2.posy + d - (this.b1.posy + b)),
          (g = e * e + f * f),
          g < x.epsilon
            ? (g = f = e = 0)
            : ((g = Fa.sqrt(g)),
              (h = 1 / g),
              (e *= h),
              (f *= h),
              this.equal
                ? (g -= this.jointMax)
                : g < this.jointMin
                ? ((g = this.jointMin - g), (e = -e), (f = -f))
                : g > this.jointMax
                ? (g -= this.jointMax)
                : (g = f = e = 0)),
          (g *= 0.5));
        a = f * a - e * b;
        c = f * c - e * d;
        d =
          this.b1.smass +
          this.b2.smass +
          a * a * this.b1.sinertia +
          c * c * this.b2.sinertia;
        0 != d && (d = 1 / d);
        h = -g * d;
        if (this.equal || 0 > h)
          (d = this.b1.imass * h),
            (this.b1.posx -= e * d),
            (this.b1.posy -= f * d),
            (d = this.b2.imass * h),
            (this.b2.posx += e * d),
            (this.b2.posy += f * d),
            this.b1.delta_rot(-a * this.b1.iinertia * h),
            this.b2.delta_rot(c * this.b2.iinertia * h);
      }
      return !1;
    },
    __class__: Ah,
  });
  var Bh = function () {
    this.kMassa =
      this.kMassb =
      this.kMassc =
      this.jAccx =
      this.jAccy =
      this.biasx =
      this.biasy =
        0;
    this.wrap_n = null;
    this.nlocalx = this.nlocaly = this.nrelx = this.nrely = 0;
    this.wrap_a2 = null;
    this.a2localx = this.a2localy = this.a2relx = this.a2rely = 0;
    this.wrap_a1 = null;
    this.dot1 =
      this.dot2 =
      this.cx1 =
      this.cx2 =
      this.a1localx =
      this.a1localy =
      this.a1relx =
      this.a1rely =
        0;
    this.equal = !1;
    this.scale = this.jointMin = this.jointMax = 0;
    this.outer_zn = null;
    Qa.call(this);
    this.jAccy =
      this.jAccx =
      this.nrely =
      this.nrelx =
      this.nlocaly =
      this.nlocalx =
      this.a2rely =
      this.a2relx =
      this.a2localy =
      this.a2localx =
      this.a1rely =
      this.a1relx =
      this.a1localy =
      this.a1localx =
        0;
    this.jMax = sb.POSINF();
    this.jointMin = sb.NEGINF();
    this.jointMax = sb.POSINF();
    this.stepped = !1;
  };
  l["zpp_nape.constraint.ZPP_LineJoint"] = Bh;
  Bh.__name__ = ["zpp_nape", "constraint", "ZPP_LineJoint"];
  Bh.__super__ = Qa;
  Bh.prototype = v(Qa.prototype, {
    outer_zn: null,
    scale: null,
    jointMin: null,
    jointMax: null,
    equal: null,
    dot1: null,
    dot2: null,
    cx1: null,
    cx2: null,
    bodyImpulse: function (a) {
      if (this.stepped) {
        var b = this.scale * this.nrelx * this.jAccy - this.nrely * this.jAccx,
          c = this.nrelx * this.jAccx + this.scale * this.nrely * this.jAccy;
        return a == this.b1
          ? W.get(-b, -c, this.scale * this.cx1 * c - this.dot1 * b)
          : W.get(b, c, this.scale * this.cx1 * c - this.dot1 * b);
      }
      return W.get(0, 0, 0);
    },
    activeBodies: function () {
      null != this.b1 && this.b1.constraints.add(this);
      this.b2 != this.b1 && null != this.b2 && this.b2.constraints.add(this);
    },
    inactiveBodies: function () {
      null != this.b1 && this.b1.constraints.remove(this);
      this.b2 != this.b1 && null != this.b2 && this.b2.constraints.remove(this);
    },
    b1: null,
    a1localx: null,
    a1localy: null,
    a1relx: null,
    a1rely: null,
    validate_a1: function () {
      this.wrap_a1.zpp_inner.x = this.a1localx;
      this.wrap_a1.zpp_inner.y = this.a1localy;
    },
    invalidate_a1: function (a) {
      this.immutable_midstep("Constraint::a1");
      this.a1localx = a.x;
      this.a1localy = a.y;
      this.wake();
    },
    setup_a1: function () {
      this.wrap_a1 = w.get(this.a1localx, this.a1localy);
      this.wrap_a1.zpp_inner._inuse = !0;
      this.wrap_a1.zpp_inner._validate = m(this, this.validate_a1);
      this.wrap_a1.zpp_inner._invalidate = m(this, this.invalidate_a1);
    },
    wrap_a1: null,
    b2: null,
    a2localx: null,
    a2localy: null,
    a2relx: null,
    a2rely: null,
    validate_a2: function () {
      this.wrap_a2.zpp_inner.x = this.a2localx;
      this.wrap_a2.zpp_inner.y = this.a2localy;
    },
    invalidate_a2: function (a) {
      this.immutable_midstep("Constraint::a2");
      this.a2localx = a.x;
      this.a2localy = a.y;
      this.wake();
    },
    setup_a2: function () {
      this.wrap_a2 = w.get(this.a2localx, this.a2localy);
      this.wrap_a2.zpp_inner._inuse = !0;
      this.wrap_a2.zpp_inner._validate = m(this, this.validate_a2);
      this.wrap_a2.zpp_inner._invalidate = m(this, this.invalidate_a2);
    },
    wrap_a2: null,
    zip_n: null,
    nlocalx: null,
    nlocaly: null,
    nrelx: null,
    nrely: null,
    validate_n: function () {
      this.wrap_n.zpp_inner.x = this.nlocalx;
      this.wrap_n.zpp_inner.y = this.nlocaly;
    },
    invalidate_n: function (a) {
      this.immutable_midstep("Constraint::n");
      this.nlocalx = a.x;
      this.nlocaly = a.y;
      this.zip_n = !0;
      this.wake();
    },
    setup_n: function () {
      this.wrap_n = w.get(this.nlocalx, this.nlocaly);
      this.wrap_n.zpp_inner._inuse = !0;
      this.wrap_n.zpp_inner._validate = m(this, this.validate_n);
      this.wrap_n.zpp_inner._invalidate = m(this, this.invalidate_n);
    },
    wrap_n: null,
    validate_norm: function () {
      if (this.zip_n) {
        this.zip_n = !1;
        var a =
          1 /
          Math.sqrt(this.nlocalx * this.nlocalx + this.nlocaly * this.nlocaly);
        this.nlocalx *= a;
        this.nlocaly *= a;
      }
    },
    kMassa: null,
    kMassb: null,
    kMassc: null,
    jAccx: null,
    jAccy: null,
    jMax: null,
    gamma: null,
    biasx: null,
    biasy: null,
    stepped: null,
    wake_connected: function () {
      null != this.b1 && this.b1.isDynamic() && this.b1.wake();
      null != this.b2 && this.b2.isDynamic() && this.b2.wake();
    },
    forest: function () {
      if (this.b1.isDynamic()) {
        if (this.b1.component == this.b1.component.parent)
          var a = this.b1.component;
        else {
          a = this.b1.component;
          for (var b = null; a != a.parent; ) {
            var c = a.parent;
            a.parent = b;
            b = a;
            a = c;
          }
          for (; null != b; ) (c = b.parent), (b.parent = a), (b = c);
        }
        if (this.component == this.component.parent) b = this.component;
        else {
          b = this.component;
          for (c = null; b != b.parent; ) {
            var d = b.parent;
            b.parent = c;
            c = b;
            b = d;
          }
          for (; null != c; ) (d = c.parent), (c.parent = b), (c = d);
        }
        a != b &&
          (a.rank < b.rank
            ? (a.parent = b)
            : a.rank > b.rank
            ? (b.parent = a)
            : ((b.parent = a), a.rank++));
      }
      if (this.b2.isDynamic()) {
        if (this.b2.component == this.b2.component.parent)
          a = this.b2.component;
        else {
          a = this.b2.component;
          for (b = null; a != a.parent; )
            (c = a.parent), (a.parent = b), (b = a), (a = c);
          for (; null != b; ) (c = b.parent), (b.parent = a), (b = c);
        }
        if (this.component == this.component.parent) b = this.component;
        else {
          b = this.component;
          for (c = null; b != b.parent; )
            (d = b.parent), (b.parent = c), (c = b), (b = d);
          for (; null != c; ) (d = c.parent), (c.parent = b), (c = d);
        }
        a != b &&
          (a.rank < b.rank
            ? (a.parent = b)
            : a.rank > b.rank
            ? (b.parent = a)
            : ((b.parent = a), a.rank++));
      }
    },
    pair_exists: function (a, b) {
      return this.b1.id != a || this.b2.id != b
        ? this.b1.id == b
          ? this.b2.id == a
          : !1
        : !0;
    },
    clearcache: function () {
      this.jAccy = this.jAccx = 0;
      this.pre_dt = -1;
    },
    preStep: function (a) {
      -1 == this.pre_dt && (this.pre_dt = a);
      var b = a / this.pre_dt;
      this.pre_dt = a;
      this.equal = this.jointMin == this.jointMax;
      this.stepped = !0;
      this.validate_norm();
      this.a1relx =
        this.b1.axisy * this.a1localx - this.b1.axisx * this.a1localy;
      this.a1rely =
        this.a1localx * this.b1.axisx + this.a1localy * this.b1.axisy;
      this.nrelx = this.b1.axisy * this.nlocalx - this.b1.axisx * this.nlocaly;
      this.nrely = this.nlocalx * this.b1.axisx + this.nlocaly * this.b1.axisy;
      this.a2relx =
        this.b2.axisy * this.a2localx - this.b2.axisx * this.a2localy;
      this.a2rely =
        this.a2localx * this.b2.axisx + this.a2localy * this.b2.axisy;
      var c = this.b2.posx + this.a2relx - this.b1.posx - this.a1relx;
      var d = this.b2.posy + this.a2rely - this.b1.posy - this.a1rely;
      var e = d * this.nrelx - c * this.nrely;
      var f = this.nrelx * c + this.nrely * d;
      this.equal
        ? ((f -= this.jointMin), (this.scale = 1))
        : f > this.jointMax
        ? ((f -= this.jointMax), (this.scale = 1))
        : f < this.jointMin
        ? ((f = this.jointMin - f), (this.scale = -1))
        : (this.scale = f = 0);
      c += this.a1relx;
      d += this.a1rely;
      this.dot1 = this.nrelx * c + this.nrely * d;
      this.cx1 = d * this.nrelx - c * this.nrely;
      this.dot2 = this.nrelx * this.a2relx + this.nrely * this.a2rely;
      this.cx2 = this.a2rely * this.nrelx - this.a2relx * this.nrely;
      this.kMassa =
        this.b1.smass +
        this.b2.smass +
        this.dot1 * this.dot1 * this.b1.sinertia +
        this.dot2 * this.dot2 * this.b2.sinertia;
      this.kMassb =
        -this.scale *
        (this.dot1 * this.cx1 * this.b1.sinertia +
          this.dot2 * this.cx2 * this.b2.sinertia);
      this.kMassc =
        this.scale *
        this.scale *
        (this.b1.smass +
          this.b2.smass +
          this.cx1 * this.cx1 * this.b1.sinertia +
          this.cx2 * this.cx2 * this.b2.sinertia);
      d = this.kMassa * this.kMassc - this.kMassb * this.kMassb;
      d != d
        ? ((this.kMassa = this.kMassb = this.kMassc = 0), (d = 3))
        : 0 == d
        ? ((d = 0),
          0 != this.kMassa
            ? (this.kMassa = 1 / this.kMassa)
            : ((this.kMassa = 0), (d |= 1)),
          0 != this.kMassc
            ? (this.kMassc = 1 / this.kMassc)
            : ((this.kMassc = 0), (d |= 2)),
          (this.kMassb = 0))
        : ((d = 1 / d),
          (c = this.kMassc * d),
          (this.kMassc = this.kMassa * d),
          (this.kMassa = c),
          (this.kMassb *= -d),
          (d = 0));
      0 != (d & 1) && (this.jAccx = 0);
      0 != (d & 2) && (this.jAccy = 0);
      if (this.stiff) this.biasy = this.biasx = this.gamma = 0;
      else {
        if (
          this.breakUnderError &&
          e * e + f * f > this.maxError * this.maxError
        )
          return !0;
        c = 2 * Math.PI * this.frequency;
        this.gamma = 1 / (a * c * (2 * this.damping + c * a));
        d = 1 / (1 + this.gamma);
        c = a * c * c * this.gamma;
        this.gamma *= d;
        this.kMassa *= d;
        this.kMassb *= d;
        this.kMassc *= d;
        this.biasx = e;
        this.biasy = f;
        e = -c;
        this.biasx *= e;
        this.biasy *= e;
        e = this.maxError;
        f = this.biasx * this.biasx + this.biasy * this.biasy;
        f > e * e &&
          ((e *= Fa.invsqrt(f)), (this.biasx *= e), (this.biasy *= e));
      }
      this.jAccx *= b;
      this.jAccy *= b;
      this.jMax = this.maxForce * a;
      return !1;
    },
    warmStart: function () {
      var a = this.scale * this.nrelx * this.jAccy - this.nrely * this.jAccx,
        b = this.nrelx * this.jAccx + this.scale * this.nrely * this.jAccy,
        c = this.b1.imass;
      this.b1.velx -= a * c;
      this.b1.vely -= b * c;
      c = this.b2.imass;
      this.b2.velx += a * c;
      this.b2.vely += b * c;
      this.b1.angvel +=
        (this.scale * this.cx1 * this.jAccy - this.dot1 * this.jAccx) *
        this.b1.iinertia;
      this.b2.angvel +=
        (this.dot2 * this.jAccx - this.scale * this.cx2 * this.jAccy) *
        this.b2.iinertia;
    },
    applyImpulseVel: function () {
      var a = this.b2.velx - this.b1.velx;
      var b = this.b2.vely - this.b1.vely;
      a += this.b2.kinvelx - this.b1.kinvelx;
      b += this.b2.kinvely - this.b1.kinvely;
      var c =
        b * this.nrelx -
        a * this.nrely +
        (this.b2.angvel + this.b2.kinangvel) * this.dot2 -
        (this.b1.angvel + this.b1.kinangvel) * this.dot1;
      a =
        this.scale *
        (this.nrelx * a +
          this.nrely * b -
          (this.b2.angvel + this.b2.kinangvel) * this.cx2 +
          (this.b1.angvel + this.b1.kinangvel) * this.cx1);
      c = this.biasx - c;
      a = this.biasy - a;
      b = this.kMassa * c + this.kMassb * a;
      a = this.kMassb * c + this.kMassc * a;
      var d = this.gamma;
      c = b - this.jAccx * d;
      a -= this.jAccy * d;
      b = this.jAccx;
      d = this.jAccy;
      this.jAccx += 1 * c;
      this.jAccy += 1 * a;
      0 < this.jAccy && (this.jAccy = 0);
      if (this.breakUnderForce) {
        if (
          this.jAccx * this.jAccx + this.jAccy * this.jAccy >
          this.jMax * this.jMax
        )
          return !0;
      } else
        this.stiff ||
          ((c = this.jMax),
          (a = this.jAccx * this.jAccx + this.jAccy * this.jAccy),
          a > c * c &&
            ((c *= Fa.invsqrt(a)), (this.jAccx *= c), (this.jAccy *= c)));
      c = this.jAccx - b;
      a = this.jAccy - d;
      b = this.scale * this.nrelx * a - this.nrely * c;
      d = this.nrelx * c + this.scale * this.nrely * a;
      var e = this.b1.imass;
      this.b1.velx -= b * e;
      this.b1.vely -= d * e;
      e = this.b2.imass;
      this.b2.velx += b * e;
      this.b2.vely += d * e;
      this.b1.angvel +=
        (this.scale * this.cx1 * a - this.dot1 * c) * this.b1.iinertia;
      this.b2.angvel +=
        (this.dot2 * c - this.scale * this.cx2 * a) * this.b2.iinertia;
      return !1;
    },
    applyImpulsePos: function () {
      var a = this.b1.axisy * this.nlocalx - this.b1.axisx * this.nlocaly;
      var b = this.nlocalx * this.b1.axisx + this.nlocaly * this.b1.axisy;
      var c = this.b1.axisy * this.a1localx - this.b1.axisx * this.a1localy;
      var d = this.a1localx * this.b1.axisx + this.a1localy * this.b1.axisy;
      var e = this.b2.axisy * this.a2localx - this.b2.axisx * this.a2localy;
      var f = this.a2localx * this.b2.axisx + this.a2localy * this.b2.axisy;
      var g = this.b2.posx + e - this.b1.posx - c;
      var h = this.b2.posy + f - this.b1.posy - d;
      var n = h * a - g * b;
      var p = a * g + b * h;
      if (this.equal) {
        p -= this.jointMin;
        var k = 1;
      } else
        p > this.jointMax
          ? ((p -= this.jointMax), (k = 1))
          : p < this.jointMin
          ? ((p = this.jointMin - p), (k = -1))
          : (k = p = 0);
      if (this.breakUnderError && n * n + p * p > this.maxError * this.maxError)
        return !0;
      if (n * n + p * p < x.constraintLinearSlop * x.constraintLinearSlop)
        return !1;
      n *= 0.5;
      p *= 0.5;
      if (6 < n * n + p * p) {
        var l = this.b1.smass + this.b2.smass;
        l > x.epsilon &&
          ((l = 0.8 / l),
          (p = l * (b * n - k * a * p)),
          (k = l * (a * n * k - b * n)),
          (n = this.b1.imass),
          (this.b1.posx -= p * n),
          (this.b1.posy -= k * n),
          (n = this.b2.imass),
          (this.b2.posx += p * n),
          (this.b2.posy += k * n),
          (g = this.b2.posx + e - this.b1.posx - c),
          (h = this.b2.posy + f - this.b1.posy - d),
          (p = a * g + b * h),
          this.equal
            ? ((p -= this.jointMin), (k = 1))
            : p > this.jointMax
            ? ((p -= this.jointMax), (k = 1))
            : p < this.jointMin
            ? ((p = this.jointMin - p), (k = -1))
            : (k = p = 0),
          (n = 0.5 * (h * a - g * b)),
          (p *= 0.5));
      }
      c = g + c;
      h += d;
      d = a * c + b * h;
      h = h * a - c * b;
      c = a * e + b * f;
      e = f * a - e * b;
      f =
        this.b1.smass +
        this.b2.smass +
        d * d * this.b1.sinertia +
        c * c * this.b2.sinertia;
      l = -k * (d * h * this.b1.sinertia + c * e * this.b2.sinertia);
      g =
        k *
        k *
        (this.b1.smass +
          this.b2.smass +
          h * h * this.b1.sinertia +
          e * e * this.b2.sinertia);
      n = -n;
      p = -p;
      var m = f * g - l * l;
      m != m
        ? (n = p = 0)
        : 0 == m
        ? ((n = 0 != f ? n / f : 0), (p = 0 != g ? p / g : 0))
        : ((m = 1 / m),
          (g = m * (g * n - l * p)),
          (p = m * (f * p - l * n)),
          (n = g));
      0 < p && (p = 0);
      f = k * a * p - b * n;
      a = a * n + k * b * p;
      b = this.b1.imass;
      this.b1.posx -= f * b;
      this.b1.posy -= a * b;
      b = this.b2.imass;
      this.b2.posx += f * b;
      this.b2.posy += a * b;
      this.b1.delta_rot((k * h * p - d * n) * this.b1.iinertia);
      this.b2.delta_rot((c * n - k * e * p) * this.b2.iinertia);
      return !1;
    },
    __class__: Bh,
  });
  var Ch = function () {
    this.stepped = !1;
    this.kMass = this.jAcc = this.jMax = 0;
    this.b1 = this.b2 = null;
    this.ratio = this.rate = 0;
    this.outer_zn = null;
    Qa.call(this);
    this.jAcc = 0;
    this.stepped = !1;
    this.__velocity = !0;
  };
  l["zpp_nape.constraint.ZPP_MotorJoint"] = Ch;
  Ch.__name__ = ["zpp_nape", "constraint", "ZPP_MotorJoint"];
  Ch.__super__ = Qa;
  Ch.prototype = v(Qa.prototype, {
    outer_zn: null,
    ratio: null,
    rate: null,
    bodyImpulse: function (a) {
      return this.stepped
        ? a == this.b1
          ? W.get(0, 0, -this.jAcc)
          : W.get(0, 0, this.ratio * this.jAcc)
        : W.get(0, 0, 0);
    },
    activeBodies: function () {
      null != this.b1 && this.b1.constraints.add(this);
      this.b2 != this.b1 && null != this.b2 && this.b2.constraints.add(this);
    },
    inactiveBodies: function () {
      null != this.b1 && this.b1.constraints.remove(this);
      this.b2 != this.b1 && null != this.b2 && this.b2.constraints.remove(this);
    },
    b1: null,
    b2: null,
    kMass: null,
    jAcc: null,
    jMax: null,
    stepped: null,
    wake_connected: function () {
      null != this.b1 && this.b1.isDynamic() && this.b1.wake();
      null != this.b2 && this.b2.isDynamic() && this.b2.wake();
    },
    forest: function () {
      if (this.b1.isDynamic()) {
        if (this.b1.component == this.b1.component.parent)
          var a = this.b1.component;
        else {
          a = this.b1.component;
          for (var b = null; a != a.parent; ) {
            var c = a.parent;
            a.parent = b;
            b = a;
            a = c;
          }
          for (; null != b; ) (c = b.parent), (b.parent = a), (b = c);
        }
        if (this.component == this.component.parent) b = this.component;
        else {
          b = this.component;
          for (c = null; b != b.parent; ) {
            var d = b.parent;
            b.parent = c;
            c = b;
            b = d;
          }
          for (; null != c; ) (d = c.parent), (c.parent = b), (c = d);
        }
        a != b &&
          (a.rank < b.rank
            ? (a.parent = b)
            : a.rank > b.rank
            ? (b.parent = a)
            : ((b.parent = a), a.rank++));
      }
      if (this.b2.isDynamic()) {
        if (this.b2.component == this.b2.component.parent)
          a = this.b2.component;
        else {
          a = this.b2.component;
          for (b = null; a != a.parent; )
            (c = a.parent), (a.parent = b), (b = a), (a = c);
          for (; null != b; ) (c = b.parent), (b.parent = a), (b = c);
        }
        if (this.component == this.component.parent) b = this.component;
        else {
          b = this.component;
          for (c = null; b != b.parent; )
            (d = b.parent), (b.parent = c), (c = b), (b = d);
          for (; null != c; ) (d = c.parent), (c.parent = b), (c = d);
        }
        a != b &&
          (a.rank < b.rank
            ? (a.parent = b)
            : a.rank > b.rank
            ? (b.parent = a)
            : ((b.parent = a), a.rank++));
      }
    },
    pair_exists: function (a, b) {
      return this.b1.id != a || this.b2.id != b
        ? this.b1.id == b
          ? this.b2.id == a
          : !1
        : !0;
    },
    clearcache: function () {
      this.jAcc = 0;
      this.pre_dt = -1;
    },
    preStep: function (a) {
      -1 == this.pre_dt && (this.pre_dt = a);
      var b = a / this.pre_dt;
      this.pre_dt = a;
      this.stepped = !0;
      this.kMass =
        this.b1.sinertia + this.ratio * this.ratio * this.b2.sinertia;
      this.kMass = 1 / this.kMass;
      this.jAcc *= b;
      this.jMax = this.maxForce * a;
      return !1;
    },
    warmStart: function () {
      this.b1.angvel -= this.b1.iinertia * this.jAcc;
      this.b2.angvel += this.ratio * this.b2.iinertia * this.jAcc;
    },
    applyImpulseVel: function () {
      var a =
          -this.kMass *
          (this.ratio * (this.b2.angvel + this.b2.kinangvel) -
            this.b1.angvel -
            this.b1.kinangvel -
            this.rate),
        b = this.jAcc;
      this.jAcc += a;
      if (this.breakUnderForce) {
        if (this.jAcc > this.jMax || this.jAcc < -this.jMax) return !0;
      } else
        this.jAcc < -this.jMax
          ? (this.jAcc = -this.jMax)
          : this.jAcc > this.jMax && (this.jAcc = this.jMax);
      a = this.jAcc - b;
      this.b1.angvel -= this.b1.iinertia * a;
      this.b2.angvel += this.ratio * this.b2.iinertia * a;
      return !1;
    },
    applyImpulsePos: function () {
      return !1;
    },
    __class__: Ch,
  });
  var Dh = function () {
    this.stepped = !1;
    this.kMassa =
      this.kMassb =
      this.kMassc =
      this.jAccx =
      this.jAccy =
      this.jMax =
      this.gamma =
      this.biasx =
      this.biasy =
        0;
    this.wrap_a2 = null;
    this.a2localx = this.a2localy = this.a2relx = this.a2rely = 0;
    this.wrap_a1 = this.b2 = null;
    this.a1localx = this.a1localy = this.a1relx = this.a1rely = 0;
    this.outer_zn = this.b1 = null;
    Qa.call(this);
    this.stepped = !1;
    this.jAccy = this.jAccx = 0;
    this.jMax = sb.POSINF();
    this.a2rely =
      this.a2relx =
      this.a2localy =
      this.a2localx =
      this.a1rely =
      this.a1relx =
      this.a1localy =
      this.a1localx =
        0;
  };
  l["zpp_nape.constraint.ZPP_PivotJoint"] = Dh;
  Dh.__name__ = ["zpp_nape", "constraint", "ZPP_PivotJoint"];
  Dh.__super__ = Qa;
  Dh.prototype = v(Qa.prototype, {
    outer_zn: null,
    bodyImpulse: function (a) {
      return this.stepped
        ? a == this.b1
          ? W.get(
              -this.jAccx,
              -this.jAccy,
              -(this.jAccy * this.a1relx - this.jAccx * this.a1rely)
            )
          : W.get(
              this.jAccx,
              this.jAccy,
              this.jAccy * this.a2relx - this.jAccx * this.a2rely
            )
        : W.get(0, 0, 0);
    },
    activeBodies: function () {
      null != this.b1 && this.b1.constraints.add(this);
      this.b2 != this.b1 && null != this.b2 && this.b2.constraints.add(this);
    },
    inactiveBodies: function () {
      null != this.b1 && this.b1.constraints.remove(this);
      this.b2 != this.b1 && null != this.b2 && this.b2.constraints.remove(this);
    },
    b1: null,
    a1localx: null,
    a1localy: null,
    a1relx: null,
    a1rely: null,
    validate_a1: function () {
      this.wrap_a1.zpp_inner.x = this.a1localx;
      this.wrap_a1.zpp_inner.y = this.a1localy;
    },
    invalidate_a1: function (a) {
      this.immutable_midstep("Constraint::a1");
      this.a1localx = a.x;
      this.a1localy = a.y;
      this.wake();
    },
    setup_a1: function () {
      this.wrap_a1 = w.get(this.a1localx, this.a1localy);
      this.wrap_a1.zpp_inner._inuse = !0;
      this.wrap_a1.zpp_inner._validate = m(this, this.validate_a1);
      this.wrap_a1.zpp_inner._invalidate = m(this, this.invalidate_a1);
    },
    wrap_a1: null,
    b2: null,
    a2localx: null,
    a2localy: null,
    a2relx: null,
    a2rely: null,
    validate_a2: function () {
      this.wrap_a2.zpp_inner.x = this.a2localx;
      this.wrap_a2.zpp_inner.y = this.a2localy;
    },
    invalidate_a2: function (a) {
      this.immutable_midstep("Constraint::a2");
      this.a2localx = a.x;
      this.a2localy = a.y;
      this.wake();
    },
    setup_a2: function () {
      this.wrap_a2 = w.get(this.a2localx, this.a2localy);
      this.wrap_a2.zpp_inner._inuse = !0;
      this.wrap_a2.zpp_inner._validate = m(this, this.validate_a2);
      this.wrap_a2.zpp_inner._invalidate = m(this, this.invalidate_a2);
    },
    wrap_a2: null,
    kMassa: null,
    kMassb: null,
    kMassc: null,
    jAccx: null,
    jAccy: null,
    jMax: null,
    gamma: null,
    biasx: null,
    biasy: null,
    stepped: null,
    wake_connected: function () {
      null != this.b1 && this.b1.isDynamic() && this.b1.wake();
      null != this.b2 && this.b2.isDynamic() && this.b2.wake();
    },
    forest: function () {
      if (this.b1.isDynamic()) {
        if (this.b1.component == this.b1.component.parent)
          var a = this.b1.component;
        else {
          a = this.b1.component;
          for (var b = null; a != a.parent; ) {
            var c = a.parent;
            a.parent = b;
            b = a;
            a = c;
          }
          for (; null != b; ) (c = b.parent), (b.parent = a), (b = c);
        }
        if (this.component == this.component.parent) b = this.component;
        else {
          b = this.component;
          for (c = null; b != b.parent; ) {
            var d = b.parent;
            b.parent = c;
            c = b;
            b = d;
          }
          for (; null != c; ) (d = c.parent), (c.parent = b), (c = d);
        }
        a != b &&
          (a.rank < b.rank
            ? (a.parent = b)
            : a.rank > b.rank
            ? (b.parent = a)
            : ((b.parent = a), a.rank++));
      }
      if (this.b2.isDynamic()) {
        if (this.b2.component == this.b2.component.parent)
          a = this.b2.component;
        else {
          a = this.b2.component;
          for (b = null; a != a.parent; )
            (c = a.parent), (a.parent = b), (b = a), (a = c);
          for (; null != b; ) (c = b.parent), (b.parent = a), (b = c);
        }
        if (this.component == this.component.parent) b = this.component;
        else {
          b = this.component;
          for (c = null; b != b.parent; )
            (d = b.parent), (b.parent = c), (c = b), (b = d);
          for (; null != c; ) (d = c.parent), (c.parent = b), (c = d);
        }
        a != b &&
          (a.rank < b.rank
            ? (a.parent = b)
            : a.rank > b.rank
            ? (b.parent = a)
            : ((b.parent = a), a.rank++));
      }
    },
    pair_exists: function (a, b) {
      return this.b1.id != a || this.b2.id != b
        ? this.b1.id == b
          ? this.b2.id == a
          : !1
        : !0;
    },
    clearcache: function () {
      this.jAccy = this.jAccx = 0;
      this.pre_dt = -1;
    },
    preStep: function (a) {
      -1 == this.pre_dt && (this.pre_dt = a);
      var b = a / this.pre_dt;
      this.pre_dt = a;
      this.stepped = !0;
      this.a1relx =
        this.b1.axisy * this.a1localx - this.b1.axisx * this.a1localy;
      this.a1rely =
        this.a1localx * this.b1.axisx + this.a1localy * this.b1.axisy;
      this.a2relx =
        this.b2.axisy * this.a2localx - this.b2.axisx * this.a2localy;
      this.a2rely =
        this.a2localx * this.b2.axisx + this.a2localy * this.b2.axisy;
      var c = this.b1.smass + this.b2.smass;
      this.kMassa = c;
      this.kMassb = 0;
      this.kMassc = c;
      if (0 != this.b1.sinertia) {
        c = this.a1relx * this.b1.sinertia;
        var d = this.a1rely * this.b1.sinertia;
        this.kMassa += d * this.a1rely;
        this.kMassb += -d * this.a1relx;
        this.kMassc += c * this.a1relx;
      }
      0 != this.b2.sinertia &&
        ((c = this.a2relx * this.b2.sinertia),
        (d = this.a2rely * this.b2.sinertia),
        (this.kMassa += d * this.a2rely),
        (this.kMassb += -d * this.a2relx),
        (this.kMassc += c * this.a2relx));
      c = this.kMassa * this.kMassc - this.kMassb * this.kMassb;
      c != c
        ? ((this.kMassa = this.kMassb = this.kMassc = 0), (c = 3))
        : 0 == c
        ? ((c = 0),
          0 != this.kMassa
            ? (this.kMassa = 1 / this.kMassa)
            : ((this.kMassa = 0), (c |= 1)),
          0 != this.kMassc
            ? (this.kMassc = 1 / this.kMassc)
            : ((this.kMassc = 0), (c |= 2)),
          (this.kMassb = 0))
        : ((c = 1 / c),
          (d = this.kMassc * c),
          (this.kMassc = this.kMassa * c),
          (this.kMassa = d),
          (this.kMassb *= -c),
          (c = 0));
      0 != (c & 1) && (this.jAccx = 0);
      0 != (c & 2) && (this.jAccy = 0);
      if (this.stiff) this.gamma = this.biasy = this.biasx = 0;
      else {
        d = 2 * Math.PI * this.frequency;
        this.gamma = 1 / (a * d * (2 * this.damping + d * a));
        c = 1 / (1 + this.gamma);
        d = a * d * d * this.gamma;
        this.gamma *= c;
        this.kMassa *= c;
        this.kMassb *= c;
        this.kMassc *= c;
        this.biasx = this.b2.posx + this.a2relx - (this.b1.posx + this.a1relx);
        this.biasy = this.b2.posy + this.a2rely - (this.b1.posy + this.a1rely);
        if (
          this.breakUnderError &&
          this.biasx * this.biasx + this.biasy * this.biasy >
            this.maxError * this.maxError
        )
          return !0;
        c = -d;
        this.biasx *= c;
        this.biasy *= c;
        c = this.maxError;
        d = this.biasx * this.biasx + this.biasy * this.biasy;
        d > c * c &&
          ((c *= Fa.invsqrt(d)), (this.biasx *= c), (this.biasy *= c));
      }
      this.jAccx *= b;
      this.jAccy *= b;
      this.jMax = this.maxForce * a;
      return !1;
    },
    warmStart: function () {
      var a = this.b1.imass;
      this.b1.velx -= this.jAccx * a;
      this.b1.vely -= this.jAccy * a;
      a = this.b2.imass;
      this.b2.velx += this.jAccx * a;
      this.b2.vely += this.jAccy * a;
      this.b1.angvel -=
        (this.jAccy * this.a1relx - this.jAccx * this.a1rely) *
        this.b1.iinertia;
      this.b2.angvel +=
        (this.jAccy * this.a2relx - this.jAccx * this.a2rely) *
        this.b2.iinertia;
    },
    applyImpulseVel: function () {
      var a =
        this.b2.velx +
        this.b2.kinvelx -
        this.a2rely * (this.b2.angvel + this.b2.kinangvel) -
        (this.b1.velx +
          this.b1.kinvelx -
          this.a1rely * (this.b1.angvel + this.b1.kinangvel));
      var b =
        this.b2.vely +
        this.b2.kinvely +
        this.a2relx * (this.b2.angvel + this.b2.kinangvel) -
        (this.b1.vely +
          this.b1.kinvely +
          this.a1relx * (this.b1.angvel + this.b1.kinangvel));
      a = this.biasx - a;
      b = this.biasy - b;
      var c = this.kMassa * a + this.kMassb * b;
      b = this.kMassb * a + this.kMassc * b;
      var d = this.gamma;
      a = c - this.jAccx * d;
      b -= this.jAccy * d;
      c = this.jAccx;
      d = this.jAccy;
      this.jAccx += 1 * a;
      this.jAccy += 1 * b;
      if (this.breakUnderForce) {
        if (
          this.jAccx * this.jAccx + this.jAccy * this.jAccy >
          this.jMax * this.jMax
        )
          return !0;
      } else
        this.stiff ||
          ((a = this.jMax),
          (b = this.jAccx * this.jAccx + this.jAccy * this.jAccy),
          b > a * a &&
            ((a *= Fa.invsqrt(b)), (this.jAccx *= a), (this.jAccy *= a)));
      a = this.jAccx - c;
      b = this.jAccy - d;
      c = this.b1.imass;
      this.b1.velx -= a * c;
      this.b1.vely -= b * c;
      c = this.b2.imass;
      this.b2.velx += a * c;
      this.b2.vely += b * c;
      this.b1.angvel -= (b * this.a1relx - a * this.a1rely) * this.b1.iinertia;
      this.b2.angvel += (b * this.a2relx - a * this.a2rely) * this.b2.iinertia;
      return !1;
    },
    applyImpulsePos: function () {
      var a = this.b1.axisy * this.a1localx - this.b1.axisx * this.a1localy;
      var b = this.a1localx * this.b1.axisx + this.a1localy * this.b1.axisy;
      var c = this.b2.axisy * this.a2localx - this.b2.axisx * this.a2localy;
      var d = this.a2localx * this.b2.axisx + this.a2localy * this.b2.axisy;
      var e = this.b2.posx + c - (this.b1.posx + a);
      var f = this.b2.posy + d - (this.b1.posy + b);
      if (this.breakUnderError && e * e + f * f > this.maxError * this.maxError)
        return !0;
      if (e * e + f * f < x.constraintLinearSlop * x.constraintLinearSlop)
        return !1;
      e *= 0.5;
      f *= 0.5;
      if (6 < e * e + f * f) {
        var g = this.b1.smass + this.b2.smass;
        g > x.epsilon &&
          ((g = 0.75 / g),
          (e = -e * g),
          (f = -f * g),
          (g = e * e + f * f),
          400 < g && ((g = 20 * Fa.invsqrt(g)), (e *= g), (f *= g)),
          (g = this.b1.imass),
          (this.b1.posx -= e * g),
          (this.b1.posy -= f * g),
          (g = this.b2.imass),
          (this.b2.posx += e * g),
          (this.b2.posy += f * g),
          (e = this.b2.posx + c - (this.b1.posx + a)),
          (f = this.b2.posy + d - (this.b1.posy + b)),
          (e *= 0.5),
          (f *= 0.5));
      }
      var h;
      g = h = this.b1.smass + this.b2.smass;
      var n = 0;
      if (0 != this.b1.sinertia) {
        var p = a * this.b1.sinertia,
          k = b * this.b1.sinertia;
        g += k * b;
        n += -k * a;
        h += p * a;
      }
      0 != this.b2.sinertia &&
        ((p = c * this.b2.sinertia),
        (k = d * this.b2.sinertia),
        (g += k * d),
        (n += -k * c),
        (h += p * c));
      e = -e;
      f = -f;
      p = e * e + f * f;
      36 < p && ((p = 6 * Fa.invsqrt(p)), (e *= p), (f *= p));
      p = g * h - n * n;
      p != p
        ? (e = f = 0)
        : 0 == p
        ? ((e = 0 != g ? e / g : 0), (f = 0 != h ? f / h : 0))
        : ((p = 1 / p),
          (h = p * (h * e - n * f)),
          (f = p * (g * f - n * e)),
          (e = h));
      g = this.b1.imass;
      this.b1.posx -= e * g;
      this.b1.posy -= f * g;
      g = this.b2.imass;
      this.b2.posx += e * g;
      this.b2.posy += f * g;
      this.b1.delta_rot(-(f * a - e * b) * this.b1.iinertia);
      this.b2.delta_rot((f * c - e * d) * this.b2.iinertia);
      return !1;
    },
    __class__: Dh,
  });
  var Eh = function () {
    this.stepped = !1;
    this.kMass = this.jAcc = this.jMax = this.gamma = this.bias = 0;
    this.wrap_a4 = null;
    this.a4localx = this.a4localy = this.a4relx = this.a4rely = 0;
    this.wrap_a3 = this.b4 = null;
    this.a3localx = this.a3localy = this.a3relx = this.a3rely = 0;
    this.wrap_a2 = this.b3 = null;
    this.a2localx = this.a2localy = this.a2relx = this.a2rely = 0;
    this.wrap_a1 = this.b2 = null;
    this.a1localx = this.a1localy = this.a1relx = this.a1rely = 0;
    this.b1 = null;
    this.n12x =
      this.n12y =
      this.n34x =
      this.n34y =
      this.cx1 =
      this.cx2 =
      this.cx3 =
      this.cx4 =
        0;
    this.slack = this.equal = !1;
    this.jointMin = this.jointMax = 0;
    this.ratio = 1;
    this.outer_zn = null;
    Qa.call(this);
    this.a4rely =
      this.a4relx =
      this.a4localy =
      this.a4localx =
      this.a3rely =
      this.a3relx =
      this.a3localy =
      this.a3localx =
      this.a2rely =
      this.a2relx =
      this.a2localy =
      this.a2localx =
      this.a1rely =
      this.a1relx =
      this.a1localy =
      this.a1localx =
        0;
    this.n12x = 1;
    this.n12y = 0;
    this.n34x = 1;
    this.jAcc = this.n34y = 0;
    this.jMax = sb.POSINF();
    this.stepped = !1;
    this.cx1 = this.cx2 = this.cx3 = this.cx4 = 0;
  };
  l["zpp_nape.constraint.ZPP_PulleyJoint"] = Eh;
  Eh.__name__ = ["zpp_nape", "constraint", "ZPP_PulleyJoint"];
  Eh.__super__ = Qa;
  Eh.prototype = v(Qa.prototype, {
    outer_zn: null,
    ratio: null,
    jointMin: null,
    jointMax: null,
    slack: null,
    equal: null,
    n12x: null,
    n12y: null,
    n34x: null,
    n34y: null,
    cx1: null,
    cx2: null,
    cx3: null,
    cx4: null,
    bodyImpulse: function (a) {
      if (this.stepped) {
        var b = W.get();
        a == this.b1 &&
          (b.set_x(b.get_x() - this.jAcc * this.n12x),
          b.set_y(b.get_y() - this.jAcc * this.n12y),
          b.set_z(b.get_z() - this.cx1 * this.jAcc));
        a == this.b2 &&
          (b.set_x(b.get_x() + this.jAcc * this.n12x),
          b.set_y(b.get_y() + this.jAcc * this.n12y),
          b.set_z(b.get_z() + this.cx2 * this.jAcc));
        a == this.b3 &&
          (b.set_x(b.get_x() - this.jAcc * this.n34x),
          b.set_y(b.get_y() - this.jAcc * this.n34y),
          b.set_z(b.get_z() - this.cx3 * this.jAcc));
        a == this.b4 &&
          (b.set_x(b.get_x() + this.jAcc * this.n34x),
          b.set_y(b.get_y() + this.jAcc * this.n34y),
          b.set_z(b.get_z() + this.cx4 * this.jAcc));
        return b;
      }
      return W.get(0, 0, 0);
    },
    activeBodies: function () {
      null != this.b1 && this.b1.constraints.add(this);
      this.b2 != this.b1 && null != this.b2 && this.b2.constraints.add(this);
      this.b3 != this.b1 &&
        this.b3 != this.b2 &&
        null != this.b3 &&
        this.b3.constraints.add(this);
      this.b4 != this.b1 &&
        this.b4 != this.b2 &&
        this.b4 != this.b3 &&
        null != this.b4 &&
        this.b4.constraints.add(this);
    },
    inactiveBodies: function () {
      null != this.b1 && this.b1.constraints.remove(this);
      this.b2 != this.b1 && null != this.b2 && this.b2.constraints.remove(this);
      this.b3 != this.b1 &&
        this.b3 != this.b2 &&
        null != this.b3 &&
        this.b3.constraints.remove(this);
      this.b4 != this.b1 &&
        this.b4 != this.b2 &&
        this.b4 != this.b3 &&
        null != this.b4 &&
        this.b4.constraints.remove(this);
    },
    b1: null,
    a1localx: null,
    a1localy: null,
    a1relx: null,
    a1rely: null,
    validate_a1: function () {
      this.wrap_a1.zpp_inner.x = this.a1localx;
      this.wrap_a1.zpp_inner.y = this.a1localy;
    },
    invalidate_a1: function (a) {
      this.immutable_midstep("Constraint::a1");
      this.a1localx = a.x;
      this.a1localy = a.y;
      this.wake();
    },
    setup_a1: function () {
      this.wrap_a1 = w.get(this.a1localx, this.a1localy);
      this.wrap_a1.zpp_inner._inuse = !0;
      this.wrap_a1.zpp_inner._validate = m(this, this.validate_a1);
      this.wrap_a1.zpp_inner._invalidate = m(this, this.invalidate_a1);
    },
    wrap_a1: null,
    b2: null,
    a2localx: null,
    a2localy: null,
    a2relx: null,
    a2rely: null,
    validate_a2: function () {
      this.wrap_a2.zpp_inner.x = this.a2localx;
      this.wrap_a2.zpp_inner.y = this.a2localy;
    },
    invalidate_a2: function (a) {
      this.immutable_midstep("Constraint::a2");
      this.a2localx = a.x;
      this.a2localy = a.y;
      this.wake();
    },
    setup_a2: function () {
      this.wrap_a2 = w.get(this.a2localx, this.a2localy);
      this.wrap_a2.zpp_inner._inuse = !0;
      this.wrap_a2.zpp_inner._validate = m(this, this.validate_a2);
      this.wrap_a2.zpp_inner._invalidate = m(this, this.invalidate_a2);
    },
    wrap_a2: null,
    b3: null,
    a3localx: null,
    a3localy: null,
    a3relx: null,
    a3rely: null,
    validate_a3: function () {
      this.wrap_a3.zpp_inner.x = this.a3localx;
      this.wrap_a3.zpp_inner.y = this.a3localy;
    },
    invalidate_a3: function (a) {
      this.immutable_midstep("Constraint::a3");
      this.a3localx = a.x;
      this.a3localy = a.y;
      this.wake();
    },
    setup_a3: function () {
      this.wrap_a3 = w.get(this.a3localx, this.a3localy);
      this.wrap_a3.zpp_inner._inuse = !0;
      this.wrap_a3.zpp_inner._validate = m(this, this.validate_a3);
      this.wrap_a3.zpp_inner._invalidate = m(this, this.invalidate_a3);
    },
    wrap_a3: null,
    b4: null,
    a4localx: null,
    a4localy: null,
    a4relx: null,
    a4rely: null,
    validate_a4: function () {
      this.wrap_a4.zpp_inner.x = this.a4localx;
      this.wrap_a4.zpp_inner.y = this.a4localy;
    },
    invalidate_a4: function (a) {
      this.immutable_midstep("Constraint::a4");
      this.a4localx = a.x;
      this.a4localy = a.y;
      this.wake();
    },
    setup_a4: function () {
      this.wrap_a4 = w.get(this.a4localx, this.a4localy);
      this.wrap_a4.zpp_inner._inuse = !0;
      this.wrap_a4.zpp_inner._validate = m(this, this.validate_a4);
      this.wrap_a4.zpp_inner._invalidate = m(this, this.invalidate_a4);
    },
    wrap_a4: null,
    kMass: null,
    jAcc: null,
    jMax: null,
    gamma: null,
    bias: null,
    stepped: null,
    wake_connected: function () {
      null != this.b1 && this.b1.isDynamic() && this.b1.wake();
      null != this.b2 && this.b2.isDynamic() && this.b2.wake();
      null != this.b3 && this.b3.isDynamic() && this.b3.wake();
      null != this.b4 && this.b4.isDynamic() && this.b4.wake();
    },
    forest: function () {
      if (this.b1.isDynamic()) {
        if (this.b1.component == this.b1.component.parent)
          var a = this.b1.component;
        else {
          a = this.b1.component;
          for (var b = null; a != a.parent; ) {
            var c = a.parent;
            a.parent = b;
            b = a;
            a = c;
          }
          for (; null != b; ) (c = b.parent), (b.parent = a), (b = c);
        }
        if (this.component == this.component.parent) b = this.component;
        else {
          b = this.component;
          for (c = null; b != b.parent; ) {
            var d = b.parent;
            b.parent = c;
            c = b;
            b = d;
          }
          for (; null != c; ) (d = c.parent), (c.parent = b), (c = d);
        }
        a != b &&
          (a.rank < b.rank
            ? (a.parent = b)
            : a.rank > b.rank
            ? (b.parent = a)
            : ((b.parent = a), a.rank++));
      }
      if (this.b2.isDynamic()) {
        if (this.b2.component == this.b2.component.parent)
          a = this.b2.component;
        else {
          a = this.b2.component;
          for (b = null; a != a.parent; )
            (c = a.parent), (a.parent = b), (b = a), (a = c);
          for (; null != b; ) (c = b.parent), (b.parent = a), (b = c);
        }
        if (this.component == this.component.parent) b = this.component;
        else {
          b = this.component;
          for (c = null; b != b.parent; )
            (d = b.parent), (b.parent = c), (c = b), (b = d);
          for (; null != c; ) (d = c.parent), (c.parent = b), (c = d);
        }
        a != b &&
          (a.rank < b.rank
            ? (a.parent = b)
            : a.rank > b.rank
            ? (b.parent = a)
            : ((b.parent = a), a.rank++));
      }
      if (this.b3.isDynamic()) {
        if (this.b3.component == this.b3.component.parent)
          a = this.b3.component;
        else {
          a = this.b3.component;
          for (b = null; a != a.parent; )
            (c = a.parent), (a.parent = b), (b = a), (a = c);
          for (; null != b; ) (c = b.parent), (b.parent = a), (b = c);
        }
        if (this.component == this.component.parent) b = this.component;
        else {
          b = this.component;
          for (c = null; b != b.parent; )
            (d = b.parent), (b.parent = c), (c = b), (b = d);
          for (; null != c; ) (d = c.parent), (c.parent = b), (c = d);
        }
        a != b &&
          (a.rank < b.rank
            ? (a.parent = b)
            : a.rank > b.rank
            ? (b.parent = a)
            : ((b.parent = a), a.rank++));
      }
      if (this.b4.isDynamic()) {
        if (this.b4.component == this.b4.component.parent)
          a = this.b4.component;
        else {
          a = this.b4.component;
          for (b = null; a != a.parent; )
            (c = a.parent), (a.parent = b), (b = a), (a = c);
          for (; null != b; ) (c = b.parent), (b.parent = a), (b = c);
        }
        if (this.component == this.component.parent) b = this.component;
        else {
          b = this.component;
          for (c = null; b != b.parent; )
            (d = b.parent), (b.parent = c), (c = b), (b = d);
          for (; null != c; ) (d = c.parent), (c.parent = b), (c = d);
        }
        a != b &&
          (a.rank < b.rank
            ? (a.parent = b)
            : a.rank > b.rank
            ? (b.parent = a)
            : ((b.parent = a), a.rank++));
      }
    },
    pair_exists: function (a, b) {
      return (this.b1.id != a ||
        (this.b2.id != b && this.b3.id != b && this.b4.id != b)) &&
        (this.b2.id != a ||
          (this.b3.id != b && this.b4.id != b && this.b1.id != b)) &&
        (this.b3.id != a ||
          (this.b4.id != b && this.b1.id != b && this.b2.id != b))
        ? this.b4.id == a
          ? this.b1.id != b && this.b2.id != b
            ? this.b3.id == b
            : !0
          : !1
        : !0;
    },
    clearcache: function () {
      this.jAcc = 0;
      this.pre_dt = -1;
    },
    preStep: function (a) {
      -1 == this.pre_dt && (this.pre_dt = a);
      var b = a / this.pre_dt;
      this.pre_dt = a;
      this.stepped = !0;
      this.equal = this.jointMin == this.jointMax;
      this.a1relx =
        this.b1.axisy * this.a1localx - this.b1.axisx * this.a1localy;
      this.a1rely =
        this.a1localx * this.b1.axisx + this.a1localy * this.b1.axisy;
      this.a2relx =
        this.b2.axisy * this.a2localx - this.b2.axisx * this.a2localy;
      this.a2rely =
        this.a2localx * this.b2.axisx + this.a2localy * this.b2.axisy;
      this.a3relx =
        this.b3.axisy * this.a3localx - this.b3.axisx * this.a3localy;
      this.a3rely =
        this.a3localx * this.b3.axisx + this.a3localy * this.b3.axisy;
      this.a4relx =
        this.b4.axisy * this.a4localx - this.b4.axisx * this.a4localy;
      this.a4rely =
        this.a4localx * this.b4.axisx + this.a4localy * this.b4.axisy;
      var c = this.b2.posx + this.a2relx - (this.b1.posx + this.a1relx);
      var d = this.b2.posy + this.a2rely - (this.b1.posy + this.a1rely);
      var e = this.b4.posx + this.a4relx - (this.b3.posx + this.a3relx);
      var f = this.b4.posy + this.a4rely - (this.b3.posy + this.a3rely);
      var g = Fa.sqrt(c * c + d * d),
        h = Fa.sqrt(e * e + f * f);
      if (0 != g) {
        var n = 1 / g;
        this.n12x = c * n;
        this.n12y = d * n;
      }
      0 != h
        ? ((c = 1 / h),
          (this.n34x = e * c),
          (this.n34y = f * c),
          (e = this.ratio))
        : (e =
            this.ratio /
            Fa.sqrt(this.n34x * this.n34x + this.n34y * this.n34y));
      this.n34x *= e;
      this.n34y *= e;
      g += this.ratio * h;
      this.equal
        ? ((g -= this.jointMax), (this.slack = !1))
        : g < this.jointMin
        ? ((g = this.jointMin - g),
          (this.n12x = -this.n12x),
          (this.n12y = -this.n12y),
          (this.n34x = -this.n34x),
          (this.n34y = -this.n34y),
          (this.slack = !1))
        : g > this.jointMax
        ? ((g -= this.jointMax), (this.slack = !1))
        : ((g = this.n34y = this.n34x = this.n12y = this.n12x = 0),
          (this.slack = !0));
      if (!this.slack) {
        this.cx1 = this.n12y * this.a1relx - this.n12x * this.a1rely;
        this.cx2 = this.n12y * this.a2relx - this.n12x * this.a2rely;
        this.cx3 = this.n34y * this.a3relx - this.n34x * this.a3rely;
        this.cx4 = this.n34y * this.a4relx - this.n34x * this.a4rely;
        h =
          this.b1.smass +
          this.b2.smass +
          this.ratio * this.ratio * (this.b3.smass + this.b4.smass) +
          this.b1.sinertia * this.cx1 * this.cx1 +
          this.b2.sinertia * this.cx2 * this.cx2 +
          this.b3.sinertia * this.cx3 * this.cx3 +
          this.b4.sinertia * this.cx4 * this.cx4;
        this.b1 == this.b4 &&
          (h -=
            2 *
            ((this.n12x * this.n34x + this.n12y * this.n34y) * this.b1.smass +
              this.cx1 * this.cx4 * this.b1.sinertia));
        this.b1 == this.b3 &&
          (h +=
            2 *
            ((this.n12x * this.n34x + this.n12y * this.n34y) * this.b1.smass +
              this.cx1 * this.cx3 * this.b1.sinertia));
        this.b2 == this.b3 &&
          (h -=
            2 *
            ((this.n12x * this.n34x + this.n12y * this.n34y) * this.b2.smass +
              this.cx2 * this.cx3 * this.b2.sinertia));
        this.b2 == this.b4 &&
          (h +=
            2 *
            ((this.n12x * this.n34x + this.n12y * this.n34y) * this.b2.smass +
              this.cx2 * this.cx4 * this.b2.sinertia));
        this.kMass = h;
        0 != this.kMass ? (this.kMass = 1 / this.kMass) : (this.jAcc = 0);
        if (this.stiff) this.gamma = this.bias = 0;
        else {
          if (this.breakUnderError && g * g > this.maxError * this.maxError)
            return !0;
          e = 2 * Math.PI * this.frequency;
          this.gamma = 1 / (a * e * (2 * this.damping + e * a));
          h = 1 / (1 + this.gamma);
          e = a * e * e * this.gamma;
          this.gamma *= h;
          this.kMass *= h;
          this.bias = -g * e;
          this.bias < -this.maxError
            ? (this.bias = -this.maxError)
            : this.bias > this.maxError && (this.bias = this.maxError);
        }
        this.jAcc *= b;
        this.jMax = this.maxForce * a;
      }
      return !1;
    },
    warmStart: function () {
      if (!this.slack) {
        var a = this.b1.imass * this.jAcc;
        this.b1.velx -= this.n12x * a;
        this.b1.vely -= this.n12y * a;
        a = this.b2.imass * this.jAcc;
        this.b2.velx += this.n12x * a;
        this.b2.vely += this.n12y * a;
        a = this.b3.imass * this.jAcc;
        this.b3.velx -= this.n34x * a;
        this.b3.vely -= this.n34y * a;
        a = this.b4.imass * this.jAcc;
        this.b4.velx += this.n34x * a;
        this.b4.vely += this.n34y * a;
        this.b1.angvel -= this.cx1 * this.b1.iinertia * this.jAcc;
        this.b2.angvel += this.cx2 * this.b2.iinertia * this.jAcc;
        this.b3.angvel -= this.cx3 * this.b3.iinertia * this.jAcc;
        this.b4.angvel += this.cx4 * this.b4.iinertia * this.jAcc;
      }
    },
    applyImpulseVel: function () {
      if (this.slack) return !1;
      var a =
          this.kMass *
            (this.bias -
              (this.n12x *
                (this.b2.velx +
                  this.b2.kinvelx -
                  this.b1.velx -
                  this.b1.kinvelx) +
                this.n12y *
                  (this.b2.vely +
                    this.b2.kinvely -
                    this.b1.vely -
                    this.b1.kinvely) +
                this.n34x *
                  (this.b4.velx +
                    this.b4.kinvelx -
                    this.b3.velx -
                    this.b3.kinvelx) +
                this.n34y *
                  (this.b4.vely +
                    this.b4.kinvely -
                    this.b3.vely -
                    this.b3.kinvely) +
                (this.b2.angvel + this.b2.kinangvel) * this.cx2 -
                (this.b1.angvel + this.b1.kinangvel) * this.cx1 +
                (this.b4.angvel + this.b4.kinangvel) * this.cx4 -
                (this.b3.angvel + this.b3.kinangvel) * this.cx3)) -
          this.jAcc * this.gamma,
        b = this.jAcc;
      this.jAcc += a;
      !this.equal && 0 < this.jAcc && (this.jAcc = 0);
      if (this.breakUnderForce && this.jAcc < -this.jMax) return !0;
      !this.stiff && this.jAcc < -this.jMax && (this.jAcc = -this.jMax);
      a = this.jAcc - b;
      b = this.b1.imass * a;
      this.b1.velx -= this.n12x * b;
      this.b1.vely -= this.n12y * b;
      b = this.b2.imass * a;
      this.b2.velx += this.n12x * b;
      this.b2.vely += this.n12y * b;
      b = this.b3.imass * a;
      this.b3.velx -= this.n34x * b;
      this.b3.vely -= this.n34y * b;
      b = this.b4.imass * a;
      this.b4.velx += this.n34x * b;
      this.b4.vely += this.n34y * b;
      this.b1.angvel -= this.cx1 * this.b1.iinertia * a;
      this.b2.angvel += this.cx2 * this.b2.iinertia * a;
      this.b3.angvel -= this.cx3 * this.b3.iinertia * a;
      this.b4.angvel += this.cx4 * this.b4.iinertia * a;
      return !1;
    },
    applyImpulsePos: function () {
      var a = this.b1.axisy * this.a1localx - this.b1.axisx * this.a1localy;
      var b = this.a1localx * this.b1.axisx + this.a1localy * this.b1.axisy;
      var c = this.b2.axisy * this.a2localx - this.b2.axisx * this.a2localy;
      var d = this.a2localx * this.b2.axisx + this.a2localy * this.b2.axisy;
      var e = this.b3.axisy * this.a3localx - this.b3.axisx * this.a3localy;
      var f = this.a3localx * this.b3.axisx + this.a3localy * this.b3.axisy;
      var g = this.b4.axisy * this.a4localx - this.b4.axisx * this.a4localy;
      var h = this.a4localx * this.b4.axisx + this.a4localy * this.b4.axisy;
      var n = this.n12x;
      var p = this.n12y;
      var k = this.n34x;
      var l = this.n34y;
      var m = this.b2.posx + c - (this.b1.posx + a);
      var q = this.b2.posy + d - (this.b1.posy + b);
      var r = this.b4.posx + g - (this.b3.posx + e);
      var u = this.b4.posy + h - (this.b3.posy + f);
      var t = Fa.sqrt(m * m + q * q);
      var v = Fa.sqrt(r * r + u * u);
      0 != t && ((p = 1 / t), (n = m * p), (p *= q));
      0 != v
        ? ((l = 1 / v), (m = this.ratio), (k = r * l * m), (l = u * l * m))
        : ((r = this.ratio / Fa.sqrt(k * k + l * l)), (k *= r), (l *= r));
      v = t + this.ratio * v;
      this.equal
        ? ((v -= this.jointMax), (t = !1))
        : v < this.jointMin
        ? ((v = this.jointMin - v),
          (n = -n),
          (p = -p),
          (k = -k),
          (l = -l),
          (t = !1))
        : v > this.jointMax
        ? ((v -= this.jointMax), (t = !1))
        : ((v = l = k = p = n = 0), (t = !0));
      if (!t) {
        if (this.breakUnderError && v * v > this.maxError * this.maxError)
          return !0;
        if (v * v < x.constraintLinearSlop * x.constraintLinearSlop) return !1;
        v *= 0.5;
        6 < v * v &&
          ((t = this.b1.smass + this.b2.smass),
          t > x.epsilon && ((t = (0.75 / t) * -v), this.equal || 0 > t)) &&
          ((v = t * this.b1.imass),
          (this.b1.posx -= n * v),
          (this.b1.posy -= p * v),
          (v = t * this.b2.imass),
          (this.b2.posx += n * v),
          (this.b2.posy += p * v),
          (v = t * this.b3.imass),
          (this.b3.posx -= k * v),
          (this.b3.posy -= l * v),
          (t *= this.b4.imass),
          (this.b4.posx += k * t),
          (this.b4.posy += l * t),
          (m = this.b2.posx + c - (this.b1.posx + a)),
          (q = this.b2.posy + d - (this.b1.posy + b)),
          (r = this.b4.posx + g - (this.b3.posx + e)),
          (u = this.b4.posy + h - (this.b3.posy + f)),
          (t = Fa.sqrt(m * m + q * q)),
          (v = Fa.sqrt(r * r + u * u)),
          0 != t && ((p = 1 / t), (n = m * p), (p *= q)),
          0 != v
            ? ((l = 1 / v), (m = this.ratio), (k = r * l * m), (l = u * l * m))
            : ((r = this.ratio / Fa.sqrt(k * k + l * l)), (k *= r), (l *= r)),
          (t += this.ratio * v),
          this.equal
            ? (t -= this.jointMax)
            : t < this.jointMin
            ? ((t = this.jointMin - t), (n = -n), (p = -p), (k = -k), (l = -l))
            : t > this.jointMax
            ? (t -= this.jointMax)
            : (t = l = k = p = n = 0),
          (v = 0.5 * t));
        a = p * a - n * b;
        c = p * c - n * d;
        e = l * e - k * f;
        g = l * g - k * h;
        h =
          this.b1.smass +
          this.b2.smass +
          this.ratio * this.ratio * (this.b3.smass + this.b4.smass) +
          this.b1.sinertia * a * a +
          this.b2.sinertia * c * c +
          this.b3.sinertia * e * e +
          this.b4.sinertia * g * g;
        this.b1 == this.b4 &&
          (h -=
            2 * ((n * k + p * l) * this.b1.smass + a * g * this.b1.sinertia));
        this.b1 == this.b3 &&
          (h +=
            2 * ((n * k + p * l) * this.b1.smass + a * e * this.b1.sinertia));
        this.b2 == this.b3 &&
          (h -=
            2 * ((n * k + p * l) * this.b2.smass + c * e * this.b2.sinertia));
        this.b2 == this.b4 &&
          (h +=
            2 * ((n * k + p * l) * this.b2.smass + c * g * this.b2.sinertia));
        0 != h && (h = 1 / h);
        t = -v * h;
        if (this.equal || 0 > t)
          (h = this.b1.imass * t),
            (this.b1.posx -= n * h),
            (this.b1.posy -= p * h),
            (h = this.b2.imass * t),
            (this.b2.posx += n * h),
            (this.b2.posy += p * h),
            (n = this.b3.imass * t),
            (this.b3.posx -= k * n),
            (this.b3.posy -= l * n),
            (n = this.b4.imass * t),
            (this.b4.posx += k * n),
            (this.b4.posy += l * n),
            this.b1.delta_rot(-a * this.b1.iinertia * t),
            this.b2.delta_rot(c * this.b2.iinertia * t),
            this.b3.delta_rot(-e * this.b3.iinertia * t),
            this.b4.delta_rot(g * this.b4.iinertia * t);
      }
      return !1;
    },
    __class__: Eh,
  });
  var Fh = function (a, b) {
    this.Keff = this.vec3 = this.J = this.jOld = null;
    this.jMax = 0;
    this.velonly = !1;
    this.soft = this.gamma = 0;
    this.L = this.y = null;
    this.stepped = !1;
    this.jAcc = this.bias = null;
    this.dim = 0;
    this.outer_zn = this.bodies = null;
    Qa.call(this);
    this.bodies = [];
    this.dim = a;
    this.velonly = b;
    this.jAcc = [];
    this.bias = [];
    this.L = [];
    this.J = [];
    this.jOld = [];
    this.y = [];
    this.Keff = [];
    this.vec3 = W.get(0, 0, 0);
    for (b = 0; b < a; ) {
      var c = b++,
        d = (this.bias[c] = this.J[c] = this.jOld[c] = this.y[c] = 0);
      this.jAcc[c] = d;
      d = 0;
      for (var e = a; d < e; ) {
        var f = d++;
        this.L[c * a + f] = 0;
      }
    }
    this.stepped = !1;
  };
  l["zpp_nape.constraint.ZPP_UserConstraint"] = Fh;
  Fh.__name__ = ["zpp_nape", "constraint", "ZPP_UserConstraint"];
  Fh.__super__ = Qa;
  Fh.prototype = v(Qa.prototype, {
    outer_zn: null,
    bodies: null,
    dim: null,
    jAcc: null,
    bias: null,
    bodyImpulse: function (a) {
      for (var b = 0, c = this.dim; b < c; ) {
        var d = b++;
        this.J[d] = this.jAcc[d];
      }
      b = W.get(0, 0, 0);
      this.stepped && this.outer_zn.__impulse(this.J, a.outer, b);
      return b;
    },
    activeBodies: function () {
      for (var a = 0, b = this.bodies; a < b.length; ) {
        var c = b[a];
        ++a;
        null != c.body && c.body.constraints.add(this);
      }
    },
    inactiveBodies: function () {
      for (var a = 0, b = this.bodies; a < b.length; ) {
        var c = b[a];
        ++a;
        null != c.body && c.body.constraints.remove(this);
      }
    },
    stepped: null,
    wake_connected: function () {
      for (var a = 0, b = this.bodies; a < b.length; ) {
        var c = b[a];
        ++a;
        c.body.isDynamic() && c.body.wake();
      }
    },
    forest: function () {
      for (var a = 0, b = this.bodies; a < b.length; ) {
        var c = b[a];
        ++a;
        if (c.body.isDynamic()) {
          if (c.body.component == c.body.component.parent) c = c.body.component;
          else {
            c = c.body.component;
            for (var d = null; c != c.parent; ) {
              var e = c.parent;
              c.parent = d;
              d = c;
              c = e;
            }
            for (; null != d; ) (e = d.parent), (d.parent = c), (d = e);
          }
          if (this.component == this.component.parent) d = this.component;
          else {
            d = this.component;
            for (e = null; d != d.parent; ) {
              var f = d.parent;
              d.parent = e;
              e = d;
              d = f;
            }
            for (; null != e; ) (f = e.parent), (e.parent = d), (e = f);
          }
          c != d &&
            (c.rank < d.rank
              ? (c.parent = d)
              : c.rank > d.rank
              ? (d.parent = c)
              : ((d.parent = c), c.rank++));
        }
      }
    },
    pair_exists: function (a, b) {
      for (var c = !1, d = u["int"](this.bodies.length), e = 0; e < d; ) {
        var f = e++,
          g = this.bodies[f].body;
        f += 1;
        for (var h = d; f < h; ) {
          var n = f++;
          n = this.bodies[n].body;
          if ((g.id == a && n.id == b) || (g.id == b && n.id == a)) {
            c = !0;
            break;
          }
        }
        if (c) break;
      }
      return c;
    },
    broken: function () {
      this.outer_zn.__broken();
    },
    clearcache: function () {
      for (var a = 0, b = this.dim; a < b; ) {
        var c = a++;
        this.jAcc[c] = 0;
      }
      this.pre_dt = -1;
    },
    lsq: function (a) {
      for (var b = 0, c = 0, d = this.dim; c < d; ) {
        var e = c++;
        b += a[e] * a[e];
      }
      return b;
    },
    _clamp: function (a, b) {
      var c = this.lsq(a);
      if (c > b * b) {
        b /= Math.sqrt(c);
        c = 0;
        for (var d = this.dim; c < d; ) {
          var e = c++;
          a[e] *= b;
        }
      }
    },
    L: null,
    solve: function (a) {
      for (var b = 0, c = 0, d = this.dim; c < d; ) {
        for (var e = c++, f = 0, g = 0, h = e - 1; g < h; ) {
          var n = g++;
          f += this.L[e * this.dim + n] * this.L[e * this.dim + n];
        }
        f = Math.sqrt(a[b++] - f);
        this.L[e * this.dim + e] = f;
        if (0 != f)
          for (f = 1 / f, g = e + 1, h = this.dim; g < h; ) {
            n = g++;
            for (var p = 0, k = 0, l = e - 1; k < l; ) {
              var m = k++;
              p += this.L[n * this.dim + m] * this.L[e * this.dim + m];
            }
            this.L[n * this.dim + e] = f * (a[b++] - p);
          }
        else {
          f = e + 1;
          for (g = this.dim; f < g; ) (h = f++), (this.L[h * this.dim + e] = 0);
          b += this.dim - e - 1;
        }
      }
      return this.L;
    },
    y: null,
    transform: function (a, b) {
      for (var c = 0, d = this.dim; c < d; ) {
        var e = c++,
          f = b[e],
          g = a[e * this.dim + e];
        if (0 != g) {
          for (var h = 0, n = e; h < n; ) {
            var p = h++;
            f -= a[e * this.dim + p] * this.y[p];
          }
          this.y[e] = f / g;
        } else this.y[e] = 0;
      }
      c = 0;
      for (d = this.dim; c < d; )
        if (
          ((e = c++), (e = this.dim - 1 - e), (f = a[e * this.dim + e]), 0 != f)
        ) {
          g = this.y[e];
          h = e + 1;
          for (n = this.dim; h < n; )
            (p = h++), (g -= a[p * this.dim + e] * b[p]);
          b[e] = g / f;
        } else b[e] = 0;
    },
    soft: null,
    gamma: null,
    velonly: null,
    jMax: null,
    Keff: null,
    preStep: function (a) {
      this.outer_zn.__validate();
      -1 == this.pre_dt && (this.pre_dt = a);
      var b = a / this.pre_dt;
      this.pre_dt = a;
      this.stepped = !0;
      this.outer_zn.__prepare();
      this.outer_zn.__eff_mass(this.Keff);
      this.L = this.solve(this.Keff);
      if (this.stiff || this.velonly) {
        for (var c = 0, d = this.dim; c < d; ) {
          var e = c++;
          this.bias[e] = 0;
        }
        this.gamma = 0;
        this.soft = 1;
      } else {
        c = 2 * Math.PI * this.frequency;
        this.gamma = 1 / (a * c * (2 * this.damping + c * a));
        d = 1 / (1 + this.gamma);
        c = a * c * c * this.gamma;
        this.gamma *= d;
        this.soft = d;
        this.outer_zn.__position(this.bias);
        if (
          this.breakUnderError &&
          this.lsq(this.bias) > this.maxError * this.maxError
        )
          return !0;
        d = 0;
        for (e = this.dim; d < e; ) {
          var f = d++;
          this.bias[f] *= -c;
        }
        this._clamp(this.bias, this.maxError);
      }
      c = 0;
      for (d = this.dim; c < d; ) (e = c++), (this.jAcc[e] *= b);
      this.jMax = this.maxForce * a;
      return !1;
    },
    vec3: null,
    warmStart: function () {
      for (var a = 0, b = this.bodies; a < b.length; ) {
        var c = b[a];
        ++a;
        c = c.body;
        this.outer_zn.__impulse(this.jAcc, c.outer, this.vec3);
        var d = c.imass;
        c.velx += this.vec3.get_x() * d;
        c.vely += this.vec3.get_y() * d;
        c.angvel += this.vec3.get_z() * c.iinertia;
      }
    },
    J: null,
    jOld: null,
    applyImpulseVel: function () {
      this.outer_zn.__velocity(this.J);
      for (var a = 0, b = this.dim; a < b; ) {
        var c = a++;
        this.J[c] = this.bias[c] - this.J[c];
      }
      this.transform(this.L, this.J);
      a = 0;
      for (b = this.dim; a < b; )
        (c = a++),
          (this.jOld[c] = this.jAcc[c]),
          (this.jAcc[c] += this.J[c] =
            this.J[c] * this.soft - this.jAcc[c] * this.gamma);
      this.outer_zn.__clamp(this.jAcc);
      if (
        (this.breakUnderForce || !this.stiff) &&
        this.lsq(this.jAcc) > this.jMax * this.jMax
      ) {
        if (this.breakUnderForce) return !0;
        this.stiff || this._clamp(this.jAcc, this.jMax);
      }
      a = 0;
      for (b = this.dim; a < b; )
        (c = a++), (this.J[c] = this.jAcc[c] - this.jOld[c]);
      a = 0;
      for (b = this.bodies; a < b.length; ) {
        c = b[a];
        ++a;
        c = c.body;
        this.outer_zn.__impulse(this.J, c.outer, this.vec3);
        var d = c.imass;
        c.velx += this.vec3.get_x() * d;
        c.vely += this.vec3.get_y() * d;
        c.angvel += this.vec3.get_z() * c.iinertia;
      }
      return !1;
    },
    applyImpulsePos: function () {
      if (this.velonly) return !1;
      this.outer_zn.__prepare();
      this.outer_zn.__position(this.J);
      var a = this.lsq(this.J);
      if (this.breakUnderError && a > this.maxError * this.maxError) return !0;
      if (a < x.constraintLinearSlop * x.constraintLinearSlop) return !1;
      a = 0;
      for (var b = this.dim; a < b; ) {
        var c = a++;
        this.J[c] *= -1;
      }
      this.outer_zn.__eff_mass(this.Keff);
      this.transform(this.solve(this.Keff), this.J);
      this.outer_zn.__clamp(this.J);
      a = 0;
      for (b = this.bodies; a < b.length; ) {
        c = b[a];
        ++a;
        c = c.body;
        this.outer_zn.__impulse(this.J, c.outer, this.vec3);
        var d = c.imass;
        c.posx += this.vec3.get_x() * d;
        c.posy += this.vec3.get_y() * d;
        c.delta_rot(this.vec3.get_z() * c.iinertia);
      }
      return !1;
    },
    __class__: Fh,
  });
  var il = function (a, b) {
    this.body = null;
    this.cnt = 0;
    this.cnt = a;
    this.body = b;
  };
  l["zpp_nape.constraint.ZPP_UserBody"] = il;
  il.__name__ = ["zpp_nape", "constraint", "ZPP_UserBody"];
  il.prototype = { cnt: null, body: null, __class__: il };
  var Gh = function () {
    this.stepped = !1;
    this.phase =
      this.kMassa =
      this.kMassb =
      this.kMassd =
      this.kMassc =
      this.kMasse =
      this.kMassf =
      this.jAccx =
      this.jAccy =
      this.jAccz =
      this.jMax =
      this.gamma =
      this.biasx =
      this.biasy =
      this.biasz =
        0;
    this.wrap_a2 = null;
    this.a2localx = this.a2localy = this.a2relx = this.a2rely = 0;
    this.wrap_a1 = this.b2 = null;
    this.a1localx = this.a1localy = this.a1relx = this.a1rely = 0;
    this.outer_zn = this.b1 = null;
    Qa.call(this);
    this.jAccz = this.jAccy = this.jAccx = this.phase = 0;
    this.jMax = sb.POSINF();
    this.stepped = !1;
    this.a2rely =
      this.a2relx =
      this.a2localy =
      this.a2localx =
      this.a1rely =
      this.a1relx =
      this.a1localy =
      this.a1localx =
        0;
  };
  l["zpp_nape.constraint.ZPP_WeldJoint"] = Gh;
  Gh.__name__ = ["zpp_nape", "constraint", "ZPP_WeldJoint"];
  Gh.__super__ = Qa;
  Gh.prototype = v(Qa.prototype, {
    outer_zn: null,
    bodyImpulse: function (a) {
      return this.stepped
        ? a == this.b1
          ? W.get(
              -this.jAccx,
              -this.jAccy,
              -(
                this.jAccy * this.a1relx -
                this.jAccx * this.a1rely +
                this.jAccz
              )
            )
          : W.get(
              this.jAccx,
              this.jAccy,
              this.jAccy * this.a2relx - this.jAccx * this.a2rely + this.jAccz
            )
        : W.get(0, 0, 0);
    },
    activeBodies: function () {
      null != this.b1 && this.b1.constraints.add(this);
      this.b2 != this.b1 && null != this.b2 && this.b2.constraints.add(this);
    },
    inactiveBodies: function () {
      null != this.b1 && this.b1.constraints.remove(this);
      this.b2 != this.b1 && null != this.b2 && this.b2.constraints.remove(this);
    },
    b1: null,
    a1localx: null,
    a1localy: null,
    a1relx: null,
    a1rely: null,
    validate_a1: function () {
      this.wrap_a1.zpp_inner.x = this.a1localx;
      this.wrap_a1.zpp_inner.y = this.a1localy;
    },
    invalidate_a1: function (a) {
      this.immutable_midstep("Constraint::a1");
      this.a1localx = a.x;
      this.a1localy = a.y;
      this.wake();
    },
    setup_a1: function () {
      this.wrap_a1 = w.get(this.a1localx, this.a1localy);
      this.wrap_a1.zpp_inner._inuse = !0;
      this.wrap_a1.zpp_inner._validate = m(this, this.validate_a1);
      this.wrap_a1.zpp_inner._invalidate = m(this, this.invalidate_a1);
    },
    wrap_a1: null,
    b2: null,
    a2localx: null,
    a2localy: null,
    a2relx: null,
    a2rely: null,
    validate_a2: function () {
      this.wrap_a2.zpp_inner.x = this.a2localx;
      this.wrap_a2.zpp_inner.y = this.a2localy;
    },
    invalidate_a2: function (a) {
      this.immutable_midstep("Constraint::a2");
      this.a2localx = a.x;
      this.a2localy = a.y;
      this.wake();
    },
    setup_a2: function () {
      this.wrap_a2 = w.get(this.a2localx, this.a2localy);
      this.wrap_a2.zpp_inner._inuse = !0;
      this.wrap_a2.zpp_inner._validate = m(this, this.validate_a2);
      this.wrap_a2.zpp_inner._invalidate = m(this, this.invalidate_a2);
    },
    wrap_a2: null,
    phase: null,
    kMassa: null,
    kMassb: null,
    kMassd: null,
    kMassc: null,
    kMasse: null,
    kMassf: null,
    jAccx: null,
    jAccy: null,
    jAccz: null,
    jMax: null,
    gamma: null,
    biasx: null,
    biasy: null,
    biasz: null,
    stepped: null,
    wake_connected: function () {
      null != this.b1 && this.b1.isDynamic() && this.b1.wake();
      null != this.b2 && this.b2.isDynamic() && this.b2.wake();
    },
    forest: function () {
      if (this.b1.isDynamic()) {
        if (this.b1.component == this.b1.component.parent)
          var a = this.b1.component;
        else {
          a = this.b1.component;
          for (var b = null; a != a.parent; ) {
            var c = a.parent;
            a.parent = b;
            b = a;
            a = c;
          }
          for (; null != b; ) (c = b.parent), (b.parent = a), (b = c);
        }
        if (this.component == this.component.parent) b = this.component;
        else {
          b = this.component;
          for (c = null; b != b.parent; ) {
            var d = b.parent;
            b.parent = c;
            c = b;
            b = d;
          }
          for (; null != c; ) (d = c.parent), (c.parent = b), (c = d);
        }
        a != b &&
          (a.rank < b.rank
            ? (a.parent = b)
            : a.rank > b.rank
            ? (b.parent = a)
            : ((b.parent = a), a.rank++));
      }
      if (this.b2.isDynamic()) {
        if (this.b2.component == this.b2.component.parent)
          a = this.b2.component;
        else {
          a = this.b2.component;
          for (b = null; a != a.parent; )
            (c = a.parent), (a.parent = b), (b = a), (a = c);
          for (; null != b; ) (c = b.parent), (b.parent = a), (b = c);
        }
        if (this.component == this.component.parent) b = this.component;
        else {
          b = this.component;
          for (c = null; b != b.parent; )
            (d = b.parent), (b.parent = c), (c = b), (b = d);
          for (; null != c; ) (d = c.parent), (c.parent = b), (c = d);
        }
        a != b &&
          (a.rank < b.rank
            ? (a.parent = b)
            : a.rank > b.rank
            ? (b.parent = a)
            : ((b.parent = a), a.rank++));
      }
    },
    pair_exists: function (a, b) {
      return this.b1.id != a || this.b2.id != b
        ? this.b1.id == b
          ? this.b2.id == a
          : !1
        : !0;
    },
    clearcache: function () {
      this.jAccz = this.jAccy = this.jAccx = 0;
      this.pre_dt = -1;
    },
    preStep: function (a) {
      -1 == this.pre_dt && (this.pre_dt = a);
      var b = a / this.pre_dt;
      this.pre_dt = a;
      this.stepped = !0;
      this.a1relx =
        this.b1.axisy * this.a1localx - this.b1.axisx * this.a1localy;
      this.a1rely =
        this.a1localx * this.b1.axisx + this.a1localy * this.b1.axisy;
      this.a2relx =
        this.b2.axisy * this.a2localx - this.b2.axisx * this.a2localy;
      this.a2rely =
        this.a2localx * this.b2.axisx + this.a2localy * this.b2.axisy;
      var c = this.b1.smass + this.b2.smass;
      this.kMassa = c;
      this.kMassb = 0;
      this.kMassd = c;
      this.kMassf = this.kMasse = this.kMassc = 0;
      if (0 != this.b1.sinertia) {
        c = this.a1relx * this.b1.sinertia;
        var d = this.a1rely * this.b1.sinertia;
        this.kMassa += d * this.a1rely;
        this.kMassb += -d * this.a1relx;
        this.kMassd += c * this.a1relx;
        this.kMassc += -d;
        this.kMasse += c;
        this.kMassf += this.b1.sinertia;
      }
      0 != this.b2.sinertia &&
        ((c = this.a2relx * this.b2.sinertia),
        (d = this.a2rely * this.b2.sinertia),
        (this.kMassa += d * this.a2rely),
        (this.kMassb += -d * this.a2relx),
        (this.kMassd += c * this.a2relx),
        (this.kMassc += -d),
        (this.kMasse += c),
        (this.kMassf += this.b2.sinertia));
      c =
        this.kMassa * (this.kMassd * this.kMassf - this.kMasse * this.kMasse) +
        this.kMassb * (this.kMassc * this.kMasse - this.kMassb * this.kMassf) +
        this.kMassc * (this.kMassb * this.kMasse - this.kMassc * this.kMassd);
      if (c != c)
        (this.kMassf =
          this.kMasse =
          this.kMassc =
          this.kMassd =
          this.kMassb =
          this.kMassa =
            0),
          (c = 7);
      else if (0 == c)
        (c = 0),
          0 != this.kMassa
            ? (this.kMassa = 1 / this.kMassa)
            : ((this.kMassa = 0), (c |= 1)),
          0 != this.kMassd
            ? (this.kMassd = 1 / this.kMassd)
            : ((this.kMassd = 0), (c |= 2)),
          0 != this.kMassf
            ? (this.kMassf = 1 / this.kMassf)
            : ((this.kMassf = 0), (c |= 4)),
          (this.kMassb = this.kMassc = this.kMasse = 0);
      else {
        c = 1 / c;
        d = c * (this.kMasse * this.kMassc - this.kMassb * this.kMassf);
        var e = c * (this.kMassa * this.kMassf - this.kMassc * this.kMassc),
          f = c * (this.kMassb * this.kMasse - this.kMassc * this.kMassd),
          g = c * (this.kMassb * this.kMassc - this.kMassa * this.kMasse),
          h = c * (this.kMassa * this.kMassd - this.kMassb * this.kMassb);
        this.kMassa =
          c * (this.kMassd * this.kMassf - this.kMasse * this.kMasse);
        this.kMassb = d;
        this.kMassd = e;
        this.kMassc = f;
        this.kMasse = g;
        this.kMassf = h;
        c = 0;
      }
      0 != (c & 1) && (this.jAccx = 0);
      0 != (c & 2) && (this.jAccy = 0);
      0 != (c & 4) && (this.jAccz = 0);
      if (this.stiff) this.gamma = this.biasz = this.biasy = this.biasx = 0;
      else {
        d = 2 * Math.PI * this.frequency;
        this.gamma = 1 / (a * d * (2 * this.damping + d * a));
        c = 1 / (1 + this.gamma);
        d = a * d * d * this.gamma;
        this.gamma *= c;
        this.kMassa *= c;
        this.kMassb *= c;
        this.kMassd *= c;
        this.kMassc *= c;
        this.kMasse *= c;
        this.kMassf *= c;
        this.biasx = this.b2.posx + this.a2relx - (this.b1.posx + this.a1relx);
        this.biasy = this.b2.posy + this.a2rely - (this.b1.posy + this.a1rely);
        this.biasz = this.b2.rot - this.b1.rot - this.phase;
        if (
          this.breakUnderError &&
          this.biasx * this.biasx +
            this.biasy * this.biasy +
            this.biasz * this.biasz >
            this.maxError * this.maxError
        )
          return !0;
        c = -d;
        this.biasx *= c;
        this.biasy *= c;
        this.biasz *= c;
        c = this.maxError;
        d =
          this.biasx * this.biasx +
          this.biasy * this.biasy +
          this.biasz * this.biasz;
        d > c * c &&
          ((c *= Fa.invsqrt(d)),
          (this.biasx *= c),
          (this.biasy *= c),
          (this.biasz *= c));
      }
      this.jAccx *= b;
      this.jAccy *= b;
      this.jAccz *= b;
      this.jMax = this.maxForce * a;
      return !1;
    },
    warmStart: function () {
      var a = this.b1.imass;
      this.b1.velx -= this.jAccx * a;
      this.b1.vely -= this.jAccy * a;
      a = this.b2.imass;
      this.b2.velx += this.jAccx * a;
      this.b2.vely += this.jAccy * a;
      this.b1.angvel -=
        (this.jAccy * this.a1relx - this.jAccx * this.a1rely + this.jAccz) *
        this.b1.iinertia;
      this.b2.angvel +=
        (this.jAccy * this.a2relx - this.jAccx * this.a2rely + this.jAccz) *
        this.b2.iinertia;
    },
    applyImpulseVel: function () {
      var a =
        this.b2.velx +
        this.b2.kinvelx -
        this.a2rely * (this.b2.angvel + this.b2.kinangvel) -
        (this.b1.velx +
          this.b1.kinvelx -
          this.a1rely * (this.b1.angvel + this.b1.kinangvel));
      var b =
        this.b2.vely +
        this.b2.kinvely +
        this.a2relx * (this.b2.angvel + this.b2.kinangvel) -
        (this.b1.vely +
          this.b1.kinvely +
          this.a1relx * (this.b1.angvel + this.b1.kinangvel));
      var c =
        this.b2.angvel + this.b2.kinangvel - this.b1.angvel - this.b1.kinangvel;
      a = this.biasx - a;
      b = this.biasy - b;
      c = this.biasz - c;
      var d = this.kMassa * a + this.kMassb * b + this.kMassc * c,
        e = this.kMassb * a + this.kMassd * b + this.kMasse * c;
      c = this.kMassc * a + this.kMasse * b + this.kMassf * c;
      var f = this.gamma;
      a = d - this.jAccx * f;
      b = e - this.jAccy * f;
      c -= this.jAccz * f;
      d = this.jAccx;
      e = this.jAccy;
      f = this.jAccz;
      this.jAccx += 1 * a;
      this.jAccy += 1 * b;
      this.jAccz += 1 * c;
      if (this.breakUnderForce) {
        if (
          this.jAccx * this.jAccx +
            this.jAccy * this.jAccy +
            this.jAccz * this.jAccz >
          this.jMax * this.jMax
        )
          return !0;
      } else
        this.stiff ||
          ((a = this.jMax),
          (b =
            this.jAccx * this.jAccx +
            this.jAccy * this.jAccy +
            this.jAccz * this.jAccz),
          b > a * a &&
            ((a *= Fa.invsqrt(b)),
            (this.jAccx *= a),
            (this.jAccy *= a),
            (this.jAccz *= a)));
      a = this.jAccx - d;
      b = this.jAccy - e;
      c = this.jAccz - f;
      d = this.b1.imass;
      this.b1.velx -= a * d;
      this.b1.vely -= b * d;
      d = this.b2.imass;
      this.b2.velx += a * d;
      this.b2.vely += b * d;
      this.b1.angvel -=
        (b * this.a1relx - a * this.a1rely + c) * this.b1.iinertia;
      this.b2.angvel +=
        (b * this.a2relx - a * this.a2rely + c) * this.b2.iinertia;
      return !1;
    },
    applyImpulsePos: function () {
      var a = this.b1.axisy * this.a1localx - this.b1.axisx * this.a1localy;
      var b = this.a1localx * this.b1.axisx + this.a1localy * this.b1.axisy;
      var c = this.b2.axisy * this.a2localx - this.b2.axisx * this.a2localy;
      var d = this.a2localx * this.b2.axisx + this.a2localy * this.b2.axisy;
      var e = this.b2.posx + c - (this.b1.posx + a);
      var f = this.b2.posy + d - (this.b1.posy + b);
      var g = this.b2.rot - this.b1.rot - this.phase;
      if (
        this.breakUnderError &&
        e * e + f * f + g * g > this.maxError * this.maxError
      )
        return !0;
      var h = !0;
      e * e + f * f < x.constraintLinearSlop * x.constraintLinearSlop &&
        ((h = !1), (f = e = 0));
      if (Fa.sqr(g) < Fa.sqr(x.constraintAngularSlop))
        if (h) g = 0;
        else return !1;
      e *= 0.5;
      f *= 0.5;
      g *= 0.5;
      6 < e * e + f * f &&
        ((h = this.b1.smass + this.b2.smass),
        h > x.epsilon &&
          ((h = 0.75 / h),
          (e = -e * h),
          (f = -f * h),
          (h = e * e + f * f),
          400 < h && ((h = 20 * Fa.invsqrt(h)), (e *= h), (f *= h)),
          (h = this.b1.imass),
          (this.b1.posx -= e * h),
          (this.b1.posy -= f * h),
          (h = this.b2.imass),
          (this.b2.posx += e * h),
          (this.b2.posy += f * h),
          (e = this.b2.posx + c - (this.b1.posx + a)),
          (f = this.b2.posy + d - (this.b1.posy + b)),
          (g = this.b2.rot - this.b1.rot - this.phase),
          (e *= 0.5),
          (f *= 0.5),
          (g *= 0.5)));
      var n, p, k, l;
      h = p = this.b1.smass + this.b2.smass;
      var m = (l = k = n = 0);
      if (0 != this.b1.sinertia) {
        var q = a * this.b1.sinertia,
          r = b * this.b1.sinertia;
        h += r * b;
        n += -r * a;
        p += q * a;
        k += -r;
        l += q;
        m += this.b1.sinertia;
      }
      0 != this.b2.sinertia &&
        ((q = c * this.b2.sinertia),
        (r = d * this.b2.sinertia),
        (h += r * d),
        (n += -r * c),
        (p += q * c),
        (k += -r),
        (l += q),
        (m += this.b2.sinertia));
      e = -e;
      f = -f;
      g = -g;
      q = e * e + f * f;
      36 < q && ((q = 6 * Fa.invsqrt(q)), (e *= q), (f *= q));
      Fa.clamp2(g, 0.25);
      q = h * (p * m - l * l) + n * (k * l - n * m) + k * (n * l - k * p);
      if (q != q) e = f = g = 0;
      else if (0 == q)
        (e = 0 != h ? e / h : 0),
          (f = 0 != p ? f / p : 0),
          (g = 0 != m ? g / m : 0);
      else {
        q = 1 / q;
        var t = l * k - n * m;
        r = n * l - k * p;
        var u = n * k - h * l;
        l = q * (e * (p * m - l * l) + f * t + g * r);
        k = q * (e * t + f * (h * m - k * k) + g * u);
        g = q * (e * r + f * u + g * (h * p - n * n));
        e = l;
        f = k;
      }
      h = this.b1.imass;
      this.b1.posx -= e * h;
      this.b1.posy -= f * h;
      h = this.b2.imass;
      this.b2.posx += e * h;
      this.b2.posy += f * h;
      this.b1.delta_rot(-(f * a - e * b + g) * this.b1.iinertia);
      this.b2.delta_rot((f * c - e * d + g) * this.b2.iinertia);
      return !1;
    },
    __class__: Gh,
  });
  var Ua = function () {
    this.colarb = this.fluidarb = this.sensorarb = null;
    this.type = 0;
    this.b1 = this.b2 = this.ws1 = this.ws2 = this.pair = null;
    this.invalidated = !1;
    this.immState = 0;
    this.intchange = this.presentable = this.continuous = this.fresh = !1;
    this.present = 0;
    this.active = this.cleared = this.sleeping = !1;
    this.id =
      this.di =
      this.stamp =
      this.up_stamp =
      this.sleep_stamp =
      this.endGenerated =
        0;
    this.outer = null;
  };
  l["zpp_nape.dynamics.ZPP_Arbiter"] = Ua;
  Ua.__name__ = ["zpp_nape", "dynamics", "ZPP_Arbiter"];
  Ua.prototype = {
    outer: null,
    wrapper: function () {
      null == this.outer &&
        ((Ua.internal = !0),
        this.type == Ua.COL
          ? ((this.colarb.outer_zn = new Hh()),
            (this.outer = this.colarb.outer_zn))
          : this.type == Ua.FLUID
          ? ((this.fluidarb.outer_zn = new Ih()),
            (this.outer = this.fluidarb.outer_zn))
          : (this.outer = new ef()),
        (this.outer.zpp_inner = this),
        (Ua.internal = !1));
      return this.outer;
    },
    id: null,
    di: null,
    stamp: null,
    up_stamp: null,
    sleep_stamp: null,
    endGenerated: null,
    active: null,
    cleared: null,
    sleeping: null,
    present: null,
    intchange: null,
    presentable: null,
    continuous: null,
    fresh: null,
    immState: null,
    acting: function () {
      return this.active ? 0 != (this.immState & 1) : !1;
    },
    invalidated: null,
    b1: null,
    b2: null,
    ws1: null,
    ws2: null,
    pair: null,
    type: null,
    colarb: null,
    fluidarb: null,
    sensorarb: null,
    lazyRetire: function (a, b) {
      this.cleared = !0;
      (null != b && this.b2 != b) || this.b1.arbiters.inlined_remove(this);
      (null != b && this.b1 != b) || this.b2.arbiters.inlined_remove(this);
      null != this.pair && (this.pair = this.pair.arb = null);
      this.active = !1;
      a.f_arbiters.modified = !0;
    },
    sup_assign: function (a, b, c, d) {
      this.b1 = a.body;
      this.ws1 = a;
      this.b2 = b.body;
      this.ws2 = b;
      this.id = c;
      this.di = d;
      this.b1.arbiters.inlined_add(this);
      this.b2.arbiters.inlined_add(this);
      this.active = !0;
      this.present = 0;
      this.presentable = this.fresh = this.sleeping = this.cleared = !1;
    },
    sup_retire: function () {
      this.cleared ||
        (this.b1.arbiters.inlined_remove(this),
        this.b2.arbiters.inlined_remove(this),
        null != this.pair && (this.pair = this.pair.arb = null));
      this.b1 = this.b2 = null;
      this.intchange = this.active = !1;
    },
    __class__: Ua,
  };
  var Lc = function () {
    this.next = null;
    Ua.call(this);
    this.type = Ua.SENSOR;
    this.sensorarb = this;
  };
  l["zpp_nape.dynamics.ZPP_SensorArbiter"] = Lc;
  Lc.__name__ = ["zpp_nape", "dynamics", "ZPP_SensorArbiter"];
  Lc.__super__ = Ua;
  Lc.prototype = v(Ua.prototype, {
    next: null,
    alloc: function () {},
    free: function () {},
    assign: function (a, b, c, d) {
      this.sup_assign(a, b, c, d);
    },
    retire: function () {
      this.sup_retire();
      this.free();
      this.next = Lc.zpp_pool;
      Lc.zpp_pool = this;
    },
    __class__: Lc,
  });
  var Yc = function () {
    this.wMass =
      this.adamp =
      this.agamma =
      this.vMassa =
      this.vMassb =
      this.vMassc =
      this.dampx =
      this.dampy =
      this.lgamma =
      this.nx =
      this.ny =
      this.buoyx =
      this.buoyy =
      this.pre_dt =
        0;
    this.nodrag = !1;
    this.centroidx =
      this.centroidy =
      this.overlap =
      this.r1x =
      this.r1y =
      this.r2x =
      this.r2y =
        0;
    this.outer_zn = this.next = null;
    Ua.call(this);
    this.type = Ua.FLUID;
    this.fluidarb = this;
    this.buoyy = this.buoyx = 0;
    this.pre_dt = -1;
  };
  l["zpp_nape.dynamics.ZPP_FluidArbiter"] = Yc;
  Yc.__name__ = ["zpp_nape", "dynamics", "ZPP_FluidArbiter"];
  Yc.__super__ = Ua;
  Yc.prototype = v(Ua.prototype, {
    outer_zn: null,
    next: null,
    alloc: function () {},
    free: function () {},
    centroidx: null,
    centroidy: null,
    overlap: null,
    r1x: null,
    r1y: null,
    r2x: null,
    r2y: null,
    nodrag: null,
    wMass: null,
    adamp: null,
    agamma: null,
    vMassa: null,
    vMassb: null,
    vMassc: null,
    dampx: null,
    dampy: null,
    lgamma: null,
    nx: null,
    ny: null,
    buoyx: null,
    buoyy: null,
    assign: function (a, b, c, d) {
      this.sup_assign(a, b, c, d);
      this.nx = 0;
      this.ny = 1;
      this.adamp = this.dampy = this.dampx = 0;
    },
    retire: function () {
      this.sup_retire();
      this.free();
      this.next = Yc.zpp_pool;
      Yc.zpp_pool = this;
      this.pre_dt = -1;
    },
    inject: function (a, b, c) {
      this.overlap = a;
      this.centroidx = b;
      this.centroidy = c;
    },
    pre_dt: null,
    preStep: function (a, b) {
      -1 == this.pre_dt && (this.pre_dt = b);
      var c = b / this.pre_dt;
      this.pre_dt = b;
      this.r1x = this.centroidx - this.b1.posx;
      this.r1y = this.centroidy - this.b1.posy;
      this.r2x = this.centroidx - this.b2.posx;
      this.r2y = this.centroidy - this.b2.posy;
      if (
        this.ws1.fluidEnabled &&
        null != this.ws1.fluidProperties.wrap_gravity
      ) {
        var d = this.ws1.fluidProperties.gravityx;
        var e = this.ws1.fluidProperties.gravityy;
      } else (d = a.gravityx), (e = a.gravityy);
      if (
        this.ws2.fluidEnabled &&
        null != this.ws2.fluidProperties.wrap_gravity
      ) {
        var f = this.ws2.fluidProperties.gravityx;
        var g = this.ws2.fluidProperties.gravityy;
      } else (f = a.gravityx), (g = a.gravityy);
      var h = (a = 0);
      if (this.ws1.fluidEnabled && this.ws2.fluidEnabled) {
        var n = this.overlap * this.ws1.fluidProperties.density,
          p = this.overlap * this.ws2.fluidProperties.density;
        n > p
          ? ((f = n + p), (a -= d * f), (h -= e * f))
          : n < p
          ? ((e = n + p), (a += f * e), (h += g * e))
          : ((d = 0.5 * (d + f)),
            (e = 0.5 * (e + g)),
            this.ws1.worldCOMx * d + this.ws1.worldCOMy * e >
            this.ws2.worldCOMx * d + this.ws2.worldCOMy * e
              ? ((f = n + p), (a -= d * f), (h -= e * f))
              : ((f = n + p), (a += d * f), (h += e * f)));
      } else
        this.ws1.fluidEnabled
          ? ((f = this.overlap * this.ws1.fluidProperties.density),
            (a -= d * f),
            (h -= e * f))
          : this.ws2.fluidEnabled &&
            ((e = this.overlap * this.ws2.fluidProperties.density),
            (a += f * e),
            (h += g * e));
      a *= b;
      h *= b;
      this.buoyx = a;
      this.buoyy = h;
      this.b1.isDynamic() &&
        ((e = this.b1.imass),
        (this.b1.velx -= a * e),
        (this.b1.vely -= h * e),
        (this.b1.angvel -= (h * this.r1x - a * this.r1y) * this.b1.iinertia));
      this.b2.isDynamic() &&
        ((e = this.b2.imass),
        (this.b2.velx += a * e),
        (this.b2.vely += h * e),
        (this.b2.angvel += (h * this.r2x - a * this.r2y) * this.b2.iinertia));
      if (
        (this.ws1.fluidEnabled && 0 != this.ws1.fluidProperties.viscosity) ||
        (this.ws2.fluidEnabled && 0 != this.ws2.fluidProperties.viscosity)
      ) {
        this.nodrag = !1;
        a = 0;
        this.ws1.fluidEnabled &&
          (this.ws2.validate_angDrag(),
          (a +=
            (this.ws1.fluidProperties.viscosity *
              this.ws2.angDrag *
              this.overlap) /
            this.ws2.area));
        this.ws2.fluidEnabled &&
          (this.ws1.validate_angDrag(),
          (a +=
            (this.ws2.fluidProperties.viscosity *
              this.ws1.angDrag *
              this.overlap) /
            this.ws1.area));
        0 != a
          ? ((h = this.b1.sinertia + this.b2.sinertia),
            (this.wMass = 0 != h ? 1 / h : 0),
            (a *= 8e-4 * Math.PI),
            (this.agamma = 1 / (b * a * (2 + a * b))),
            (a = 1 / (1 + this.agamma)),
            (this.agamma *= a),
            (this.wMass *= a))
          : (this.agamma = this.wMass = 0);
        a =
          this.b2.velx +
          this.b2.kinvelx -
          this.r2y * (this.b2.angvel + this.b2.kinangvel) -
          (this.b1.velx +
            this.b1.kinvelx -
            this.r1y * (this.b2.angvel + this.b2.kinangvel));
        h =
          this.b2.vely +
          this.b2.kinvely +
          this.r2x * (this.b2.angvel + this.b2.kinangvel) -
          (this.b1.vely +
            this.b1.kinvely +
            this.r1x * (this.b1.angvel + this.b1.kinangvel));
        a * a + h * h < x.epsilon * x.epsilon ||
          ((e = Fa.invsqrt(a * a + h * h)),
          (this.nx = a * e),
          (this.ny = h * e));
        a = 0;
        if (this.ws1.fluidEnabled)
          if (
            ((h =
              (-this.ws1.fluidProperties.viscosity * this.overlap) /
              this.ws2.area),
            0 == this.ws2.type)
          )
            a -=
              (h * this.ws2.circle.radius * x.fluidLinearDrag) /
              (2 * this.ws2.circle.radius * Math.PI);
          else {
            d = e = 0;
            for (f = this.ws2.polygon.edges.begin(); null != f; )
              (g = f.elem()),
                (e += g.length),
                (g = h * g.length * (g.gnormx * this.nx + g.gnormy * this.ny)),
                0 < g && (g *= -x.fluidVacuumDrag),
                (d -= 0.5 * g * x.fluidLinearDrag),
                (f = f.next);
            a += d / e;
          }
        if (this.ws2.fluidEnabled)
          if (
            ((h =
              (-this.ws2.fluidProperties.viscosity * this.overlap) /
              this.ws1.area),
            0 == this.ws1.type)
          )
            a -=
              (h * this.ws1.circle.radius * x.fluidLinearDrag) /
              (2 * this.ws1.circle.radius * Math.PI);
          else {
            d = e = 0;
            for (f = this.ws1.polygon.edges.begin(); null != f; )
              (g = f.elem()),
                (e += g.length),
                (g = h * g.length * (g.gnormx * this.nx + g.gnormy * this.ny)),
                0 < g && (g *= -x.fluidVacuumDrag),
                (d -= 0.5 * g * x.fluidLinearDrag),
                (f = f.next);
            a += d / e;
          }
        0 != a
          ? ((h = d = this.b1.smass + this.b2.smass),
            (e = 0),
            0 != this.b1.sinertia &&
              ((f = this.r1x * this.b1.sinertia),
              (g = this.r1y * this.b1.sinertia),
              (h += g * this.r1y),
              (e += -g * this.r1x),
              (d += f * this.r1x)),
            0 != this.b2.sinertia &&
              ((f = this.r2x * this.b2.sinertia),
              (g = this.r2y * this.b2.sinertia),
              (h += g * this.r2y),
              (e += -g * this.r2x),
              (d += f * this.r2x)),
            (f = h * d - e * e),
            f != f
              ? (h = e = d = 0)
              : 0 == f
              ? ((h = 0 != h ? 1 / h : 0), (d = 0 != d ? 1 / d : 0), (e = 0))
              : ((f = 1 / f), (g = d * f), (d = h * f), (h = g), (e *= -f)),
            (this.vMassa = h),
            (this.vMassb = e),
            (this.vMassc = d),
            (a *= 2 * Math.PI),
            (this.lgamma = 1 / (b * a * (2 + a * b))),
            (b = 1 / (1 + this.lgamma)),
            (this.lgamma *= b),
            (this.vMassa *= b),
            (this.vMassb *= b),
            (this.vMassc *= b))
          : (this.lgamma = this.vMassc = this.vMassb = this.vMassa = 0);
      } else (this.nodrag = !0), (this.adamp = this.dampy = this.dampx = 0);
      this.dampx *= c;
      this.dampy *= c;
      this.adamp *= c;
    },
    warmStart: function () {
      var a = this.b1.imass;
      this.b1.velx -= this.dampx * a;
      this.b1.vely -= this.dampy * a;
      a = this.b2.imass;
      this.b2.velx += this.dampx * a;
      this.b2.vely += this.dampy * a;
      this.b1.angvel -=
        this.b1.iinertia * (this.dampy * this.r1x - this.dampx * this.r1y);
      this.b2.angvel +=
        this.b2.iinertia * (this.dampy * this.r2x - this.dampx * this.r2y);
      this.b1.angvel -= this.adamp * this.b1.iinertia;
      this.b2.angvel += this.adamp * this.b2.iinertia;
    },
    applyImpulseVel: function () {
      if (!this.nodrag) {
        var a = this.b1.angvel + this.b1.kinangvel,
          b = this.b2.angvel + this.b2.kinangvel,
          c =
            this.b1.velx +
            this.b1.kinvelx -
            this.r1y * a -
            (this.b2.velx + this.b2.kinvelx - this.r2y * b),
          d =
            this.b1.vely +
            this.b1.kinvely +
            this.r1x * a -
            (this.b2.vely + this.b2.kinvely + this.r2x * b),
          e = this.vMassa * c + this.vMassb * d;
        d = this.vMassb * c + this.vMassc * d;
        var f = this.lgamma;
        c = e - this.dampx * f;
        d -= this.dampy * f;
        this.dampx += 1 * c;
        this.dampy += 1 * d;
        e = this.b1.imass;
        this.b1.velx -= c * e;
        this.b1.vely -= d * e;
        e = this.b2.imass;
        this.b2.velx += c * e;
        this.b2.vely += d * e;
        this.b1.angvel -= this.b1.iinertia * (d * this.r1x - c * this.r1y);
        this.b2.angvel += this.b2.iinertia * (d * this.r2x - c * this.r2y);
        a = (a - b) * this.wMass - this.adamp * this.agamma;
        this.adamp += a;
        this.b1.angvel -= a * this.b1.iinertia;
        this.b2.angvel += a * this.b2.iinertia;
      }
    },
    __class__: Yc,
  });
  var xc = function () {
    this.pre_dt = 0;
    this.stat = !1;
    this.next = null;
    this.hc2 = this.hpc2 = !1;
    this.c1 = this.oc1 = this.c2 = this.oc2 = null;
    this.__ref_vertex = 0;
    this.__ref_edge1 = this.__ref_edge2 = null;
    this.biasCoef = 0;
    this.rev = !1;
    this.nx =
      this.ny =
      this.kMassa =
      this.kMassb =
      this.kMassc =
      this.Ka =
      this.Kb =
      this.Kc =
      this.rMass =
      this.jrAcc =
      this.rn1a =
      this.rt1a =
      this.rn1b =
      this.rt1b =
      this.rn2a =
      this.rt2a =
      this.rn2b =
      this.rt2b =
      this.k1x =
      this.k1y =
      this.k2x =
      this.k2y =
      this.surfacex =
      this.surfacey =
      this.lnormx =
      this.lnormy =
      this.lproj =
      this.radius =
        0;
    this.s1 = this.s2 = this.contacts = this.innards = null;
    this.userdef_dyn_fric =
      this.userdef_stat_fric =
      this.userdef_restitution =
      this.userdef_rfric =
        !1;
    this.dyn_fric = this.stat_fric = this.restitution = this.rfric = 0;
    this.outer_zn = null;
    Ua.call(this);
    this.pre_dt = -1;
    this.contacts = new wc();
    this.innards = new ii();
    this.type = Ua.COL;
    this.colarb = this;
  };
  l["zpp_nape.dynamics.ZPP_ColArbiter"] = xc;
  xc.__name__ = ["zpp_nape", "dynamics", "ZPP_ColArbiter"];
  xc.__super__ = Ua;
  xc.prototype = v(Ua.prototype, {
    outer_zn: null,
    dyn_fric: null,
    stat_fric: null,
    restitution: null,
    rfric: null,
    userdef_dyn_fric: null,
    userdef_stat_fric: null,
    userdef_restitution: null,
    userdef_rfric: null,
    s1: null,
    s2: null,
    contacts: null,
    innards: null,
    nx: null,
    ny: null,
    kMassa: null,
    kMassb: null,
    kMassc: null,
    Ka: null,
    Kb: null,
    Kc: null,
    rMass: null,
    jrAcc: null,
    rn1a: null,
    rt1a: null,
    rn1b: null,
    rt1b: null,
    rn2a: null,
    rt2a: null,
    rn2b: null,
    rt2b: null,
    k1x: null,
    k1y: null,
    k2x: null,
    k2y: null,
    surfacex: null,
    surfacey: null,
    ptype: null,
    lnormx: null,
    lnormy: null,
    lproj: null,
    radius: null,
    rev: null,
    biasCoef: null,
    __ref_edge1: null,
    __ref_edge2: null,
    __ref_vertex: null,
    c1: null,
    oc1: null,
    c2: null,
    oc2: null,
    hc2: null,
    hpc2: null,
    next: null,
    alloc: function () {},
    free: function () {
      this.userdef_rfric =
        this.userdef_restitution =
        this.userdef_stat_fric =
        this.userdef_dyn_fric =
          !1;
      this.__ref_edge1 = this.__ref_edge2 = null;
    },
    stat: null,
    injectContact: function (a, b, c, d, e, f, g) {
      null == g && (g = !1);
      for (var h = null, n = this.contacts.begin(); null != n; ) {
        var p = n.elem();
        if (f == p.hash) {
          h = p;
          break;
        }
        n = n.next;
      }
      null == h
        ? (null == wc.zpp_pool
            ? (h = new wc())
            : ((h = wc.zpp_pool), (wc.zpp_pool = h.next), (h.next = null)),
          h.alloc(),
          (n = h.inner),
          (n.jnAcc = n.jtAcc = 0),
          (h.hash = f),
          (h.fresh = !0),
          (h.arbiter = this),
          (this.jrAcc = 0),
          this.contacts.inlined_add(h),
          this.innards.add(n))
        : (h.fresh = !1);
      h.px = a;
      h.py = b;
      this.nx = c;
      this.ny = d;
      h.dist = e;
      h.stamp = this.stamp;
      h.posOnly = g;
      return h;
    },
    assign: function (a, b, c, d) {
      this.sup_assign(a, b, c, d);
      this.s1 = a;
      this.s2 = b;
      this.calcProperties();
    },
    calcProperties: function () {
      this.userdef_restitution ||
        (this.s1.material.elasticity <= sb.NEGINF() ||
        this.s2.material.elasticity <= sb.NEGINF()
          ? (this.restitution = 0)
          : this.s1.material.elasticity >= sb.POSINF() ||
            this.s2.material.elasticity >= sb.POSINF()
          ? (this.restitution = 1)
          : (this.restitution =
              (this.s1.material.elasticity + this.s2.material.elasticity) / 2),
        0 > this.restitution && (this.restitution = 0),
        1 < this.restitution && (this.restitution = 1));
      this.userdef_dyn_fric ||
        (this.dyn_fric = Fa.sqrt(
          this.s1.material.dynamicFriction * this.s2.material.dynamicFriction
        ));
      this.userdef_stat_fric ||
        (this.stat_fric = Fa.sqrt(
          this.s1.material.staticFriction * this.s2.material.staticFriction
        ));
      this.userdef_rfric ||
        (this.rfric = Fa.sqrt(
          this.s1.material.rollingFriction * this.s2.material.rollingFriction
        ));
    },
    validate_props: function () {
      this.invalidated && ((this.invalidated = !1), this.calcProperties());
    },
    retire: function () {
      for (this.sup_retire(); !this.contacts.empty(); ) {
        var a = this.contacts.inlined_pop_unsafe();
        a.free();
        a.next = wc.zpp_pool;
        wc.zpp_pool = a;
        this.innards.inlined_pop();
      }
      this.free();
      this.next = xc.zpp_pool;
      xc.zpp_pool = this;
      this.pre_dt = -1;
    },
    cleanupContacts: function () {
      var a = !0,
        b = null,
        c = null,
        d = this.innards.begin();
      this.hc2 = !1;
      for (var e = this.contacts.begin(); null != e; ) {
        var f = e.elem();
        f.stamp + x.arbiterExpirationDelay < this.stamp
          ? ((e = this.contacts.inlined_erase(b)),
            (d = this.innards.inlined_erase(c)),
            f.free(),
            (f.next = wc.zpp_pool),
            (wc.zpp_pool = f))
          : ((b = f.inner),
            (c = f.active),
            (f.active = f.stamp == this.stamp),
            f.active &&
              (a
                ? ((a = !1), (this.c1 = b), (this.oc1 = f))
                : ((this.hc2 = !0), (this.c2 = b), (this.oc2 = f))),
            c != f.active && (this.contacts.modified = !0),
            (b = e),
            (c = d),
            (d = d.next),
            (e = e.next));
      }
      this.hc2
        ? ((this.hpc2 = !0),
          this.oc1.posOnly
            ? ((d = this.c1),
              (this.c1 = this.c2),
              (this.c2 = d),
              (d = this.oc1),
              (this.oc1 = this.oc2),
              (this.oc2 = d),
              (this.hc2 = !1))
            : this.oc2.posOnly && (this.hc2 = !1),
          this.oc1.posOnly && (a = !0))
        : (this.hpc2 = !1);
      return a;
    },
    pre_dt: null,
    preStep: function (a) {
      this.validate_props();
      -1 == this.pre_dt && (this.pre_dt = a);
      var b = a / this.pre_dt;
      this.pre_dt = a;
      var c = this.b1.smass + this.b2.smass;
      this.hc2 = !1;
      a = !0;
      this.biasCoef =
        this.b1.isDynamic() && this.b2.isDynamic()
          ? this.continuous
            ? x.contactContinuousBiasCoef
            : x.contactBiasCoef
          : this.continuous
          ? x.contactContinuousStaticBiasCoef
          : x.contactStaticBiasCoef;
      this.continuous = !1;
      for (
        var d = null,
          e = null,
          f = this.innards.begin(),
          g = this.contacts.begin();
        null != g;

      ) {
        var h = g.elem();
        if (h.stamp + x.arbiterExpirationDelay < this.stamp)
          (g = this.contacts.inlined_erase(d)),
            (f = this.innards.inlined_erase(e)),
            h.free(),
            (h.next = wc.zpp_pool),
            (wc.zpp_pool = h);
        else {
          d = h.inner;
          e = h.active;
          h.active = h.stamp == this.stamp;
          if (h.active) {
            a
              ? ((a = !1), (this.c1 = d), (this.oc1 = h))
              : ((this.hc2 = !0), (this.c2 = d), (this.oc2 = h));
            d.r2x = h.px - this.b2.posx;
            d.r2y = h.py - this.b2.posy;
            d.r1x = h.px - this.b1.posx;
            d.r1y = h.py - this.b1.posy;
            var n =
              c + this.b2.sinertia * Fa.sqr(d.r2x * this.nx + d.r2y * this.ny);
            n += this.b1.sinertia * Fa.sqr(d.r1x * this.nx + d.r1y * this.ny);
            d.tMass = n < x.epsilon * x.epsilon ? 0 : 1 / n;
            n =
              c + this.b2.sinertia * Fa.sqr(this.ny * d.r2x - this.nx * d.r2y);
            n += this.b1.sinertia * Fa.sqr(this.ny * d.r1x - this.nx * d.r1y);
            d.nMass = n < x.epsilon * x.epsilon ? 0 : 1 / n;
            var p = this.b2.angvel + this.b2.kinangvel;
            n = this.b2.velx + this.b2.kinvelx - d.r2y * p;
            var k = this.b2.vely + this.b2.kinvely + d.r2x * p;
            p = this.b1.angvel + this.b1.kinangvel;
            n -= this.b1.velx + this.b1.kinvelx - d.r1y * p;
            k -= this.b1.vely + this.b1.kinvely + d.r1x * p;
            p = this.nx * n + this.ny * k;
            h.elasticity = this.restitution;
            d.bounce = p * h.elasticity;
            d.bounce > -x.elasticThreshold && (d.bounce = 0);
            p = k * this.nx - n * this.ny;
            n = x.staticFrictionThreshold;
            d.friction = p * p > n * n ? this.dyn_fric : this.stat_fric;
            d.jnAcc *= b;
            d.jtAcc *= b;
          }
          e != h.active && (this.contacts.modified = !0);
          d = g;
          e = f;
          f = f.next;
          g = g.next;
        }
      }
      this.hc2
        ? ((this.hpc2 = !0),
          this.oc1.posOnly
            ? ((f = this.c1),
              (this.c1 = this.c2),
              (this.c2 = f),
              (f = this.oc1),
              (this.oc1 = this.oc2),
              (this.oc2 = f),
              (this.hc2 = !1))
            : this.oc2.posOnly && (this.hc2 = !1),
          this.oc1.posOnly && (a = !0))
        : (this.hpc2 = !1);
      this.jrAcc *= b;
      a ||
        ((this.rn1a = this.ny * this.c1.r1x - this.nx * this.c1.r1y),
        (this.rt1a = this.c1.r1x * this.nx + this.c1.r1y * this.ny),
        (this.rn1b = this.ny * this.c1.r2x - this.nx * this.c1.r2y),
        (this.rt1b = this.c1.r2x * this.nx + this.c1.r2y * this.ny),
        (this.k1x =
          this.b2.kinvelx -
          this.c1.r2y * this.b2.kinangvel -
          (this.b1.kinvelx - this.c1.r1y * this.b1.kinangvel)),
        (this.k1y =
          this.b2.kinvely +
          this.c1.r2x * this.b2.kinangvel -
          (this.b1.kinvely + this.c1.r1x * this.b1.kinangvel)));
      this.hc2 &&
        ((this.rn2a = this.ny * this.c2.r1x - this.nx * this.c2.r1y),
        (this.rt2a = this.c2.r1x * this.nx + this.c2.r1y * this.ny),
        (this.rn2b = this.ny * this.c2.r2x - this.nx * this.c2.r2y),
        (this.rt2b = this.c2.r2x * this.nx + this.c2.r2y * this.ny),
        (this.k2x =
          this.b2.kinvelx -
          this.c2.r2y * this.b2.kinangvel -
          (this.b1.kinvelx - this.c2.r1y * this.b1.kinangvel)),
        (this.k2y =
          this.b2.kinvely +
          this.c2.r2x * this.b2.kinangvel -
          (this.b1.kinvely + this.c2.r1x * this.b1.kinangvel)),
        (this.kMassa =
          c +
          this.b1.sinertia * this.rn1a * this.rn1a +
          this.b2.sinertia * this.rn1b * this.rn1b),
        (this.kMassb =
          c +
          this.b1.sinertia * this.rn1a * this.rn2a +
          this.b2.sinertia * this.rn1b * this.rn2b),
        (this.kMassc =
          c +
          this.b1.sinertia * this.rn2a * this.rn2a +
          this.b2.sinertia * this.rn2b * this.rn2b),
        this.kMassa * this.kMassa +
          2 * this.kMassb * this.kMassb +
          this.kMassc * this.kMassc <
        x.illConditionedThreshold *
          (this.kMassa * this.kMassc - this.kMassb * this.kMassb)
          ? ((this.Ka = this.kMassa),
            (this.Kb = this.kMassb),
            (this.Kc = this.kMassc),
            (b = this.kMassa * this.kMassc - this.kMassb * this.kMassb),
            b != b
              ? (this.kMassa = this.kMassb = this.kMassc = 0)
              : 0 == b
              ? ((this.kMassa = 0 != this.kMassa ? 1 / this.kMassa : 0),
                (this.kMassc = 0 != this.kMassc ? 1 / this.kMassc : 0),
                (this.kMassb = 0))
              : ((b = 1 / b),
                (c = this.kMassc * b),
                (this.kMassc = this.kMassa * b),
                (this.kMassa = c),
                (this.kMassb *= -b)))
          : ((this.hc2 = !1),
            this.oc2.dist < this.oc1.dist &&
              ((b = this.c1), (this.c1 = this.c2), (this.c2 = b)),
            (this.oc2.active = !1),
            (this.contacts.modified = !0)));
      this.surfacex = this.b2.svelx;
      this.surfacey = this.b2.svely;
      this.surfacex += 1 * this.b1.svelx;
      this.surfacey += 1 * this.b1.svely;
      this.surfacex = -this.surfacex;
      this.surfacey = -this.surfacey;
      this.rMass = this.b1.sinertia + this.b2.sinertia;
      0 != this.rMass && (this.rMass = 1 / this.rMass);
      return a;
    },
    warmStart: function () {
      var a = this.nx * this.c1.jnAcc - this.ny * this.c1.jtAcc,
        b = this.ny * this.c1.jnAcc + this.nx * this.c1.jtAcc,
        c = this.b1.imass;
      this.b1.velx -= a * c;
      this.b1.vely -= b * c;
      this.b1.angvel -= this.b1.iinertia * (b * this.c1.r1x - a * this.c1.r1y);
      c = this.b2.imass;
      this.b2.velx += a * c;
      this.b2.vely += b * c;
      this.b2.angvel += this.b2.iinertia * (b * this.c1.r2x - a * this.c1.r2y);
      this.hc2 &&
        ((a = this.nx * this.c2.jnAcc - this.ny * this.c2.jtAcc),
        (b = this.ny * this.c2.jnAcc + this.nx * this.c2.jtAcc),
        (c = this.b1.imass),
        (this.b1.velx -= a * c),
        (this.b1.vely -= b * c),
        (this.b1.angvel -=
          this.b1.iinertia * (b * this.c2.r1x - a * this.c2.r1y)),
        (c = this.b2.imass),
        (this.b2.velx += a * c),
        (this.b2.vely += b * c),
        (this.b2.angvel +=
          this.b2.iinertia * (b * this.c2.r2x - a * this.c2.r2y)));
      this.b2.angvel += this.jrAcc * this.b2.iinertia;
      this.b1.angvel -= this.jrAcc * this.b1.iinertia;
    },
    applyImpulseVel: function () {
      var a =
        this.k1x +
        this.b2.velx -
        this.c1.r2y * this.b2.angvel -
        (this.b1.velx - this.c1.r1y * this.b1.angvel);
      var b =
        this.k1y +
        this.b2.vely +
        this.c1.r2x * this.b2.angvel -
        (this.b1.vely + this.c1.r1x * this.b1.angvel);
      var c = (b * this.nx - a * this.ny + this.surfacex) * this.c1.tMass;
      a = this.c1.friction * this.c1.jnAcc;
      var d = this.c1.jtAcc;
      var e = d - c;
      e > a ? (e = a) : e < -a && (e = -a);
      c = e - d;
      this.c1.jtAcc = e;
      d = -this.ny * c;
      var f = this.nx * c;
      this.b2.velx += d * this.b2.imass;
      this.b2.vely += f * this.b2.imass;
      this.b1.velx -= d * this.b1.imass;
      this.b1.vely -= f * this.b1.imass;
      this.b2.angvel += this.rt1b * c * this.b2.iinertia;
      this.b1.angvel -= this.rt1a * c * this.b1.iinertia;
      this.hc2
        ? ((e =
            this.k2x +
            this.b2.velx -
            this.c2.r2y * this.b2.angvel -
            (this.b1.velx - this.c2.r1y * this.b1.angvel)),
          (f =
            this.k2y +
            this.b2.vely +
            this.c2.r2x * this.b2.angvel -
            (this.b1.vely + this.c2.r1x * this.b1.angvel)),
          (c = (f * this.nx - e * this.ny + this.surfacex) * this.c2.tMass),
          (a = this.c2.friction * this.c2.jnAcc),
          (d = this.c2.jtAcc),
          (e = d - c),
          e > a ? (e = a) : e < -a && (e = -a),
          (c = e - d),
          (this.c2.jtAcc = e),
          (d = -this.ny * c),
          (f = this.nx * c),
          (this.b2.velx += d * this.b2.imass),
          (this.b2.vely += f * this.b2.imass),
          (this.b1.velx -= d * this.b1.imass),
          (this.b1.vely -= f * this.b1.imass),
          (this.b2.angvel += this.rt2b * c * this.b2.iinertia),
          (this.b1.angvel -= this.rt2a * c * this.b1.iinertia),
          (a =
            this.k1x +
            this.b2.velx -
            this.c1.r2y * this.b2.angvel -
            (this.b1.velx - this.c1.r1y * this.b1.angvel)),
          (b =
            this.k1y +
            this.b2.vely +
            this.c1.r2x * this.b2.angvel -
            (this.b1.vely + this.c1.r1x * this.b1.angvel)),
          (e =
            this.k2x +
            this.b2.velx -
            this.c2.r2y * this.b2.angvel -
            (this.b1.velx - this.c2.r1y * this.b1.angvel)),
          (f =
            this.k2y +
            this.b2.vely +
            this.c2.r2x * this.b2.angvel -
            (this.b1.vely + this.c2.r1x * this.b1.angvel)),
          (c = this.c1.jnAcc),
          (d = this.c2.jnAcc),
          (a =
            a * this.nx +
            b * this.ny +
            this.surfacey +
            this.c1.bounce -
            (this.Ka * c + this.Kb * d)),
          (e =
            e * this.nx +
            f * this.ny +
            this.surfacey +
            this.c2.bounce -
            (this.Kb * c + this.Kc * d)),
          (f = -(this.kMassa * a + this.kMassb * e)),
          (b = -(this.kMassb * a + this.kMassc * e)),
          0 <= f && 0 <= b
            ? ((a = f - c),
              (e = b - d),
              (this.c1.jnAcc = f),
              (this.c2.jnAcc = b))
            : ((f = -this.c1.nMass * a),
              0 <= f && 0 <= this.Kb * f + e
                ? ((a = f - c),
                  (e = -d),
                  (this.c1.jnAcc = f),
                  (this.c2.jnAcc = 0))
                : ((b = -this.c2.nMass * e),
                  0 <= b && 0 <= this.Kb * b + a
                    ? ((a = -c),
                      (e = b - d),
                      (this.c1.jnAcc = 0),
                      (this.c2.jnAcc = b))
                    : 0 <= a && 0 <= e
                    ? ((a = -c), (e = -d), (this.c1.jnAcc = this.c2.jnAcc = 0))
                    : (e = a = 0))),
          (c = a + e),
          (d = this.nx * c),
          (f = this.ny * c),
          (this.b2.velx += d * this.b2.imass),
          (this.b2.vely += f * this.b2.imass),
          (this.b1.velx -= d * this.b1.imass),
          (this.b1.vely -= f * this.b1.imass),
          (this.b2.angvel +=
            (this.rn1b * a + this.rn2b * e) * this.b2.iinertia),
          (this.b1.angvel -=
            (this.rn1a * a + this.rn2a * e) * this.b1.iinertia))
        : (0 != this.radius &&
            ((c = (this.b2.angvel - this.b1.angvel) * this.rMass),
            (a = this.rfric * this.c1.jnAcc),
            (d = this.jrAcc),
            (this.jrAcc -= c),
            this.jrAcc > a
              ? (this.jrAcc = a)
              : this.jrAcc < -a && (this.jrAcc = -a),
            (c = this.jrAcc - d),
            (this.b2.angvel += c * this.b2.iinertia),
            (this.b1.angvel -= c * this.b1.iinertia)),
          (a =
            this.k1x +
            this.b2.velx -
            this.c1.r2y * this.b2.angvel -
            (this.b1.velx - this.c1.r1y * this.b1.angvel)),
          (b =
            this.k1y +
            this.b2.vely +
            this.c1.r2x * this.b2.angvel -
            (this.b1.vely + this.c1.r1x * this.b1.angvel)),
          (c =
            (this.c1.bounce + (this.nx * a + this.ny * b) + this.surfacey) *
            this.c1.nMass),
          (d = this.c1.jnAcc),
          (e = d - c),
          0 > e && (e = 0),
          (c = e - d),
          (this.c1.jnAcc = e),
          (d = this.nx * c),
          (f = this.ny * c),
          (this.b2.velx += d * this.b2.imass),
          (this.b2.vely += f * this.b2.imass),
          (this.b1.velx -= d * this.b1.imass),
          (this.b1.vely -= f * this.b1.imass),
          (this.b2.angvel += this.rn1b * c * this.b2.iinertia),
          (this.b1.angvel -= this.rn1a * c * this.b1.iinertia));
    },
    applyImpulsePos: function () {
      if (2 == this.ptype) {
        var a = this.c1;
        var b = this.b2.axisy * a.lr2x - this.b2.axisx * a.lr2y;
        var c = a.lr2x * this.b2.axisx + a.lr2y * this.b2.axisy;
        b += 1 * this.b2.posx;
        c += 1 * this.b2.posy;
        var d = this.b1.axisy * a.lr1x - this.b1.axisx * a.lr1y;
        var e = a.lr1x * this.b1.axisx + a.lr1y * this.b1.axisy;
        d += 1 * this.b1.posx;
        e += 1 * this.b1.posy;
        var f = b - d;
        a = c - e;
        var g = Fa.sqrt(f * f + a * a),
          h = this.radius - x.collisionSlop,
          n = g - h;
        0 > f * this.nx + a * this.ny &&
          ((f = -f), (a = -a), (n -= this.radius));
        0 > n &&
          (g < x.epsilon
            ? 0 != this.b1.smass
              ? (this.b1.posx += 10 * x.epsilon)
              : (this.b2.posx += 10 * x.epsilon)
            : ((n = 1 / g),
              (f *= n),
              (a *= n),
              (b = 0.5 * (d + b)),
              (c = 0.5 * (e + c)),
              (d = b - this.b1.posx),
              (e = c - this.b1.posy),
              (b -= this.b2.posx),
              (c -= this.b2.posy),
              (d = a * d - f * e),
              (b = a * b - f * c),
              (c =
                this.b2.smass +
                b * b * this.b2.sinertia +
                this.b1.smass +
                d * d * this.b1.sinertia),
              0 != c &&
                ((g = (-this.biasCoef * (g - h)) / c),
                (f *= g),
                (a *= g),
                (h = this.b1.imass),
                (this.b1.posx -= f * h),
                (this.b1.posy -= a * h),
                this.b1.delta_rot(-d * this.b1.iinertia * g),
                (h = this.b2.imass),
                (this.b2.posx += f * h),
                (this.b2.posy += a * h),
                this.b2.delta_rot(b * this.b2.iinertia * g))));
      } else {
        var p = 0;
        h = 0;
        0 == this.ptype
          ? ((f = this.b1.axisy * this.lnormx - this.b1.axisx * this.lnormy),
            (a = this.lnormx * this.b1.axisx + this.lnormy * this.b1.axisy),
            (d = this.lproj + (f * this.b1.posx + a * this.b1.posy)),
            (g = this.b2.axisy * this.c1.lr1x - this.b2.axisx * this.c1.lr1y),
            (n = this.c1.lr1x * this.b2.axisx + this.c1.lr1y * this.b2.axisy),
            (g += 1 * this.b2.posx),
            (n += 1 * this.b2.posy),
            this.hpc2 &&
              ((p =
                this.b2.axisy * this.c2.lr1x - this.b2.axisx * this.c2.lr1y),
              (h = this.c2.lr1x * this.b2.axisx + this.c2.lr1y * this.b2.axisy),
              (p += 1 * this.b2.posx),
              (h += 1 * this.b2.posy)))
          : ((f = this.b2.axisy * this.lnormx - this.b2.axisx * this.lnormy),
            (a = this.lnormx * this.b2.axisx + this.lnormy * this.b2.axisy),
            (d = this.lproj + (f * this.b2.posx + a * this.b2.posy)),
            (g = this.b1.axisy * this.c1.lr1x - this.b1.axisx * this.c1.lr1y),
            (n = this.c1.lr1x * this.b1.axisx + this.c1.lr1y * this.b1.axisy),
            (g += 1 * this.b1.posx),
            (n += 1 * this.b1.posy),
            this.hpc2 &&
              ((p =
                this.b1.axisy * this.c2.lr1x - this.b1.axisx * this.c2.lr1y),
              (h = this.c2.lr1x * this.b1.axisx + this.c2.lr1y * this.b1.axisy),
              (p += 1 * this.b1.posx),
              (h += 1 * this.b1.posy)));
        b = g * f + n * a - d - this.radius;
        b += x.collisionSlop;
        c = 0;
        this.hpc2 &&
          ((c = p * f + h * a - d - this.radius), (c += x.collisionSlop));
        if (0 > b || 0 > c)
          if (
            (this.rev && ((f = -f), (a = -a)),
            (d = g - this.b1.posx),
            (e = n - this.b1.posy),
            (g -= this.b2.posx),
            (n -= this.b2.posy),
            this.hpc2)
          ) {
            var k = p - this.b1.posx;
            var l = h - this.b1.posy;
            p -= this.b2.posx;
            var m = h - this.b2.posy;
            h = a * d - f * e;
            g = a * g - f * n;
            e = a * k - f * l;
            d = a * p - f * m;
            n = this.b1.smass + this.b2.smass;
            this.kMassa =
              n + this.b1.sinertia * h * h + this.b2.sinertia * g * g;
            this.kMassb =
              n + this.b1.sinertia * h * e + this.b2.sinertia * g * d;
            this.kMassc =
              n + this.b1.sinertia * e * e + this.b2.sinertia * d * d;
            l = this.kMassa;
            n = this.kMassb;
            k = this.kMassc;
            p = b * this.biasCoef;
            for (m = c * this.biasCoef; ; ) {
              b = p;
              c = m;
              b = -b;
              c = -c;
              var q = this.kMassa * this.kMassc - this.kMassb * this.kMassb;
              if (q != q) b = c = 0;
              else if (0 == q)
                (b = 0 != this.kMassa ? b / this.kMassa : 0),
                  (c = 0 != this.kMassc ? c / this.kMassc : 0);
              else {
                q = 1 / q;
                var r = q * (this.kMassc * b - this.kMassb * c);
                c = q * (this.kMassa * c - this.kMassb * b);
                b = r;
              }
              if (0 <= b && 0 <= c) {
                n = (b + c) * this.b1.imass;
                this.b1.posx -= f * n;
                this.b1.posy -= a * n;
                this.b1.delta_rot(-this.b1.iinertia * (h * b + e * c));
                h = (b + c) * this.b2.imass;
                this.b2.posx += f * h;
                this.b2.posy += a * h;
                this.b2.delta_rot(this.b2.iinertia * (g * b + d * c));
                break;
              }
              b = -p / l;
              c = 0;
              l = n * b + m;
              if (0 <= b && 0 <= l) {
                n = (b + c) * this.b1.imass;
                this.b1.posx -= f * n;
                this.b1.posy -= a * n;
                this.b1.delta_rot(-this.b1.iinertia * (h * b + e * c));
                h = (b + c) * this.b2.imass;
                this.b2.posx += f * h;
                this.b2.posy += a * h;
                this.b2.delta_rot(this.b2.iinertia * (g * b + d * c));
                break;
              }
              b = 0;
              c = -m / k;
              n = n * c + p;
              if (0 <= c && 0 <= n) {
                n = (b + c) * this.b1.imass;
                this.b1.posx -= f * n;
                this.b1.posy -= a * n;
                this.b1.delta_rot(-this.b1.iinertia * (h * b + e * c));
                h = (b + c) * this.b2.imass;
                this.b2.posx += f * h;
                this.b2.posy += a * h;
                this.b2.delta_rot(this.b2.iinertia * (g * b + d * c));
                break;
              }
              break;
            }
          } else
            (h = a * d - f * e),
              (g = a * g - f * n),
              (c =
                this.b2.smass +
                g * g * this.b2.sinertia +
                this.b1.smass +
                h * h * this.b1.sinertia),
              0 != c &&
                ((b = (-this.biasCoef * b) / c),
                (f *= b),
                (a *= b),
                (c = this.b1.imass),
                (this.b1.posx -= f * c),
                (this.b1.posy -= a * c),
                this.b1.delta_rot(-h * this.b1.iinertia * b),
                (h = this.b2.imass),
                (this.b2.posx += f * h),
                (this.b2.posy += a * h),
                this.b2.delta_rot(g * this.b2.iinertia * b));
      }
    },
    __class__: xc,
  });
  var wc = function () {
    this.length = 0;
    this._inuse = this.modified = this.pushmod = !1;
    this.next = null;
    this.dist = this.elasticity = 0;
    this.fresh = !1;
    this.stamp = this.hash = 0;
    this.active = this.posOnly = !1;
    this.arbiter = null;
    this.px = this.py = 0;
    this.outer = null;
    this.inner = new ii();
  };
  l["zpp_nape.dynamics.ZPP_Contact"] = wc;
  wc.__name__ = ["zpp_nape", "dynamics", "ZPP_Contact"];
  wc.prototype = {
    outer: null,
    wrapper: function () {
      null == this.outer &&
        ((this.outer = new sj()),
        (wc.internal = !1),
        (this.outer.zpp_inner = this));
      return this.outer;
    },
    px: null,
    py: null,
    arbiter: null,
    inner: null,
    active: null,
    posOnly: null,
    stamp: null,
    hash: null,
    fresh: null,
    dist: null,
    elasticity: null,
    free: function () {
      this.arbiter = null;
    },
    alloc: function () {},
    next: null,
    elem: function () {
      return this;
    },
    begin: function () {
      return this.next;
    },
    _inuse: null,
    modified: null,
    pushmod: null,
    length: null,
    inlined_add: function (a) {
      a._inuse = !0;
      a.next = this.begin();
      this.next = a;
      this.modified = !0;
      this.length++;
      return a;
    },
    pop: function () {
      this.inlined_pop();
    },
    inlined_pop: function () {
      var a = this.begin();
      this.next = a.next;
      a.elem()._inuse = !1;
      this.empty() && (this.pushmod = !0);
      this.modified = !0;
      this.length--;
    },
    inlined_pop_unsafe: function () {
      var a = this.front();
      this.pop();
      return a;
    },
    inlined_erase: function (a) {
      var b;
      if (null == a) {
        var c = this.begin();
        this.next = b = c.next;
        this.empty() && (this.pushmod = !0);
      } else
        (c = a.next),
          (b = c.next),
          (a.next = b),
          null == b && (this.pushmod = !0);
      c.elem()._inuse = !1;
      this.modified = !0;
      this.length--;
      this.pushmod = !0;
      return b;
    },
    empty: function () {
      return null == this.begin();
    },
    front: function () {
      return this.begin().elem();
    },
    __class__: wc,
  };
  var ii = function () {
    this.length = 0;
    this._inuse = this.modified = this.pushmod = !1;
    this.next = null;
    this.r1x =
      this.r1y =
      this.r2x =
      this.r2y =
      this.nMass =
      this.tMass =
      this.bounce =
      this.friction =
      this.jnAcc =
      this.jtAcc =
      this.lr1x =
      this.lr1y =
      this.lr2x =
      this.lr2y =
        0;
  };
  l["zpp_nape.dynamics.ZPP_IContact"] = ii;
  ii.__name__ = ["zpp_nape", "dynamics", "ZPP_IContact"];
  ii.prototype = {
    r1x: null,
    r1y: null,
    r2x: null,
    r2y: null,
    nMass: null,
    tMass: null,
    bounce: null,
    friction: null,
    jnAcc: null,
    jtAcc: null,
    lr1x: null,
    lr1y: null,
    lr2x: null,
    lr2y: null,
    next: null,
    elem: function () {
      return this;
    },
    begin: function () {
      return this.next;
    },
    _inuse: null,
    modified: null,
    pushmod: null,
    length: null,
    add: function (a) {
      return this.inlined_add(a);
    },
    inlined_add: function (a) {
      a._inuse = !0;
      a.next = this.begin();
      this.next = a;
      this.modified = !0;
      this.length++;
      return a;
    },
    inlined_pop: function () {
      var a = this.begin();
      this.next = a.next;
      a.elem()._inuse = !1;
      this.empty() && (this.pushmod = !0);
      this.modified = !0;
      this.length--;
    },
    inlined_erase: function (a) {
      var b;
      if (null == a) {
        var c = this.begin();
        this.next = b = c.next;
        this.empty() && (this.pushmod = !0);
      } else
        (c = a.next),
          (b = c.next),
          (a.next = b),
          null == b && (this.pushmod = !0);
      c.elem()._inuse = !1;
      this.modified = !0;
      this.length--;
      this.pushmod = !0;
      return b;
    },
    empty: function () {
      return null == this.begin();
    },
    __class__: ii,
  };
  var tj = function () {
    this.depth = 0;
    this.group = this.groups = this.interactors = null;
    this.ignore = !1;
    this.outer = null;
    this.depth = 0;
    this.groups = new ji();
    this.interactors = new ve();
  };
  l["zpp_nape.dynamics.ZPP_InteractionGroup"] = tj;
  tj.__name__ = ["zpp_nape", "dynamics", "ZPP_InteractionGroup"];
  tj.prototype = {
    outer: null,
    ignore: null,
    group: null,
    groups: null,
    interactors: null,
    depth: null,
    invalidate: function (a) {
      null == a && (a = !1);
      if (a || this.ignore) {
        for (var b = this.interactors.begin(); null != b; ) {
          var c = b.elem();
          c.isBody()
            ? c.ibody.wake()
            : c.isShape()
            ? c.ishape.body.wake()
            : c.icompound.wake();
          b = b.next;
        }
        for (b = this.groups.begin(); null != b; )
          b.elem().invalidate(a), (b = b.next);
      }
    },
    addInteractor: function (a) {
      this.interactors.add(a);
    },
    remInteractor: function (a, b) {
      this.interactors.remove(a);
    },
    __class__: tj,
  };
  var ok = function () {
    this.at_index_0 = this.at_index_1 = this.at_index_2 = this.at_index_3 = 0;
    this.lengths = this.ite_0 = this.ite_1 = this.ite_2 = this.ite_3 = null;
    this.zip_length = !1;
    this._length = 0;
    this.space = null;
    ag.call(this);
    this.at_index_3 = this.at_index_2 = this.at_index_1 = this.at_index_0 = 0;
    this.zip_length = !0;
    this._length = 0;
    this.lengths = [];
    for (var a = 0; 4 > a; ) a++, this.lengths.push(0);
  };
  l["zpp_nape.dynamics.ZPP_SpaceArbiterList"] = ok;
  ok.__name__ = ["zpp_nape", "dynamics", "ZPP_SpaceArbiterList"];
  ok.__super__ = ag;
  ok.prototype = v(ag.prototype, {
    space: null,
    _length: null,
    zip_length: null,
    zpp_gl: function () {
      this.zpp_vm();
      if (this.zip_length) {
        for (
          var a = (this._length = 0),
            b = 0,
            c = this.space.c_arbiters_true.begin();
          null != c;

        )
          c.elem().active && ++b, (c = c.next);
        this.lengths[a++] = b;
        this._length += b;
        b = 0;
        for (c = this.space.c_arbiters_false.begin(); null != c; )
          c.elem().active && ++b, (c = c.next);
        this.lengths[a++] = b;
        this._length += b;
        b = 0;
        for (c = this.space.f_arbiters.begin(); null != c; )
          c.elem().active && ++b, (c = c.next);
        this.lengths[a++] = b;
        this._length += b;
        b = 0;
        for (c = this.space.s_arbiters.begin(); null != c; )
          c.elem().active && ++b, (c = c.next);
        this.lengths[a++] = b;
        this._length += b;
        this.zip_length = !1;
      }
      return this._length;
    },
    lengths: null,
    ite_0: null,
    ite_1: null,
    ite_2: null,
    ite_3: null,
    at_index_0: null,
    at_index_1: null,
    at_index_2: null,
    at_index_3: null,
    zpp_vm: function () {
      var a = !1;
      this.space.c_arbiters_true.modified &&
        ((a = !0), (this.space.c_arbiters_true.modified = !1));
      this.space.c_arbiters_false.modified &&
        ((a = !0), (this.space.c_arbiters_false.modified = !1));
      this.space.f_arbiters.modified &&
        ((a = !0), (this.space.f_arbiters.modified = !1));
      this.space.s_arbiters.modified &&
        ((a = !0), (this.space.s_arbiters.modified = !1));
      a &&
        ((this.zip_length = !0),
        (this._length = 0),
        (this.ite_3 = this.ite_2 = this.ite_1 = this.ite_0 = null));
    },
    at: function (a) {
      this.zpp_vm();
      var b = null,
        c = 0;
      if (null == b)
        if (a < c + this.lengths[0]) {
          b = a - c;
          if (b < this.at_index_0 || null == this.ite_0)
            for (
              this.at_index_0 = 0,
                this.ite_0 = this.space.c_arbiters_true.begin();
              !this.ite_0.elem().active;

            )
              this.ite_0 = this.ite_0.next;
          for (; this.at_index_0 != b; )
            for (
              this.at_index_0++, this.ite_0 = this.ite_0.next;
              !this.ite_0.elem().active;

            )
              this.ite_0 = this.ite_0.next;
          b = this.ite_0.elem().wrapper();
        } else c += this.lengths[0];
      if (null == b)
        if (a < c + this.lengths[1]) {
          b = a - c;
          if (b < this.at_index_1 || null == this.ite_1)
            for (
              this.at_index_1 = 0,
                this.ite_1 = this.space.c_arbiters_false.begin();
              !this.ite_1.elem().active;

            )
              this.ite_1 = this.ite_1.next;
          for (; this.at_index_1 != b; )
            for (
              this.at_index_1++, this.ite_1 = this.ite_1.next;
              !this.ite_1.elem().active;

            )
              this.ite_1 = this.ite_1.next;
          b = this.ite_1.elem().wrapper();
        } else c += this.lengths[1];
      if (null == b)
        if (a < c + this.lengths[2]) {
          b = a - c;
          if (b < this.at_index_2 || null == this.ite_2)
            for (
              this.at_index_2 = 0, this.ite_2 = this.space.f_arbiters.begin();
              !this.ite_2.elem().active;

            )
              this.ite_2 = this.ite_2.next;
          for (; this.at_index_2 != b; )
            for (
              this.at_index_2++, this.ite_2 = this.ite_2.next;
              !this.ite_2.elem().active;

            )
              this.ite_2 = this.ite_2.next;
          b = this.ite_2.elem().wrapper();
        } else c += this.lengths[2];
      if (null == b && a < c + this.lengths[3]) {
        a -= c;
        if (a < this.at_index_3 || null == this.ite_3)
          for (
            this.at_index_3 = 0, this.ite_3 = this.space.s_arbiters.begin();
            !this.ite_3.elem().active;

          )
            this.ite_3 = this.ite_3.next;
        for (; this.at_index_3 != a; )
          for (
            this.at_index_3++, this.ite_3 = this.ite_3.next;
            !this.ite_3.elem().active;

          )
            this.ite_3 = this.ite_3.next;
        b = this.ite_3.elem().wrapper();
      }
      return b;
    },
    __class__: ok,
  });
  var jc = function () {
    this.wrap_max = null;
    this.maxx = this.maxy = 0;
    this.wrap_min = null;
    this.minx = this.miny = 0;
    this.outer = this.next = null;
    this._immutable = !1;
    this._invalidate = this._validate = null;
  };
  l["zpp_nape.geom.ZPP_AABB"] = jc;
  jc.__name__ = ["zpp_nape", "geom", "ZPP_AABB"];
  jc.get = function (a, b, c, d) {
    if (null == jc.zpp_pool) var e = new jc();
    else (e = jc.zpp_pool), (jc.zpp_pool = e.next), (e.next = null);
    e.alloc();
    e.minx = a;
    e.miny = b;
    e.maxx = c;
    e.maxy = d;
    return e;
  };
  jc.prototype = {
    _invalidate: null,
    _validate: null,
    _immutable: null,
    validate: function () {
      null != this._validate && this._validate();
    },
    outer: null,
    next: null,
    alloc: function () {},
    free: function () {
      null != this.outer && (this.outer = this.outer.zpp_inner = null);
      this._validate = this._invalidate = this.wrap_min = this.wrap_max = null;
    },
    width: function () {
      return this.maxx - this.minx;
    },
    height: function () {
      return this.maxy - this.miny;
    },
    perimeter: function () {
      return 2 * (this.width() + this.height());
    },
    minx: null,
    miny: null,
    wrap_min: null,
    maxx: null,
    maxy: null,
    wrap_max: null,
    intersectY: function (a) {
      return !(a.miny > this.maxy || this.miny > a.maxy);
    },
    intersect: function (a) {
      return a.miny <= this.maxy && this.miny <= a.maxy && a.minx <= this.maxx
        ? this.minx <= a.maxx
        : !1;
    },
    combine: function (a) {
      a.minx < this.minx && (this.minx = a.minx);
      a.maxx > this.maxx && (this.maxx = a.maxx);
      a.miny < this.miny && (this.miny = a.miny);
      a.maxy > this.maxy && (this.maxy = a.maxy);
    },
    contains: function (a) {
      return a.minx >= this.minx && a.miny >= this.miny && a.maxx <= this.maxx
        ? a.maxy <= this.maxy
        : !1;
    },
    setCombine: function (a, b) {
      this.minx = a.minx < b.minx ? a.minx : b.minx;
      this.miny = a.miny < b.miny ? a.miny : b.miny;
      this.maxx = a.maxx > b.maxx ? a.maxx : b.maxx;
      this.maxy = a.maxy > b.maxy ? a.maxy : b.maxy;
    },
    setExpand: function (a, b) {
      this.minx = a.minx - b;
      this.miny = a.miny - b;
      this.maxx = a.maxx + b;
      this.maxy = a.maxy + b;
    },
    toString: function () {
      return (
        "{ x: " +
        this.minx +
        " y: " +
        this.miny +
        " w: " +
        this.width() +
        " h: " +
        this.height() +
        " }"
      );
    },
    __class__: jc,
  };
  var Pg = function () {
    this.length = 0;
    this.modified = this.pushmod = !1;
    this.head = null;
  };
  l["zpp_nape.util.ZNPList_ZPP_Vec2"] = Pg;
  Pg.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Vec2"];
  Pg.prototype = {
    head: null,
    begin: function () {
      return this.head;
    },
    modified: null,
    pushmod: null,
    length: null,
    add: function (a) {
      return this.inlined_add(a);
    },
    inlined_add: function (a) {
      if (null == Zc.zpp_pool) var b = new Zc();
      else (b = Zc.zpp_pool), (Zc.zpp_pool = b.next), (b.next = null);
      b.alloc();
      b.elt = a;
      b.next = this.begin();
      this.head = b;
      this.modified = !0;
      this.length++;
      return a;
    },
    insert: function (a, b) {
      return this.inlined_insert(a, b);
    },
    inlined_insert: function (a, b) {
      if (null == Zc.zpp_pool) var c = new Zc();
      else (c = Zc.zpp_pool), (Zc.zpp_pool = c.next), (c.next = null);
      c.alloc();
      c.elt = b;
      b = c;
      null == a
        ? ((b.next = this.begin()), (this.head = b))
        : ((b.next = a.next), (a.next = b));
      this.pushmod = this.modified = !0;
      this.length++;
      return b;
    },
    pop: function () {
      this.inlined_pop();
    },
    inlined_pop: function () {
      var a = this.begin();
      this.head = a.next;
      a.free();
      a.next = Zc.zpp_pool;
      Zc.zpp_pool = a;
      this.empty() && (this.pushmod = !0);
      this.modified = !0;
      this.length--;
    },
    pop_unsafe: function () {
      return this.inlined_pop_unsafe();
    },
    inlined_pop_unsafe: function () {
      var a = this.front();
      this.pop();
      return a;
    },
    erase: function (a) {
      return this.inlined_erase(a);
    },
    inlined_erase: function (a) {
      var b;
      if (null == a) {
        var c = this.begin();
        this.head = b = c.next;
        this.empty() && (this.pushmod = !0);
      } else
        (c = a.next),
          (b = c.next),
          (a.next = b),
          null == b && (this.pushmod = !0);
      a = c;
      a.free();
      a.next = Zc.zpp_pool;
      Zc.zpp_pool = a;
      this.modified = !0;
      this.length--;
      this.pushmod = !0;
      return b;
    },
    clear: function () {
      this.inlined_clear();
    },
    inlined_clear: function () {
      for (; !this.empty(); ) this.inlined_pop();
      this.pushmod = !0;
    },
    empty: function () {
      return null == this.begin();
    },
    front: function () {
      return this.begin().elem();
    },
    iterator_at: function (a) {
      for (var b = this.begin(); 0 < a-- && null != b; ) b = b.next;
      return b;
    },
    __class__: Pg,
  };
  var V = function () {};
  l["zpp_nape.geom.ZPP_Collide"] = V;
  V.__name__ = ["zpp_nape", "geom", "ZPP_Collide"];
  V.contactCollide = function (a, b, c, d) {
    if (b.isPolygon())
      if (a.isPolygon()) {
        for (
          var e = !0,
            f = -1e100,
            g = -1,
            h = null,
            n = null,
            p = a.polygon.edges.begin();
          null != p;

        ) {
          for (
            var k = p.elem(), l = 1e100, m = b.polygon.gverts.begin();
            null != m;

          ) {
            var q = m.elem();
            q = k.gnormx * q.x + k.gnormy * q.y;
            q < l && (l = q);
            if (l - k.gprojection <= f) break;
            m = m.next;
          }
          l -= k.gprojection;
          if (0 <= l) {
            e = !1;
            break;
          }
          l > f && ((f = l), (h = k), (g = 1));
          p = p.next;
        }
        if (e) {
          for (p = b.polygon.edges.begin(); null != p; ) {
            k = p.elem();
            l = 1e100;
            for (m = a.polygon.gverts.begin(); null != m; ) {
              q = m.elem();
              q = k.gnormx * q.x + k.gnormy * q.y;
              q < l && (l = q);
              if (l - k.gprojection <= f) break;
              m = m.next;
            }
            l -= k.gprojection;
            if (0 <= l) {
              e = !1;
              break;
            }
            l > f && ((f = l), (n = k), (g = 2));
            p = p.next;
          }
          if (e) {
            1 == g
              ? ((a = b.polygon), (b = h), (n = 1))
              : ((a = a.polygon), (b = n), (n = -1));
            h = null;
            e = 1e100;
            for (f = a.edges.begin(); null != f; )
              (p = f.elem()),
                (k = b.gnormx * p.gnormx + b.gnormy * p.gnormy),
                k < e && ((e = k), (h = p)),
                (f = f.next);
            e = h.gp0.x;
            f = h.gp0.y;
            p = h.gp1.x;
            k = h.gp1.y;
            l = p - e;
            m = k - f;
            var r = b.gnormy * e - b.gnormx * f;
            q = b.gnormy * p - b.gnormx * k;
            var t = 1 / (q - r);
            r = (-b.tp1 - r) * t;
            r > x.epsilon && ((e += l * r), (f += m * r));
            q = (-b.tp0 - q) * t;
            q < -x.epsilon && ((p += l * q), (k += m * q));
            m = n;
            l = b.gnormx * m;
            m *= b.gnormy;
            c.lnormx = b.lnormx;
            c.lnormy = b.lnormy;
            c.lproj = b.lprojection;
            c.radius = 0;
            c.rev = d != (-1 == n);
            c.ptype = c.rev ? 1 : 0;
            q = e * b.gnormx + f * b.gnormy - b.gprojection;
            n = p * b.gnormx + k * b.gnormy - b.gprojection;
            if (0 < q && 0 < n) return !1;
            d && ((l = -l), (m = -m));
            d = c.injectContact(
              e - b.gnormx * q * 0.5,
              f - b.gnormy * q * 0.5,
              l,
              m,
              q,
              c.rev ? 1 : 0,
              0 < q
            );
            e -= 1 * a.body.posx;
            f -= 1 * a.body.posy;
            d.inner.lr1x = e * a.body.axisy + f * a.body.axisx;
            d.inner.lr1y = f * a.body.axisy - e * a.body.axisx;
            d = c.injectContact(
              p - b.gnormx * n * 0.5,
              k - b.gnormy * n * 0.5,
              l,
              m,
              n,
              c.rev ? 0 : 1,
              0 < n
            );
            p -= 1 * a.body.posx;
            k -= 1 * a.body.posy;
            d.inner.lr1x = p * a.body.axisy + k * a.body.axisx;
            d.inner.lr1y = k * a.body.axisy - p * a.body.axisx;
            1 == g
              ? ((c.__ref_edge1 = b), (c.__ref_edge2 = h))
              : ((c.__ref_edge2 = b), (c.__ref_edge1 = h));
            return !0;
          }
        }
      } else {
        h = -1e100;
        n = !0;
        e = g = null;
        f = b.polygon.gverts.begin();
        for (p = b.polygon.edges.begin(); null != p; ) {
          k = p.elem();
          l =
            k.gnormx * a.circle.worldCOMx +
            k.gnormy * a.circle.worldCOMy -
            k.gprojection -
            a.circle.radius;
          if (0 < l) {
            n = !1;
            break;
          }
          l > h && ((h = l), (g = k), (e = f));
          f = f.next;
          p = p.next;
        }
        if (n) {
          n = e.elem();
          e = null == e.next ? b.polygon.gverts.front() : e.next.elem();
          f = a.circle.worldCOMy * g.gnormx - a.circle.worldCOMx * g.gnormy;
          if (f <= n.y * g.gnormx - n.x * g.gnormy)
            return (
              (h = a.circle.radius),
              (e = n.x - a.circle.worldCOMx),
              (f = n.y - a.circle.worldCOMy),
              (p = e * e + f * f),
              p > h * h
                ? (h = null)
                : p < x.epsilon * x.epsilon
                ? (h = c.injectContact(
                    a.circle.worldCOMx,
                    a.circle.worldCOMy,
                    1,
                    0,
                    -h,
                    0
                  ))
                : ((p = Fa.invsqrt(p)),
                  (k = p < x.epsilon ? 1e100 : 1 / p),
                  (l = 0.5 + (a.circle.radius - 0.5 * h) * p),
                  (h = d
                    ? c.injectContact(
                        a.circle.worldCOMx + e * l,
                        a.circle.worldCOMy + f * l,
                        -e * p,
                        -f * p,
                        k - h,
                        0
                      )
                    : c.injectContact(
                        a.circle.worldCOMx + e * l,
                        a.circle.worldCOMy + f * l,
                        e * p,
                        f * p,
                        k - h,
                        0
                      ))),
              null != h &&
                ((e = h.inner),
                (c.ptype = 2),
                (f = n.x - b.polygon.body.posx),
                (n = n.y - b.polygon.body.posy),
                (c.__ref_edge1 = g),
                (c.__ref_vertex = -1),
                d
                  ? ((e.lr1x =
                      f * b.polygon.body.axisy + n * b.polygon.body.axisx),
                    (e.lr1y =
                      n * b.polygon.body.axisy - f * b.polygon.body.axisx),
                    (e.lr2x = a.circle.localCOMx),
                    (e.lr2y = a.circle.localCOMy))
                  : ((e.lr2x =
                      f * b.polygon.body.axisy + n * b.polygon.body.axisx),
                    (e.lr2y =
                      n * b.polygon.body.axisy - f * b.polygon.body.axisx),
                    (e.lr1x = a.circle.localCOMx),
                    (e.lr1y = a.circle.localCOMy)),
                (c.radius = a.circle.radius)),
              null != h
            );
          if (f >= e.y * g.gnormx - e.x * g.gnormy)
            return (
              (h = a.circle.radius),
              (n = e.x - a.circle.worldCOMx),
              (f = e.y - a.circle.worldCOMy),
              (p = n * n + f * f),
              p > h * h
                ? (h = null)
                : p < x.epsilon * x.epsilon
                ? (h = c.injectContact(
                    a.circle.worldCOMx,
                    a.circle.worldCOMy,
                    1,
                    0,
                    -h,
                    0
                  ))
                : ((p = Fa.invsqrt(p)),
                  (k = p < x.epsilon ? 1e100 : 1 / p),
                  (l = 0.5 + (a.circle.radius - 0.5 * h) * p),
                  (h = d
                    ? c.injectContact(
                        a.circle.worldCOMx + n * l,
                        a.circle.worldCOMy + f * l,
                        -n * p,
                        -f * p,
                        k - h,
                        0
                      )
                    : c.injectContact(
                        a.circle.worldCOMx + n * l,
                        a.circle.worldCOMy + f * l,
                        n * p,
                        f * p,
                        k - h,
                        0
                      ))),
              null != h &&
                ((n = h.inner),
                (c.ptype = 2),
                (f = e.x - b.polygon.body.posx),
                (e = e.y - b.polygon.body.posy),
                (c.__ref_edge1 = g),
                (c.__ref_vertex = 1),
                d
                  ? ((n.lr1x =
                      f * b.polygon.body.axisy + e * b.polygon.body.axisx),
                    (n.lr1y =
                      e * b.polygon.body.axisy - f * b.polygon.body.axisx),
                    (n.lr2x = a.circle.localCOMx),
                    (n.lr2y = a.circle.localCOMy))
                  : ((n.lr2x =
                      f * b.polygon.body.axisy + e * b.polygon.body.axisx),
                    (n.lr2y =
                      e * b.polygon.body.axisy - f * b.polygon.body.axisx),
                    (n.lr1x = a.circle.localCOMx),
                    (n.lr1y = a.circle.localCOMy)),
                (c.radius = a.circle.radius)),
              null != h
            );
          n = a.circle.radius + 0.5 * h;
          b = g.gnormx * n;
          n *= g.gnormy;
          b = a.circle.worldCOMx - b;
          n = a.circle.worldCOMy - n;
          b = d
            ? c.injectContact(b, n, g.gnormx, g.gnormy, h, 0)
            : c.injectContact(b, n, -g.gnormx, -g.gnormy, h, 0);
          c.ptype = d ? 0 : 1;
          c.lnormx = g.lnormx;
          c.lnormy = g.lnormy;
          c.rev = !d;
          c.lproj = g.lprojection;
          c.radius = a.circle.radius;
          b.inner.lr1x = a.circle.localCOMx;
          b.inner.lr1y = a.circle.localCOMy;
          c.__ref_edge1 = g;
          c.__ref_vertex = 0;
          return !0;
        }
      }
    else if (
      ((g = a.circle.radius + b.circle.radius),
      (h = b.circle.worldCOMx - a.circle.worldCOMx),
      (n = b.circle.worldCOMy - a.circle.worldCOMy),
      (e = h * h + n * n),
      e > g * g
        ? (g = null)
        : e < x.epsilon * x.epsilon
        ? (g = c.injectContact(
            a.circle.worldCOMx,
            a.circle.worldCOMy,
            1,
            0,
            -g,
            0
          ))
        : ((e = Fa.invsqrt(e)),
          (f = e < x.epsilon ? 1e100 : 1 / e),
          (p = 0.5 + (a.circle.radius - 0.5 * g) * e),
          (g = d
            ? c.injectContact(
                a.circle.worldCOMx + h * p,
                a.circle.worldCOMy + n * p,
                -h * e,
                -n * e,
                f - g,
                0
              )
            : c.injectContact(
                a.circle.worldCOMx + h * p,
                a.circle.worldCOMy + n * p,
                h * e,
                n * e,
                f - g,
                0
              ))),
      null != g)
    )
      return (
        (g = g.inner),
        d
          ? ((g.lr1x = b.circle.localCOMx),
            (g.lr1y = b.circle.localCOMy),
            (g.lr2x = a.circle.localCOMx),
            (g.lr2y = a.circle.localCOMy))
          : ((g.lr1x = a.circle.localCOMx),
            (g.lr1y = a.circle.localCOMy),
            (g.lr2x = b.circle.localCOMx),
            (g.lr2y = b.circle.localCOMy)),
        (c.radius = a.circle.radius + b.circle.radius),
        (c.ptype = 2),
        !0
      );
    return !1;
  };
  V.testCollide_safe = function (a, b) {
    if (b.isCircle()) {
      var c = a;
      a = b;
      b = c;
    }
    return V.testCollide(a, b);
  };
  V.testCollide = function (a, b) {
    if (b.isPolygon()) {
      if (a.isPolygon()) {
        for (var c = !0, d = a.polygon.edges.begin(); null != d; ) {
          for (
            var e = d.elem(), f = 1e100, g = b.polygon.gverts.begin();
            null != g;

          ) {
            var h = g.elem();
            h = e.gnormx * h.x + e.gnormy * h.y;
            h < f && (f = h);
            g = g.next;
          }
          f -= e.gprojection;
          if (0 < f) {
            c = !1;
            break;
          }
          d = d.next;
        }
        if (c) {
          for (b = b.polygon.edges.begin(); null != b; ) {
            d = b.elem();
            e = 1e100;
            for (f = a.polygon.gverts.begin(); null != f; )
              (g = f.elem()),
                (g = d.gnormx * g.x + d.gnormy * g.y),
                g < e && (e = g),
                (f = f.next);
            e -= d.gprojection;
            if (0 < e) {
              c = !1;
              break;
            }
            b = b.next;
          }
          return c;
        }
      } else {
        d = c = null;
        e = !0;
        f = -1e100;
        g = b.polygon.gverts.begin();
        for (h = b.polygon.edges.begin(); null != h; ) {
          var n = h.elem(),
            k =
              n.gnormx * a.circle.worldCOMx +
              n.gnormy * a.circle.worldCOMy -
              n.gprojection -
              a.circle.radius;
          if (0 < k) {
            e = !1;
            break;
          }
          k > f && ((f = k), (c = n), (d = g));
          g = g.next;
          h = h.next;
        }
        if (e)
          return (
            (e = d.elem()),
            (b = null == d.next ? b.polygon.gverts.front() : d.next.elem()),
            (d = a.circle.worldCOMy * c.gnormx - a.circle.worldCOMx * c.gnormy),
            d <= e.y * c.gnormx - e.x * c.gnormy
              ? ((b = a.circle.radius),
                (c = e.x - a.circle.worldCOMx),
                (a = e.y - a.circle.worldCOMy),
                c * c + a * a <= b * b)
              : d >= b.y * c.gnormx - b.x * c.gnormy
              ? ((c = a.circle.radius),
                (d = b.x - a.circle.worldCOMx),
                (a = b.y - a.circle.worldCOMy),
                d * d + a * a <= c * c)
              : !0
          );
      }
      return !1;
    }
    c = a.circle.radius + b.circle.radius;
    d = b.circle.worldCOMx - a.circle.worldCOMx;
    a = b.circle.worldCOMy - a.circle.worldCOMy;
    return d * d + a * a <= c * c;
  };
  V.flowCollide = function (a, b, c) {
    if (b.isPolygon()) {
      if (a.isPolygon()) {
        for (
          var d = [], e = [], f = !0, g = !0, h = a.polygon.edges.begin();
          null != h;

        ) {
          for (
            var n = h.elem(), k = 1e100, l = 0, m = b.polygon.gverts.begin();
            null != m;

          ) {
            var q = m.elem(),
              r = n.gnormx * q.x + n.gnormy * q.y;
            r < k && (k = r);
            r >= n.gprojection + x.epsilon && ((e[l] = !0), (g = !1));
            ++l;
            m = m.next;
          }
          k -= n.gprojection;
          if (0 < k) {
            f = !1;
            break;
          }
          h = h.next;
        }
        if (g)
          return (
            b.polygon.validate_worldCOM(),
            c.inject(b.polygon.area, b.polygon.worldCOMx, b.polygon.worldCOMy),
            !0
          );
        if (f) {
          g = !0;
          for (var t = b.polygon.edges.begin(); null != t; ) {
            for (
              var u = t.elem(), v = 1e100, w = 0, y = a.polygon.gverts.begin();
              null != y;

            ) {
              var z = y.elem(),
                A = u.gnormx * z.x + u.gnormy * z.y;
              A < v && (v = A);
              A >= u.gprojection + x.epsilon && ((d[w] = !0), (g = !1));
              ++w;
              y = y.next;
            }
            v -= u.gprojection;
            if (0 < v) {
              f = !1;
              break;
            }
            t = t.next;
          }
          if (g)
            return (
              a.polygon.validate_worldCOM(),
              c.inject(
                a.polygon.area,
                a.polygon.worldCOMx,
                a.polygon.worldCOMy
              ),
              !0
            );
          if (f) {
            for (; !V.flowpoly.empty(); ) {
              var C = V.flowpoly.pop_unsafe();
              if (!C._inuse) {
                var D = C;
                D.free();
                D.next = kb.zpp_pool;
                kb.zpp_pool = D;
              }
            }
            for (
              var B = null,
                H = !1,
                F = a.polygon.gverts.begin(),
                G = 0,
                I = b.polygon.gverts.begin(),
                J = 0,
                L = 0,
                M = b.polygon.edgeCnt;
              L < M;

            ) {
              var N = L++;
              if (e[N]) I = I.next;
              else {
                J = N;
                break;
              }
            }
            if (null == I) {
              I = b.polygon.gverts.begin();
              H = !0;
              for (var O = 0, S = a.polygon.edgeCnt; O < S; ) {
                var T = O++;
                if (d[T]) F = F.next;
                else {
                  G = T;
                  break;
                }
              }
              null == F
                ? (F = a.polygon.gverts.begin())
                : (V.flowpoly.add(F.elem()), (B = V.flowpoly.front()));
            } else V.flowpoly.add(I.elem()), (B = V.flowpoly.front());
            var U = 1;
            if (V.flowpoly.empty()) {
              for (
                var Q = !0,
                  Y = a.polygon.gverts.begin(),
                  P = Y.elem(),
                  W = Y.next;
                null != W;

              ) {
                for (
                  var X = W.elem(),
                    Z = 2,
                    ca = b.polygon.gverts.begin(),
                    ba = ca.elem(),
                    da = ca.next;
                  null != da;

                ) {
                  var fa = da.elem(),
                    ea = 0,
                    ia = 0,
                    na = 0;
                  ia = P.x - ba.x;
                  na = P.y - ba.y;
                  var oa = 0,
                    la = 0;
                  oa = X.x - P.x;
                  la = X.y - P.y;
                  var ha = 0,
                    pa = 0;
                  ha = fa.x - ba.x;
                  pa = fa.y - ba.y;
                  var ka = la * ha - oa * pa;
                  if (ka * ka > x.epsilon * x.epsilon) {
                    ka = 1 / ka;
                    var ra = (pa * ia - ha * na) * ka;
                    if (ra > x.epsilon && ra < 1 - x.epsilon) {
                      var ta = (la * ia - oa * na) * ka;
                      if (ta > x.epsilon && ta < 1 - x.epsilon) {
                        ea = ra;
                        var sa = !0;
                      } else sa = !1;
                    } else sa = !1;
                  } else sa = !1;
                  sa && ea < Z && ((Z = ea), (I = ca));
                  ca = da;
                  ba = fa;
                  da = da.next;
                }
                for (;;) {
                  da = b.polygon.gverts.begin();
                  var wa = da.elem(),
                    aa = 0,
                    qa = 0,
                    ya = 0;
                  qa = P.x - ba.x;
                  ya = P.y - ba.y;
                  var ua = 0,
                    Ca = 0;
                  ua = X.x - P.x;
                  Ca = X.y - P.y;
                  var ja = 0,
                    va = 0;
                  ja = wa.x - ba.x;
                  va = wa.y - ba.y;
                  var za = Ca * ja - ua * va;
                  if (za * za > x.epsilon * x.epsilon) {
                    za = 1 / za;
                    var xa = (va * qa - ja * ya) * za;
                    if (xa > x.epsilon && xa < 1 - x.epsilon) {
                      var Ja = (Ca * qa - ua * ya) * za;
                      if (Ja > x.epsilon && Ja < 1 - x.epsilon) {
                        aa = xa;
                        var Aa = !0;
                      } else Aa = !1;
                    } else Aa = !1;
                  } else Aa = !1;
                  Aa && aa < Z && ((Z = aa), (I = ca));
                  break;
                }
                if (2 != Z) {
                  var Ga = 0,
                    Ha = 0,
                    Ia = Z;
                  Ga = P.x + (X.x - P.x) * Ia;
                  Ha = P.y + (X.y - P.y) * Ia;
                  B = kb.get(Ga, Ha);
                  V.flowpoly.add(B);
                  H = !0;
                  F = Y;
                  Q = !1;
                  break;
                }
                Y = W;
                P = X;
                W = W.next;
              }
              if (Q)
                for (;;) {
                  W = a.polygon.gverts.begin();
                  for (
                    var Da = W.elem(),
                      Ea = 2,
                      Ka = b.polygon.gverts.begin(),
                      ma = Ka.elem(),
                      Ba = Ka.next;
                    null != Ba;

                  ) {
                    var La = Ba.elem(),
                      Na = 0,
                      Sa = 0,
                      Pa = 0;
                    Sa = P.x - ma.x;
                    Pa = P.y - ma.y;
                    var Ua = 0,
                      Qa = 0;
                    Ua = Da.x - P.x;
                    Qa = Da.y - P.y;
                    var Ra = 0,
                      Xa = 0;
                    Ra = La.x - ma.x;
                    Xa = La.y - ma.y;
                    var Ma = Qa * Ra - Ua * Xa;
                    if (Ma * Ma > x.epsilon * x.epsilon) {
                      Ma = 1 / Ma;
                      var Ta = (Xa * Sa - Ra * Pa) * Ma;
                      if (Ta > x.epsilon && Ta < 1 - x.epsilon) {
                        var gb = (Qa * Sa - Ua * Pa) * Ma;
                        if (gb > x.epsilon && gb < 1 - x.epsilon) {
                          Na = Ta;
                          var cb = !0;
                        } else cb = !1;
                      } else cb = !1;
                    } else cb = !1;
                    cb && Na < Ea && ((Ea = Na), (I = Ka));
                    Ka = Ba;
                    ma = La;
                    Ba = Ba.next;
                  }
                  for (;;) {
                    Ba = b.polygon.gverts.begin();
                    var ib = Ba.elem(),
                      eb = 0,
                      bb = 0,
                      hb = 0;
                    bb = P.x - ma.x;
                    hb = P.y - ma.y;
                    var lb = 0,
                      Va = 0;
                    lb = Da.x - P.x;
                    Va = Da.y - P.y;
                    var $a = 0,
                      ab = 0;
                    $a = ib.x - ma.x;
                    ab = ib.y - ma.y;
                    var jb = Va * $a - lb * ab;
                    if (jb * jb > x.epsilon * x.epsilon) {
                      jb = 1 / jb;
                      var ob = (ab * bb - $a * hb) * jb;
                      if (ob > x.epsilon && ob < 1 - x.epsilon) {
                        var rb = (Va * bb - lb * hb) * jb;
                        if (rb > x.epsilon && rb < 1 - x.epsilon) {
                          eb = ob;
                          var Za = !0;
                        } else Za = !1;
                      } else Za = !1;
                    } else Za = !1;
                    Za && eb < Ea && ((Ea = eb), (I = Ka));
                    break;
                  }
                  if (2 != Ea) {
                    var sb = 0,
                      pb = 0,
                      qb = Ea;
                    sb = P.x + (Da.x - P.x) * qb;
                    pb = P.y + (Da.y - P.y) * qb;
                    B = kb.get(sb, pb);
                    V.flowpoly.add(B);
                    H = !0;
                    F = Y;
                    break;
                  }
                  break;
                }
              U = 2;
            }
            for (;;)
              if (H)
                if (
                  ((F = F.next),
                  ++G,
                  null == F && ((F = a.polygon.gverts.begin()), (G = 0)),
                  d[G])
                ) {
                  var Wa = V.flowpoly.front(),
                    mb = F.elem(),
                    Oa = I.elem(),
                    nb = I.next;
                  null == nb && (nb = b.polygon.gverts.begin());
                  for (
                    var Ya = -1, db = null, tb = 0, zb = 0, wb = nb, fb = nb;
                    ;

                  ) {
                    var yb = fb.elem(),
                      vb = 0,
                      Ab = 0,
                      Cb = 0;
                    Ab = Oa.x - Wa.x;
                    Cb = Oa.y - Wa.y;
                    var Db = 0,
                      Eb = 0;
                    Db = yb.x - Oa.x;
                    Eb = yb.y - Oa.y;
                    var Fb = 0,
                      Hb = 0;
                    Fb = mb.x - Wa.x;
                    Hb = mb.y - Wa.y;
                    var xb = Eb * Fb - Db * Hb;
                    if (xb * xb > x.epsilon * x.epsilon) {
                      xb = 1 / xb;
                      var Ib = (Hb * Ab - Fb * Cb) * xb;
                      if (Ib > x.epsilon && Ib < 1 - x.epsilon) {
                        var Lb = (Eb * Ab - Db * Cb) * xb;
                        if (Lb > x.epsilon && Lb < 1 - x.epsilon) {
                          vb = Ib;
                          var Gb = !0;
                        } else Gb = !1;
                      } else Gb = !1;
                    } else Gb = !1;
                    if (Gb && vb >= Ya)
                      if (((db = I), (tb = J), ++zb == U)) {
                        Ya = vb;
                        fb = wb;
                        break;
                      } else Ya = vb;
                    Oa = yb;
                    I = fb;
                    ++J;
                    J >= b.polygon.edgeCnt && (J = 0);
                    fb = fb.next;
                    null == fb && (fb = b.polygon.gverts.begin());
                    break;
                  }
                  for (; fb != wb; ) {
                    var Kb = fb.elem(),
                      Jb = 0,
                      Mb = 0,
                      Nb = 0;
                    Mb = Oa.x - Wa.x;
                    Nb = Oa.y - Wa.y;
                    var Ob = 0,
                      Qb = 0;
                    Ob = Kb.x - Oa.x;
                    Qb = Kb.y - Oa.y;
                    var Rb = 0,
                      Tb = 0;
                    Rb = mb.x - Wa.x;
                    Tb = mb.y - Wa.y;
                    var Vb = Qb * Rb - Ob * Tb;
                    if (Vb * Vb > x.epsilon * x.epsilon) {
                      Vb = 1 / Vb;
                      var dc = (Tb * Mb - Rb * Nb) * Vb;
                      if (dc > x.epsilon && dc < 1 - x.epsilon) {
                        var mc = (Qb * Mb - Ob * Nb) * Vb;
                        if (mc > x.epsilon && mc < 1 - x.epsilon) {
                          Jb = dc;
                          var $b = !0;
                        } else $b = !1;
                      } else $b = !1;
                    } else $b = !1;
                    if ($b && Jb >= Ya)
                      if (((db = I), (tb = J), ++zb == U)) {
                        Ya = Jb;
                        fb = wb;
                        break;
                      } else Ya = Jb;
                    Oa = Kb;
                    I = fb;
                    ++J;
                    J >= b.polygon.edgeCnt && (J = 0);
                    fb = fb.next;
                    null == fb && (fb = b.polygon.gverts.begin());
                  }
                  if (null == db) break;
                  var ac = db.elem(),
                    hc = db.next;
                  null == hc && (hc = b.polygon.gverts.begin());
                  var pc = hc.elem(),
                    ic = 0,
                    jc = 0,
                    rc = Ya;
                  ic = ac.x + (pc.x - ac.x) * rc;
                  jc = ac.y + (pc.y - ac.y) * rc;
                  if (null != B && $c.vec_dsq(ic, jc, B.x, B.y) < x.epsilon)
                    break;
                  V.flowpoly.add(kb.get(ic, jc));
                  null == B && (B = V.flowpoly.front());
                  I = db;
                  J = tb;
                  H = !H;
                  U = 2;
                } else {
                  var nc = F.elem();
                  if (null != B && $c.vec_dsq(nc.x, nc.y, B.x, B.y) < x.epsilon)
                    break;
                  V.flowpoly.add(nc);
                  null == B && (B = V.flowpoly.front());
                  U = 1;
                }
              else if (
                ((I = I.next),
                ++J,
                null == I && ((I = b.polygon.gverts.begin()), (J = 0)),
                e[J])
              ) {
                var Ub = V.flowpoly.front(),
                  fc = I.elem(),
                  Sb = F.elem(),
                  gc = F.next;
                null == gc && (gc = a.polygon.gverts.begin());
                for (
                  var Wb = -1, Yb = null, qc = 0, Ic = 0, tc = gc, Bb = gc;
                  ;

                ) {
                  var wc = Bb.elem(),
                    oc = 0,
                    zc = 0,
                    Bc = 0;
                  zc = Sb.x - Ub.x;
                  Bc = Sb.y - Ub.y;
                  var Ec = 0,
                    Gc = 0;
                  Ec = wc.x - Sb.x;
                  Gc = wc.y - Sb.y;
                  var Hc = 0,
                    Jc = 0;
                  Hc = fc.x - Ub.x;
                  Jc = fc.y - Ub.y;
                  var cc = Gc * Hc - Ec * Jc;
                  if (cc * cc > x.epsilon * x.epsilon) {
                    cc = 1 / cc;
                    var Lc = (Jc * zc - Hc * Bc) * cc;
                    if (Lc > x.epsilon && Lc < 1 - x.epsilon) {
                      var Yc = (Gc * zc - Ec * Bc) * cc;
                      if (Yc > x.epsilon && Yc < 1 - x.epsilon) {
                        oc = Lc;
                        var xc = !0;
                      } else xc = !1;
                    } else xc = !1;
                  } else xc = !1;
                  if (xc && oc >= Wb)
                    if (((Yb = F), (qc = G), ++Ic == U)) {
                      Wb = oc;
                      Bb = tc;
                      break;
                    } else Wb = oc;
                  Sb = wc;
                  F = Bb;
                  ++G;
                  G >= a.polygon.edgeCnt && (G = 0);
                  Bb = Bb.next;
                  null == Bb && (Bb = a.polygon.gverts.begin());
                  break;
                }
                for (; Bb != tc; ) {
                  var Oc = Bb.elem(),
                    Dc = 0,
                    Rc = 0,
                    Sc = 0;
                  Rc = Sb.x - Ub.x;
                  Sc = Sb.y - Ub.y;
                  var Tc = 0,
                    Uc = 0;
                  Tc = Oc.x - Sb.x;
                  Uc = Oc.y - Sb.y;
                  var Vc = 0,
                    Xc = 0;
                  Vc = fc.x - Ub.x;
                  Xc = fc.y - Ub.y;
                  var lc = Uc * Vc - Tc * Xc;
                  if (lc * lc > x.epsilon * x.epsilon) {
                    lc = 1 / lc;
                    var Zc = (Xc * Rc - Vc * Sc) * lc;
                    if (Zc > x.epsilon && Zc < 1 - x.epsilon) {
                      var nd = (Uc * Rc - Tc * Sc) * lc;
                      if (nd > x.epsilon && nd < 1 - x.epsilon) {
                        Dc = Zc;
                        var Mc = !0;
                      } else Mc = !1;
                    } else Mc = !1;
                  } else Mc = !1;
                  if (Mc && Dc >= Wb)
                    if (((Yb = F), (qc = G), ++Ic == U)) {
                      Wb = Dc;
                      Bb = tc;
                      break;
                    } else Wb = Dc;
                  Sb = Oc;
                  F = Bb;
                  ++G;
                  G >= a.polygon.edgeCnt && (G = 0);
                  Bb = Bb.next;
                  null == Bb && (Bb = a.polygon.gverts.begin());
                }
                if (null == Yb) break;
                var Nc = Yb.elem(),
                  bd = Yb.next;
                null == bd && (bd = a.polygon.gverts.begin());
                var od = bd.elem(),
                  dd = 0,
                  ed = 0,
                  pd = Wb;
                dd = Nc.x + (od.x - Nc.x) * pd;
                ed = Nc.y + (od.y - Nc.y) * pd;
                if (null != B && $c.vec_dsq(dd, ed, B.x, B.y) < x.epsilon)
                  break;
                V.flowpoly.add(kb.get(dd, ed));
                null == B && (B = V.flowpoly.front());
                F = Yb;
                G = qc;
                H = !H;
                U = 2;
              } else {
                var fd = I.elem();
                if (null != B && $c.vec_dsq(fd.x, fd.y, B.x, B.y) < x.epsilon)
                  break;
                V.flowpoly.add(fd);
                null == B && (B = V.flowpoly.front());
                U = 1;
              }
            if (
              null != V.flowpoly.begin() &&
              null != V.flowpoly.begin().next &&
              null != V.flowpoly.begin().next.next
            ) {
              var kc = 0,
                sc = 0,
                vc = 0;
              kc = vc = sc = 0;
              var Pb = V.flowpoly.begin(),
                Kc = Pb.elem();
              Pb = Pb.next;
              var id = Pb.elem();
              for (Pb = Pb.next; null != Pb; ) {
                var yc = Pb.elem();
                kc += id.x * (yc.y - Kc.y);
                var zd = yc.y * id.x - yc.x * id.y;
                sc += (id.x + yc.x) * zd;
                vc += (id.y + yc.y) * zd;
                Kc = id;
                id = yc;
                Pb = Pb.next;
              }
              Pb = V.flowpoly.begin();
              var Cc = Pb.elem();
              kc += id.x * (Cc.y - Kc.y);
              var Dd = Cc.y * id.x - Cc.x * id.y;
              sc += (id.x + Cc.x) * Dd;
              vc += (id.y + Cc.y) * Dd;
              Kc = id;
              id = Cc;
              Pb = Pb.next;
              var Pc = Pb.elem();
              kc += id.x * (Pc.y - Kc.y);
              var Gd = Pc.y * id.x - Pc.x * id.y;
              sc += (id.x + Pc.x) * Gd;
              vc += (id.y + Pc.y) * Gd;
              kc *= 0.5;
              var Hd = 1 / (6 * kc);
              sc *= Hd;
              vc *= Hd;
              c.inject(-kc, sc, vc);
              return !0;
            }
          }
        }
        return !1;
      }
      for (
        var sd = [],
          Kd = !0,
          uc = null,
          md = null,
          Wd = -1e100,
          de = !0,
          Bd = b.polygon.gverts.begin(),
          ie = 0,
          qd = b.polygon.edges.begin();
        null != qd;

      ) {
        var Qc = qd.elem(),
          hd = Qc.gnormx * a.circle.worldCOMx + Qc.gnormy * a.circle.worldCOMy;
        if (hd > Qc.gprojection + a.circle.radius) {
          de = !1;
          break;
        } else
          hd + a.circle.radius > Qc.gprojection + x.epsilon &&
            ((Kd = !1), (sd[ie] = !0));
        hd -= Qc.gprojection + a.circle.radius;
        hd > Wd && ((Wd = hd), (uc = Qc), (md = Bd));
        Bd = Bd.next;
        ++ie;
        qd = qd.next;
      }
      if (de) {
        if (Kd)
          return (
            c.inject(a.circle.area, a.circle.worldCOMx, a.circle.worldCOMy), !0
          );
        var vd = md.elem(),
          wd = null == md.next ? b.polygon.gverts.front() : md.next.elem(),
          qe = a.circle.worldCOMy * uc.gnormx - a.circle.worldCOMx * uc.gnormy;
        if (qe <= vd.y * uc.gnormx - vd.x * uc.gnormy) {
          var te = a.circle.radius,
            Sd = 0,
            Vd = 0;
          Sd = vd.x - a.circle.worldCOMx;
          Vd = vd.y - a.circle.worldCOMy;
          var ee = Sd * Sd + Vd * Vd <= te * te;
        } else if (qe >= wd.y * uc.gnormx - wd.x * uc.gnormy) {
          var Ie = a.circle.radius,
            le = 0,
            me = 0;
          le = wd.x - a.circle.worldCOMx;
          me = wd.y - a.circle.worldCOMy;
          ee = le * le + me * me <= Ie * Ie;
        } else ee = !0;
        if (ee) {
          for (
            var Fd = [],
              ne = 0,
              Le = !0,
              xe = null,
              bc = 0,
              rd = b.polygon.gverts.begin();
            null != rd;

          ) {
            var Ne = rd.elem(),
              ff = $c.vec_dsq(
                Ne.x,
                Ne.y,
                a.circle.worldCOMx,
                a.circle.worldCOMy
              );
            (Fd[ne] = ff <= a.circle.radius * a.circle.radius)
              ? ((bc = ne), (xe = rd))
              : (Le = !1);
            ++ne;
            rd = rd.next;
          }
          if (Le)
            return (
              b.polygon.validate_worldCOM(),
              c.inject(
                b.polygon.area,
                b.polygon.worldCOMx,
                b.polygon.worldCOMy
              ),
              !0
            );
          for (; !V.flowpoly.empty(); ) {
            var Oe = V.flowpoly.pop_unsafe();
            if (!Oe._inuse) {
              var oe = Oe;
              oe.free();
              oe.next = kb.zpp_pool;
              kb.zpp_pool = oe;
            }
          }
          V.flowsegs.clear();
          var ad = null,
            Zb = 1;
          if (null == xe) (xe = b.polygon.gverts.begin()), (Zb = 2);
          else {
            var gf = V.flowpoly;
            ad = xe.elem();
            gf.add(ad);
          }
          for (; 0 != Zb; )
            if (1 == Zb)
              if (
                ((xe = xe.next),
                null == xe && (xe = b.polygon.gverts.begin()),
                ++bc,
                bc >= b.polygon.edgeCnt && (bc = 0),
                Fd[bc])
              ) {
                if (
                  $c.vec_dsq(ad.x, ad.y, xe.elem().x, xe.elem().y) < x.epsilon
                )
                  break;
                V.flowpoly.add(xe.elem());
              } else {
                var Fc = V.flowpoly.front(),
                  Id = xe.elem(),
                  Jd = 0,
                  Ld = 0;
                Jd = Id.x - Fc.x;
                Ld = Id.y - Fc.y;
                var Nd = 0,
                  Od = 0;
                Nd = Fc.x - a.circle.worldCOMx;
                Od = Fc.y - a.circle.worldCOMy;
                var ud = Jd * Jd + Ld * Ld,
                  Pd = 2 * (Nd * Jd + Od * Ld),
                  Qe = Math.sqrt(
                    Pd * Pd -
                      4 *
                        ud *
                        (Nd * Nd + Od * Od - a.circle.radius * a.circle.radius)
                  );
                ud = 1 / (2 * ud);
                var Re = (-Pd - Qe) * ud,
                  ve = 0,
                  we = 0,
                  Te = Re < x.epsilon ? (-Pd + Qe) * ud : Re;
                ve = Fc.x + (Id.x - Fc.x) * Te;
                we = Fc.y + (Id.y - Fc.y) * Te;
                if ($c.vec_dsq(ad.x, ad.y, ve, we) < x.epsilon) break;
                V.flowpoly.add(kb.get(ve, we));
                Zb = 2;
              }
            else if (2 == Zb) {
              var Td = xe.next;
              null == Td && (Td = b.polygon.gverts.begin());
              var ub = xe.elem();
              Zb = 0;
              for (var Wc = Td, jd = Td; ; ) {
                var ec = jd.elem(),
                  Xd = bc + 1;
                Xd == b.polygon.edgeCnt && (Xd = 0);
                if (sd[bc])
                  if (Fd[Xd]) {
                    var Yd = 0,
                      Zd = 0;
                    Yd = ec.x - ub.x;
                    Zd = ec.y - ub.y;
                    var $d = 0,
                      ae = 0;
                    $d = ub.x - a.circle.worldCOMx;
                    ae = ub.y - a.circle.worldCOMy;
                    var yd = Yd * Yd + Zd * Zd,
                      be = 2 * ($d * Yd + ae * Zd),
                      $e = Math.sqrt(
                        be * be -
                          4 *
                            yd *
                            ($d * $d +
                              ae * ae -
                              a.circle.radius * a.circle.radius)
                      );
                    yd = 1 / (2 * yd);
                    var af = (-be - $e) * yd,
                      Be = 0,
                      Ce = 0,
                      cf = af < x.epsilon ? (-be + $e) * yd : af;
                    Be = ub.x + (ec.x - ub.x) * cf;
                    Ce = ub.y + (ec.y - ub.y) * cf;
                    if ($c.vec_dsq(ad.x, ad.y, Be, Ce) < x.epsilon) {
                      Zb = 0;
                      jd = Wc;
                      break;
                    }
                    var df = kb.get(Be, Ce);
                    V.flowsegs.add(V.flowpoly.front());
                    V.flowsegs.add(df);
                    V.flowpoly.add(df);
                    Zb = 1;
                    jd = Wc;
                    break;
                  } else {
                    var Ed = 0,
                      ge = 0,
                      he = 0,
                      je = 0;
                    he = ec.x - ub.x;
                    je = ec.y - ub.y;
                    var ke = 0,
                      pe = 0;
                    ke = ub.x - a.circle.worldCOMx;
                    pe = ub.y - a.circle.worldCOMy;
                    var td = he * he + je * je,
                      Md = 2 * (ke * he + pe * je),
                      gd =
                        Md * Md -
                        4 *
                          td *
                          (ke * ke +
                            pe * pe -
                            a.circle.radius * a.circle.radius);
                    if (gd * gd < x.epsilon) {
                      Ed = 0 > gd ? 10 : (ge = -Md / (2 * td));
                      var of = !1;
                    } else
                      (gd = Math.sqrt(gd)),
                        (td = 1 / (2 * td)),
                        (Ed = (-Md - gd) * td),
                        (ge = (-Md + gd) * td),
                        (of = !0);
                    if (Ed < 1 - x.epsilon && ge > x.epsilon) {
                      var Pe = 0,
                        Se = 0,
                        qf = Ed;
                      Pe = ub.x + (ec.x - ub.x) * qf;
                      Se = ub.y + (ec.y - ub.y) * qf;
                      if (
                        null != ad &&
                        $c.vec_dsq(ad.x, ad.y, Pe, Se) < x.epsilon
                      ) {
                        Zb = 0;
                        jd = Wc;
                        break;
                      }
                      var rf = kb.get(Pe, Se);
                      V.flowpoly.empty() ||
                        (V.flowsegs.add(V.flowpoly.front()),
                        V.flowsegs.add(rf));
                      V.flowpoly.add(rf);
                      null == ad && (ad = V.flowpoly.front());
                      if (of) {
                        var sf = 0,
                          tf = 0,
                          uf = ge;
                        sf = ub.x + (ec.x - ub.x) * uf;
                        tf = ub.y + (ec.y - ub.y) * uf;
                        V.flowpoly.add(kb.get(sf, tf));
                      }
                    }
                  }
                ub = ec;
                xe = jd;
                bc = Xd;
                jd = jd.next;
                null == jd && (jd = b.polygon.gverts.begin());
                break;
              }
              for (; jd != Wc; ) {
                var jg = jd.elem(),
                  De = bc + 1;
                De == b.polygon.edgeCnt && (De = 0);
                if (sd[bc])
                  if (Fd[De]) {
                    var Ee = 0,
                      Fe = 0;
                    Ee = jg.x - ub.x;
                    Fe = jg.y - ub.y;
                    var Ge = 0,
                      He = 0;
                    Ge = ub.x - a.circle.worldCOMx;
                    He = ub.y - a.circle.worldCOMy;
                    var fe = Ee * Ee + Fe * Fe,
                      Ke = 2 * (Ge * Ee + He * Fe),
                      zf = Math.sqrt(
                        Ke * Ke -
                          4 *
                            fe *
                            (Ge * Ge +
                              He * He -
                              a.circle.radius * a.circle.radius)
                      );
                    fe = 1 / (2 * fe);
                    var Bf = (-Ke - zf) * fe,
                      hf = 0,
                      jf = 0,
                      Ef = Bf < x.epsilon ? (-Ke + zf) * fe : Bf;
                    hf = ub.x + (jg.x - ub.x) * Ef;
                    jf = ub.y + (jg.y - ub.y) * Ef;
                    if ($c.vec_dsq(ad.x, ad.y, hf, jf) < x.epsilon) {
                      Zb = 0;
                      jd = Wc;
                      break;
                    }
                    var Ff = kb.get(hf, jf);
                    V.flowsegs.add(V.flowpoly.front());
                    V.flowsegs.add(Ff);
                    V.flowpoly.add(Ff);
                    Zb = 1;
                    jd = Wc;
                    break;
                  } else {
                    var ue = 0,
                      Ve = 0,
                      We = 0,
                      Xe = 0;
                    We = jg.x - ub.x;
                    Xe = jg.y - ub.y;
                    var Ye = 0,
                      Ze = 0;
                    Ye = ub.x - a.circle.worldCOMx;
                    Ze = ub.y - a.circle.worldCOMy;
                    var ce = We * We + Xe * Xe,
                      Ae = 2 * (Ye * We + Ze * Xe),
                      Ad =
                        Ae * Ae -
                        4 *
                          ce *
                          (Ye * Ye +
                            Ze * Ze -
                            a.circle.radius * a.circle.radius);
                    if (Ad * Ad < x.epsilon) {
                      ue = 0 > Ad ? 10 : (Ve = -Ae / (2 * ce));
                      var Lf = !1;
                    } else
                      (Ad = Math.sqrt(Ad)),
                        (ce = 1 / (2 * ce)),
                        (ue = (-Ae - Ad) * ce),
                        (Ve = (-Ae + Ad) * ce),
                        (Lf = !0);
                    if (ue < 1 - x.epsilon && Ve > x.epsilon) {
                      var vf = 0,
                        wf = 0,
                        Mf = ue;
                      vf = ub.x + (jg.x - ub.x) * Mf;
                      wf = ub.y + (jg.y - ub.y) * Mf;
                      if (
                        null != ad &&
                        $c.vec_dsq(ad.x, ad.y, vf, wf) < x.epsilon
                      ) {
                        Zb = 0;
                        jd = Wc;
                        break;
                      }
                      var Nf = kb.get(vf, wf);
                      V.flowpoly.empty() ||
                        (V.flowsegs.add(V.flowpoly.front()),
                        V.flowsegs.add(Nf));
                      V.flowpoly.add(Nf);
                      null == ad && (ad = V.flowpoly.front());
                      if (Lf) {
                        var Pf = 0,
                          Rf = 0,
                          Sf = Ve;
                        Pf = ub.x + (jg.x - ub.x) * Sf;
                        Rf = ub.y + (jg.y - ub.y) * Sf;
                        V.flowpoly.add(kb.get(Pf, Rf));
                      }
                    }
                  }
                ub = jg;
                xe = jd;
                bc = De;
                jd = jd.next;
                null == jd && (jd = b.polygon.gverts.begin());
              }
            }
          if (null == V.flowpoly.begin()) return !1;
          if (null == V.flowpoly.begin().next) {
            for (var Tf = !0, ef = b.polygon.edges.begin(); null != ef; ) {
              var Af = ef.elem();
              if (
                Af.gnormx * a.circle.worldCOMx +
                  Af.gnormy * a.circle.worldCOMy >
                Af.gprojection
              ) {
                Tf = !1;
                break;
              }
              ef = ef.next;
            }
            return Tf
              ? (c.inject(
                  a.circle.area,
                  a.circle.worldCOMx,
                  a.circle.worldCOMy
                ),
                !0)
              : !1;
          }
          var lf = 0,
            mf = 0,
            nf = 0;
          if (null != V.flowpoly.begin().next.next) {
            var xd = 0,
              ye = 0,
              ze = 0;
            xd = ze = ye = 0;
            var Ue = V.flowpoly.begin(),
              bf = Ue.elem();
            Ue = Ue.next;
            var kd = Ue.elem();
            for (Ue = Ue.next; null != Ue; ) {
              var Je = Ue.elem();
              xd += kd.x * (Je.y - bf.y);
              var $f = Je.y * kd.x - Je.x * kd.y;
              ye += (kd.x + Je.x) * $f;
              ze += (kd.y + Je.y) * $f;
              bf = kd;
              kd = Je;
              Ue = Ue.next;
            }
            Ue = V.flowpoly.begin();
            var Me = Ue.elem();
            xd += kd.x * (Me.y - bf.y);
            var ag = Me.y * kd.x - Me.x * kd.y;
            ye += (kd.x + Me.x) * ag;
            ze += (kd.y + Me.y) * ag;
            bf = kd;
            kd = Me;
            Ue = Ue.next;
            var kf = Ue.elem();
            xd += kd.x * (kf.y - bf.y);
            var bg = kf.y * kd.x - kf.x * kd.y;
            ye += (kd.x + kf.x) * bg;
            ze += (kd.y + kf.y) * bg;
            xd *= 0.5;
            var cg = 1 / (6 * xd);
            ye *= cg;
            ze *= cg;
            var dg = -xd;
            lf += ye * dg;
            mf += ze * dg;
            nf -= xd;
          } else
            V.flowsegs.add(V.flowpoly.front()),
              V.flowsegs.add(V.flowpoly.begin().next.elem());
          for (; !V.flowsegs.empty(); ) {
            var Cf = V.flowsegs.pop_unsafe(),
              Df = V.flowsegs.pop_unsafe(),
              eg = 0,
              fg = 0;
            eg = Df.x - Cf.x;
            fg = Df.y - Cf.y;
            var Qd = 0,
              Rd = 0;
            Qd = eg;
            Rd = fg;
            var gg = Fa.invsqrt(Qd * Qd + Rd * Rd);
            Qd *= gg;
            Rd *= gg;
            var wg = Qd;
            Qd = -Rd;
            Rd = wg;
            var re = 0,
              se = 0;
            re = Cf.x + Df.x;
            se = Cf.y + Df.y;
            re *= 0.5;
            se *= 0.5;
            re -= 1 * a.circle.worldCOMx;
            se -= 1 * a.circle.worldCOMy;
            var Uf = 0,
              hg = 0,
              ig = Qd * re + Rd * se,
              Gf = ig / a.circle.radius,
              pf = Math.sqrt(1 - Gf * Gf),
              kg = Math.acos(Gf);
            Uf = a.circle.radius * (a.circle.radius * kg - ig * pf);
            hg =
              (0.6666666666666666 * a.circle.radius * pf * pf * pf) /
              (kg - Gf * pf);
            re = a.circle.worldCOMx;
            se = a.circle.worldCOMy;
            var lg = hg;
            re += Qd * lg;
            se += Rd * lg;
            var mg = Uf;
            lf += re * mg;
            mf += se * mg;
            nf += Uf;
          }
          var ng = 1 / nf;
          lf *= ng;
          mf *= ng;
          c.inject(nf, lf, mf);
          return !0;
        }
      }
      return !1;
    }
    var ld = a.circle,
      Ud = b.circle,
      Hf = 0,
      If = 0;
    Hf = Ud.worldCOMx - ld.worldCOMx;
    If = Ud.worldCOMy - ld.worldCOMy;
    var og = ld.radius + Ud.radius,
      Wf = Hf * Hf + If * If;
    if (Wf > og * og) return !1;
    if (Wf < x.epsilon * x.epsilon)
      ld.radius < Ud.radius
        ? c.inject(ld.area, ld.worldCOMx, ld.worldCOMy)
        : c.inject(Ud.area, Ud.worldCOMx, Ud.worldCOMy);
    else {
      var Jf = Math.sqrt(Wf),
        pg = 1 / Jf,
        Kf = 0.5 * (Jf - (Ud.radius * Ud.radius - ld.radius * ld.radius) * pg);
      if (Kf <= -ld.radius) c.inject(ld.area, ld.worldCOMx, ld.worldCOMy);
      else {
        var Xf = Jf - Kf;
        if (Xf <= -Ud.radius) c.inject(Ud.area, Ud.worldCOMx, Ud.worldCOMy);
        else {
          var Yf = 0,
            qg = 0,
            Zf = 0,
            rg = 0,
            Of = Kf / ld.radius,
            xf = Math.sqrt(1 - Of * Of),
            sg = Math.acos(Of);
          Yf = ld.radius * (ld.radius * sg - Kf * xf);
          qg = (0.6666666666666666 * ld.radius * xf * xf * xf) / (sg - Of * xf);
          var Qf = Xf / Ud.radius,
            yf = Math.sqrt(1 - Qf * Qf),
            tg = Math.acos(Qf);
          Zf = Ud.radius * (Ud.radius * tg - Xf * yf);
          rg = (0.6666666666666666 * Ud.radius * yf * yf * yf) / (tg - Qf * yf);
          var ug = Yf + Zf,
            vg = ((qg * Yf + (Jf - rg) * Zf) / ug) * pg;
          c.inject(ug, ld.worldCOMx + Hf * vg, ld.worldCOMy + If * vg);
        }
      }
    }
    return !0;
  };
  var jl = function () {
    this.toiDistance = 0;
    this.inner = !1;
    this.shape = null;
  };
  l["zpp_nape.geom.ZPP_ConvexRayResult"] = jl;
  jl.__name__ = ["zpp_nape", "geom", "ZPP_ConvexRayResult"];
  jl.prototype = { shape: null, inner: null, toiDistance: null, __class__: jl };
  var kc = function () {
    this.forced = !1;
    this.prev = this.next = null;
    this.x = this.y = 0;
  };
  l["zpp_nape.geom.ZPP_GeomVert"] = kc;
  kc.__name__ = ["zpp_nape", "geom", "ZPP_GeomVert"];
  kc.get = function (a, b) {
    if (null == kc.zpp_pool) var c = new kc();
    else (c = kc.zpp_pool), (kc.zpp_pool = c.next), (c.next = null);
    c.alloc();
    c.x = a;
    c.y = b;
    return c;
  };
  kc.prototype = {
    x: null,
    y: null,
    prev: null,
    next: null,
    forced: null,
    alloc: function () {
      this.forced = !1;
    },
    __class__: kc,
  };
  var uj = function (a) {
    this.outer = this.vertices = null;
    this.outer = a;
  };
  l["zpp_nape.geom.ZPP_GeomPoly"] = uj;
  uj.__name__ = ["zpp_nape", "geom", "ZPP_GeomPoly"];
  uj.prototype = { outer: null, vertices: null, __class__: uj };
  var Bf = function () {
    this._invalidate = this.next = null;
    this.a = this.b = this.c = this.d = this.tx = this.ty = 0;
    this.outer = null;
  };
  l["zpp_nape.geom.ZPP_Mat23"] = Bf;
  Bf.__name__ = ["zpp_nape", "geom", "ZPP_Mat23"];
  Bf.get = function () {
    if (null == Bf.zpp_pool) var a = new Bf();
    else (a = Bf.zpp_pool), (Bf.zpp_pool = a.next), (a.next = null);
    a.alloc();
    return a;
  };
  Bf.prototype = {
    outer: null,
    a: null,
    b: null,
    c: null,
    d: null,
    tx: null,
    ty: null,
    _invalidate: null,
    invalidate: function () {
      null != this._invalidate && this._invalidate();
    },
    next: null,
    alloc: function () {},
    __class__: Bf,
  };
  var vj = function (a, b) {
    this.x = null;
    this.n = 0;
    this.outer = null;
    this.m = a;
    this.n = b;
    this.x = [];
    var c = 0;
    for (a *= b; c < a; ) c++, this.x.push(0);
  };
  l["zpp_nape.geom.ZPP_MatMN"] = vj;
  vj.__name__ = ["zpp_nape", "geom", "ZPP_MatMN"];
  vj.prototype = { outer: null, m: null, n: null, x: null, __class__: vj };
  var Vb = function () {
    this.slipped = this.failed = this.kinematic = !1;
    this.c1 = this.c2 = this.axis = null;
    this.frozen1 = this.frozen2 = !1;
    this.s1 = this.s2 = this.arbiter = null;
    this.toi = 0;
    this.next = null;
    this.c1 = new kb();
    this.c2 = new kb();
    this.axis = new kb();
  };
  l["zpp_nape.geom.ZPP_ToiEvent"] = Vb;
  Vb.__name__ = ["zpp_nape", "geom", "ZPP_ToiEvent"];
  Vb.prototype = {
    next: null,
    alloc: function () {
      this.failed = !1;
      this.arbiter = this.s1 = this.s2 = null;
    },
    free: function () {},
    toi: null,
    s1: null,
    s2: null,
    arbiter: null,
    frozen1: null,
    frozen2: null,
    c1: null,
    c2: null,
    axis: null,
    slipped: null,
    failed: null,
    kinematic: null,
    __class__: Vb,
  };
  var Vd = function () {};
  l["zpp_nape.geom.ZPP_SweepDistance"] = Vd;
  Vd.__name__ = ["zpp_nape", "geom", "ZPP_SweepDistance"];
  Vd.dynamicSweep = function (a, b, c, d, e) {
    null == e && (e = !1);
    var f = a.s1,
      g = a.s2,
      h = f.body,
      n = g.body;
    var k = n.velx - h.velx;
    var l = n.vely - h.vely;
    var m = h.angvel;
    0 > m && (m = -m);
    var q = n.angvel;
    0 > q && (q = -q);
    var r = f.sweepCoef * m + g.sweepCoef * q;
    if (
      !e &&
      !a.kinematic &&
      k * k + l * l <
        x.dynamicSweepLinearThreshold * x.dynamicSweepLinearThreshold &&
      r < x.dynamicSweepAngularThreshold
    )
      (a.toi = -1), (a.failed = !0);
    else {
      m = a.c1;
      q = a.c2;
      for (var t = a.axis, u = 0; ; ) {
        h.sweepIntegrate(c * b);
        h.sweepValidate(f);
        n.sweepIntegrate(c * b);
        n.sweepValidate(g);
        var v = Vd.distance(f, g, m, q, t) + d,
          w = k * t.x + l * t.y;
        if (v < x.distanceThresholdCCD) {
          if (e) break;
          var y = m.x - h.posx;
          y =
            w -
            h.sweep_angvel * (t.y * y - t.x * (m.y - h.posy)) +
            n.sweep_angvel * (t.y * (q.x - n.posx) - t.x * (q.y - n.posy));
          0 < y && (a.slipped = !0);
          if (0 >= y || v < 0.5 * x.distanceThresholdCCD) break;
        }
        w = (r - w) * b;
        if (0 >= w) {
          c = -1;
          break;
        }
        w = v / w;
        1e-6 > w && (w = 1e-6);
        c += w;
        if (1 <= c) {
          c = 1;
          h.sweepIntegrate(c * b);
          h.sweepValidate(f);
          n.sweepIntegrate(c * b);
          n.sweepValidate(g);
          b = Vd.distance(f, g, m, q, t) + d;
          k = k * t.x + l * t.y;
          if (b < x.distanceThresholdCCD) {
            if (e) break;
            e = m.x - h.posx;
            h =
              k -
              h.sweep_angvel * (t.y * e - t.x * (m.y - h.posy)) +
              n.sweep_angvel * (t.y * (q.x - n.posx) - t.x * (q.y - n.posy));
            0 < h && (a.slipped = !0);
            if (0 >= h || b < 0.5 * x.distanceThresholdCCD) break;
          }
          c = -1;
          break;
        }
        if (40 <= ++u) {
          v > d && (a.failed = !0);
          break;
        }
      }
      a.toi = c;
    }
  };
  Vd.staticSweep = function (a, b, c, d) {
    var e = a.s1,
      f = a.s2,
      g = e.body;
    var h = -g.velx;
    var n = -g.vely;
    var k = g.sweep_angvel;
    0 > k && (k = -k);
    var l = e.sweepCoef * k;
    k = a.c1;
    for (var m = a.c2, q = a.axis, r = 0; ; ) {
      g.sweepIntegrate(c * b);
      g.sweepValidate(e);
      var t = Vd.distance(e, f, k, m, q) + d,
        u = h * q.x + n * q.y;
      if (t < x.distanceThresholdCCD) {
        var v =
          u - g.sweep_angvel * (q.y * (k.x - g.posx) - q.x * (k.y - g.posy));
        0 < v && (a.slipped = !0);
        if (0 >= v || t < 0.5 * x.distanceThresholdCCD) break;
      }
      u = (l - u) * b;
      if (0 >= u) {
        c = -1;
        break;
      }
      u = t / u;
      1e-6 > u && (u = 1e-6);
      c += u;
      if (1 <= c) {
        c = 1;
        g.sweepIntegrate(c * b);
        g.sweepValidate(e);
        b = Vd.distance(e, f, k, m, q) + d;
        h = h * q.x + n * q.y;
        if (
          b < x.distanceThresholdCCD &&
          ((g =
            h - g.sweep_angvel * (q.y * (k.x - g.posx) - q.x * (k.y - g.posy))),
          0 < g && (a.slipped = !0),
          0 >= g || b < 0.5 * x.distanceThresholdCCD)
        )
          break;
        c = -1;
        break;
      }
      if (40 <= ++r) {
        t > d && (a.failed = !0);
        break;
      }
    }
    a.toi = c;
  };
  Vd.distance = function (a, b, c, d, e, f) {
    null == f && (f = 1e100);
    if (a.isCircle() && b.isCircle()) {
      var g = a.circle,
        h = b.circle,
        k = 0,
        p = 0;
      k = h.worldCOMx - g.worldCOMx;
      p = h.worldCOMy - g.worldCOMy;
      var l = Fa.sqrt(k * k + p * p);
      var m = l - (g.radius + h.radius);
      if (m < f) {
        if (0 == l) (k = 1), (p = 0);
        else {
          var q = 1 / l;
          k *= q;
          p *= q;
        }
        var r = g.radius;
        c.x = g.worldCOMx + k * r;
        c.y = g.worldCOMy + p * r;
        var t = -h.radius;
        d.x = h.worldCOMx + k * t;
        d.y = h.worldCOMy + p * t;
        e.x = k;
        e.y = p;
      }
      return m;
    }
    var u = !1;
    if (a.isCircle() && b.isPolygon()) {
      var v = a;
      a = b;
      b = v;
      var w = c;
      c = d;
      d = w;
      u = !0;
    }
    if (a.isPolygon() && b.isCircle()) {
      for (
        var y = b.circle, z = -1e100, A = null, B = a.polygon.edges.begin();
        null != B;

      ) {
        var C = B.elem(),
          D =
            C.gnormx * y.worldCOMx +
            C.gnormy * y.worldCOMy -
            C.gprojection -
            y.radius;
        if (D > f) {
          z = D;
          break;
        }
        0 < D
          ? D > z && ((z = D), (A = C))
          : 0 > z && D > z && ((z = D), (A = C));
        B = B.next;
      }
      if (z < f) {
        var F = A.gp0,
          G = A.gp1,
          H = y.worldCOMy * A.gnormx - y.worldCOMx * A.gnormy;
        if (H <= F.y * A.gnormx - F.x * A.gnormy) {
          var I = 0,
            J = 0;
          I = y.worldCOMx - F.x;
          J = y.worldCOMy - F.y;
          var L = Fa.sqrt(I * I + J * J);
          z = L - y.radius;
          if (z < f) {
            if (0 == L) (I = 1), (J = 0);
            else {
              var M = 1 / L;
              I *= M;
              J *= M;
            }
            c.x = F.x + 0 * I;
            c.y = F.y + 0 * J;
            var N = -y.radius;
            d.x = y.worldCOMx + I * N;
            d.y = y.worldCOMy + J * N;
            e.x = I;
            e.y = J;
          }
        } else if (H >= G.y * A.gnormx - G.x * A.gnormy) {
          var O = 0,
            P = 0;
          O = y.worldCOMx - G.x;
          P = y.worldCOMy - G.y;
          var S = Fa.sqrt(O * O + P * P);
          z = S - y.radius;
          if (z < f) {
            if (0 == S) (O = 1), (P = 0);
            else {
              var T = 1 / S;
              O *= T;
              P *= T;
            }
            c.x = G.x + 0 * O;
            c.y = G.y + 0 * P;
            var U = -y.radius;
            d.x = y.worldCOMx + O * U;
            d.y = y.worldCOMy + P * U;
            e.x = O;
            e.y = P;
          }
        } else {
          var V = -y.radius;
          d.x = y.worldCOMx + A.gnormx * V;
          d.y = y.worldCOMy + A.gnormy * V;
          var W = -z;
          c.x = d.x + A.gnormx * W;
          c.y = d.y + A.gnormy * W;
          e.x = A.gnormx;
          e.y = A.gnormy;
        }
      }
      u && ((e.x = -e.x), (e.y = -e.y));
      return z;
    }
    for (
      var X = a.polygon,
        Y = b.polygon,
        Q = -1e100,
        Z = null,
        ba = null,
        ca = 0,
        da = X.edges.begin();
      null != da;

    ) {
      for (
        var fa = da.elem(), ea = 1e100, ia = Y.gverts.begin();
        null != ia;

      ) {
        var na = ia.elem(),
          oa = fa.gnormx * na.x + fa.gnormy * na.y;
        oa < ea && (ea = oa);
        ia = ia.next;
      }
      ea -= fa.gprojection;
      if (ea > f) {
        Q = ea;
        break;
      }
      0 < ea
        ? ea > Q && ((Q = ea), (Z = fa), (ca = 1))
        : 0 > Q && ea > Q && ((Q = ea), (Z = fa), (ca = 1));
      da = da.next;
    }
    if (Q < f) {
      for (var ka = Y.edges.begin(); null != ka; ) {
        for (
          var la = ka.elem(), ha = 1e100, pa = X.gverts.begin();
          null != pa;

        ) {
          var ra = pa.elem(),
            sa = la.gnormx * ra.x + la.gnormy * ra.y;
          sa < ha && (ha = sa);
          pa = pa.next;
        }
        ha -= la.gprojection;
        if (ha > f) {
          Q = ha;
          break;
        }
        0 < ha
          ? ha > Q && ((Q = ha), (ba = la), (ca = 2))
          : 0 > Q && ha > Q && ((Q = ha), (ba = la), (ca = 2));
        ka = ka.next;
      }
      if (Q < f) {
        if (1 == ca) {
          var ta = Y;
          var aa = Z;
        } else {
          ta = X;
          aa = ba;
          var wa = c;
          c = d;
          d = wa;
          u = !u;
        }
        for (var qa = null, ya = 1e100, ua = ta.edges.begin(); null != ua; ) {
          var za = ua.elem(),
            Ca = aa.gnormx * za.gnormx + aa.gnormy * za.gnormy;
          Ca < ya && ((ya = Ca), (qa = za));
          ua = ua.next;
        }
        u
          ? ((e.x = -aa.gnormx), (e.y = -aa.gnormy))
          : ((e.x = aa.gnormx), (e.y = aa.gnormy));
        if (0 <= Q) {
          var ja = aa.gp0,
            va = aa.gp1,
            ma = qa.gp0,
            xa = qa.gp1,
            Aa = 0,
            Ba = 0,
            Da = 0,
            Ea = 0;
          Aa = va.x - ja.x;
          Ba = va.y - ja.y;
          Da = xa.x - ma.x;
          Ea = xa.y - ma.y;
          var Ja = 1 / (Aa * Aa + Ba * Ba),
            Ka = 1 / (Da * Da + Ea * Ea),
            Ga = -(Aa * (ja.x - ma.x) + Ba * (ja.y - ma.y)) * Ja,
            Ha = -(Aa * (ja.x - xa.x) + Ba * (ja.y - xa.y)) * Ja,
            Ia = -(Da * (ma.x - ja.x) + Ea * (ma.y - ja.y)) * Ka,
            La = -(Da * (ma.x - va.x) + Ea * (ma.y - va.y)) * Ka;
          0 > Ga ? (Ga = 0) : 1 < Ga && (Ga = 1);
          0 > Ha ? (Ha = 0) : 1 < Ha && (Ha = 1);
          0 > Ia ? (Ia = 0) : 1 < Ia && (Ia = 1);
          0 > La ? (La = 0) : 1 < La && (La = 1);
          var Ma = 0,
            Na = 0,
            Sa = Ga;
          Ma = ja.x + Aa * Sa;
          Na = ja.y + Ba * Sa;
          var Oa = 0,
            Pa = 0,
            Ua = Ha;
          Oa = ja.x + Aa * Ua;
          Pa = ja.y + Ba * Ua;
          var Qa = 0,
            Ra = 0,
            cb = Ia;
          Qa = ma.x + Da * cb;
          Ra = ma.y + Ea * cb;
          var Wa = 0,
            Xa = 0,
            fb = La;
          Wa = ma.x + Da * fb;
          Xa = ma.y + Ea * fb;
          var Ta = $c.vec_dsq(Ma, Na, ma.x, ma.y),
            jb = $c.vec_dsq(Oa, Pa, xa.x, xa.y),
            Ya = $c.vec_dsq(Qa, Ra, ja.x, ja.y),
            kb = $c.vec_dsq(Wa, Xa, va.x, va.y),
            eb = 0,
            gb = 0,
            bb = null;
          Ta < jb
            ? ((eb = Ma), (gb = Na), (bb = ma))
            : ((eb = Oa), (gb = Pa), (bb = xa), (Ta = jb));
          var hb = 0,
            ib = 0,
            db = null;
          Ya < kb
            ? ((hb = Qa), (ib = Ra), (db = ja))
            : ((hb = Wa), (ib = Xa), (db = va), (Ya = kb));
          Ta < Ya
            ? ((c.x = eb),
              (c.y = gb),
              (d.x = bb.x),
              (d.y = bb.y),
              (Q = Math.sqrt(Ta)))
            : ((d.x = hb),
              (d.y = ib),
              (c.x = db.x),
              (c.y = db.y),
              (Q = Math.sqrt(Ya)));
          if (0 != Q) {
            e.x = d.x - c.x;
            e.y = d.y - c.y;
            var lb = 1 / Q;
            e.x *= lb;
            e.y *= lb;
            u && ((e.x = -e.x), (e.y = -e.y));
          }
          return Q;
        }
        var Va = 0,
          Za = 0;
        Va = qa.gp0.x;
        Za = qa.gp0.y;
        var $a = 0,
          ab = 0;
        $a = qa.gp1.x;
        ab = qa.gp1.y;
        var mb = 0,
          nb = 0;
        mb = $a - Va;
        nb = ab - Za;
        var ob = aa.gnormy * Va - aa.gnormx * Za,
          rb = aa.gnormy * $a - aa.gnormx * ab,
          sb = 1 / (rb - ob),
          pb = (-aa.tp1 - ob) * sb;
        pb > x.epsilon && ((Va += mb * pb), (Za += nb * pb));
        var qb = (-aa.tp0 - rb) * sb;
        qb < -x.epsilon && (($a += mb * qb), (ab += nb * qb));
        var tb = Va * aa.gnormx + Za * aa.gnormy - aa.gprojection,
          vb = $a * aa.gnormx + ab * aa.gnormy - aa.gprojection;
        if (tb < vb) {
          d.x = Va;
          d.y = Za;
          var wb = -tb;
          c.x = d.x + aa.gnormx * wb;
          c.y = d.y + aa.gnormy * wb;
          return tb;
        }
        d.x = $a;
        d.y = ab;
        var xb = -vb;
        c.x = d.x + aa.gnormx * xb;
        c.y = d.y + aa.gnormy * xb;
        return vb;
      }
    }
    return f;
  };
  var wj = function () {
    this._validate = null;
    this.immutable = !1;
    this.x = this.y = this.z = 0;
    this.outer = null;
    this.immutable = !1;
    this._validate = null;
  };
  l["zpp_nape.geom.ZPP_Vec3"] = wj;
  wj.__name__ = ["zpp_nape", "geom", "ZPP_Vec3"];
  wj.prototype = {
    outer: null,
    x: null,
    y: null,
    z: null,
    immutable: null,
    _validate: null,
    validate: function () {
      null != this._validate && this._validate();
    },
    __class__: wj,
  };
  var $c = function () {};
  l["zpp_nape.geom.ZPP_VecMath"] = $c;
  $c.__name__ = ["zpp_nape", "geom", "ZPP_VecMath"];
  $c.vec_dsq = function (a, b, c, d) {
    a -= c;
    b -= d;
    return a * a + b * b;
  };
  var ya = function () {
    this.userData =
      this.ishape =
      this.ibody =
      this.icompound =
      this.cbsets =
      this.group =
      this.cbTypes =
      this.cbSet =
      this.wrap_cbTypes =
        null;
    this.id = 0;
    this.outer_i = null;
    this.id = Ib.Interactor();
    this.cbsets = new pk();
    this.cbTypes = new Sd();
  };
  l["zpp_nape.phys.ZPP_Interactor"] = ya;
  ya.__name__ = ["zpp_nape", "phys", "ZPP_Interactor"];
  ya.get = function (a, b) {
    var c = a.id < b.id ? a.id : b.id,
      d = a.id < b.id ? b.id : a.id,
      e = null;
    for (
      a = (a.cbsets.length < b.cbsets.length ? a.cbsets : b.cbsets).begin();
      null != a;

    ) {
      b = a.elem();
      if (b.id == c && b.di == d) {
        e = b;
        break;
      }
      a = a.next;
    }
    return e;
  };
  ya.int_callback = function (a, b, c) {
    var d = a.int1;
    a = a.int2;
    b.options1.compatible(d.cbTypes) && b.options2.compatible(a.cbTypes)
      ? ((c.int1 = d), (c.int2 = a))
      : ((c.int1 = a), (c.int2 = d));
  };
  ya.prototype = {
    outer_i: null,
    id: null,
    userData: null,
    ishape: null,
    ibody: null,
    icompound: null,
    isShape: function () {
      return null != this.ishape;
    },
    isBody: function () {
      return null != this.ibody;
    },
    isCompound: function () {
      return null != this.icompound;
    },
    __iaddedToSpace: function () {
      null != this.group && this.group.addInteractor(this);
      for (var a = this.cbTypes.begin(); null != a; )
        a.elem().addInteractor(this), (a = a.next);
      this.alloc_cbSet();
    },
    __iremovedFromSpace: function () {
      null != this.group && this.group.remInteractor(this);
      for (var a = this.cbTypes.begin(); null != a; )
        a.elem().remInteractor(this), (a = a.next);
      this.dealloc_cbSet();
    },
    wake: function () {
      if (this.isShape()) {
        var a = this.ishape.body;
        null != a && null != a.space && a.space.non_inlined_wake(a);
      } else
        this.isBody()
          ? null != this.ibody.space &&
            this.ibody.space.non_inlined_wake(this.ibody)
          : null != this.icompound.space &&
            this.icompound.space.wakeCompound(this.icompound);
    },
    cbsets: null,
    getSpace: function () {
      return this.isShape()
        ? null == this.ishape.body
          ? null
          : this.ishape.body.space
        : this.isBody()
        ? this.ibody.space
        : this.icompound.space;
    },
    group: null,
    cbTypes: null,
    cbSet: null,
    wrap_cbTypes: null,
    setupcbTypes: function () {
      this.wrap_cbTypes = Le.get(this.cbTypes);
      this.wrap_cbTypes.zpp_inner.adder = m(this, this.wrap_cbTypes_adder);
      this.wrap_cbTypes.zpp_inner.subber = m(this, this.wrap_cbTypes_subber);
      this.wrap_cbTypes.zpp_inner.dontremove = !0;
    },
    wrap_cbTypes_subber: function (a) {
      a = a.zpp_inner;
      if (this.cbTypes.has(a)) {
        var b = this.getSpace();
        null != b && (this.dealloc_cbSet(), a.remInteractor(this));
        this.cbTypes.remove(a);
        null != b && (this.alloc_cbSet(), this.wake());
      }
    },
    wrap_cbTypes_adder: function (a) {
      this.insert_cbtype(a.zpp_inner);
      return !1;
    },
    insert_cbtype: function (a) {
      if (!this.cbTypes.has(a)) {
        var b = this.getSpace();
        null != b && (this.dealloc_cbSet(), a.addInteractor(this));
        for (var c = null, d = this.cbTypes.begin(); null != d; ) {
          var e = d.elem();
          if (Hb.setlt(a, e)) break;
          c = d;
          d = d.next;
        }
        this.cbTypes.inlined_insert(c, a);
        null != b && (this.alloc_cbSet(), this.wake());
      }
    },
    alloc_cbSet: function () {
      var a = this.getSpace();
      null != (this.cbSet = a.cbsets.get(this.cbTypes)) &&
        (this.cbSet.increment(),
        this.cbSet.addInteractor(this),
        this.cbSet.validate(),
        a.freshInteractorType(this));
    },
    dealloc_cbSet: function () {
      var a = this.getSpace();
      null != this.cbSet &&
        (this.cbSet.remInteractor(this),
        a.nullInteractorType(this),
        this.cbSet.decrement() &&
          (a.cbsets.remove(this.cbSet),
          (a = this.cbSet),
          a.free(),
          (a.next = Ea.zpp_pool),
          (Ea.zpp_pool = a)),
        (this.cbSet = null));
    },
    immutable_midstep: function (a) {
      this.isBody()
        ? this.ibody.__immutable_midstep(a)
        : this.isShape()
        ? this.ishape.__immutable_midstep(a)
        : this.icompound.__imutable_midstep(a);
    },
    lookup_group: function () {
      for (var a = this; null != a && null == a.group; )
        a = a.isShape()
          ? a.ishape.body
          : a.isCompound()
          ? a.icompound.compound
          : a.ibody.compound;
      return null == a ? null : a.group;
    },
    __class__: ya,
  };
  var hf = function () {
    this.wrap_localCOM = this.wrap_worldCOM = null;
    this.zip_worldCOM = !1;
    this.worldCOMx = this.worldCOMy = 0;
    this.zip_localCOM = !1;
    this.localCOMx = this.localCOMy = 0;
    this.zip_aabb = !1;
    this.aabb = null;
    this.norotate = !1;
    this.cinertia = this.iinertia = this.sinertia = 0;
    this.zip_inertia = !1;
    this.inertiaMode = this.inertia = 0;
    this.zip_gravMassScale = !1;
    this.gravMassMode = this.gravMassScale = 0;
    this.zip_gravMass = !1;
    this.gravMass = 0;
    this.nomove = !1;
    this.massMode = this.imass = this.smass = this.cmass = 0;
    this.zip_mass = !1;
    this.mass = 0;
    this.zip_axis = !1;
    this.forcex =
      this.forcey =
      this.kinvelx =
      this.kinvely =
      this.svelx =
      this.svely =
      this.angvel =
      this.torque =
      this.kinangvel =
      this.pre_rot =
      this.rot =
      this.axisx =
      this.axisy =
        0;
    this.wrap_vel = null;
    this.velx = this.vely = 0;
    this.wrap_pos = null;
    this.pre_posx = this.pre_posy = this.posx = this.posy = 0;
    this.bullet = this.bulletEnabled = this.disableCCD = !1;
    this.sweepRadius = 0;
    this.sweepFrozen = !1;
    this.sweepTime = this.sweep_angvel = 0;
    this.compound =
      this.shapes =
      this.wrap_shapes =
      this.space =
      this.arbiters =
      this.wrap_arbiters =
      this.constraints =
      this.wrap_constraints =
      this.component =
        null;
    this.type = 0;
    this.world = !1;
    this.outer = null;
    ya.call(this);
    this.ibody = this;
    this.bulletEnabled = this.world = !1;
    this.sweep_angvel = this.sweepTime = 0;
    this.disableCCD = this.norotate = this.nomove = !1;
    this.axisx = this.rot = this.posy = this.posx = 0;
    this.axisy = 1;
    this.torque =
      this.angvel =
      this.kinangvel =
      this.forcey =
      this.forcex =
      this.kinvely =
      this.kinvelx =
      this.vely =
      this.velx =
      this.svely =
      this.svelx =
        0;
    this.pre_posx = sb.POSINF();
    this.pre_posy = sb.POSINF();
    this.pre_rot = sb.POSINF();
    this.worldCOMy = this.worldCOMx = this.localCOMy = this.localCOMx = 0;
    this.zip_aabb = !0;
    this.aabb = jc.get(0, 0, 0, 0);
    this.aabb._immutable = !0;
    this.aabb._validate = m(this, this.aabb_validate);
    this.gravMassMode = this.massMode = 0;
    this.gravMassScale = 1;
    this.inertiaMode = 0;
    this.arbiters = new Qg();
    this.constraints = new Se();
    this.shapes = new vf();
    this.wrap_shapes = lf.get(this.shapes);
    this.wrap_shapes.zpp_inner.adder = m(this, this.shapes_adder);
    this.wrap_shapes.zpp_inner.subber = m(this, this.shapes_subber);
    this.wrap_shapes.zpp_inner._invalidate = m(this, this.shapes_invalidate);
    this.kinematicDelaySleep = !1;
  };
  l["zpp_nape.phys.ZPP_Body"] = hf;
  hf.__name__ = ["zpp_nape", "phys", "ZPP_Body"];
  hf.__static = function () {
    var a = new Ra(oa.get_STATIC()),
      b = a.zpp_inner;
    b.world = !0;
    b.wrap_shapes.zpp_inner.immutable = !0;
    b.smass = b.imass = b.cmass = b.mass = b.gravMass = 0;
    b.sinertia = b.iinertia = b.cinertia = b.inertia = 0;
    b.cbTypes.clear();
    return a;
  };
  hf.__super__ = ya;
  hf.prototype = v(ya.prototype, {
    outer: null,
    world: null,
    type: null,
    isStatic: function () {
      return 1 == this.type;
    },
    isDynamic: function () {
      return 2 == this.type;
    },
    isKinematic: function () {
      return 3 == this.type;
    },
    invalidate_type: function () {
      this.invalidate_mass();
      this.invalidate_inertia();
    },
    compound: null,
    shapes: null,
    wrap_shapes: null,
    invalidate_shapes: function () {
      this.invalidate_aabb();
      this.invalidate_localCOM();
      this.invalidate_mass();
      this.invalidate_inertia();
    },
    space: null,
    arbiters: null,
    wrap_arbiters: null,
    constraints: null,
    wrap_constraints: null,
    component: null,
    atRest: function (a) {
      if (this.isDynamic()) {
        var b = x.linearSleepThreshold;
        b *= b;
        if (this.velx * this.velx + this.vely * this.vely > b) a = !1;
        else if (
          $c.vec_dsq(this.posx, this.posy, this.pre_posx, this.pre_posy) >
          0.25 * b * a * a
        )
          a = !1;
        else {
          b = this.aabb.maxx - this.aabb.minx;
          var c = this.aabb.maxy - this.aabb.miny;
          b = b * b + c * c;
          c = x.angularSleepThreshold;
          c *= c;
          if (4 * this.angvel * this.angvel * b > c) a = !1;
          else {
            var d = this.rot - this.pre_rot;
            a = d * d * b > c * a * a ? !1 : !0;
          }
        }
        a || (this.component.waket = this.space.stamp);
        return this.component.waket + x.sleepDelay < this.space.stamp;
      }
      return this.component.sleeping;
    },
    refreshArbiters: function () {
      for (var a = this.arbiters.begin(); null != a; )
        (a.elem().invalidated = !0), (a = a.next);
    },
    sweepTime: null,
    sweep_angvel: null,
    sweepFrozen: null,
    sweepRadius: null,
    bullet: null,
    bulletEnabled: null,
    disableCCD: null,
    sweepIntegrate: function (a) {
      var b = a - this.sweepTime;
      0 != b &&
        ((this.sweepTime = a),
        (this.posx += this.velx * b),
        (this.posy += this.vely * b),
        0 != this.angvel && this.delta_rot(this.sweep_angvel * b));
    },
    sweepValidate: function (a) {
      if (a.isCircle())
        (a.worldCOMx =
          this.posx + (this.axisy * a.localCOMx - this.axisx * a.localCOMy)),
          (a.worldCOMy =
            this.posy + (a.localCOMx * this.axisx + a.localCOMy * this.axisy));
      else {
        a = a.polygon;
        for (var b = a.lverts.begin(), c = a.gverts.begin(); null != c; ) {
          var d = c.elem(),
            e = b.elem();
          b = b.next;
          d.x = this.posx + (this.axisy * e.x - this.axisx * e.y);
          d.y = this.posy + (e.x * this.axisx + e.y * this.axisy);
          c = c.next;
        }
        c = a.edges.begin();
        d = a.gverts.begin();
        b = d.elem();
        for (d = d.next; null != d; ) {
          e = d.elem();
          var f = c.elem();
          c = c.next;
          f.gnormx = this.axisy * f.lnormx - this.axisx * f.lnormy;
          f.gnormy = f.lnormx * this.axisx + f.lnormy * this.axisy;
          f.gprojection =
            this.posx * f.gnormx + this.posy * f.gnormy + f.lprojection;
          f.tp0 = b.y * f.gnormx - b.x * f.gnormy;
          f.tp1 = e.y * f.gnormx - e.x * f.gnormy;
          b = e;
          d = d.next;
        }
        a = a.gverts.front();
        c = c.elem();
        c.gnormx = this.axisy * c.lnormx - this.axisx * c.lnormy;
        c.gnormy = c.lnormx * this.axisx + c.lnormy * this.axisy;
        c.gprojection =
          this.posx * c.gnormx + this.posy * c.gnormy + c.lprojection;
        c.tp0 = b.y * c.gnormx - b.x * c.gnormy;
        c.tp1 = a.y * c.gnormx - a.x * c.gnormy;
      }
    },
    pre_posx: null,
    pre_posy: null,
    posx: null,
    posy: null,
    wrap_pos: null,
    velx: null,
    vely: null,
    wrap_vel: null,
    forcex: null,
    forcey: null,
    kinvelx: null,
    kinvely: null,
    svelx: null,
    svely: null,
    invalidate_pos: function () {
      for (var a = this.shapes.begin(); null != a; ) {
        var b = a.elem();
        1 == b.type &&
          (b.polygon.invalidate_gverts(), b.polygon.invalidate_gaxi());
        b.invalidate_worldCOM();
        a = a.next;
      }
      this.invalidate_worldCOM();
    },
    pos_invalidate: function (a) {
      this.immutable_midstep("Body::position");
      if (this.posx != a.x || this.posy != a.y)
        (this.posx = a.x),
          (this.posy = a.y),
          this.invalidate_pos(),
          this.wake();
    },
    pos_validate: function () {
      this.wrap_pos.zpp_inner.x = this.posx;
      this.wrap_pos.zpp_inner.y = this.posy;
    },
    vel_invalidate: function (a) {
      this.velx = a.x;
      this.vely = a.y;
      this.invalidate_wake();
    },
    vel_validate: function () {
      this.wrap_vel.zpp_inner.x = this.velx;
      this.wrap_vel.zpp_inner.y = this.vely;
    },
    setupPosition: function () {
      this.wrap_pos = w.get(this.posx, this.posy);
      this.wrap_pos.zpp_inner._inuse = !0;
      this.world
        ? (this.wrap_pos.zpp_inner._immutable = !0)
        : ((this.wrap_pos.zpp_inner._invalidate = m(this, this.pos_invalidate)),
          (this.wrap_pos.zpp_inner._validate = m(this, this.pos_validate)));
    },
    setupVelocity: function () {
      this.wrap_vel = w.get(this.velx, this.vely);
      this.wrap_vel.zpp_inner._inuse = !0;
      this.world
        ? (this.wrap_vel.zpp_inner._immutable = !0)
        : ((this.wrap_vel.zpp_inner._invalidate = m(this, this.vel_invalidate)),
          (this.wrap_vel.zpp_inner._validate = m(this, this.vel_validate)));
    },
    angvel: null,
    torque: null,
    kinangvel: null,
    pre_rot: null,
    rot: null,
    invalidate_rot: function () {
      this.zip_axis = !0;
      for (var a = this.shapes.begin(); null != a; ) {
        var b = a.elem();
        1 == b.type &&
          (b.polygon.invalidate_gverts(), b.polygon.invalidate_gaxi());
        b.invalidate_worldCOM();
        a = a.next;
      }
      this.invalidate_worldCOM();
    },
    axisx: null,
    axisy: null,
    zip_axis: null,
    validate_axis: function () {
      this.zip_axis && ((this.zip_axis = !1), this.quick_validate_axis());
    },
    quick_validate_axis: function () {
      this.axisx = Math.sin(this.rot);
      this.axisy = Math.cos(this.rot);
    },
    delta_rot: function (a) {
      this.rot += a;
      if (1e-4 < a * a) this.quick_validate_axis();
      else {
        var b = a * a,
          c = 1 - 0.5 * b;
        b = 1 - (b * b) / 8;
        var d = (c * this.axisx + a * this.axisy) * b;
        this.axisy = (c * this.axisy - a * this.axisx) * b;
        this.axisx = d;
      }
    },
    kinematicDelaySleep: null,
    mass: null,
    zip_mass: null,
    massMode: null,
    imass: null,
    smass: null,
    cmass: null,
    nomove: null,
    invalidate_mass: function () {
      this.zip_mass = !0;
      this.invalidate_gravMass();
    },
    validate_mass: function () {
      if (this.zip_mass) {
        this.zip_mass = !1;
        if (0 == this.massMode) {
          this.cmass = 0;
          for (var a = this.shapes.begin(); null != a; ) {
            var b = a.elem();
            b.refmaterial.density = b.material.density;
            b.validate_area_inertia();
            this.cmass += b.area * b.material.density;
            a = a.next;
          }
        }
        this.isDynamic() && !this.nomove
          ? ((this.mass = this.cmass),
            (this.imass = this.smass = 1 / this.mass))
          : ((this.mass = sb.POSINF()), (this.imass = this.smass = 0));
      }
    },
    gravMass: null,
    zip_gravMass: null,
    gravMassMode: null,
    gravMassScale: null,
    zip_gravMassScale: null,
    invalidate_gravMass: function () {
      1 != this.gravMassMode && (this.zip_gravMass = !0);
      2 != this.gravMassMode && (this.zip_gravMassScale = !0);
      this.wake();
    },
    validate_gravMass: function () {
      this.zip_gravMass &&
        ((this.zip_gravMass = !1),
        this.validate_mass(),
        0 == this.gravMassMode
          ? (this.validate_mass(), (this.gravMass = this.cmass))
          : 2 == this.gravMassMode &&
            (this.validate_mass(),
            (this.gravMass = this.cmass * this.gravMassScale)));
    },
    inertiaMode: null,
    inertia: null,
    zip_inertia: null,
    cinertia: null,
    iinertia: null,
    sinertia: null,
    norotate: null,
    invalidate_inertia: function () {
      this.zip_inertia = !0;
      this.wake();
    },
    validate_inertia: function () {
      if (this.zip_inertia) {
        this.zip_inertia = !1;
        if (0 == this.inertiaMode) {
          this.cinertia = 0;
          for (var a = this.shapes.begin(); null != a; ) {
            var b = a.elem();
            b.refmaterial.density = b.material.density;
            b.validate_area_inertia();
            this.cinertia += b.inertia * b.area * b.material.density;
            a = a.next;
          }
        }
        this.isDynamic() && !this.norotate
          ? ((this.inertia = this.cinertia),
            (this.sinertia = this.iinertia = 1 / this.inertia))
          : ((this.inertia = sb.POSINF()), (this.sinertia = this.iinertia = 0));
      }
    },
    invalidate_wake: function () {
      this.wake();
    },
    aabb: null,
    zip_aabb: null,
    validate_aabb: function () {
      if (this.zip_aabb) {
        this.zip_aabb = !1;
        this.aabb.minx = sb.POSINF();
        this.aabb.miny = sb.POSINF();
        this.aabb.maxx = sb.NEGINF();
        this.aabb.maxy = sb.NEGINF();
        for (var a = this.shapes.begin(); null != a; ) {
          var b = a.elem();
          b.validate_aabb();
          this.aabb.combine(b.aabb);
          a = a.next;
        }
      }
    },
    invalidate_aabb: function () {
      this.zip_aabb = !0;
    },
    localCOMx: null,
    localCOMy: null,
    zip_localCOM: null,
    worldCOMx: null,
    worldCOMy: null,
    zip_worldCOM: null,
    wrap_localCOM: null,
    wrap_worldCOM: null,
    invalidate_localCOM: function () {
      this.zip_localCOM = !0;
      this.invalidate_worldCOM();
    },
    invalidate_worldCOM: function () {
      this.zip_worldCOM = !0;
    },
    validate_localCOM: function () {
      if (this.zip_localCOM) {
        this.zip_localCOM = !1;
        for (var a = 0, b = 0, c = 0, d = this.shapes.begin(); null != d; ) {
          var e = d.elem();
          e.validate_localCOM();
          e.validate_area_inertia();
          var f = e.area * e.material.density;
          a += e.localCOMx * f;
          b += e.localCOMy * f;
          c += e.area * e.material.density;
          d = d.next;
        }
        0 != c &&
          ((d = 1 / c), (this.localCOMx = a * d), (this.localCOMy = b * d));
        null != this.wrap_localCOM &&
          ((this.wrap_localCOM.zpp_inner.x = this.localCOMx),
          (this.wrap_localCOM.zpp_inner.y = this.localCOMy));
        this.zip_mass &&
          0 == this.massMode &&
          ((this.zip_mass = !1),
          (this.cmass = c),
          this.isDynamic()
            ? ((this.mass = this.cmass),
              (this.imass = this.smass = 1 / this.mass))
            : ((this.mass = sb.POSINF()), (this.imass = this.smass = 0)));
      }
    },
    validate_worldCOM: function () {
      this.zip_worldCOM &&
        ((this.zip_worldCOM = !1),
        this.validate_localCOM(),
        this.validate_axis(),
        (this.worldCOMx =
          this.posx +
          (this.axisy * this.localCOMx - this.axisx * this.localCOMy)),
        (this.worldCOMy =
          this.posy +
          (this.localCOMx * this.axisx + this.localCOMy * this.axisy)),
        null != this.wrap_worldCOM &&
          ((this.wrap_worldCOM.zpp_inner.x = this.worldCOMx),
          (this.wrap_worldCOM.zpp_inner.y = this.worldCOMy)));
    },
    getlocalCOM: function () {
      this.validate_localCOM();
    },
    __immutable_midstep: function (a) {},
    aabb_validate: function () {
      this.validate_aabb();
    },
    shapes_adder: function (a) {
      return a.zpp_inner.body != this
        ? (null != a.zpp_inner.body && a.zpp_inner.body.wrap_shapes.remove(a),
          (a.zpp_inner.body = this),
          a.zpp_inner.addedToBody(),
          null != this.space && this.space.added_shape(a.zpp_inner),
          a.zpp_inner.isPolygon() &&
            (a.zpp_inner.polygon.invalidate_gaxi(),
            a.zpp_inner.polygon.invalidate_gverts()),
          !0)
        : !1;
    },
    shapes_subber: function (a) {
      null != this.space && this.space.removed_shape(a.zpp_inner);
      a.zpp_inner.body = null;
      a.zpp_inner.removedFromBody();
    },
    shapes_invalidate: function (a) {
      this.invalidate_shapes();
    },
    addedToSpace: function () {
      null == lc.zpp_pool
        ? (this.component = new lc())
        : ((this.component = lc.zpp_pool),
          (lc.zpp_pool = this.component.next),
          (this.component.next = null));
      this.component.alloc();
      this.component.isBody = !0;
      this.component.body = this;
      this.__iaddedToSpace();
    },
    removedFromSpace: function () {
      for (; !this.arbiters.empty(); )
        this.arbiters.pop_unsafe().lazyRetire(this.space, this);
      var a = this.component;
      a.free();
      a.next = lc.zpp_pool;
      lc.zpp_pool = a;
      this.component = null;
      this.__iremovedFromSpace();
    },
    __class__: hf,
  });
  var Jh = function () {
    this.compound = this.space = null;
    this.depth = 0;
    this.outer =
      this.bodies =
      this.constraints =
      this.compounds =
      this.wrap_bodies =
      this.wrap_constraints =
      this.wrap_compounds =
        null;
    ya.call(this);
    this.icompound = this;
    this.depth = 1;
    this.bodies = new Ve();
    this.wrap_bodies = pe.get(this.bodies);
    this.wrap_bodies.zpp_inner.adder = m(this, this.bodies_adder);
    this.wrap_bodies.zpp_inner.subber = m(this, this.bodies_subber);
    this.constraints = new Se();
    this.wrap_constraints = rd.get(this.constraints);
    this.wrap_constraints.zpp_inner.adder = m(this, this.constraints_adder);
    this.wrap_constraints.zpp_inner.subber = m(this, this.constraints_subber);
    this.compounds = new pf();
    this.wrap_compounds = jf.get(this.compounds);
    this.wrap_compounds.zpp_inner.adder = m(this, this.compounds_adder);
    this.wrap_compounds.zpp_inner.subber = m(this, this.compounds_subber);
  };
  l["zpp_nape.phys.ZPP_Compound"] = Jh;
  Jh.__name__ = ["zpp_nape", "phys", "ZPP_Compound"];
  Jh.__super__ = ya;
  Jh.prototype = v(ya.prototype, {
    outer: null,
    bodies: null,
    constraints: null,
    compounds: null,
    wrap_bodies: null,
    wrap_constraints: null,
    wrap_compounds: null,
    depth: null,
    compound: null,
    space: null,
    __imutable_midstep: function (a) {},
    addedToSpace: function () {
      this.__iaddedToSpace();
    },
    removedFromSpace: function () {
      this.__iremovedFromSpace();
    },
    bodies_adder: function (a) {
      return a.zpp_inner.compound != this
        ? (null != a.zpp_inner.compound
            ? a.zpp_inner.compound.wrap_bodies.remove(a)
            : null != a.zpp_inner.space &&
              a.zpp_inner.space.wrap_bodies.remove(a),
          (a.zpp_inner.compound = this),
          null != this.space && this.space.addBody(a.zpp_inner),
          !0)
        : !1;
    },
    bodies_subber: function (a) {
      a.zpp_inner.compound = null;
      null != this.space && this.space.remBody(a.zpp_inner);
    },
    constraints_adder: function (a) {
      return a.zpp_inner.compound != this
        ? (null != a.zpp_inner.compound
            ? a.zpp_inner.compound.wrap_constraints.remove(a)
            : null != a.zpp_inner.space &&
              a.zpp_inner.space.wrap_constraints.remove(a),
          (a.zpp_inner.compound = this),
          null != this.space && this.space.addConstraint(a.zpp_inner),
          !0)
        : !1;
    },
    constraints_subber: function (a) {
      a.zpp_inner.compound = null;
      null != this.space && this.space.remConstraint(a.zpp_inner);
    },
    compounds_adder: function (a) {
      return a.zpp_inner.compound != this
        ? (null != a.zpp_inner.compound
            ? a.zpp_inner.compound.wrap_compounds.remove(a)
            : null != a.zpp_inner.space &&
              a.zpp_inner.space.wrap_compounds.remove(a),
          (a.zpp_inner.compound = this),
          (a.zpp_inner.depth = this.depth + 1),
          null != this.space && this.space.addCompound(a.zpp_inner),
          !0)
        : !1;
    },
    compounds_subber: function (a) {
      a.zpp_inner.compound = null;
      a.zpp_inner.depth = 1;
      null != this.space && this.space.remCompound(a.zpp_inner);
    },
    __class__: Jh,
  });
  var kf = function () {
    this.wrap_gravity = null;
    this.viscosity = this.density = this.gravityx = this.gravityy = 0;
    this.next = this.outer = this.shapes = null;
    this.feature_cons();
    this.density = this.viscosity = 1;
    this.wrap_gravity = null;
    this.gravityy = this.gravityx = 0;
  };
  l["zpp_nape.phys.ZPP_FluidProperties"] = kf;
  kf.__name__ = ["zpp_nape", "phys", "ZPP_FluidProperties"];
  kf.prototype = {
    next: null,
    outer: null,
    alloc: function () {},
    shapes: null,
    feature_cons: function () {
      this.shapes = new vf();
    },
    addShape: function (a) {
      this.shapes.add(a);
    },
    remShape: function (a) {
      this.shapes.remove(a);
    },
    viscosity: null,
    density: null,
    gravityx: null,
    gravityy: null,
    wrap_gravity: null,
    invalidate: function () {
      for (var a = this.shapes.begin(); null != a; )
        a.elem().invalidate_fluidprops(), (a = a.next);
    },
    __class__: kf,
  };
  var Ja = function () {
    this.dynamicFriction =
      this.staticFriction =
      this.density =
      this.elasticity =
      this.rollingFriction =
        0;
    this.next = this.outer = this.shapes = null;
    this.feature_cons();
    this.elasticity = 0;
    this.dynamicFriction = 1;
    this.staticFriction = 2;
    this.density = 0.001;
    this.rollingFriction = 0.01;
  };
  l["zpp_nape.phys.ZPP_Material"] = Ja;
  Ja.__name__ = ["zpp_nape", "phys", "ZPP_Material"];
  Ja.prototype = {
    next: null,
    outer: null,
    wrapper: function () {
      if (null == this.outer) {
        this.outer = new Aa();
        var a = this.outer.zpp_inner;
        a.free();
        a.next = Ja.zpp_pool;
        Ja.zpp_pool = a;
        this.outer.zpp_inner = this;
      }
      return this.outer;
    },
    free: function () {
      this.outer = null;
    },
    alloc: function () {},
    shapes: null,
    feature_cons: function () {
      this.shapes = new vf();
    },
    addShape: function (a) {
      this.shapes.add(a);
    },
    remShape: function (a) {
      this.shapes.remove(a);
    },
    dynamicFriction: null,
    staticFriction: null,
    density: null,
    elasticity: null,
    rollingFriction: null,
    set: function (a) {
      this.dynamicFriction = a.dynamicFriction;
      this.staticFriction = a.staticFriction;
      this.density = a.density;
      this.elasticity = a.elasticity;
      this.rollingFriction = a.rollingFriction;
    },
    invalidate: function (a) {
      for (var b = this.shapes.begin(); null != b; )
        b.elem().invalidate_material(a), (b = b.next);
    },
    __class__: Ja,
  };
  var qf = function (a) {
    this.zip_aabb = !1;
    this.sweep = this.node = this.pairs = this.aabb = null;
    this.fluidEnabled = this.sensorEnabled = !1;
    this.circle =
      this.polygon =
      this.refmaterial =
      this.material =
      this.filter =
      this.fluidProperties =
        null;
    this.sweepCoef = 0;
    this.zip_sweepRadius = !1;
    this.sweepRadius = 0;
    this.wrap_localCOM = this.wrap_worldCOM = null;
    this.zip_worldCOM = !1;
    this.worldCOMx = this.worldCOMy = 0;
    this.zip_localCOM = !1;
    this.localCOMx = this.localCOMy = 0;
    this.zip_angDrag = !1;
    this.inertia = this.angDrag = 0;
    this.zip_area_inertia = !1;
    this.type = this.area = 0;
    this.outer = this.body = null;
    ya.call(this);
    this.pairs = new qk();
    this.ishape = this;
    this.type = a;
    this.aabb = jc.get(0, 0, 0, 0);
    this.aabb._immutable = !0;
    this.aabb._validate = m(this, this.aabb_validate);
    this.zip_area_inertia =
      this.zip_angDrag =
      this.zip_localCOM =
      this.zip_sweepRadius =
        !0;
    this.worldCOMy = this.worldCOMx = this.localCOMy = this.localCOMx = 0;
    this.sensorEnabled = this.fluidEnabled = !1;
    this.body = this.fluidProperties = null;
    this.refmaterial = new Ja();
    this.sweepRadius = this.sweepCoef = 0;
  };
  l["zpp_nape.shape.ZPP_Shape"] = qf;
  qf.__name__ = ["zpp_nape", "shape", "ZPP_Shape"];
  qf.__super__ = ya;
  qf.prototype = v(ya.prototype, {
    outer: null,
    body: null,
    type: null,
    isCircle: function () {
      return 0 == this.type;
    },
    isPolygon: function () {
      return 1 == this.type;
    },
    area: null,
    zip_area_inertia: null,
    inertia: null,
    angDrag: null,
    zip_angDrag: null,
    localCOMx: null,
    localCOMy: null,
    zip_localCOM: null,
    worldCOMx: null,
    worldCOMy: null,
    zip_worldCOM: null,
    wrap_localCOM: null,
    wrap_worldCOM: null,
    sweepRadius: null,
    zip_sweepRadius: null,
    sweepCoef: null,
    invalidate_sweepRadius: function () {
      this.zip_sweepRadius = !0;
    },
    validate_sweepRadius: function () {
      this.zip_sweepRadius &&
        ((this.zip_sweepRadius = !1),
        this.isCircle()
          ? this.circle.__validate_sweepRadius()
          : this.polygon.__validate_sweepRadius());
    },
    circle: null,
    polygon: null,
    refmaterial: null,
    material: null,
    filter: null,
    fluidProperties: null,
    fluidEnabled: null,
    sensorEnabled: null,
    sweep: null,
    node: null,
    pairs: null,
    aabb: null,
    zip_aabb: null,
    validate_aabb: function () {
      this.zip_aabb &&
        null != this.body &&
        ((this.zip_aabb = !1),
        this.isCircle()
          ? this.circle.__validate_aabb()
          : this.polygon.__validate_aabb());
    },
    force_validate_aabb: function () {
      this.isCircle()
        ? this.circle._force_validate_aabb()
        : this.polygon._force_validate_aabb();
    },
    invalidate_aabb: function () {
      this.zip_aabb = !0;
      null != this.body && this.body.invalidate_aabb();
    },
    validate_area_inertia: function () {
      this.zip_area_inertia &&
        ((this.zip_area_inertia = !1),
        this.isCircle()
          ? this.circle.__validate_area_inertia()
          : this.polygon.__validate_area_inertia());
    },
    validate_angDrag: function () {
      if (
        this.zip_angDrag ||
        this.refmaterial.dynamicFriction != this.material.dynamicFriction
      )
        (this.zip_angDrag = !1),
          (this.refmaterial.dynamicFriction = this.material.dynamicFriction),
          this.isCircle()
            ? this.circle.__validate_angDrag()
            : this.polygon.__validate_angDrag();
    },
    validate_localCOM: function () {
      this.zip_localCOM &&
        ((this.zip_localCOM = !1),
        this.isPolygon() && this.polygon.__validate_localCOM(),
        null != this.wrap_localCOM &&
          ((this.wrap_localCOM.zpp_inner.x = this.localCOMx),
          (this.wrap_localCOM.zpp_inner.y = this.localCOMy)));
    },
    validate_worldCOM: function () {
      this.zip_worldCOM &&
        null != this.body &&
        ((this.zip_worldCOM = !1),
        this.validate_localCOM(),
        this.body.validate_axis(),
        (this.worldCOMx =
          this.body.posx +
          (this.body.axisy * this.localCOMx -
            this.body.axisx * this.localCOMy)),
        (this.worldCOMy =
          this.body.posy +
          (this.localCOMx * this.body.axisx +
            this.localCOMy * this.body.axisy)));
    },
    getworldCOM: function () {
      this.validate_worldCOM();
      this.wrap_worldCOM.zpp_inner.x = this.worldCOMx;
      this.wrap_worldCOM.zpp_inner.y = this.worldCOMy;
    },
    invalidate_area_inertia: function () {
      this.zip_area_inertia = !0;
      null != this.body &&
        (this.body.invalidate_localCOM(),
        this.body.invalidate_mass(),
        this.body.invalidate_inertia());
    },
    invalidate_angDrag: function () {
      this.zip_angDrag = !0;
    },
    invalidate_localCOM: function () {
      this.zip_localCOM = !0;
      this.invalidate_area_inertia();
      this.isCircle() && this.invalidate_sweepRadius();
      this.invalidate_angDrag();
      this.invalidate_worldCOM();
      null != this.body && this.body.invalidate_localCOM();
    },
    invalidate_worldCOM: function () {
      this.zip_worldCOM = !0;
      this.invalidate_aabb();
    },
    invalidate_material: function (a) {
      0 != (a & Ja.WAKE) && this.wake();
      0 != (a & Ja.ARBITERS) &&
        null != this.body &&
        this.body.refreshArbiters();
      0 != (a & Ja.PROPS) &&
        null != this.body &&
        (this.body.invalidate_localCOM(),
        this.body.invalidate_mass(),
        this.body.invalidate_inertia());
      0 != (a & Ja.ANGDRAG) && this.invalidate_angDrag();
      this.refmaterial.set(this.material);
    },
    invalidate_filter: function () {
      this.wake();
    },
    invalidate_fluidprops: function () {
      this.fluidEnabled && this.wake();
    },
    aabb_validate: function () {
      this.validate_aabb();
    },
    setMaterial: function (a) {
      this.material != a &&
        (null != this.body &&
          null != this.body.space &&
          null != this.material &&
          this.material.remShape(this),
        (this.material = a),
        null != this.body && null != this.body.space && a.addShape(this),
        this.wake(),
        null != this.body && this.body.refreshArbiters());
    },
    setFilter: function (a) {
      this.filter != a &&
        (null != this.body &&
          null != this.body.space &&
          null != this.filter &&
          this.filter.remShape(this),
        (this.filter = a),
        null != this.body && null != this.body.space && a.addShape(this),
        this.wake());
    },
    __immutable_midstep: function (a) {},
    addedToBody: function () {
      this.invalidate_worldCOM();
      this.invalidate_aabb();
    },
    removedFromBody: function () {},
    addedToSpace: function () {
      this.__iaddedToSpace();
      this.material.addShape(this);
      this.filter.addShape(this);
      null != this.fluidProperties && this.fluidProperties.addShape(this);
    },
    removedFromSpace: function () {
      this.__iremovedFromSpace();
      this.material.remShape(this);
      this.filter.remShape(this);
      null != this.fluidProperties && this.fluidProperties.remShape(this);
    },
    __class__: qf,
  });
  var Kh = function () {
    this.radius = 0;
    this.outer_zn = null;
    qf.call(this, 0);
    this.circle = this;
    this.zip_localCOM = !1;
  };
  l["zpp_nape.shape.ZPP_Circle"] = Kh;
  Kh.__name__ = ["zpp_nape", "shape", "ZPP_Circle"];
  Kh.__super__ = qf;
  Kh.prototype = v(qf.prototype, {
    outer_zn: null,
    radius: null,
    invalidate_radius: function () {
      this.invalidate_area_inertia();
      this.invalidate_angDrag();
      this.invalidate_aabb();
      null != this.body && this.body.wake();
    },
    __validate_aabb: function () {
      this.validate_worldCOM();
      var a = this.radius,
        b = this.radius;
      this.aabb.minx = this.worldCOMx - a;
      this.aabb.miny = this.worldCOMy - b;
      this.aabb.maxx = this.worldCOMx + a;
      this.aabb.maxy = this.worldCOMy + b;
    },
    _force_validate_aabb: function () {
      this.worldCOMx =
        this.body.posx +
        (this.body.axisy * this.localCOMx - this.body.axisx * this.localCOMy);
      this.worldCOMy =
        this.body.posy +
        (this.localCOMx * this.body.axisx + this.localCOMy * this.body.axisy);
      this.aabb.minx = this.worldCOMx - this.radius;
      this.aabb.miny = this.worldCOMy - this.radius;
      this.aabb.maxx = this.worldCOMx + this.radius;
      this.aabb.maxy = this.worldCOMy + this.radius;
    },
    __validate_sweepRadius: function () {
      this.sweepCoef = Math.sqrt(
        this.localCOMx * this.localCOMx + this.localCOMy * this.localCOMy
      );
      this.sweepRadius = this.sweepCoef + this.radius;
    },
    __validate_area_inertia: function () {
      var a = this.radius * this.radius;
      this.area = a * Math.PI;
      this.inertia =
        0.5 * a +
        (this.localCOMx * this.localCOMx + this.localCOMy * this.localCOMy);
    },
    __validate_angDrag: function () {
      var a = this.localCOMx * this.localCOMx + this.localCOMy * this.localCOMy,
        b = this.radius * this.radius;
      this.angDrag =
        (a + 2 * b) *
          this.material.dynamicFriction *
          x.fluidAngularDragFriction +
        0.5 * x.fluidAngularDrag * (1 + x.fluidVacuumDrag) * a;
      this.angDrag /= 2 * (a + 0.5 * b);
    },
    __translate: function (a, b) {
      this.localCOMx += 1 * a;
      this.localCOMy += 1 * b;
      this.invalidate_localCOM();
    },
    __class__: Kh,
  });
  var Cb = function () {
    this.tp0 = this.tp1 = 0;
    this.lp0 = this.gp0 = this.lp1 = this.gp1 = null;
    this.length = this.lprojection = this.gprojection = 0;
    this.wrap_gnorm = null;
    this.gnormx = this.gnormy = 0;
    this.wrap_lnorm = null;
    this.lnormx = this.lnormy = 0;
    this.next = this.polygon = this.outer = null;
    this.gprojection =
      this.lprojection =
      this.length =
      this.gnormy =
      this.gnormx =
      this.lnormy =
      this.lnormx =
        0;
  };
  l["zpp_nape.shape.ZPP_Edge"] = Cb;
  Cb.__name__ = ["zpp_nape", "shape", "ZPP_Edge"];
  Cb.prototype = {
    next: null,
    free: function () {
      this.polygon = null;
    },
    alloc: function () {},
    polygon: null,
    outer: null,
    wrapper: function () {
      null == this.outer &&
        ((this.outer = new Aj()),
        (Cb.internal = !1),
        (this.outer.zpp_inner = this));
      return this.outer;
    },
    lnormx: null,
    lnormy: null,
    wrap_lnorm: null,
    gnormx: null,
    gnormy: null,
    wrap_gnorm: null,
    length: null,
    lprojection: null,
    gprojection: null,
    lp0: null,
    gp0: null,
    lp1: null,
    gp1: null,
    tp0: null,
    tp1: null,
    __class__: Cb,
  };
  var Lh = function () {
    this.reverse_flag =
      this.zip_lverts =
      this.zip_laxi =
      this.zip_gverts =
      this.zip_gaxi =
      this.zip_valid =
      this.zip_sanitation =
        !1;
    this.edgeCnt = 0;
    this.outer_zn =
      this.lverts =
      this.wrap_lverts =
      this.gverts =
      this.wrap_gverts =
      this.edges =
      this.wrap_edges =
        null;
    qf.call(this, 1);
    this.polygon = this;
    this.lverts = new kb();
    this.gverts = new kb();
    this.edges = new ki();
    this.edgeCnt = 0;
  };
  l["zpp_nape.shape.ZPP_Polygon"] = Lh;
  Lh.__name__ = ["zpp_nape", "shape", "ZPP_Polygon"];
  Lh.__super__ = qf;
  Lh.prototype = v(qf.prototype, {
    outer_zn: null,
    lverts: null,
    wrap_lverts: null,
    gverts: null,
    wrap_gverts: null,
    edges: null,
    wrap_edges: null,
    edgeCnt: null,
    reverse_flag: null,
    lverts_pa_invalidate: function (a) {
      this.invalidate_lverts();
    },
    gverts_pa_validate: function () {
      this.validate_gverts();
    },
    lverts_post_adder: function (a) {
      a.zpp_inner._invalidate = m(this, this.lverts_pa_invalidate);
      for (
        var b = null, c = null, d = this.lverts.begin();
        null != d && d.elem() != a.zpp_inner;

      )
        (b = null == b ? this.gverts.begin() : b.next),
          (c = null == c ? this.edges.begin() : c.next),
          (d = d.next);
      a = kb.get(0, 0, !0);
      this.gverts.insert(b, a);
      null != this.lverts.begin().next &&
        (null == this.lverts.begin().next.next
          ? (null == Cb.zpp_pool
              ? (c = new Cb())
              : ((c = Cb.zpp_pool), (Cb.zpp_pool = c.next), (c.next = null)),
            c.alloc(),
            (c.polygon = this),
            this.edges.add(c),
            null == Cb.zpp_pool
              ? (c = new Cb())
              : ((c = Cb.zpp_pool), (Cb.zpp_pool = c.next), (c.next = null)),
            c.alloc(),
            (c.polygon = this),
            this.edges.add(c),
            (this.edgeCnt += 2))
          : (null == Cb.zpp_pool
              ? (b = new Cb())
              : ((b = Cb.zpp_pool), (Cb.zpp_pool = b.next), (b.next = null)),
            b.alloc(),
            (b.polygon = this),
            this.edges.insert(c, b),
            this.edgeCnt++));
      a._validate = m(this, this.gverts_pa_validate);
    },
    lverts_subber: function (a) {
      this.cleanup_lvert(a.zpp_inner);
    },
    lverts_invalidate: function (a) {
      this.invalidate_lverts();
    },
    lverts_validate: function () {
      this.validate_lverts();
    },
    getlverts: function () {
      this.wrap_lverts = kg.get(this.lverts);
      this.wrap_lverts.zpp_inner.post_adder = m(this, this.lverts_post_adder);
      this.wrap_lverts.zpp_inner.subber = m(this, this.lverts_subber);
      this.wrap_lverts.zpp_inner._invalidate = m(this, this.lverts_invalidate);
      this.wrap_lverts.zpp_inner._validate = m(this, this.lverts_validate);
      this.wrap_lverts.zpp_inner.reverse_flag = this.reverse_flag;
    },
    zip_lverts: null,
    invalidate_lverts: function () {
      this.invalidate_laxi();
      this.invalidate_area_inertia();
      this.invalidate_angDrag();
      this.invalidate_localCOM();
      this.invalidate_gverts();
      this.zip_sanitation = this.zip_valid = this.zip_lverts = !0;
      null != this.body && this.body.wake();
    },
    zip_laxi: null,
    invalidate_laxi: function () {
      this.invalidate_gaxi();
      this.invalidate_sweepRadius();
      this.zip_laxi = !0;
    },
    zip_gverts: null,
    invalidate_gverts: function () {
      this.invalidate_aabb();
      this.zip_gverts = !0;
    },
    zip_gaxi: null,
    invalidate_gaxi: function () {
      this.zip_gaxi = !0;
    },
    zip_valid: null,
    validation: null,
    valid: function () {
      if (this.zip_valid) {
        this.zip_valid = !1;
        this.splice_collinear();
        if (3 > this.lverts.size())
          return (this.validation = nb.get_DEGENERATE());
        this.validate_lverts();
        this.validate_area_inertia();
        if (this.area < x.epsilon)
          return (this.validation = nb.get_DEGENERATE());
        var a = !1,
          b = !1,
          c = !0,
          d = this.lverts.begin(),
          e = d.elem();
        d = d.next;
        var f = d.elem();
        for (d = d.next; null != d; ) {
          var g = d.elem();
          var h = g.x - f.x;
          h = (f.y - e.y) * h - (f.x - e.x) * (g.y - f.y);
          h > x.epsilon ? (b = !0) : h < -x.epsilon && (a = !0);
          if (b && a) {
            c = !1;
            break;
          }
          e = f;
          f = g;
          d = d.next;
        }
        if (c) {
          d = this.lverts.begin();
          for (g = d.elem(); ; ) {
            h = g.x - f.x;
            e = (f.y - e.y) * h - (f.x - e.x) * (g.y - f.y);
            e > x.epsilon ? (b = !0) : e < -x.epsilon && (a = !0);
            if (b && a) {
              c = !1;
              break;
            }
            break;
          }
          if (c)
            for (e = f, f = g, d = d.next, c = d.elem(); ; ) {
              d = c.x - f.x;
              f = (f.y - e.y) * d - (f.x - e.x) * (c.y - f.y);
              f > x.epsilon ? (b = !0) : f < -x.epsilon && (a = !0);
              if (b && a) break;
              break;
            }
        }
        if (b && a) return (this.validation = nb.get_CONCAVE());
        f = a = !0;
        e = this.lverts.begin();
        b = e.elem();
        for (e = e.next; null != e; ) {
          c = e.elem();
          if (!a) {
            f = !1;
            break;
          }
          g = !0;
          h = this.lverts.begin();
          d = h.elem();
          for (h = h.next; null != h; ) {
            var k = h.elem();
            if (b != d && b != k && c != d && c != k) {
              var p = b.x - d.x;
              var l = b.y - d.y;
              var m = c.x - b.x;
              var q = c.y - b.y;
              var r = k.x - d.x;
              var t = k.y - d.y;
              var u = q * r - m * t;
              if (
                u * u > x.epsilon &&
                ((u = 1 / u),
                (r = (t * p - r * l) * u),
                r > x.epsilon &&
                  r < 1 - x.epsilon &&
                  ((p = (q * p - m * l) * u),
                  p > x.epsilon && p < 1 - x.epsilon))
              ) {
                g = a = !1;
                break;
              }
            }
            d = k;
            h = h.next;
          }
          if (g)
            for (;;) {
              l = this.lverts.front();
              if (b == d || b == l || c == d || c == l) break;
              g = b.x - d.x;
              h = b.y - d.y;
              k = c.x - b.x;
              b = c.y - b.y;
              p = l.x - d.x;
              l = l.y - d.y;
              d = b * p - k * l;
              if (
                d * d > x.epsilon &&
                ((d = 1 / d),
                (p = (l * g - p * h) * d),
                p > x.epsilon &&
                  p < 1 - x.epsilon &&
                  ((b = (b * g - k * h) * d),
                  b > x.epsilon && b < 1 - x.epsilon))
              ) {
                a = !1;
                break;
              }
              break;
            }
          b = c;
          e = e.next;
        }
        if (f)
          for (;;) {
            e = this.lverts.front();
            if (!a) break;
            c = !0;
            d = this.lverts.begin();
            f = d.elem();
            for (d = d.next; null != d; ) {
              g = d.elem();
              if (
                b != f &&
                b != g &&
                e != f &&
                e != g &&
                ((h = b.x - f.x),
                (k = b.y - f.y),
                (p = e.x - b.x),
                (l = e.y - b.y),
                (q = g.x - f.x),
                (u = g.y - f.y),
                (m = l * q - p * u),
                m * m > x.epsilon &&
                  ((m = 1 / m),
                  (q = (u * h - q * k) * m),
                  q > x.epsilon &&
                    q < 1 - x.epsilon &&
                    ((h = (l * h - p * k) * m),
                    h > x.epsilon && h < 1 - x.epsilon)))
              ) {
                c = a = !1;
                break;
              }
              f = g;
              d = d.next;
            }
            if (c)
              for (;;) {
                h = this.lverts.front();
                if (b == f || b == h || e == f || e == h) break;
                c = b.x - f.x;
                d = b.y - f.y;
                g = e.x - b.x;
                b = e.y - b.y;
                e = h.x - f.x;
                h = h.y - f.y;
                f = b * e - g * h;
                if (
                  f * f > x.epsilon &&
                  ((f = 1 / f),
                  (e = (h * c - e * d) * f),
                  e > x.epsilon &&
                    e < 1 - x.epsilon &&
                    ((b = (b * c - g * d) * f),
                    b > x.epsilon && b < 1 - x.epsilon))
                ) {
                  a = !1;
                  break;
                }
                break;
              }
            break;
          }
        return a
          ? (this.validation = nb.get_VALID())
          : (this.validation = nb.get_SELF_INTERSECTING());
      }
      return this.validation;
    },
    validate_lverts: function () {
      this.zip_lverts &&
        ((this.zip_lverts = !1),
        2 < this.lverts.size() &&
          (this.validate_area_inertia(),
          0 > this.area &&
            (this.reverse_vertices(), (this.area = -this.area))));
    },
    cleanup_lvert: function (a) {
      for (
        var b = null, c = null, d = this.lverts.begin();
        null != d && d.elem() != a;

      )
        (b = null == b ? this.gverts.begin() : b.next),
          (c = null == c ? this.edges.begin() : c.next),
          (d = d.next);
      a = null == b ? this.gverts.front() : b.next.elem();
      this.gverts.erase(b);
      a.free();
      a.next = kb.zpp_pool;
      kb.zpp_pool = a;
      2 == this.edgeCnt
        ? ((c = this.edges.pop_unsafe()),
          c.free(),
          (c.next = Cb.zpp_pool),
          (Cb.zpp_pool = c),
          (c = this.edges.pop_unsafe()),
          c.free(),
          (c.next = Cb.zpp_pool),
          (Cb.zpp_pool = c),
          (this.edgeCnt = 0))
        : 0 != this.edgeCnt &&
          ((b = null == c ? this.edges.front() : c.next.elem()),
          this.edges.erase(c),
          b.free(),
          (b.next = Cb.zpp_pool),
          (Cb.zpp_pool = b),
          this.edgeCnt--);
    },
    zip_sanitation: null,
    splice_collinear: function () {
      this.zip_sanitation &&
        ((this.zip_sanitation = !1), this.splice_collinear_real());
    },
    splice_collinear_real: function () {
      if (
        null != this.lverts.begin() &&
        null != this.lverts.begin().next &&
        null != this.lverts.begin().next.next
      ) {
        for (var a = null, b = this.lverts.begin(); null != b; ) {
          var c = null == b.next ? this.lverts.begin() : b.next,
            d = b.elem();
          c = c.elem();
          $c.vec_dsq(d.x, d.y, c.x, c.y) < x.epsilon * x.epsilon
            ? (this.cleanup_lvert(b.elem()), (b = this.lverts.erase(a)))
            : ((a = b), (b = b.next));
        }
        if (!this.lverts.empty())
          for (;;) {
            a = !1;
            for (b = this.lverts.begin(); null != b; ) {
              d = null == b.next ? this.lverts.begin() : b.next;
              var e = null == d.next ? this.lverts.begin() : d.next;
              c = b.elem();
              var f = d.elem();
              e = e.elem();
              var g = f.x - c.x;
              c = (e.y - f.y) * g - (e.x - f.x) * (f.y - c.y);
              c * c >= x.epsilon * x.epsilon ||
                (this.cleanup_lvert(d.elem()),
                this.lverts.erase(null == b.next ? null : b),
                (a = !0));
              b = b.next;
            }
            if (!a) break;
          }
      }
    },
    reverse_vertices: function () {
      this.lverts.reverse();
      this.gverts.reverse();
      this.edges.reverse();
      var a = this.edges.iterator_at(this.edgeCnt - 1),
        b = this.edges.pop_unsafe();
      this.edges.insert(a, b);
      this.reverse_flag = !this.reverse_flag;
      null != this.wrap_lverts &&
        (this.wrap_lverts.zpp_inner.reverse_flag = this.reverse_flag);
      null != this.wrap_gverts &&
        (this.wrap_gverts.zpp_inner.reverse_flag = this.reverse_flag);
      null != this.wrap_edges &&
        (this.wrap_edges.zpp_inner.reverse_flag = this.reverse_flag);
    },
    validate_laxi: function () {
      if (this.zip_laxi) {
        this.zip_laxi = !1;
        this.validate_lverts();
        var a = this.edges.begin(),
          b = this.lverts.begin(),
          c = b.elem();
        for (b = b.next; null != b; ) {
          var d = b.elem(),
            e = a.elem();
          a = a.next;
          e.lp0 = c;
          e.lp1 = d;
          var f = c.x - d.x;
          var g = c.y - d.y;
          var h = Math.sqrt(f * f + g * g);
          e.length = h;
          h = 1 / h;
          f *= h;
          g *= h;
          h = f;
          f = -g;
          g = h;
          e.lprojection = f * c.x + g * c.y;
          e.lnormx = f;
          e.lnormy = g;
          null != e.wrap_lnorm &&
            ((e.wrap_lnorm.zpp_inner.x = f), (e.wrap_lnorm.zpp_inner.y = g));
          c = d;
          b = b.next;
        }
        d = this.lverts.front();
        a = a.elem();
        a.lp0 = c;
        a.lp1 = d;
        b = c.x - d.x;
        d = c.y - d.y;
        e = Math.sqrt(b * b + d * d);
        a.length = e;
        e = 1 / e;
        f = b * e;
        b = -(d * e);
        d = f;
        a.lprojection = b * c.x + d * c.y;
        a.lnormx = b;
        a.lnormy = d;
        null != a.wrap_lnorm &&
          ((a.wrap_lnorm.zpp_inner.x = b), (a.wrap_lnorm.zpp_inner.y = d));
      }
    },
    validate_gverts: function () {
      if (this.zip_gverts && null != this.body) {
        this.zip_gverts = !1;
        this.validate_lverts();
        this.body.validate_axis();
        for (
          var a = this.lverts.begin(), b = this.gverts.begin();
          null != b;

        ) {
          var c = b.elem(),
            d = a.elem();
          a = a.next;
          c.x =
            this.body.posx + (this.body.axisy * d.x - this.body.axisx * d.y);
          c.y =
            this.body.posy + (d.x * this.body.axisx + d.y * this.body.axisy);
          b = b.next;
        }
      }
    },
    validate_gaxi: function () {
      if (this.zip_gaxi && null != this.body) {
        this.zip_gaxi = !1;
        this.validate_laxi();
        this.body.validate_axis();
        this.validate_gverts();
        var a = this.edges.begin(),
          b = this.gverts.begin(),
          c = b.elem();
        for (b = b.next; null != b; ) {
          var d = b.elem(),
            e = a.elem();
          a = a.next;
          e.gp0 = c;
          e.gp1 = d;
          e.gnormx = this.body.axisy * e.lnormx - this.body.axisx * e.lnormy;
          e.gnormy = e.lnormx * this.body.axisx + e.lnormy * this.body.axisy;
          e.gprojection =
            this.body.posx * e.gnormx +
            this.body.posy * e.gnormy +
            e.lprojection;
          null != e.wrap_gnorm &&
            ((e.wrap_gnorm.zpp_inner.x = e.gnormx),
            (e.wrap_gnorm.zpp_inner.y = e.gnormy));
          e.tp0 = e.gp0.y * e.gnormx - e.gp0.x * e.gnormy;
          e.tp1 = e.gp1.y * e.gnormx - e.gp1.x * e.gnormy;
          c = d;
          b = b.next;
        }
        b = this.gverts.front();
        a = a.elem();
        a.gp0 = c;
        a.gp1 = b;
        a.gnormx = this.body.axisy * a.lnormx - this.body.axisx * a.lnormy;
        a.gnormy = a.lnormx * this.body.axisx + a.lnormy * this.body.axisy;
        a.gprojection =
          this.body.posx * a.gnormx + this.body.posy * a.gnormy + a.lprojection;
        null != a.wrap_gnorm &&
          ((a.wrap_gnorm.zpp_inner.x = a.gnormx),
          (a.wrap_gnorm.zpp_inner.y = a.gnormy));
        a.tp0 = a.gp0.y * a.gnormx - a.gp0.x * a.gnormy;
        a.tp1 = a.gp1.y * a.gnormx - a.gp1.x * a.gnormy;
      }
    },
    __validate_aabb: function () {
      this.validate_gverts();
      var a = this.gverts.front();
      this.aabb.minx = a.x;
      this.aabb.miny = a.y;
      this.aabb.maxx = a.x;
      this.aabb.maxy = a.y;
      for (a = this.gverts.begin().next; null != a; ) {
        var b = a.elem();
        b.x < this.aabb.minx && (this.aabb.minx = b.x);
        b.x > this.aabb.maxx && (this.aabb.maxx = b.x);
        b.y < this.aabb.miny && (this.aabb.miny = b.y);
        b.y > this.aabb.maxy && (this.aabb.maxy = b.y);
        a = a.next;
      }
    },
    _force_validate_aabb: function () {
      var a = this.lverts.begin(),
        b = this.gverts.front(),
        c = a.elem();
      a = a.next;
      b.x = this.body.posx + (this.body.axisy * c.x - this.body.axisx * c.y);
      b.y = this.body.posy + (c.x * this.body.axisx + c.y * this.body.axisy);
      this.aabb.minx = b.x;
      this.aabb.miny = b.y;
      this.aabb.maxx = b.x;
      this.aabb.maxy = b.y;
      for (b = this.gverts.begin().next; null != b; ) {
        c = b.elem();
        var d = a.elem();
        a = a.next;
        c.x = this.body.posx + (this.body.axisy * d.x - this.body.axisx * d.y);
        c.y = this.body.posy + (d.x * this.body.axisx + d.y * this.body.axisy);
        c.x < this.aabb.minx && (this.aabb.minx = c.x);
        c.x > this.aabb.maxx && (this.aabb.maxx = c.x);
        c.y < this.aabb.miny && (this.aabb.miny = c.y);
        c.y > this.aabb.maxy && (this.aabb.maxy = c.y);
        b = b.next;
      }
    },
    __validate_sweepRadius: function () {
      var a = 0,
        b = 0;
      this.validate_laxi();
      for (var c = this.lverts.begin(); null != c; ) {
        var d = c.elem();
        d = d.x * d.x + d.y * d.y;
        d > a && (a = d);
        c = c.next;
      }
      for (c = this.edges.begin(); null != c; ) {
        d = c.elem();
        if (d.lprojection < b && ((b = d.lprojection), 0 > b)) break;
        c = c.next;
      }
      0 > b && (b = 0);
      this.sweepRadius = Math.sqrt(a);
      this.sweepCoef = this.sweepRadius - b;
    },
    __validate_area_inertia: function () {
      if (
        null == this.lverts.begin() ||
        null == this.lverts.begin().next ||
        null == this.lverts.begin().next.next
      )
        this.inertia = this.area = 0;
      else {
        var a = (this.area = 0),
          b = 0,
          c = this.lverts.begin(),
          d = c.elem();
        c = c.next;
        var e = c.elem();
        for (c = c.next; null != c; ) {
          var f = c.elem(),
            g = e.y * d.x - e.x * d.y;
          a +=
            g *
            (e.x * e.x +
              e.y * e.y +
              (e.x * d.x + e.y * d.y) +
              (d.x * d.x + d.y * d.y));
          b += g;
          this.area += e.x * (f.y - d.y);
          d = e;
          e = f;
          c = c.next;
        }
        c = this.lverts.begin();
        f = c.elem();
        g = e.y * d.x - e.x * d.y;
        a +=
          g *
          (e.x * e.x +
            e.y * e.y +
            (e.x * d.x + e.y * d.y) +
            (d.x * d.x + d.y * d.y));
        b += g;
        this.area += e.x * (f.y - d.y);
        d = e;
        e = f;
        c = c.next;
        c = c.elem();
        f = e.y * d.x - e.x * d.y;
        g =
          e.x * e.x +
          e.y * e.y +
          (e.x * d.x + e.y * d.y) +
          (d.x * d.x + d.y * d.y);
        this.area += e.x * (c.y - d.y);
        this.inertia = (a + f * g) / (6 * (b + f));
        this.area *= 0.5;
        0 > this.area && ((this.area = -this.area), this.reverse_vertices());
      }
    },
    __validate_angDrag: function () {
      this.validate_area_inertia();
      this.validate_laxi();
      var a = 0,
        b = this.edges.begin(),
        c = 0,
        d = this.lverts.begin(),
        e = d.elem();
      for (d = d.next; null != d; ) {
        var f = d.elem(),
          g = b.elem();
        b = b.next;
        c += g.length;
        var h = f.x - e.x;
        var k = f.y - e.y;
        a +=
          g.length *
          x.fluidAngularDragFriction *
          this.material.dynamicFriction *
          g.lprojection *
          g.lprojection;
        var l =
          -(e.y * g.lnormx - e.x * g.lnormy) / (k * g.lnormx - h * g.lnormy);
        if (0 < l) {
          var m = 1 < l ? 1 : l;
          var q = e.x;
          var r = e.y;
          var t = m;
          q += h * t;
          r += k * t;
          t = g.lnormy * e.x - g.lnormx * e.y;
          q = g.lnormy * q - g.lnormx * r;
          a +=
            ((q * q * q - t * t * t) / (3 * (q - t))) *
            m *
            g.length *
            x.fluidAngularDrag;
        }
        1 > l &&
          ((l = 0 > l ? 0 : l),
          (m = e.x),
          (e = e.y),
          (q = l),
          (m += h * q),
          (e += k * q),
          (e = g.lnormy * m - g.lnormx * e),
          (h = g.lnormy * f.x - g.lnormx * f.y),
          (a +=
            ((h * h * h - e * e * e) / (3 * (h - e))) *
            x.fluidVacuumDrag *
            (1 - l) *
            g.length *
            x.fluidAngularDrag));
        e = f;
        d = d.next;
      }
      for (;;) {
        d = this.lverts.begin();
        d = d.elem();
        b = b.elem();
        c += b.length;
        f = d.x - e.x;
        g = d.y - e.y;
        a +=
          b.length *
          x.fluidAngularDragFriction *
          this.material.dynamicFriction *
          b.lprojection *
          b.lprojection;
        h = -(e.y * b.lnormx - e.x * b.lnormy) / (g * b.lnormx - f * b.lnormy);
        0 < h &&
          ((k = 1 < h ? 1 : h),
          (l = e.x),
          (m = e.y),
          (q = k),
          (l += f * q),
          (m += g * q),
          (q = b.lnormy * e.x - b.lnormx * e.y),
          (l = b.lnormy * l - b.lnormx * m),
          (a +=
            ((l * l * l - q * q * q) / (3 * (l - q))) *
            k *
            b.length *
            x.fluidAngularDrag));
        1 > h &&
          ((h = 0 > h ? 0 : h),
          (k = e.x),
          (e = e.y),
          (l = h),
          (k += f * l),
          (e += g * l),
          (e = b.lnormy * k - b.lnormx * e),
          (d = b.lnormy * d.x - b.lnormx * d.y),
          (a +=
            ((d * d * d - e * e * e) / (3 * (d - e))) *
            x.fluidVacuumDrag *
            (1 - h) *
            b.length *
            x.fluidAngularDrag));
        break;
      }
      this.angDrag = a / (this.inertia * c);
    },
    __validate_localCOM: function () {
      if (null == this.lverts.begin().next)
        (this.localCOMx = this.lverts.front().x),
          (this.localCOMy = this.lverts.front().y);
      else if (null == this.lverts.begin().next.next)
        (this.localCOMx = this.lverts.front().x),
          (this.localCOMy = this.lverts.front().y),
          (this.localCOMx += 1 * this.lverts.begin().next.elem().x),
          (this.localCOMy += 1 * this.lverts.begin().next.elem().y),
          (this.localCOMx *= 0.5),
          (this.localCOMy *= 0.5);
      else {
        var a = (this.localCOMy = this.localCOMx = 0),
          b = this.lverts.begin(),
          c = b.elem();
        b = b.next;
        var d = b.elem();
        for (b = b.next; null != b; ) {
          var e = b.elem();
          a += d.x * (e.y - c.y);
          c = e.y * d.x - e.x * d.y;
          this.localCOMx += (d.x + e.x) * c;
          this.localCOMy += (d.y + e.y) * c;
          c = d;
          d = e;
          b = b.next;
        }
        b = this.lverts.begin();
        e = b.elem();
        a += d.x * (e.y - c.y);
        c = e.y * d.x - e.x * d.y;
        this.localCOMx += (d.x + e.x) * c;
        this.localCOMy += (d.y + e.y) * c;
        c = d;
        d = e;
        b = b.next;
        b = b.elem();
        a += d.x * (b.y - c.y);
        c = b.y * d.x - b.x * d.y;
        this.localCOMx += (d.x + b.x) * c;
        this.localCOMy += (d.y + b.y) * c;
        a = 1 / (3 * a);
        this.localCOMx *= a;
        this.localCOMy *= a;
      }
    },
    __translate: function (a, b) {
      for (var c = this.lverts.begin(); null != c; ) {
        var d = c.elem();
        d.x += 1 * a;
        d.y += 1 * b;
        c = c.next;
      }
      this.invalidate_lverts();
    },
    __class__: Lh,
  });
  var We = function () {
    this.sweep = this.dynab = null;
    this.is_sweep = !1;
    this.space = null;
  };
  l["zpp_nape.space.ZPP_Broadphase"] = We;
  We.__name__ = ["zpp_nape", "space", "ZPP_Broadphase"];
  We.prototype = {
    space: null,
    is_sweep: null,
    sweep: null,
    dynab: null,
    insert: function (a) {
      this.is_sweep ? this.sweep.__insert(a) : this.dynab.__insert(a);
    },
    remove: function (a) {
      this.is_sweep ? this.sweep.__remove(a) : this.dynab.__remove(a);
    },
    sync: function (a) {
      this.is_sweep ? this.sweep.__sync(a) : this.dynab.__sync(a);
    },
    broadphase: function (a, b) {},
    clear: function () {},
    __class__: We,
  };
  var dc = function () {
    this.synced = this.first_sync = !1;
    this.snext = null;
    this.moved = !1;
    this.next = this.mnext = null;
    this.height = 0;
    this.parent = this.child1 = this.child2 = null;
    this.dyn = !1;
    this.aabb = this.shape = null;
    this.height = -1;
  };
  l["zpp_nape.space.ZPP_AABBNode"] = dc;
  dc.__name__ = ["zpp_nape", "space", "ZPP_AABBNode"];
  dc.prototype = {
    aabb: null,
    shape: null,
    dyn: null,
    parent: null,
    child1: null,
    child2: null,
    height: null,
    next: null,
    alloc: function () {
      null == jc.zpp_pool
        ? (this.aabb = new jc())
        : ((this.aabb = jc.zpp_pool),
          (jc.zpp_pool = this.aabb.next),
          (this.aabb.next = null));
      this.aabb.alloc();
      this.first_sync = this.synced = this.moved = !1;
    },
    free: function () {
      this.height = -1;
      var a = this.aabb;
      a.free();
      a.next = jc.zpp_pool;
      jc.zpp_pool = a;
      this.mnext =
        this.snext =
        this.next =
        this.child1 =
        this.child2 =
        this.parent =
          null;
    },
    mnext: null,
    moved: null,
    snext: null,
    synced: null,
    first_sync: null,
    isLeaf: function () {
      return null == this.child1;
    },
    __class__: dc,
  };
  var qb = function () {
    this.arb = this.next = null;
    this.id = this.di = 0;
    this.first = this.sleeping = !1;
    this.n1 = this.n2 = null;
  };
  l["zpp_nape.space.ZPP_AABBPair"] = qb;
  qb.__name__ = ["zpp_nape", "space", "ZPP_AABBPair"];
  qb.prototype = {
    n1: null,
    n2: null,
    first: null,
    sleeping: null,
    id: null,
    di: null,
    arb: null,
    next: null,
    alloc: function () {},
    free: function () {
      this.n1 = this.n2 = null;
      this.sleeping = !1;
    },
    __class__: qb,
  };
  var yc = function () {
    this.root = null;
  };
  l["zpp_nape.space.ZPP_AABBTree"] = yc;
  yc.__name__ = ["zpp_nape", "space", "ZPP_AABBTree"];
  yc.prototype = {
    root: null,
    clear: function () {
      if (null != this.root) {
        var a;
        this.root.next = null;
        for (a = this.root; null != a; ) {
          var b = a;
          a = b.next;
          b.next = null;
          b.isLeaf()
            ? ((b.shape.node = null),
              b.shape.removedFromSpace(),
              (b.shape = null))
            : (null != b.child1 && ((b.child1.next = a), (a = b.child1)),
              null != b.child2 && ((b.child2.next = a), (a = b.child2)));
          b.free();
          b.next = dc.zpp_pool;
          dc.zpp_pool = b;
        }
        this.root = null;
      }
    },
    inlined_insertLeaf: function (a) {
      if (null == this.root) (this.root = a), (this.root.parent = null);
      else {
        for (var b = a.aabb, c = this.root; !c.isLeaf(); ) {
          var d = c.child1,
            e = c.child2,
            f = c.aabb.perimeter();
          yc.tmpaabb.setCombine(c.aabb, b);
          var g = yc.tmpaabb.perimeter(),
            h = 2 * g;
          f = 2 * (g - f);
          yc.tmpaabb.setCombine(b, d.aabb);
          d.isLeaf()
            ? (g = yc.tmpaabb.perimeter() + f)
            : ((g = d.aabb.perimeter()), (g = yc.tmpaabb.perimeter() - g + f));
          yc.tmpaabb.setCombine(b, e.aabb);
          if (e.isLeaf()) f = yc.tmpaabb.perimeter() + f;
          else {
            var k = e.aabb.perimeter();
            f = yc.tmpaabb.perimeter() - k + f;
          }
          if (h < g && h < f) break;
          else c = g < f ? d : e;
        }
        d = c.parent;
        null == dc.zpp_pool
          ? (e = new dc())
          : ((e = dc.zpp_pool), (dc.zpp_pool = e.next), (e.next = null));
        e.alloc();
        e.parent = d;
        e.aabb.setCombine(b, c.aabb);
        e.height = c.height + 1;
        null != d
          ? (d.child1 == c ? (d.child1 = e) : (d.child2 = e),
            (e.child1 = c),
            (e.child2 = a),
            (c.parent = e),
            (a.parent = e))
          : ((e.child1 = c),
            (e.child2 = a),
            (c.parent = e),
            (this.root = a.parent = e));
        for (c = a.parent; null != c; )
          (c = this.balance(c)),
            (a = c.child1),
            (b = c.child2),
            (d = a.height),
            (e = b.height),
            (c.height = 1 + (d > e ? d : e)),
            c.aabb.setCombine(a.aabb, b.aabb),
            (c = c.parent);
      }
    },
    removeLeaf: function (a) {
      this.inlined_removeLeaf(a);
    },
    inlined_removeLeaf: function (a) {
      if (a == this.root) this.root = null;
      else {
        var b = a.parent,
          c = b.parent;
        a = b.child1 == a ? b.child2 : b.child1;
        if (null != c)
          for (
            c.child1 == b ? (c.child1 = a) : (c.child2 = a),
              a.parent = c,
              b.free(),
              b.next = dc.zpp_pool,
              dc.zpp_pool = b,
              b = c;
            null != b;

          )
            (b = this.balance(b)),
              (a = b.child1),
              (c = b.child2),
              b.aabb.setCombine(a.aabb, c.aabb),
              (a = a.height),
              (c = c.height),
              (b.height = 1 + (a > c ? a : c)),
              (b = b.parent);
        else
          (this.root = a),
            (a.parent = null),
            b.free(),
            (b.next = dc.zpp_pool),
            (dc.zpp_pool = b);
      }
    },
    balance: function (a) {
      if (a.isLeaf() || 2 > a.height) return a;
      var b = a.child1,
        c = a.child2,
        d = c.height - b.height;
      if (1 < d) {
        d = c.child1;
        var e = c.child2;
        c.child1 = a;
        c.parent = a.parent;
        a.parent = c;
        null != c.parent
          ? c.parent.child1 == a
            ? (c.parent.child1 = c)
            : (c.parent.child2 = c)
          : (this.root = c);
        d.height > e.height
          ? ((c.child2 = d),
            (a.child2 = e),
            (e.parent = a),
            a.aabb.setCombine(b.aabb, e.aabb),
            c.aabb.setCombine(a.aabb, d.aabb),
            (b = b.height),
            (e = e.height),
            (a.height = 1 + (b > e ? b : e)),
            (a = a.height),
            (b = d.height))
          : ((c.child2 = e),
            (a.child2 = d),
            (d.parent = a),
            a.aabb.setCombine(b.aabb, d.aabb),
            c.aabb.setCombine(a.aabb, e.aabb),
            (b = b.height),
            (d = d.height),
            (a.height = 1 + (b > d ? b : d)),
            (a = a.height),
            (b = e.height));
        c.height = 1 + (a > b ? a : b);
        return c;
      }
      return -1 > d
        ? ((d = b.child1),
          (e = b.child2),
          (b.child1 = a),
          (b.parent = a.parent),
          (a.parent = b),
          null != b.parent
            ? b.parent.child1 == a
              ? (b.parent.child1 = b)
              : (b.parent.child2 = b)
            : (this.root = b),
          d.height > e.height
            ? ((b.child2 = d),
              (a.child1 = e),
              (e.parent = a),
              a.aabb.setCombine(c.aabb, e.aabb),
              b.aabb.setCombine(a.aabb, d.aabb),
              (c = c.height),
              (e = e.height),
              (a.height = 1 + (c > e ? c : e)),
              (a = a.height),
              (c = d.height))
            : ((b.child2 = e),
              (a.child1 = d),
              (d.parent = a),
              a.aabb.setCombine(c.aabb, d.aabb),
              b.aabb.setCombine(a.aabb, e.aabb),
              (c = c.height),
              (d = d.height),
              (a.height = 1 + (c > d ? c : d)),
              (a = a.height),
              (c = e.height)),
          (b.height = 1 + (a > c ? a : c)),
          b)
        : a;
    },
    __class__: yc,
  };
  var li = function (a) {
    this.stree = this.dtree = this.pairs = this.syncs = this.moves = null;
    We.call(this);
    this.space = a;
    this.is_sweep = !1;
    this.dynab = this;
    this.stree = new yc();
    this.dtree = new yc();
  };
  l["zpp_nape.space.ZPP_DynAABBPhase"] = li;
  li.__name__ = ["zpp_nape", "space", "ZPP_DynAABBPhase"];
  li.__super__ = We;
  li.prototype = v(We.prototype, {
    stree: null,
    dtree: null,
    pairs: null,
    syncs: null,
    moves: null,
    dyn: function (a) {
      return a.body.isStatic() ? !1 : !a.body.component.sleeping;
    },
    __insert: function (a) {
      if (null == dc.zpp_pool) var b = new dc();
      else (b = dc.zpp_pool), (dc.zpp_pool = b.next), (b.next = null);
      b.alloc();
      b.shape = a;
      a.node = b;
      b.synced = !0;
      b.first_sync = !0;
      b.snext = this.syncs;
      this.syncs = b;
    },
    __remove: function (a) {
      var b = a.node;
      b.first_sync ||
        (b.dyn ? this.dtree.removeLeaf(b) : this.stree.removeLeaf(b));
      a.node = null;
      if (b.synced) {
        for (var c = null, d = this.syncs; null != d && d != b; )
          (c = d), (d = d.snext);
        null == c ? (this.syncs = d.snext) : (c.snext = d.snext);
        d.snext = null;
        b.synced = !1;
      }
      if (b.moved) {
        c = null;
        for (d = this.moves; null != d && d != b; ) (c = d), (d = d.mnext);
        null == c ? (this.moves = d.mnext) : (c.mnext = d.mnext);
        d.mnext = null;
        b.moved = !1;
      }
      c = null;
      for (var e = this.pairs; null != e; )
        (d = e.next),
          e.n1 == b || e.n2 == b
            ? (null == c ? (this.pairs = d) : (c.next = d),
              null != e.arb && (e.arb.pair = null),
              (e.arb = null),
              e.n1.shape.pairs.remove(e),
              e.n2.shape.pairs.remove(e),
              e.free(),
              (e.next = qb.zpp_pool),
              (qb.zpp_pool = e))
            : (c = e),
          (e = d);
      for (; !a.pairs.empty(); )
        (c = a.pairs.pop_unsafe()),
          c.n1 == b ? c.n2.shape.pairs.remove(c) : c.n1.shape.pairs.remove(c),
          null != c.arb && (c.arb.pair = null),
          (c.arb = null),
          c.free(),
          (c.next = qb.zpp_pool),
          (qb.zpp_pool = c);
      b.free();
      b.next = dc.zpp_pool;
      dc.zpp_pool = b;
    },
    __sync: function (a) {
      var b = a.node;
      b.synced ||
        (this.space.continuous || a.validate_aabb(),
        (b.dyn == this.dyn(a) && b.aabb.contains(a.aabb)) ||
          ((b.synced = !0), (b.snext = this.syncs), (this.syncs = b)));
    },
    broadphase: function (a, b) {
      for (var c = this.syncs; null != c; ) {
        var d = c.shape;
        c.first_sync
          ? (c.first_sync = !1)
          : (c.dyn ? this.dtree : this.stree).inlined_removeLeaf(c);
        var e = c.aabb;
        a.continuous || d.validate_aabb();
        e.setExpand(d.aabb, 3);
        ((c.dyn = this.dyn(d)) ? this.dtree : this.stree).inlined_insertLeaf(c);
        c.synced = !1;
        c = c.snext;
      }
      for (; null != this.syncs; )
        if (
          ((c = this.syncs),
          (this.syncs = c.snext),
          (c.snext = null),
          !c.moved &&
            ((c.moved = !1), (d = c.shape), !d.body.component.sleeping))
        ) {
          e = c.aabb;
          var f = null;
          null != this.dtree.root &&
            ((this.dtree.root.next = f), (f = this.dtree.root));
          for (; null != f; ) {
            var g = f;
            f = g.next;
            g.next = null;
            if (g != c)
              if (g.isLeaf()) {
                var h = g.shape;
                if (
                  !(
                    h.body == d.body ||
                    (h.body.isStatic() && d.body.isStatic())
                  ) &&
                  e.intersect(g.aabb)
                ) {
                  if (d.id < h.id) {
                    var k = d.id;
                    var l = h.id;
                  } else (k = h.id), (l = d.id);
                  for (
                    var m = null,
                      q = (
                        d.pairs.length < h.pairs.length ? d : h
                      ).pairs.begin();
                    null != q;

                  ) {
                    var r = q.elem();
                    if (r.id == k && r.di == l) {
                      m = r;
                      break;
                    }
                    q = q.next;
                  }
                  null != m
                    ? m.sleeping &&
                      ((m.sleeping = !1),
                      (m.next = this.pairs),
                      (this.pairs = m),
                      (m.first = !0))
                    : (null == qb.zpp_pool
                        ? (m = new qb())
                        : ((m = qb.zpp_pool),
                          (qb.zpp_pool = m.next),
                          (m.next = null)),
                      m.alloc(),
                      (m.n1 = c),
                      (m.n2 = g),
                      (m.id = k),
                      (m.di = l),
                      (m.next = this.pairs),
                      (this.pairs = m),
                      (m.first = !0),
                      d.pairs.inlined_add(m),
                      h.pairs.inlined_add(m));
                }
              } else
                e.intersect(g.aabb) &&
                  (null != g.child1 && ((g.child1.next = f), (f = g.child1)),
                  null != g.child2 && ((g.child2.next = f), (f = g.child2)));
          }
          null != this.stree.root &&
            ((this.stree.root.next = f), (f = this.stree.root));
          for (; null != f; )
            if (((g = f), (f = g.next), (g.next = null), g != c))
              if (g.isLeaf()) {
                if (
                  ((h = g.shape),
                  !(
                    h.body == d.body ||
                    (h.body.isStatic() && d.body.isStatic())
                  ) && e.intersect(g.aabb))
                ) {
                  d.id < h.id
                    ? ((k = d.id), (l = h.id))
                    : ((k = h.id), (l = d.id));
                  m = null;
                  for (
                    q = (d.pairs.length < h.pairs.length ? d : h).pairs.begin();
                    null != q;

                  ) {
                    r = q.elem();
                    if (r.id == k && r.di == l) {
                      m = r;
                      break;
                    }
                    q = q.next;
                  }
                  null != m
                    ? m.sleeping &&
                      ((m.sleeping = !1),
                      (m.next = this.pairs),
                      (this.pairs = m),
                      (m.first = !0))
                    : (null == qb.zpp_pool
                        ? (m = new qb())
                        : ((m = qb.zpp_pool),
                          (qb.zpp_pool = m.next),
                          (m.next = null)),
                      m.alloc(),
                      (m.n1 = c),
                      (m.n2 = g),
                      (m.id = k),
                      (m.di = l),
                      (m.next = this.pairs),
                      (this.pairs = m),
                      (m.first = !0),
                      d.pairs.inlined_add(m),
                      h.pairs.inlined_add(m));
                }
              } else
                e.intersect(g.aabb) &&
                  (null != g.child1 && ((g.child1.next = f), (f = g.child1)),
                  null != g.child2 && ((g.child2.next = f), (f = g.child2)));
        }
      for (; null != this.moves; )
        if (
          ((c = this.moves),
          (this.moves = c.mnext),
          (c.mnext = null),
          (c.moved = !1),
          (d = c.shape),
          !d.body.component.sleeping)
        ) {
          e = c.aabb;
          f = null;
          null != this.dtree.root &&
            ((this.dtree.root.next = f), (f = this.dtree.root));
          for (; null != f; )
            if (((g = f), (f = g.next), (g.next = null), g != c))
              if (g.isLeaf()) {
                if (
                  ((h = g.shape),
                  !(
                    h.body == d.body ||
                    (h.body.isStatic() && d.body.isStatic())
                  ) && e.intersect(g.aabb))
                ) {
                  d.id < h.id
                    ? ((k = d.id), (l = h.id))
                    : ((k = h.id), (l = d.id));
                  m = null;
                  for (
                    q = (d.pairs.length < h.pairs.length ? d : h).pairs.begin();
                    null != q;

                  ) {
                    r = q.elem();
                    if (r.id == k && r.di == l) {
                      m = r;
                      break;
                    }
                    q = q.next;
                  }
                  null != m
                    ? m.sleeping &&
                      ((m.sleeping = !1),
                      (m.next = this.pairs),
                      (this.pairs = m),
                      (m.first = !0))
                    : (null == qb.zpp_pool
                        ? (m = new qb())
                        : ((m = qb.zpp_pool),
                          (qb.zpp_pool = m.next),
                          (m.next = null)),
                      m.alloc(),
                      (m.n1 = c),
                      (m.n2 = g),
                      (m.id = k),
                      (m.di = l),
                      (m.next = this.pairs),
                      (this.pairs = m),
                      (m.first = !0),
                      d.pairs.inlined_add(m),
                      h.pairs.inlined_add(m));
                }
              } else
                e.intersect(g.aabb) &&
                  (null != g.child1 && ((g.child1.next = f), (f = g.child1)),
                  null != g.child2 && ((g.child2.next = f), (f = g.child2)));
          null != this.stree.root &&
            ((this.stree.root.next = f), (f = this.stree.root));
          for (; null != f; )
            if (((g = f), (f = g.next), (g.next = null), g != c))
              if (g.isLeaf()) {
                if (
                  ((h = g.shape),
                  !(
                    h.body == d.body ||
                    (h.body.isStatic() && d.body.isStatic())
                  ) && e.intersect(g.aabb))
                ) {
                  d.id < h.id
                    ? ((k = d.id), (l = h.id))
                    : ((k = h.id), (l = d.id));
                  m = null;
                  for (
                    q = (d.pairs.length < h.pairs.length ? d : h).pairs.begin();
                    null != q;

                  ) {
                    r = q.elem();
                    if (r.id == k && r.di == l) {
                      m = r;
                      break;
                    }
                    q = q.next;
                  }
                  null != m
                    ? m.sleeping &&
                      ((m.sleeping = !1),
                      (m.next = this.pairs),
                      (this.pairs = m),
                      (m.first = !0))
                    : (null == qb.zpp_pool
                        ? (m = new qb())
                        : ((m = qb.zpp_pool),
                          (qb.zpp_pool = m.next),
                          (m.next = null)),
                      m.alloc(),
                      (m.n1 = c),
                      (m.n2 = g),
                      (m.id = k),
                      (m.di = l),
                      (m.next = this.pairs),
                      (this.pairs = m),
                      (m.first = !0),
                      d.pairs.inlined_add(m),
                      h.pairs.inlined_add(m));
                }
              } else
                e.intersect(g.aabb) &&
                  (null != g.child1 && ((g.child1.next = f), (f = g.child1)),
                  null != g.child2 && ((g.child2.next = f), (f = g.child2)));
        }
      c = null;
      for (d = this.pairs; null != d; )
        d.first || d.n1.aabb.intersect(d.n2.aabb)
          ? ((e = d.n1.shape),
            (f = e.body),
            (g = d.n2.shape),
            (h = g.body),
            d.first ||
            (!f.component.sleeping && !f.isStatic()) ||
            (!h.component.sleeping && !h.isStatic())
              ? ((d.first = !1),
                e.aabb.intersect(g.aabb) &&
                  ((c = d.arb),
                  (d.arb = b
                    ? a.narrowPhase(
                        e,
                        g,
                        !f.isDynamic() || !h.isDynamic(),
                        d.arb,
                        !1
                      )
                    : a.continuousEvent(
                        e,
                        g,
                        !f.isDynamic() || !h.isDynamic(),
                        d.arb,
                        !1
                      )),
                  null == d.arb
                    ? null != c && (c.pair = null)
                    : (d.arb.pair = d)),
                (c = d))
              : ((d.sleeping = !0),
                null == c ? (this.pairs = d.next) : (c.next = d.next)),
            (d = d.next))
          : (null == c ? (this.pairs = d.next) : (c.next = d.next),
            d.n1.shape.pairs.inlined_remove(d),
            d.n2.shape.pairs.inlined_remove(d),
            (e = d.next),
            null != d.arb && (d.arb.pair = null),
            (d.arb = null),
            d.free(),
            (d.next = qb.zpp_pool),
            (qb.zpp_pool = d),
            (d = e));
    },
    clear: function () {
      for (; null != this.syncs; ) {
        var a = this.syncs.snext;
        this.syncs.snext = null;
        this.syncs.first_sync &&
          ((this.syncs.shape.node = null),
          this.syncs.shape.removedFromSpace(),
          (this.syncs.shape = null));
        this.syncs = a;
      }
      for (; null != this.moves; )
        (a = this.moves.mnext),
          (this.moves.mnext = null),
          this.moves.first_sync &&
            ((this.moves.shape.node = null),
            this.moves.shape.removedFromSpace(),
            (this.moves.shape = null)),
          (this.moves = a);
      for (; null != this.pairs; ) {
        a = this.pairs.next;
        null != this.pairs.arb && (this.pairs.arb.pair = null);
        this.pairs.arb = null;
        this.pairs.n1.shape.pairs.inlined_remove(this.pairs);
        this.pairs.n2.shape.pairs.inlined_remove(this.pairs);
        var b = this.pairs;
        b.free();
        b.next = qb.zpp_pool;
        qb.zpp_pool = b;
        this.pairs = a;
      }
      this.dtree.clear();
      this.stree.clear();
    },
    __class__: li,
  });
  var Tb = function () {
    this.waket = 0;
    this.sleep = !1;
    this.comps = null;
    this.length = 0;
    this._inuse = this.modified = this.pushmod = !1;
    this.next = null;
    this.comps = new rk();
  };
  l["zpp_nape.space.ZPP_Island"] = Tb;
  Tb.__name__ = ["zpp_nape", "space", "ZPP_Island"];
  Tb.prototype = {
    next: null,
    elem: function () {
      return this;
    },
    begin: function () {
      return this.next;
    },
    _inuse: null,
    modified: null,
    pushmod: null,
    length: null,
    inlined_add: function (a) {
      a._inuse = !0;
      a.next = this.begin();
      this.next = a;
      this.modified = !0;
      this.length++;
      return a;
    },
    pop: function () {
      this.inlined_pop();
    },
    inlined_pop: function () {
      var a = this.begin();
      this.next = a.next;
      a.elem()._inuse = !1;
      this.empty() && (this.pushmod = !0);
      this.modified = !0;
      this.length--;
    },
    inlined_pop_unsafe: function () {
      var a = this.front();
      this.pop();
      return a;
    },
    empty: function () {
      return null == this.begin();
    },
    front: function () {
      return this.begin().elem();
    },
    comps: null,
    sleep: null,
    waket: null,
    free: function () {},
    alloc: function () {
      this.waket = 0;
    },
    __class__: Tb,
  };
  var lc = function () {
    this.woken = !1;
    this.waket = 0;
    this.sleeping = !1;
    this.body = this.constraint = this.island = null;
    this.isBody = !1;
    this.rank = 0;
    this.next = this.parent = null;
    this.reset();
    this.woken = !1;
  };
  l["zpp_nape.space.ZPP_Component"] = lc;
  lc.__name__ = ["zpp_nape", "space", "ZPP_Component"];
  lc.prototype = {
    next: null,
    parent: null,
    rank: null,
    isBody: null,
    body: null,
    constraint: null,
    island: null,
    sleeping: null,
    waket: null,
    woken: null,
    free: function () {
      this.constraint = this.body = null;
    },
    alloc: function () {},
    reset: function () {
      this.sleeping = !1;
      this.island = null;
      this.parent = this;
      this.rank = 0;
    },
    __class__: lc,
  };
  var mc = function () {
    this.freed = this.lazydel = !1;
    this.length = 0;
    this._inuse = this.modified = this.pushmod = !1;
    this.int1 = this.int2 = this.next = null;
    this.id = this.di = 0;
    this.arbiters = new Qg();
  };
  l["zpp_nape.space.ZPP_CallbackSet"] = mc;
  mc.__name__ = ["zpp_nape", "space", "ZPP_CallbackSet"];
  mc.get = function (a, b) {
    if (null == mc.zpp_pool) var c = new mc();
    else (c = mc.zpp_pool), (mc.zpp_pool = c.next), (c.next = null);
    c.alloc();
    a.id < b.id ? ((c.int1 = a), (c.int2 = b)) : ((c.int1 = b), (c.int2 = a));
    c.id = c.int1.id;
    c.di = c.int2.id;
    return c;
  };
  mc.prototype = {
    id: null,
    di: null,
    int1: null,
    int2: null,
    arbiters: null,
    COLLISIONstate: null,
    COLLISIONstamp: null,
    SENSORstate: null,
    SENSORstamp: null,
    FLUIDstate: null,
    FLUIDstamp: null,
    next: null,
    elem: function () {
      return this;
    },
    begin: function () {
      return this.next;
    },
    _inuse: null,
    modified: null,
    pushmod: null,
    length: null,
    inlined_add: function (a) {
      a._inuse = !0;
      a.next = this.begin();
      this.next = a;
      this.modified = !0;
      this.length++;
      return a;
    },
    pop: function () {
      this.inlined_pop();
    },
    inlined_pop: function () {
      var a = this.begin();
      this.next = a.next;
      a.elem()._inuse = !1;
      this.empty() && (this.pushmod = !0);
      this.modified = !0;
      this.length--;
    },
    pop_unsafe: function () {
      return this.inlined_pop_unsafe();
    },
    inlined_pop_unsafe: function () {
      var a = this.front();
      this.pop();
      return a;
    },
    inlined_erase: function (a) {
      var b;
      if (null == a) {
        var c = this.begin();
        this.next = b = c.next;
        this.empty() && (this.pushmod = !0);
      } else
        (c = a.next),
          (b = c.next),
          (a.next = b),
          null == b && (this.pushmod = !0);
      c.elem()._inuse = !1;
      this.modified = !0;
      this.length--;
      this.pushmod = !0;
      return b;
    },
    empty: function () {
      return null == this.begin();
    },
    front: function () {
      return this.begin().elem();
    },
    freed: null,
    lazydel: null,
    free: function () {
      this.int1 = this.int2 = null;
      this.id = this.di = -1;
      this.freed = !0;
    },
    alloc: function () {
      this.lazydel = this.freed = !1;
      this.COLLISIONstate = 1;
      this.COLLISIONstamp = 0;
      this.SENSORstate = 1;
      this.SENSORstamp = 0;
      this.FLUIDstate = 1;
      this.FLUIDstamp = 0;
    },
    add_arb: function (a) {
      if (this.arbiters.inlined_has(a)) return !1;
      this.arbiters.inlined_add(a);
      return !0;
    },
    remove_arb: function (a) {
      this.arbiters.inlined_remove(a);
    },
    empty_arb: function (a) {
      var b = !0;
      for (var c = this.arbiters.begin(); null != c; )
        if (0 == (c.elem().type & a)) c = c.next;
        else {
          b = !1;
          break;
        }
      return b;
    },
    really_empty: function () {
      return this.arbiters.empty();
    },
    sleeping: function () {
      var a = !0;
      for (var b = this.arbiters.begin(); null != b; )
        if (b.elem().sleeping) b = b.next;
        else {
          a = !1;
          break;
        }
      return a;
    },
    __class__: mc,
  };
  var sk = function (a) {
    this.cbsets = this.space = null;
    null == md.zpp_pool
      ? (this.cbsets = new md())
      : ((this.cbsets = md.zpp_pool),
        (md.zpp_pool = this.cbsets.next),
        (this.cbsets.next = null));
    this.cbsets.alloc();
    this.cbsets.lt = Ea.setlt;
    this.space = a;
  };
  l["zpp_nape.space.ZPP_CbSetManager"] = sk;
  sk.__name__ = ["zpp_nape", "space", "ZPP_CbSetManager"];
  sk.prototype = {
    cbsets: null,
    space: null,
    get: function (a) {
      if (a.empty()) return null;
      if (null == Ea.zpp_pool) var b = new Ea();
      else (b = Ea.zpp_pool), (Ea.zpp_pool = b.next), (b.next = null);
      b.alloc();
      var c = b.cbTypes;
      b.cbTypes = a;
      var d = this.cbsets.find_weak(b);
      null != d
        ? (a = d.data)
        : ((a = Ea.get(a)), this.cbsets.insert(a), (a.manager = this));
      b.cbTypes = c;
      b.free();
      b.next = Ea.zpp_pool;
      Ea.zpp_pool = b;
      return a;
    },
    remove: function (a) {
      for (this.cbsets.remove(a); !a.cbpairs.empty(); ) {
        var b = a.cbpairs.pop_unsafe();
        b.a != b.b &&
          (a == b.a ? b.b.cbpairs.remove(b) : b.a.cbpairs.remove(b));
        b.free();
        b.next = cc.zpp_pool;
        cc.zpp_pool = b;
      }
      a.manager = null;
    },
    clear: function () {},
    validate: function () {
      if (!this.cbsets.empty()) {
        for (var a = this.cbsets.parent; null != a.prev; ) a = a.prev;
        for (; null != a; )
          if ((a.data.validate(), null != a.next))
            for (a = a.next; null != a.prev; ) a = a.prev;
          else {
            for (; null != a.parent && a == a.parent.next; ) a = a.parent;
            a = a.parent;
          }
      }
    },
    pair: function (a, b) {
      for (
        var c = null,
          d = (
            a.cbpairs.length < b.cbpairs.length ? a.cbpairs : b.cbpairs
          ).begin();
        null != d;

      ) {
        var e = d.elem();
        if ((e.a == a && e.b == b) || (e.a == b && e.b == a)) {
          c = e;
          break;
        }
        d = d.next;
      }
      null == c &&
        ((c = cc.get(a, b)), a.cbpairs.add(c), b != a && b.cbpairs.add(c));
      c.validate();
      return c;
    },
    valid_listener: function (a) {
      return a.space == this.space;
    },
    __class__: sk,
  };
  var Cj = function (a, b) {
    this.precb = this.prelisteners = null;
    this.continuous = !1;
    this.toiEvents = null;
    this.pre_dt = 0;
    this.c_arbiters_true =
      this.c_arbiters_false =
      this.f_arbiters =
      this.s_arbiters =
      this.live =
      this.wrap_live =
      this.live_constraints =
      this.wrap_livecon =
      this.staticsleep =
      this.islands =
      this.listeners =
      this.wrap_listeners =
      this.callbacks =
      this.callbackset_list =
      this.cbsets =
        null;
    this.sortcontacts = !1;
    this.time = 0;
    this.midstep = !1;
    this.stamp = 0;
    this.bodies =
      this.wrap_bodies =
      this.compounds =
      this.wrap_compounds =
      this.constraints =
      this.wrap_constraints =
      this.kinematics =
      this.bphase =
      this.__static =
        null;
    this.gravityx = this.gravityy = 0;
    this.outer = null;
    this.toiEvents = new tk();
    this.global_ang_drag = this.global_lin_drag = 0.015;
    this.precb = new yh();
    this.precb.zpp_inner = new Re();
    this.sortcontacts = !0;
    this.pre_dt = 0;
    null == b || b == hd.get_DYNAMIC_AABB_TREE()
      ? (this.bphase = new li(this))
      : b == hd.get_SWEEP_AND_PRUNE() && (this.bphase = new mi(this));
    this.time = 0;
    null != a
      ? ((this.gravityx = a.x), (this.gravityy = a.y))
      : (this.gravityy = this.gravityx = 0);
    this.bodies = new Ve();
    this.wrap_bodies = pe.get(this.bodies);
    this.wrap_bodies.zpp_inner.adder = m(this, this.bodies_adder);
    this.wrap_bodies.zpp_inner.subber = m(this, this.bodies_subber);
    this.compounds = new pf();
    this.wrap_compounds = jf.get(this.compounds);
    this.wrap_compounds.zpp_inner.adder = m(this, this.compounds_adder);
    this.wrap_compounds.zpp_inner.subber = m(this, this.compounds_subber);
    this.kinematics = new Ve();
    this.c_arbiters_true = new ni();
    this.c_arbiters_false = new ni();
    this.f_arbiters = new uk();
    this.s_arbiters = new vk();
    this.islands = new Tb();
    this.live = new Ve();
    this.wrap_live = pe.get(this.live, !0);
    this.staticsleep = new Ve();
    this.constraints = new Se();
    this.wrap_constraints = rd.get(this.constraints);
    this.wrap_constraints.zpp_inner.adder = m(this, this.constraints_adder);
    this.wrap_constraints.zpp_inner.subber = m(this, this.constraints_subber);
    this.live_constraints = new Se();
    this.wrap_livecon = rd.get(this.live_constraints, !0);
    this.__static = hf.__static();
    this.__static.zpp_inner.space = this;
    this.callbacks = new Re();
    this.midstep = !1;
    this.listeners = new oi();
    this.wrap_listeners = Tf.get(this.listeners);
    this.wrap_listeners.zpp_inner.adder = m(this, this.listeners_adder);
    this.wrap_listeners.zpp_inner.subber = m(this, this.listeners_subber);
    this.callbackset_list = new mc();
    this.mrca1 = new ve();
    this.mrca2 = new ve();
    this.prelisteners = new ig();
    this.cbsets = new sk(this);
  };
  l["zpp_nape.space.ZPP_Space"] = Cj;
  Cj.__name__ = ["zpp_nape", "space", "ZPP_Space"];
  Cj.prototype = {
    outer: null,
    gravityx: null,
    gravityy: null,
    bodies: null,
    wrap_bodies: null,
    compounds: null,
    wrap_compounds: null,
    constraints: null,
    wrap_constraints: null,
    kinematics: null,
    bphase: null,
    __static: null,
    global_lin_drag: null,
    global_ang_drag: null,
    stamp: null,
    midstep: null,
    time: null,
    sortcontacts: null,
    c_arbiters_true: null,
    c_arbiters_false: null,
    f_arbiters: null,
    s_arbiters: null,
    live: null,
    wrap_live: null,
    live_constraints: null,
    wrap_livecon: null,
    staticsleep: null,
    islands: null,
    listeners: null,
    wrap_listeners: null,
    callbacks: null,
    callbackset_list: null,
    cbsets: null,
    clear: function () {
      for (; !this.listeners.empty(); ) {
        var a = this.listeners.pop_unsafe();
        this.remListener(a);
      }
      for (; !this.callbackset_list.empty(); )
        (a = this.callbackset_list.pop_unsafe()),
          a.arbiters.clear(),
          a.free(),
          (a.next = mc.zpp_pool),
          (mc.zpp_pool = a);
      for (; !this.c_arbiters_true.empty(); )
        this.c_arbiters_true.pop_unsafe().retire();
      for (; !this.c_arbiters_false.empty(); )
        this.c_arbiters_false.pop_unsafe().retire();
      for (; !this.s_arbiters.empty(); ) this.s_arbiters.pop_unsafe().retire();
      for (; !this.f_arbiters.empty(); ) this.f_arbiters.pop_unsafe().retire();
      for (this.bphase.clear(); !this.bodies.empty(); ) {
        a = this.bodies.pop_unsafe();
        if (null != a.component) {
          var b = a.component.island;
          if (null != b) {
            for (; !b.comps.empty(); ) b.comps.pop_unsafe().reset();
            b.free();
            b.next = Tb.zpp_pool;
            Tb.zpp_pool = b;
          }
        }
        a.removedFromSpace();
        a.space = null;
      }
      for (; !this.constraints.empty(); ) {
        a = this.constraints.pop_unsafe();
        if (null != a.component && ((b = a.component.island), null != b)) {
          for (; !b.comps.empty(); ) b.comps.pop_unsafe().reset();
          b.free();
          b.next = Tb.zpp_pool;
          Tb.zpp_pool = b;
        }
        a.removedFromSpace();
        a.space = null;
      }
      this.kinematics.clear();
      for (a = new pf(); !this.compounds.empty(); )
        (b = this.compounds.pop_unsafe()), a.add(b);
      for (; !a.empty(); ) {
        b = a.pop_unsafe();
        b.removedFromSpace();
        b.space = null;
        for (var c = b.bodies.begin(); null != c; ) {
          var d = c.elem();
          if (null != d.component) {
            var e = d.component.island;
            if (null != e) {
              for (; !e.comps.empty(); ) e.comps.pop_unsafe().reset();
              e.free();
              e.next = Tb.zpp_pool;
              Tb.zpp_pool = e;
            }
          }
          d.removedFromSpace();
          d.space = null;
          c = c.next;
        }
        for (c = b.constraints.begin(); null != c; ) {
          d = c.elem();
          if (null != d.component && ((e = d.component.island), null != e)) {
            for (; !e.comps.empty(); ) e.comps.pop_unsafe().reset();
            e.free();
            e.next = Tb.zpp_pool;
            Tb.zpp_pool = e;
          }
          d.removedFromSpace();
          d.space = null;
          c = c.next;
        }
        for (b = b.compounds.begin(); null != b; )
          (c = b.elem()), a.add(c), (b = b.next);
      }
      this.staticsleep.clear();
      this.live.clear();
      this.live_constraints.clear();
      this.time = this.stamp = 0;
      this.mrca1.clear();
      this.mrca2.clear();
      this.prelisteners.clear();
      this.cbsets.clear();
    },
    bodies_adder: function (a) {
      return a.zpp_inner.space != this
        ? (null != a.zpp_inner.space &&
            a.zpp_inner.space.outer.get_bodies().remove(a),
          this.addBody(a.zpp_inner),
          !0)
        : !1;
    },
    bodies_subber: function (a) {
      this.remBody(a.zpp_inner);
    },
    compounds_adder: function (a) {
      return a.zpp_inner.space != this
        ? (null != a.zpp_inner.space &&
            a.zpp_inner.space.wrap_compounds.remove(a),
          this.addCompound(a.zpp_inner),
          !0)
        : !1;
    },
    compounds_subber: function (a) {
      this.remCompound(a.zpp_inner);
    },
    constraints_adder: function (a) {
      return a.zpp_inner.space != this
        ? (null != a.zpp_inner.space &&
            a.zpp_inner.space.outer.get_constraints().remove(a),
          this.addConstraint(a.zpp_inner),
          !0)
        : !1;
    },
    constraints_subber: function (a) {
      this.remConstraint(a.zpp_inner);
    },
    listeners_adder: function (a) {
      return a.zpp_inner.space != this
        ? (null != a.zpp_inner.space &&
            a.zpp_inner.space.outer.get_listeners().remove(a),
          this.addListener(a.zpp_inner),
          !0)
        : !1;
    },
    listeners_subber: function (a) {
      this.remListener(a.zpp_inner);
    },
    revoke_listener: function (a) {},
    unrevoke_listener: function (a) {},
    addListener: function (a) {
      a.space = this;
      a.addedToSpace();
      null != a.interaction && this.unrevoke_listener(a.interaction);
    },
    remListener: function (a) {
      null != a.interaction && this.revoke_listener(a.interaction);
      a.removedFromSpace();
      a.space = null;
    },
    add_callbackset: function (a) {
      a.int1.cbsets.inlined_add(a);
      a.int2.cbsets.inlined_add(a);
      this.callbackset_list.inlined_add(a);
    },
    remove_callbackset: function (a) {
      a.lazydel = !0;
      a.int1.cbsets.inlined_remove(a);
      a.int2.cbsets.inlined_remove(a);
    },
    transmitType: function (a, b) {
      a.world ||
        ((a.component.waket = this.stamp + (this.midstep ? 0 : 1)),
        a.isKinematic() && (a.kinematicDelaySleep = !0),
        a.component.sleeping && this.really_wake(a, !1));
      2 == a.type
        ? this.live.remove(a)
        : 3 == a.type
        ? (this.kinematics.remove(a), this.staticsleep.remove(a))
        : 1 == a.type && this.staticsleep.remove(a);
      a.type = b;
      3 == a.type && this.kinematics.add(a);
      1 == a.type && this.static_validation(a);
      a.component.sleeping = !0;
      a.world ||
        ((a.component.waket = this.stamp + (this.midstep ? 0 : 1)),
        a.isKinematic() && (a.kinematicDelaySleep = !0),
        a.component.sleeping && this.really_wake(a, !0));
    },
    added_shape: function (a, b) {
      null == b && (b = !1);
      b ||
        ((b = a.body),
        b.world ||
          ((b.component.waket = this.stamp + (this.midstep ? 0 : 1)),
          b.isKinematic() && (b.kinematicDelaySleep = !0),
          b.component.sleeping && this.really_wake(b, !1)));
      this.bphase.insert(a);
      a.addedToSpace();
    },
    removed_shape: function (a, b) {
      null == b && (b = !1);
      var c = this,
        d = a.body;
      b || d.wake();
      b = null;
      for (var e = d.arbiters.begin(); null != e; ) {
        var f = [e.elem()];
        if (f[0].ws1 == a || f[0].ws2 == a) {
          if (0 != f[0].present)
            for (
              this.MRCA_chains(f[0].ws1, f[0].ws2), e = this.mrca1.begin();
              null != e;

            ) {
              for (var g = e.elem(), h = this.mrca2.begin(); null != h; ) {
                var k = h.elem(),
                  l = g.cbSet,
                  m = k.cbSet;
                l.validate();
                m.validate();
                Ea.empty_intersection(l, m) ||
                  ((k = [ya.get(g, k)]),
                  k[0].remove_arb(f[0]),
                  f[0].present--,
                  Ea.find_all(
                    l,
                    m,
                    1,
                    (function (a, b) {
                      return function (d) {
                        if (
                          0 != (d.itype & b[0].type) &&
                          a[0].empty_arb(d.itype)
                        ) {
                          var e = c.push_callback(d);
                          e.event = 1;
                          ya.int_callback(a[0], d, e);
                          e.set = a[0];
                        }
                      };
                    })(k, f)
                  ),
                  k[0].really_empty() && this.remove_callbackset(k[0]));
                h = h.next;
              }
              e = e.next;
            }
          f[0].b1 != d &&
            f[0].b1.isDynamic() &&
            ((e = f[0].b1),
            e.world ||
              ((e.component.waket = this.stamp + (this.midstep ? 0 : 1)),
              e.isKinematic() && (e.kinematicDelaySleep = !0),
              e.component.sleeping && this.really_wake(e, !1)));
          f[0].b2 != d &&
            f[0].b2.isDynamic() &&
            ((e = f[0].b2),
            e.world ||
              ((e.component.waket = this.stamp + (this.midstep ? 0 : 1)),
              e.isKinematic() && (e.kinematicDelaySleep = !0),
              e.component.sleeping && this.really_wake(e, !1)));
          f[0].lazyRetire(this, d);
          e = d.arbiters.erase(b);
        } else (b = e), (e = e.next);
      }
      this.bphase.remove(a);
      a.removedFromSpace();
    },
    addConstraint: function (a) {
      a.space = this;
      a.addedToSpace();
      a.active && ((a.component.sleeping = !0), this.wake_constraint(a, !0));
    },
    remConstraint: function (a) {
      a.active &&
        (this.wake_constraint(a, !0), this.live_constraints.remove(a));
      a.removedFromSpace();
      a.space = null;
    },
    addCompound: function (a) {
      a.space = this;
      a.addedToSpace();
      for (var b = a.bodies.begin(); null != b; ) {
        var c = b.elem();
        this.addBody(c);
        b = b.next;
      }
      for (b = a.constraints.begin(); null != b; )
        (c = b.elem()), this.addConstraint(c), (b = b.next);
      for (a = a.compounds.begin(); null != a; )
        (b = a.elem()), this.addCompound(b), (a = a.next);
    },
    remCompound: function (a) {
      for (var b = a.bodies.begin(); null != b; ) {
        var c = b.elem();
        this.remBody(c);
        b = b.next;
      }
      for (b = a.constraints.begin(); null != b; )
        (c = b.elem()), this.remConstraint(c), (b = b.next);
      for (b = a.compounds.begin(); null != b; )
        (c = b.elem()), this.remCompound(c), (b = b.next);
      a.removedFromSpace();
      a.space = null;
    },
    addBody: function (a, b) {
      null == b && (b = -1);
      a.space = this;
      a.addedToSpace();
      a.component.sleeping = !0;
      a.world ||
        ((a.component.waket = this.stamp + (this.midstep ? 0 : 1)),
        a.isKinematic() && (a.kinematicDelaySleep = !0),
        a.component.sleeping && this.really_wake(a, !0));
      for (var c = a.shapes.begin(); null != c; ) {
        var d = c.elem();
        this.added_shape(d, !0);
        c = c.next;
      }
      a.isStatic()
        ? this.static_validation(a)
        : a.isDynamic() || (3 != b && this.kinematics.add(a));
    },
    remBody: function (a, b) {
      null == b && (b = -1);
      a.isStatic()
        ? (a.world ||
            ((a.component.waket = this.stamp + (this.midstep ? 0 : 1)),
            a.isKinematic() && (a.kinematicDelaySleep = !0),
            a.component.sleeping && this.really_wake(a, !0)),
          this.staticsleep.remove(a))
        : a.isDynamic()
        ? (a.world ||
            ((a.component.waket = this.stamp + (this.midstep ? 0 : 1)),
            a.isKinematic() && (a.kinematicDelaySleep = !0),
            a.component.sleeping && this.really_wake(a, !0)),
          this.live.remove(a))
        : (3 != b && this.kinematics.remove(a),
          a.world ||
            ((a.component.waket = this.stamp + (this.midstep ? 0 : 1)),
            a.isKinematic() && (a.kinematicDelaySleep = !0),
            a.component.sleeping && this.really_wake(a, !0)),
          this.staticsleep.remove(a));
      for (b = a.shapes.begin(); null != b; ) {
        var c = b.elem();
        this.removed_shape(c, !0);
        b = b.next;
      }
      a.removedFromSpace();
      a.space = null;
    },
    push_callback: function (a) {
      if (null == Re.zpp_pool) var b = new Re();
      else (b = Re.zpp_pool), (Re.zpp_pool = b.next), (b.next = null);
      b.alloc();
      this.callbacks.push(b);
      b.listener = a;
      return b;
    },
    pre_dt: null,
    step: function (a, b, c) {
      var d = this;
      this.time += a;
      this.pre_dt = a;
      this.midstep = !0;
      this.stamp++;
      this.validation();
      this.bphase.broadphase(this, !0);
      this.prestep(a);
      if (this.sortcontacts) {
        var e = this.c_arbiters_false;
        if (!e.empty() && null != e.begin().next) {
          for (
            var f = e.begin(),
              g = null,
              h = null,
              k = null,
              l = null,
              m = 1,
              q,
              r,
              t;
            ;

          ) {
            q = 0;
            h = f;
            for (g = f = null; null != h; ) {
              ++q;
              k = h;
              r = 0;
              for (t = m; null != k && r < m; ) ++r, (k = k.next);
              for (; 0 < r || (0 < t && null != k); )
                0 == r
                  ? ((l = k), (k = k.next), --t)
                  : 0 == t || null == k
                  ? ((l = h), (h = h.next), --r)
                  : (
                      h.elem().active && k.elem().active
                        ? h.elem().oc1.dist < k.elem().oc1.dist
                        : 1
                    )
                  ? ((l = h), (h = h.next), --r)
                  : ((l = k), (k = k.next), --t),
                  null != g ? (g.next = l) : (f = l),
                  (g = l);
              h = k;
            }
            g.next = null;
            m <<= 1;
            if (!(1 < q)) break;
          }
          e.setbegin(f);
        }
      }
      this.updateVel(a);
      this.warmStart();
      this.iterateVel(b);
      for (b = this.kinematics.begin(); null != b; )
        (e = b.elem()),
          (e.pre_posx = e.posx),
          (e.pre_posy = e.posy),
          (e.pre_rot = e.rot),
          (b = b.next);
      for (b = this.live.begin(); null != b; )
        (e = b.elem()),
          (e.pre_posx = e.posx),
          (e.pre_posy = e.posy),
          (e.pre_rot = e.rot),
          (b = b.next);
      this.updatePos(a);
      this.continuous = !0;
      this.continuousCollisions(a);
      this.continuous = !1;
      this.iteratePos(c);
      for (c = this.kinematics.begin(); null != c; )
        (b = c.elem()),
          (e = b.pre_rot != b.rot),
          (b.posx == b.pre_posx && b.posy == b.pre_posy) || b.invalidate_pos(),
          e && b.invalidate_rot(),
          (c = c.next);
      for (c = this.live.begin(); null != c; )
        (b = c.elem()),
          (e = b.pre_rot != b.rot),
          (b.posx == b.pre_posx && b.posy == b.pre_posy) || b.invalidate_pos(),
          e && b.invalidate_rot(),
          (c = c.next);
      c = null;
      for (b = this.staticsleep.begin(); null != b; )
        (e = b.elem()),
          !e.isKinematic() || (0 == e.velx && 0 == e.vely && 0 == e.angvel)
            ? e.kinematicDelaySleep
              ? ((e.kinematicDelaySleep = !1), (b = b.next))
              : ((e.component.sleeping = !0),
                (b = this.staticsleep.inlined_erase(c)))
            : ((c = b), (b = b.next));
      this.doForests(a);
      this.sleepArbiters();
      this.midstep = !1;
      c = null;
      for (a = this.callbackset_list.begin(); null != a; )
        (b = [a.elem()]),
          b[0].really_empty()
            ? ((a = this.callbackset_list.inlined_erase(c)),
              (b = b[0]),
              b.free(),
              (b.next = mc.zpp_pool),
              (mc.zpp_pool = b))
            : ((c = [b[0].sleeping()]),
              Ea.find_all(
                b[0].int1.cbSet,
                b[0].int2.cbSet,
                6,
                (function (a, b) {
                  return function (c) {
                    if (
                      (!a[0] || c.allowSleepingCallbacks) &&
                      !b[0].empty_arb(c.itype)
                    ) {
                      var e = d.push_callback(c);
                      e.event = 6;
                      ya.int_callback(b[0], c, e);
                      e.set = b[0];
                    }
                  };
                })(c, b)
              ),
              (c = a),
              (a = a.next));
      for (; !this.callbacks.empty(); )
        (a = this.callbacks.pop()),
          0 == a.listener.type
            ? a.listener.body.handler(a.wrapper_body())
            : 1 == a.listener.type
            ? a.listener.constraint.handler(a.wrapper_con())
            : 2 == a.listener.type &&
              a.listener.interaction.handleri(a.wrapper_int()),
          a.free(),
          (a.next = Re.zpp_pool),
          (Re.zpp_pool = a);
    },
    toiEvents: null,
    continuousCollisions: function (a) {
      var b = (2 * Math.PI) / a;
      this.bphase.broadphase(this, !1);
      for (var c = 0; 1 > c && !this.toiEvents.empty(); ) {
        var d = null;
        c = 2;
        for (
          var e = !1, f = null, g = null, h = this.toiEvents.begin();
          null != h;

        ) {
          var k = h.elem(),
            l = k.s1.body,
            m = k.s2.body;
          if (l.sweepFrozen && m.sweepFrozen)
            if (0 != k.toi && V.testCollide_safe(k.s1, k.s2)) k.toi = 0;
            else {
              h = this.toiEvents.erase(g);
              k.free();
              k.next = Vb.zpp_pool;
              Vb.zpp_pool = k;
              continue;
            }
          if (k.frozen1 != l.sweepFrozen || k.frozen2 != m.sweepFrozen)
            if (k.kinematic) {
              h = this.toiEvents.erase(g);
              k.free();
              k.next = Vb.zpp_pool;
              Vb.zpp_pool = k;
              continue;
            } else if (
              ((k.frozen1 = l.sweepFrozen),
              (k.frozen2 = m.sweepFrozen),
              k.frozen1 &&
                ((l = k.s1),
                (k.s1 = k.s2),
                (k.s2 = l),
                (k.frozen1 = !1),
                (k.frozen2 = !0)),
              Vd.staticSweep(k, a, 0, x.collisionSlopCCD),
              0 > k.toi)
            ) {
              h = this.toiEvents.erase(g);
              k.free();
              k.next = Vb.zpp_pool;
              Vb.zpp_pool = k;
              continue;
            }
          0 <= k.toi &&
            (k.toi < c || (!e && k.kinematic)) &&
            ((d = k), (c = k.toi), (e = k.kinematic), (f = g));
          g = h;
          h = h.next;
        }
        if (null == d) break;
        this.toiEvents.erase(f);
        c = d.toi;
        f = d.s1.body;
        e = d.s2.body;
        f.sweepFrozen || (f.sweepIntegrate(c * a), f.sweepValidate(d.s1));
        e.sweepFrozen || (e.sweepIntegrate(c * a), e.sweepValidate(d.s2));
        g = this.narrowPhase(d.s1, d.s2, !0, d.arbiter, !0);
        null == g
          ? null != d.arbiter &&
            null != d.arbiter.pair &&
            ((d.arbiter.pair.arb = null), (d.arbiter.pair = null))
          : !this.presteparb(g, a, !0) &&
            g.type == Ua.COL &&
            g.acting() &&
            (g.colarb.warmStart(),
            g.colarb.applyImpulseVel(),
            g.colarb.applyImpulseVel(),
            g.colarb.applyImpulseVel(),
            g.colarb.applyImpulseVel(),
            (f.sweep_angvel = f.angvel % b),
            (e.sweep_angvel = e.angvel % b));
        null != g &&
          g.acting() &&
          g.type == Ua.COL &&
          (f.sweepFrozen ||
            f.isKinematic() ||
            ((f.sweepFrozen = !0),
            d.failed
              ? (f.angvel = f.sweep_angvel = 0)
              : d.slipped
              ? ((g = f),
                (g.sweep_angvel *= x.angularCCDSlipScale),
                (f.angvel = g.sweep_angvel))
              : (f.angvel = f.sweep_angvel)),
          e.sweepFrozen ||
            e.isKinematic() ||
            ((e.sweepFrozen = !0),
            d.failed
              ? (e.angvel = e.sweep_angvel = 0)
              : d.slipped
              ? ((f = e),
                (f.sweep_angvel *= x.angularCCDSlipScale),
                (e.angvel = f.sweep_angvel))
              : (e.angvel = e.sweep_angvel)));
        d.free();
        d.next = Vb.zpp_pool;
        Vb.zpp_pool = d;
      }
      for (; !this.toiEvents.empty(); )
        (b = this.toiEvents.pop_unsafe()),
          b.free(),
          (b.next = Vb.zpp_pool),
          (Vb.zpp_pool = b);
      for (b = this.kinematics.begin(); null != b; )
        (d = b.elem()), d.sweepIntegrate(a), (d.sweepTime = 0), (b = b.next);
      for (b = this.live.begin(); null != b; )
        (d = b.elem()),
          d.sweepFrozen || d.sweepIntegrate(a),
          (d.sweepTime = 0),
          (b = b.next);
    },
    continuousEvent: function (a, b, c, d, e) {
      if (
        (a.body.sweepFrozen && b.body.sweepFrozen) ||
        a.body.disableCCD ||
        b.body.disableCCD ||
        (null != d && null == d.colarb) ||
        0 >= this.interactionType(a, b, a.body, b.body)
      )
        return d;
      var f = a.body,
        g = b.body;
      if (c || f.bullet || g.bullet)
        null == Vb.zpp_pool
          ? (e = new Vb())
          : ((e = Vb.zpp_pool), (Vb.zpp_pool = e.next), (e.next = null)),
          e.alloc(),
          (f = f.isKinematic() || g.isKinematic()),
          c && !f
            ? (a.body.isDynamic()
                ? ((e.s1 = a), (e.s2 = b))
                : ((e.s2 = a), (e.s1 = b)),
              (e.kinematic = !1),
              Vd.staticSweep(e, this.pre_dt, 0, x.collisionSlopCCD))
            : ((e.s1 = a),
              (e.s2 = b),
              (e.kinematic = f),
              e.s1.body.sweepFrozen || e.s2.body.sweepFrozen
                ? (e.s1.body.sweepFrozen &&
                    ((a = e.s1),
                    (e.s1 = e.s2),
                    (e.s2 = a),
                    (e.frozen1 = !1),
                    (e.frozen2 = !0)),
                  Vd.staticSweep(e, this.pre_dt, 0, x.collisionSlopCCD))
                : Vd.dynamicSweep(e, this.pre_dt, 0, x.collisionSlopCCD)),
          (c && 0 > e.toi) || e.failed
            ? ((c = e), c.free(), (c.next = Vb.zpp_pool), (Vb.zpp_pool = c))
            : (this.toiEvents.add(e),
              (e.frozen1 = e.s1.body.sweepFrozen),
              (e.frozen2 = e.s2.body.sweepFrozen),
              (e.arbiter = null != d ? d.colarb : null));
      return d;
    },
    bodyCbWake: function (a) {
      if (a.isDynamic() && null != a.cbSet)
        if (this.midstep)
          for (var b = a.cbSet.bodylisteners.begin(); null != b; ) {
            var c = b.elem();
            2 == c.event &&
              ((c = this.push_callback(c)), (c.event = 2), (c.body = a));
            b = b.next;
          }
        else a.component.woken = !0;
    },
    bodyCbSleep: function (a) {
      if (a.isDynamic() && null != a.cbSet)
        for (var b = a.cbSet.bodylisteners.begin(); null != b; ) {
          var c = b.elem();
          3 == c.event &&
            ((c = this.push_callback(c)), (c.event = 3), (c.body = a));
          b = b.next;
        }
    },
    constraintCbWake: function (a) {
      if (null != a.cbSet)
        if (this.midstep)
          for (var b = a.cbSet.conlisteners.begin(); null != b; ) {
            var c = b.elem();
            2 == c.event &&
              ((c = this.push_callback(c)), (c.event = 2), (c.constraint = a));
            b = b.next;
          }
        else a.component.woken = !0;
    },
    constraintCbSleep: function (a) {
      if (null != a.cbSet)
        for (var b = a.cbSet.conlisteners.begin(); null != b; ) {
          var c = b.elem();
          3 == c.event &&
            ((c = this.push_callback(c)), (c.event = 3), (c.constraint = a));
          b = b.next;
        }
    },
    constraintCbBreak: function (a) {
      if (null != a.cbSet)
        for (var b = a.cbSet.conlisteners.begin(); null != b; ) {
          var c = b.elem();
          4 == c.event &&
            ((c = this.push_callback(c)), (c.event = 4), (c.constraint = a));
          b = b.next;
        }
    },
    nullListenerType: function (a, b) {
      for (var c = new ve(), d = a.interactors.begin(); null != d; ) {
        var e = d.elem();
        c.add(e);
        d = d.next;
      }
      if (a != b)
        for (d = b.interactors.begin(); null != d; )
          (e = d.elem()), c.add(e), (d = d.next);
      for (; !c.empty(); )
        if (((d = c.pop_unsafe()), d.isCompound())) {
          d = d.icompound;
          for (e = d.bodies.begin(); null != e; ) {
            var f = e.elem();
            c.add(f);
            e = e.next;
          }
          for (d = d.compounds.begin(); null != d; )
            (e = d.elem()), c.add(e), (d = d.next);
        } else
          for (
            e = d.isBody() ? d.ibody : d.ishape.body,
              d = d.isShape() ? d.ishape : null,
              e = e.arbiters.begin();
            null != e;

          ) {
            f = e.elem();
            if (0 != f.present && (null == d || f.ws1 == d || f.ws2 == d))
              for (
                this.MRCA_chains(f.ws1, f.ws2), f = this.mrca1.begin();
                null != f;

              ) {
                var g = f.elem();
                if (g.cbSet == a || g.cbSet == b)
                  for (var h = this.mrca2.begin(); null != h; ) {
                    var k = h.elem();
                    if (
                      !(
                        (g.cbSet == a && k.cbSet != b) ||
                        (g.cbSet == b && k.cbSet != a)
                      ) &&
                      ((k = ya.get(g, k)), null != k)
                    ) {
                      for (; !k.arbiters.empty(); )
                        k.arbiters.pop_unsafe().present--;
                      this.remove_callbackset(k);
                    }
                    h = h.next;
                  }
                f = f.next;
              }
            e = e.next;
          }
    },
    nullInteractorType: function (a, b) {
      null == b && (b = a);
      if (a.isCompound()) {
        a = a.icompound;
        for (var c = a.bodies.begin(); null != c; ) {
          var d = c.elem();
          this.nullInteractorType(d, b);
          c = c.next;
        }
        for (a = a.compounds.begin(); null != a; )
          (c = a.elem()), this.nullInteractorType(c, b), (a = a.next);
      } else
        for (
          c = a.isBody() ? a.ibody : a.ishape.body,
            a = a.isShape() ? a.ishape : null,
            c = c.arbiters.begin();
          null != c;

        ) {
          d = c.elem();
          if (0 != d.present && (null == a || d.ws1 == a || d.ws2 == a)) {
            this.MRCA_chains(d.ws1, d.ws2);
            for (var e = this.mrca1.begin(); null != e; ) {
              for (var f = e.elem(), g = this.mrca2.begin(); null != g; ) {
                var h = g.elem();
                if (f == b || h == b)
                  (h = ya.get(f, h)),
                    null != h &&
                      (d.present--,
                      h.remove_arb(d),
                      h.really_empty() && this.remove_callbackset(h));
                g = g.next;
              }
              e = e.next;
            }
          }
          c = c.next;
        }
    },
    freshListenerType: function (a, b) {
      for (var c = new ve(), d = a.interactors.begin(); null != d; ) {
        var e = d.elem();
        c.add(e);
        d = d.next;
      }
      if (a != b)
        for (d = b.interactors.begin(); null != d; )
          (e = d.elem()), c.add(e), (d = d.next);
      for (; !c.empty(); )
        if (((d = c.pop_unsafe()), d.isCompound())) {
          d = d.icompound;
          for (e = d.bodies.begin(); null != e; ) {
            var f = e.elem();
            c.add(f);
            e = e.next;
          }
          for (d = d.compounds.begin(); null != d; )
            (e = d.elem()), c.add(e), (d = d.next);
        } else
          for (
            e = d.isBody() ? d.ibody : d.ishape.body,
              d = d.isShape() ? d.ishape : null,
              e = e.arbiters.begin();
            null != e;

          ) {
            f = e.elem();
            if (f.presentable && (null == d || f.ws1 == d || f.ws2 == d)) {
              this.MRCA_chains(f.ws1, f.ws2);
              for (var g = this.mrca1.begin(); null != g; ) {
                var h = g.elem();
                if (h.cbSet == a || h.cbSet == b)
                  for (var k = this.mrca2.begin(); null != k; ) {
                    var l = k.elem();
                    if (
                      !(
                        (h.cbSet == a && l.cbSet != b) ||
                        (h.cbSet == b && l.cbSet != a)
                      )
                    ) {
                      var m = ya.get(h, l);
                      null == m &&
                        ((m = mc.get(h, l)), this.add_callbackset(m));
                      m.add_arb(f) && f.present++;
                    }
                    k = k.next;
                  }
                g = g.next;
              }
            }
            e = e.next;
          }
    },
    freshInteractorType: function (a, b) {
      null == b && (b = a);
      if (a.isCompound()) {
        a = a.icompound;
        for (var c = a.bodies.begin(); null != c; ) {
          var d = c.elem();
          this.freshInteractorType(d, b);
          c = c.next;
        }
        for (a = a.compounds.begin(); null != a; )
          (c = a.elem()), this.freshInteractorType(c, b), (a = a.next);
      } else
        for (
          c = a.isBody() ? a.ibody : a.ishape.body,
            a = a.isShape() ? a.ishape : null,
            c = c.arbiters.begin();
          null != c;

        ) {
          d = c.elem();
          if (d.presentable && (null == a || d.ws1 == a || d.ws2 == a)) {
            this.MRCA_chains(d.ws1, d.ws2);
            for (var e = this.mrca1.begin(); null != e; ) {
              for (var f = e.elem(), g = this.mrca2.begin(); null != g; ) {
                var h = g.elem();
                if (f == b || h == b) {
                  var k = f.cbSet,
                    l = h.cbSet;
                  k.validate();
                  l.validate();
                  Ea.empty_intersection(k, l) ||
                    ((k = ya.get(f, h)),
                    null == k && ((k = mc.get(f, h)), this.add_callbackset(k)),
                    k.add_arb(d) && d.present++);
                }
                g = g.next;
              }
              e = e.next;
            }
          }
          c = c.next;
        }
    },
    wakeCompound: function (a) {
      for (var b = a.bodies.begin(); null != b; ) {
        var c = b.elem();
        c.world ||
          ((c.component.waket = this.stamp + (this.midstep ? 0 : 1)),
          c.isKinematic() && (c.kinematicDelaySleep = !0),
          c.component.sleeping && this.really_wake(c, !1));
        b = b.next;
      }
      for (b = a.constraints.begin(); null != b; )
        (c = b.elem()), this.wake_constraint(c), (b = b.next);
      for (a = a.compounds.begin(); null != a; )
        (b = a.elem()), this.wakeCompound(b), (a = a.next);
    },
    wakeIsland: function (a) {
      for (; !a.comps.empty(); ) {
        var b = a.comps.pop_unsafe();
        b.waket = this.stamp + (this.midstep ? 0 : 1);
        if (b.isBody) {
          var c = b.body;
          this.live.add(c);
          for (var d = c.arbiters.begin(); null != d; ) {
            var e = d.elem();
            e.sleeping &&
              ((e.sleeping = !1),
              (e.up_stamp += this.stamp - e.sleep_stamp),
              e.type == Ua.COL
                ? ((e = e.colarb),
                  e.stat
                    ? this.c_arbiters_true.inlined_add(e)
                    : this.c_arbiters_false.inlined_add(e))
                : e.type == Ua.FLUID
                ? this.f_arbiters.inlined_add(e.fluidarb)
                : this.s_arbiters.inlined_add(e.sensorarb));
            d = d.next;
          }
          this.bodyCbWake(c);
          b.reset();
          if (!c.isStatic())
            for (b = c.shapes.begin(); null != b; )
              (c = b.elem()),
                null != c.node && this.bphase.sync(c),
                (b = b.next);
        } else
          (c = b.constraint),
            this.live_constraints.inlined_add(c),
            this.constraintCbWake(c),
            b.reset();
      }
      a.free();
      a.next = Tb.zpp_pool;
      Tb.zpp_pool = a;
    },
    non_inlined_wake: function (a, b) {
      null == b && (b = !1);
      a.world ||
        ((a.component.waket = this.stamp + (this.midstep ? 0 : 1)),
        a.isKinematic() && (a.kinematicDelaySleep = !0),
        a.component.sleeping && this.really_wake(a, b));
    },
    really_wake: function (a, b) {
      null == b && (b = !1);
      if (null == a.component.island) {
        a.component.sleeping = !1;
        a.isKinematic() || a.isStatic()
          ? this.staticsleep.inlined_add(a)
          : this.live.inlined_add(a);
        for (var c = a.constraints.begin(); null != c; ) {
          var d = c.elem();
          d.space == this && this.wake_constraint(d);
          c = c.next;
        }
        for (c = a.arbiters.begin(); null != c; ) {
          d = c.elem();
          if (d.sleeping)
            if (
              ((d.sleeping = !1),
              (d.up_stamp +=
                this.stamp + (this.midstep ? 0 : 1) - d.sleep_stamp),
              d.type == Ua.COL)
            ) {
              var e = d.colarb;
              e.stat
                ? this.c_arbiters_true.inlined_add(e)
                : this.c_arbiters_false.inlined_add(e);
            } else
              d.type == Ua.FLUID
                ? this.f_arbiters.inlined_add(d.fluidarb)
                : this.s_arbiters.inlined_add(d.sensorarb);
          d.type != Ua.SENSOR &&
            !d.cleared &&
            d.up_stamp >= this.stamp &&
            0 != (d.immState & 1) &&
            (d.b1.isDynamic() &&
              d.b1.component.sleeping &&
              ((e = d.b1),
              e.world ||
                ((e.component.waket = this.stamp + (this.midstep ? 0 : 1)),
                e.isKinematic() && (e.kinematicDelaySleep = !0),
                e.component.sleeping && this.really_wake(e, !1))),
            d.b2.isDynamic() &&
              d.b2.component.sleeping &&
              ((d = d.b2),
              d.world ||
                ((d.component.waket = this.stamp + (this.midstep ? 0 : 1)),
                d.isKinematic() && (d.kinematicDelaySleep = !0),
                d.component.sleeping && this.really_wake(d, !1))));
          c = c.next;
        }
        !b && a.isDynamic() && this.bodyCbWake(a);
        if (!b && !this.bphase.is_sweep && !a.isStatic())
          for (a = a.shapes.begin(); null != a; )
            (b = a.elem()), null != b.node && this.bphase.sync(b), (a = a.next);
      } else this.wakeIsland(a.component.island);
    },
    wake_constraint: function (a, b) {
      null == b && (b = !1);
      return a.active &&
        ((a.component.waket = this.stamp + (this.midstep ? 0 : 1)),
        a.component.sleeping)
        ? (null == a.component.island
            ? ((a.component.sleeping = !1),
              this.live_constraints.inlined_add(a),
              a.wake_connected(),
              b || this.constraintCbWake(a))
            : this.wakeIsland(a.component.island),
          !0)
        : !1;
    },
    doForests: function (a) {
      for (var b = this.c_arbiters_false.begin(); null != b; ) {
        var c = b.elem();
        if (
          !c.cleared &&
          c.up_stamp == this.stamp &&
          0 != (c.immState & 1) &&
          c.b1.isDynamic() &&
          c.b2.isDynamic()
        ) {
          if (c.b1.component == c.b1.component.parent) var d = c.b1.component;
          else {
            d = c.b1.component;
            for (var e = null; d != d.parent; ) {
              var f = d.parent;
              d.parent = e;
              e = d;
              d = f;
            }
            for (; null != e; ) (f = e.parent), (e.parent = d), (e = f);
          }
          if (c.b2.component == c.b2.component.parent) c = c.b2.component;
          else {
            c = c.b2.component;
            for (e = null; c != c.parent; )
              (f = c.parent), (c.parent = e), (e = c), (c = f);
            for (; null != e; ) (f = e.parent), (e.parent = c), (e = f);
          }
          d != c &&
            (d.rank < c.rank
              ? (d.parent = c)
              : d.rank > c.rank
              ? (c.parent = d)
              : ((c.parent = d), d.rank++));
        }
        b = b.next;
      }
      for (b = this.f_arbiters.begin(); null != b; ) {
        c = b.elem();
        if (
          !c.cleared &&
          c.up_stamp == this.stamp &&
          0 != (c.immState & 1) &&
          c.b1.isDynamic() &&
          c.b2.isDynamic()
        ) {
          if (c.b1.component == c.b1.component.parent) d = c.b1.component;
          else {
            d = c.b1.component;
            for (e = null; d != d.parent; )
              (f = d.parent), (d.parent = e), (e = d), (d = f);
            for (; null != e; ) (f = e.parent), (e.parent = d), (e = f);
          }
          if (c.b2.component == c.b2.component.parent) c = c.b2.component;
          else {
            c = c.b2.component;
            for (e = null; c != c.parent; )
              (f = c.parent), (c.parent = e), (e = c), (c = f);
            for (; null != e; ) (f = e.parent), (e.parent = c), (e = f);
          }
          d != c &&
            (d.rank < c.rank
              ? (d.parent = c)
              : d.rank > c.rank
              ? (c.parent = d)
              : ((c.parent = d), d.rank++));
        }
        b = b.next;
      }
      for (b = this.live_constraints.begin(); null != b; )
        b.elem().forest(), (b = b.next);
      for (; !this.live.empty(); ) {
        d = this.live.inlined_pop_unsafe();
        b = d.component;
        if (b == b.parent) c = b;
        else {
          c = b;
          for (e = null; c != c.parent; )
            (f = c.parent), (c.parent = e), (e = c), (c = f);
          for (; null != e; ) (f = e.parent), (e.parent = c), (e = f);
        }
        null == c.island &&
          (null == Tb.zpp_pool
            ? (c.island = new Tb())
            : ((c.island = Tb.zpp_pool),
              (Tb.zpp_pool = c.island.next),
              (c.island.next = null)),
          c.island.alloc(),
          this.islands.inlined_add(c.island),
          (c.island.sleep = !0));
        b.island = c.island;
        b.island.comps.inlined_add(b);
        d = d.atRest(a);
        b.island.sleep = b.island.sleep && d;
        b.waket > b.island.waket && (b.island.waket = b.waket);
      }
      for (; !this.live_constraints.empty(); ) {
        a = this.live_constraints.inlined_pop_unsafe().component;
        if (a == a.parent) b = a;
        else {
          b = a;
          for (d = null; b != b.parent; )
            (c = b.parent), (b.parent = d), (d = b), (b = c);
          for (; null != d; ) (c = d.parent), (d.parent = b), (d = c);
        }
        a.island = b.island;
        a.island.comps.inlined_add(a);
        a.waket > a.island.waket && (a.island.waket = a.waket);
      }
      for (; !this.islands.empty(); )
        if (((a = this.islands.inlined_pop_unsafe()), a.sleep))
          for (a = a.comps.begin(); null != a; ) {
            d = a.elem();
            if (d.isBody) {
              b = d.body;
              b.velx = 0;
              b.vely = 0;
              b.angvel = 0;
              d.sleeping = !0;
              for (d = b.shapes.begin(); null != d; )
                (c = d.elem()), this.bphase.sync(c), (d = d.next);
              this.bodyCbSleep(b);
            } else this.constraintCbSleep(d.constraint), (d.sleeping = !0);
            a = a.next;
          }
        else {
          for (; !a.comps.empty(); )
            (b = a.comps.inlined_pop_unsafe()),
              (b.waket = a.waket),
              b.isBody
                ? this.live.inlined_add(b.body)
                : this.live_constraints.inlined_add(b.constraint),
              b.reset();
          a.free();
          a.next = Tb.zpp_pool;
          Tb.zpp_pool = a;
        }
    },
    sleepArbiters: function () {
      var a = null,
        b = this.c_arbiters_true,
        c = b.begin(),
        d = null != this.c_arbiters_false;
      d &&
        null == c &&
        ((d = !1),
        (c = this.c_arbiters_false.begin()),
        (b = this.c_arbiters_false),
        (a = null));
      for (; null != c; ) {
        var e = c.elem();
        e.b1.component.sleeping && e.b2.component.sleeping
          ? ((e.sleep_stamp = this.stamp),
            (e.sleeping = !0),
            (c = b.inlined_erase(a)))
          : ((a = c), (c = c.next));
        d &&
          null == c &&
          ((d = !1),
          (c = this.c_arbiters_false.begin()),
          (b = this.c_arbiters_false),
          (a = null));
      }
      a = null;
      b = this.f_arbiters;
      c = b.begin();
      d = !1;
      for (; null != c; )
        (e = c.elem()),
          e.b1.component.sleeping && e.b2.component.sleeping
            ? ((e.sleep_stamp = this.stamp),
              (e.sleeping = !0),
              (c = b.inlined_erase(a)))
            : ((a = c), (c = c.next)),
          d && null == c && ((d = !1), (a = b = null));
      a = null;
      b = this.s_arbiters;
      c = b.begin();
      d = !1;
      for (; null != c; )
        (e = c.elem()),
          e.b1.component.sleeping && e.b2.component.sleeping
            ? ((e.sleep_stamp = this.stamp),
              (e.sleeping = !0),
              (c = b.inlined_erase(a)))
            : ((a = c), (c = c.next)),
          d && null == c && ((d = !1), (a = b = null));
    },
    static_validation: function (a) {
      a.shapes.empty() || a.validate_aabb();
      a.validate_mass();
      a.validate_inertia();
      for (var b = a.shapes.begin(); null != b; ) {
        var c = b.elem();
        c.isPolygon() &&
          (c.polygon.splice_collinear(), c.polygon.validate_gaxi());
        b = b.next;
      }
      a.sweepFrozen = !0;
    },
    validation: function () {
      this.cbsets.validate();
      for (var a = this.live.begin(); null != a; ) {
        var b = a.elem();
        b.sweepRadius = 0;
        for (var c = b.shapes.begin(); null != c; ) {
          var d = c.elem();
          d.isPolygon() &&
            (d.polygon.splice_collinear(), d.polygon.validate_gaxi());
          d.validate_sweepRadius();
          d.sweepRadius > b.sweepRadius && (b.sweepRadius = d.sweepRadius);
          c = c.next;
        }
        b.validate_mass();
        b.validate_inertia();
        b.shapes.empty() || (b.validate_aabb(), b.validate_worldCOM());
        b.validate_gravMass();
        b.validate_axis();
        if (b.component.woken && null != b.cbSet)
          for (c = b.cbSet.bodylisteners.begin(); null != c; )
            (d = c.elem()),
              2 == d.event &&
                ((d = this.push_callback(d)), (d.event = 2), (d.body = b)),
              (c = c.next);
        b.component.woken = !1;
        for (b = b.shapes.begin(); null != b; )
          (c = b.elem()), this.bphase.sync(c), (b = b.next);
        a = a.next;
      }
      for (a = this.kinematics.begin(); null != a; ) {
        b = a.elem();
        b.sweepRadius = 0;
        for (c = b.shapes.begin(); null != c; )
          (d = c.elem()),
            d.isPolygon() &&
              (d.polygon.splice_collinear(), d.polygon.validate_gaxi()),
            d.validate_sweepRadius(),
            d.sweepRadius > b.sweepRadius && (b.sweepRadius = d.sweepRadius),
            (c = c.next);
        b.validate_mass();
        b.validate_inertia();
        b.shapes.empty() || (b.validate_aabb(), b.validate_worldCOM());
        b.validate_gravMass();
        b.validate_axis();
        for (b = b.shapes.begin(); null != b; )
          (c = b.elem()), this.bphase.sync(c), (b = b.next);
        a = a.next;
      }
      for (a = this.live_constraints.begin(); null != a; ) {
        b = a.elem();
        if (b.active) {
          if (b.component.woken && null != b.cbSet)
            for (c = b.cbSet.conlisteners.begin(); null != c; )
              (d = c.elem()),
                2 == d.event &&
                  ((d = this.push_callback(d)),
                  (d.event = 2),
                  (d.constraint = b)),
                (c = c.next);
          b.component.woken = !1;
        }
        a = a.next;
      }
    },
    updateVel: function (a) {
      for (
        var b = 1 - a * this.global_lin_drag,
          c = 1 - a * this.global_ang_drag,
          d = this.live.begin();
        null != d;

      ) {
        var e = d.elem();
        if (0 != e.smass) {
          var f = a * e.imass;
          e.velx = b * e.velx + (e.forcex + this.gravityx * e.gravMass) * f;
          e.vely = b * e.vely + (e.forcey + this.gravityy * e.gravMass) * f;
        }
        0 != e.sinertia &&
          (e.angvel =
            c * e.angvel +
            (e.torque +
              (this.gravityy * (e.worldCOMx - e.posx) -
                this.gravityx * (e.worldCOMy - e.posy)) *
                e.gravMass) *
              a *
              e.iinertia);
        d = d.next;
      }
    },
    updatePos: function (a) {
      for (var b = (2 * Math.PI) / a, c = this.live.begin(); null != c; ) {
        var d = c.elem();
        d.pre_posx = d.posx;
        d.pre_posy = d.posy;
        d.pre_rot = d.rot;
        d.sweepTime = 0;
        d.sweep_angvel = d.angvel % b;
        d.sweepIntegrate(a);
        if (d.disableCCD) (d.sweepFrozen = !0), (d.bullet = !1);
        else {
          var e = x.staticCCDLinearThreshold * d.sweepRadius,
            f = x.staticCCDAngularThreshold;
          if (
            (d.velx * d.velx + d.vely * d.vely) * a * a > e * e ||
            d.angvel * d.angvel * a * a > f * f ||
            d.isKinematic()
          ) {
            e = d.sweep_angvel;
            0 > e && (e = -e);
            f = 1 / e;
            for (var g = d.shapes.begin(); null != g; ) {
              var h = g.elem(),
                k = h.aabb,
                l = k.minx,
                m = k.miny,
                q = k.maxx,
                r = k.maxy,
                t = u["int"](e * a * h.sweepCoef * 0.008333333333333333);
              8 < t && (t = 8);
              var v = (e * a) / t;
              d.sweepIntegrate(a);
              h.force_validate_aabb();
              l < k.minx ? (k.minx = l) : (l = k.minx);
              m < k.miny ? (k.miny = m) : (m = k.miny);
              q > k.maxx ? (k.maxx = q) : (q = k.maxx);
              r > k.maxy ? (k.maxy = r) : (r = k.maxy);
              for (var w = 1; w < t; ) {
                var y = w++;
                d.sweepIntegrate(v * y * f);
                h.force_validate_aabb();
                l < k.minx ? (k.minx = l) : (l = k.minx);
                m < k.miny ? (k.miny = m) : (m = k.miny);
                q > k.maxx ? (k.maxx = q) : (q = k.maxx);
                r > k.maxy ? (k.maxy = r) : (r = k.maxy);
              }
              this.bphase.sync(h);
              g = g.next;
            }
            d.sweepFrozen = !1;
            d.isDynamic() &&
              d.bulletEnabled &&
              ((e = x.bulletCCDLinearThreshold * d.sweepRadius),
              (f = x.bulletCCDAngularThreshold),
              (d.velx * d.velx + d.vely * d.vely) * a * a > e * e ||
                d.angvel * d.angvel * a * a > f * f) &&
              (d.bullet = !0);
          } else (d.sweepFrozen = !0), (d.bullet = !1);
        }
        c = c.next;
      }
      for (c = this.kinematics.begin(); null != c; ) {
        d = c.elem();
        d.pre_posx = d.posx;
        d.pre_posy = d.posy;
        d.pre_rot = d.rot;
        d.sweepTime = 0;
        d.sweep_angvel = d.angvel % b;
        d.sweepIntegrate(a);
        if (d.disableCCD) (d.sweepFrozen = !0), (d.bullet = !1);
        else if (
          ((e = x.staticCCDLinearThreshold * d.sweepRadius),
          (f = x.staticCCDAngularThreshold),
          (d.velx * d.velx + d.vely * d.vely) * a * a > e * e ||
            d.angvel * d.angvel * a * a > f * f ||
            d.isKinematic())
        ) {
          e = d.sweep_angvel;
          0 > e && (e = -e);
          f = 1 / e;
          for (g = d.shapes.begin(); null != g; ) {
            h = g.elem();
            k = h.aabb;
            l = k.minx;
            m = k.miny;
            q = k.maxx;
            r = k.maxy;
            t = u["int"](e * a * h.sweepCoef * 0.008333333333333333);
            8 < t && (t = 8);
            v = (e * a) / t;
            d.sweepIntegrate(a);
            h.force_validate_aabb();
            l < k.minx ? (k.minx = l) : (l = k.minx);
            m < k.miny ? (k.miny = m) : (m = k.miny);
            q > k.maxx ? (k.maxx = q) : (q = k.maxx);
            r > k.maxy ? (k.maxy = r) : (r = k.maxy);
            for (w = 1; w < t; )
              (y = w++),
                d.sweepIntegrate(v * y * f),
                h.force_validate_aabb(),
                l < k.minx ? (k.minx = l) : (l = k.minx),
                m < k.miny ? (k.miny = m) : (m = k.miny),
                q > k.maxx ? (k.maxx = q) : (q = k.maxx),
                r > k.maxy ? (k.maxy = r) : (r = k.maxy);
            this.bphase.sync(h);
            g = g.next;
          }
          d.sweepFrozen = !1;
          d.isDynamic() &&
            d.bulletEnabled &&
            ((e = x.bulletCCDLinearThreshold * d.sweepRadius),
            (f = x.bulletCCDAngularThreshold),
            (d.velx * d.velx + d.vely * d.vely) * a * a > e * e ||
              d.angvel * d.angvel * a * a > f * f) &&
            (d.bullet = !0);
        } else (d.sweepFrozen = !0), (d.bullet = !1);
        c = c.next;
      }
    },
    continuous: null,
    presteparb: function (a, b, c) {
      null == c && (c = !1);
      var d = this;
      if (!a.cleared && a.b1.component.sleeping && a.b2.component.sleeping)
        return (a.sleep_stamp = this.stamp), (a.sleeping = !0);
      if (!a.cleared || 0 != a.present || a.intchange) {
        var e =
          !c && a.up_stamp == this.stamp - 1 && !a.cleared && !a.intchange;
        c = a.fresh && !a.cleared && !a.intchange;
        e && (a.endGenerated = this.stamp);
        if (c || e || a.cleared || a.intchange)
          for (
            this.inlined_MRCA_chains(a.ws1, a.ws2), e = this.mrca1.begin();
            null != e;

          ) {
            for (var f = e.elem(), g = this.mrca2.begin(); null != g; ) {
              var h = g.elem(),
                k = f.cbSet,
                l = h.cbSet;
              if (!Ea.empty_intersection(k, l)) {
                var m = [ya.get(f, h)];
                c || a.intchange
                  ? (null == m[0] &&
                      ((h = mc.get(f, h)),
                      (m[0] = h),
                      this.add_callbackset(m[0])),
                    Ea.find_all(
                      k,
                      l,
                      0,
                      (function (b) {
                        return function (c) {
                          if (
                            0 != (c.itype & a.type) &&
                            b[0].empty_arb(c.itype)
                          ) {
                            var e = d.push_callback(c);
                            e.event = 0;
                            ya.int_callback(b[0], c, e);
                            e.set = b[0];
                          }
                        };
                      })(m)
                    ),
                    m[0].add_arb(a) && a.present++)
                  : (a.present--,
                    m[0].remove_arb(a),
                    Ea.find_all(
                      k,
                      l,
                      1,
                      (function (b) {
                        return function (c) {
                          if (
                            0 != (c.itype & a.type) &&
                            b[0].empty_arb(c.itype)
                          ) {
                            var e = d.push_callback(c);
                            e.event = 1;
                            ya.int_callback(b[0], c, e);
                            e.set = b[0];
                          }
                        };
                      })(m)
                    ),
                    m[0].really_empty() && this.remove_callbackset(m[0]));
              }
              g = g.next;
            }
            e = e.next;
          }
        a.fresh = !1;
        a.intchange = !1;
      }
      if (
        a.cleared ||
        a.up_stamp + (a.type == Ua.COL ? x.arbiterExpirationDelay : 0) <
          this.stamp
      )
        return (
          a.type == Ua.SENSOR
            ? a.sensorarb.retire()
            : a.type == Ua.FLUID
            ? a.fluidarb.retire()
            : a.colarb.retire(),
          !0
        );
      c = a.active;
      a.active = a.presentable = a.up_stamp == this.stamp;
      0 != (a.immState & 1)
        ? a.active &&
          a.type != Ua.SENSOR &&
          (null != a.colarb
            ? a.colarb.preStep(b) && (a.active = !1)
            : a.fluidarb.preStep(this, b))
        : null != a.colarb && a.colarb.cleanupContacts() && (a.active = !1);
      c != a.active &&
        ((a.b1.arbiters.modified = !0),
        (a.b2.arbiters.modified = !0),
        (this.c_arbiters_true.modified = this.c_arbiters_false.modified = !0),
        (this.s_arbiters.modified = this.f_arbiters.modified = !0));
      return !1;
    },
    prestep: function (a) {
      for (var b = null, c = this.live_constraints.begin(); null != c; ) {
        var d = c.elem();
        d.preStep(a)
          ? ((c = this.live_constraints.erase(b)),
            d.broken(),
            this.constraintCbBreak(d),
            d.removeOnBreak
              ? ((d.component.sleeping = !0),
                (this.midstep = !1),
                null != d.compound
                  ? d.compound.wrap_constraints.remove(d.outer)
                  : this.wrap_constraints.remove(d.outer),
                (this.midstep = !0))
              : (d.active = !1),
            d.clearcache())
          : ((b = c), (c = c.next));
      }
      b = null;
      c = this.c_arbiters_true;
      d = c.begin();
      var e = null != this.c_arbiters_false;
      e &&
        null == d &&
        ((e = !1),
        (d = this.c_arbiters_false.begin()),
        (c = this.c_arbiters_false),
        (b = null));
      for (; null != d; ) {
        var f = d.elem();
        this.presteparb(f, a)
          ? (d = c.inlined_erase(b))
          : ((b = d), (d = d.next));
        e &&
          null == d &&
          ((e = !1),
          (d = this.c_arbiters_false.begin()),
          (c = this.c_arbiters_false),
          (b = null));
      }
      b = null;
      c = this.f_arbiters;
      d = c.begin();
      e = !1;
      for (; null != d; )
        (f = d.elem()),
          this.presteparb(f, a)
            ? (d = c.inlined_erase(b))
            : ((b = d), (d = d.next)),
          e && null == d && ((e = !1), (b = c = null));
      b = null;
      c = this.s_arbiters;
      d = c.begin();
      e = !1;
      for (; null != d; )
        (f = d.elem()),
          this.presteparb(f, a)
            ? (d = c.inlined_erase(b))
            : ((b = d), (d = d.next)),
          e && null == d && ((e = !1), (b = c = null));
    },
    warmStart: function () {
      for (var a = this.f_arbiters.begin(); null != a; ) {
        var b = a.elem();
        b.acting() && b.warmStart();
        a = a.next;
      }
      a = this.c_arbiters_false.begin();
      b = !0;
      null == a && ((a = this.c_arbiters_true.begin()), (b = !1));
      for (; null != a; ) {
        var c = a.elem();
        c.acting() && c.warmStart();
        a = a.next;
        b && null == a && ((a = this.c_arbiters_true.begin()), (b = !1));
      }
      for (a = this.live_constraints.begin(); null != a; )
        a.elem().warmStart(), (a = a.next);
    },
    iterateVel: function (a) {
      for (var b = 0; b < a; ) {
        b++;
        for (var c = this.f_arbiters.begin(); null != c; ) {
          var d = c.elem();
          d.acting() && d.applyImpulseVel();
          c = c.next;
        }
        c = null;
        for (d = this.live_constraints.begin(); null != d; ) {
          var e = d.elem();
          e.applyImpulseVel()
            ? ((d = this.live_constraints.erase(c)),
              e.broken(),
              this.constraintCbBreak(e),
              e.removeOnBreak
                ? ((e.component.sleeping = !0),
                  (this.midstep = !1),
                  null != e.compound
                    ? e.compound.wrap_constraints.remove(e.outer)
                    : this.wrap_constraints.remove(e.outer),
                  (this.midstep = !0))
                : (e.active = !1),
              e.clearcache())
            : ((c = d), (d = d.next));
        }
        c = this.c_arbiters_false.begin();
        d = !0;
        null == c && ((c = this.c_arbiters_true.begin()), (d = !1));
        for (; null != c; )
          (e = c.elem()),
            e.acting() && e.applyImpulseVel(),
            (c = c.next),
            d && null == c && ((c = this.c_arbiters_true.begin()), (d = !1));
      }
    },
    iteratePos: function (a) {
      for (var b = 0; b < a; ) {
        b++;
        for (var c = null, d = this.live_constraints.begin(); null != d; ) {
          var e = d.elem();
          !e.__velocity && e.stiff && e.applyImpulsePos()
            ? ((d = this.live_constraints.erase(c)),
              e.broken(),
              this.constraintCbBreak(e),
              e.removeOnBreak
                ? ((e.component.sleeping = !0),
                  (this.midstep = !1),
                  null != e.compound
                    ? e.compound.wrap_constraints.remove(e.outer)
                    : this.wrap_constraints.remove(e.outer),
                  (this.midstep = !0))
                : (e.active = !1),
              e.clearcache())
            : ((c = d), (d = d.next));
        }
        c = this.c_arbiters_false.begin();
        d = !0;
        null == c && ((c = this.c_arbiters_true.begin()), (d = !1));
        for (; null != c; )
          (e = c.elem()),
            e.acting() && e.applyImpulsePos(),
            (c = c.next),
            d && null == c && ((c = this.c_arbiters_true.begin()), (d = !1));
      }
    },
    group_ignore: function (a, b) {
      a = a.lookup_group();
      if (null == a) return !1;
      b = b.lookup_group();
      if (null == b) return !1;
      for (var c = !1; null != a && null != b; ) {
        if (a == b) {
          c = a.ignore;
          break;
        }
        a.depth < b.depth ? (b = b.group) : (a = a.group);
      }
      return c;
    },
    interactionType: function (a, b, c, d) {
      var e = !1;
      for (var f = c.constraints.begin(); null != f; ) {
        var g = f.elem();
        if (g.ignore && g.pair_exists(c.id, d.id)) {
          e = !0;
          break;
        }
        f = f.next;
      }
      return e || this.group_ignore(a, b)
        ? -1
        : (a.sensorEnabled || b.sensorEnabled) && a.filter.shouldSense(b.filter)
        ? 2
        : (!a.fluidEnabled && !b.fluidEnabled) ||
          !a.filter.shouldFlow(b.filter) ||
          (0 == c.imass && 0 == d.imass && 0 == c.iinertia && 0 == d.iinertia)
        ? !a.filter.shouldCollide(b.filter) ||
          (0 == c.imass && 0 == d.imass && 0 == c.iinertia && 0 == d.iinertia)
          ? -1
          : 1
        : 0;
    },
    precb: null,
    prelisteners: null,
    narrowPhase: function (a, b, c, d, e) {
      var f = this,
        g = null,
        h = a.body,
        k = b.body,
        l = this.interactionType(a, b, h, k);
      if (-1 != l) {
        if (a.type > b.type) {
          g = b;
          var m = a;
        } else
          a.type == b.type
            ? a.id < b.id
              ? ((g = a), (m = b))
              : ((m = a), (g = b))
            : ((g = a), (m = b));
        var q = g == b;
        if (0 == l) {
          if (null == d)
            for (
              l = null,
                h = (
                  h.arbiters.length < k.arbiters.length ? h : k
                ).arbiters.begin();
              null != h;

            ) {
              c = h.elem();
              if (c.id == g.id && c.di == m.id) {
                l = c;
                break;
              }
              h = h.next;
            }
          else l = d;
          h = null == l;
          c = !1;
          h
            ? (null == Yc.zpp_pool
                ? (l = new Yc())
                : ((l = Yc.zpp_pool), (Yc.zpp_pool = l.next), (l.next = null)),
              l.alloc())
            : null == l.fluidarb
            ? (l.lazyRetire(this, null),
              null == Yc.zpp_pool
                ? (l = new Yc())
                : ((l = Yc.zpp_pool), (Yc.zpp_pool = l.next), (l.next = null)),
              l.alloc(),
              (c = h = l.intchange = !0))
            : (l = l.fluidarb);
          if (h || l.stamp != this.stamp || e)
            if (((l.stamp = this.stamp), V.flowCollide(g, m, l))) {
              h
                ? (l.assign(a, b, g.id, m.id),
                  this.f_arbiters.inlined_add(l),
                  (l.fresh = !c))
                : (l.fresh =
                    l.up_stamp < this.stamp - 1 ||
                    (l.endGenerated == this.stamp && e));
              l.up_stamp = l.stamp;
              if (l.fresh || 0 == (l.immState & 4)) {
                l.immState = 1;
                var r = !1;
                this.inlined_MRCA_chains(
                  l.ws1.id > l.ws2.id ? l.ws2 : l.ws1,
                  l.ws1.id > l.ws2.id ? l.ws1 : l.ws2
                );
                for (a = this.mrca1.begin(); null != a; ) {
                  b = a.elem();
                  for (g = this.mrca2.begin(); null != g; ) {
                    h = g.elem();
                    c = b.cbSet;
                    q = h.cbSet;
                    if (
                      !Ea.empty_intersection(c, q) &&
                      ((k = m = null),
                      this.prelisteners.inlined_clear(),
                      Ea.find_all(
                        c,
                        q,
                        5,
                        (function (a) {
                          return function (b) {
                            if (0 != (b.itype & 4)) {
                              var c = f.prelisteners.inlined_insert(a[0], b);
                              a[0] = c;
                              r = r ? !0 : !b.pure;
                            }
                          };
                        })([null])
                      ),
                      !this.prelisteners.empty())
                    )
                      if (
                        ((m = ya.get(b, h)),
                        null == m &&
                          ((k = mc.get(b, h)), this.add_callbackset(k)),
                        null == m ||
                          ((m.FLUIDstamp != this.stamp || e) &&
                            0 == (m.FLUIDstate & 4)))
                      ) {
                        null != k && (m = k);
                        if (null != m)
                          for (h = this.prelisteners.begin(); null != h; )
                            7 == h.elem().itype &&
                              ((m.COLLISIONstamp = this.stamp),
                              (m.SENSORstamp = this.stamp)),
                              (m.FLUIDstamp = this.stamp),
                              (h = h.next);
                        h = l.active;
                        l.active = !0;
                        this.precb.zpp_inner.pre_arbiter = l;
                        this.precb.zpp_inner.set = m;
                        for (c = this.prelisteners.begin(); null != c; )
                          (q = c.elem()),
                            (this.precb.zpp_inner.listener = q),
                            ya.int_callback(m, q, this.precb.zpp_inner),
                            (this.precb.zpp_inner.pre_swapped =
                              b != this.precb.zpp_inner.int1),
                            (q = q.handlerp(this.precb)),
                            null != q &&
                              (l.immState =
                                q == gb.get_ACCEPT()
                                  ? 5
                                  : q == gb.get_ACCEPT_ONCE()
                                  ? 1
                                  : q == gb.get_IGNORE()
                                  ? 6
                                  : 2),
                            (c = c.next);
                        l.active = h;
                        if (null != m)
                          for (h = this.prelisteners.begin(); null != h; )
                            7 == h.elem().itype &&
                              ((m.COLLISIONstate = l.immState),
                              (m.SENSORstate = l.immState)),
                              (m.FLUIDstate = l.immState),
                              (h = h.next);
                      } else
                        null == m
                          ? 0 == (l.immState & 4) && (l.immState = 1)
                          : (l.immState = m.FLUIDstate);
                    g = g.next;
                  }
                  a = a.next;
                }
                r &&
                  0 == (l.immState & 4) &&
                  (l.b1.isDynamic() &&
                    ((e = l.b1),
                    e.world ||
                      ((e.component.waket =
                        this.stamp + (this.midstep ? 0 : 1)),
                      e.isKinematic() && (e.kinematicDelaySleep = !0),
                      e.component.sleeping && this.really_wake(e, !1))),
                  l.b1.isDynamic() &&
                    ((e = l.b2),
                    e.world ||
                      ((e.component.waket =
                        this.stamp + (this.midstep ? 0 : 1)),
                      e.isKinematic() && (e.kinematicDelaySleep = !0),
                      e.component.sleeping && this.really_wake(e, !1))));
              }
              0 != (l.immState & 1) &&
                (l.b1.isDynamic() &&
                  l.b1.component.sleeping &&
                  ((e = l.b1),
                  e.world ||
                    ((e.component.waket = this.stamp + (this.midstep ? 0 : 1)),
                    e.isKinematic() && (e.kinematicDelaySleep = !0),
                    e.component.sleeping && this.really_wake(e, !1))),
                l.b2.isDynamic() &&
                  l.b2.component.sleeping &&
                  ((e = l.b2),
                  e.world ||
                    ((e.component.waket = this.stamp + (this.midstep ? 0 : 1)),
                    e.isKinematic() && (e.kinematicDelaySleep = !0),
                    e.component.sleeping && this.really_wake(e, !1))));
              l.sleeping && ((l.sleeping = !1), this.f_arbiters.inlined_add(l));
              g = l;
            } else
              h
                ? ((e = l),
                  e.free(),
                  (e.next = Yc.zpp_pool),
                  (Yc.zpp_pool = e),
                  (g = null))
                : (g = l);
          else g = l;
        } else if (1 == l) {
          l = c ? this.c_arbiters_true : this.c_arbiters_false;
          if (null == d)
            for (
              d = null,
                h = (
                  h.arbiters.length < k.arbiters.length ? h : k
                ).arbiters.begin();
              null != h;

            ) {
              k = h.elem();
              if (k.id == g.id && k.di == m.id) {
                d = k;
                break;
              }
              h = h.next;
            }
          h = d;
          k = null == h;
          d = !1;
          k
            ? (null == xc.zpp_pool
                ? (h = new xc())
                : ((h = xc.zpp_pool), (xc.zpp_pool = h.next), (h.next = null)),
              h.alloc(),
              (h.stat = c))
            : null == h.colarb
            ? (h.lazyRetire(this, null),
              null == xc.zpp_pool
                ? (h = new xc())
                : ((h = xc.zpp_pool), (xc.zpp_pool = h.next), (h.next = null)),
              h.alloc(),
              (h.intchange = !0),
              (h.stat = c),
              (d = k = !0))
            : ((h = h.colarb),
              (q = g != h.s1),
              h.stat != c &&
                ((h.stat = c),
                h.sleeping ||
                  ((c ? this.c_arbiters_false : this.c_arbiters_true).remove(h),
                  l.add(h))));
          if (k || h.stamp != this.stamp || e)
            if (((h.stamp = this.stamp), V.contactCollide(g, m, h, q))) {
              k
                ? (h.assign(a, b, g.id, m.id), l.inlined_add(h), (h.fresh = !d))
                : (h.fresh =
                    h.up_stamp < this.stamp - 1 ||
                    (h.endGenerated == this.stamp && e));
              h.up_stamp = h.stamp;
              if (h.fresh || 0 == (h.immState & 4)) {
                h.immState = 1;
                var t = !1;
                this.inlined_MRCA_chains(
                  h.ws1.id > h.ws2.id ? h.ws2 : h.ws1,
                  h.ws1.id > h.ws2.id ? h.ws1 : h.ws2
                );
                for (a = this.mrca1.begin(); null != a; ) {
                  b = a.elem();
                  for (g = this.mrca2.begin(); null != g; ) {
                    c = g.elem();
                    q = b.cbSet;
                    k = c.cbSet;
                    if (
                      !Ea.empty_intersection(q, k) &&
                      ((d = m = null),
                      this.prelisteners.inlined_clear(),
                      Ea.find_all(
                        q,
                        k,
                        5,
                        (function (a) {
                          return function (b) {
                            if (0 != (b.itype & 1)) {
                              var c = f.prelisteners.inlined_insert(a[0], b);
                              a[0] = c;
                              t = t ? !0 : !b.pure;
                            }
                          };
                        })([null])
                      ),
                      !this.prelisteners.empty())
                    )
                      if (
                        ((m = ya.get(b, c)),
                        null == m &&
                          ((d = mc.get(b, c)), this.add_callbackset(d)),
                        null == m ||
                          ((m.COLLISIONstamp != this.stamp || e) &&
                            0 == (m.COLLISIONstate & 4)))
                      ) {
                        null != d && (m = d);
                        if (null != m)
                          for (c = this.prelisteners.begin(); null != c; )
                            7 == c.elem().itype
                              ? ((m.COLLISIONstamp = this.stamp),
                                (m.SENSORstamp = this.stamp),
                                (m.FLUIDstamp = this.stamp))
                              : (m.COLLISIONstamp = this.stamp),
                              (c = c.next);
                        c = h.active;
                        h.active = !0;
                        h.cleanupContacts();
                        this.precb.zpp_inner.pre_arbiter = h;
                        this.precb.zpp_inner.set = m;
                        for (q = this.prelisteners.begin(); null != q; )
                          (k = q.elem()),
                            (this.precb.zpp_inner.listener = k),
                            ya.int_callback(m, k, this.precb.zpp_inner),
                            (this.precb.zpp_inner.pre_swapped =
                              b != this.precb.zpp_inner.int1),
                            (k = k.handlerp(this.precb)),
                            null != k &&
                              (h.immState =
                                k == gb.get_ACCEPT()
                                  ? 5
                                  : k == gb.get_ACCEPT_ONCE()
                                  ? 1
                                  : k == gb.get_IGNORE()
                                  ? 6
                                  : 2),
                            (q = q.next);
                        h.active = c;
                        if (null != m)
                          for (c = this.prelisteners.begin(); null != c; )
                            7 == c.elem().itype
                              ? ((m.COLLISIONstate = h.immState),
                                (m.SENSORstate = h.immState),
                                (m.FLUIDstate = h.immState))
                              : (m.COLLISIONstate = h.immState),
                              (c = c.next);
                      } else
                        null == m
                          ? 0 == (h.immState & 4) && (h.immState = 1)
                          : (h.immState = m.COLLISIONstate);
                    g = g.next;
                  }
                  a = a.next;
                }
                t &&
                  0 == (h.immState & 4) &&
                  (h.b1.isDynamic() &&
                    ((e = h.b1),
                    e.world ||
                      ((e.component.waket =
                        this.stamp + (this.midstep ? 0 : 1)),
                      e.isKinematic() && (e.kinematicDelaySleep = !0),
                      e.component.sleeping && this.really_wake(e, !1))),
                  h.b1.isDynamic() &&
                    ((e = h.b2),
                    e.world ||
                      ((e.component.waket =
                        this.stamp + (this.midstep ? 0 : 1)),
                      e.isKinematic() && (e.kinematicDelaySleep = !0),
                      e.component.sleeping && this.really_wake(e, !1))));
              }
              0 != (h.immState & 1) &&
                (h.b1.isDynamic() &&
                  h.b1.component.sleeping &&
                  ((e = h.b1),
                  e.world ||
                    ((e.component.waket = this.stamp + (this.midstep ? 0 : 1)),
                    e.isKinematic() && (e.kinematicDelaySleep = !0),
                    e.component.sleeping && this.really_wake(e, !1))),
                h.b2.isDynamic() &&
                  h.b2.component.sleeping &&
                  ((e = h.b2),
                  e.world ||
                    ((e.component.waket = this.stamp + (this.midstep ? 0 : 1)),
                    e.isKinematic() && (e.kinematicDelaySleep = !0),
                    e.component.sleeping && this.really_wake(e, !1))));
              h.sleeping && ((h.sleeping = !1), l.inlined_add(h));
              g = h;
            } else
              k
                ? ((e = h),
                  e.free(),
                  (e.next = xc.zpp_pool),
                  (xc.zpp_pool = e),
                  (g = null))
                : (g = h);
          else g = h;
        } else {
          if (null == d)
            for (
              l = null,
                h = (
                  h.arbiters.length < k.arbiters.length ? h : k
                ).arbiters.begin();
              null != h;

            ) {
              c = h.elem();
              if (c.id == g.id && c.di == m.id) {
                l = c;
                break;
              }
              h = h.next;
            }
          else l = d;
          h = null == l;
          c = !1;
          h
            ? (null == Lc.zpp_pool
                ? (l = new Lc())
                : ((l = Lc.zpp_pool), (Lc.zpp_pool = l.next), (l.next = null)),
              l.alloc())
            : null == l.sensorarb
            ? (l.lazyRetire(this, null),
              null == Lc.zpp_pool
                ? (l = new Lc())
                : ((l = Lc.zpp_pool), (Lc.zpp_pool = l.next), (l.next = null)),
              l.alloc(),
              (c = h = l.intchange = !0))
            : (l = l.sensorarb);
          if (h || l.stamp != this.stamp || e)
            if (((l.stamp = this.stamp), V.testCollide(g, m))) {
              h
                ? (l.assign(a, b, g.id, m.id),
                  this.s_arbiters.inlined_add(l),
                  (l.fresh = !c))
                : (l.fresh =
                    l.up_stamp < this.stamp - 1 ||
                    (l.endGenerated == this.stamp && e));
              l.up_stamp = l.stamp;
              if (l.fresh || 0 == (l.immState & 4)) {
                l.immState = 1;
                var u = !1;
                this.inlined_MRCA_chains(
                  l.ws1.id > l.ws2.id ? l.ws2 : l.ws1,
                  l.ws1.id > l.ws2.id ? l.ws1 : l.ws2
                );
                for (a = this.mrca1.begin(); null != a; ) {
                  b = a.elem();
                  for (g = this.mrca2.begin(); null != g; ) {
                    h = g.elem();
                    c = b.cbSet;
                    q = h.cbSet;
                    if (
                      !Ea.empty_intersection(c, q) &&
                      ((k = m = null),
                      this.prelisteners.inlined_clear(),
                      Ea.find_all(
                        c,
                        q,
                        5,
                        (function (a) {
                          return function (b) {
                            if (0 != (b.itype & 2)) {
                              var c = f.prelisteners.inlined_insert(a[0], b);
                              a[0] = c;
                              u = u ? !0 : !b.pure;
                            }
                          };
                        })([null])
                      ),
                      !this.prelisteners.empty())
                    )
                      if (
                        ((m = ya.get(b, h)),
                        null == m &&
                          ((k = mc.get(b, h)), this.add_callbackset(k)),
                        null == m ||
                          ((m.SENSORstamp != this.stamp || e) &&
                            0 == (m.SENSORstate & 4)))
                      ) {
                        null != k && (m = k);
                        if (null != m)
                          for (h = this.prelisteners.begin(); null != h; )
                            7 == h.elem().itype
                              ? ((m.COLLISIONstamp = this.stamp),
                                (m.SENSORstamp = this.stamp),
                                (m.FLUIDstamp = this.stamp))
                              : (m.SENSORstamp = this.stamp),
                              (h = h.next);
                        h = l.active;
                        l.active = !0;
                        this.precb.zpp_inner.pre_arbiter = l;
                        this.precb.zpp_inner.set = m;
                        for (c = this.prelisteners.begin(); null != c; )
                          (q = c.elem()),
                            (this.precb.zpp_inner.listener = q),
                            ya.int_callback(m, q, this.precb.zpp_inner),
                            (this.precb.zpp_inner.pre_swapped =
                              b != this.precb.zpp_inner.int1),
                            (q = q.handlerp(this.precb)),
                            null != q &&
                              (l.immState =
                                q == gb.get_ACCEPT()
                                  ? 5
                                  : q == gb.get_ACCEPT_ONCE()
                                  ? 1
                                  : q == gb.get_IGNORE()
                                  ? 6
                                  : 2),
                            (c = c.next);
                        l.active = h;
                        if (null != m)
                          for (h = this.prelisteners.begin(); null != h; )
                            7 == h.elem().itype
                              ? ((m.COLLISIONstate = l.immState),
                                (m.SENSORstate = l.immState),
                                (m.FLUIDstate = l.immState))
                              : (m.SENSORstate = l.immState),
                              (h = h.next);
                      } else
                        null == m
                          ? 0 == (l.immState & 4) && (l.immState = 1)
                          : (l.immState = m.SENSORstate);
                    g = g.next;
                  }
                  a = a.next;
                }
                u &&
                  0 == (l.immState & 4) &&
                  (l.b1.isStatic() ||
                    ((e = l.b1),
                    e.world ||
                      ((e.component.waket =
                        this.stamp + (this.midstep ? 0 : 1)),
                      e.isKinematic() && (e.kinematicDelaySleep = !0),
                      e.component.sleeping && this.really_wake(e, !1))),
                  l.b2.isStatic() ||
                    ((e = l.b2),
                    e.world ||
                      ((e.component.waket =
                        this.stamp + (this.midstep ? 0 : 1)),
                      e.isKinematic() && (e.kinematicDelaySleep = !0),
                      e.component.sleeping && this.really_wake(e, !1))));
              }
              l.sleeping && ((l.sleeping = !1), this.s_arbiters.inlined_add(l));
              g = l;
            } else
              h
                ? ((e = l),
                  e.free(),
                  (e.next = Lc.zpp_pool),
                  (Lc.zpp_pool = e),
                  (g = null))
                : (g = l);
          else g = l;
        }
      }
      return g;
    },
    mrca1: null,
    mrca2: null,
    MRCA_chains: function (a, b) {
      this.inlined_MRCA_chains(a, b);
    },
    inlined_MRCA_chains: function (a, b) {
      this.mrca1.inlined_clear();
      this.mrca2.inlined_clear();
      null != a.cbSet && this.mrca1.inlined_add(a);
      null != a.body.cbSet && this.mrca1.inlined_add(a.body);
      null != b.cbSet && this.mrca2.inlined_add(b);
      null != b.body.cbSet && this.mrca2.inlined_add(b.body);
      a = a.body.compound;
      for (b = b.body.compound; a != b; )
        (null == a ? 0 : a.depth) < (null == b ? 0 : b.depth)
          ? (null != b.cbSet && this.mrca2.inlined_add(b), (b = b.compound))
          : (null != a.cbSet && this.mrca1.inlined_add(a), (a = a.compound));
    },
    __class__: Cj,
  };
  var Xe = function () {
    this.next = this.prev = this.shape = this.aabb = null;
  };
  l["zpp_nape.space.ZPP_SweepData"] = Xe;
  Xe.__name__ = ["zpp_nape", "space", "ZPP_SweepData"];
  Xe.prototype = {
    next: null,
    prev: null,
    shape: null,
    aabb: null,
    free: function () {
      this.aabb = this.shape = this.prev = null;
    },
    alloc: function () {},
    gt: function (a) {
      return this.aabb.minx > a.aabb.minx;
    },
    __class__: Xe,
  };
  var mi = function (a) {
    this.list = null;
    We.call(this);
    this.space = a;
    this.is_sweep = !0;
    this.sweep = this;
  };
  l["zpp_nape.space.ZPP_SweepPhase"] = mi;
  mi.__name__ = ["zpp_nape", "space", "ZPP_SweepPhase"];
  mi.__super__ = We;
  mi.prototype = v(We.prototype, {
    list: null,
    __insert: function (a) {
      if (null == Xe.zpp_pool) var b = new Xe();
      else (b = Xe.zpp_pool), (Xe.zpp_pool = b.next), (b.next = null);
      b.alloc();
      a.sweep = b;
      b.shape = a;
      b.aabb = a.aabb;
      b.next = this.list;
      null != this.list && (this.list.prev = b);
      this.list = b;
    },
    __remove: function (a) {
      var b = a.sweep;
      null == b.prev ? (this.list = b.next) : (b.prev.next = b.next);
      null != b.next && (b.next.prev = b.prev);
      a.sweep = null;
      b.free();
      b.next = Xe.zpp_pool;
      Xe.zpp_pool = b;
    },
    __sync: function (a) {
      this.space.continuous || a.validate_aabb();
    },
    sync_broadphase_fast: function () {
      for (var a = this.list.next; null != a; ) {
        var b = a.next,
          c = a.prev;
        if (!a.gt(c)) {
          for (; null != c.prev && c.prev.gt(a); ) c = c.prev;
          var d = a.prev;
          d.next = a.next;
          null != a.next && (a.next.prev = d);
          null == c.prev
            ? ((a.prev = null), (this.list = a), (a.next = c), (c.prev = a))
            : ((a.prev = c.prev),
              (c.prev = a),
              (a.prev.next = a),
              (a.next = c));
        }
        a = b;
      }
    },
    broadphase: function (a, b) {
      if (null != this.list) {
        this.sync_broadphase_fast();
        for (var c = this.list; null != c; ) {
          for (
            var d = c.next, e = c.shape, f = e.body, g = c.aabb.maxx;
            null != d && !(d.aabb.minx > g);

          ) {
            var h = d.shape,
              k = h.body;
            k != f &&
              ((f.isStatic() && k.isStatic()) ||
                (f.component.sleeping && k.component.sleeping) ||
                (e.aabb.intersectY(h.aabb) &&
                  (b
                    ? a.narrowPhase(
                        e,
                        h,
                        !f.isDynamic() || !k.isDynamic(),
                        null,
                        !1
                      )
                    : a.continuousEvent(
                        e,
                        h,
                        !f.isDynamic() || !k.isDynamic(),
                        null,
                        !1
                      ))));
            d = d.next;
          }
          c = c.next;
        }
      }
    },
    clear: function () {
      for (; null != this.list; )
        this.list.shape.removedFromSpace(), this.__remove(this.list.shape);
    },
    __class__: mi,
  });
  var pk = function () {
    this.length = 0;
    this.modified = this.pushmod = !1;
    this.head = null;
  };
  l["zpp_nape.util.ZNPList_ZPP_CallbackSet"] = pk;
  pk.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_CallbackSet"];
  pk.prototype = {
    head: null,
    begin: function () {
      return this.head;
    },
    modified: null,
    pushmod: null,
    length: null,
    inlined_add: function (a) {
      if (null == Ye.zpp_pool) var b = new Ye();
      else (b = Ye.zpp_pool), (Ye.zpp_pool = b.next), (b.next = null);
      b.alloc();
      b.elt = a;
      b.next = this.begin();
      this.head = b;
      this.modified = !0;
      this.length++;
      return a;
    },
    inlined_remove: function (a) {
      this.inlined_try_remove(a);
    },
    inlined_try_remove: function (a) {
      for (var b = null, c = this.begin(), d = !1; null != c; ) {
        if (c.elem() == a) {
          this.inlined_erase(b);
          d = !0;
          break;
        }
        b = c;
        c = c.next;
      }
      return d;
    },
    inlined_erase: function (a) {
      var b;
      if (null == a) {
        var c = this.begin();
        this.head = b = c.next;
        this.empty() && (this.pushmod = !0);
      } else
        (c = a.next),
          (b = c.next),
          (a.next = b),
          null == b && (this.pushmod = !0);
      a = c;
      a.free();
      a.next = Ye.zpp_pool;
      Ye.zpp_pool = a;
      this.modified = !0;
      this.length--;
      this.pushmod = !0;
      return b;
    },
    empty: function () {
      return null == this.begin();
    },
    __class__: pk,
  };
  var vf = function () {
    this.length = 0;
    this.modified = this.pushmod = !1;
    this.head = null;
  };
  l["zpp_nape.util.ZNPList_ZPP_Shape"] = vf;
  vf.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Shape"];
  vf.prototype = {
    head: null,
    begin: function () {
      return this.head;
    },
    modified: null,
    pushmod: null,
    length: null,
    add: function (a) {
      return this.inlined_add(a);
    },
    inlined_add: function (a) {
      if (null == Wd.zpp_pool) var b = new Wd();
      else (b = Wd.zpp_pool), (Wd.zpp_pool = b.next), (b.next = null);
      b.alloc();
      b.elt = a;
      b.next = this.begin();
      this.head = b;
      this.modified = !0;
      this.length++;
      return a;
    },
    insert: function (a, b) {
      return this.inlined_insert(a, b);
    },
    inlined_insert: function (a, b) {
      if (null == Wd.zpp_pool) var c = new Wd();
      else (c = Wd.zpp_pool), (Wd.zpp_pool = c.next), (c.next = null);
      c.alloc();
      c.elt = b;
      b = c;
      null == a
        ? ((b.next = this.begin()), (this.head = b))
        : ((b.next = a.next), (a.next = b));
      this.pushmod = this.modified = !0;
      this.length++;
      return b;
    },
    remove: function (a) {
      this.inlined_try_remove(a);
    },
    inlined_try_remove: function (a) {
      for (var b = null, c = this.begin(), d = !1; null != c; ) {
        if (c.elem() == a) {
          this.inlined_erase(b);
          d = !0;
          break;
        }
        b = c;
        c = c.next;
      }
      return d;
    },
    inlined_erase: function (a) {
      var b;
      if (null == a) {
        var c = this.begin();
        this.head = b = c.next;
        this.empty() && (this.pushmod = !0);
      } else
        (c = a.next),
          (b = c.next),
          (a.next = b),
          null == b && (this.pushmod = !0);
      a = c;
      a.free();
      a.next = Wd.zpp_pool;
      Wd.zpp_pool = a;
      this.modified = !0;
      this.length--;
      this.pushmod = !0;
      return b;
    },
    empty: function () {
      return null == this.begin();
    },
    iterator_at: function (a) {
      for (var b = this.begin(); 0 < a-- && null != b; ) b = b.next;
      return b;
    },
    __class__: vf,
  };
  var Ve = function () {
    this.length = 0;
    this.modified = this.pushmod = !1;
    this.head = null;
  };
  l["zpp_nape.util.ZNPList_ZPP_Body"] = Ve;
  Ve.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Body"];
  Ve.prototype = {
    head: null,
    begin: function () {
      return this.head;
    },
    modified: null,
    pushmod: null,
    length: null,
    add: function (a) {
      return this.inlined_add(a);
    },
    inlined_add: function (a) {
      if (null == nd.zpp_pool) var b = new nd();
      else (b = nd.zpp_pool), (nd.zpp_pool = b.next), (b.next = null);
      b.alloc();
      b.elt = a;
      b.next = this.begin();
      this.head = b;
      this.modified = !0;
      this.length++;
      return a;
    },
    insert: function (a, b) {
      return this.inlined_insert(a, b);
    },
    inlined_insert: function (a, b) {
      if (null == nd.zpp_pool) var c = new nd();
      else (c = nd.zpp_pool), (nd.zpp_pool = c.next), (c.next = null);
      c.alloc();
      c.elt = b;
      b = c;
      null == a
        ? ((b.next = this.begin()), (this.head = b))
        : ((b.next = a.next), (a.next = b));
      this.pushmod = this.modified = !0;
      this.length++;
      return b;
    },
    pop: function () {
      this.inlined_pop();
    },
    inlined_pop: function () {
      var a = this.begin();
      this.head = a.next;
      a.free();
      a.next = nd.zpp_pool;
      nd.zpp_pool = a;
      this.empty() && (this.pushmod = !0);
      this.modified = !0;
      this.length--;
    },
    pop_unsafe: function () {
      return this.inlined_pop_unsafe();
    },
    inlined_pop_unsafe: function () {
      var a = this.front();
      this.pop();
      return a;
    },
    remove: function (a) {
      this.inlined_try_remove(a);
    },
    inlined_try_remove: function (a) {
      for (var b = null, c = this.begin(), d = !1; null != c; ) {
        if (c.elem() == a) {
          this.inlined_erase(b);
          d = !0;
          break;
        }
        b = c;
        c = c.next;
      }
      return d;
    },
    erase: function (a) {
      return this.inlined_erase(a);
    },
    inlined_erase: function (a) {
      var b;
      if (null == a) {
        var c = this.begin();
        this.head = b = c.next;
        this.empty() && (this.pushmod = !0);
      } else
        (c = a.next),
          (b = c.next),
          (a.next = b),
          null == b && (this.pushmod = !0);
      a = c;
      a.free();
      a.next = nd.zpp_pool;
      nd.zpp_pool = a;
      this.modified = !0;
      this.length--;
      this.pushmod = !0;
      return b;
    },
    clear: function () {
      this.inlined_clear();
    },
    inlined_clear: function () {
      for (; !this.empty(); ) this.inlined_pop();
      this.pushmod = !0;
    },
    empty: function () {
      return null == this.begin();
    },
    front: function () {
      return this.begin().elem();
    },
    iterator_at: function (a) {
      for (var b = this.begin(); 0 < a-- && null != b; ) b = b.next;
      return b;
    },
    __class__: Ve,
  };
  var pf = function () {
    this.length = 0;
    this.modified = this.pushmod = !1;
    this.head = null;
  };
  l["zpp_nape.util.ZNPList_ZPP_Compound"] = pf;
  pf.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Compound"];
  pf.prototype = {
    head: null,
    begin: function () {
      return this.head;
    },
    modified: null,
    pushmod: null,
    length: null,
    add: function (a) {
      return this.inlined_add(a);
    },
    inlined_add: function (a) {
      if (null == ec.zpp_pool) var b = new ec();
      else (b = ec.zpp_pool), (ec.zpp_pool = b.next), (b.next = null);
      b.alloc();
      b.elt = a;
      b.next = this.begin();
      this.head = b;
      this.modified = !0;
      this.length++;
      return a;
    },
    pop: function () {
      this.inlined_pop();
    },
    inlined_pop: function () {
      var a = this.begin();
      this.head = a.next;
      a.free();
      a.next = ec.zpp_pool;
      ec.zpp_pool = a;
      this.empty() && (this.pushmod = !0);
      this.modified = !0;
      this.length--;
    },
    pop_unsafe: function () {
      return this.inlined_pop_unsafe();
    },
    inlined_pop_unsafe: function () {
      var a = this.front();
      this.pop();
      return a;
    },
    remove: function (a) {
      this.inlined_try_remove(a);
    },
    inlined_try_remove: function (a) {
      for (var b = null, c = this.begin(), d = !1; null != c; ) {
        if (c.elem() == a) {
          this.inlined_erase(b);
          d = !0;
          break;
        }
        b = c;
        c = c.next;
      }
      return d;
    },
    inlined_erase: function (a) {
      var b;
      if (null == a) {
        var c = this.begin();
        this.head = b = c.next;
        this.empty() && (this.pushmod = !0);
      } else
        (c = a.next),
          (b = c.next),
          (a.next = b),
          null == b && (this.pushmod = !0);
      a = c;
      a.free();
      a.next = ec.zpp_pool;
      ec.zpp_pool = a;
      this.modified = !0;
      this.length--;
      this.pushmod = !0;
      return b;
    },
    empty: function () {
      return null == this.begin();
    },
    front: function () {
      return this.begin().elem();
    },
    iterator_at: function (a) {
      for (var b = this.begin(); 0 < a-- && null != b; ) b = b.next;
      return b;
    },
    __class__: pf,
  };
  var Qg = function () {
    this.length = 0;
    this.modified = this.pushmod = !1;
    this.head = null;
  };
  l["zpp_nape.util.ZNPList_ZPP_Arbiter"] = Qg;
  Qg.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Arbiter"];
  Qg.prototype = {
    head: null,
    begin: function () {
      return this.head;
    },
    modified: null,
    pushmod: null,
    length: null,
    inlined_add: function (a) {
      if (null == Xd.zpp_pool) var b = new Xd();
      else (b = Xd.zpp_pool), (Xd.zpp_pool = b.next), (b.next = null);
      b.alloc();
      b.elt = a;
      b.next = this.begin();
      this.head = b;
      this.modified = !0;
      this.length++;
      return a;
    },
    pop: function () {
      this.inlined_pop();
    },
    inlined_pop: function () {
      var a = this.begin();
      this.head = a.next;
      a.free();
      a.next = Xd.zpp_pool;
      Xd.zpp_pool = a;
      this.empty() && (this.pushmod = !0);
      this.modified = !0;
      this.length--;
    },
    pop_unsafe: function () {
      return this.inlined_pop_unsafe();
    },
    inlined_pop_unsafe: function () {
      var a = this.front();
      this.pop();
      return a;
    },
    inlined_remove: function (a) {
      this.inlined_try_remove(a);
    },
    inlined_try_remove: function (a) {
      for (var b = null, c = this.begin(), d = !1; null != c; ) {
        if (c.elem() == a) {
          this.inlined_erase(b);
          d = !0;
          break;
        }
        b = c;
        c = c.next;
      }
      return d;
    },
    erase: function (a) {
      return this.inlined_erase(a);
    },
    inlined_erase: function (a) {
      var b;
      if (null == a) {
        var c = this.begin();
        this.head = b = c.next;
        this.empty() && (this.pushmod = !0);
      } else
        (c = a.next),
          (b = c.next),
          (a.next = b),
          null == b && (this.pushmod = !0);
      a = c;
      a.free();
      a.next = Xd.zpp_pool;
      Xd.zpp_pool = a;
      this.modified = !0;
      this.length--;
      this.pushmod = !0;
      return b;
    },
    clear: function () {
      this.inlined_clear();
    },
    inlined_clear: function () {
      for (; !this.empty(); ) this.inlined_pop();
      this.pushmod = !0;
    },
    empty: function () {
      return null == this.begin();
    },
    inlined_has: function (a) {
      var b = !1;
      for (var c = this.begin(); null != c; ) {
        if (c.elem() == a) {
          b = !0;
          break;
        }
        c = c.next;
      }
      return b;
    },
    front: function () {
      return this.begin().elem();
    },
    __class__: Qg,
  };
  var nk = function () {
    this.length = 0;
    this.modified = this.pushmod = !1;
    this.head = null;
  };
  l["zpp_nape.util.ZNPList_ZPP_CbSetPair"] = nk;
  nk.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_CbSetPair"];
  nk.prototype = {
    head: null,
    begin: function () {
      return this.head;
    },
    modified: null,
    pushmod: null,
    length: null,
    add: function (a) {
      return this.inlined_add(a);
    },
    inlined_add: function (a) {
      if (null == Yd.zpp_pool) var b = new Yd();
      else (b = Yd.zpp_pool), (Yd.zpp_pool = b.next), (b.next = null);
      b.alloc();
      b.elt = a;
      b.next = this.begin();
      this.head = b;
      this.modified = !0;
      this.length++;
      return a;
    },
    pop: function () {
      this.inlined_pop();
    },
    inlined_pop: function () {
      var a = this.begin();
      this.head = a.next;
      a.free();
      a.next = Yd.zpp_pool;
      Yd.zpp_pool = a;
      this.empty() && (this.pushmod = !0);
      this.modified = !0;
      this.length--;
    },
    pop_unsafe: function () {
      return this.inlined_pop_unsafe();
    },
    inlined_pop_unsafe: function () {
      var a = this.front();
      this.pop();
      return a;
    },
    remove: function (a) {
      this.inlined_try_remove(a);
    },
    inlined_try_remove: function (a) {
      for (var b = null, c = this.begin(), d = !1; null != c; ) {
        if (c.elem() == a) {
          this.inlined_erase(b);
          d = !0;
          break;
        }
        b = c;
        c = c.next;
      }
      return d;
    },
    inlined_erase: function (a) {
      var b;
      if (null == a) {
        var c = this.begin();
        this.head = b = c.next;
        this.empty() && (this.pushmod = !0);
      } else
        (c = a.next),
          (b = c.next),
          (a.next = b),
          null == b && (this.pushmod = !0);
      a = c;
      a.free();
      a.next = Yd.zpp_pool;
      Yd.zpp_pool = a;
      this.modified = !0;
      this.length--;
      this.pushmod = !0;
      return b;
    },
    empty: function () {
      return null == this.begin();
    },
    front: function () {
      return this.begin().elem();
    },
    __class__: nk,
  };
  var qk = function () {
    this.length = 0;
    this.modified = this.pushmod = !1;
    this.head = null;
  };
  l["zpp_nape.util.ZNPList_ZPP_AABBPair"] = qk;
  qk.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_AABBPair"];
  qk.prototype = {
    head: null,
    begin: function () {
      return this.head;
    },
    modified: null,
    pushmod: null,
    length: null,
    inlined_add: function (a) {
      if (null == Zd.zpp_pool) var b = new Zd();
      else (b = Zd.zpp_pool), (Zd.zpp_pool = b.next), (b.next = null);
      b.alloc();
      b.elt = a;
      b.next = this.begin();
      this.head = b;
      this.modified = !0;
      this.length++;
      return a;
    },
    pop: function () {
      this.inlined_pop();
    },
    inlined_pop: function () {
      var a = this.begin();
      this.head = a.next;
      a.free();
      a.next = Zd.zpp_pool;
      Zd.zpp_pool = a;
      this.empty() && (this.pushmod = !0);
      this.modified = !0;
      this.length--;
    },
    pop_unsafe: function () {
      return this.inlined_pop_unsafe();
    },
    inlined_pop_unsafe: function () {
      var a = this.front();
      this.pop();
      return a;
    },
    remove: function (a) {
      this.inlined_try_remove(a);
    },
    inlined_remove: function (a) {
      this.inlined_try_remove(a);
    },
    inlined_try_remove: function (a) {
      for (var b = null, c = this.begin(), d = !1; null != c; ) {
        if (c.elem() == a) {
          this.inlined_erase(b);
          d = !0;
          break;
        }
        b = c;
        c = c.next;
      }
      return d;
    },
    inlined_erase: function (a) {
      var b;
      if (null == a) {
        var c = this.begin();
        this.head = b = c.next;
        this.empty() && (this.pushmod = !0);
      } else
        (c = a.next),
          (b = c.next),
          (a.next = b),
          null == b && (this.pushmod = !0);
      a = c;
      a.free();
      a.next = Zd.zpp_pool;
      Zd.zpp_pool = a;
      this.modified = !0;
      this.length--;
      this.pushmod = !0;
      return b;
    },
    empty: function () {
      return null == this.begin();
    },
    front: function () {
      return this.begin().elem();
    },
    __class__: qk,
  };
  var ki = function () {
    this.length = 0;
    this.modified = this.pushmod = !1;
    this.head = null;
  };
  l["zpp_nape.util.ZNPList_ZPP_Edge"] = ki;
  ki.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Edge"];
  ki.prototype = {
    head: null,
    begin: function () {
      return this.head;
    },
    modified: null,
    pushmod: null,
    length: null,
    add: function (a) {
      return this.inlined_add(a);
    },
    inlined_add: function (a) {
      if (null == Mc.zpp_pool) var b = new Mc();
      else (b = Mc.zpp_pool), (Mc.zpp_pool = b.next), (b.next = null);
      b.alloc();
      b.elt = a;
      b.next = this.begin();
      this.head = b;
      this.modified = !0;
      this.length++;
      return a;
    },
    insert: function (a, b) {
      return this.inlined_insert(a, b);
    },
    inlined_insert: function (a, b) {
      if (null == Mc.zpp_pool) var c = new Mc();
      else (c = Mc.zpp_pool), (Mc.zpp_pool = c.next), (c.next = null);
      c.alloc();
      c.elt = b;
      b = c;
      null == a
        ? ((b.next = this.begin()), (this.head = b))
        : ((b.next = a.next), (a.next = b));
      this.pushmod = this.modified = !0;
      this.length++;
      return b;
    },
    pop: function () {
      this.inlined_pop();
    },
    inlined_pop: function () {
      var a = this.begin();
      this.head = a.next;
      a.free();
      a.next = Mc.zpp_pool;
      Mc.zpp_pool = a;
      this.empty() && (this.pushmod = !0);
      this.modified = !0;
      this.length--;
    },
    pop_unsafe: function () {
      return this.inlined_pop_unsafe();
    },
    inlined_pop_unsafe: function () {
      var a = this.front();
      this.pop();
      return a;
    },
    erase: function (a) {
      return this.inlined_erase(a);
    },
    inlined_erase: function (a) {
      var b;
      if (null == a) {
        var c = this.begin();
        this.head = b = c.next;
        this.empty() && (this.pushmod = !0);
      } else
        (c = a.next),
          (b = c.next),
          (a.next = b),
          null == b && (this.pushmod = !0);
      a = c;
      a.free();
      a.next = Mc.zpp_pool;
      Mc.zpp_pool = a;
      this.modified = !0;
      this.length--;
      this.pushmod = !0;
      return b;
    },
    reverse: function () {
      for (var a = this.begin(), b = null; null != a; ) {
        var c = a.next;
        a.next = b;
        b = this.head = a;
        a = c;
      }
      this.pushmod = this.modified = !0;
    },
    empty: function () {
      return null == this.begin();
    },
    front: function () {
      return this.begin().elem();
    },
    iterator_at: function (a) {
      for (var b = this.begin(); 0 < a-- && null != b; ) b = b.next;
      return b;
    },
    __class__: ki,
  };
  var rk = function () {
    this.length = 0;
    this.modified = this.pushmod = !1;
    this.head = null;
  };
  l["zpp_nape.util.ZNPList_ZPP_Component"] = rk;
  rk.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Component"];
  rk.prototype = {
    head: null,
    begin: function () {
      return this.head;
    },
    modified: null,
    pushmod: null,
    length: null,
    inlined_add: function (a) {
      if (null == Ze.zpp_pool) var b = new Ze();
      else (b = Ze.zpp_pool), (Ze.zpp_pool = b.next), (b.next = null);
      b.alloc();
      b.elt = a;
      b.next = this.begin();
      this.head = b;
      this.modified = !0;
      this.length++;
      return a;
    },
    pop: function () {
      this.inlined_pop();
    },
    inlined_pop: function () {
      var a = this.begin();
      this.head = a.next;
      a.free();
      a.next = Ze.zpp_pool;
      Ze.zpp_pool = a;
      this.empty() && (this.pushmod = !0);
      this.modified = !0;
      this.length--;
    },
    pop_unsafe: function () {
      return this.inlined_pop_unsafe();
    },
    inlined_pop_unsafe: function () {
      var a = this.front();
      this.pop();
      return a;
    },
    empty: function () {
      return null == this.begin();
    },
    front: function () {
      return this.begin().elem();
    },
    __class__: rk,
  };
  var uk = function () {
    this.length = 0;
    this.modified = this.pushmod = !1;
    this.head = null;
  };
  l["zpp_nape.util.ZNPList_ZPP_FluidArbiter"] = uk;
  uk.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_FluidArbiter"];
  uk.prototype = {
    head: null,
    begin: function () {
      return this.head;
    },
    modified: null,
    pushmod: null,
    length: null,
    inlined_add: function (a) {
      if (null == $d.zpp_pool) var b = new $d();
      else (b = $d.zpp_pool), ($d.zpp_pool = b.next), (b.next = null);
      b.alloc();
      b.elt = a;
      b.next = this.begin();
      this.head = b;
      this.modified = !0;
      this.length++;
      return a;
    },
    pop: function () {
      this.inlined_pop();
    },
    inlined_pop: function () {
      var a = this.begin();
      this.head = a.next;
      a.free();
      a.next = $d.zpp_pool;
      $d.zpp_pool = a;
      this.empty() && (this.pushmod = !0);
      this.modified = !0;
      this.length--;
    },
    pop_unsafe: function () {
      return this.inlined_pop_unsafe();
    },
    inlined_pop_unsafe: function () {
      var a = this.front();
      this.pop();
      return a;
    },
    inlined_erase: function (a) {
      var b;
      if (null == a) {
        var c = this.begin();
        this.head = b = c.next;
        this.empty() && (this.pushmod = !0);
      } else
        (c = a.next),
          (b = c.next),
          (a.next = b),
          null == b && (this.pushmod = !0);
      a = c;
      a.free();
      a.next = $d.zpp_pool;
      $d.zpp_pool = a;
      this.modified = !0;
      this.length--;
      this.pushmod = !0;
      return b;
    },
    empty: function () {
      return null == this.begin();
    },
    front: function () {
      return this.begin().elem();
    },
    __class__: uk,
  };
  var vk = function () {
    this.length = 0;
    this.modified = this.pushmod = !1;
    this.head = null;
  };
  l["zpp_nape.util.ZNPList_ZPP_SensorArbiter"] = vk;
  vk.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_SensorArbiter"];
  vk.prototype = {
    head: null,
    begin: function () {
      return this.head;
    },
    modified: null,
    pushmod: null,
    length: null,
    inlined_add: function (a) {
      if (null == ae.zpp_pool) var b = new ae();
      else (b = ae.zpp_pool), (ae.zpp_pool = b.next), (b.next = null);
      b.alloc();
      b.elt = a;
      b.next = this.begin();
      this.head = b;
      this.modified = !0;
      this.length++;
      return a;
    },
    pop: function () {
      this.inlined_pop();
    },
    inlined_pop: function () {
      var a = this.begin();
      this.head = a.next;
      a.free();
      a.next = ae.zpp_pool;
      ae.zpp_pool = a;
      this.empty() && (this.pushmod = !0);
      this.modified = !0;
      this.length--;
    },
    pop_unsafe: function () {
      return this.inlined_pop_unsafe();
    },
    inlined_pop_unsafe: function () {
      var a = this.front();
      this.pop();
      return a;
    },
    inlined_erase: function (a) {
      var b;
      if (null == a) {
        var c = this.begin();
        this.head = b = c.next;
        this.empty() && (this.pushmod = !0);
      } else
        (c = a.next),
          (b = c.next),
          (a.next = b),
          null == b && (this.pushmod = !0);
      a = c;
      a.free();
      a.next = ae.zpp_pool;
      ae.zpp_pool = a;
      this.modified = !0;
      this.length--;
      this.pushmod = !0;
      return b;
    },
    empty: function () {
      return null == this.begin();
    },
    front: function () {
      return this.begin().elem();
    },
    __class__: vk,
  };
  var oi = function () {
    this.length = 0;
    this.modified = this.pushmod = !1;
    this.head = null;
  };
  l["zpp_nape.util.ZNPList_ZPP_Listener"] = oi;
  oi.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Listener"];
  oi.prototype = {
    head: null,
    begin: function () {
      return this.head;
    },
    modified: null,
    pushmod: null,
    length: null,
    add: function (a) {
      return this.inlined_add(a);
    },
    inlined_add: function (a) {
      if (null == Nc.zpp_pool) var b = new Nc();
      else (b = Nc.zpp_pool), (Nc.zpp_pool = b.next), (b.next = null);
      b.alloc();
      b.elt = a;
      b.next = this.begin();
      this.head = b;
      this.modified = !0;
      this.length++;
      return a;
    },
    insert: function (a, b) {
      return this.inlined_insert(a, b);
    },
    inlined_insert: function (a, b) {
      if (null == Nc.zpp_pool) var c = new Nc();
      else (c = Nc.zpp_pool), (Nc.zpp_pool = c.next), (c.next = null);
      c.alloc();
      c.elt = b;
      b = c;
      null == a
        ? ((b.next = this.begin()), (this.head = b))
        : ((b.next = a.next), (a.next = b));
      this.pushmod = this.modified = !0;
      this.length++;
      return b;
    },
    pop: function () {
      this.inlined_pop();
    },
    inlined_pop: function () {
      var a = this.begin();
      this.head = a.next;
      a.free();
      a.next = Nc.zpp_pool;
      Nc.zpp_pool = a;
      this.empty() && (this.pushmod = !0);
      this.modified = !0;
      this.length--;
    },
    pop_unsafe: function () {
      return this.inlined_pop_unsafe();
    },
    inlined_pop_unsafe: function () {
      var a = this.front();
      this.pop();
      return a;
    },
    remove: function (a) {
      this.inlined_try_remove(a);
    },
    inlined_try_remove: function (a) {
      for (var b = null, c = this.begin(), d = !1; null != c; ) {
        if (c.elem() == a) {
          this.inlined_erase(b);
          d = !0;
          break;
        }
        b = c;
        c = c.next;
      }
      return d;
    },
    inlined_erase: function (a) {
      var b;
      if (null == a) {
        var c = this.begin();
        this.head = b = c.next;
        this.empty() && (this.pushmod = !0);
      } else
        (c = a.next),
          (b = c.next),
          (a.next = b),
          null == b && (this.pushmod = !0);
      a = c;
      a.free();
      a.next = Nc.zpp_pool;
      Nc.zpp_pool = a;
      this.modified = !0;
      this.length--;
      this.pushmod = !0;
      return b;
    },
    empty: function () {
      return null == this.begin();
    },
    front: function () {
      return this.begin().elem();
    },
    iterator_at: function (a) {
      for (var b = this.begin(); 0 < a-- && null != b; ) b = b.next;
      return b;
    },
    __class__: oi,
  };
  var ni = function () {
    this.length = 0;
    this.modified = this.pushmod = !1;
    this.head = null;
  };
  l["zpp_nape.util.ZNPList_ZPP_ColArbiter"] = ni;
  ni.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_ColArbiter"];
  ni.prototype = {
    head: null,
    begin: function () {
      return this.head;
    },
    modified: null,
    pushmod: null,
    length: null,
    setbegin: function (a) {
      this.head = a;
      this.pushmod = this.modified = !0;
    },
    add: function (a) {
      return this.inlined_add(a);
    },
    inlined_add: function (a) {
      if (null == yd.zpp_pool) var b = new yd();
      else (b = yd.zpp_pool), (yd.zpp_pool = b.next), (b.next = null);
      b.alloc();
      b.elt = a;
      b.next = this.begin();
      this.head = b;
      this.modified = !0;
      this.length++;
      return a;
    },
    pop: function () {
      this.inlined_pop();
    },
    inlined_pop: function () {
      var a = this.begin();
      this.head = a.next;
      a.free();
      a.next = yd.zpp_pool;
      yd.zpp_pool = a;
      this.empty() && (this.pushmod = !0);
      this.modified = !0;
      this.length--;
    },
    pop_unsafe: function () {
      return this.inlined_pop_unsafe();
    },
    inlined_pop_unsafe: function () {
      var a = this.front();
      this.pop();
      return a;
    },
    remove: function (a) {
      this.inlined_try_remove(a);
    },
    inlined_try_remove: function (a) {
      for (var b = null, c = this.begin(), d = !1; null != c; ) {
        if (c.elem() == a) {
          this.inlined_erase(b);
          d = !0;
          break;
        }
        b = c;
        c = c.next;
      }
      return d;
    },
    inlined_erase: function (a) {
      var b;
      if (null == a) {
        var c = this.begin();
        this.head = b = c.next;
        this.empty() && (this.pushmod = !0);
      } else
        (c = a.next),
          (b = c.next),
          (a.next = b),
          null == b && (this.pushmod = !0);
      a = c;
      a.free();
      a.next = yd.zpp_pool;
      yd.zpp_pool = a;
      this.modified = !0;
      this.length--;
      this.pushmod = !0;
      return b;
    },
    empty: function () {
      return null == this.begin();
    },
    front: function () {
      return this.begin().elem();
    },
    __class__: ni,
  };
  var ji = function () {
    this.length = 0;
    this.modified = this.pushmod = !1;
    this.head = null;
  };
  l["zpp_nape.util.ZNPList_ZPP_InteractionGroup"] = ji;
  ji.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_InteractionGroup"];
  ji.prototype = {
    head: null,
    begin: function () {
      return this.head;
    },
    modified: null,
    pushmod: null,
    length: null,
    iterator_at: function (a) {
      for (var b = this.begin(); 0 < a-- && null != b; ) b = b.next;
      return b;
    },
    __class__: ji,
  };
  var tk = function () {
    this.length = 0;
    this.modified = this.pushmod = !1;
    this.head = null;
  };
  l["zpp_nape.util.ZNPList_ZPP_ToiEvent"] = tk;
  tk.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_ToiEvent"];
  tk.prototype = {
    head: null,
    begin: function () {
      return this.head;
    },
    modified: null,
    pushmod: null,
    length: null,
    add: function (a) {
      return this.inlined_add(a);
    },
    inlined_add: function (a) {
      if (null == be.zpp_pool) var b = new be();
      else (b = be.zpp_pool), (be.zpp_pool = b.next), (b.next = null);
      b.alloc();
      b.elt = a;
      b.next = this.begin();
      this.head = b;
      this.modified = !0;
      this.length++;
      return a;
    },
    pop: function () {
      this.inlined_pop();
    },
    inlined_pop: function () {
      var a = this.begin();
      this.head = a.next;
      a.free();
      a.next = be.zpp_pool;
      be.zpp_pool = a;
      this.empty() && (this.pushmod = !0);
      this.modified = !0;
      this.length--;
    },
    pop_unsafe: function () {
      return this.inlined_pop_unsafe();
    },
    inlined_pop_unsafe: function () {
      var a = this.front();
      this.pop();
      return a;
    },
    erase: function (a) {
      return this.inlined_erase(a);
    },
    inlined_erase: function (a) {
      var b;
      if (null == a) {
        var c = this.begin();
        this.head = b = c.next;
        this.empty() && (this.pushmod = !0);
      } else
        (c = a.next),
          (b = c.next),
          (a.next = b),
          null == b && (this.pushmod = !0);
      a = c;
      a.free();
      a.next = be.zpp_pool;
      be.zpp_pool = a;
      this.modified = !0;
      this.length--;
      this.pushmod = !0;
      return b;
    },
    empty: function () {
      return null == this.begin();
    },
    front: function () {
      return this.begin().elem();
    },
    __class__: tk,
  };
  var wk = function () {
    this.length = 0;
    this.modified = this.pushmod = !1;
    this.head = null;
  };
  l["zpp_nape.util.ZNPList_ConvexResult"] = wk;
  wk.__name__ = ["zpp_nape", "util", "ZNPList_ConvexResult"];
  wk.prototype = {
    head: null,
    begin: function () {
      return this.head;
    },
    modified: null,
    pushmod: null,
    length: null,
    iterator_at: function (a) {
      for (var b = this.begin(); 0 < a-- && null != b; ) b = b.next;
      return b;
    },
    __class__: wk,
  };
  var xk = function () {
    this.length = 0;
    this.modified = this.pushmod = !1;
    this.head = null;
  };
  l["zpp_nape.util.ZNPList_ZPP_GeomPoly"] = xk;
  xk.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_GeomPoly"];
  xk.prototype = {
    head: null,
    begin: function () {
      return this.head;
    },
    modified: null,
    pushmod: null,
    length: null,
    iterator_at: function (a) {
      for (var b = this.begin(); 0 < a-- && null != b; ) b = b.next;
      return b;
    },
    __class__: xk,
  };
  var yk = function () {
    this.length = 0;
    this.modified = this.pushmod = !1;
    this.head = null;
  };
  l["zpp_nape.util.ZNPList_RayResult"] = yk;
  yk.__name__ = ["zpp_nape", "util", "ZNPList_RayResult"];
  yk.prototype = {
    head: null,
    begin: function () {
      return this.head;
    },
    modified: null,
    pushmod: null,
    length: null,
    iterator_at: function (a) {
      for (var b = this.begin(); 0 < a-- && null != b; ) b = b.next;
      return b;
    },
    __class__: yk,
  };
  var Xc = function () {
    this.next = this.elt = null;
  };
  l["zpp_nape.util.ZNPNode_ZPP_CbType"] = Xc;
  Xc.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_CbType"];
  Xc.prototype = {
    next: null,
    alloc: function () {},
    free: function () {
      this.elt = null;
    },
    elt: null,
    elem: function () {
      return this.elt;
    },
    __class__: Xc,
  };
  var Ye = function () {
    this.next = this.elt = null;
  };
  l["zpp_nape.util.ZNPNode_ZPP_CallbackSet"] = Ye;
  Ye.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_CallbackSet"];
  Ye.prototype = {
    next: null,
    alloc: function () {},
    free: function () {
      this.elt = null;
    },
    elt: null,
    elem: function () {
      return this.elt;
    },
    __class__: Ye,
  };
  var Wd = function () {
    this.next = this.elt = null;
  };
  l["zpp_nape.util.ZNPNode_ZPP_Shape"] = Wd;
  Wd.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Shape"];
  Wd.prototype = {
    next: null,
    alloc: function () {},
    free: function () {
      this.elt = null;
    },
    elt: null,
    elem: function () {
      return this.elt;
    },
    __class__: Wd,
  };
  var nd = function () {
    this.next = this.elt = null;
  };
  l["zpp_nape.util.ZNPNode_ZPP_Body"] = nd;
  nd.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Body"];
  nd.prototype = {
    next: null,
    alloc: function () {},
    free: function () {
      this.elt = null;
    },
    elt: null,
    elem: function () {
      return this.elt;
    },
    __class__: nd,
  };
  var Vc = function () {
    this.next = this.elt = null;
  };
  l["zpp_nape.util.ZNPNode_ZPP_Constraint"] = Vc;
  Vc.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Constraint"];
  Vc.prototype = {
    next: null,
    alloc: function () {},
    free: function () {
      this.elt = null;
    },
    elt: null,
    elem: function () {
      return this.elt;
    },
    __class__: Vc,
  };
  var ec = function () {
    this.next = this.elt = null;
  };
  l["zpp_nape.util.ZNPNode_ZPP_Compound"] = ec;
  ec.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Compound"];
  ec.prototype = {
    next: null,
    alloc: function () {},
    free: function () {
      this.elt = null;
    },
    elt: null,
    elem: function () {
      return this.elt;
    },
    __class__: ec,
  };
  var Xd = function () {
    this.next = this.elt = null;
  };
  l["zpp_nape.util.ZNPNode_ZPP_Arbiter"] = Xd;
  Xd.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Arbiter"];
  Xd.prototype = {
    next: null,
    alloc: function () {},
    free: function () {
      this.elt = null;
    },
    elt: null,
    elem: function () {
      return this.elt;
    },
    __class__: Xd,
  };
  var Uc = function () {
    this.next = this.elt = null;
  };
  l["zpp_nape.util.ZNPNode_ZPP_InteractionListener"] = Uc;
  Uc.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_InteractionListener"];
  Uc.prototype = {
    next: null,
    alloc: function () {},
    free: function () {
      this.elt = null;
    },
    elt: null,
    elem: function () {
      return this.elt;
    },
    __class__: Uc,
  };
  var Wc = function () {
    this.next = this.elt = null;
  };
  l["zpp_nape.util.ZNPNode_ZPP_CbSet"] = Wc;
  Wc.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_CbSet"];
  Wc.prototype = {
    next: null,
    alloc: function () {},
    free: function () {
      this.elt = null;
    },
    elt: null,
    elem: function () {
      return this.elt;
    },
    __class__: Wc,
  };
  var Td = function () {
    this.next = this.elt = null;
  };
  l["zpp_nape.util.ZNPNode_ZPP_Interactor"] = Td;
  Td.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Interactor"];
  Td.prototype = {
    next: null,
    alloc: function () {},
    free: function () {
      this.elt = null;
    },
    elt: null,
    elem: function () {
      return this.elt;
    },
    __class__: Td,
  };
  var we = function () {
    this.next = this.elt = null;
  };
  l["zpp_nape.util.ZNPNode_ZPP_BodyListener"] = we;
  we.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_BodyListener"];
  we.prototype = {
    next: null,
    alloc: function () {},
    free: function () {
      this.elt = null;
    },
    elt: null,
    elem: function () {
      return this.elt;
    },
    __class__: we,
  };
  var Yd = function () {
    this.next = this.elt = null;
  };
  l["zpp_nape.util.ZNPNode_ZPP_CbSetPair"] = Yd;
  Yd.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_CbSetPair"];
  Yd.prototype = {
    next: null,
    alloc: function () {},
    free: function () {
      this.elt = null;
    },
    elt: null,
    elem: function () {
      return this.elt;
    },
    __class__: Yd,
  };
  var Te = function () {
    this.next = this.elt = null;
  };
  l["zpp_nape.util.ZNPNode_ZPP_ConstraintListener"] = Te;
  Te.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_ConstraintListener"];
  Te.prototype = {
    next: null,
    alloc: function () {},
    free: function () {
      this.elt = null;
    },
    elt: null,
    elem: function () {
      return this.elt;
    },
    __class__: Te,
  };
  var Zc = function () {
    this.next = this.elt = null;
  };
  l["zpp_nape.util.ZNPNode_ZPP_Vec2"] = Zc;
  Zc.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Vec2"];
  Zc.prototype = {
    next: null,
    alloc: function () {},
    free: function () {
      this.elt = null;
    },
    elt: null,
    elem: function () {
      return this.elt;
    },
    __class__: Zc,
  };
  var Zd = function () {
    this.next = this.elt = null;
  };
  l["zpp_nape.util.ZNPNode_ZPP_AABBPair"] = Zd;
  Zd.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_AABBPair"];
  Zd.prototype = {
    next: null,
    alloc: function () {},
    free: function () {
      this.elt = null;
    },
    elt: null,
    elem: function () {
      return this.elt;
    },
    __class__: Zd,
  };
  var Mc = function () {
    this.next = this.elt = null;
  };
  l["zpp_nape.util.ZNPNode_ZPP_Edge"] = Mc;
  Mc.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Edge"];
  Mc.prototype = {
    next: null,
    alloc: function () {},
    free: function () {
      this.elt = null;
    },
    elt: null,
    elem: function () {
      return this.elt;
    },
    __class__: Mc,
  };
  var Ze = function () {
    this.next = this.elt = null;
  };
  l["zpp_nape.util.ZNPNode_ZPP_Component"] = Ze;
  Ze.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Component"];
  Ze.prototype = {
    next: null,
    alloc: function () {},
    free: function () {
      this.elt = null;
    },
    elt: null,
    elem: function () {
      return this.elt;
    },
    __class__: Ze,
  };
  var $d = function () {
    this.next = this.elt = null;
  };
  l["zpp_nape.util.ZNPNode_ZPP_FluidArbiter"] = $d;
  $d.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_FluidArbiter"];
  $d.prototype = {
    next: null,
    alloc: function () {},
    free: function () {
      this.elt = null;
    },
    elt: null,
    elem: function () {
      return this.elt;
    },
    __class__: $d,
  };
  var ae = function () {
    this.next = this.elt = null;
  };
  l["zpp_nape.util.ZNPNode_ZPP_SensorArbiter"] = ae;
  ae.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_SensorArbiter"];
  ae.prototype = {
    next: null,
    alloc: function () {},
    free: function () {
      this.elt = null;
    },
    elt: null,
    elem: function () {
      return this.elt;
    },
    __class__: ae,
  };
  var Nc = function () {
    this.next = this.elt = null;
  };
  l["zpp_nape.util.ZNPNode_ZPP_Listener"] = Nc;
  Nc.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Listener"];
  Nc.prototype = {
    next: null,
    alloc: function () {},
    free: function () {
      this.elt = null;
    },
    elt: null,
    elem: function () {
      return this.elt;
    },
    __class__: Nc,
  };
  var yd = function () {
    this.next = this.elt = null;
  };
  l["zpp_nape.util.ZNPNode_ZPP_ColArbiter"] = yd;
  yd.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_ColArbiter"];
  yd.prototype = {
    next: null,
    alloc: function () {},
    free: function () {
      this.elt = null;
    },
    elt: null,
    elem: function () {
      return this.elt;
    },
    __class__: yd,
  };
  var kl = function () {
    this.next = this.elt = null;
  };
  l["zpp_nape.util.ZNPNode_ZPP_InteractionGroup"] = kl;
  kl.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_InteractionGroup"];
  kl.prototype = {
    next: null,
    elt: null,
    elem: function () {
      return this.elt;
    },
    __class__: kl,
  };
  var be = function () {
    this.next = this.elt = null;
  };
  l["zpp_nape.util.ZNPNode_ZPP_ToiEvent"] = be;
  be.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_ToiEvent"];
  be.prototype = {
    next: null,
    alloc: function () {},
    free: function () {
      this.elt = null;
    },
    elt: null,
    elem: function () {
      return this.elt;
    },
    __class__: be,
  };
  var ll = function () {
    this.next = this.elt = null;
  };
  l["zpp_nape.util.ZNPNode_ConvexResult"] = ll;
  ll.__name__ = ["zpp_nape", "util", "ZNPNode_ConvexResult"];
  ll.prototype = {
    next: null,
    elt: null,
    elem: function () {
      return this.elt;
    },
    __class__: ll,
  };
  var ml = function () {
    this.next = this.elt = null;
  };
  l["zpp_nape.util.ZNPNode_ZPP_GeomPoly"] = ml;
  ml.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_GeomPoly"];
  ml.prototype = {
    next: null,
    elt: null,
    elem: function () {
      return this.elt;
    },
    __class__: ml,
  };
  var nl = function () {
    this.next = this.elt = null;
  };
  l["zpp_nape.util.ZNPNode_RayResult"] = nl;
  nl.__name__ = ["zpp_nape", "util", "ZNPNode_RayResult"];
  nl.prototype = {
    next: null,
    elt: null,
    elem: function () {
      return this.elt;
    },
    __class__: nl,
  };
  var kg = function () {
    this.at_index = 0;
    this.at_ite = null;
    this.zip_length = !1;
    this._length = 0;
    this.inner = null;
    Rb.call(this);
    this.at_ite = null;
    this.at_index = 0;
    this.zip_length = !0;
    this._length = 0;
  };
  l["zpp_nape.util.ZPP_MixVec2List"] = kg;
  kg.__name__ = ["zpp_nape", "util", "ZPP_MixVec2List"];
  kg.get = function (a, b) {
    null == b && (b = !1);
    var c = new kg();
    c.inner = a;
    c.zpp_inner.immutable = b;
    return c;
  };
  kg.__super__ = Rb;
  kg.prototype = v(Rb.prototype, {
    inner: null,
    _length: null,
    zip_length: null,
    at_ite: null,
    at_index: null,
    zpp_gl: function () {
      this.zpp_vm();
      if (this.zip_length) {
        this._length = 0;
        for (var a = this.inner.begin(); null != a; )
          a.elem(), this._length++, (a = a.next);
        this.zip_length = !1;
      }
      return this._length;
    },
    zpp_vm: function () {
      this.zpp_inner.validate();
      this.inner.modified &&
        ((this.zip_length = !0), (this._length = 0), (this.at_ite = null));
    },
    at: function (a) {
      this.zpp_vm();
      this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a);
      if (a < this.at_index || null == this.at_ite)
        for (this.at_index = 0, this.at_ite = this.inner.begin(); ; ) {
          this.at_ite.elem();
          break;
        }
      for (; this.at_index != a; )
        for (this.at_index++, this.at_ite = this.at_ite.next; ; ) {
          this.at_ite.elem();
          break;
        }
      return this.at_ite.elem().wrapper();
    },
    push: function (a) {
      this.zpp_inner.modify_test();
      this.zpp_vm();
      var b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0;
      if (b) {
        if (this.zpp_inner.reverse_flag) this.inner.add(a.zpp_inner);
        else {
          var c = this.inner.iterator_at(this.get_length() - 1);
          this.inner.insert(c, a.zpp_inner);
        }
        this.zpp_inner.invalidate();
        null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
      }
      return b;
    },
    __class__: kg,
  });
  var rd = function () {
    this.user_length = 0;
    this.zip_length = !1;
    this.at_ite = this.push_ite = null;
    this.at_index = 0;
    this.dontremove = this.reverse_flag = !1;
    this._invalidate =
      this._validate =
      this.adder =
      this.post_adder =
      this.subber =
        null;
    this.immutable = !1;
    this.outer = null;
    this.inner = new Se();
    this._invalidated = !0;
  };
  l["zpp_nape.util.ZPP_ConstraintList"] = rd;
  rd.__name__ = ["zpp_nape", "util", "ZPP_ConstraintList"];
  rd.get = function (a, b) {
    null == b && (b = !1);
    var c = new oj();
    c.zpp_inner.inner = a;
    b && (c.zpp_inner.immutable = !0);
    c.zpp_inner.zip_length = !0;
    return c;
  };
  rd.prototype = {
    outer: null,
    inner: null,
    immutable: null,
    _invalidated: null,
    _invalidate: null,
    _validate: null,
    adder: null,
    post_adder: null,
    subber: null,
    dontremove: null,
    reverse_flag: null,
    valmod: function () {
      this.validate();
      this.inner.modified &&
        (this.inner.pushmod && (this.push_ite = null),
        (this.at_ite = null),
        (this.inner.modified = !1),
        (this.inner.pushmod = !1),
        (this.zip_length = !0));
    },
    modify_test: function () {},
    validate: function () {
      this._invalidated &&
        ((this._invalidated = !1), null != this._validate && this._validate());
    },
    invalidate: function () {
      this._invalidated = !0;
      null != this._invalidate && this._invalidate(this);
    },
    at_index: null,
    at_ite: null,
    push_ite: null,
    zip_length: null,
    user_length: null,
    __class__: rd,
  };
  var pe = function () {
    this.user_length = 0;
    this.zip_length = !1;
    this.at_ite = this.push_ite = null;
    this.at_index = 0;
    this.dontremove = this.reverse_flag = !1;
    this._invalidate =
      this._validate =
      this.adder =
      this.post_adder =
      this.subber =
        null;
    this.immutable = !1;
    this.outer = null;
    this.inner = new Ve();
    this._invalidated = !0;
  };
  l["zpp_nape.util.ZPP_BodyList"] = pe;
  pe.__name__ = ["zpp_nape", "util", "ZPP_BodyList"];
  pe.get = function (a, b) {
    null == b && (b = !1);
    var c = new xj();
    c.zpp_inner.inner = a;
    b && (c.zpp_inner.immutable = !0);
    c.zpp_inner.zip_length = !0;
    return c;
  };
  pe.prototype = {
    outer: null,
    inner: null,
    immutable: null,
    _invalidated: null,
    _invalidate: null,
    _validate: null,
    adder: null,
    post_adder: null,
    subber: null,
    dontremove: null,
    reverse_flag: null,
    valmod: function () {
      this.validate();
      this.inner.modified &&
        (this.inner.pushmod && (this.push_ite = null),
        (this.at_ite = null),
        (this.inner.modified = !1),
        (this.inner.pushmod = !1),
        (this.zip_length = !0));
    },
    modify_test: function () {},
    validate: function () {
      this._invalidated &&
        ((this._invalidated = !1), null != this._validate && this._validate());
    },
    invalidate: function () {
      this._invalidated = !0;
      null != this._invalidate && this._invalidate(this);
    },
    at_index: null,
    at_ite: null,
    push_ite: null,
    zip_length: null,
    user_length: null,
    __class__: pe,
  };
  var Bg = function () {
    this.user_length = 0;
    this.zip_length = !1;
    this.at_ite = this.push_ite = null;
    this.at_index = 0;
    this.reverse_flag = !1;
    this.outer = this._validate = null;
    this.inner = new ve();
    this._invalidated = !0;
  };
  l["zpp_nape.util.ZPP_InteractorList"] = Bg;
  Bg.__name__ = ["zpp_nape", "util", "ZPP_InteractorList"];
  Bg.prototype = {
    outer: null,
    inner: null,
    _invalidated: null,
    _validate: null,
    reverse_flag: null,
    valmod: function () {
      this.validate();
      this.inner.modified &&
        (this.inner.pushmod && (this.push_ite = null),
        (this.at_ite = null),
        (this.inner.modified = !1),
        (this.inner.pushmod = !1),
        (this.zip_length = !0));
    },
    validate: function () {
      this._invalidated &&
        ((this._invalidated = !1), null != this._validate && this._validate());
    },
    at_index: null,
    at_ite: null,
    push_ite: null,
    zip_length: null,
    user_length: null,
    __class__: Bg,
  };
  var jf = function () {
    this.user_length = 0;
    this.zip_length = !1;
    this.at_ite = this.push_ite = null;
    this.at_index = 0;
    this.dontremove = this.reverse_flag = !1;
    this._invalidate = this._validate = this.adder = this.subber = null;
    this.immutable = !1;
    this.outer = null;
    this.inner = new pf();
    this._invalidated = !0;
  };
  l["zpp_nape.util.ZPP_CompoundList"] = jf;
  jf.__name__ = ["zpp_nape", "util", "ZPP_CompoundList"];
  jf.get = function (a, b) {
    null == b && (b = !1);
    var c = new zj();
    c.zpp_inner.inner = a;
    b && (c.zpp_inner.immutable = !0);
    c.zpp_inner.zip_length = !0;
    return c;
  };
  jf.prototype = {
    outer: null,
    inner: null,
    immutable: null,
    _invalidated: null,
    _invalidate: null,
    _validate: null,
    adder: null,
    subber: null,
    dontremove: null,
    reverse_flag: null,
    valmod: function () {
      this.validate();
      this.inner.modified &&
        (this.inner.pushmod && (this.push_ite = null),
        (this.at_ite = null),
        (this.inner.modified = !1),
        (this.inner.pushmod = !1),
        (this.zip_length = !0));
    },
    modify_test: function () {},
    validate: function () {
      this._invalidated &&
        ((this._invalidated = !1), null != this._validate && this._validate());
    },
    invalidate: function () {
      this._invalidated = !0;
      null != this._invalidate && this._invalidate(this);
    },
    at_index: null,
    at_ite: null,
    push_ite: null,
    zip_length: null,
    user_length: null,
    __class__: jf,
  };
  var Tf = function () {
    this.user_length = 0;
    this.zip_length = !1;
    this.at_ite = this.push_ite = null;
    this.at_index = 0;
    this.dontremove = this.reverse_flag = !1;
    this._invalidate =
      this._validate =
      this.adder =
      this.post_adder =
      this.subber =
        null;
    this.immutable = !1;
    this.outer = null;
    this.inner = new oi();
    this._invalidated = !0;
  };
  l["zpp_nape.util.ZPP_ListenerList"] = Tf;
  Tf.__name__ = ["zpp_nape", "util", "ZPP_ListenerList"];
  Tf.get = function (a, b) {
    null == b && (b = !1);
    var c = new lj();
    c.zpp_inner.inner = a;
    b && (c.zpp_inner.immutable = !0);
    c.zpp_inner.zip_length = !0;
    return c;
  };
  Tf.prototype = {
    outer: null,
    inner: null,
    immutable: null,
    _invalidated: null,
    _invalidate: null,
    _validate: null,
    adder: null,
    post_adder: null,
    subber: null,
    dontremove: null,
    reverse_flag: null,
    valmod: function () {
      this.validate();
      this.inner.modified &&
        (this.inner.pushmod && (this.push_ite = null),
        (this.at_ite = null),
        (this.inner.modified = !1),
        (this.inner.pushmod = !1),
        (this.zip_length = !0));
    },
    modify_test: function () {},
    validate: function () {
      this._invalidated &&
        ((this._invalidated = !1), null != this._validate && this._validate());
    },
    invalidate: function () {
      this._invalidated = !0;
      null != this._invalidate && this._invalidate(this);
    },
    at_index: null,
    at_ite: null,
    push_ite: null,
    zip_length: null,
    user_length: null,
    __class__: Tf,
  };
  var Le = function () {
    this.user_length = 0;
    this.zip_length = !1;
    this.at_ite = this.push_ite = null;
    this.at_index = 0;
    this.dontremove = this.reverse_flag = !1;
    this._invalidate =
      this._validate =
      this.adder =
      this.post_adder =
      this.subber =
        null;
    this.immutable = !1;
    this.outer = null;
    this.inner = new Sd();
    this._invalidated = !0;
  };
  l["zpp_nape.util.ZPP_CbTypeList"] = Le;
  Le.__name__ = ["zpp_nape", "util", "ZPP_CbTypeList"];
  Le.get = function (a, b) {
    null == b && (b = !1);
    var c = new Me();
    c.zpp_inner.inner = a;
    b && (c.zpp_inner.immutable = !0);
    c.zpp_inner.zip_length = !0;
    return c;
  };
  Le.prototype = {
    outer: null,
    inner: null,
    immutable: null,
    _invalidated: null,
    _invalidate: null,
    _validate: null,
    adder: null,
    post_adder: null,
    subber: null,
    dontremove: null,
    reverse_flag: null,
    valmod: function () {
      this.validate();
      this.inner.modified &&
        (this.inner.pushmod && (this.push_ite = null),
        (this.at_ite = null),
        (this.inner.modified = !1),
        (this.inner.pushmod = !1),
        (this.zip_length = !0));
    },
    modify_test: function () {},
    validate: function () {
      this._invalidated &&
        ((this._invalidated = !1), null != this._validate && this._validate());
    },
    invalidate: function () {
      this._invalidated = !0;
      null != this._invalidate && this._invalidate(this);
    },
    at_index: null,
    at_ite: null,
    push_ite: null,
    zip_length: null,
    user_length: null,
    __class__: Le,
  };
  var Ag = function () {
    this.user_length = 0;
    this.zip_length = !1;
    this.at_ite = this.push_ite = null;
    this.at_index = 0;
    this.reverse_flag = !1;
    this._invalidate =
      this._validate =
      this.adder =
      this.post_adder =
      this.subber =
        null;
    this.immutable = !1;
    this.outer = null;
    this.inner = new Pg();
    this._invalidated = !0;
  };
  l["zpp_nape.util.ZPP_Vec2List"] = Ag;
  Ag.__name__ = ["zpp_nape", "util", "ZPP_Vec2List"];
  Ag.prototype = {
    outer: null,
    inner: null,
    immutable: null,
    _invalidated: null,
    _invalidate: null,
    _validate: null,
    adder: null,
    post_adder: null,
    subber: null,
    reverse_flag: null,
    valmod: function () {
      this.validate();
      this.inner.modified &&
        (this.inner.pushmod && (this.push_ite = null),
        (this.at_ite = null),
        (this.inner.modified = !1),
        (this.inner.pushmod = !1),
        (this.zip_length = !0));
    },
    modify_test: function () {},
    validate: function () {
      this._invalidated &&
        ((this._invalidated = !1), null != this._validate && this._validate());
    },
    invalidate: function () {
      this._invalidated = !0;
      null != this._invalidate && this._invalidate(this);
    },
    at_index: null,
    at_ite: null,
    push_ite: null,
    zip_length: null,
    user_length: null,
    __class__: Ag,
  };
  var yg = function () {
    this.user_length = 0;
    this.zip_length = !1;
    this.at_ite = this.push_ite = null;
    this.at_index = 0;
    this.reverse_flag = !1;
    this.outer = this._validate = null;
    this.inner = new xk();
    this._invalidated = !0;
  };
  l["zpp_nape.util.ZPP_GeomPolyList"] = yg;
  yg.__name__ = ["zpp_nape", "util", "ZPP_GeomPolyList"];
  yg.prototype = {
    outer: null,
    inner: null,
    _invalidated: null,
    _validate: null,
    reverse_flag: null,
    valmod: function () {
      this.validate();
      this.inner.modified &&
        (this.inner.pushmod && (this.push_ite = null),
        (this.at_ite = null),
        (this.inner.modified = !1),
        (this.inner.pushmod = !1),
        (this.zip_length = !0));
    },
    validate: function () {
      this._invalidated &&
        ((this._invalidated = !1), null != this._validate && this._validate());
    },
    at_index: null,
    at_ite: null,
    push_ite: null,
    zip_length: null,
    user_length: null,
    __class__: yg,
  };
  var zg = function () {
    this.user_length = 0;
    this.zip_length = !1;
    this.at_ite = this.push_ite = null;
    this.at_index = 0;
    this.reverse_flag = !1;
    this.outer = this._validate = null;
    this.inner = new yk();
    this._invalidated = !0;
  };
  l["zpp_nape.util.ZPP_RayResultList"] = zg;
  zg.__name__ = ["zpp_nape", "util", "ZPP_RayResultList"];
  zg.prototype = {
    outer: null,
    inner: null,
    _invalidated: null,
    _validate: null,
    reverse_flag: null,
    valmod: function () {
      this.validate();
      this.inner.modified &&
        (this.inner.pushmod && (this.push_ite = null),
        (this.at_ite = null),
        (this.inner.modified = !1),
        (this.inner.pushmod = !1),
        (this.zip_length = !0));
    },
    validate: function () {
      this._invalidated &&
        ((this._invalidated = !1), null != this._validate && this._validate());
    },
    at_index: null,
    at_ite: null,
    push_ite: null,
    zip_length: null,
    user_length: null,
    __class__: zg,
  };
  var vg = function () {
    this.user_length = 0;
    this.zip_length = !1;
    this.at_ite = this.push_ite = null;
    this.at_index = 0;
    this.reverse_flag = !1;
    this.outer = this._validate = null;
    this.inner = new wk();
    this._invalidated = !0;
  };
  l["zpp_nape.util.ZPP_ConvexResultList"] = vg;
  vg.__name__ = ["zpp_nape", "util", "ZPP_ConvexResultList"];
  vg.prototype = {
    outer: null,
    inner: null,
    _invalidated: null,
    _validate: null,
    reverse_flag: null,
    valmod: function () {
      this.validate();
      this.inner.modified &&
        (this.inner.pushmod && (this.push_ite = null),
        (this.at_ite = null),
        (this.inner.modified = !1),
        (this.inner.pushmod = !1),
        (this.zip_length = !0));
    },
    validate: function () {
      this._invalidated &&
        ((this._invalidated = !1), null != this._validate && this._validate());
    },
    at_index: null,
    at_ite: null,
    push_ite: null,
    zip_length: null,
    user_length: null,
    __class__: vg,
  };
  var Cg = function () {
    this.user_length = 0;
    this.zip_length = !1;
    this.at_ite = this.push_ite = null;
    this.at_index = 0;
    this.reverse_flag = !1;
    this.outer = this._validate = null;
    this.inner = new ki();
    this._invalidated = !0;
  };
  l["zpp_nape.util.ZPP_EdgeList"] = Cg;
  Cg.__name__ = ["zpp_nape", "util", "ZPP_EdgeList"];
  Cg.prototype = {
    outer: null,
    inner: null,
    _invalidated: null,
    _validate: null,
    reverse_flag: null,
    valmod: function () {
      this.validate();
      this.inner.modified &&
        (this.inner.pushmod && (this.push_ite = null),
        (this.at_ite = null),
        (this.inner.modified = !1),
        (this.inner.pushmod = !1),
        (this.zip_length = !0));
    },
    validate: function () {
      this._invalidated &&
        ((this._invalidated = !1), null != this._validate && this._validate());
    },
    at_index: null,
    at_ite: null,
    push_ite: null,
    zip_length: null,
    user_length: null,
    __class__: Cg,
  };
  var lf = function () {
    this.user_length = 0;
    this.zip_length = !1;
    this.at_ite = this.push_ite = null;
    this.at_index = 0;
    this.dontremove = this.reverse_flag = !1;
    this._invalidate =
      this._validate =
      this.adder =
      this.post_adder =
      this.subber =
        null;
    this.immutable = !1;
    this.outer = null;
    this.inner = new vf();
    this._invalidated = !0;
  };
  l["zpp_nape.util.ZPP_ShapeList"] = lf;
  lf.__name__ = ["zpp_nape", "util", "ZPP_ShapeList"];
  lf.get = function (a, b) {
    null == b && (b = !1);
    var c = new Bj();
    c.zpp_inner.inner = a;
    b && (c.zpp_inner.immutable = !0);
    c.zpp_inner.zip_length = !0;
    return c;
  };
  lf.prototype = {
    outer: null,
    inner: null,
    immutable: null,
    _invalidated: null,
    _invalidate: null,
    _validate: null,
    adder: null,
    post_adder: null,
    subber: null,
    dontremove: null,
    reverse_flag: null,
    valmod: function () {
      this.validate();
      this.inner.modified &&
        (this.inner.pushmod && (this.push_ite = null),
        (this.at_ite = null),
        (this.inner.modified = !1),
        (this.inner.pushmod = !1),
        (this.zip_length = !0));
    },
    modify_test: function () {},
    validate: function () {
      this._invalidated &&
        ((this._invalidated = !1), null != this._validate && this._validate());
    },
    invalidate: function () {
      this._invalidated = !0;
      null != this._invalidate && this._invalidate(this);
    },
    at_index: null,
    at_ite: null,
    push_ite: null,
    zip_length: null,
    user_length: null,
    __class__: lf,
  };
  var ug = function () {
    this.user_length = 0;
    this.zip_length = !1;
    this.at_ite = this.push_ite = null;
    this.at_index = 0;
    this.reverse_flag = !1;
    this.outer = this._validate = null;
    this.inner = new ji();
    this._invalidated = !0;
  };
  l["zpp_nape.util.ZPP_InteractionGroupList"] = ug;
  ug.__name__ = ["zpp_nape", "util", "ZPP_InteractionGroupList"];
  ug.prototype = {
    outer: null,
    inner: null,
    _invalidated: null,
    _validate: null,
    reverse_flag: null,
    valmod: function () {
      this.validate();
      this.inner.modified &&
        (this.inner.pushmod && (this.push_ite = null),
        (this.at_ite = null),
        (this.inner.modified = !1),
        (this.inner.pushmod = !1),
        (this.zip_length = !0));
    },
    validate: function () {
      this._invalidated &&
        ((this._invalidated = !1), null != this._validate && this._validate());
    },
    at_index: null,
    at_ite: null,
    push_ite: null,
    zip_length: null,
    user_length: null,
    __class__: ug,
  };
  var zf = function () {
    this.user_length = 0;
    this.zip_length = !1;
    this.at_ite = this.push_ite = null;
    this.at_index = 0;
    this.reverse_flag = !1;
    this._validate = null;
    this.immutable = !1;
    this.outer = null;
    this.inner = new Qg();
    this._invalidated = !0;
  };
  l["zpp_nape.util.ZPP_ArbiterList"] = zf;
  zf.__name__ = ["zpp_nape", "util", "ZPP_ArbiterList"];
  zf.get = function (a, b) {
    null == b && (b = !1);
    var c = new ag();
    c.zpp_inner.inner = a;
    b && (c.zpp_inner.immutable = !0);
    c.zpp_inner.zip_length = !0;
    return c;
  };
  zf.prototype = {
    outer: null,
    inner: null,
    immutable: null,
    _invalidated: null,
    _validate: null,
    reverse_flag: null,
    valmod: function () {
      this.validate();
      this.inner.modified &&
        (this.inner.pushmod && (this.push_ite = null),
        (this.at_ite = null),
        (this.inner.modified = !1),
        (this.inner.pushmod = !1),
        (this.zip_length = !0));
    },
    validate: function () {
      this._invalidated &&
        ((this._invalidated = !1), null != this._validate && this._validate());
    },
    at_index: null,
    at_ite: null,
    push_ite: null,
    zip_length: null,
    user_length: null,
    __class__: zf,
  };
  var tg = function () {
    this.user_length = 0;
    this.zip_length = !1;
    this.at_ite = this.push_ite = null;
    this.at_index = 0;
    this.reverse_flag = !1;
    this.outer = this._validate = null;
    this.inner = new wc();
    this._invalidated = !0;
  };
  l["zpp_nape.util.ZPP_ContactList"] = tg;
  tg.__name__ = ["zpp_nape", "util", "ZPP_ContactList"];
  tg.prototype = {
    outer: null,
    inner: null,
    _invalidated: null,
    _validate: null,
    reverse_flag: null,
    valmod: function () {
      this.validate();
      this.inner.modified &&
        (this.inner.pushmod && (this.push_ite = null),
        (this.at_ite = null),
        (this.inner.modified = !1),
        (this.inner.pushmod = !1),
        (this.zip_length = !0));
    },
    validate: function () {
      this._invalidated &&
        ((this._invalidated = !1), null != this._validate && this._validate());
    },
    at_index: null,
    at_ite: null,
    push_ite: null,
    zip_length: null,
    user_length: null,
    __class__: tg,
  };
  var Fa = function () {};
  l["zpp_nape.util.ZPP_Math"] = Fa;
  Fa.__name__ = ["zpp_nape", "util", "ZPP_Math"];
  Fa.sqrt = function (a) {
    return Math.sqrt(a);
  };
  Fa.invsqrt = function (a) {
    return 1 / Fa.sqrt(a);
  };
  Fa.sqr = function (a) {
    return a * a;
  };
  Fa.clamp2 = function (a, b) {
    return Fa.clamp(a, -b, b);
  };
  Fa.clamp = function (a, b, c) {
    return a < b ? b : a > c ? c : a;
  };
  var yb = function () {
    this.colour = 0;
    this.lt =
      this.swapped =
      this.data =
      this.prev =
      this.next =
      this.parent =
        null;
  };
  l["zpp_nape.util.ZPP_Set_ZPP_CbSetPair"] = yb;
  yb.__name__ = ["zpp_nape", "util", "ZPP_Set_ZPP_CbSetPair"];
  yb.prototype = {
    free: function () {
      this.swapped = this.lt = this.data = null;
    },
    alloc: function () {},
    lt: null,
    swapped: null,
    data: null,
    prev: null,
    next: null,
    parent: null,
    colour: null,
    clear_with: function (a) {
      if (null != this.parent) {
        for (var b = this.parent; null != b; )
          b =
            null != b.prev
              ? b.prev
              : null != b.next
              ? b.next
              : this.clear_node(b, a);
        this.parent = null;
      }
    },
    clear_node: function (a, b) {
      b(a.data);
      b = a.parent;
      null != b &&
        (a == b.prev ? (b.prev = null) : (b.next = null), (a.parent = null));
      a.free();
      a.next = yb.zpp_pool;
      yb.zpp_pool = a;
      return b;
    },
    __fix_dbl_red: function (a) {
      for (;;) {
        var b = a.parent,
          c = b.parent;
        if (null == c) {
          b.colour = 1;
          break;
        }
        if (b == c.prev) {
          var d = c;
          var e = c.next;
          if (a == b.prev) {
            var f = a;
            var g = b;
            var h = a.prev;
            var k = a.next;
            var l = b.next;
          } else (f = b), (g = a), (h = b.prev), (k = a.prev), (l = a.next);
        } else
          (f = c),
            (h = c.prev),
            a == b.prev
              ? ((g = a), (d = b), (k = a.prev), (l = a.next), (e = b.next))
              : ((g = b), (d = a), (k = b.prev), (l = a.prev), (e = a.next));
        a = c.parent;
        null == a
          ? (this.parent = g)
          : a.prev == c
          ? (a.prev = g)
          : (a.next = g);
        null != g && (g.parent = a);
        f.prev = h;
        null != h && (h.parent = f);
        f.next = k;
        null != k && (k.parent = f);
        g.prev = f;
        null != f && (f.parent = g);
        g.next = d;
        null != d && (d.parent = g);
        d.prev = l;
        null != l && (l.parent = d);
        d.next = e;
        null != e && (e.parent = d);
        g.colour = c.colour - 1;
        f.colour = 1;
        d.colour = 1;
        if (g == this.parent) this.parent.colour = 1;
        else if (0 == g.colour && 0 == g.parent.colour) {
          a = g;
          continue;
        }
        break;
      }
    },
    try_insert: function (a) {
      var b = null,
        c = null;
      if (null == this.parent)
        null == yb.zpp_pool
          ? (b = new yb())
          : ((b = yb.zpp_pool), (yb.zpp_pool = b.next), (b.next = null)),
          b.alloc(),
          (b.data = a),
          (this.parent = b);
      else
        for (c = this.parent; ; )
          if (this.lt(a, c.data))
            if (null == c.prev) {
              null == yb.zpp_pool
                ? (b = new yb())
                : ((b = yb.zpp_pool), (yb.zpp_pool = b.next), (b.next = null));
              b.alloc();
              b.data = a;
              c.prev = b;
              b.parent = c;
              break;
            } else c = c.prev;
          else if (this.lt(c.data, a))
            if (null == c.next) {
              null == yb.zpp_pool
                ? (b = new yb())
                : ((b = yb.zpp_pool), (yb.zpp_pool = b.next), (b.next = null));
              b.alloc();
              b.data = a;
              c.next = b;
              b.parent = c;
              break;
            } else c = c.next;
          else break;
      if (null == b) return c;
      null == b.parent
        ? (b.colour = 1)
        : ((b.colour = 0), 0 == b.parent.colour && this.__fix_dbl_red(b));
      return b;
    },
    __class__: yb,
  };
  var md = function () {
    this.colour = 0;
    this.lt =
      this.swapped =
      this.data =
      this.prev =
      this.next =
      this.parent =
        null;
  };
  l["zpp_nape.util.ZPP_Set_ZPP_CbSet"] = md;
  md.__name__ = ["zpp_nape", "util", "ZPP_Set_ZPP_CbSet"];
  md.prototype = {
    free: function () {
      this.swapped = this.lt = this.data = null;
    },
    alloc: function () {},
    lt: null,
    swapped: null,
    data: null,
    prev: null,
    next: null,
    parent: null,
    colour: null,
    empty: function () {
      return null == this.parent;
    },
    find: function (a) {
      for (var b = this.parent; null != b && b.data != a; )
        b = this.lt(a, b.data) ? b.prev : b.next;
      return b;
    },
    find_weak: function (a) {
      for (var b = this.parent; null != b; )
        if (this.lt(a, b.data)) b = b.prev;
        else if (this.lt(b.data, a)) b = b.next;
        else break;
      return b;
    },
    remove: function (a) {
      a = this.find(a);
      this.remove_node(a);
    },
    remove_node: function (a) {
      if (null != a.next && null != a.prev) {
        for (var b = a.next; null != b.prev; ) b = b.prev;
        var c = a.data;
        a.data = b.data;
        b.data = c;
        null != this.swapped && this.swapped(a.data, b.data);
        a = b;
      }
      b = null == a.prev ? a.next : a.prev;
      if (1 == a.colour)
        if (null != a.prev || null != a.next) b.colour = 1;
        else if (null != a.parent)
          for (c = a.parent; ; ) {
            c.colour++;
            c.prev.colour--;
            c.next.colour--;
            var d = c.prev;
            if (-1 == d.colour) {
              this.__fix_neg_red(d);
              break;
            } else if (0 == d.colour) {
              if (null != d.prev && 0 == d.prev.colour) {
                this.__fix_dbl_red(d.prev);
                break;
              }
              if (null != d.next && 0 == d.next.colour) {
                this.__fix_dbl_red(d.next);
                break;
              }
            }
            d = c.next;
            if (-1 == d.colour) {
              this.__fix_neg_red(d);
              break;
            } else if (0 == d.colour) {
              if (null != d.prev && 0 == d.prev.colour) {
                this.__fix_dbl_red(d.prev);
                break;
              }
              if (null != d.next && 0 == d.next.colour) {
                this.__fix_dbl_red(d.next);
                break;
              }
            }
            if (2 == c.colour)
              if (null == c.parent) c.colour = 1;
              else {
                c = c.parent;
                continue;
              }
            break;
          }
      c = a.parent;
      null == c ? (this.parent = b) : c.prev == a ? (c.prev = b) : (c.next = b);
      null != b && (b.parent = c);
      a.parent = a.prev = a.next = null;
      a.free();
      a.next = md.zpp_pool;
      md.zpp_pool = a;
    },
    __fix_neg_red: function (a) {
      var b = a.parent;
      if (b.prev == a) {
        var c = a.prev,
          d = a.next,
          e = d.prev,
          f = d.next;
        c.colour = 0;
        a.colour = b.colour = 1;
        a.next = e;
        null != e && (e.parent = a);
        a = b.data;
        b.data = d.data;
        d.data = a;
        null != this.swapped && this.swapped(b.data, d.data);
        d.prev = f;
        null != f && (f.parent = d);
        d.next = b.next;
        null != b.next && (b.next.parent = d);
        b.next = d;
      } else
        (c = a.next),
          (d = a.prev),
          (e = d.next),
          (f = d.prev),
          (c.colour = 0),
          (a.colour = b.colour = 1),
          (a.prev = e),
          null != e && (e.parent = a),
          (a = b.data),
          (b.data = d.data),
          (d.data = a),
          null != this.swapped && this.swapped(b.data, d.data),
          (d.next = f),
          null != f && (f.parent = d),
          (d.prev = b.prev),
          null != b.prev && (b.prev.parent = d),
          (b.prev = d);
      null != d && (d.parent = b);
      b = c;
      null != b.prev && 0 == b.prev.colour
        ? this.__fix_dbl_red(b.prev)
        : null != b.next && 0 == b.next.colour && this.__fix_dbl_red(b.next);
    },
    __fix_dbl_red: function (a) {
      for (;;) {
        var b = a.parent,
          c = b.parent;
        if (null == c) {
          b.colour = 1;
          break;
        }
        if (b == c.prev) {
          var d = c;
          var e = c.next;
          if (a == b.prev) {
            var f = a;
            var g = b;
            var h = a.prev;
            var k = a.next;
            var l = b.next;
          } else (f = b), (g = a), (h = b.prev), (k = a.prev), (l = a.next);
        } else
          (f = c),
            (h = c.prev),
            a == b.prev
              ? ((g = a), (d = b), (k = a.prev), (l = a.next), (e = b.next))
              : ((g = b), (d = a), (k = b.prev), (l = a.prev), (e = a.next));
        a = c.parent;
        null == a
          ? (this.parent = g)
          : a.prev == c
          ? (a.prev = g)
          : (a.next = g);
        null != g && (g.parent = a);
        f.prev = h;
        null != h && (h.parent = f);
        f.next = k;
        null != k && (k.parent = f);
        g.prev = f;
        null != f && (f.parent = g);
        g.next = d;
        null != d && (d.parent = g);
        d.prev = l;
        null != l && (l.parent = d);
        d.next = e;
        null != e && (e.parent = d);
        g.colour = c.colour - 1;
        f.colour = 1;
        d.colour = 1;
        if (g == this.parent) this.parent.colour = 1;
        else if (0 == g.colour && 0 == g.parent.colour) {
          a = g;
          continue;
        }
        break;
      }
    },
    insert: function (a) {
      if (null == md.zpp_pool) var b = new md();
      else (b = md.zpp_pool), (md.zpp_pool = b.next), (b.next = null);
      b.alloc();
      b.data = a;
      if (null == this.parent) this.parent = b;
      else
        for (a = this.parent; ; )
          if (this.lt(b.data, a.data))
            if (null == a.prev) {
              a.prev = b;
              b.parent = a;
              break;
            } else a = a.prev;
          else if (null == a.next) {
            a.next = b;
            b.parent = a;
            break;
          } else a = a.next;
      null == b.parent
        ? (b.colour = 1)
        : ((b.colour = 0), 0 == b.parent.colour && this.__fix_dbl_red(b));
      return b;
    },
    __class__: md,
  };
  var Ya,
    Gl = 0;
  l.Math = Math;
  String.prototype.__class__ = l.String = String;
  String.__name__ = ["String"];
  l.Array = Array;
  Array.__name__ = ["Array"];
  Date.prototype.__class__ = l.Date = Date;
  Date.__name__ = ["Date"];
  var rl = (l.Int = { __name__: ["Int"] }),
    Ml = (l.Dynamic = { __name__: ["Dynamic"] }),
    vl = (l.Float = Number);
  vl.__name__ = ["Float"];
  var ul = (l.Bool = Boolean);
  ul.__ename__ = ["Bool"];
  var ql = (l.Class = { __name__: ["Class"] }),
    tl = {},
    Ll = {},
    Ii = Ia.ArrayBuffer || Oc;
  null == Ii.prototype.slice && (Ii.prototype.slice = Oc.sliceImpl);
  var de = Ia.Float32Array || Ge._new,
    dd = Ia.Uint8Array || He._new,
    Nl = new Uint32Array(256);
  H.__alpha16 = Nl;
  for (var Bl = 0; 256 > Bl; ) {
    var Cl = Bl++;
    H.__alpha16[Cl] = Math.ceil(257.00392156862745 * Cl);
  }
  var Ol = new dd(511);
  H.__clamp = Ol;
  for (var Dl = 0; 255 > Dl; ) {
    var El = Dl++;
    H.__clamp[El] = El;
  }
  for (var Fl = 255; 511 > Fl; ) {
    var Pl = Fl++;
    H.__clamp[Pl] = 255;
  }
  xa.level = 3;
  "undefined" == typeof console && (console = {});
  null == console.log && (console.log = function () {});
  q.hitTestCanvas = T.get_supported()
    ? T.get_document().createElement("canvas")
    : null;
  q.hitTestContext = T.get_supported()
    ? q.hitTestCanvas.getContext("2d")
    : null;
  ib.count = 0;
  Y.__broadcastEvents = new sa();
  Y.__instanceCount = 0;
  Y.__tempColorTransform = new Ka();
  Y.__tempStack = new Be(
    function () {
      return Eb.toObjectVector(null);
    },
    function (a) {
      a.set_length(0);
    }
  );
  Bd.DEGREE = 180 / Math.PI;
  C.pause = !1;
  C.position = 0;
  C.audioArray = [];
  C.loopPaused = !1;
  C.adsPause = !1;
  ia.__pool = new Be(
    function () {
      return new ia();
    },
    function (a) {
      a.identity();
    }
  );
  k.arrayWall = [
    6, 10, 5, 7, 6, 5, 7, 12, 8, 8, 8, 14, 9, 8, 12, 6, 6, 7, 9, 10, 6, 13, 13,
    7, 7, 7, 13, 9, 6, 15,
  ];
  k.offsetBack = [
    [0, 0],
    [0, 0],
    [0, 0],
    [0, 0],
    [0, 0],
    [0, 0],
    [0, 0],
    [0, 0],
    [0, 0],
    [0, 0],
    [0, 0],
    [0, 0],
    [0, 0],
    [0, 0],
    [0, 0],
    [0, 0],
    [0, 0],
    [0, 0],
    [0, 0],
    [0, 0],
    [0, 0],
    [0, 0],
    [0, 0],
    [0, 0],
    [0, 0],
    [0, 0],
    [0, 0],
    [0, 0],
    [0, 0],
    [0, 0],
  ];
  k.theMenu = new wa();
  k.theGame = new wa();
  k.maskesAddedM = !1;
  k.currentDigitInPassword = 0;
  k.tweenCompleted = 0;
  k.starCounter = 0;
  k.currentHintNumber = 0;
  k.arrowCounter = 0;
  k.currentSprite = new wa();
  k.levelState = "none";
  k.run = !1;
  k.currentLevel = 1;
  k.offSetX = 0;
  k.offSetY = 0;
  k.addKoef = 0;
  k.addKoef2 = 0;
  k.ballonPushed = 0;
  k.balkaPushed = 0;
  k.adsInited = !1;
  k.resumeType = "none";
  k.currentIcon = -1;
  k.commonSpriteArray =
    "gfx_ftc_ItemHint_EffectAnimation gfx_hintFingerSwipe1_Y Button_silver gfx_ftc_lvl4_Rope ftc_w_gfx_Fly ftc_w_gfx_Starry3 ftc_w_gfx_WoodenCar ftc_w_gfx_WoodenCarWheel gfx_ftc_k_Woodensqure ftc_w_gfx_Oscar gfx_ftc_k_lvl14_gun_stand gfx_ftc_k_lvl14_gun gfx_ftc_lvl13_Valve gfx_ftc_k_Ball gfx_ftc_lvl16_MadBalloon1 LevelItem_Lock3 ftc_w_gfx_Lock3 ftc_w_gfx_Starry spider_up ftc_w_gfx_hedgehog ftc_w_gfx_FanBtn ftc_w_gfx_Fan ftc_w_gfx_HedgehogScarying ftc_w_gfx_GreenBoxPart1 ftc_w_gfx_GreenBoxPart2 ftc_w_gfx_Apple ftc_w_gfx_Ice ftc_w_gfx_IceBlocker1 ftc_w_gfx_IceBlocker ftc_w_gfx_hedgehog ftc_w_gfx_SnowBlock ftc_w_gfx_SnowBlock2 ftc_w_gfx_SnowBlock3 ftc_w_gfx_Creature2_Animation2 ftc_w_gfx_Energysource ftc_w_gfx_EnergyFog ftc_w_gfx_LongBox3 ftc_w_gfx_LongBox4 ftc_w_gfx_LongBox5 ftc_w_gfx_LongBox7 ftc_w_gfx_LongBox8 ftc_w_gfx_LongBox11 ftc_w_gfx_Gift01_2 ftc_w_gfx_Gift02 ftc_w_gfx_Gift04 ftc_w_gfx_Gift04_2 ftc_w_gfx_Gift05 ftc_w_gfx_Gift05_1 ftc_w_gfx_Gift06 ftc_w_gfx_Gift7 gfx_ftc_candy ftc_w_gfx_Snow1_1 gfx_ftc_lvl2_Lamp gfx_ftc_lvl17_btnGoo gfx_ftc_lvl17_BtnRight gfx_ftc_lvl17_BtnUp gfx_ftc_lvl17_BtnLeft gfx_ftc_lvl2_LampLight gfx_hintFingerPush gfx_ftc_lvl12_VaultPart1 gfx_ftc_lvl14_GoldenKey gfx_ftc_lv6_BeerBox2 gfx_ftc_lvl3_Alarm gfx_ftc_lvl3_IronBox gfx_ftc_lvl16_SmallMadBalloon1 gfx_ftc_lvl9_Wire1Part gfx_ftc_lvl9_Wire2Part ftc_w_gfx_Wire3Part gfx_ftc_lvl17_Creature1_Animation gfx_ftc_lvl8_UpperDoorPart2 gfx_ftc_lvl8_IronChainCell1 gfx_ftc_lvl8_IronChainCell2 gfx_ftc_lvl8_IronChainCell3 gfx_ftc_Creature2_Animation4 gfx_ftc_lvl1_lock1 gfx_ftc_lvl1_lock2 gfx_ftc_Creature4_Animation1 gfx_ftc_Creature4_Animation2 gfx_ftc_lvl7_Git05_1 gfx_ftc_Creature2_Animation3_Reverse gfx_ftc_Creature2_Animation2_Reverse complAcorn ftc_w_gfx_Rope gfx_ftc_CandyCollect_Effect gfx_ftc_Creature4_Animation2 ftc_w_gfx_Creature2_Animation1 gfx_ftc_GlassBall gfx_ftc_GiftCollect_Effect1 gfx_hintFingerSwipe1_X gfx_hintFingerSwipe1_X gfx_ftc_StarCollect_Effect gfx_btnGameMenuSlider acIcons ftc_w_gfx_Candy gfx_ftc_star gfx_hintFingerSwipe1_X lIcons gfx_ftc_Creature3_Animation1 gfx_ftc_Creature3_Animation2".split(
      " "
    );
  k.mousePoint = new w(0, 0);
  k.scoresArray = [];
  k.isMobileCheck = !1;
  gc.USE_CACHE = !1;
  gc.USE_ENUM_INDEX = !1;
  gc.BASE64 =
    "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
  hc.DEFAULT_RESOLVER = new fh();
  hc.BASE64 =
    "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
  df.CHARS = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
  df.BYTES = eb.ofString(df.CHARS);
  Cc.i64tmp = new ka(0, 0);
  r.__toStr = {}.toString;
  Ge.BYTES_PER_ELEMENT = 4;
  He.BYTES_PER_ELEMENT = 1;
  ba.activeRequests = 0;
  ba.requestLimit = 4;
  ba.requestQueue = new bd();
  la.dummyCharacter = "\u007f";
  la.windowID = 0;
  qa.__base64Chars =
    "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
  Na.__identity = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];
  Nb.onUpdate = new fb();
  $e.sensorByID = new mb();
  $e.sensors = [];
  vb.devices = new mb();
  vb.onConnect = new Xi();
  zb.devices = new mb();
  zb.onConnect = new Yi();
  Jb.onCancel = new $f();
  Jb.onEnd = new $f();
  Jb.onMove = new $f();
  Jb.onStart = new $f();
  Q.cache = new bj();
  Q.onChange = new fb();
  Q.libraries = new sa();
  Q.libraryPaths = new sa();
  xa.throwErrors = !0;
  lb.actuators = [];
  lb.actuatorsLength = 0;
  lb.addedEvent = !1;
  Jk.easeOut = new sh();
  Xa.defaultActuator = lb;
  Xa.defaultEase = Jk.easeOut;
  Xa.targetLibraries = new ib();
  x.epsilon = 1e-8;
  x.fluidAngularDragFriction = 2.5;
  x.fluidAngularDrag = 100;
  x.fluidVacuumDrag = 0.5;
  x.fluidLinearDrag = 0.5;
  x.collisionSlop = 0.2;
  x.collisionSlopCCD = 0.5;
  x.distanceThresholdCCD = 0.05;
  x.staticCCDLinearThreshold = 0.05;
  x.staticCCDAngularThreshold = 0.005;
  x.bulletCCDLinearThreshold = 0.125;
  x.bulletCCDAngularThreshold = 0.0125;
  x.dynamicSweepLinearThreshold = 17;
  x.dynamicSweepAngularThreshold = 0.6;
  x.angularCCDSlipScale = 0.75;
  x.arbiterExpirationDelay = 6;
  x.staticFrictionThreshold = 2;
  x.elasticThreshold = 20;
  x.sleepDelay = 60;
  x.linearSleepThreshold = 0.2;
  x.angularSleepThreshold = 0.4;
  x.contactBiasCoef = 0.3;
  x.contactStaticBiasCoef = 0.6;
  x.contactContinuousBiasCoef = 0.4;
  x.contactContinuousStaticBiasCoef = 0.5;
  x.constraintLinearSlop = 0.1;
  x.constraintAngularSlop = 0.001;
  x.illConditionedThreshold = 2e8;
  rc.limitedProfile = !0;
  U.__regexAlign = new pa("align=(\"([^\"]+)\"|'([^']+)')", "i");
  U.__regexBreakTag = new pa("<br\\s*/?>", "gi");
  U.__regexBlockIndent = new pa("blockindent=(\"([^\"]+)\"|'([^']+)')", "i");
  U.__regexColor = new pa("color=(\"#([^\"]+)\"|'#([^']+)')", "i");
  U.__regexEntities = [
    new pa("&quot;", "g"),
    new pa("&apos;", "g"),
    new pa("&amp;", "g"),
    new pa("&lt;", "g"),
    new pa("&gt;", "g"),
    new pa("&nbsp;", "g"),
  ];
  U.__regexFace = new pa("face=(\"([^\"]+)\"|'([^']+)')", "i");
  U.__regexHTMLTag = new pa("<.*?>", "g");
  U.__regexHref = new pa("href=(\"([^\"]+)\"|'([^']+)')", "i");
  U.__regexIndent = new pa(" indent=(\"([^\"]+)\"|'([^']+)')", "i");
  U.__regexLeading = new pa("leading=(\"([^\"]+)\"|'([^']+)')", "i");
  U.__regexLeftMargin = new pa("leftmargin=(\"([^\"]+)\"|'([^']+)')", "i");
  U.__regexRightMargin = new pa("rightmargin=(\"([^\"]+)\"|'([^']+)')", "i");
  U.__regexSize = new pa("size=(\"([^\"]+)\"|'([^']+)')", "i");
  U.__regexTabStops = new pa("tabstops=(\"([^\"]+)\"|'([^']+)')", "i");
  sc.instances = new sa();
  tc.empty = new tc();
  q.SIN45 = 0.7071067811865476;
  q.TAN22 = 0.41421356237309503;
  q.fillCommands = new tc();
  q.strokeCommands = new tc();
  ma.__vertexBufferStride = 14;
  ma.__tempVector = new fe();
  Z.__pool = new Be(
    function () {
      return new Z();
    },
    function (a) {
      a.setTo(0, 0, 0, 0);
    }
  );
  jb.blankBitmapData = new ma(1, 1, !1, 0);
  jb.tempColorTransform = new Ka(0, 0, 0, 1, 0, 0, 0, 0);
  Cf.opaqueBitmapData = new ma(1, 1, !1, 0);
  hb.__regexColor = new pa("color=(\"#([^\"]+)\"|'#([^']+)')", "i");
  hb.__regexFace = new pa("face=(\"([^\"]+)\"|'([^']+)')", "i");
  hb.__regexFont = new pa("<font ([^>]+)>", "gi");
  hb.__regexCloseFont = new pa("</font>", "gi");
  hb.__regexSize = new pa("size=(\"([^\"]+)\"|'([^']+)')", "i");
  fg.__pool = new Be(
    function () {
      return new fg();
    },
    function (a) {
      a.reset();
    }
  );
  wb.__missingFontWarning = new sa();
  of.__rootURL = T.get_supported() ? T.get_document().URL : "";
  Gc.__useParentFPS = !1;
  fa.__alphaValue = [1];
  fa.__colorMultipliersValue = [0, 0, 0, 0];
  fa.__colorOffsetsValue = [0, 0, 0, 0];
  fa.__emptyColorValue = [0, 0, 0, 0];
  fa.__hasColorTransformValue = [!1];
  fa.__scissorRectangle = new Z();
  fa.__textureSizeValue = [0, 0];
  Da.GL_DEPTH_STENCIL = -1;
  Da.GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT = -1;
  Da.GL_MAX_VIEWPORT_DIMS = -1;
  Da.GL_TEXTURE_MAX_ANISOTROPY_EXT = -1;
  Mg.__lowMemoryMode = !1;
  ua.CLICK = "click";
  ua.DOUBLE_CLICK = "doubleClick";
  ua.MIDDLE_CLICK = "middleClick";
  ua.MIDDLE_MOUSE_DOWN = "middleMouseDown";
  ua.MIDDLE_MOUSE_UP = "middleMouseUp";
  ua.MOUSE_DOWN = "mouseDown";
  ua.MOUSE_MOVE = "mouseMove";
  ua.MOUSE_OUT = "mouseOut";
  ua.MOUSE_OVER = "mouseOver";
  ua.MOUSE_UP = "mouseUp";
  ua.MOUSE_WHEEL = "mouseWheel";
  ua.RELEASE_OUTSIDE = "releaseOutside";
  ua.RIGHT_CLICK = "rightClick";
  ua.RIGHT_MOUSE_DOWN = "rightMouseDown";
  ua.RIGHT_MOUSE_UP = "rightMouseUp";
  ua.ROLL_OUT = "rollOut";
  ua.ROLL_OVER = "rollOver";
  tb.TOUCH_BEGIN = "touchBegin";
  tb.TOUCH_END = "touchEnd";
  tb.TOUCH_MOVE = "touchMove";
  tb.TOUCH_OUT = "touchOut";
  tb.TOUCH_OVER = "touchOver";
  tb.TOUCH_ROLL_OUT = "touchRollOut";
  tb.TOUCH_ROLL_OVER = "touchRollOver";
  tb.TOUCH_TAP = "touchTap";
  Qe.__blurShader = new ci();
  xd.__colorMatrixShader = new di();
  Sc.__glowShader = new ei();
  aa.__pool = new Be(
    function () {
      return new aa();
    },
    function (a) {
      a.setTo(0, 0);
    }
  );
  te.__soundChannels = [];
  te.__soundTransform = new Sf();
  Fb.defaultObjectEncoding = 10;
  Ff.followRedirects = !0;
  Ff.idleTimeout = 0;
  Ff.manageCookies = !1;
  Rd.currentDomain = new Rd(null);
  Kb.__fontByName = new sa();
  Kb.__registeredFonts = [];
  Ha.numDevices = 0;
  Ha.__deviceList = [];
  Ha.__devices = new ib();
  Ha.__instances = [];
  Wj.__cursor = "auto";
  L.OPMAP = new sa();
  L.REGMAP = new sa();
  L.SAMPLEMAP = new sa();
  L.initialized = !1;
  ha.cache = new fi();
  t.uniqueID = 0;
  uf.OBJECT_REFERENCE_PREFIX = "@~obRef#";
  Ib._Constraint = 0;
  Ib._Interactor = 0;
  Ib._CbType = 0;
  Ib._CbSet = 0;
  Ib._Listener = 0;
  Hb.ANY_SHAPE = new za();
  Hb.ANY_BODY = new za();
  Hb.ANY_COMPOUND = new za();
  Hb.ANY_CONSTRAINT = new za();
  z.internal = !1;
  ic.UCbSet = new Gf();
  ic.VCbSet = new Gf();
  ic.WCbSet = new Gf();
  ic.UCbType = new Sd();
  ic.VCbType = new Sd();
  ic.WCbType = new Sd();
  Ua.internal = !1;
  Ua.COL = 1;
  Ua.FLUID = 4;
  Ua.SENSOR = 2;
  wc.internal = !1;
  V.flowpoly = new Pg();
  V.flowsegs = new Pg();
  hf.types = [null, oa.get_STATIC(), oa.get_DYNAMIC(), oa.get_KINEMATIC()];
  Ja.WAKE = 1;
  Ja.PROPS = 2;
  Ja.ANGDRAG = 4;
  Ja.ARBITERS = 8;
  Cb.internal = !1;
  yc.tmpaabb = new jc();
  rd.internal = !1;
  pe.internal = !1;
  Bg.internal = !1;
  jf.internal = !1;
  Tf.internal = !1;
  Le.internal = !1;
  Ag.internal = !1;
  yg.internal = !1;
  zg.internal = !1;
  vg.internal = !1;
  Cg.internal = !1;
  lf.internal = !1;
  ug.internal = !1;
  zf.internal = !1;
  tg.internal = !1;
  ze.main();
})(
  "undefined" != typeof exports
    ? exports
    : "undefined" != typeof window
    ? window
    : "undefined" != typeof self
    ? self
    : this,
  "undefined" != typeof window
    ? window
    : "undefined" != typeof global
    ? global
    : "undefined" != typeof self
    ? self
    : this
);
