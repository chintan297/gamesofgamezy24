<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Color Line</title>
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="full-screen" content="true" />
    <meta name="screen-orientation" content="portrait" />
    <meta name="x5-fullscreen" content="true" />
    <meta name="360-fullscreen" content="true" />
    <style>
      html,
      body {
        -ms-touch-action: none;
        background: #5e5858;
        padding: 0;
        border: 0;
        margin: 0;
        height: 100%;
      }

      .button {
        background: #599bb3;
        background-image: -webkit-linear-gradient(top, #599bb3, #408c99);
        background-image: -moz-linear-gradient(top, #599bb3, #408c99);
        background-image: -ms-linear-gradient(top, #599bb3, #408c99);
        background-image: -o-linear-gradient(top, #599bb3, #408c99);
        background-image: linear-gradient(to bottom, #599bb3, #408c99);
        border-radius: 8px;
        text-shadow: 0px 1px 0px #3d768a;
        box-shadow: 0px 10px 14px -7px #276873;
        font-family: Arial;
        color: #ffffff;
        font-size: 24px;
        padding: 12px 30px 12px 30px;
        text-decoration: none;
      }

      .button:hover {
        color: #ffffff;
        background: #408c99;
        text-decoration: none;
      }
    </style>

    <!-- ❌ AD SDK removed -->
    <!-- <script src="js/adsdk.js"></script> -->
    <script src="jquery-3.2.1.min.js"></script>

    <link rel="stylesheet" type="text/css" href="css/fob.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="css/bom.css" media="screen" />

    <!-- ❌ Disable GameMonetize ad SDK -->
    <!--
    <script type="text/javascript">
      window.SDK_OPTIONS = {
        gameId: "s5e9wvt9reij63fbr1helkepv79455xx",
        onEvent: function (a) {
          switch (a.name) {
            case "SDK_GAME_PAUSE":
              window.egret && window.egret.ticker.pause();
              break;
            case "SDK_GAME_START":
              window.egret && window.egret.ticker.resume();
              break;
            case "SDK_READY":
              break;
          }
        },
      };
      (function (a, b, c) {
        var d = a.getElementsByTagName(b)[0];
        a.getElementById(c) ||
          ((a = a.createElement(b)),
          (a.id = c),
          (a.src = "https://api.gamemonetize.com/sdk.js"),
          d.parentNode.insertBefore(a, d));
      })(document, "script", "gamemonetize-sdk");
    </script>
    -->

    <link rel="stylesheet" type="text/css" href="style-mobile.css" />
  </head>

  <body>
    <script>
      window.$T_GAME_VERSION = "1.0.10";
      window.$T_GAME_ARGS = {};
      window.$T__RES__FILE = "resource/default.res.json";
      window.$T__THE__FILE = "resource/default.thm.json";
      window.$T_PROGRESS = 0;
    </script>

    <div
      style="margin: auto; width: 100%; height: 100%"
      class="egret-player"
      data-entry-class="Main"
      data-orientation="auto"
      data-scale-mode="showAll"
      data-frame-rate="60"
      data-content-width="640"
      data-content-height="1136"
      data-multi-fingered="2"
      data-show-fps="false"
      data-show-log="false"
      data-show-fps-style="x:0,y:0,size:12,textColor:0xffffff,bgAlpha:0.9"
    ></div>

    <center>
      <div
        id="btn_play"
        style="
          z-index: 100;
          width: 122px;
          height: 71px;
          position: absolute;
          left: 0;
          right: 0;
          top: 0;
          bottom: 0;
          margin: auto;
          display: none;
        "
      >
        <a
          class="button"
          href="#"
          onClick="window.this_0x55d70e && window.this_0x55d70e.StartGame();"
          >Play</a
        >
      </div>
    </center>

    <script>
      // Normal game loading (unchanged)
      var loadScript = function (list, callback) {
        var loaded = 0;
        var loadNext = function () {
          loadSingleScript(list[loaded], function () {
            loaded++;
            if (loaded >= list.length) {
              callback();
            } else {
              loadNext();
            }
          });
        };
        loadNext();
      };

      var loadSingleScript = function (src, callback) {
        var s = document.createElement("script");
        s.async = false;
        s.src = src;
        s.addEventListener(
          "load",
          function () {
            s.parentNode.removeChild(s);
            s.removeEventListener("load", arguments.callee, false);
            callback();
          },
          false
        );
        document.body.appendChild(s);
      };

      var xhr = new XMLHttpRequest();
      xhr.open("GET", "./manifest.json?v=" + Math.random(), true);
      xhr.addEventListener("load", function () {
        var manifest = JSON.parse(xhr.response);
        var list = manifest.initial.concat(manifest.game);
        loadScript(list, function () {
          egret.runEgret({
            renderMode: "webgl",
            audioType: 0,
            calculateCanvasScaleFactor: function (context) {
              var backingStore =
                context.backingStorePixelRatio ||
                context.webkitBackingStorePixelRatio ||
                context.mozBackingStorePixelRatio ||
                context.msBackingStorePixelRatio ||
                context.oBackingStorePixelRatio ||
                context.backingStorePixelRatio ||
                1;
              return (window.devicePixelRatio || 1) / backingStore;
            },
          });
        });
      });
      xhr.send(null);

      /* ❌ Disable banner ads */
      /*
      setTimeout(function () {
        sdk.showBanner();
      }, 3000);

      window.setInterval(function () {
        sdk.showBanner();
      }, 90000);
      */
    </script>
  </body>
</html>
