<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />

    <title>Truck Loader 3</title>

    <meta
      id="viewport"
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui"
    />

    <script src="./pooki-sdk.js"></script>
    <script src="./lib/isMobile.min.js"></script>
    <script src="./lib/howler.min.js"></script>
    <script src="./lib/pako.min.js"></script>

    <script src="./loader/modernizr-custom.js"></script>
    <link rel="stylesheet" href="./loader/loader.css" />
    <script src="./loader/loader.js"></script>

    <script src="./lib/FileSaver.min.js"></script>
    <script src="./truckLoader5.js"></script>

    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        height: 100%;
        overflow: hidden;
      }
      #openfl-content {
        background: #000000;
        width: 100%;
        height: 100%;
      }
    </style>
  </head>

  <body>
    <div id="loading_bg" class="loading_bg">
      <div
        id="progress-bar-root"
        style="position: absolute; bottom: 20%; left: 50%"
      >
        <div
          id="progress-bar-text"
          style="
            text-align: center;
            vertical-align: bottom;
            margin-left: -100%;
            color: white;
            font-size: 12px;
            font-family: Verdana, serif;
          "
        ></div>

        <img id="progress-bar-bg" src="loader/load_bar_bg.png" />

        <img
          src="loader/load_bar_fg.png"
          id="progress-bar-fg"
          style="position: absolute; clip: rect(0px, 0px, 0px, 0px)"
        />
      </div>
    </div>

    <div id="openfl-content"></div>

    <noscript>
      This webpage makes extensive use of JavaScript. Please enable JavaScript
      in your browser.
    </noscript>

    <script>
      window.addEventListener(
        "touchmove",
        function (event) {
          event.preventDefault();
        },
        false
      );

      if (window.devicePixelRatio && window.devicePixelRatio > 2) {
        var meta = document.getElementById("viewport");
        meta.setAttribute(
          "content",
          "width=device-width, initial-scale=" +
            2 / window.devicePixelRatio +
            ", user-scalable=no"
        );
      }

      window.addEventListener("keydown", (ev) => {
        if (["ArrowDown", "ArrowUp", " "].includes(ev.key)) {
          ev.preventDefault();
        }
      });

      window.addEventListener("wheel", (ev) => ev.preventDefault(), {
        passive: false,
      });

      PookiSDK.init()
        .then(() => {
          console.log("Pooki SDK successfully initialized");
        })
        .catch(() => {
          console.log("Initialized, but the user likely has adblock");
        });

      PookiSDK.gameLoadingFinished = function () {};
      PookiSDK.gameLoadingStart = function () {};

      // Ad callback
      const adBreak = function () {
        window.gameHere.goToNext(0);
      };
    </script>

    <script>
      lime.embed("truckLoader5", "openfl-content", 0, 0, { parameters: {} });
    </script>
  </body>
</html>
