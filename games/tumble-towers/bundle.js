/*! For license information please see bundle.js.LICENSE.txt */
(() => {
  var t = {
      75: (t, e, i) => {
        "use strict";
        var r = i(453),
          n = i(487),
          o = n(r("String.prototype.indexOf"));
        t.exports = function (t, e) {
          var i = r(t, !!e);
          return "function" == typeof i && o(t, ".prototype.") > -1 ? n(i) : i;
        };
      },
      487: (t, e, i) => {
        "use strict";
        var r = i(743),
          n = i(453),
          o = i(897),
          s = i(675),
          a = n("%Function.prototype.apply%"),
          h = n("%Function.prototype.call%"),
          u = n("%Reflect.apply%", !0) || r.call(h, a),
          l = i(36),
          c = n("%Math.max%");
        t.exports = function (t) {
          if ("function" != typeof t) throw new s("a function is required");
          var e = u(r, h, arguments);
          return o(e, 1 + c(0, t.length - (arguments.length - 1)), !0);
        };
        var d = function () {
          return u(r, a, arguments);
        };
        l ? l(t.exports, "apply", { value: d }) : (t.exports.apply = d);
      },
      41: (t, e, i) => {
        "use strict";
        var r = i(36),
          n = i(68),
          o = i(675),
          s = i(795);
        t.exports = function (t, e, i) {
          if (!t || ("object" != typeof t && "function" != typeof t))
            throw new o("`obj` must be an object or a function`");
          if ("string" != typeof e && "symbol" != typeof e)
            throw new o("`property` must be a string or a symbol`");
          if (
            arguments.length > 3 &&
            "boolean" != typeof arguments[3] &&
            null !== arguments[3]
          )
            throw new o(
              "`nonEnumerable`, if provided, must be a boolean or null"
            );
          if (
            arguments.length > 4 &&
            "boolean" != typeof arguments[4] &&
            null !== arguments[4]
          )
            throw new o(
              "`nonWritable`, if provided, must be a boolean or null"
            );
          if (
            arguments.length > 5 &&
            "boolean" != typeof arguments[5] &&
            null !== arguments[5]
          )
            throw new o(
              "`nonConfigurable`, if provided, must be a boolean or null"
            );
          if (arguments.length > 6 && "boolean" != typeof arguments[6])
            throw new o("`loose`, if provided, must be a boolean");
          var a = arguments.length > 3 ? arguments[3] : null,
            h = arguments.length > 4 ? arguments[4] : null,
            u = arguments.length > 5 ? arguments[5] : null,
            l = arguments.length > 6 && arguments[6],
            c = !!s && s(t, e);
          if (r)
            r(t, e, {
              configurable: null === u && c ? c.configurable : !u,
              enumerable: null === a && c ? c.enumerable : !a,
              value: i,
              writable: null === h && c ? c.writable : !h,
            });
          else {
            if (!l && (a || h || u))
              throw new n(
                "This environment does not support defining a property as non-configurable, non-writable, or non-enumerable."
              );
            t[e] = i;
          }
        };
      },
      570: (t) => {
        "use strict";
        function e(t, e, r) {
          r = r || 2;
          var o,
            s,
            a,
            h,
            c,
            d,
            _,
            f = e && e.length,
            m = f ? e[0] * r : t.length,
            y = i(t, 0, m, r, !0),
            g = [];
          if (!y || y.next === y.prev) return g;
          if (
            (f &&
              (y = (function (t, e, r, n) {
                var o,
                  s,
                  a,
                  h = [];
                for (o = 0, s = e.length; o < s; o++)
                  (a = i(
                    t,
                    e[o] * n,
                    o < s - 1 ? e[o + 1] * n : t.length,
                    n,
                    !1
                  )) === a.next && (a.steiner = !0),
                    h.push(p(a));
                for (h.sort(u), o = 0; o < h.length; o++) r = l(h[o], r);
                return r;
              })(t, e, y, r)),
            t.length > 80 * r)
          ) {
            (o = a = t[0]), (s = h = t[1]);
            for (var v = r; v < m; v += r)
              (c = t[v]) < o && (o = c),
                (d = t[v + 1]) < s && (s = d),
                c > a && (a = c),
                d > h && (h = d);
            _ = 0 !== (_ = Math.max(a - o, h - s)) ? 32767 / _ : 0;
          }
          return n(y, g, r, o, s, _, 0), g;
        }
        function i(t, e, i, r, n) {
          var o, s;
          if (n === E(t, e, i, r) > 0)
            for (o = e; o < i; o += r) s = T(o, t[o], t[o + 1], s);
          else for (o = i - r; o >= e; o -= r) s = T(o, t[o], t[o + 1], s);
          return s && y(s, s.next) && (A(s), (s = s.next)), s;
        }
        function r(t, e) {
          if (!t) return t;
          e || (e = t);
          var i,
            r = t;
          do {
            if (
              ((i = !1),
              r.steiner || (!y(r, r.next) && 0 !== m(r.prev, r, r.next)))
            )
              r = r.next;
            else {
              if ((A(r), (r = e = r.prev) === r.next)) break;
              i = !0;
            }
          } while (i || r !== e);
          return e;
        }
        function n(t, e, i, u, l, c, p) {
          if (t) {
            !p &&
              c &&
              (function (t, e, i, r) {
                var n = t;
                do {
                  0 === n.z && (n.z = d(n.x, n.y, e, i, r)),
                    (n.prevZ = n.prev),
                    (n.nextZ = n.next),
                    (n = n.next);
                } while (n !== t);
                (n.prevZ.nextZ = null),
                  (n.prevZ = null),
                  (function (t) {
                    var e,
                      i,
                      r,
                      n,
                      o,
                      s,
                      a,
                      h,
                      u = 1;
                    do {
                      for (i = t, t = null, o = null, s = 0; i; ) {
                        for (
                          s++, r = i, a = 0, e = 0;
                          e < u && (a++, (r = r.nextZ));
                          e++
                        );
                        for (h = u; a > 0 || (h > 0 && r); )
                          0 !== a && (0 === h || !r || i.z <= r.z)
                            ? ((n = i), (i = i.nextZ), a--)
                            : ((n = r), (r = r.nextZ), h--),
                            o ? (o.nextZ = n) : (t = n),
                            (n.prevZ = o),
                            (o = n);
                        i = r;
                      }
                      (o.nextZ = null), (u *= 2);
                    } while (s > 1);
                  })(n);
              })(t, u, l, c);
            for (var _, f, m = t; t.prev !== t.next; )
              if (((_ = t.prev), (f = t.next), c ? s(t, u, l, c) : o(t)))
                e.push((_.i / i) | 0),
                  e.push((t.i / i) | 0),
                  e.push((f.i / i) | 0),
                  A(t),
                  (t = f.next),
                  (m = f.next);
              else if ((t = f) === m) {
                p
                  ? 1 === p
                    ? n((t = a(r(t), e, i)), e, i, u, l, c, 2)
                    : 2 === p && h(t, e, i, u, l, c)
                  : n(r(t), e, i, u, l, c, 1);
                break;
              }
          }
        }
        function o(t) {
          var e = t.prev,
            i = t,
            r = t.next;
          if (m(e, i, r) >= 0) return !1;
          for (
            var n = e.x,
              o = i.x,
              s = r.x,
              a = e.y,
              h = i.y,
              u = r.y,
              l = n < o ? (n < s ? n : s) : o < s ? o : s,
              c = a < h ? (a < u ? a : u) : h < u ? h : u,
              d = n > o ? (n > s ? n : s) : o > s ? o : s,
              p = a > h ? (a > u ? a : u) : h > u ? h : u,
              f = r.next;
            f !== e;

          ) {
            if (
              f.x >= l &&
              f.x <= d &&
              f.y >= c &&
              f.y <= p &&
              _(n, a, o, h, s, u, f.x, f.y) &&
              m(f.prev, f, f.next) >= 0
            )
              return !1;
            f = f.next;
          }
          return !0;
        }
        function s(t, e, i, r) {
          var n = t.prev,
            o = t,
            s = t.next;
          if (m(n, o, s) >= 0) return !1;
          for (
            var a = n.x,
              h = o.x,
              u = s.x,
              l = n.y,
              c = o.y,
              p = s.y,
              f = a < h ? (a < u ? a : u) : h < u ? h : u,
              y = l < c ? (l < p ? l : p) : c < p ? c : p,
              g = a > h ? (a > u ? a : u) : h > u ? h : u,
              v = l > c ? (l > p ? l : p) : c > p ? c : p,
              b = d(f, y, e, i, r),
              x = d(g, v, e, i, r),
              w = t.prevZ,
              T = t.nextZ;
            w && w.z >= b && T && T.z <= x;

          ) {
            if (
              w.x >= f &&
              w.x <= g &&
              w.y >= y &&
              w.y <= v &&
              w !== n &&
              w !== s &&
              _(a, l, h, c, u, p, w.x, w.y) &&
              m(w.prev, w, w.next) >= 0
            )
              return !1;
            if (
              ((w = w.prevZ),
              T.x >= f &&
                T.x <= g &&
                T.y >= y &&
                T.y <= v &&
                T !== n &&
                T !== s &&
                _(a, l, h, c, u, p, T.x, T.y) &&
                m(T.prev, T, T.next) >= 0)
            )
              return !1;
            T = T.nextZ;
          }
          for (; w && w.z >= b; ) {
            if (
              w.x >= f &&
              w.x <= g &&
              w.y >= y &&
              w.y <= v &&
              w !== n &&
              w !== s &&
              _(a, l, h, c, u, p, w.x, w.y) &&
              m(w.prev, w, w.next) >= 0
            )
              return !1;
            w = w.prevZ;
          }
          for (; T && T.z <= x; ) {
            if (
              T.x >= f &&
              T.x <= g &&
              T.y >= y &&
              T.y <= v &&
              T !== n &&
              T !== s &&
              _(a, l, h, c, u, p, T.x, T.y) &&
              m(T.prev, T, T.next) >= 0
            )
              return !1;
            T = T.nextZ;
          }
          return !0;
        }
        function a(t, e, i) {
          var n = t;
          do {
            var o = n.prev,
              s = n.next.next;
            !y(o, s) &&
              g(o, n, n.next, s) &&
              x(o, s) &&
              x(s, o) &&
              (e.push((o.i / i) | 0),
              e.push((n.i / i) | 0),
              e.push((s.i / i) | 0),
              A(n),
              A(n.next),
              (n = t = s)),
              (n = n.next);
          } while (n !== t);
          return r(n);
        }
        function h(t, e, i, o, s, a) {
          var h = t;
          do {
            for (var u = h.next.next; u !== h.prev; ) {
              if (h.i !== u.i && f(h, u)) {
                var l = w(h, u);
                return (
                  (h = r(h, h.next)),
                  (l = r(l, l.next)),
                  n(h, e, i, o, s, a, 0),
                  void n(l, e, i, o, s, a, 0)
                );
              }
              u = u.next;
            }
            h = h.next;
          } while (h !== t);
        }
        function u(t, e) {
          return t.x - e.x;
        }
        function l(t, e) {
          var i = (function (t, e) {
            var i,
              r = e,
              n = t.x,
              o = t.y,
              s = -1 / 0;
            do {
              if (o <= r.y && o >= r.next.y && r.next.y !== r.y) {
                var a = r.x + ((o - r.y) * (r.next.x - r.x)) / (r.next.y - r.y);
                if (
                  a <= n &&
                  a > s &&
                  ((s = a), (i = r.x < r.next.x ? r : r.next), a === n)
                )
                  return i;
              }
              r = r.next;
            } while (r !== e);
            if (!i) return null;
            var h,
              u = i,
              l = i.x,
              d = i.y,
              p = 1 / 0;
            r = i;
            do {
              n >= r.x &&
                r.x >= l &&
                n !== r.x &&
                _(o < d ? n : s, o, l, d, o < d ? s : n, o, r.x, r.y) &&
                ((h = Math.abs(o - r.y) / (n - r.x)),
                x(r, t) &&
                  (h < p ||
                    (h === p && (r.x > i.x || (r.x === i.x && c(i, r))))) &&
                  ((i = r), (p = h))),
                (r = r.next);
            } while (r !== u);
            return i;
          })(t, e);
          if (!i) return e;
          var n = w(i, t);
          return r(n, n.next), r(i, i.next);
        }
        function c(t, e) {
          return m(t.prev, t, e.prev) < 0 && m(e.next, t, t.next) < 0;
        }
        function d(t, e, i, r, n) {
          return (
            (t =
              1431655765 &
              ((t =
                858993459 &
                ((t =
                  252645135 &
                  ((t = 16711935 & ((t = ((t - i) * n) | 0) | (t << 8))) |
                    (t << 4))) |
                  (t << 2))) |
                (t << 1))) |
            ((e =
              1431655765 &
              ((e =
                858993459 &
                ((e =
                  252645135 &
                  ((e = 16711935 & ((e = ((e - r) * n) | 0) | (e << 8))) |
                    (e << 4))) |
                  (e << 2))) |
                (e << 1))) <<
              1)
          );
        }
        function p(t) {
          var e = t,
            i = t;
          do {
            (e.x < i.x || (e.x === i.x && e.y < i.y)) && (i = e), (e = e.next);
          } while (e !== t);
          return i;
        }
        function _(t, e, i, r, n, o, s, a) {
          return (
            (n - s) * (e - a) >= (t - s) * (o - a) &&
            (t - s) * (r - a) >= (i - s) * (e - a) &&
            (i - s) * (o - a) >= (n - s) * (r - a)
          );
        }
        function f(t, e) {
          return (
            t.next.i !== e.i &&
            t.prev.i !== e.i &&
            !(function (t, e) {
              var i = t;
              do {
                if (
                  i.i !== t.i &&
                  i.next.i !== t.i &&
                  i.i !== e.i &&
                  i.next.i !== e.i &&
                  g(i, i.next, t, e)
                )
                  return !0;
                i = i.next;
              } while (i !== t);
              return !1;
            })(t, e) &&
            ((x(t, e) &&
              x(e, t) &&
              (function (t, e) {
                var i = t,
                  r = !1,
                  n = (t.x + e.x) / 2,
                  o = (t.y + e.y) / 2;
                do {
                  i.y > o != i.next.y > o &&
                    i.next.y !== i.y &&
                    n <
                      ((i.next.x - i.x) * (o - i.y)) / (i.next.y - i.y) + i.x &&
                    (r = !r),
                    (i = i.next);
                } while (i !== t);
                return r;
              })(t, e) &&
              (m(t.prev, t, e.prev) || m(t, e.prev, e))) ||
              (y(t, e) && m(t.prev, t, t.next) > 0 && m(e.prev, e, e.next) > 0))
          );
        }
        function m(t, e, i) {
          return (e.y - t.y) * (i.x - e.x) - (e.x - t.x) * (i.y - e.y);
        }
        function y(t, e) {
          return t.x === e.x && t.y === e.y;
        }
        function g(t, e, i, r) {
          var n = b(m(t, e, i)),
            o = b(m(t, e, r)),
            s = b(m(i, r, t)),
            a = b(m(i, r, e));
          return (
            (n !== o && s !== a) ||
            !(0 !== n || !v(t, i, e)) ||
            !(0 !== o || !v(t, r, e)) ||
            !(0 !== s || !v(i, t, r)) ||
            !(0 !== a || !v(i, e, r))
          );
        }
        function v(t, e, i) {
          return (
            e.x <= Math.max(t.x, i.x) &&
            e.x >= Math.min(t.x, i.x) &&
            e.y <= Math.max(t.y, i.y) &&
            e.y >= Math.min(t.y, i.y)
          );
        }
        function b(t) {
          return t > 0 ? 1 : t < 0 ? -1 : 0;
        }
        function x(t, e) {
          return m(t.prev, t, t.next) < 0
            ? m(t, e, t.next) >= 0 && m(t, t.prev, e) >= 0
            : m(t, e, t.prev) < 0 || m(t, t.next, e) < 0;
        }
        function w(t, e) {
          var i = new S(t.i, t.x, t.y),
            r = new S(e.i, e.x, e.y),
            n = t.next,
            o = e.prev;
          return (
            (t.next = e),
            (e.prev = t),
            (i.next = n),
            (n.prev = i),
            (r.next = i),
            (i.prev = r),
            (o.next = r),
            (r.prev = o),
            r
          );
        }
        function T(t, e, i, r) {
          var n = new S(t, e, i);
          return (
            r
              ? ((n.next = r.next),
                (n.prev = r),
                (r.next.prev = n),
                (r.next = n))
              : ((n.prev = n), (n.next = n)),
            n
          );
        }
        function A(t) {
          (t.next.prev = t.prev),
            (t.prev.next = t.next),
            t.prevZ && (t.prevZ.nextZ = t.nextZ),
            t.nextZ && (t.nextZ.prevZ = t.prevZ);
        }
        function S(t, e, i) {
          (this.i = t),
            (this.x = e),
            (this.y = i),
            (this.prev = null),
            (this.next = null),
            (this.z = 0),
            (this.prevZ = null),
            (this.nextZ = null),
            (this.steiner = !1);
        }
        function E(t, e, i, r) {
          for (var n = 0, o = e, s = i - r; o < i; o += r)
            (n += (t[s] - t[o]) * (t[o + 1] + t[s + 1])), (s = o);
          return n;
        }
        (t.exports = e),
          (t.exports.default = e),
          (e.deviation = function (t, e, i, r) {
            var n = e && e.length,
              o = n ? e[0] * i : t.length,
              s = Math.abs(E(t, 0, o, i));
            if (n)
              for (var a = 0, h = e.length; a < h; a++) {
                var u = e[a] * i,
                  l = a < h - 1 ? e[a + 1] * i : t.length;
                s -= Math.abs(E(t, u, l, i));
              }
            var c = 0;
            for (a = 0; a < r.length; a += 3) {
              var d = r[a] * i,
                p = r[a + 1] * i,
                _ = r[a + 2] * i;
              c += Math.abs(
                (t[d] - t[_]) * (t[p + 1] - t[d + 1]) -
                  (t[d] - t[p]) * (t[_ + 1] - t[d + 1])
              );
            }
            return 0 === s && 0 === c ? 0 : Math.abs((c - s) / s);
          }),
          (e.flatten = function (t) {
            for (
              var e = t[0][0].length,
                i = { vertices: [], holes: [], dimensions: e },
                r = 0,
                n = 0;
              n < t.length;
              n++
            ) {
              for (var o = 0; o < t[n].length; o++)
                for (var s = 0; s < e; s++) i.vertices.push(t[n][o][s]);
              n > 0 && ((r += t[n - 1].length), i.holes.push(r));
            }
            return i;
          });
      },
      36: (t, e, i) => {
        "use strict";
        var r = i(453)("%Object.defineProperty%", !0) || !1;
        if (r)
          try {
            r({}, "a", { value: 1 });
          } catch (t) {
            r = !1;
          }
        t.exports = r;
      },
      237: (t) => {
        "use strict";
        t.exports = EvalError;
      },
      383: (t) => {
        "use strict";
        t.exports = Error;
      },
      290: (t) => {
        "use strict";
        t.exports = RangeError;
      },
      538: (t) => {
        "use strict";
        t.exports = ReferenceError;
      },
      68: (t) => {
        "use strict";
        t.exports = SyntaxError;
      },
      675: (t) => {
        "use strict";
        t.exports = TypeError;
      },
      345: (t) => {
        "use strict";
        t.exports = URIError;
      },
      847: (t) => {
        "use strict";
        var e = Object.prototype.hasOwnProperty,
          i = "~";
        function r() {}
        function n(t, e, i) {
          (this.fn = t), (this.context = e), (this.once = i || !1);
        }
        function o(t, e, r, o, s) {
          if ("function" != typeof r)
            throw new TypeError("The listener must be a function");
          var a = new n(r, o || t, s),
            h = i ? i + e : e;
          return (
            t._events[h]
              ? t._events[h].fn
                ? (t._events[h] = [t._events[h], a])
                : t._events[h].push(a)
              : ((t._events[h] = a), t._eventsCount++),
            t
          );
        }
        function s(t, e) {
          0 == --t._eventsCount ? (t._events = new r()) : delete t._events[e];
        }
        function a() {
          (this._events = new r()), (this._eventsCount = 0);
        }
        Object.create &&
          ((r.prototype = Object.create(null)), new r().__proto__ || (i = !1)),
          (a.prototype.eventNames = function () {
            var t,
              r,
              n = [];
            if (0 === this._eventsCount) return n;
            for (r in (t = this._events))
              e.call(t, r) && n.push(i ? r.slice(1) : r);
            return Object.getOwnPropertySymbols
              ? n.concat(Object.getOwnPropertySymbols(t))
              : n;
          }),
          (a.prototype.listeners = function (t) {
            var e = i ? i + t : t,
              r = this._events[e];
            if (!r) return [];
            if (r.fn) return [r.fn];
            for (var n = 0, o = r.length, s = new Array(o); n < o; n++)
              s[n] = r[n].fn;
            return s;
          }),
          (a.prototype.listenerCount = function (t) {
            var e = i ? i + t : t,
              r = this._events[e];
            return r ? (r.fn ? 1 : r.length) : 0;
          }),
          (a.prototype.emit = function (t, e, r, n, o, s) {
            var a = i ? i + t : t;
            if (!this._events[a]) return !1;
            var h,
              u,
              l = this._events[a],
              c = arguments.length;
            if (l.fn) {
              switch ((l.once && this.removeListener(t, l.fn, void 0, !0), c)) {
                case 1:
                  return l.fn.call(l.context), !0;
                case 2:
                  return l.fn.call(l.context, e), !0;
                case 3:
                  return l.fn.call(l.context, e, r), !0;
                case 4:
                  return l.fn.call(l.context, e, r, n), !0;
                case 5:
                  return l.fn.call(l.context, e, r, n, o), !0;
                case 6:
                  return l.fn.call(l.context, e, r, n, o, s), !0;
              }
              for (u = 1, h = new Array(c - 1); u < c; u++)
                h[u - 1] = arguments[u];
              l.fn.apply(l.context, h);
            } else {
              var d,
                p = l.length;
              for (u = 0; u < p; u++)
                switch (
                  (l[u].once && this.removeListener(t, l[u].fn, void 0, !0), c)
                ) {
                  case 1:
                    l[u].fn.call(l[u].context);
                    break;
                  case 2:
                    l[u].fn.call(l[u].context, e);
                    break;
                  case 3:
                    l[u].fn.call(l[u].context, e, r);
                    break;
                  case 4:
                    l[u].fn.call(l[u].context, e, r, n);
                    break;
                  default:
                    if (!h)
                      for (d = 1, h = new Array(c - 1); d < c; d++)
                        h[d - 1] = arguments[d];
                    l[u].fn.apply(l[u].context, h);
                }
            }
            return !0;
          }),
          (a.prototype.on = function (t, e, i) {
            return o(this, t, e, i, !1);
          }),
          (a.prototype.once = function (t, e, i) {
            return o(this, t, e, i, !0);
          }),
          (a.prototype.removeListener = function (t, e, r, n) {
            var o = i ? i + t : t;
            if (!this._events[o]) return this;
            if (!e) return s(this, o), this;
            var a = this._events[o];
            if (a.fn)
              a.fn !== e ||
                (n && !a.once) ||
                (r && a.context !== r) ||
                s(this, o);
            else {
              for (var h = 0, u = [], l = a.length; h < l; h++)
                (a[h].fn !== e ||
                  (n && !a[h].once) ||
                  (r && a[h].context !== r)) &&
                  u.push(a[h]);
              u.length
                ? (this._events[o] = 1 === u.length ? u[0] : u)
                : s(this, o);
            }
            return this;
          }),
          (a.prototype.removeAllListeners = function (t) {
            var e;
            return (
              t
                ? ((e = i ? i + t : t), this._events[e] && s(this, e))
                : ((this._events = new r()), (this._eventsCount = 0)),
              this
            );
          }),
          (a.prototype.off = a.prototype.removeListener),
          (a.prototype.addListener = a.prototype.on),
          (a.prefixed = i),
          (a.EventEmitter = a),
          (t.exports = a);
      },
      904: (t) => {
        !(function () {
          function e(t, e) {
            document.addEventListener
              ? t.addEventListener("scroll", e, !1)
              : t.attachEvent("scroll", e);
          }
          function i(t) {
            (this.g = document.createElement("div")),
              this.g.setAttribute("aria-hidden", "true"),
              this.g.appendChild(document.createTextNode(t)),
              (this.h = document.createElement("span")),
              (this.i = document.createElement("span")),
              (this.m = document.createElement("span")),
              (this.j = document.createElement("span")),
              (this.l = -1),
              (this.h.style.cssText =
                "max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;"),
              (this.i.style.cssText =
                "max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;"),
              (this.j.style.cssText =
                "max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;"),
              (this.m.style.cssText =
                "display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;"),
              this.h.appendChild(this.m),
              this.i.appendChild(this.j),
              this.g.appendChild(this.h),
              this.g.appendChild(this.i);
          }
          function r(t, e) {
            t.g.style.cssText =
              "max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:" +
              e +
              ";";
          }
          function n(t) {
            var e = t.g.offsetWidth,
              i = e + 100;
            return (
              (t.j.style.width = i + "px"),
              (t.i.scrollLeft = i),
              (t.h.scrollLeft = t.h.scrollWidth + 100),
              t.l !== e && ((t.l = e), !0)
            );
          }
          function o(t, i) {
            function r() {
              var t = o;
              n(t) && null !== t.g.parentNode && i(t.l);
            }
            var o = t;
            e(t.h, r), e(t.i, r), n(t);
          }
          function s(t, e, i) {
            (e = e || {}),
              (i = i || window),
              (this.family = t),
              (this.style = e.style || "normal"),
              (this.weight = e.weight || "normal"),
              (this.stretch = e.stretch || "normal"),
              (this.context = i);
          }
          var a = null,
            h = null,
            u = null,
            l = null;
          function c(t) {
            return null === l && (l = !!t.document.fonts), l;
          }
          function d(t, e) {
            var i = t.style,
              r = t.weight;
            if (null === u) {
              var n = document.createElement("div");
              try {
                n.style.font = "condensed 100px sans-serif";
              } catch (t) {}
              u = "" !== n.style.font;
            }
            return [i, r, u ? t.stretch : "", "100px", e].join(" ");
          }
          (s.prototype.load = function (t, e) {
            var n = this,
              s = t || "BESbswy",
              u = 0,
              l = e || 3e3,
              p = new Date().getTime();
            return new Promise(function (t, e) {
              if (
                c(n.context) &&
                !(function (t) {
                  return (
                    null === h &&
                      (c(t) && /Apple/.test(window.navigator.vendor)
                        ? ((t =
                            /AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(
                              window.navigator.userAgent
                            )),
                          (h = !!t && 603 > parseInt(t[1], 10)))
                        : (h = !1)),
                    h
                  );
                })(n.context)
              ) {
                var _ = new Promise(function (t, e) {
                    !(function i() {
                      new Date().getTime() - p >= l
                        ? e(Error(l + "ms timeout exceeded"))
                        : n.context.document.fonts
                            .load(d(n, '"' + n.family + '"'), s)
                            .then(function (e) {
                              1 <= e.length ? t() : setTimeout(i, 25);
                            }, e);
                    })();
                  }),
                  f = new Promise(function (t, e) {
                    u = setTimeout(function () {
                      e(Error(l + "ms timeout exceeded"));
                    }, l);
                  });
                Promise.race([f, _]).then(function () {
                  clearTimeout(u), t(n);
                }, e);
              } else
                !(function (t) {
                  document.body
                    ? t()
                    : document.addEventListener
                    ? document.addEventListener(
                        "DOMContentLoaded",
                        function e() {
                          document.removeEventListener("DOMContentLoaded", e),
                            t();
                        }
                      )
                    : document.attachEvent("onreadystatechange", function e() {
                        ("interactive" != document.readyState &&
                          "complete" != document.readyState) ||
                          (document.detachEvent("onreadystatechange", e), t());
                      });
                })(function () {
                  function h() {
                    var e;
                    (e =
                      (-1 != m && -1 != y) ||
                      (-1 != m && -1 != g) ||
                      (-1 != y && -1 != g)) &&
                      ((e = m != y && m != g && y != g) ||
                        (null === a &&
                          ((e = /AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(
                            window.navigator.userAgent
                          )),
                          (a =
                            !!e &&
                            (536 > parseInt(e[1], 10) ||
                              (536 === parseInt(e[1], 10) &&
                                11 >= parseInt(e[2], 10))))),
                        (e =
                          a &&
                          ((m == v && y == v && g == v) ||
                            (m == b && y == b && g == b) ||
                            (m == x && y == x && g == x)))),
                      (e = !e)),
                      e &&
                        (null !== w.parentNode && w.parentNode.removeChild(w),
                        clearTimeout(u),
                        t(n));
                  }
                  var c = new i(s),
                    _ = new i(s),
                    f = new i(s),
                    m = -1,
                    y = -1,
                    g = -1,
                    v = -1,
                    b = -1,
                    x = -1,
                    w = document.createElement("div");
                  (w.dir = "ltr"),
                    r(c, d(n, "sans-serif")),
                    r(_, d(n, "serif")),
                    r(f, d(n, "monospace")),
                    w.appendChild(c.g),
                    w.appendChild(_.g),
                    w.appendChild(f.g),
                    n.context.document.body.appendChild(w),
                    (v = c.g.offsetWidth),
                    (b = _.g.offsetWidth),
                    (x = f.g.offsetWidth),
                    (function t() {
                      if (new Date().getTime() - p >= l)
                        null !== w.parentNode && w.parentNode.removeChild(w),
                          e(Error(l + "ms timeout exceeded"));
                      else {
                        var i = n.context.document.hidden;
                        (!0 !== i && void 0 !== i) ||
                          ((m = c.g.offsetWidth),
                          (y = _.g.offsetWidth),
                          (g = f.g.offsetWidth),
                          h()),
                          (u = setTimeout(t, 50));
                      }
                    })(),
                    o(c, function (t) {
                      (m = t), h();
                    }),
                    r(c, d(n, '"' + n.family + '",sans-serif')),
                    o(_, function (t) {
                      (y = t), h();
                    }),
                    r(_, d(n, '"' + n.family + '",serif')),
                    o(f, function (t) {
                      (g = t), h();
                    }),
                    r(f, d(n, '"' + n.family + '",monospace'));
                });
            });
          }),
            (t.exports = s);
        })();
      },
      353: (t) => {
        "use strict";
        var e = Object.prototype.toString,
          i = Math.max,
          r = function (t, e) {
            for (var i = [], r = 0; r < t.length; r += 1) i[r] = t[r];
            for (var n = 0; n < e.length; n += 1) i[n + t.length] = e[n];
            return i;
          };
        t.exports = function (t) {
          var n = this;
          if ("function" != typeof n || "[object Function]" !== e.apply(n))
            throw new TypeError(
              "Function.prototype.bind called on incompatible " + n
            );
          for (
            var o,
              s = (function (t) {
                for (var e = [], i = 1, r = 0; i < t.length; i += 1, r += 1)
                  e[r] = t[i];
                return e;
              })(arguments),
              a = i(0, n.length - s.length),
              h = [],
              u = 0;
            u < a;
            u++
          )
            h[u] = "$" + u;
          if (
            ((o = Function(
              "binder",
              "return function (" +
                (function (t) {
                  for (var e = "", i = 0; i < t.length; i += 1)
                    (e += t[i]), i + 1 < t.length && (e += ",");
                  return e;
                })(h) +
                "){ return binder.apply(this,arguments); }"
            )(function () {
              if (this instanceof o) {
                var e = n.apply(this, r(s, arguments));
                return Object(e) === e ? e : this;
              }
              return n.apply(t, r(s, arguments));
            })),
            n.prototype)
          ) {
            var l = function () {};
            (l.prototype = n.prototype),
              (o.prototype = new l()),
              (l.prototype = null);
          }
          return o;
        };
      },
      743: (t, e, i) => {
        "use strict";
        var r = i(353);
        t.exports = Function.prototype.bind || r;
      },
      453: (t, e, i) => {
        "use strict";
        var r,
          n = i(383),
          o = i(237),
          s = i(290),
          a = i(538),
          h = i(68),
          u = i(675),
          l = i(345),
          c = Function,
          d = function (t) {
            try {
              return c('"use strict"; return (' + t + ").constructor;")();
            } catch (t) {}
          },
          p = Object.getOwnPropertyDescriptor;
        if (p)
          try {
            p({}, "");
          } catch (t) {
            p = null;
          }
        var _ = function () {
            throw new u();
          },
          f = p
            ? (function () {
                try {
                  return _;
                } catch (t) {
                  try {
                    return p(arguments, "callee").get;
                  } catch (t) {
                    return _;
                  }
                }
              })()
            : _,
          m = i(39)(),
          y = i(24)(),
          g =
            Object.getPrototypeOf ||
            (y
              ? function (t) {
                  return t.__proto__;
                }
              : null),
          v = {},
          b = "undefined" != typeof Uint8Array && g ? g(Uint8Array) : r,
          x = {
            __proto__: null,
            "%AggregateError%":
              "undefined" == typeof AggregateError ? r : AggregateError,
            "%Array%": Array,
            "%ArrayBuffer%":
              "undefined" == typeof ArrayBuffer ? r : ArrayBuffer,
            "%ArrayIteratorPrototype%": m && g ? g([][Symbol.iterator]()) : r,
            "%AsyncFromSyncIteratorPrototype%": r,
            "%AsyncFunction%": v,
            "%AsyncGenerator%": v,
            "%AsyncGeneratorFunction%": v,
            "%AsyncIteratorPrototype%": v,
            "%Atomics%": "undefined" == typeof Atomics ? r : Atomics,
            "%BigInt%": "undefined" == typeof BigInt ? r : BigInt,
            "%BigInt64Array%":
              "undefined" == typeof BigInt64Array ? r : BigInt64Array,
            "%BigUint64Array%":
              "undefined" == typeof BigUint64Array ? r : BigUint64Array,
            "%Boolean%": Boolean,
            "%DataView%": "undefined" == typeof DataView ? r : DataView,
            "%Date%": Date,
            "%decodeURI%": decodeURI,
            "%decodeURIComponent%": decodeURIComponent,
            "%encodeURI%": encodeURI,
            "%encodeURIComponent%": encodeURIComponent,
            "%Error%": n,
            "%eval%": eval,
            "%EvalError%": o,
            "%Float32Array%":
              "undefined" == typeof Float32Array ? r : Float32Array,
            "%Float64Array%":
              "undefined" == typeof Float64Array ? r : Float64Array,
            "%FinalizationRegistry%":
              "undefined" == typeof FinalizationRegistry
                ? r
                : FinalizationRegistry,
            "%Function%": c,
            "%GeneratorFunction%": v,
            "%Int8Array%": "undefined" == typeof Int8Array ? r : Int8Array,
            "%Int16Array%": "undefined" == typeof Int16Array ? r : Int16Array,
            "%Int32Array%": "undefined" == typeof Int32Array ? r : Int32Array,
            "%isFinite%": isFinite,
            "%isNaN%": isNaN,
            "%IteratorPrototype%": m && g ? g(g([][Symbol.iterator]())) : r,
            "%JSON%": "object" == typeof JSON ? JSON : r,
            "%Map%": "undefined" == typeof Map ? r : Map,
            "%MapIteratorPrototype%":
              "undefined" != typeof Map && m && g
                ? g(new Map()[Symbol.iterator]())
                : r,
            "%Math%": Math,
            "%Number%": Number,
            "%Object%": Object,
            "%parseFloat%": parseFloat,
            "%parseInt%": parseInt,
            "%Promise%": "undefined" == typeof Promise ? r : Promise,
            "%Proxy%": "undefined" == typeof Proxy ? r : Proxy,
            "%RangeError%": s,
            "%ReferenceError%": a,
            "%Reflect%": "undefined" == typeof Reflect ? r : Reflect,
            "%RegExp%": RegExp,
            "%Set%": "undefined" == typeof Set ? r : Set,
            "%SetIteratorPrototype%":
              "undefined" != typeof Set && m && g
                ? g(new Set()[Symbol.iterator]())
                : r,
            "%SharedArrayBuffer%":
              "undefined" == typeof SharedArrayBuffer ? r : SharedArrayBuffer,
            "%String%": String,
            "%StringIteratorPrototype%": m && g ? g(""[Symbol.iterator]()) : r,
            "%Symbol%": m ? Symbol : r,
            "%SyntaxError%": h,
            "%ThrowTypeError%": f,
            "%TypedArray%": b,
            "%TypeError%": u,
            "%Uint8Array%": "undefined" == typeof Uint8Array ? r : Uint8Array,
            "%Uint8ClampedArray%":
              "undefined" == typeof Uint8ClampedArray ? r : Uint8ClampedArray,
            "%Uint16Array%":
              "undefined" == typeof Uint16Array ? r : Uint16Array,
            "%Uint32Array%":
              "undefined" == typeof Uint32Array ? r : Uint32Array,
            "%URIError%": l,
            "%WeakMap%": "undefined" == typeof WeakMap ? r : WeakMap,
            "%WeakRef%": "undefined" == typeof WeakRef ? r : WeakRef,
            "%WeakSet%": "undefined" == typeof WeakSet ? r : WeakSet,
          };
        if (g)
          try {
            null.error;
          } catch (t) {
            var w = g(g(t));
            x["%Error.prototype%"] = w;
          }
        var T = function t(e) {
            var i;
            if ("%AsyncFunction%" === e) i = d("async function () {}");
            else if ("%GeneratorFunction%" === e) i = d("function* () {}");
            else if ("%AsyncGeneratorFunction%" === e)
              i = d("async function* () {}");
            else if ("%AsyncGenerator%" === e) {
              var r = t("%AsyncGeneratorFunction%");
              r && (i = r.prototype);
            } else if ("%AsyncIteratorPrototype%" === e) {
              var n = t("%AsyncGenerator%");
              n && g && (i = g(n.prototype));
            }
            return (x[e] = i), i;
          },
          A = {
            __proto__: null,
            "%ArrayBufferPrototype%": ["ArrayBuffer", "prototype"],
            "%ArrayPrototype%": ["Array", "prototype"],
            "%ArrayProto_entries%": ["Array", "prototype", "entries"],
            "%ArrayProto_forEach%": ["Array", "prototype", "forEach"],
            "%ArrayProto_keys%": ["Array", "prototype", "keys"],
            "%ArrayProto_values%": ["Array", "prototype", "values"],
            "%AsyncFunctionPrototype%": ["AsyncFunction", "prototype"],
            "%AsyncGenerator%": ["AsyncGeneratorFunction", "prototype"],
            "%AsyncGeneratorPrototype%": [
              "AsyncGeneratorFunction",
              "prototype",
              "prototype",
            ],
            "%BooleanPrototype%": ["Boolean", "prototype"],
            "%DataViewPrototype%": ["DataView", "prototype"],
            "%DatePrototype%": ["Date", "prototype"],
            "%ErrorPrototype%": ["Error", "prototype"],
            "%EvalErrorPrototype%": ["EvalError", "prototype"],
            "%Float32ArrayPrototype%": ["Float32Array", "prototype"],
            "%Float64ArrayPrototype%": ["Float64Array", "prototype"],
            "%FunctionPrototype%": ["Function", "prototype"],
            "%Generator%": ["GeneratorFunction", "prototype"],
            "%GeneratorPrototype%": [
              "GeneratorFunction",
              "prototype",
              "prototype",
            ],
            "%Int8ArrayPrototype%": ["Int8Array", "prototype"],
            "%Int16ArrayPrototype%": ["Int16Array", "prototype"],
            "%Int32ArrayPrototype%": ["Int32Array", "prototype"],
            "%JSONParse%": ["JSON", "parse"],
            "%JSONStringify%": ["JSON", "stringify"],
            "%MapPrototype%": ["Map", "prototype"],
            "%NumberPrototype%": ["Number", "prototype"],
            "%ObjectPrototype%": ["Object", "prototype"],
            "%ObjProto_toString%": ["Object", "prototype", "toString"],
            "%ObjProto_valueOf%": ["Object", "prototype", "valueOf"],
            "%PromisePrototype%": ["Promise", "prototype"],
            "%PromiseProto_then%": ["Promise", "prototype", "then"],
            "%Promise_all%": ["Promise", "all"],
            "%Promise_reject%": ["Promise", "reject"],
            "%Promise_resolve%": ["Promise", "resolve"],
            "%RangeErrorPrototype%": ["RangeError", "prototype"],
            "%ReferenceErrorPrototype%": ["ReferenceError", "prototype"],
            "%RegExpPrototype%": ["RegExp", "prototype"],
            "%SetPrototype%": ["Set", "prototype"],
            "%SharedArrayBufferPrototype%": ["SharedArrayBuffer", "prototype"],
            "%StringPrototype%": ["String", "prototype"],
            "%SymbolPrototype%": ["Symbol", "prototype"],
            "%SyntaxErrorPrototype%": ["SyntaxError", "prototype"],
            "%TypedArrayPrototype%": ["TypedArray", "prototype"],
            "%TypeErrorPrototype%": ["TypeError", "prototype"],
            "%Uint8ArrayPrototype%": ["Uint8Array", "prototype"],
            "%Uint8ClampedArrayPrototype%": ["Uint8ClampedArray", "prototype"],
            "%Uint16ArrayPrototype%": ["Uint16Array", "prototype"],
            "%Uint32ArrayPrototype%": ["Uint32Array", "prototype"],
            "%URIErrorPrototype%": ["URIError", "prototype"],
            "%WeakMapPrototype%": ["WeakMap", "prototype"],
            "%WeakSetPrototype%": ["WeakSet", "prototype"],
          },
          S = i(743),
          E = i(957),
          C = S.call(Function.call, Array.prototype.concat),
          M = S.call(Function.apply, Array.prototype.splice),
          P = S.call(Function.call, String.prototype.replace),
          B = S.call(Function.call, String.prototype.slice),
          O = S.call(Function.call, RegExp.prototype.exec),
          R =
            /[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,
          I = /\\(\\)?/g,
          k = function (t, e) {
            var i,
              r = t;
            if ((E(A, r) && (r = "%" + (i = A[r])[0] + "%"), E(x, r))) {
              var n = x[r];
              if ((n === v && (n = T(r)), void 0 === n && !e))
                throw new u(
                  "intrinsic " +
                    t +
                    " exists, but is not available. Please file an issue!"
                );
              return { alias: i, name: r, value: n };
            }
            throw new h("intrinsic " + t + " does not exist!");
          };
        t.exports = function (t, e) {
          if ("string" != typeof t || 0 === t.length)
            throw new u("intrinsic name must be a non-empty string");
          if (arguments.length > 1 && "boolean" != typeof e)
            throw new u('"allowMissing" argument must be a boolean');
          if (null === O(/^%?[^%]*%?$/, t))
            throw new h(
              "`%` may not be present anywhere but at the beginning and end of the intrinsic name"
            );
          var i = (function (t) {
              var e = B(t, 0, 1),
                i = B(t, -1);
              if ("%" === e && "%" !== i)
                throw new h("invalid intrinsic syntax, expected closing `%`");
              if ("%" === i && "%" !== e)
                throw new h("invalid intrinsic syntax, expected opening `%`");
              var r = [];
              return (
                P(t, R, function (t, e, i, n) {
                  r[r.length] = i ? P(n, I, "$1") : e || t;
                }),
                r
              );
            })(t),
            r = i.length > 0 ? i[0] : "",
            n = k("%" + r + "%", e),
            o = n.name,
            s = n.value,
            a = !1,
            l = n.alias;
          l && ((r = l[0]), M(i, C([0, 1], l)));
          for (var c = 1, d = !0; c < i.length; c += 1) {
            var _ = i[c],
              f = B(_, 0, 1),
              m = B(_, -1);
            if (
              ('"' === f ||
                "'" === f ||
                "`" === f ||
                '"' === m ||
                "'" === m ||
                "`" === m) &&
              f !== m
            )
              throw new h(
                "property names with quotes must have matching quotes"
              );
            if (
              (("constructor" !== _ && d) || (a = !0),
              E(x, (o = "%" + (r += "." + _) + "%")))
            )
              s = x[o];
            else if (null != s) {
              if (!(_ in s)) {
                if (!e)
                  throw new u(
                    "base intrinsic for " +
                      t +
                      " exists, but the property is not available."
                  );
                return;
              }
              if (p && c + 1 >= i.length) {
                var y = p(s, _);
                s =
                  (d = !!y) && "get" in y && !("originalValue" in y.get)
                    ? y.get
                    : s[_];
              } else (d = E(s, _)), (s = s[_]);
              d && !a && (x[o] = s);
            }
          }
          return s;
        };
      },
      795: (t, e, i) => {
        "use strict";
        var r = i(453)("%Object.getOwnPropertyDescriptor%", !0);
        if (r)
          try {
            r([], "length");
          } catch (t) {
            r = null;
          }
        t.exports = r;
      },
      592: (t, e, i) => {
        "use strict";
        var r = i(36),
          n = function () {
            return !!r;
          };
        (n.hasArrayLengthDefineBug = function () {
          if (!r) return null;
          try {
            return 1 !== r([], "length", { value: 1 }).length;
          } catch (t) {
            return !0;
          }
        }),
          (t.exports = n);
      },
      24: (t) => {
        "use strict";
        var e = { __proto__: null, foo: {} },
          i = Object;
        t.exports = function () {
          return { __proto__: e }.foo === e.foo && !(e instanceof i);
        };
      },
      39: (t, e, i) => {
        "use strict";
        var r = "undefined" != typeof Symbol && Symbol,
          n = i(333);
        t.exports = function () {
          return (
            "function" == typeof r &&
            "function" == typeof Symbol &&
            "symbol" == typeof r("foo") &&
            "symbol" == typeof Symbol("bar") &&
            n()
          );
        };
      },
      333: (t) => {
        "use strict";
        t.exports = function () {
          if (
            "function" != typeof Symbol ||
            "function" != typeof Object.getOwnPropertySymbols
          )
            return !1;
          if ("symbol" == typeof Symbol.iterator) return !0;
          var t = {},
            e = Symbol("test"),
            i = Object(e);
          if ("string" == typeof e) return !1;
          if ("[object Symbol]" !== Object.prototype.toString.call(e))
            return !1;
          if ("[object Symbol]" !== Object.prototype.toString.call(i))
            return !1;
          for (e in ((t[e] = 42), t)) return !1;
          if ("function" == typeof Object.keys && 0 !== Object.keys(t).length)
            return !1;
          if (
            "function" == typeof Object.getOwnPropertyNames &&
            0 !== Object.getOwnPropertyNames(t).length
          )
            return !1;
          var r = Object.getOwnPropertySymbols(t);
          if (1 !== r.length || r[0] !== e) return !1;
          if (!Object.prototype.propertyIsEnumerable.call(t, e)) return !1;
          if ("function" == typeof Object.getOwnPropertyDescriptor) {
            var n = Object.getOwnPropertyDescriptor(t, e);
            if (42 !== n.value || !0 !== n.enumerable) return !1;
          }
          return !0;
        };
      },
      957: (t, e, i) => {
        "use strict";
        var r = Function.prototype.call,
          n = Object.prototype.hasOwnProperty,
          o = i(743);
        t.exports = o.call(r, n);
      },
      196: (t, e, i) => {
        var r;
        !(function () {
          "use strict";
          var n = function () {
            this.init();
          };
          n.prototype = {
            init: function () {
              var t = this || o;
              return (
                (t._counter = 1e3),
                (t._html5AudioPool = []),
                (t.html5PoolSize = 10),
                (t._codecs = {}),
                (t._howls = []),
                (t._muted = !1),
                (t._volume = 1),
                (t._canPlayEvent = "canplaythrough"),
                (t._navigator =
                  "undefined" != typeof window && window.navigator
                    ? window.navigator
                    : null),
                (t.masterGain = null),
                (t.noAudio = !1),
                (t.usingWebAudio = !0),
                (t.autoSuspend = !0),
                (t.ctx = null),
                (t.autoUnlock = !0),
                t._setup(),
                t
              );
            },
            volume: function (t) {
              var e = this || o;
              if (
                ((t = parseFloat(t)),
                e.ctx || p(),
                void 0 !== t && t >= 0 && t <= 1)
              ) {
                if (((e._volume = t), e._muted)) return e;
                e.usingWebAudio &&
                  e.masterGain.gain.setValueAtTime(t, o.ctx.currentTime);
                for (var i = 0; i < e._howls.length; i++)
                  if (!e._howls[i]._webAudio)
                    for (
                      var r = e._howls[i]._getSoundIds(), n = 0;
                      n < r.length;
                      n++
                    ) {
                      var s = e._howls[i]._soundById(r[n]);
                      s && s._node && (s._node.volume = s._volume * t);
                    }
                return e;
              }
              return e._volume;
            },
            mute: function (t) {
              var e = this || o;
              e.ctx || p(),
                (e._muted = t),
                e.usingWebAudio &&
                  e.masterGain.gain.setValueAtTime(
                    t ? 0 : e._volume,
                    o.ctx.currentTime
                  );
              for (var i = 0; i < e._howls.length; i++)
                if (!e._howls[i]._webAudio)
                  for (
                    var r = e._howls[i]._getSoundIds(), n = 0;
                    n < r.length;
                    n++
                  ) {
                    var s = e._howls[i]._soundById(r[n]);
                    s && s._node && (s._node.muted = !!t || s._muted);
                  }
              return e;
            },
            stop: function () {
              for (var t = this || o, e = 0; e < t._howls.length; e++)
                t._howls[e].stop();
              return t;
            },
            unload: function () {
              for (var t = this || o, e = t._howls.length - 1; e >= 0; e--)
                t._howls[e].unload();
              return (
                t.usingWebAudio &&
                  t.ctx &&
                  void 0 !== t.ctx.close &&
                  (t.ctx.close(), (t.ctx = null), p()),
                t
              );
            },
            codecs: function (t) {
              return (this || o)._codecs[t.replace(/^x-/, "")];
            },
            _setup: function () {
              var t = this || o;
              if (
                ((t.state = (t.ctx && t.ctx.state) || "suspended"),
                t._autoSuspend(),
                !t.usingWebAudio)
              )
                if ("undefined" != typeof Audio)
                  try {
                    void 0 === new Audio().oncanplaythrough &&
                      (t._canPlayEvent = "canplay");
                  } catch (e) {
                    t.noAudio = !0;
                  }
                else t.noAudio = !0;
              try {
                new Audio().muted && (t.noAudio = !0);
              } catch (t) {}
              return t.noAudio || t._setupCodecs(), t;
            },
            _setupCodecs: function () {
              var t = this || o,
                e = null;
              try {
                e = "undefined" != typeof Audio ? new Audio() : null;
              } catch (e) {
                return t;
              }
              if (!e || "function" != typeof e.canPlayType) return t;
              var i = e.canPlayType("audio/mpeg;").replace(/^no$/, ""),
                r = t._navigator ? t._navigator.userAgent : "",
                n = r.match(/OPR\/(\d+)/g),
                s = n && parseInt(n[0].split("/")[1], 10) < 33,
                a = -1 !== r.indexOf("Safari") && -1 === r.indexOf("Chrome"),
                h = r.match(/Version\/(.*?) /),
                u = a && h && parseInt(h[1], 10) < 15;
              return (
                (t._codecs = {
                  mp3: !(
                    s ||
                    (!i && !e.canPlayType("audio/mp3;").replace(/^no$/, ""))
                  ),
                  mpeg: !!i,
                  opus: !!e
                    .canPlayType('audio/ogg; codecs="opus"')
                    .replace(/^no$/, ""),
                  ogg: !!e
                    .canPlayType('audio/ogg; codecs="vorbis"')
                    .replace(/^no$/, ""),
                  oga: !!e
                    .canPlayType('audio/ogg; codecs="vorbis"')
                    .replace(/^no$/, ""),
                  wav: !!(
                    e.canPlayType('audio/wav; codecs="1"') ||
                    e.canPlayType("audio/wav")
                  ).replace(/^no$/, ""),
                  aac: !!e.canPlayType("audio/aac;").replace(/^no$/, ""),
                  caf: !!e.canPlayType("audio/x-caf;").replace(/^no$/, ""),
                  m4a: !!(
                    e.canPlayType("audio/x-m4a;") ||
                    e.canPlayType("audio/m4a;") ||
                    e.canPlayType("audio/aac;")
                  ).replace(/^no$/, ""),
                  m4b: !!(
                    e.canPlayType("audio/x-m4b;") ||
                    e.canPlayType("audio/m4b;") ||
                    e.canPlayType("audio/aac;")
                  ).replace(/^no$/, ""),
                  mp4: !!(
                    e.canPlayType("audio/x-mp4;") ||
                    e.canPlayType("audio/mp4;") ||
                    e.canPlayType("audio/aac;")
                  ).replace(/^no$/, ""),
                  weba: !(
                    u ||
                    !e
                      .canPlayType('audio/webm; codecs="vorbis"')
                      .replace(/^no$/, "")
                  ),
                  webm: !(
                    u ||
                    !e
                      .canPlayType('audio/webm; codecs="vorbis"')
                      .replace(/^no$/, "")
                  ),
                  dolby: !!e
                    .canPlayType('audio/mp4; codecs="ec-3"')
                    .replace(/^no$/, ""),
                  flac: !!(
                    e.canPlayType("audio/x-flac;") ||
                    e.canPlayType("audio/flac;")
                  ).replace(/^no$/, ""),
                }),
                t
              );
            },
            _unlockAudio: function () {
              var t = this || o;
              if (!t._audioUnlocked && t.ctx) {
                (t._audioUnlocked = !1),
                  (t.autoUnlock = !1),
                  t._mobileUnloaded ||
                    44100 === t.ctx.sampleRate ||
                    ((t._mobileUnloaded = !0), t.unload()),
                  (t._scratchBuffer = t.ctx.createBuffer(1, 1, 22050));
                var e = function (i) {
                  for (; t._html5AudioPool.length < t.html5PoolSize; )
                    try {
                      var r = new Audio();
                      (r._unlocked = !0), t._releaseHtml5Audio(r);
                    } catch (i) {
                      t.noAudio = !0;
                      break;
                    }
                  for (var n = 0; n < t._howls.length; n++)
                    if (!t._howls[n]._webAudio)
                      for (
                        var o = t._howls[n]._getSoundIds(), s = 0;
                        s < o.length;
                        s++
                      ) {
                        var a = t._howls[n]._soundById(o[s]);
                        a &&
                          a._node &&
                          !a._node._unlocked &&
                          ((a._node._unlocked = !0), a._node.load());
                      }
                  t._autoResume();
                  var h = t.ctx.createBufferSource();
                  (h.buffer = t._scratchBuffer),
                    h.connect(t.ctx.destination),
                    void 0 === h.start ? h.noteOn(0) : h.start(0),
                    "function" == typeof t.ctx.resume && t.ctx.resume(),
                    (h.onended = function () {
                      h.disconnect(0),
                        (t._audioUnlocked = !0),
                        document.removeEventListener("touchstart", e, !0),
                        document.removeEventListener("touchend", e, !0),
                        document.removeEventListener("click", e, !0),
                        document.removeEventListener("keydown", e, !0);
                      for (var i = 0; i < t._howls.length; i++)
                        t._howls[i]._emit("unlock");
                    });
                };
                return (
                  document.addEventListener("touchstart", e, !0),
                  document.addEventListener("touchend", e, !0),
                  document.addEventListener("click", e, !0),
                  document.addEventListener("keydown", e, !0),
                  t
                );
              }
            },
            _obtainHtml5Audio: function () {
              var t = this || o;
              if (t._html5AudioPool.length) return t._html5AudioPool.pop();
              var e = new Audio().play();
              return (
                e &&
                  "undefined" != typeof Promise &&
                  (e instanceof Promise || "function" == typeof e.then) &&
                  e.catch(function () {
                    console.warn(
                      "HTML5 Audio pool exhausted, returning potentially locked audio object."
                    );
                  }),
                new Audio()
              );
            },
            _releaseHtml5Audio: function (t) {
              var e = this || o;
              return t._unlocked && e._html5AudioPool.push(t), e;
            },
            _autoSuspend: function () {
              var t = this;
              if (
                t.autoSuspend &&
                t.ctx &&
                void 0 !== t.ctx.suspend &&
                o.usingWebAudio
              ) {
                for (var e = 0; e < t._howls.length; e++)
                  if (t._howls[e]._webAudio)
                    for (var i = 0; i < t._howls[e]._sounds.length; i++)
                      if (!t._howls[e]._sounds[i]._paused) return t;
                return (
                  t._suspendTimer && clearTimeout(t._suspendTimer),
                  (t._suspendTimer = setTimeout(function () {
                    if (t.autoSuspend) {
                      (t._suspendTimer = null), (t.state = "suspending");
                      var e = function () {
                        (t.state = "suspended"),
                          t._resumeAfterSuspend &&
                            (delete t._resumeAfterSuspend, t._autoResume());
                      };
                      t.ctx.suspend().then(e, e);
                    }
                  }, 3e4)),
                  t
                );
              }
            },
            _autoResume: function () {
              var t = this;
              if (t.ctx && void 0 !== t.ctx.resume && o.usingWebAudio)
                return (
                  "running" === t.state &&
                  "interrupted" !== t.ctx.state &&
                  t._suspendTimer
                    ? (clearTimeout(t._suspendTimer), (t._suspendTimer = null))
                    : "suspended" === t.state ||
                      ("running" === t.state && "interrupted" === t.ctx.state)
                    ? (t.ctx.resume().then(function () {
                        t.state = "running";
                        for (var e = 0; e < t._howls.length; e++)
                          t._howls[e]._emit("resume");
                      }),
                      t._suspendTimer &&
                        (clearTimeout(t._suspendTimer),
                        (t._suspendTimer = null)))
                    : "suspending" === t.state && (t._resumeAfterSuspend = !0),
                  t
                );
            },
          };
          var o = new n(),
            s = function (t) {
              t.src && 0 !== t.src.length
                ? this.init(t)
                : console.error(
                    "An array of source files must be passed with any new Howl."
                  );
            };
          s.prototype = {
            init: function (t) {
              var e = this;
              return (
                o.ctx || p(),
                (e._autoplay = t.autoplay || !1),
                (e._format =
                  "string" != typeof t.format ? t.format : [t.format]),
                (e._html5 = t.html5 || !1),
                (e._muted = t.mute || !1),
                (e._loop = t.loop || !1),
                (e._pool = t.pool || 5),
                (e._preload =
                  ("boolean" != typeof t.preload && "metadata" !== t.preload) ||
                  t.preload),
                (e._rate = t.rate || 1),
                (e._sprite = t.sprite || {}),
                (e._src = "string" != typeof t.src ? t.src : [t.src]),
                (e._volume = void 0 !== t.volume ? t.volume : 1),
                (e._xhr = {
                  method: t.xhr && t.xhr.method ? t.xhr.method : "GET",
                  headers: t.xhr && t.xhr.headers ? t.xhr.headers : null,
                  withCredentials:
                    !(!t.xhr || !t.xhr.withCredentials) &&
                    t.xhr.withCredentials,
                }),
                (e._duration = 0),
                (e._state = "unloaded"),
                (e._sounds = []),
                (e._endTimers = {}),
                (e._queue = []),
                (e._playLock = !1),
                (e._onend = t.onend ? [{ fn: t.onend }] : []),
                (e._onfade = t.onfade ? [{ fn: t.onfade }] : []),
                (e._onload = t.onload ? [{ fn: t.onload }] : []),
                (e._onloaderror = t.onloaderror ? [{ fn: t.onloaderror }] : []),
                (e._onplayerror = t.onplayerror ? [{ fn: t.onplayerror }] : []),
                (e._onpause = t.onpause ? [{ fn: t.onpause }] : []),
                (e._onplay = t.onplay ? [{ fn: t.onplay }] : []),
                (e._onstop = t.onstop ? [{ fn: t.onstop }] : []),
                (e._onmute = t.onmute ? [{ fn: t.onmute }] : []),
                (e._onvolume = t.onvolume ? [{ fn: t.onvolume }] : []),
                (e._onrate = t.onrate ? [{ fn: t.onrate }] : []),
                (e._onseek = t.onseek ? [{ fn: t.onseek }] : []),
                (e._onunlock = t.onunlock ? [{ fn: t.onunlock }] : []),
                (e._onresume = []),
                (e._webAudio = o.usingWebAudio && !e._html5),
                void 0 !== o.ctx && o.ctx && o.autoUnlock && o._unlockAudio(),
                o._howls.push(e),
                e._autoplay &&
                  e._queue.push({
                    event: "play",
                    action: function () {
                      e.play();
                    },
                  }),
                e._preload && "none" !== e._preload && e.load(),
                e
              );
            },
            load: function () {
              var t = this,
                e = null;
              if (o.noAudio) t._emit("loaderror", null, "No audio support.");
              else {
                "string" == typeof t._src && (t._src = [t._src]);
                for (var i = 0; i < t._src.length; i++) {
                  var r, n;
                  if (t._format && t._format[i]) r = t._format[i];
                  else {
                    if ("string" != typeof (n = t._src[i])) {
                      t._emit(
                        "loaderror",
                        null,
                        "Non-string found in selected audio sources - ignoring."
                      );
                      continue;
                    }
                    (r = /^data:audio\/([^;,]+);/i.exec(n)) ||
                      (r = /\.([^.]+)$/.exec(n.split("?", 1)[0])),
                      r && (r = r[1].toLowerCase());
                  }
                  if (
                    (r ||
                      console.warn(
                        'No file extension was found. Consider using the "format" property or specify an extension.'
                      ),
                    r && o.codecs(r))
                  ) {
                    e = t._src[i];
                    break;
                  }
                }
                if (e)
                  return (
                    (t._src = e),
                    (t._state = "loading"),
                    "https:" === window.location.protocol &&
                      "http:" === e.slice(0, 5) &&
                      ((t._html5 = !0), (t._webAudio = !1)),
                    new a(t),
                    t._webAudio && u(t),
                    t
                  );
                t._emit(
                  "loaderror",
                  null,
                  "No codec support for selected audio sources."
                );
              }
            },
            play: function (t, e) {
              var i = this,
                r = null;
              if ("number" == typeof t) (r = t), (t = null);
              else {
                if (
                  "string" == typeof t &&
                  "loaded" === i._state &&
                  !i._sprite[t]
                )
                  return null;
                if (void 0 === t && ((t = "__default"), !i._playLock)) {
                  for (var n = 0, s = 0; s < i._sounds.length; s++)
                    i._sounds[s]._paused &&
                      !i._sounds[s]._ended &&
                      (n++, (r = i._sounds[s]._id));
                  1 === n ? (t = null) : (r = null);
                }
              }
              var a = r ? i._soundById(r) : i._inactiveSound();
              if (!a) return null;
              if (
                (r && !t && (t = a._sprite || "__default"),
                "loaded" !== i._state)
              ) {
                (a._sprite = t), (a._ended = !1);
                var h = a._id;
                return (
                  i._queue.push({
                    event: "play",
                    action: function () {
                      i.play(h);
                    },
                  }),
                  h
                );
              }
              if (r && !a._paused) return e || i._loadQueue("play"), a._id;
              i._webAudio && o._autoResume();
              var u = Math.max(
                  0,
                  a._seek > 0 ? a._seek : i._sprite[t][0] / 1e3
                ),
                l = Math.max(0, (i._sprite[t][0] + i._sprite[t][1]) / 1e3 - u),
                c = (1e3 * l) / Math.abs(a._rate),
                d = i._sprite[t][0] / 1e3,
                p = (i._sprite[t][0] + i._sprite[t][1]) / 1e3;
              (a._sprite = t), (a._ended = !1);
              var _ = function () {
                (a._paused = !1),
                  (a._seek = u),
                  (a._start = d),
                  (a._stop = p),
                  (a._loop = !(!a._loop && !i._sprite[t][2]));
              };
              if (!(u >= p)) {
                var f = a._node;
                if (i._webAudio) {
                  var m = function () {
                    (i._playLock = !1), _(), i._refreshBuffer(a);
                    var t = a._muted || i._muted ? 0 : a._volume;
                    f.gain.setValueAtTime(t, o.ctx.currentTime),
                      (a._playStart = o.ctx.currentTime),
                      void 0 === f.bufferSource.start
                        ? a._loop
                          ? f.bufferSource.noteGrainOn(0, u, 86400)
                          : f.bufferSource.noteGrainOn(0, u, l)
                        : a._loop
                        ? f.bufferSource.start(0, u, 86400)
                        : f.bufferSource.start(0, u, l),
                      c !== 1 / 0 &&
                        (i._endTimers[a._id] = setTimeout(
                          i._ended.bind(i, a),
                          c
                        )),
                      e ||
                        setTimeout(function () {
                          i._emit("play", a._id), i._loadQueue();
                        }, 0);
                  };
                  "running" === o.state && "interrupted" !== o.ctx.state
                    ? m()
                    : ((i._playLock = !0),
                      i.once("resume", m),
                      i._clearTimer(a._id));
                } else {
                  var y = function () {
                    (f.currentTime = u),
                      (f.muted = a._muted || i._muted || o._muted || f.muted),
                      (f.volume = a._volume * o.volume()),
                      (f.playbackRate = a._rate);
                    try {
                      var r = f.play();
                      if (
                        (r &&
                        "undefined" != typeof Promise &&
                        (r instanceof Promise || "function" == typeof r.then)
                          ? ((i._playLock = !0),
                            _(),
                            r
                              .then(function () {
                                (i._playLock = !1),
                                  (f._unlocked = !0),
                                  e ? i._loadQueue() : i._emit("play", a._id);
                              })
                              .catch(function () {
                                (i._playLock = !1),
                                  i._emit(
                                    "playerror",
                                    a._id,
                                    "Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."
                                  ),
                                  (a._ended = !0),
                                  (a._paused = !0);
                              }))
                          : e ||
                            ((i._playLock = !1), _(), i._emit("play", a._id)),
                        (f.playbackRate = a._rate),
                        f.paused)
                      )
                        return void i._emit(
                          "playerror",
                          a._id,
                          "Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."
                        );
                      "__default" !== t || a._loop
                        ? (i._endTimers[a._id] = setTimeout(
                            i._ended.bind(i, a),
                            c
                          ))
                        : ((i._endTimers[a._id] = function () {
                            i._ended(a),
                              f.removeEventListener(
                                "ended",
                                i._endTimers[a._id],
                                !1
                              );
                          }),
                          f.addEventListener("ended", i._endTimers[a._id], !1));
                    } catch (t) {
                      i._emit("playerror", a._id, t);
                    }
                  };
                  "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA" ===
                    f.src && ((f.src = i._src), f.load());
                  var g =
                    (window && window.ejecta) ||
                    (!f.readyState && o._navigator.isCocoonJS);
                  if (f.readyState >= 3 || g) y();
                  else {
                    (i._playLock = !0), (i._state = "loading");
                    var v = function () {
                      (i._state = "loaded"),
                        y(),
                        f.removeEventListener(o._canPlayEvent, v, !1);
                    };
                    f.addEventListener(o._canPlayEvent, v, !1),
                      i._clearTimer(a._id);
                  }
                }
                return a._id;
              }
              i._ended(a);
            },
            pause: function (t) {
              var e = this;
              if ("loaded" !== e._state || e._playLock)
                return (
                  e._queue.push({
                    event: "pause",
                    action: function () {
                      e.pause(t);
                    },
                  }),
                  e
                );
              for (var i = e._getSoundIds(t), r = 0; r < i.length; r++) {
                e._clearTimer(i[r]);
                var n = e._soundById(i[r]);
                if (
                  n &&
                  !n._paused &&
                  ((n._seek = e.seek(i[r])),
                  (n._rateSeek = 0),
                  (n._paused = !0),
                  e._stopFade(i[r]),
                  n._node)
                )
                  if (e._webAudio) {
                    if (!n._node.bufferSource) continue;
                    void 0 === n._node.bufferSource.stop
                      ? n._node.bufferSource.noteOff(0)
                      : n._node.bufferSource.stop(0),
                      e._cleanBuffer(n._node);
                  } else
                    (isNaN(n._node.duration) && n._node.duration !== 1 / 0) ||
                      n._node.pause();
                arguments[1] || e._emit("pause", n ? n._id : null);
              }
              return e;
            },
            stop: function (t, e) {
              var i = this;
              if ("loaded" !== i._state || i._playLock)
                return (
                  i._queue.push({
                    event: "stop",
                    action: function () {
                      i.stop(t);
                    },
                  }),
                  i
                );
              for (var r = i._getSoundIds(t), n = 0; n < r.length; n++) {
                i._clearTimer(r[n]);
                var o = i._soundById(r[n]);
                o &&
                  ((o._seek = o._start || 0),
                  (o._rateSeek = 0),
                  (o._paused = !0),
                  (o._ended = !0),
                  i._stopFade(r[n]),
                  o._node &&
                    (i._webAudio
                      ? o._node.bufferSource &&
                        (void 0 === o._node.bufferSource.stop
                          ? o._node.bufferSource.noteOff(0)
                          : o._node.bufferSource.stop(0),
                        i._cleanBuffer(o._node))
                      : (isNaN(o._node.duration) &&
                          o._node.duration !== 1 / 0) ||
                        ((o._node.currentTime = o._start || 0),
                        o._node.pause(),
                        o._node.duration === 1 / 0 && i._clearSound(o._node))),
                  e || i._emit("stop", o._id));
              }
              return i;
            },
            mute: function (t, e) {
              var i = this;
              if ("loaded" !== i._state || i._playLock)
                return (
                  i._queue.push({
                    event: "mute",
                    action: function () {
                      i.mute(t, e);
                    },
                  }),
                  i
                );
              if (void 0 === e) {
                if ("boolean" != typeof t) return i._muted;
                i._muted = t;
              }
              for (var r = i._getSoundIds(e), n = 0; n < r.length; n++) {
                var s = i._soundById(r[n]);
                s &&
                  ((s._muted = t),
                  s._interval && i._stopFade(s._id),
                  i._webAudio && s._node
                    ? s._node.gain.setValueAtTime(
                        t ? 0 : s._volume,
                        o.ctx.currentTime
                      )
                    : s._node && (s._node.muted = !!o._muted || t),
                  i._emit("mute", s._id));
              }
              return i;
            },
            volume: function () {
              var t,
                e,
                i,
                r = this,
                n = arguments;
              if (0 === n.length) return r._volume;
              if (
                (1 === n.length || (2 === n.length && void 0 === n[1])
                  ? r._getSoundIds().indexOf(n[0]) >= 0
                    ? (e = parseInt(n[0], 10))
                    : (t = parseFloat(n[0]))
                  : n.length >= 2 &&
                    ((t = parseFloat(n[0])), (e = parseInt(n[1], 10))),
                !(void 0 !== t && t >= 0 && t <= 1))
              )
                return (i = e ? r._soundById(e) : r._sounds[0]) ? i._volume : 0;
              if ("loaded" !== r._state || r._playLock)
                return (
                  r._queue.push({
                    event: "volume",
                    action: function () {
                      r.volume.apply(r, n);
                    },
                  }),
                  r
                );
              void 0 === e && (r._volume = t), (e = r._getSoundIds(e));
              for (var s = 0; s < e.length; s++)
                (i = r._soundById(e[s])) &&
                  ((i._volume = t),
                  n[2] || r._stopFade(e[s]),
                  r._webAudio && i._node && !i._muted
                    ? i._node.gain.setValueAtTime(t, o.ctx.currentTime)
                    : i._node && !i._muted && (i._node.volume = t * o.volume()),
                  r._emit("volume", i._id));
              return r;
            },
            fade: function (t, e, i, r) {
              var n = this;
              if ("loaded" !== n._state || n._playLock)
                return (
                  n._queue.push({
                    event: "fade",
                    action: function () {
                      n.fade(t, e, i, r);
                    },
                  }),
                  n
                );
              (t = Math.min(Math.max(0, parseFloat(t)), 1)),
                (e = Math.min(Math.max(0, parseFloat(e)), 1)),
                (i = parseFloat(i)),
                n.volume(t, r);
              for (var s = n._getSoundIds(r), a = 0; a < s.length; a++) {
                var h = n._soundById(s[a]);
                if (h) {
                  if ((r || n._stopFade(s[a]), n._webAudio && !h._muted)) {
                    var u = o.ctx.currentTime,
                      l = u + i / 1e3;
                    (h._volume = t),
                      h._node.gain.setValueAtTime(t, u),
                      h._node.gain.linearRampToValueAtTime(e, l);
                  }
                  n._startFadeInterval(h, t, e, i, s[a], void 0 === r);
                }
              }
              return n;
            },
            _startFadeInterval: function (t, e, i, r, n, o) {
              var s = this,
                a = e,
                h = i - e,
                u = Math.abs(h / 0.01),
                l = Math.max(4, u > 0 ? r / u : r),
                c = Date.now();
              (t._fadeTo = i),
                (t._interval = setInterval(function () {
                  var n = (Date.now() - c) / r;
                  (c = Date.now()),
                    (a += h * n),
                    (a = Math.round(100 * a) / 100),
                    (a = h < 0 ? Math.max(i, a) : Math.min(i, a)),
                    s._webAudio ? (t._volume = a) : s.volume(a, t._id, !0),
                    o && (s._volume = a),
                    ((i < e && a <= i) || (i > e && a >= i)) &&
                      (clearInterval(t._interval),
                      (t._interval = null),
                      (t._fadeTo = null),
                      s.volume(i, t._id),
                      s._emit("fade", t._id));
                }, l));
            },
            _stopFade: function (t) {
              var e = this,
                i = e._soundById(t);
              return (
                i &&
                  i._interval &&
                  (e._webAudio &&
                    i._node.gain.cancelScheduledValues(o.ctx.currentTime),
                  clearInterval(i._interval),
                  (i._interval = null),
                  e.volume(i._fadeTo, t),
                  (i._fadeTo = null),
                  e._emit("fade", t)),
                e
              );
            },
            loop: function () {
              var t,
                e,
                i,
                r = this,
                n = arguments;
              if (0 === n.length) return r._loop;
              if (1 === n.length) {
                if ("boolean" != typeof n[0])
                  return !!(i = r._soundById(parseInt(n[0], 10))) && i._loop;
                (t = n[0]), (r._loop = t);
              } else 2 === n.length && ((t = n[0]), (e = parseInt(n[1], 10)));
              for (var o = r._getSoundIds(e), s = 0; s < o.length; s++)
                (i = r._soundById(o[s])) &&
                  ((i._loop = t),
                  r._webAudio &&
                    i._node &&
                    i._node.bufferSource &&
                    ((i._node.bufferSource.loop = t),
                    t &&
                      ((i._node.bufferSource.loopStart = i._start || 0),
                      (i._node.bufferSource.loopEnd = i._stop),
                      r.playing(o[s]) &&
                        (r.pause(o[s], !0), r.play(o[s], !0)))));
              return r;
            },
            rate: function () {
              var t,
                e,
                i,
                r = this,
                n = arguments;
              if (
                (0 === n.length
                  ? (e = r._sounds[0]._id)
                  : 1 === n.length
                  ? r._getSoundIds().indexOf(n[0]) >= 0
                    ? (e = parseInt(n[0], 10))
                    : (t = parseFloat(n[0]))
                  : 2 === n.length &&
                    ((t = parseFloat(n[0])), (e = parseInt(n[1], 10))),
                "number" != typeof t)
              )
                return (i = r._soundById(e)) ? i._rate : r._rate;
              if ("loaded" !== r._state || r._playLock)
                return (
                  r._queue.push({
                    event: "rate",
                    action: function () {
                      r.rate.apply(r, n);
                    },
                  }),
                  r
                );
              void 0 === e && (r._rate = t), (e = r._getSoundIds(e));
              for (var s = 0; s < e.length; s++)
                if ((i = r._soundById(e[s]))) {
                  r.playing(e[s]) &&
                    ((i._rateSeek = r.seek(e[s])),
                    (i._playStart = r._webAudio
                      ? o.ctx.currentTime
                      : i._playStart)),
                    (i._rate = t),
                    r._webAudio && i._node && i._node.bufferSource
                      ? i._node.bufferSource.playbackRate.setValueAtTime(
                          t,
                          o.ctx.currentTime
                        )
                      : i._node && (i._node.playbackRate = t);
                  var a = r.seek(e[s]),
                    h =
                      (1e3 *
                        ((r._sprite[i._sprite][0] + r._sprite[i._sprite][1]) /
                          1e3 -
                          a)) /
                      Math.abs(i._rate);
                  (!r._endTimers[e[s]] && i._paused) ||
                    (r._clearTimer(e[s]),
                    (r._endTimers[e[s]] = setTimeout(r._ended.bind(r, i), h))),
                    r._emit("rate", i._id);
                }
              return r;
            },
            seek: function () {
              var t,
                e,
                i = this,
                r = arguments;
              if (
                (0 === r.length
                  ? i._sounds.length && (e = i._sounds[0]._id)
                  : 1 === r.length
                  ? i._getSoundIds().indexOf(r[0]) >= 0
                    ? (e = parseInt(r[0], 10))
                    : i._sounds.length &&
                      ((e = i._sounds[0]._id), (t = parseFloat(r[0])))
                  : 2 === r.length &&
                    ((t = parseFloat(r[0])), (e = parseInt(r[1], 10))),
                void 0 === e)
              )
                return 0;
              if (
                "number" == typeof t &&
                ("loaded" !== i._state || i._playLock)
              )
                return (
                  i._queue.push({
                    event: "seek",
                    action: function () {
                      i.seek.apply(i, r);
                    },
                  }),
                  i
                );
              var n = i._soundById(e);
              if (n) {
                if (!("number" == typeof t && t >= 0)) {
                  if (i._webAudio) {
                    var s = i.playing(e) ? o.ctx.currentTime - n._playStart : 0,
                      a = n._rateSeek ? n._rateSeek - n._seek : 0;
                    return n._seek + (a + s * Math.abs(n._rate));
                  }
                  return n._node.currentTime;
                }
                var h = i.playing(e);
                h && i.pause(e, !0),
                  (n._seek = t),
                  (n._ended = !1),
                  i._clearTimer(e),
                  i._webAudio ||
                    !n._node ||
                    isNaN(n._node.duration) ||
                    (n._node.currentTime = t);
                var u = function () {
                  h && i.play(e, !0), i._emit("seek", e);
                };
                if (h && !i._webAudio) {
                  var l = function () {
                    i._playLock ? setTimeout(l, 0) : u();
                  };
                  setTimeout(l, 0);
                } else u();
              }
              return i;
            },
            playing: function (t) {
              var e = this;
              if ("number" == typeof t) {
                var i = e._soundById(t);
                return !!i && !i._paused;
              }
              for (var r = 0; r < e._sounds.length; r++)
                if (!e._sounds[r]._paused) return !0;
              return !1;
            },
            duration: function (t) {
              var e = this,
                i = e._duration,
                r = e._soundById(t);
              return r && (i = e._sprite[r._sprite][1] / 1e3), i;
            },
            state: function () {
              return this._state;
            },
            unload: function () {
              for (var t = this, e = t._sounds, i = 0; i < e.length; i++)
                e[i]._paused || t.stop(e[i]._id),
                  t._webAudio ||
                    (t._clearSound(e[i]._node),
                    e[i]._node.removeEventListener("error", e[i]._errorFn, !1),
                    e[i]._node.removeEventListener(
                      o._canPlayEvent,
                      e[i]._loadFn,
                      !1
                    ),
                    e[i]._node.removeEventListener("ended", e[i]._endFn, !1),
                    o._releaseHtml5Audio(e[i]._node)),
                  delete e[i]._node,
                  t._clearTimer(e[i]._id);
              var r = o._howls.indexOf(t);
              r >= 0 && o._howls.splice(r, 1);
              var n = !0;
              for (i = 0; i < o._howls.length; i++)
                if (
                  o._howls[i]._src === t._src ||
                  t._src.indexOf(o._howls[i]._src) >= 0
                ) {
                  n = !1;
                  break;
                }
              return (
                h && n && delete h[t._src],
                (o.noAudio = !1),
                (t._state = "unloaded"),
                (t._sounds = []),
                (t = null),
                null
              );
            },
            on: function (t, e, i, r) {
              var n = this["_on" + t];
              return (
                "function" == typeof e &&
                  n.push(r ? { id: i, fn: e, once: r } : { id: i, fn: e }),
                this
              );
            },
            off: function (t, e, i) {
              var r = this,
                n = r["_on" + t],
                o = 0;
              if (("number" == typeof e && ((i = e), (e = null)), e || i))
                for (o = 0; o < n.length; o++) {
                  var s = i === n[o].id;
                  if ((e === n[o].fn && s) || (!e && s)) {
                    n.splice(o, 1);
                    break;
                  }
                }
              else if (t) r["_on" + t] = [];
              else {
                var a = Object.keys(r);
                for (o = 0; o < a.length; o++)
                  0 === a[o].indexOf("_on") &&
                    Array.isArray(r[a[o]]) &&
                    (r[a[o]] = []);
              }
              return r;
            },
            once: function (t, e, i) {
              return this.on(t, e, i, 1), this;
            },
            _emit: function (t, e, i) {
              for (
                var r = this, n = r["_on" + t], o = n.length - 1;
                o >= 0;
                o--
              )
                (n[o].id && n[o].id !== e && "load" !== t) ||
                  (setTimeout(
                    function (t) {
                      t.call(this, e, i);
                    }.bind(r, n[o].fn),
                    0
                  ),
                  n[o].once && r.off(t, n[o].fn, n[o].id));
              return r._loadQueue(t), r;
            },
            _loadQueue: function (t) {
              var e = this;
              if (e._queue.length > 0) {
                var i = e._queue[0];
                i.event === t && (e._queue.shift(), e._loadQueue()),
                  t || i.action();
              }
              return e;
            },
            _ended: function (t) {
              var e = this,
                i = t._sprite;
              if (
                !e._webAudio &&
                t._node &&
                !t._node.paused &&
                !t._node.ended &&
                t._node.currentTime < t._stop
              )
                return setTimeout(e._ended.bind(e, t), 100), e;
              var r = !(!t._loop && !e._sprite[i][2]);
              if (
                (e._emit("end", t._id),
                !e._webAudio && r && e.stop(t._id, !0).play(t._id),
                e._webAudio && r)
              ) {
                e._emit("play", t._id),
                  (t._seek = t._start || 0),
                  (t._rateSeek = 0),
                  (t._playStart = o.ctx.currentTime);
                var n = (1e3 * (t._stop - t._start)) / Math.abs(t._rate);
                e._endTimers[t._id] = setTimeout(e._ended.bind(e, t), n);
              }
              return (
                e._webAudio &&
                  !r &&
                  ((t._paused = !0),
                  (t._ended = !0),
                  (t._seek = t._start || 0),
                  (t._rateSeek = 0),
                  e._clearTimer(t._id),
                  e._cleanBuffer(t._node),
                  o._autoSuspend()),
                e._webAudio || r || e.stop(t._id, !0),
                e
              );
            },
            _clearTimer: function (t) {
              var e = this;
              if (e._endTimers[t]) {
                if ("function" != typeof e._endTimers[t])
                  clearTimeout(e._endTimers[t]);
                else {
                  var i = e._soundById(t);
                  i &&
                    i._node &&
                    i._node.removeEventListener("ended", e._endTimers[t], !1);
                }
                delete e._endTimers[t];
              }
              return e;
            },
            _soundById: function (t) {
              for (var e = this, i = 0; i < e._sounds.length; i++)
                if (t === e._sounds[i]._id) return e._sounds[i];
              return null;
            },
            _inactiveSound: function () {
              var t = this;
              t._drain();
              for (var e = 0; e < t._sounds.length; e++)
                if (t._sounds[e]._ended) return t._sounds[e].reset();
              return new a(t);
            },
            _drain: function () {
              var t = this,
                e = t._pool,
                i = 0,
                r = 0;
              if (!(t._sounds.length < e)) {
                for (r = 0; r < t._sounds.length; r++)
                  t._sounds[r]._ended && i++;
                for (r = t._sounds.length - 1; r >= 0; r--) {
                  if (i <= e) return;
                  t._sounds[r]._ended &&
                    (t._webAudio &&
                      t._sounds[r]._node &&
                      t._sounds[r]._node.disconnect(0),
                    t._sounds.splice(r, 1),
                    i--);
                }
              }
            },
            _getSoundIds: function (t) {
              if (void 0 === t) {
                for (var e = [], i = 0; i < this._sounds.length; i++)
                  e.push(this._sounds[i]._id);
                return e;
              }
              return [t];
            },
            _refreshBuffer: function (t) {
              return (
                (t._node.bufferSource = o.ctx.createBufferSource()),
                (t._node.bufferSource.buffer = h[this._src]),
                t._panner
                  ? t._node.bufferSource.connect(t._panner)
                  : t._node.bufferSource.connect(t._node),
                (t._node.bufferSource.loop = t._loop),
                t._loop &&
                  ((t._node.bufferSource.loopStart = t._start || 0),
                  (t._node.bufferSource.loopEnd = t._stop || 0)),
                t._node.bufferSource.playbackRate.setValueAtTime(
                  t._rate,
                  o.ctx.currentTime
                ),
                this
              );
            },
            _cleanBuffer: function (t) {
              var e = o._navigator && o._navigator.vendor.indexOf("Apple") >= 0;
              if (!t.bufferSource) return this;
              if (
                o._scratchBuffer &&
                t.bufferSource &&
                ((t.bufferSource.onended = null),
                t.bufferSource.disconnect(0),
                e)
              )
                try {
                  t.bufferSource.buffer = o._scratchBuffer;
                } catch (t) {}
              return (t.bufferSource = null), this;
            },
            _clearSound: function (t) {
              /MSIE |Trident\//.test(o._navigator && o._navigator.userAgent) ||
                (t.src =
                  "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA");
            },
          };
          var a = function (t) {
            (this._parent = t), this.init();
          };
          a.prototype = {
            init: function () {
              var t = this,
                e = t._parent;
              return (
                (t._muted = e._muted),
                (t._loop = e._loop),
                (t._volume = e._volume),
                (t._rate = e._rate),
                (t._seek = 0),
                (t._paused = !0),
                (t._ended = !0),
                (t._sprite = "__default"),
                (t._id = ++o._counter),
                e._sounds.push(t),
                t.create(),
                t
              );
            },
            create: function () {
              var t = this,
                e = t._parent,
                i = o._muted || t._muted || t._parent._muted ? 0 : t._volume;
              return (
                e._webAudio
                  ? ((t._node =
                      void 0 === o.ctx.createGain
                        ? o.ctx.createGainNode()
                        : o.ctx.createGain()),
                    t._node.gain.setValueAtTime(i, o.ctx.currentTime),
                    (t._node.paused = !0),
                    t._node.connect(o.masterGain))
                  : o.noAudio ||
                    ((t._node = o._obtainHtml5Audio()),
                    (t._errorFn = t._errorListener.bind(t)),
                    t._node.addEventListener("error", t._errorFn, !1),
                    (t._loadFn = t._loadListener.bind(t)),
                    t._node.addEventListener(o._canPlayEvent, t._loadFn, !1),
                    (t._endFn = t._endListener.bind(t)),
                    t._node.addEventListener("ended", t._endFn, !1),
                    (t._node.src = e._src),
                    (t._node.preload = !0 === e._preload ? "auto" : e._preload),
                    (t._node.volume = i * o.volume()),
                    t._node.load()),
                t
              );
            },
            reset: function () {
              var t = this,
                e = t._parent;
              return (
                (t._muted = e._muted),
                (t._loop = e._loop),
                (t._volume = e._volume),
                (t._rate = e._rate),
                (t._seek = 0),
                (t._rateSeek = 0),
                (t._paused = !0),
                (t._ended = !0),
                (t._sprite = "__default"),
                (t._id = ++o._counter),
                t
              );
            },
            _errorListener: function () {
              var t = this;
              t._parent._emit(
                "loaderror",
                t._id,
                t._node.error ? t._node.error.code : 0
              ),
                t._node.removeEventListener("error", t._errorFn, !1);
            },
            _loadListener: function () {
              var t = this,
                e = t._parent;
              (e._duration = Math.ceil(10 * t._node.duration) / 10),
                0 === Object.keys(e._sprite).length &&
                  (e._sprite = { __default: [0, 1e3 * e._duration] }),
                "loaded" !== e._state &&
                  ((e._state = "loaded"), e._emit("load"), e._loadQueue()),
                t._node.removeEventListener(o._canPlayEvent, t._loadFn, !1);
            },
            _endListener: function () {
              var t = this,
                e = t._parent;
              e._duration === 1 / 0 &&
                ((e._duration = Math.ceil(10 * t._node.duration) / 10),
                e._sprite.__default[1] === 1 / 0 &&
                  (e._sprite.__default[1] = 1e3 * e._duration),
                e._ended(t)),
                t._node.removeEventListener("ended", t._endFn, !1);
            },
          };
          var h = {},
            u = function (t) {
              var e = t._src;
              if (h[e]) return (t._duration = h[e].duration), void d(t);
              if (/^data:[^;]+;base64,/.test(e)) {
                for (
                  var i = atob(e.split(",")[1]),
                    r = new Uint8Array(i.length),
                    n = 0;
                  n < i.length;
                  ++n
                )
                  r[n] = i.charCodeAt(n);
                c(r.buffer, t);
              } else {
                var o = new XMLHttpRequest();
                o.open(t._xhr.method, e, !0),
                  (o.withCredentials = t._xhr.withCredentials),
                  (o.responseType = "arraybuffer"),
                  t._xhr.headers &&
                    Object.keys(t._xhr.headers).forEach(function (e) {
                      o.setRequestHeader(e, t._xhr.headers[e]);
                    }),
                  (o.onload = function () {
                    var e = (o.status + "")[0];
                    "0" === e || "2" === e || "3" === e
                      ? c(o.response, t)
                      : t._emit(
                          "loaderror",
                          null,
                          "Failed loading audio file with status: " +
                            o.status +
                            "."
                        );
                  }),
                  (o.onerror = function () {
                    t._webAudio &&
                      ((t._html5 = !0),
                      (t._webAudio = !1),
                      (t._sounds = []),
                      delete h[e],
                      t.load());
                  }),
                  l(o);
              }
            },
            l = function (t) {
              try {
                t.send();
              } catch (e) {
                t.onerror();
              }
            },
            c = function (t, e) {
              var i = function () {
                  e._emit("loaderror", null, "Decoding audio data failed.");
                },
                r = function (t) {
                  t && e._sounds.length > 0 ? ((h[e._src] = t), d(e, t)) : i();
                };
              "undefined" != typeof Promise &&
              1 === o.ctx.decodeAudioData.length
                ? o.ctx.decodeAudioData(t).then(r).catch(i)
                : o.ctx.decodeAudioData(t, r, i);
            },
            d = function (t, e) {
              e && !t._duration && (t._duration = e.duration),
                0 === Object.keys(t._sprite).length &&
                  (t._sprite = { __default: [0, 1e3 * t._duration] }),
                "loaded" !== t._state &&
                  ((t._state = "loaded"), t._emit("load"), t._loadQueue());
            },
            p = function () {
              if (o.usingWebAudio) {
                try {
                  "undefined" != typeof AudioContext
                    ? (o.ctx = new AudioContext())
                    : "undefined" != typeof webkitAudioContext
                    ? (o.ctx = new webkitAudioContext())
                    : (o.usingWebAudio = !1);
                } catch (t) {
                  o.usingWebAudio = !1;
                }
                o.ctx || (o.usingWebAudio = !1);
                var t = /iP(hone|od|ad)/.test(
                    o._navigator && o._navigator.platform
                  ),
                  e =
                    o._navigator &&
                    o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),
                  i = e ? parseInt(e[1], 10) : null;
                if (t && i && i < 9) {
                  var r = /safari/.test(
                    o._navigator && o._navigator.userAgent.toLowerCase()
                  );
                  o._navigator && !r && (o.usingWebAudio = !1);
                }
                o.usingWebAudio &&
                  ((o.masterGain =
                    void 0 === o.ctx.createGain
                      ? o.ctx.createGainNode()
                      : o.ctx.createGain()),
                  o.masterGain.gain.setValueAtTime(
                    o._muted ? 0 : o._volume,
                    o.ctx.currentTime
                  ),
                  o.masterGain.connect(o.ctx.destination)),
                  o._setup();
              }
            };
          void 0 ===
            (r = function () {
              return { Howler: o, Howl: s };
            }.apply(e, [])) || (t.exports = r),
            (e.Howler = o),
            (e.Howl = s),
            void 0 !== i.g
              ? ((i.g.HowlerGlobal = n),
                (i.g.Howler = o),
                (i.g.Howl = s),
                (i.g.Sound = a))
              : "undefined" != typeof window &&
                ((window.HowlerGlobal = n),
                (window.Howler = o),
                (window.Howl = s),
                (window.Sound = a));
        })(),
          (function () {
            "use strict";
            var t;
            (HowlerGlobal.prototype._pos = [0, 0, 0]),
              (HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0]),
              (HowlerGlobal.prototype.stereo = function (t) {
                var e = this;
                if (!e.ctx || !e.ctx.listener) return e;
                for (var i = e._howls.length - 1; i >= 0; i--)
                  e._howls[i].stereo(t);
                return e;
              }),
              (HowlerGlobal.prototype.pos = function (t, e, i) {
                var r = this;
                return r.ctx && r.ctx.listener
                  ? ((e = "number" != typeof e ? r._pos[1] : e),
                    (i = "number" != typeof i ? r._pos[2] : i),
                    "number" != typeof t
                      ? r._pos
                      : ((r._pos = [t, e, i]),
                        void 0 !== r.ctx.listener.positionX
                          ? (r.ctx.listener.positionX.setTargetAtTime(
                              r._pos[0],
                              Howler.ctx.currentTime,
                              0.1
                            ),
                            r.ctx.listener.positionY.setTargetAtTime(
                              r._pos[1],
                              Howler.ctx.currentTime,
                              0.1
                            ),
                            r.ctx.listener.positionZ.setTargetAtTime(
                              r._pos[2],
                              Howler.ctx.currentTime,
                              0.1
                            ))
                          : r.ctx.listener.setPosition(
                              r._pos[0],
                              r._pos[1],
                              r._pos[2]
                            ),
                        r))
                  : r;
              }),
              (HowlerGlobal.prototype.orientation = function (
                t,
                e,
                i,
                r,
                n,
                o
              ) {
                var s = this;
                if (!s.ctx || !s.ctx.listener) return s;
                var a = s._orientation;
                return (
                  (e = "number" != typeof e ? a[1] : e),
                  (i = "number" != typeof i ? a[2] : i),
                  (r = "number" != typeof r ? a[3] : r),
                  (n = "number" != typeof n ? a[4] : n),
                  (o = "number" != typeof o ? a[5] : o),
                  "number" != typeof t
                    ? a
                    : ((s._orientation = [t, e, i, r, n, o]),
                      void 0 !== s.ctx.listener.forwardX
                        ? (s.ctx.listener.forwardX.setTargetAtTime(
                            t,
                            Howler.ctx.currentTime,
                            0.1
                          ),
                          s.ctx.listener.forwardY.setTargetAtTime(
                            e,
                            Howler.ctx.currentTime,
                            0.1
                          ),
                          s.ctx.listener.forwardZ.setTargetAtTime(
                            i,
                            Howler.ctx.currentTime,
                            0.1
                          ),
                          s.ctx.listener.upX.setTargetAtTime(
                            r,
                            Howler.ctx.currentTime,
                            0.1
                          ),
                          s.ctx.listener.upY.setTargetAtTime(
                            n,
                            Howler.ctx.currentTime,
                            0.1
                          ),
                          s.ctx.listener.upZ.setTargetAtTime(
                            o,
                            Howler.ctx.currentTime,
                            0.1
                          ))
                        : s.ctx.listener.setOrientation(t, e, i, r, n, o),
                      s)
                );
              }),
              (Howl.prototype.init =
                ((t = Howl.prototype.init),
                function (e) {
                  var i = this;
                  return (
                    (i._orientation = e.orientation || [1, 0, 0]),
                    (i._stereo = e.stereo || null),
                    (i._pos = e.pos || null),
                    (i._pannerAttr = {
                      coneInnerAngle:
                        void 0 !== e.coneInnerAngle ? e.coneInnerAngle : 360,
                      coneOuterAngle:
                        void 0 !== e.coneOuterAngle ? e.coneOuterAngle : 360,
                      coneOuterGain:
                        void 0 !== e.coneOuterGain ? e.coneOuterGain : 0,
                      distanceModel:
                        void 0 !== e.distanceModel
                          ? e.distanceModel
                          : "inverse",
                      maxDistance:
                        void 0 !== e.maxDistance ? e.maxDistance : 1e4,
                      panningModel:
                        void 0 !== e.panningModel ? e.panningModel : "HRTF",
                      refDistance: void 0 !== e.refDistance ? e.refDistance : 1,
                      rolloffFactor:
                        void 0 !== e.rolloffFactor ? e.rolloffFactor : 1,
                    }),
                    (i._onstereo = e.onstereo ? [{ fn: e.onstereo }] : []),
                    (i._onpos = e.onpos ? [{ fn: e.onpos }] : []),
                    (i._onorientation = e.onorientation
                      ? [{ fn: e.onorientation }]
                      : []),
                    t.call(this, e)
                  );
                })),
              (Howl.prototype.stereo = function (t, i) {
                var r = this;
                if (!r._webAudio) return r;
                if ("loaded" !== r._state)
                  return (
                    r._queue.push({
                      event: "stereo",
                      action: function () {
                        r.stereo(t, i);
                      },
                    }),
                    r
                  );
                var n =
                  void 0 === Howler.ctx.createStereoPanner
                    ? "spatial"
                    : "stereo";
                if (void 0 === i) {
                  if ("number" != typeof t) return r._stereo;
                  (r._stereo = t), (r._pos = [t, 0, 0]);
                }
                for (var o = r._getSoundIds(i), s = 0; s < o.length; s++) {
                  var a = r._soundById(o[s]);
                  if (a) {
                    if ("number" != typeof t) return a._stereo;
                    (a._stereo = t),
                      (a._pos = [t, 0, 0]),
                      a._node &&
                        ((a._pannerAttr.panningModel = "equalpower"),
                        (a._panner && a._panner.pan) || e(a, n),
                        "spatial" === n
                          ? void 0 !== a._panner.positionX
                            ? (a._panner.positionX.setValueAtTime(
                                t,
                                Howler.ctx.currentTime
                              ),
                              a._panner.positionY.setValueAtTime(
                                0,
                                Howler.ctx.currentTime
                              ),
                              a._panner.positionZ.setValueAtTime(
                                0,
                                Howler.ctx.currentTime
                              ))
                            : a._panner.setPosition(t, 0, 0)
                          : a._panner.pan.setValueAtTime(
                              t,
                              Howler.ctx.currentTime
                            )),
                      r._emit("stereo", a._id);
                  }
                }
                return r;
              }),
              (Howl.prototype.pos = function (t, i, r, n) {
                var o = this;
                if (!o._webAudio) return o;
                if ("loaded" !== o._state)
                  return (
                    o._queue.push({
                      event: "pos",
                      action: function () {
                        o.pos(t, i, r, n);
                      },
                    }),
                    o
                  );
                if (
                  ((i = "number" != typeof i ? 0 : i),
                  (r = "number" != typeof r ? -0.5 : r),
                  void 0 === n)
                ) {
                  if ("number" != typeof t) return o._pos;
                  o._pos = [t, i, r];
                }
                for (var s = o._getSoundIds(n), a = 0; a < s.length; a++) {
                  var h = o._soundById(s[a]);
                  if (h) {
                    if ("number" != typeof t) return h._pos;
                    (h._pos = [t, i, r]),
                      h._node &&
                        ((h._panner && !h._panner.pan) || e(h, "spatial"),
                        void 0 !== h._panner.positionX
                          ? (h._panner.positionX.setValueAtTime(
                              t,
                              Howler.ctx.currentTime
                            ),
                            h._panner.positionY.setValueAtTime(
                              i,
                              Howler.ctx.currentTime
                            ),
                            h._panner.positionZ.setValueAtTime(
                              r,
                              Howler.ctx.currentTime
                            ))
                          : h._panner.setPosition(t, i, r)),
                      o._emit("pos", h._id);
                  }
                }
                return o;
              }),
              (Howl.prototype.orientation = function (t, i, r, n) {
                var o = this;
                if (!o._webAudio) return o;
                if ("loaded" !== o._state)
                  return (
                    o._queue.push({
                      event: "orientation",
                      action: function () {
                        o.orientation(t, i, r, n);
                      },
                    }),
                    o
                  );
                if (
                  ((i = "number" != typeof i ? o._orientation[1] : i),
                  (r = "number" != typeof r ? o._orientation[2] : r),
                  void 0 === n)
                ) {
                  if ("number" != typeof t) return o._orientation;
                  o._orientation = [t, i, r];
                }
                for (var s = o._getSoundIds(n), a = 0; a < s.length; a++) {
                  var h = o._soundById(s[a]);
                  if (h) {
                    if ("number" != typeof t) return h._orientation;
                    (h._orientation = [t, i, r]),
                      h._node &&
                        (h._panner ||
                          (h._pos || (h._pos = o._pos || [0, 0, -0.5]),
                          e(h, "spatial")),
                        void 0 !== h._panner.orientationX
                          ? (h._panner.orientationX.setValueAtTime(
                              t,
                              Howler.ctx.currentTime
                            ),
                            h._panner.orientationY.setValueAtTime(
                              i,
                              Howler.ctx.currentTime
                            ),
                            h._panner.orientationZ.setValueAtTime(
                              r,
                              Howler.ctx.currentTime
                            ))
                          : h._panner.setOrientation(t, i, r)),
                      o._emit("orientation", h._id);
                  }
                }
                return o;
              }),
              (Howl.prototype.pannerAttr = function () {
                var t,
                  i,
                  r,
                  n = this,
                  o = arguments;
                if (!n._webAudio) return n;
                if (0 === o.length) return n._pannerAttr;
                if (1 === o.length) {
                  if ("object" != typeof o[0])
                    return (r = n._soundById(parseInt(o[0], 10)))
                      ? r._pannerAttr
                      : n._pannerAttr;
                  (t = o[0]),
                    void 0 === i &&
                      (t.pannerAttr ||
                        (t.pannerAttr = {
                          coneInnerAngle: t.coneInnerAngle,
                          coneOuterAngle: t.coneOuterAngle,
                          coneOuterGain: t.coneOuterGain,
                          distanceModel: t.distanceModel,
                          maxDistance: t.maxDistance,
                          refDistance: t.refDistance,
                          rolloffFactor: t.rolloffFactor,
                          panningModel: t.panningModel,
                        }),
                      (n._pannerAttr = {
                        coneInnerAngle:
                          void 0 !== t.pannerAttr.coneInnerAngle
                            ? t.pannerAttr.coneInnerAngle
                            : n._coneInnerAngle,
                        coneOuterAngle:
                          void 0 !== t.pannerAttr.coneOuterAngle
                            ? t.pannerAttr.coneOuterAngle
                            : n._coneOuterAngle,
                        coneOuterGain:
                          void 0 !== t.pannerAttr.coneOuterGain
                            ? t.pannerAttr.coneOuterGain
                            : n._coneOuterGain,
                        distanceModel:
                          void 0 !== t.pannerAttr.distanceModel
                            ? t.pannerAttr.distanceModel
                            : n._distanceModel,
                        maxDistance:
                          void 0 !== t.pannerAttr.maxDistance
                            ? t.pannerAttr.maxDistance
                            : n._maxDistance,
                        refDistance:
                          void 0 !== t.pannerAttr.refDistance
                            ? t.pannerAttr.refDistance
                            : n._refDistance,
                        rolloffFactor:
                          void 0 !== t.pannerAttr.rolloffFactor
                            ? t.pannerAttr.rolloffFactor
                            : n._rolloffFactor,
                        panningModel:
                          void 0 !== t.pannerAttr.panningModel
                            ? t.pannerAttr.panningModel
                            : n._panningModel,
                      }));
                } else 2 === o.length && ((t = o[0]), (i = parseInt(o[1], 10)));
                for (var s = n._getSoundIds(i), a = 0; a < s.length; a++)
                  if ((r = n._soundById(s[a]))) {
                    var h = r._pannerAttr;
                    h = {
                      coneInnerAngle:
                        void 0 !== t.coneInnerAngle
                          ? t.coneInnerAngle
                          : h.coneInnerAngle,
                      coneOuterAngle:
                        void 0 !== t.coneOuterAngle
                          ? t.coneOuterAngle
                          : h.coneOuterAngle,
                      coneOuterGain:
                        void 0 !== t.coneOuterGain
                          ? t.coneOuterGain
                          : h.coneOuterGain,
                      distanceModel:
                        void 0 !== t.distanceModel
                          ? t.distanceModel
                          : h.distanceModel,
                      maxDistance:
                        void 0 !== t.maxDistance
                          ? t.maxDistance
                          : h.maxDistance,
                      refDistance:
                        void 0 !== t.refDistance
                          ? t.refDistance
                          : h.refDistance,
                      rolloffFactor:
                        void 0 !== t.rolloffFactor
                          ? t.rolloffFactor
                          : h.rolloffFactor,
                      panningModel:
                        void 0 !== t.panningModel
                          ? t.panningModel
                          : h.panningModel,
                    };
                    var u = r._panner;
                    u ||
                      (r._pos || (r._pos = n._pos || [0, 0, -0.5]),
                      e(r, "spatial"),
                      (u = r._panner)),
                      (u.coneInnerAngle = h.coneInnerAngle),
                      (u.coneOuterAngle = h.coneOuterAngle),
                      (u.coneOuterGain = h.coneOuterGain),
                      (u.distanceModel = h.distanceModel),
                      (u.maxDistance = h.maxDistance),
                      (u.refDistance = h.refDistance),
                      (u.rolloffFactor = h.rolloffFactor),
                      (u.panningModel = h.panningModel);
                  }
                return n;
              }),
              (Sound.prototype.init = (function (t) {
                return function () {
                  var e = this,
                    i = e._parent;
                  (e._orientation = i._orientation),
                    (e._stereo = i._stereo),
                    (e._pos = i._pos),
                    (e._pannerAttr = i._pannerAttr),
                    t.call(this),
                    e._stereo
                      ? i.stereo(e._stereo)
                      : e._pos && i.pos(e._pos[0], e._pos[1], e._pos[2], e._id);
                };
              })(Sound.prototype.init)),
              (Sound.prototype.reset = (function (t) {
                return function () {
                  var e = this,
                    i = e._parent;
                  return (
                    (e._orientation = i._orientation),
                    (e._stereo = i._stereo),
                    (e._pos = i._pos),
                    (e._pannerAttr = i._pannerAttr),
                    e._stereo
                      ? i.stereo(e._stereo)
                      : e._pos
                      ? i.pos(e._pos[0], e._pos[1], e._pos[2], e._id)
                      : e._panner &&
                        (e._panner.disconnect(0),
                        (e._panner = void 0),
                        i._refreshBuffer(e)),
                    t.call(this)
                  );
                };
              })(Sound.prototype.reset));
            var e = function (t, e) {
              "spatial" === (e = e || "spatial")
                ? ((t._panner = Howler.ctx.createPanner()),
                  (t._panner.coneInnerAngle = t._pannerAttr.coneInnerAngle),
                  (t._panner.coneOuterAngle = t._pannerAttr.coneOuterAngle),
                  (t._panner.coneOuterGain = t._pannerAttr.coneOuterGain),
                  (t._panner.distanceModel = t._pannerAttr.distanceModel),
                  (t._panner.maxDistance = t._pannerAttr.maxDistance),
                  (t._panner.refDistance = t._pannerAttr.refDistance),
                  (t._panner.rolloffFactor = t._pannerAttr.rolloffFactor),
                  (t._panner.panningModel = t._pannerAttr.panningModel),
                  void 0 !== t._panner.positionX
                    ? (t._panner.positionX.setValueAtTime(
                        t._pos[0],
                        Howler.ctx.currentTime
                      ),
                      t._panner.positionY.setValueAtTime(
                        t._pos[1],
                        Howler.ctx.currentTime
                      ),
                      t._panner.positionZ.setValueAtTime(
                        t._pos[2],
                        Howler.ctx.currentTime
                      ))
                    : t._panner.setPosition(t._pos[0], t._pos[1], t._pos[2]),
                  void 0 !== t._panner.orientationX
                    ? (t._panner.orientationX.setValueAtTime(
                        t._orientation[0],
                        Howler.ctx.currentTime
                      ),
                      t._panner.orientationY.setValueAtTime(
                        t._orientation[1],
                        Howler.ctx.currentTime
                      ),
                      t._panner.orientationZ.setValueAtTime(
                        t._orientation[2],
                        Howler.ctx.currentTime
                      ))
                    : t._panner.setOrientation(
                        t._orientation[0],
                        t._orientation[1],
                        t._orientation[2]
                      ))
                : ((t._panner = Howler.ctx.createStereoPanner()),
                  t._panner.pan.setValueAtTime(
                    t._stereo,
                    Howler.ctx.currentTime
                  )),
                t._panner.connect(t._node),
                t._paused || t._parent.pause(t._id, !0).play(t._id, !0);
            };
          })();
      },
      228: (t) => {
        "use strict";
        var e = Object.getOwnPropertySymbols,
          i = Object.prototype.hasOwnProperty,
          r = Object.prototype.propertyIsEnumerable;
        t.exports = (function () {
          try {
            if (!Object.assign) return !1;
            var t = new String("abc");
            if (((t[5] = "de"), "5" === Object.getOwnPropertyNames(t)[0]))
              return !1;
            for (var e = {}, i = 0; i < 10; i++)
              e["_" + String.fromCharCode(i)] = i;
            if (
              "0123456789" !==
              Object.getOwnPropertyNames(e)
                .map(function (t) {
                  return e[t];
                })
                .join("")
            )
              return !1;
            var r = {};
            return (
              "abcdefghijklmnopqrst".split("").forEach(function (t) {
                r[t] = t;
              }),
              "abcdefghijklmnopqrst" ===
                Object.keys(Object.assign({}, r)).join("")
            );
          } catch (t) {
            return !1;
          }
        })()
          ? Object.assign
          : function (t, n) {
              for (
                var o,
                  s,
                  a = (function (t) {
                    if (null == t)
                      throw new TypeError(
                        "Object.assign cannot be called with null or undefined"
                      );
                    return Object(t);
                  })(t),
                  h = 1;
                h < arguments.length;
                h++
              ) {
                for (var u in (o = Object(arguments[h])))
                  i.call(o, u) && (a[u] = o[u]);
                if (e) {
                  s = e(o);
                  for (var l = 0; l < s.length; l++)
                    r.call(o, s[l]) && (a[s[l]] = o[s[l]]);
                }
              }
              return a;
            };
      },
      859: (t, e, i) => {
        var r = "function" == typeof Map && Map.prototype,
          n =
            Object.getOwnPropertyDescriptor && r
              ? Object.getOwnPropertyDescriptor(Map.prototype, "size")
              : null,
          o = r && n && "function" == typeof n.get ? n.get : null,
          s = r && Map.prototype.forEach,
          a = "function" == typeof Set && Set.prototype,
          h =
            Object.getOwnPropertyDescriptor && a
              ? Object.getOwnPropertyDescriptor(Set.prototype, "size")
              : null,
          u = a && h && "function" == typeof h.get ? h.get : null,
          l = a && Set.prototype.forEach,
          c =
            "function" == typeof WeakMap && WeakMap.prototype
              ? WeakMap.prototype.has
              : null,
          d =
            "function" == typeof WeakSet && WeakSet.prototype
              ? WeakSet.prototype.has
              : null,
          p =
            "function" == typeof WeakRef && WeakRef.prototype
              ? WeakRef.prototype.deref
              : null,
          _ = Boolean.prototype.valueOf,
          f = Object.prototype.toString,
          m = Function.prototype.toString,
          y = String.prototype.match,
          g = String.prototype.slice,
          v = String.prototype.replace,
          b = String.prototype.toUpperCase,
          x = String.prototype.toLowerCase,
          w = RegExp.prototype.test,
          T = Array.prototype.concat,
          A = Array.prototype.join,
          S = Array.prototype.slice,
          E = Math.floor,
          C = "function" == typeof BigInt ? BigInt.prototype.valueOf : null,
          M = Object.getOwnPropertySymbols,
          P =
            "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
              ? Symbol.prototype.toString
              : null,
          B = "function" == typeof Symbol && "object" == typeof Symbol.iterator,
          O =
            "function" == typeof Symbol &&
            Symbol.toStringTag &&
            (Symbol.toStringTag, 1)
              ? Symbol.toStringTag
              : null,
          R = Object.prototype.propertyIsEnumerable,
          I =
            ("function" == typeof Reflect
              ? Reflect.getPrototypeOf
              : Object.getPrototypeOf) ||
            ([].__proto__ === Array.prototype
              ? function (t) {
                  return t.__proto__;
                }
              : null);
        function k(t, e) {
          if (
            t === 1 / 0 ||
            t === -1 / 0 ||
            t != t ||
            (t && t > -1e3 && t < 1e3) ||
            w.call(/e/, e)
          )
            return e;
          var i = /[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;
          if ("number" == typeof t) {
            var r = t < 0 ? -E(-t) : E(t);
            if (r !== t) {
              var n = String(r),
                o = g.call(e, n.length + 1);
              return (
                v.call(n, i, "$&_") +
                "." +
                v.call(v.call(o, /([0-9]{3})/g, "$&_"), /_$/, "")
              );
            }
          }
          return v.call(e, i, "$&_");
        }
        var F = i(634),
          D = F.custom,
          N = j(D) ? D : null;
        function L(t, e, i) {
          var r = "double" === (i.quoteStyle || e) ? '"' : "'";
          return r + t + r;
        }
        function U(t) {
          return v.call(String(t), /"/g, "&quot;");
        }
        function G(t) {
          return !(
            "[object Array]" !== H(t) ||
            (O && "object" == typeof t && O in t)
          );
        }
        function V(t) {
          return !(
            "[object RegExp]" !== H(t) ||
            (O && "object" == typeof t && O in t)
          );
        }
        function j(t) {
          if (B) return t && "object" == typeof t && t instanceof Symbol;
          if ("symbol" == typeof t) return !0;
          if (!t || "object" != typeof t || !P) return !1;
          try {
            return P.call(t), !0;
          } catch (t) {}
          return !1;
        }
        t.exports = function t(e, r, n, a) {
          var h = r || {};
          if (
            X(h, "quoteStyle") &&
            "single" !== h.quoteStyle &&
            "double" !== h.quoteStyle
          )
            throw new TypeError(
              'option "quoteStyle" must be "single" or "double"'
            );
          if (
            X(h, "maxStringLength") &&
            ("number" == typeof h.maxStringLength
              ? h.maxStringLength < 0 && h.maxStringLength !== 1 / 0
              : null !== h.maxStringLength)
          )
            throw new TypeError(
              'option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`'
            );
          var f = !X(h, "customInspect") || h.customInspect;
          if ("boolean" != typeof f && "symbol" !== f)
            throw new TypeError(
              "option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`"
            );
          if (
            X(h, "indent") &&
            null !== h.indent &&
            "\t" !== h.indent &&
            !(parseInt(h.indent, 10) === h.indent && h.indent > 0)
          )
            throw new TypeError(
              'option "indent" must be "\\t", an integer > 0, or `null`'
            );
          if (
            X(h, "numericSeparator") &&
            "boolean" != typeof h.numericSeparator
          )
            throw new TypeError(
              'option "numericSeparator", if provided, must be `true` or `false`'
            );
          var b = h.numericSeparator;
          if (void 0 === e) return "undefined";
          if (null === e) return "null";
          if ("boolean" == typeof e) return e ? "true" : "false";
          if ("string" == typeof e) return W(e, h);
          if ("number" == typeof e) {
            if (0 === e) return 1 / 0 / e > 0 ? "0" : "-0";
            var w = String(e);
            return b ? k(e, w) : w;
          }
          if ("bigint" == typeof e) {
            var E = String(e) + "n";
            return b ? k(e, E) : E;
          }
          var M = void 0 === h.depth ? 5 : h.depth;
          if (
            (void 0 === n && (n = 0), n >= M && M > 0 && "object" == typeof e)
          )
            return G(e) ? "[Array]" : "[Object]";
          var D,
            z = (function (t, e) {
              var i;
              if ("\t" === t.indent) i = "\t";
              else {
                if (!("number" == typeof t.indent && t.indent > 0)) return null;
                i = A.call(Array(t.indent + 1), " ");
              }
              return { base: i, prev: A.call(Array(e + 1), i) };
            })(h, n);
          if (void 0 === a) a = [];
          else if (Y(a, e) >= 0) return "[Circular]";
          function q(e, i, r) {
            if ((i && (a = S.call(a)).push(i), r)) {
              var o = { depth: h.depth };
              return (
                X(h, "quoteStyle") && (o.quoteStyle = h.quoteStyle),
                t(e, o, n + 1, a)
              );
            }
            return t(e, h, n + 1, a);
          }
          if ("function" == typeof e && !V(e)) {
            var tt = (function (t) {
                if (t.name) return t.name;
                var e = y.call(m.call(t), /^function\s*([\w$]+)/);
                return e ? e[1] : null;
              })(e),
              et = Q(e, q);
            return (
              "[Function" +
              (tt ? ": " + tt : " (anonymous)") +
              "]" +
              (et.length > 0 ? " { " + A.call(et, ", ") + " }" : "")
            );
          }
          if (j(e)) {
            var it = B
              ? v.call(String(e), /^(Symbol\(.*\))_[^)]*$/, "$1")
              : P.call(e);
            return "object" != typeof e || B ? it : $(it);
          }
          if (
            (D = e) &&
            "object" == typeof D &&
            (("undefined" != typeof HTMLElement && D instanceof HTMLElement) ||
              ("string" == typeof D.nodeName &&
                "function" == typeof D.getAttribute))
          ) {
            for (
              var rt = "<" + x.call(String(e.nodeName)),
                nt = e.attributes || [],
                ot = 0;
              ot < nt.length;
              ot++
            )
              rt += " " + nt[ot].name + "=" + L(U(nt[ot].value), "double", h);
            return (
              (rt += ">"),
              e.childNodes && e.childNodes.length && (rt += "..."),
              rt + "</" + x.call(String(e.nodeName)) + ">"
            );
          }
          if (G(e)) {
            if (0 === e.length) return "[]";
            var st = Q(e, q);
            return z &&
              !(function (t) {
                for (var e = 0; e < t.length; e++)
                  if (Y(t[e], "\n") >= 0) return !1;
                return !0;
              })(st)
              ? "[" + Z(st, z) + "]"
              : "[ " + A.call(st, ", ") + " ]";
          }
          if (
            (function (t) {
              return !(
                "[object Error]" !== H(t) ||
                (O && "object" == typeof t && O in t)
              );
            })(e)
          ) {
            var at = Q(e, q);
            return "cause" in Error.prototype ||
              !("cause" in e) ||
              R.call(e, "cause")
              ? 0 === at.length
                ? "[" + String(e) + "]"
                : "{ [" + String(e) + "] " + A.call(at, ", ") + " }"
              : "{ [" +
                  String(e) +
                  "] " +
                  A.call(T.call("[cause]: " + q(e.cause), at), ", ") +
                  " }";
          }
          if ("object" == typeof e && f) {
            if (N && "function" == typeof e[N] && F)
              return F(e, { depth: M - n });
            if ("symbol" !== f && "function" == typeof e.inspect)
              return e.inspect();
          }
          if (
            (function (t) {
              if (!o || !t || "object" != typeof t) return !1;
              try {
                o.call(t);
                try {
                  u.call(t);
                } catch (t) {
                  return !0;
                }
                return t instanceof Map;
              } catch (t) {}
              return !1;
            })(e)
          ) {
            var ht = [];
            return (
              s &&
                s.call(e, function (t, i) {
                  ht.push(q(i, e, !0) + " => " + q(t, e));
                }),
              J("Map", o.call(e), ht, z)
            );
          }
          if (
            (function (t) {
              if (!u || !t || "object" != typeof t) return !1;
              try {
                u.call(t);
                try {
                  o.call(t);
                } catch (t) {
                  return !0;
                }
                return t instanceof Set;
              } catch (t) {}
              return !1;
            })(e)
          ) {
            var ut = [];
            return (
              l &&
                l.call(e, function (t) {
                  ut.push(q(t, e));
                }),
              J("Set", u.call(e), ut, z)
            );
          }
          if (
            (function (t) {
              if (!c || !t || "object" != typeof t) return !1;
              try {
                c.call(t, c);
                try {
                  d.call(t, d);
                } catch (t) {
                  return !0;
                }
                return t instanceof WeakMap;
              } catch (t) {}
              return !1;
            })(e)
          )
            return K("WeakMap");
          if (
            (function (t) {
              if (!d || !t || "object" != typeof t) return !1;
              try {
                d.call(t, d);
                try {
                  c.call(t, c);
                } catch (t) {
                  return !0;
                }
                return t instanceof WeakSet;
              } catch (t) {}
              return !1;
            })(e)
          )
            return K("WeakSet");
          if (
            (function (t) {
              if (!p || !t || "object" != typeof t) return !1;
              try {
                return p.call(t), !0;
              } catch (t) {}
              return !1;
            })(e)
          )
            return K("WeakRef");
          if (
            (function (t) {
              return !(
                "[object Number]" !== H(t) ||
                (O && "object" == typeof t && O in t)
              );
            })(e)
          )
            return $(q(Number(e)));
          if (
            (function (t) {
              if (!t || "object" != typeof t || !C) return !1;
              try {
                return C.call(t), !0;
              } catch (t) {}
              return !1;
            })(e)
          )
            return $(q(C.call(e)));
          if (
            (function (t) {
              return !(
                "[object Boolean]" !== H(t) ||
                (O && "object" == typeof t && O in t)
              );
            })(e)
          )
            return $(_.call(e));
          if (
            (function (t) {
              return !(
                "[object String]" !== H(t) ||
                (O && "object" == typeof t && O in t)
              );
            })(e)
          )
            return $(q(String(e)));
          if ("undefined" != typeof window && e === window)
            return "{ [object Window] }";
          if (
            ("undefined" != typeof globalThis && e === globalThis) ||
            (void 0 !== i.g && e === i.g)
          )
            return "{ [object globalThis] }";
          if (
            !(function (t) {
              return !(
                "[object Date]" !== H(t) ||
                (O && "object" == typeof t && O in t)
              );
            })(e) &&
            !V(e)
          ) {
            var lt = Q(e, q),
              ct = I
                ? I(e) === Object.prototype
                : e instanceof Object || e.constructor === Object,
              dt = e instanceof Object ? "" : "null prototype",
              pt =
                !ct && O && Object(e) === e && O in e
                  ? g.call(H(e), 8, -1)
                  : dt
                  ? "Object"
                  : "",
              _t =
                (ct || "function" != typeof e.constructor
                  ? ""
                  : e.constructor.name
                  ? e.constructor.name + " "
                  : "") +
                (pt || dt
                  ? "[" + A.call(T.call([], pt || [], dt || []), ": ") + "] "
                  : "");
            return 0 === lt.length
              ? _t + "{}"
              : z
              ? _t + "{" + Z(lt, z) + "}"
              : _t + "{ " + A.call(lt, ", ") + " }";
          }
          return String(e);
        };
        var z =
          Object.prototype.hasOwnProperty ||
          function (t) {
            return t in this;
          };
        function X(t, e) {
          return z.call(t, e);
        }
        function H(t) {
          return f.call(t);
        }
        function Y(t, e) {
          if (t.indexOf) return t.indexOf(e);
          for (var i = 0, r = t.length; i < r; i++) if (t[i] === e) return i;
          return -1;
        }
        function W(t, e) {
          if (t.length > e.maxStringLength) {
            var i = t.length - e.maxStringLength,
              r = "... " + i + " more character" + (i > 1 ? "s" : "");
            return W(g.call(t, 0, e.maxStringLength), e) + r;
          }
          return L(
            v.call(v.call(t, /(['\\])/g, "\\$1"), /[\x00-\x1f]/g, q),
            "single",
            e
          );
        }
        function q(t) {
          var e = t.charCodeAt(0),
            i = { 8: "b", 9: "t", 10: "n", 12: "f", 13: "r" }[e];
          return i
            ? "\\" + i
            : "\\x" + (e < 16 ? "0" : "") + b.call(e.toString(16));
        }
        function $(t) {
          return "Object(" + t + ")";
        }
        function K(t) {
          return t + " { ? }";
        }
        function J(t, e, i, r) {
          return t + " (" + e + ") {" + (r ? Z(i, r) : A.call(i, ", ")) + "}";
        }
        function Z(t, e) {
          if (0 === t.length) return "";
          var i = "\n" + e.prev + e.base;
          return i + A.call(t, "," + i) + "\n" + e.prev;
        }
        function Q(t, e) {
          var i = G(t),
            r = [];
          if (i) {
            r.length = t.length;
            for (var n = 0; n < t.length; n++) r[n] = X(t, n) ? e(t[n], t) : "";
          }
          var o,
            s = "function" == typeof M ? M(t) : [];
          if (B) {
            o = {};
            for (var a = 0; a < s.length; a++) o["$" + s[a]] = s[a];
          }
          for (var h in t)
            X(t, h) &&
              ((i && String(Number(h)) === h && h < t.length) ||
                (B && o["$" + h] instanceof Symbol) ||
                (w.call(/[^\w$]/, h)
                  ? r.push(e(h, t) + ": " + e(t[h], t))
                  : r.push(h + ": " + e(t[h], t))));
          if ("function" == typeof M)
            for (var u = 0; u < s.length; u++)
              R.call(t, s[u]) && r.push("[" + e(s[u]) + "]: " + e(t[s[u]], t));
          return r;
        }
      },
      585: (t) => {
        "use strict";
        var e = Object.prototype.hasOwnProperty,
          i = "~";
        function r() {}
        function n(t, e, i) {
          (this.fn = t), (this.context = e), (this.once = i || !1);
        }
        function o(t, e, r, o, s) {
          if ("function" != typeof r)
            throw new TypeError("The listener must be a function");
          var a = new n(r, o || t, s),
            h = i ? i + e : e;
          return (
            t._events[h]
              ? t._events[h].fn
                ? (t._events[h] = [t._events[h], a])
                : t._events[h].push(a)
              : ((t._events[h] = a), t._eventsCount++),
            t
          );
        }
        function s(t, e) {
          0 == --t._eventsCount ? (t._events = new r()) : delete t._events[e];
        }
        function a() {
          (this._events = new r()), (this._eventsCount = 0);
        }
        Object.create &&
          ((r.prototype = Object.create(null)), new r().__proto__ || (i = !1)),
          (a.prototype.eventNames = function () {
            var t,
              r,
              n = [];
            if (0 === this._eventsCount) return n;
            for (r in (t = this._events))
              e.call(t, r) && n.push(i ? r.slice(1) : r);
            return Object.getOwnPropertySymbols
              ? n.concat(Object.getOwnPropertySymbols(t))
              : n;
          }),
          (a.prototype.listeners = function (t) {
            var e = i ? i + t : t,
              r = this._events[e];
            if (!r) return [];
            if (r.fn) return [r.fn];
            for (var n = 0, o = r.length, s = new Array(o); n < o; n++)
              s[n] = r[n].fn;
            return s;
          }),
          (a.prototype.listenerCount = function (t) {
            var e = i ? i + t : t,
              r = this._events[e];
            return r ? (r.fn ? 1 : r.length) : 0;
          }),
          (a.prototype.emit = function (t, e, r, n, o, s) {
            var a = i ? i + t : t;
            if (!this._events[a]) return !1;
            var h,
              u,
              l = this._events[a],
              c = arguments.length;
            if (l.fn) {
              switch ((l.once && this.removeListener(t, l.fn, void 0, !0), c)) {
                case 1:
                  return l.fn.call(l.context), !0;
                case 2:
                  return l.fn.call(l.context, e), !0;
                case 3:
                  return l.fn.call(l.context, e, r), !0;
                case 4:
                  return l.fn.call(l.context, e, r, n), !0;
                case 5:
                  return l.fn.call(l.context, e, r, n, o), !0;
                case 6:
                  return l.fn.call(l.context, e, r, n, o, s), !0;
              }
              for (u = 1, h = new Array(c - 1); u < c; u++)
                h[u - 1] = arguments[u];
              l.fn.apply(l.context, h);
            } else {
              var d,
                p = l.length;
              for (u = 0; u < p; u++)
                switch (
                  (l[u].once && this.removeListener(t, l[u].fn, void 0, !0), c)
                ) {
                  case 1:
                    l[u].fn.call(l[u].context);
                    break;
                  case 2:
                    l[u].fn.call(l[u].context, e);
                    break;
                  case 3:
                    l[u].fn.call(l[u].context, e, r);
                    break;
                  case 4:
                    l[u].fn.call(l[u].context, e, r, n);
                    break;
                  default:
                    if (!h)
                      for (d = 1, h = new Array(c - 1); d < c; d++)
                        h[d - 1] = arguments[d];
                    l[u].fn.apply(l[u].context, h);
                }
            }
            return !0;
          }),
          (a.prototype.on = function (t, e, i) {
            return o(this, t, e, i, !1);
          }),
          (a.prototype.once = function (t, e, i) {
            return o(this, t, e, i, !0);
          }),
          (a.prototype.removeListener = function (t, e, r, n) {
            var o = i ? i + t : t;
            if (!this._events[o]) return this;
            if (!e) return s(this, o), this;
            var a = this._events[o];
            if (a.fn)
              a.fn !== e ||
                (n && !a.once) ||
                (r && a.context !== r) ||
                s(this, o);
            else {
              for (var h = 0, u = [], l = a.length; h < l; h++)
                (a[h].fn !== e ||
                  (n && !a[h].once) ||
                  (r && a[h].context !== r)) &&
                  u.push(a[h]);
              u.length
                ? (this._events[o] = 1 === u.length ? u[0] : u)
                : s(this, o);
            }
            return this;
          }),
          (a.prototype.removeAllListeners = function (t) {
            var e;
            return (
              t
                ? ((e = i ? i + t : t), this._events[e] && s(this, e))
                : ((this._events = new r()), (this._eventsCount = 0)),
              this
            );
          }),
          (a.prototype.off = a.prototype.removeListener),
          (a.prototype.addListener = a.prototype.on),
          (a.prefixed = i),
          (a.EventEmitter = a),
          (t.exports = a);
      },
      655: function (t, e, i) {
        var r;
        (t = i.nmd(t)),
          (function () {
            e && e.nodeType, t && t.nodeType;
            var n = "object" == typeof i.g && i.g;
            n.global !== n && n.window !== n && n.self;
            var o,
              s = 2147483647,
              a = 36,
              h = /^xn--/,
              u = /[^\x20-\x7E]/,
              l = /[\x2E\u3002\uFF0E\uFF61]/g,
              c = {
                overflow: "Overflow: input needs wider integers to process",
                "not-basic": "Illegal input >= 0x80 (not a basic code point)",
                "invalid-input": "Invalid input",
              },
              d = Math.floor,
              p = String.fromCharCode;
            function _(t) {
              throw new RangeError(c[t]);
            }
            function f(t, e) {
              for (var i = t.length, r = []; i--; ) r[i] = e(t[i]);
              return r;
            }
            function m(t, e) {
              var i = t.split("@"),
                r = "";
              return (
                i.length > 1 && ((r = i[0] + "@"), (t = i[1])),
                r + f((t = t.replace(l, ".")).split("."), e).join(".")
              );
            }
            function y(t) {
              for (var e, i, r = [], n = 0, o = t.length; n < o; )
                (e = t.charCodeAt(n++)) >= 55296 && e <= 56319 && n < o
                  ? 56320 == (64512 & (i = t.charCodeAt(n++)))
                    ? r.push(((1023 & e) << 10) + (1023 & i) + 65536)
                    : (r.push(e), n--)
                  : r.push(e);
              return r;
            }
            function g(t) {
              return f(t, function (t) {
                var e = "";
                return (
                  t > 65535 &&
                    ((e += p((((t -= 65536) >>> 10) & 1023) | 55296)),
                    (t = 56320 | (1023 & t))),
                  e + p(t)
                );
              }).join("");
            }
            function v(t, e) {
              return t + 22 + 75 * (t < 26) - ((0 != e) << 5);
            }
            function b(t, e, i) {
              var r = 0;
              for (t = i ? d(t / 700) : t >> 1, t += d(t / e); t > 455; r += a)
                t = d(t / 35);
              return d(r + (36 * t) / (t + 38));
            }
            function x(t) {
              var e,
                i,
                r,
                n,
                o,
                h,
                u,
                l,
                c,
                p,
                f,
                m = [],
                y = t.length,
                v = 0,
                x = 128,
                w = 72;
              for ((i = t.lastIndexOf("-")) < 0 && (i = 0), r = 0; r < i; ++r)
                t.charCodeAt(r) >= 128 && _("not-basic"),
                  m.push(t.charCodeAt(r));
              for (n = i > 0 ? i + 1 : 0; n < y; ) {
                for (
                  o = v, h = 1, u = a;
                  n >= y && _("invalid-input"),
                    ((l =
                      (f = t.charCodeAt(n++)) - 48 < 10
                        ? f - 22
                        : f - 65 < 26
                        ? f - 65
                        : f - 97 < 26
                        ? f - 97
                        : a) >= a ||
                      l > d((s - v) / h)) &&
                      _("overflow"),
                    (v += l * h),
                    !(l < (c = u <= w ? 1 : u >= w + 26 ? 26 : u - w));
                  u += a
                )
                  h > d(s / (p = a - c)) && _("overflow"), (h *= p);
                (w = b(v - o, (e = m.length + 1), 0 == o)),
                  d(v / e) > s - x && _("overflow"),
                  (x += d(v / e)),
                  (v %= e),
                  m.splice(v++, 0, x);
              }
              return g(m);
            }
            function w(t) {
              var e,
                i,
                r,
                n,
                o,
                h,
                u,
                l,
                c,
                f,
                m,
                g,
                x,
                w,
                T,
                A = [];
              for (
                g = (t = y(t)).length, e = 128, i = 0, o = 72, h = 0;
                h < g;
                ++h
              )
                (m = t[h]) < 128 && A.push(p(m));
              for (r = n = A.length, n && A.push("-"); r < g; ) {
                for (u = s, h = 0; h < g; ++h)
                  (m = t[h]) >= e && m < u && (u = m);
                for (
                  u - e > d((s - i) / (x = r + 1)) && _("overflow"),
                    i += (u - e) * x,
                    e = u,
                    h = 0;
                  h < g;
                  ++h
                )
                  if (((m = t[h]) < e && ++i > s && _("overflow"), m == e)) {
                    for (
                      l = i, c = a;
                      !(l < (f = c <= o ? 1 : c >= o + 26 ? 26 : c - o));
                      c += a
                    )
                      (T = l - f),
                        (w = a - f),
                        A.push(p(v(f + (T % w), 0))),
                        (l = d(T / w));
                    A.push(p(v(l, 0))), (o = b(i, x, r == n)), (i = 0), ++r;
                  }
                ++i, ++e;
              }
              return A.join("");
            }
            (o = {
              version: "1.4.1",
              ucs2: { decode: y, encode: g },
              decode: x,
              encode: w,
              toASCII: function (t) {
                return m(t, function (t) {
                  return u.test(t) ? "xn--" + w(t) : t;
                });
              },
              toUnicode: function (t) {
                return m(t, function (t) {
                  return h.test(t) ? x(t.slice(4).toLowerCase()) : t;
                });
              },
            }),
              void 0 ===
                (r = function () {
                  return o;
                }.call(e, i, e, t)) || (t.exports = r);
          })();
      },
      765: (t) => {
        "use strict";
        var e = String.prototype.replace,
          i = /%20/g,
          r = "RFC3986";
        t.exports = {
          default: r,
          formatters: {
            RFC1738: function (t) {
              return e.call(t, i, "+");
            },
            RFC3986: function (t) {
              return String(t);
            },
          },
          RFC1738: "RFC1738",
          RFC3986: r,
        };
      },
      373: (t, e, i) => {
        "use strict";
        var r = i(636),
          n = i(642),
          o = i(765);
        t.exports = { formats: o, parse: n, stringify: r };
      },
      642: (t, e, i) => {
        "use strict";
        var r = i(720),
          n = Object.prototype.hasOwnProperty,
          o = Array.isArray,
          s = {
            allowDots: !1,
            allowEmptyArrays: !1,
            allowPrototypes: !1,
            allowSparse: !1,
            arrayLimit: 20,
            charset: "utf-8",
            charsetSentinel: !1,
            comma: !1,
            decodeDotInKeys: !1,
            decoder: r.decode,
            delimiter: "&",
            depth: 5,
            duplicates: "combine",
            ignoreQueryPrefix: !1,
            interpretNumericEntities: !1,
            parameterLimit: 1e3,
            parseArrays: !0,
            plainObjects: !1,
            strictDepth: !1,
            strictNullHandling: !1,
          },
          a = function (t) {
            return t.replace(/&#(\d+);/g, function (t, e) {
              return String.fromCharCode(parseInt(e, 10));
            });
          },
          h = function (t, e) {
            return t && "string" == typeof t && e.comma && t.indexOf(",") > -1
              ? t.split(",")
              : t;
          },
          u = function (t, e, i, r) {
            if (t) {
              var o = i.allowDots ? t.replace(/\.([^.[]+)/g, "[$1]") : t,
                s = /(\[[^[\]]*])/g,
                a = i.depth > 0 && /(\[[^[\]]*])/.exec(o),
                u = a ? o.slice(0, a.index) : o,
                l = [];
              if (u) {
                if (
                  !i.plainObjects &&
                  n.call(Object.prototype, u) &&
                  !i.allowPrototypes
                )
                  return;
                l.push(u);
              }
              for (
                var c = 0;
                i.depth > 0 && null !== (a = s.exec(o)) && c < i.depth;

              ) {
                if (
                  ((c += 1),
                  !i.plainObjects &&
                    n.call(Object.prototype, a[1].slice(1, -1)) &&
                    !i.allowPrototypes)
                )
                  return;
                l.push(a[1]);
              }
              if (a) {
                if (!0 === i.strictDepth)
                  throw new RangeError(
                    "Input depth exceeded depth option of " +
                      i.depth +
                      " and strictDepth is true"
                  );
                l.push("[" + o.slice(a.index) + "]");
              }
              return (function (t, e, i, r) {
                for (var n = r ? e : h(e, i), o = t.length - 1; o >= 0; --o) {
                  var s,
                    a = t[o];
                  if ("[]" === a && i.parseArrays)
                    s =
                      i.allowEmptyArrays &&
                      ("" === n || (i.strictNullHandling && null === n))
                        ? []
                        : [].concat(n);
                  else {
                    s = i.plainObjects ? Object.create(null) : {};
                    var u =
                        "[" === a.charAt(0) && "]" === a.charAt(a.length - 1)
                          ? a.slice(1, -1)
                          : a,
                      l = i.decodeDotInKeys ? u.replace(/%2E/g, ".") : u,
                      c = parseInt(l, 10);
                    i.parseArrays || "" !== l
                      ? !isNaN(c) &&
                        a !== l &&
                        String(c) === l &&
                        c >= 0 &&
                        i.parseArrays &&
                        c <= i.arrayLimit
                        ? ((s = [])[c] = n)
                        : "__proto__" !== l && (s[l] = n)
                      : (s = { 0: n });
                  }
                  n = s;
                }
                return n;
              })(l, e, i, r);
            }
          };
        t.exports = function (t, e) {
          var i = (function (t) {
            if (!t) return s;
            if (
              void 0 !== t.allowEmptyArrays &&
              "boolean" != typeof t.allowEmptyArrays
            )
              throw new TypeError(
                "`allowEmptyArrays` option can only be `true` or `false`, when provided"
              );
            if (
              void 0 !== t.decodeDotInKeys &&
              "boolean" != typeof t.decodeDotInKeys
            )
              throw new TypeError(
                "`decodeDotInKeys` option can only be `true` or `false`, when provided"
              );
            if (
              null !== t.decoder &&
              void 0 !== t.decoder &&
              "function" != typeof t.decoder
            )
              throw new TypeError("Decoder has to be a function.");
            if (
              void 0 !== t.charset &&
              "utf-8" !== t.charset &&
              "iso-8859-1" !== t.charset
            )
              throw new TypeError(
                "The charset option must be either utf-8, iso-8859-1, or undefined"
              );
            var e = void 0 === t.charset ? s.charset : t.charset,
              i = void 0 === t.duplicates ? s.duplicates : t.duplicates;
            if ("combine" !== i && "first" !== i && "last" !== i)
              throw new TypeError(
                "The duplicates option must be either combine, first, or last"
              );
            return {
              allowDots:
                void 0 === t.allowDots
                  ? !0 === t.decodeDotInKeys || s.allowDots
                  : !!t.allowDots,
              allowEmptyArrays:
                "boolean" == typeof t.allowEmptyArrays
                  ? !!t.allowEmptyArrays
                  : s.allowEmptyArrays,
              allowPrototypes:
                "boolean" == typeof t.allowPrototypes
                  ? t.allowPrototypes
                  : s.allowPrototypes,
              allowSparse:
                "boolean" == typeof t.allowSparse
                  ? t.allowSparse
                  : s.allowSparse,
              arrayLimit:
                "number" == typeof t.arrayLimit ? t.arrayLimit : s.arrayLimit,
              charset: e,
              charsetSentinel:
                "boolean" == typeof t.charsetSentinel
                  ? t.charsetSentinel
                  : s.charsetSentinel,
              comma: "boolean" == typeof t.comma ? t.comma : s.comma,
              decodeDotInKeys:
                "boolean" == typeof t.decodeDotInKeys
                  ? t.decodeDotInKeys
                  : s.decodeDotInKeys,
              decoder: "function" == typeof t.decoder ? t.decoder : s.decoder,
              delimiter:
                "string" == typeof t.delimiter || r.isRegExp(t.delimiter)
                  ? t.delimiter
                  : s.delimiter,
              depth:
                "number" == typeof t.depth || !1 === t.depth
                  ? +t.depth
                  : s.depth,
              duplicates: i,
              ignoreQueryPrefix: !0 === t.ignoreQueryPrefix,
              interpretNumericEntities:
                "boolean" == typeof t.interpretNumericEntities
                  ? t.interpretNumericEntities
                  : s.interpretNumericEntities,
              parameterLimit:
                "number" == typeof t.parameterLimit
                  ? t.parameterLimit
                  : s.parameterLimit,
              parseArrays: !1 !== t.parseArrays,
              plainObjects:
                "boolean" == typeof t.plainObjects
                  ? t.plainObjects
                  : s.plainObjects,
              strictDepth:
                "boolean" == typeof t.strictDepth
                  ? !!t.strictDepth
                  : s.strictDepth,
              strictNullHandling:
                "boolean" == typeof t.strictNullHandling
                  ? t.strictNullHandling
                  : s.strictNullHandling,
            };
          })(e);
          if ("" === t || null == t)
            return i.plainObjects ? Object.create(null) : {};
          for (
            var l =
                "string" == typeof t
                  ? (function (t, e) {
                      var i = { __proto__: null },
                        u = e.ignoreQueryPrefix ? t.replace(/^\?/, "") : t;
                      u = u.replace(/%5B/gi, "[").replace(/%5D/gi, "]");
                      var l,
                        c =
                          e.parameterLimit === 1 / 0
                            ? void 0
                            : e.parameterLimit,
                        d = u.split(e.delimiter, c),
                        p = -1,
                        _ = e.charset;
                      if (e.charsetSentinel)
                        for (l = 0; l < d.length; ++l)
                          0 === d[l].indexOf("utf8=") &&
                            ("utf8=%E2%9C%93" === d[l]
                              ? (_ = "utf-8")
                              : "utf8=%26%2310003%3B" === d[l] &&
                                (_ = "iso-8859-1"),
                            (p = l),
                            (l = d.length));
                      for (l = 0; l < d.length; ++l)
                        if (l !== p) {
                          var f,
                            m,
                            y = d[l],
                            g = y.indexOf("]="),
                            v = -1 === g ? y.indexOf("=") : g + 1;
                          -1 === v
                            ? ((f = e.decoder(y, s.decoder, _, "key")),
                              (m = e.strictNullHandling ? null : ""))
                            : ((f = e.decoder(
                                y.slice(0, v),
                                s.decoder,
                                _,
                                "key"
                              )),
                              (m = r.maybeMap(
                                h(y.slice(v + 1), e),
                                function (t) {
                                  return e.decoder(t, s.decoder, _, "value");
                                }
                              ))),
                            m &&
                              e.interpretNumericEntities &&
                              "iso-8859-1" === _ &&
                              (m = a(m)),
                            y.indexOf("[]=") > -1 && (m = o(m) ? [m] : m);
                          var b = n.call(i, f);
                          b && "combine" === e.duplicates
                            ? (i[f] = r.combine(i[f], m))
                            : (b && "last" !== e.duplicates) || (i[f] = m);
                        }
                      return i;
                    })(t, i)
                  : t,
              c = i.plainObjects ? Object.create(null) : {},
              d = Object.keys(l),
              p = 0;
            p < d.length;
            ++p
          ) {
            var _ = d[p],
              f = u(_, l[_], i, "string" == typeof t);
            c = r.merge(c, f, i);
          }
          return !0 === i.allowSparse ? c : r.compact(c);
        };
      },
      636: (t, e, i) => {
        "use strict";
        var r = i(920),
          n = i(720),
          o = i(765),
          s = Object.prototype.hasOwnProperty,
          a = {
            brackets: function (t) {
              return t + "[]";
            },
            comma: "comma",
            indices: function (t, e) {
              return t + "[" + e + "]";
            },
            repeat: function (t) {
              return t;
            },
          },
          h = Array.isArray,
          u = Array.prototype.push,
          l = function (t, e) {
            u.apply(t, h(e) ? e : [e]);
          },
          c = Date.prototype.toISOString,
          d = o.default,
          p = {
            addQueryPrefix: !1,
            allowDots: !1,
            allowEmptyArrays: !1,
            arrayFormat: "indices",
            charset: "utf-8",
            charsetSentinel: !1,
            delimiter: "&",
            encode: !0,
            encodeDotInKeys: !1,
            encoder: n.encode,
            encodeValuesOnly: !1,
            format: d,
            formatter: o.formatters[d],
            indices: !1,
            serializeDate: function (t) {
              return c.call(t);
            },
            skipNulls: !1,
            strictNullHandling: !1,
          },
          _ = {},
          f = function t(e, i, o, s, a, u, c, d, f, m, y, g, v, b, x, w, T, A) {
            for (
              var S, E = e, C = A, M = 0, P = !1;
              void 0 !== (C = C.get(_)) && !P;

            ) {
              var B = C.get(e);
              if (((M += 1), void 0 !== B)) {
                if (B === M) throw new RangeError("Cyclic object value");
                P = !0;
              }
              void 0 === C.get(_) && (M = 0);
            }
            if (
              ("function" == typeof m
                ? (E = m(i, E))
                : E instanceof Date
                ? (E = v(E))
                : "comma" === o &&
                  h(E) &&
                  (E = n.maybeMap(E, function (t) {
                    return t instanceof Date ? v(t) : t;
                  })),
              null === E)
            ) {
              if (u) return f && !w ? f(i, p.encoder, T, "key", b) : i;
              E = "";
            }
            if (
              "string" == typeof (S = E) ||
              "number" == typeof S ||
              "boolean" == typeof S ||
              "symbol" == typeof S ||
              "bigint" == typeof S ||
              n.isBuffer(E)
            )
              return f
                ? [
                    x(w ? i : f(i, p.encoder, T, "key", b)) +
                      "=" +
                      x(f(E, p.encoder, T, "value", b)),
                  ]
                : [x(i) + "=" + x(String(E))];
            var O,
              R = [];
            if (void 0 === E) return R;
            if ("comma" === o && h(E))
              w && f && (E = n.maybeMap(E, f)),
                (O = [{ value: E.length > 0 ? E.join(",") || null : void 0 }]);
            else if (h(m)) O = m;
            else {
              var I = Object.keys(E);
              O = y ? I.sort(y) : I;
            }
            var k = d ? i.replace(/\./g, "%2E") : i,
              F = s && h(E) && 1 === E.length ? k + "[]" : k;
            if (a && h(E) && 0 === E.length) return F + "[]";
            for (var D = 0; D < O.length; ++D) {
              var N = O[D],
                L = "object" == typeof N && void 0 !== N.value ? N.value : E[N];
              if (!c || null !== L) {
                var U = g && d ? N.replace(/\./g, "%2E") : N,
                  G = h(E)
                    ? "function" == typeof o
                      ? o(F, U)
                      : F
                    : F + (g ? "." + U : "[" + U + "]");
                A.set(e, M);
                var V = r();
                V.set(_, A),
                  l(
                    R,
                    t(
                      L,
                      G,
                      o,
                      s,
                      a,
                      u,
                      c,
                      d,
                      "comma" === o && w && h(E) ? null : f,
                      m,
                      y,
                      g,
                      v,
                      b,
                      x,
                      w,
                      T,
                      V
                    )
                  );
              }
            }
            return R;
          };
        t.exports = function (t, e) {
          var i,
            n = t,
            u = (function (t) {
              if (!t) return p;
              if (
                void 0 !== t.allowEmptyArrays &&
                "boolean" != typeof t.allowEmptyArrays
              )
                throw new TypeError(
                  "`allowEmptyArrays` option can only be `true` or `false`, when provided"
                );
              if (
                void 0 !== t.encodeDotInKeys &&
                "boolean" != typeof t.encodeDotInKeys
              )
                throw new TypeError(
                  "`encodeDotInKeys` option can only be `true` or `false`, when provided"
                );
              if (
                null !== t.encoder &&
                void 0 !== t.encoder &&
                "function" != typeof t.encoder
              )
                throw new TypeError("Encoder has to be a function.");
              var e = t.charset || p.charset;
              if (
                void 0 !== t.charset &&
                "utf-8" !== t.charset &&
                "iso-8859-1" !== t.charset
              )
                throw new TypeError(
                  "The charset option must be either utf-8, iso-8859-1, or undefined"
                );
              var i = o.default;
              if (void 0 !== t.format) {
                if (!s.call(o.formatters, t.format))
                  throw new TypeError("Unknown format option provided.");
                i = t.format;
              }
              var r,
                n = o.formatters[i],
                u = p.filter;
              if (
                (("function" == typeof t.filter || h(t.filter)) &&
                  (u = t.filter),
                (r =
                  t.arrayFormat in a
                    ? t.arrayFormat
                    : "indices" in t
                    ? t.indices
                      ? "indices"
                      : "repeat"
                    : p.arrayFormat),
                "commaRoundTrip" in t && "boolean" != typeof t.commaRoundTrip)
              )
                throw new TypeError(
                  "`commaRoundTrip` must be a boolean, or absent"
                );
              var l =
                void 0 === t.allowDots
                  ? !0 === t.encodeDotInKeys || p.allowDots
                  : !!t.allowDots;
              return {
                addQueryPrefix:
                  "boolean" == typeof t.addQueryPrefix
                    ? t.addQueryPrefix
                    : p.addQueryPrefix,
                allowDots: l,
                allowEmptyArrays:
                  "boolean" == typeof t.allowEmptyArrays
                    ? !!t.allowEmptyArrays
                    : p.allowEmptyArrays,
                arrayFormat: r,
                charset: e,
                charsetSentinel:
                  "boolean" == typeof t.charsetSentinel
                    ? t.charsetSentinel
                    : p.charsetSentinel,
                commaRoundTrip: t.commaRoundTrip,
                delimiter: void 0 === t.delimiter ? p.delimiter : t.delimiter,
                encode: "boolean" == typeof t.encode ? t.encode : p.encode,
                encodeDotInKeys:
                  "boolean" == typeof t.encodeDotInKeys
                    ? t.encodeDotInKeys
                    : p.encodeDotInKeys,
                encoder: "function" == typeof t.encoder ? t.encoder : p.encoder,
                encodeValuesOnly:
                  "boolean" == typeof t.encodeValuesOnly
                    ? t.encodeValuesOnly
                    : p.encodeValuesOnly,
                filter: u,
                format: i,
                formatter: n,
                serializeDate:
                  "function" == typeof t.serializeDate
                    ? t.serializeDate
                    : p.serializeDate,
                skipNulls:
                  "boolean" == typeof t.skipNulls ? t.skipNulls : p.skipNulls,
                sort: "function" == typeof t.sort ? t.sort : null,
                strictNullHandling:
                  "boolean" == typeof t.strictNullHandling
                    ? t.strictNullHandling
                    : p.strictNullHandling,
              };
            })(e);
          "function" == typeof u.filter
            ? (n = (0, u.filter)("", n))
            : h(u.filter) && (i = u.filter);
          var c = [];
          if ("object" != typeof n || null === n) return "";
          var d = a[u.arrayFormat],
            _ = "comma" === d && u.commaRoundTrip;
          i || (i = Object.keys(n)), u.sort && i.sort(u.sort);
          for (var m = r(), y = 0; y < i.length; ++y) {
            var g = i[y];
            (u.skipNulls && null === n[g]) ||
              l(
                c,
                f(
                  n[g],
                  g,
                  d,
                  _,
                  u.allowEmptyArrays,
                  u.strictNullHandling,
                  u.skipNulls,
                  u.encodeDotInKeys,
                  u.encode ? u.encoder : null,
                  u.filter,
                  u.sort,
                  u.allowDots,
                  u.serializeDate,
                  u.format,
                  u.formatter,
                  u.encodeValuesOnly,
                  u.charset,
                  m
                )
              );
          }
          var v = c.join(u.delimiter),
            b = !0 === u.addQueryPrefix ? "?" : "";
          return (
            u.charsetSentinel &&
              ("iso-8859-1" === u.charset
                ? (b += "utf8=%26%2310003%3B&")
                : (b += "utf8=%E2%9C%93&")),
            v.length > 0 ? b + v : ""
          );
        };
      },
      720: (t, e, i) => {
        "use strict";
        var r = i(765),
          n = Object.prototype.hasOwnProperty,
          o = Array.isArray,
          s = (function () {
            for (var t = [], e = 0; e < 256; ++e)
              t.push(
                "%" + ((e < 16 ? "0" : "") + e.toString(16)).toUpperCase()
              );
            return t;
          })(),
          a = function (t, e) {
            for (
              var i = e && e.plainObjects ? Object.create(null) : {}, r = 0;
              r < t.length;
              ++r
            )
              void 0 !== t[r] && (i[r] = t[r]);
            return i;
          },
          h = 1024;
        t.exports = {
          arrayToObject: a,
          assign: function (t, e) {
            return Object.keys(e).reduce(function (t, i) {
              return (t[i] = e[i]), t;
            }, t);
          },
          combine: function (t, e) {
            return [].concat(t, e);
          },
          compact: function (t) {
            for (
              var e = [{ obj: { o: t }, prop: "o" }], i = [], r = 0;
              r < e.length;
              ++r
            )
              for (
                var n = e[r], s = n.obj[n.prop], a = Object.keys(s), h = 0;
                h < a.length;
                ++h
              ) {
                var u = a[h],
                  l = s[u];
                "object" == typeof l &&
                  null !== l &&
                  -1 === i.indexOf(l) &&
                  (e.push({ obj: s, prop: u }), i.push(l));
              }
            return (
              (function (t) {
                for (; t.length > 1; ) {
                  var e = t.pop(),
                    i = e.obj[e.prop];
                  if (o(i)) {
                    for (var r = [], n = 0; n < i.length; ++n)
                      void 0 !== i[n] && r.push(i[n]);
                    e.obj[e.prop] = r;
                  }
                }
              })(e),
              t
            );
          },
          decode: function (t, e, i) {
            var r = t.replace(/\+/g, " ");
            if ("iso-8859-1" === i)
              return r.replace(/%[0-9a-f]{2}/gi, unescape);
            try {
              return decodeURIComponent(r);
            } catch (t) {
              return r;
            }
          },
          encode: function (t, e, i, n, o) {
            if (0 === t.length) return t;
            var a = t;
            if (
              ("symbol" == typeof t
                ? (a = Symbol.prototype.toString.call(t))
                : "string" != typeof t && (a = String(t)),
              "iso-8859-1" === i)
            )
              return escape(a).replace(/%u[0-9a-f]{4}/gi, function (t) {
                return "%26%23" + parseInt(t.slice(2), 16) + "%3B";
              });
            for (var u = "", l = 0; l < a.length; l += h) {
              for (
                var c = a.length >= h ? a.slice(l, l + h) : a, d = [], p = 0;
                p < c.length;
                ++p
              ) {
                var _ = c.charCodeAt(p);
                45 === _ ||
                46 === _ ||
                95 === _ ||
                126 === _ ||
                (_ >= 48 && _ <= 57) ||
                (_ >= 65 && _ <= 90) ||
                (_ >= 97 && _ <= 122) ||
                (o === r.RFC1738 && (40 === _ || 41 === _))
                  ? (d[d.length] = c.charAt(p))
                  : _ < 128
                  ? (d[d.length] = s[_])
                  : _ < 2048
                  ? (d[d.length] = s[192 | (_ >> 6)] + s[128 | (63 & _)])
                  : _ < 55296 || _ >= 57344
                  ? (d[d.length] =
                      s[224 | (_ >> 12)] +
                      s[128 | ((_ >> 6) & 63)] +
                      s[128 | (63 & _)])
                  : ((p += 1),
                    (_ =
                      65536 + (((1023 & _) << 10) | (1023 & c.charCodeAt(p)))),
                    (d[d.length] =
                      s[240 | (_ >> 18)] +
                      s[128 | ((_ >> 12) & 63)] +
                      s[128 | ((_ >> 6) & 63)] +
                      s[128 | (63 & _)]));
              }
              u += d.join("");
            }
            return u;
          },
          isBuffer: function (t) {
            return !(
              !t ||
              "object" != typeof t ||
              !(
                t.constructor &&
                t.constructor.isBuffer &&
                t.constructor.isBuffer(t)
              )
            );
          },
          isRegExp: function (t) {
            return "[object RegExp]" === Object.prototype.toString.call(t);
          },
          maybeMap: function (t, e) {
            if (o(t)) {
              for (var i = [], r = 0; r < t.length; r += 1) i.push(e(t[r]));
              return i;
            }
            return e(t);
          },
          merge: function t(e, i, r) {
            if (!i) return e;
            if ("object" != typeof i) {
              if (o(e)) e.push(i);
              else {
                if (!e || "object" != typeof e) return [e, i];
                ((r && (r.plainObjects || r.allowPrototypes)) ||
                  !n.call(Object.prototype, i)) &&
                  (e[i] = !0);
              }
              return e;
            }
            if (!e || "object" != typeof e) return [e].concat(i);
            var s = e;
            return (
              o(e) && !o(i) && (s = a(e, r)),
              o(e) && o(i)
                ? (i.forEach(function (i, o) {
                    if (n.call(e, o)) {
                      var s = e[o];
                      s && "object" == typeof s && i && "object" == typeof i
                        ? (e[o] = t(s, i, r))
                        : e.push(i);
                    } else e[o] = i;
                  }),
                  e)
                : Object.keys(i).reduce(function (e, o) {
                    var s = i[o];
                    return (
                      n.call(e, o) ? (e[o] = t(e[o], s, r)) : (e[o] = s), e
                    );
                  }, s)
            );
          },
        };
      },
      897: (t, e, i) => {
        "use strict";
        var r = i(453),
          n = i(41),
          o = i(592)(),
          s = i(795),
          a = i(675),
          h = r("%Math.floor%");
        t.exports = function (t, e) {
          if ("function" != typeof t) throw new a("`fn` is not a function");
          if ("number" != typeof e || e < 0 || e > 4294967295 || h(e) !== e)
            throw new a("`length` must be a positive 32-bit integer");
          var i = arguments.length > 2 && !!arguments[2],
            r = !0,
            u = !0;
          if ("length" in t && s) {
            var l = s(t, "length");
            l && !l.configurable && (r = !1), l && !l.writable && (u = !1);
          }
          return (
            (r || u || !i) &&
              (o ? n(t, "length", e, !0, !0) : n(t, "length", e)),
            t
          );
        };
      },
      920: (t, e, i) => {
        "use strict";
        var r = i(453),
          n = i(75),
          o = i(859),
          s = i(675),
          a = r("%WeakMap%", !0),
          h = r("%Map%", !0),
          u = n("WeakMap.prototype.get", !0),
          l = n("WeakMap.prototype.set", !0),
          c = n("WeakMap.prototype.has", !0),
          d = n("Map.prototype.get", !0),
          p = n("Map.prototype.set", !0),
          _ = n("Map.prototype.has", !0),
          f = function (t, e) {
            for (var i, r = t; null !== (i = r.next); r = i)
              if (i.key === e)
                return (r.next = i.next), (i.next = t.next), (t.next = i), i;
          };
        t.exports = function () {
          var t,
            e,
            i,
            r = {
              assert: function (t) {
                if (!r.has(t))
                  throw new s("Side channel does not contain " + o(t));
              },
              get: function (r) {
                if (
                  a &&
                  r &&
                  ("object" == typeof r || "function" == typeof r)
                ) {
                  if (t) return u(t, r);
                } else if (h) {
                  if (e) return d(e, r);
                } else if (i)
                  return (function (t, e) {
                    var i = f(t, e);
                    return i && i.value;
                  })(i, r);
              },
              has: function (r) {
                if (
                  a &&
                  r &&
                  ("object" == typeof r || "function" == typeof r)
                ) {
                  if (t) return c(t, r);
                } else if (h) {
                  if (e) return _(e, r);
                } else if (i)
                  return (function (t, e) {
                    return !!f(t, e);
                  })(i, r);
                return !1;
              },
              set: function (r, n) {
                a && r && ("object" == typeof r || "function" == typeof r)
                  ? (t || (t = new a()), l(t, r, n))
                  : h
                  ? (e || (e = new h()), p(e, r, n))
                  : (i || (i = { key: {}, next: null }),
                    (function (t, e, i) {
                      var r = f(t, e);
                      r
                        ? (r.value = i)
                        : (t.next = { key: e, next: t.next, value: i });
                    })(i, r, n));
              },
            };
          return r;
        };
      },
      66: function (t, e, i) {
        var r;
        !(function () {
          function n(t, e, i, r, n) {
            (this._listener = e),
              (this._isOnce = i),
              (this.context = r),
              (this._signal = t),
              (this._priority = n || 0);
          }
          function o(t, e) {
            if ("function" != typeof t)
              throw new Error(
                "listener is a required param of {fn}() and should be a Function.".replace(
                  "{fn}",
                  e
                )
              );
          }
          function s() {
            (this._bindings = []), (this._prevParams = null);
            var t = this;
            this.dispatch = function () {
              s.prototype.dispatch.apply(t, arguments);
            };
          }
          (n.prototype = {
            active: !0,
            params: null,
            execute: function (t) {
              var e, i;
              return (
                this.active &&
                  this._listener &&
                  ((i = this.params ? this.params.concat(t) : t),
                  (e = this._listener.apply(this.context, i)),
                  this._isOnce && this.detach()),
                e
              );
            },
            detach: function () {
              return this.isBound()
                ? this._signal.remove(this._listener, this.context)
                : null;
            },
            isBound: function () {
              return !!this._signal && !!this._listener;
            },
            isOnce: function () {
              return this._isOnce;
            },
            getListener: function () {
              return this._listener;
            },
            getSignal: function () {
              return this._signal;
            },
            _destroy: function () {
              delete this._signal, delete this._listener, delete this.context;
            },
            toString: function () {
              return (
                "[SignalBinding isOnce:" +
                this._isOnce +
                ", isBound:" +
                this.isBound() +
                ", active:" +
                this.active +
                "]"
              );
            },
          }),
            (s.prototype = {
              VERSION: "1.0.0",
              memorize: !1,
              _shouldPropagate: !0,
              active: !0,
              _registerListener: function (t, e, i, r) {
                var o,
                  s = this._indexOfListener(t, i);
                if (-1 !== s) {
                  if ((o = this._bindings[s]).isOnce() !== e)
                    throw new Error(
                      "You cannot add" +
                        (e ? "" : "Once") +
                        "() then add" +
                        (e ? "Once" : "") +
                        "() the same listener without removing the relationship first."
                    );
                } else (o = new n(this, t, e, i, r)), this._addBinding(o);
                return (
                  this.memorize &&
                    this._prevParams &&
                    o.execute(this._prevParams),
                  o
                );
              },
              _addBinding: function (t) {
                var e = this._bindings.length;
                do {
                  --e;
                } while (
                  this._bindings[e] &&
                  t._priority <= this._bindings[e]._priority
                );
                this._bindings.splice(e + 1, 0, t);
              },
              _indexOfListener: function (t, e) {
                for (var i, r = this._bindings.length; r--; )
                  if (
                    (i = this._bindings[r])._listener === t &&
                    i.context === e
                  )
                    return r;
                return -1;
              },
              has: function (t, e) {
                return -1 !== this._indexOfListener(t, e);
              },
              add: function (t, e, i) {
                return o(t, "add"), this._registerListener(t, !1, e, i);
              },
              addOnce: function (t, e, i) {
                return o(t, "addOnce"), this._registerListener(t, !0, e, i);
              },
              remove: function (t, e) {
                o(t, "remove");
                var i = this._indexOfListener(t, e);
                return (
                  -1 !== i &&
                    (this._bindings[i]._destroy(), this._bindings.splice(i, 1)),
                  t
                );
              },
              removeAll: function () {
                for (var t = this._bindings.length; t--; )
                  this._bindings[t]._destroy();
                this._bindings.length = 0;
              },
              getNumListeners: function () {
                return this._bindings.length;
              },
              halt: function () {
                this._shouldPropagate = !1;
              },
              dispatch: function (t) {
                if (this.active) {
                  var e,
                    i = Array.prototype.slice.call(arguments),
                    r = this._bindings.length;
                  if ((this.memorize && (this._prevParams = i), r)) {
                    (e = this._bindings.slice()), (this._shouldPropagate = !0);
                    do {
                      r--;
                    } while (
                      e[r] &&
                      this._shouldPropagate &&
                      !1 !== e[r].execute(i)
                    );
                  }
                }
              },
              forget: function () {
                this._prevParams = null;
              },
              dispose: function () {
                this.removeAll(),
                  delete this._bindings,
                  delete this._prevParams;
              },
              toString: function () {
                return (
                  "[Signal active:" +
                  this.active +
                  " numListeners:" +
                  this.getNumListeners() +
                  "]"
                );
              },
            });
          var a = s;
          (a.Signal = s),
            void 0 ===
              (r = function () {
                return a;
              }.call(e, i, e, t)) || (t.exports = r);
        })();
      },
      835: (t, e, i) => {
        "use strict";
        var r = i(655);
        function n() {
          (this.protocol = null),
            (this.slashes = null),
            (this.auth = null),
            (this.host = null),
            (this.port = null),
            (this.hostname = null),
            (this.hash = null),
            (this.search = null),
            (this.query = null),
            (this.pathname = null),
            (this.path = null),
            (this.href = null);
        }
        var o = /^([a-z0-9.+-]+:)/i,
          s = /:[0-9]*$/,
          a = /^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,
          h = ["{", "}", "|", "\\", "^", "`"].concat([
            "<",
            ">",
            '"',
            "`",
            " ",
            "\r",
            "\n",
            "\t",
          ]),
          u = ["'"].concat(h),
          l = ["%", "/", "?", ";", "#"].concat(u),
          c = ["/", "?", "#"],
          d = /^[+a-z0-9A-Z_-]{0,63}$/,
          p = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,
          _ = { javascript: !0, "javascript:": !0 },
          f = { javascript: !0, "javascript:": !0 },
          m = {
            http: !0,
            https: !0,
            ftp: !0,
            gopher: !0,
            file: !0,
            "http:": !0,
            "https:": !0,
            "ftp:": !0,
            "gopher:": !0,
            "file:": !0,
          },
          y = i(373);
        function g(t, e, i) {
          if (t && "object" == typeof t && t instanceof n) return t;
          var r = new n();
          return r.parse(t, e, i), r;
        }
        (n.prototype.parse = function (t, e, i) {
          if ("string" != typeof t)
            throw new TypeError(
              "Parameter 'url' must be a string, not " + typeof t
            );
          var n = t.indexOf("?"),
            s = -1 !== n && n < t.indexOf("#") ? "?" : "#",
            h = t.split(s);
          h[0] = h[0].replace(/\\/g, "/");
          var g = (t = h.join(s));
          if (((g = g.trim()), !i && 1 === t.split("#").length)) {
            var v = a.exec(g);
            if (v)
              return (
                (this.path = g),
                (this.href = g),
                (this.pathname = v[1]),
                v[2]
                  ? ((this.search = v[2]),
                    (this.query = e
                      ? y.parse(this.search.substr(1))
                      : this.search.substr(1)))
                  : e && ((this.search = ""), (this.query = {})),
                this
              );
          }
          var b = o.exec(g);
          if (b) {
            var x = (b = b[0]).toLowerCase();
            (this.protocol = x), (g = g.substr(b.length));
          }
          if (i || b || g.match(/^\/\/[^@/]+@[^@/]+/)) {
            var w = "//" === g.substr(0, 2);
            !w || (b && f[b]) || ((g = g.substr(2)), (this.slashes = !0));
          }
          if (!f[b] && (w || (b && !m[b]))) {
            for (var T, A, S = -1, E = 0; E < c.length; E++)
              -1 !== (C = g.indexOf(c[E])) && (-1 === S || C < S) && (S = C);
            for (
              -1 !==
                (A = -1 === S ? g.lastIndexOf("@") : g.lastIndexOf("@", S)) &&
                ((T = g.slice(0, A)),
                (g = g.slice(A + 1)),
                (this.auth = decodeURIComponent(T))),
                S = -1,
                E = 0;
              E < l.length;
              E++
            ) {
              var C;
              -1 !== (C = g.indexOf(l[E])) && (-1 === S || C < S) && (S = C);
            }
            -1 === S && (S = g.length),
              (this.host = g.slice(0, S)),
              (g = g.slice(S)),
              this.parseHost(),
              (this.hostname = this.hostname || "");
            var M =
              "[" === this.hostname[0] &&
              "]" === this.hostname[this.hostname.length - 1];
            if (!M)
              for (
                var P = this.hostname.split(/\./), B = ((E = 0), P.length);
                E < B;
                E++
              ) {
                var O = P[E];
                if (O && !O.match(d)) {
                  for (var R = "", I = 0, k = O.length; I < k; I++)
                    O.charCodeAt(I) > 127 ? (R += "x") : (R += O[I]);
                  if (!R.match(d)) {
                    var F = P.slice(0, E),
                      D = P.slice(E + 1),
                      N = O.match(p);
                    N && (F.push(N[1]), D.unshift(N[2])),
                      D.length && (g = "/" + D.join(".") + g),
                      (this.hostname = F.join("."));
                    break;
                  }
                }
              }
            this.hostname.length > 255
              ? (this.hostname = "")
              : (this.hostname = this.hostname.toLowerCase()),
              M || (this.hostname = r.toASCII(this.hostname));
            var L = this.port ? ":" + this.port : "",
              U = this.hostname || "";
            (this.host = U + L),
              (this.href += this.host),
              M &&
                ((this.hostname = this.hostname.substr(
                  1,
                  this.hostname.length - 2
                )),
                "/" !== g[0] && (g = "/" + g));
          }
          if (!_[x])
            for (E = 0, B = u.length; E < B; E++) {
              var G = u[E];
              if (-1 !== g.indexOf(G)) {
                var V = encodeURIComponent(G);
                V === G && (V = escape(G)), (g = g.split(G).join(V));
              }
            }
          var j = g.indexOf("#");
          -1 !== j && ((this.hash = g.substr(j)), (g = g.slice(0, j)));
          var z = g.indexOf("?");
          if (
            (-1 !== z
              ? ((this.search = g.substr(z)),
                (this.query = g.substr(z + 1)),
                e && (this.query = y.parse(this.query)),
                (g = g.slice(0, z)))
              : e && ((this.search = ""), (this.query = {})),
            g && (this.pathname = g),
            m[x] && this.hostname && !this.pathname && (this.pathname = "/"),
            this.pathname || this.search)
          ) {
            L = this.pathname || "";
            var X = this.search || "";
            this.path = L + X;
          }
          return (this.href = this.format()), this;
        }),
          (n.prototype.format = function () {
            var t = this.auth || "";
            t &&
              ((t = (t = encodeURIComponent(t)).replace(/%3A/i, ":")),
              (t += "@"));
            var e = this.protocol || "",
              i = this.pathname || "",
              r = this.hash || "",
              n = !1,
              o = "";
            this.host
              ? (n = t + this.host)
              : this.hostname &&
                ((n =
                  t +
                  (-1 === this.hostname.indexOf(":")
                    ? this.hostname
                    : "[" + this.hostname + "]")),
                this.port && (n += ":" + this.port)),
              this.query &&
                "object" == typeof this.query &&
                Object.keys(this.query).length &&
                (o = y.stringify(this.query, {
                  arrayFormat: "repeat",
                  addQueryPrefix: !1,
                }));
            var s = this.search || (o && "?" + o) || "";
            return (
              e && ":" !== e.substr(-1) && (e += ":"),
              this.slashes || ((!e || m[e]) && !1 !== n)
                ? ((n = "//" + (n || "")),
                  i && "/" !== i.charAt(0) && (i = "/" + i))
                : n || (n = ""),
              r && "#" !== r.charAt(0) && (r = "#" + r),
              s && "?" !== s.charAt(0) && (s = "?" + s),
              e +
                n +
                (i = i.replace(/[?#]/g, function (t) {
                  return encodeURIComponent(t);
                })) +
                (s = s.replace("#", "%23")) +
                r
            );
          }),
          (n.prototype.resolve = function (t) {
            return this.resolveObject(g(t, !1, !0)).format();
          }),
          (n.prototype.resolveObject = function (t) {
            if ("string" == typeof t) {
              var e = new n();
              e.parse(t, !1, !0), (t = e);
            }
            for (
              var i = new n(), r = Object.keys(this), o = 0;
              o < r.length;
              o++
            ) {
              var s = r[o];
              i[s] = this[s];
            }
            if (((i.hash = t.hash), "" === t.href))
              return (i.href = i.format()), i;
            if (t.slashes && !t.protocol) {
              for (var a = Object.keys(t), h = 0; h < a.length; h++) {
                var u = a[h];
                "protocol" !== u && (i[u] = t[u]);
              }
              return (
                m[i.protocol] &&
                  i.hostname &&
                  !i.pathname &&
                  ((i.pathname = "/"), (i.path = i.pathname)),
                (i.href = i.format()),
                i
              );
            }
            if (t.protocol && t.protocol !== i.protocol) {
              if (!m[t.protocol]) {
                for (var l = Object.keys(t), c = 0; c < l.length; c++) {
                  var d = l[c];
                  i[d] = t[d];
                }
                return (i.href = i.format()), i;
              }
              if (((i.protocol = t.protocol), t.host || f[t.protocol]))
                i.pathname = t.pathname;
              else {
                for (
                  var p = (t.pathname || "").split("/");
                  p.length && !(t.host = p.shift());

                );
                t.host || (t.host = ""),
                  t.hostname || (t.hostname = ""),
                  "" !== p[0] && p.unshift(""),
                  p.length < 2 && p.unshift(""),
                  (i.pathname = p.join("/"));
              }
              if (
                ((i.search = t.search),
                (i.query = t.query),
                (i.host = t.host || ""),
                (i.auth = t.auth),
                (i.hostname = t.hostname || t.host),
                (i.port = t.port),
                i.pathname || i.search)
              ) {
                var _ = i.pathname || "",
                  y = i.search || "";
                i.path = _ + y;
              }
              return (
                (i.slashes = i.slashes || t.slashes), (i.href = i.format()), i
              );
            }
            var g = i.pathname && "/" === i.pathname.charAt(0),
              v = t.host || (t.pathname && "/" === t.pathname.charAt(0)),
              b = v || g || (i.host && t.pathname),
              x = b,
              w = (i.pathname && i.pathname.split("/")) || [],
              T =
                ((p = (t.pathname && t.pathname.split("/")) || []),
                i.protocol && !m[i.protocol]);
            if (
              (T &&
                ((i.hostname = ""),
                (i.port = null),
                i.host && ("" === w[0] ? (w[0] = i.host) : w.unshift(i.host)),
                (i.host = ""),
                t.protocol &&
                  ((t.hostname = null),
                  (t.port = null),
                  t.host && ("" === p[0] ? (p[0] = t.host) : p.unshift(t.host)),
                  (t.host = null)),
                (b = b && ("" === p[0] || "" === w[0]))),
              v)
            )
              (i.host = t.host || "" === t.host ? t.host : i.host),
                (i.hostname =
                  t.hostname || "" === t.hostname ? t.hostname : i.hostname),
                (i.search = t.search),
                (i.query = t.query),
                (w = p);
            else if (p.length)
              w || (w = []),
                w.pop(),
                (w = w.concat(p)),
                (i.search = t.search),
                (i.query = t.query);
            else if (null != t.search)
              return (
                T &&
                  ((i.host = w.shift()),
                  (i.hostname = i.host),
                  (M =
                    !!(i.host && i.host.indexOf("@") > 0) &&
                    i.host.split("@")) &&
                    ((i.auth = M.shift()),
                    (i.hostname = M.shift()),
                    (i.host = i.hostname))),
                (i.search = t.search),
                (i.query = t.query),
                (null === i.pathname && null === i.search) ||
                  (i.path =
                    (i.pathname ? i.pathname : "") +
                    (i.search ? i.search : "")),
                (i.href = i.format()),
                i
              );
            if (!w.length)
              return (
                (i.pathname = null),
                i.search ? (i.path = "/" + i.search) : (i.path = null),
                (i.href = i.format()),
                i
              );
            for (
              var A = w.slice(-1)[0],
                S =
                  ((i.host || t.host || w.length > 1) &&
                    ("." === A || ".." === A)) ||
                  "" === A,
                E = 0,
                C = w.length;
              C >= 0;
              C--
            )
              "." === (A = w[C])
                ? w.splice(C, 1)
                : ".." === A
                ? (w.splice(C, 1), E++)
                : E && (w.splice(C, 1), E--);
            if (!b && !x) for (; E--; E) w.unshift("..");
            !b ||
              "" === w[0] ||
              (w[0] && "/" === w[0].charAt(0)) ||
              w.unshift(""),
              S && "/" !== w.join("/").substr(-1) && w.push("");
            var M,
              P = "" === w[0] || (w[0] && "/" === w[0].charAt(0));
            return (
              T &&
                ((i.hostname = P ? "" : w.length ? w.shift() : ""),
                (i.host = i.hostname),
                (M =
                  !!(i.host && i.host.indexOf("@") > 0) && i.host.split("@")) &&
                  ((i.auth = M.shift()),
                  (i.hostname = M.shift()),
                  (i.host = i.hostname))),
              (b = b || (i.host && w.length)) && !P && w.unshift(""),
              w.length > 0
                ? (i.pathname = w.join("/"))
                : ((i.pathname = null), (i.path = null)),
              (null === i.pathname && null === i.search) ||
                (i.path =
                  (i.pathname ? i.pathname : "") + (i.search ? i.search : "")),
              (i.auth = t.auth || i.auth),
              (i.slashes = i.slashes || t.slashes),
              (i.href = i.format()),
              i
            );
          }),
          (n.prototype.parseHost = function () {
            var t = this.host,
              e = s.exec(t);
            e &&
              (":" !== (e = e[0]) && (this.port = e.substr(1)),
              (t = t.substr(0, t.length - e.length))),
              t && (this.hostname = t);
          }),
          (e.qg = g),
          (e.hd = function (t, e) {
            return g(t, !1, !0).resolve(e);
          }),
          (e.GP = function (t) {
            return (
              "string" == typeof t && (t = g(t)),
              t instanceof n ? t.format() : n.prototype.format.call(t)
            );
          });
      },
      634: () => {},
    },
    e = {};
  function i(r) {
    var n = e[r];
    if (void 0 !== n) return n.exports;
    var o = (e[r] = { id: r, loaded: !1, exports: {} });
    return t[r].call(o.exports, o, o.exports, i), (o.loaded = !0), o.exports;
  }
  (i.n = (t) => {
    var e = t && t.__esModule ? () => t.default : () => t;
    return i.d(e, { a: e }), e;
  }),
    (i.d = (t, e) => {
      for (var r in e)
        i.o(e, r) &&
          !i.o(t, r) &&
          Object.defineProperty(t, r, { enumerable: !0, get: e[r] });
    }),
    (i.g = (function () {
      if ("object" == typeof globalThis) return globalThis;
      try {
        return this || new Function("return this")();
      } catch (t) {
        if ("object" == typeof window) return window;
      }
    })()),
    (i.o = (t, e) => Object.prototype.hasOwnProperty.call(t, e)),
    (i.r = (t) => {
      "undefined" != typeof Symbol &&
        Symbol.toStringTag &&
        Object.defineProperty(t, Symbol.toStringTag, { value: "Module" }),
        Object.defineProperty(t, "__esModule", { value: !0 });
    }),
    (i.nmd = (t) => ((t.paths = []), t.children || (t.children = []), t)),
    (() => {
      "use strict";
      var t = {};
      i.r(t),
        i.d(t, {
          AABB: () => od,
          Body: () => Lp,
          Box: () => Ig,
          BoxShape: () => Rg,
          BroadPhase: () => bd,
          Chain: () => Mm,
          ChainShape: () => Cm,
          Circle: () => qm,
          CircleShape: () => Wm,
          ClipVertex: () => ff,
          CollideCircles: () => Ng,
          CollideEdgeCircle: () => Hg,
          CollideEdgePolygon: () => jv,
          CollidePolygonCircle: () => _v,
          CollidePolygons: () => lv,
          Contact: () => hm,
          ContactEdge: () => Bf,
          ContactFeatureType: () => ef,
          ContactID: () => gf,
          ContactImpulse: () => Z_,
          DataDriver: () => Xv,
          Distance: () => e_,
          DistanceInput: () => Zp,
          DistanceJoint: () => ey,
          DistanceOutput: () => Qp,
          DistanceProxy: () => i_,
          DynamicTree: () => fd,
          Edge: () => xm,
          EdgeShape: () => bm,
          Fixture: () => Cp,
          FixtureProxy: () => Ep,
          FrictionJoint: () => ay,
          GearJoint: () => Ry,
          Joint: () => Vp,
          JointEdge: () => Gp,
          Manifold: () => mf,
          ManifoldPoint: () => yf,
          ManifoldType: () => tf,
          Mat22: () => of,
          Mat33: () => uy,
          Math: () => Wc,
          MotorJoint: () => Ly,
          MouseJoint: () => Hy,
          PointState: () => rf,
          Polygon: () => Vm,
          PolygonShape: () => Gm,
          PrismaticJoint: () => Ey,
          PulleyJoint: () => Zy,
          RevoluteJoint: () => my,
          RopeJoint: () => og,
          Rot: () => sp,
          Serializer: () => Eg,
          Settings: () => ad,
          SettingsInternal: () => hd,
          Shape: () => bp,
          ShapeCast: () => f_,
          ShapeCastInput: () => p_,
          ShapeCastOutput: () => __,
          SimplexCache: () => t_,
          Solver: () => Q_,
          Sweep: () => cp,
          TOIInput: () => v_,
          TOIOutput: () => b_,
          TOIOutputState: () => d_,
          Testbed: () => Mg,
          TimeOfImpact: () => F_,
          TimeStep: () => j_,
          Transform: () => _p,
          TreeNode: () => pd,
          Vec2: () => td,
          Vec3: () => fm,
          VelocityConstraintPoint: () => Ff,
          WeldJoint: () => dg,
          WheelJoint: () => vg,
          World: () => dm,
          WorldManifold: () => vf,
          clipSegmentToLine: () => xf,
          getPointStates: () => bf,
          internal: () => zv,
          mixFriction: () => Of,
          mixRestitution: () => Rf,
          stats: () => jp,
          testOverlap: () => c_,
          testbed: () => Pg,
        });
      function e(t, e) {
        (this.name = "AggregateError"),
          (this.errors = t),
          (this.message = e || "");
      }
      e.prototype = Error.prototype;
      var r = setTimeout;
      function n(t) {
        return Boolean(t && void 0 !== t.length);
      }
      function o() {}
      function s(t) {
        if (!(this instanceof s))
          throw new TypeError("Promises must be constructed via new");
        if ("function" != typeof t) throw new TypeError("not a function");
        (this._state = 0),
          (this._handled = !1),
          (this._value = void 0),
          (this._deferreds = []),
          d(t, this);
      }
      function a(t, e) {
        for (; 3 === t._state; ) t = t._value;
        0 !== t._state
          ? ((t._handled = !0),
            s._immediateFn(function () {
              var i = 1 === t._state ? e.onFulfilled : e.onRejected;
              if (null !== i) {
                var r;
                try {
                  r = i(t._value);
                } catch (t) {
                  return void u(e.promise, t);
                }
                h(e.promise, r);
              } else (1 === t._state ? h : u)(e.promise, t._value);
            }))
          : t._deferreds.push(e);
      }
      function h(t, e) {
        try {
          if (e === t)
            throw new TypeError("A promise cannot be resolved with itself.");
          if (e && ("object" == typeof e || "function" == typeof e)) {
            var i = e.then;
            if (e instanceof s)
              return (t._state = 3), (t._value = e), void l(t);
            if ("function" == typeof i)
              return void d(
                ((r = i),
                (n = e),
                function () {
                  r.apply(n, arguments);
                }),
                t
              );
          }
          (t._state = 1), (t._value = e), l(t);
        } catch (e) {
          u(t, e);
        }
        var r, n;
      }
      function u(t, e) {
        (t._state = 2), (t._value = e), l(t);
      }
      function l(t) {
        2 === t._state &&
          0 === t._deferreds.length &&
          s._immediateFn(function () {
            t._handled || s._unhandledRejectionFn(t._value);
          });
        for (var e = 0, i = t._deferreds.length; e < i; e++)
          a(t, t._deferreds[e]);
        t._deferreds = null;
      }
      function c(t, e, i) {
        (this.onFulfilled = "function" == typeof t ? t : null),
          (this.onRejected = "function" == typeof e ? e : null),
          (this.promise = i);
      }
      function d(t, e) {
        var i = !1;
        try {
          t(
            function (t) {
              i || ((i = !0), h(e, t));
            },
            function (t) {
              i || ((i = !0), u(e, t));
            }
          );
        } catch (t) {
          if (i) return;
          (i = !0), u(e, t);
        }
      }
      (s.prototype.catch = function (t) {
        return this.then(null, t);
      }),
        (s.prototype.then = function (t, e) {
          var i = new this.constructor(o);
          return a(this, new c(t, e, i)), i;
        }),
        (s.prototype.finally = function (t) {
          var e = this.constructor;
          return this.then(
            function (i) {
              return e.resolve(t()).then(function () {
                return i;
              });
            },
            function (i) {
              return e.resolve(t()).then(function () {
                return e.reject(i);
              });
            }
          );
        }),
        (s.all = function (t) {
          return new s(function (e, i) {
            if (!n(t)) return i(new TypeError("Promise.all accepts an array"));
            var r = Array.prototype.slice.call(t);
            if (0 === r.length) return e([]);
            var o = r.length;
            function s(t, n) {
              try {
                if (n && ("object" == typeof n || "function" == typeof n)) {
                  var a = n.then;
                  if ("function" == typeof a)
                    return void a.call(
                      n,
                      function (e) {
                        s(t, e);
                      },
                      i
                    );
                }
                (r[t] = n), 0 == --o && e(r);
              } catch (t) {
                i(t);
              }
            }
            for (var a = 0; a < r.length; a++) s(a, r[a]);
          });
        }),
        (s.any = function (t) {
          var i = this;
          return new i(function (r, n) {
            if (!t || void 0 === t.length)
              return n(new TypeError("Promise.any accepts an array"));
            var o = Array.prototype.slice.call(t);
            if (0 === o.length) return n();
            for (var s = [], a = 0; a < o.length; a++)
              try {
                i.resolve(o[a])
                  .then(r)
                  .catch(function (t) {
                    s.push(t),
                      s.length === o.length &&
                        n(new e(s, "All promises were rejected"));
                  });
              } catch (t) {
                n(t);
              }
          });
        }),
        (s.allSettled = function (t) {
          return new this(function (e, i) {
            if (!t || void 0 === t.length)
              return i(
                new TypeError(
                  typeof t +
                    " " +
                    t +
                    " is not iterable(cannot read property Symbol(Symbol.iterator))"
                )
              );
            var r = Array.prototype.slice.call(t);
            if (0 === r.length) return e([]);
            var n = r.length;
            function o(t, i) {
              if (i && ("object" == typeof i || "function" == typeof i)) {
                var s = i.then;
                if ("function" == typeof s)
                  return void s.call(
                    i,
                    function (e) {
                      o(t, e);
                    },
                    function (i) {
                      (r[t] = { status: "rejected", reason: i }),
                        0 == --n && e(r);
                    }
                  );
              }
              (r[t] = { status: "fulfilled", value: i }), 0 == --n && e(r);
            }
            for (var s = 0; s < r.length; s++) o(s, r[s]);
          });
        }),
        (s.resolve = function (t) {
          return t && "object" == typeof t && t.constructor === s
            ? t
            : new s(function (e) {
                e(t);
              });
        }),
        (s.reject = function (t) {
          return new s(function (e, i) {
            i(t);
          });
        }),
        (s.race = function (t) {
          return new s(function (e, i) {
            if (!n(t)) return i(new TypeError("Promise.race accepts an array"));
            for (var r = 0, o = t.length; r < o; r++)
              s.resolve(t[r]).then(e, i);
          });
        }),
        (s._immediateFn =
          ("function" == typeof setImmediate &&
            function (t) {
              setImmediate(t);
            }) ||
          function (t) {
            r(t, 0);
          }),
        (s._unhandledRejectionFn = function (t) {
          "undefined" != typeof console &&
            console &&
            console.warn("Possible Unhandled Promise Rejection:", t);
        });
      const p = s;
      var _ = i(228);
      if (
        ("undefined" == typeof globalThis &&
          ("undefined" != typeof self
            ? (self.globalThis = self)
            : "undefined" != typeof global && (global.globalThis = global)),
        globalThis.Promise || (globalThis.Promise = p),
        Object.assign || (Object.assign = _),
        (Date.now && Date.prototype.getTime) ||
          (Date.now = function () {
            return new Date().getTime();
          }),
        !globalThis.performance || !globalThis.performance.now)
      ) {
        var f = Date.now();
        globalThis.performance || (globalThis.performance = {}),
          (globalThis.performance.now = function () {
            return Date.now() - f;
          });
      }
      for (
        var m,
          y,
          g,
          v,
          b,
          x,
          w,
          T,
          A,
          S,
          E,
          C,
          M,
          P,
          B,
          O,
          R,
          I,
          k,
          F,
          D = Date.now(),
          N = ["ms", "moz", "webkit", "o"],
          L = 0;
        L < N.length && !globalThis.requestAnimationFrame;
        ++L
      ) {
        var U = N[L];
        (globalThis.requestAnimationFrame =
          globalThis[U + "RequestAnimationFrame"]),
          (globalThis.cancelAnimationFrame =
            globalThis[U + "CancelAnimationFrame"] ||
            globalThis[U + "CancelRequestAnimationFrame"]);
      }
      globalThis.requestAnimationFrame ||
        (globalThis.requestAnimationFrame = function (t) {
          if ("function" != typeof t)
            throw new TypeError(t + "is not a function");
          var e = Date.now(),
            i = 16 + D - e;
          return (
            i < 0 && (i = 0),
            (D = e),
            globalThis.self.setTimeout(function () {
              (D = Date.now()), t(performance.now());
            }, i)
          );
        }),
        globalThis.cancelAnimationFrame ||
          (globalThis.cancelAnimationFrame = function (t) {
            return clearTimeout(t);
          }),
        Math.sign ||
          (Math.sign = function (t) {
            return 0 === (t = Number(t)) || isNaN(t) ? t : t > 0 ? 1 : -1;
          }),
        Number.isInteger ||
          (Number.isInteger = function (t) {
            return "number" == typeof t && isFinite(t) && Math.floor(t) === t;
          }),
        globalThis.ArrayBuffer || (globalThis.ArrayBuffer = Array),
        globalThis.Float32Array || (globalThis.Float32Array = Array),
        globalThis.Uint32Array || (globalThis.Uint32Array = Array),
        globalThis.Uint16Array || (globalThis.Uint16Array = Array),
        globalThis.Uint8Array || (globalThis.Uint8Array = Array),
        globalThis.Int32Array || (globalThis.Int32Array = Array),
        (function (t) {
          (t[(t.WEBGL_LEGACY = 0)] = "WEBGL_LEGACY"),
            (t[(t.WEBGL = 1)] = "WEBGL"),
            (t[(t.WEBGL2 = 2)] = "WEBGL2");
        })(m || (m = {})),
        (function (t) {
          (t[(t.UNKNOWN = 0)] = "UNKNOWN"),
            (t[(t.WEBGL = 1)] = "WEBGL"),
            (t[(t.CANVAS = 2)] = "CANVAS");
        })(y || (y = {})),
        (function (t) {
          (t[(t.COLOR = 16384)] = "COLOR"),
            (t[(t.DEPTH = 256)] = "DEPTH"),
            (t[(t.STENCIL = 1024)] = "STENCIL");
        })(g || (g = {})),
        (function (t) {
          (t[(t.NORMAL = 0)] = "NORMAL"),
            (t[(t.ADD = 1)] = "ADD"),
            (t[(t.MULTIPLY = 2)] = "MULTIPLY"),
            (t[(t.SCREEN = 3)] = "SCREEN"),
            (t[(t.OVERLAY = 4)] = "OVERLAY"),
            (t[(t.DARKEN = 5)] = "DARKEN"),
            (t[(t.LIGHTEN = 6)] = "LIGHTEN"),
            (t[(t.COLOR_DODGE = 7)] = "COLOR_DODGE"),
            (t[(t.COLOR_BURN = 8)] = "COLOR_BURN"),
            (t[(t.HARD_LIGHT = 9)] = "HARD_LIGHT"),
            (t[(t.SOFT_LIGHT = 10)] = "SOFT_LIGHT"),
            (t[(t.DIFFERENCE = 11)] = "DIFFERENCE"),
            (t[(t.EXCLUSION = 12)] = "EXCLUSION"),
            (t[(t.HUE = 13)] = "HUE"),
            (t[(t.SATURATION = 14)] = "SATURATION"),
            (t[(t.COLOR = 15)] = "COLOR"),
            (t[(t.LUMINOSITY = 16)] = "LUMINOSITY"),
            (t[(t.NORMAL_NPM = 17)] = "NORMAL_NPM"),
            (t[(t.ADD_NPM = 18)] = "ADD_NPM"),
            (t[(t.SCREEN_NPM = 19)] = "SCREEN_NPM"),
            (t[(t.NONE = 20)] = "NONE"),
            (t[(t.SRC_OVER = 0)] = "SRC_OVER"),
            (t[(t.SRC_IN = 21)] = "SRC_IN"),
            (t[(t.SRC_OUT = 22)] = "SRC_OUT"),
            (t[(t.SRC_ATOP = 23)] = "SRC_ATOP"),
            (t[(t.DST_OVER = 24)] = "DST_OVER"),
            (t[(t.DST_IN = 25)] = "DST_IN"),
            (t[(t.DST_OUT = 26)] = "DST_OUT"),
            (t[(t.DST_ATOP = 27)] = "DST_ATOP"),
            (t[(t.ERASE = 26)] = "ERASE"),
            (t[(t.SUBTRACT = 28)] = "SUBTRACT"),
            (t[(t.XOR = 29)] = "XOR");
        })(v || (v = {})),
        (function (t) {
          (t[(t.POINTS = 0)] = "POINTS"),
            (t[(t.LINES = 1)] = "LINES"),
            (t[(t.LINE_LOOP = 2)] = "LINE_LOOP"),
            (t[(t.LINE_STRIP = 3)] = "LINE_STRIP"),
            (t[(t.TRIANGLES = 4)] = "TRIANGLES"),
            (t[(t.TRIANGLE_STRIP = 5)] = "TRIANGLE_STRIP"),
            (t[(t.TRIANGLE_FAN = 6)] = "TRIANGLE_FAN");
        })(b || (b = {})),
        (function (t) {
          (t[(t.RGBA = 6408)] = "RGBA"),
            (t[(t.RGB = 6407)] = "RGB"),
            (t[(t.RG = 33319)] = "RG"),
            (t[(t.RED = 6403)] = "RED"),
            (t[(t.RGBA_INTEGER = 36249)] = "RGBA_INTEGER"),
            (t[(t.RGB_INTEGER = 36248)] = "RGB_INTEGER"),
            (t[(t.RG_INTEGER = 33320)] = "RG_INTEGER"),
            (t[(t.RED_INTEGER = 36244)] = "RED_INTEGER"),
            (t[(t.ALPHA = 6406)] = "ALPHA"),
            (t[(t.LUMINANCE = 6409)] = "LUMINANCE"),
            (t[(t.LUMINANCE_ALPHA = 6410)] = "LUMINANCE_ALPHA"),
            (t[(t.DEPTH_COMPONENT = 6402)] = "DEPTH_COMPONENT"),
            (t[(t.DEPTH_STENCIL = 34041)] = "DEPTH_STENCIL");
        })(x || (x = {})),
        (function (t) {
          (t[(t.TEXTURE_2D = 3553)] = "TEXTURE_2D"),
            (t[(t.TEXTURE_CUBE_MAP = 34067)] = "TEXTURE_CUBE_MAP"),
            (t[(t.TEXTURE_2D_ARRAY = 35866)] = "TEXTURE_2D_ARRAY"),
            (t[(t.TEXTURE_CUBE_MAP_POSITIVE_X = 34069)] =
              "TEXTURE_CUBE_MAP_POSITIVE_X"),
            (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070)] =
              "TEXTURE_CUBE_MAP_NEGATIVE_X"),
            (t[(t.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071)] =
              "TEXTURE_CUBE_MAP_POSITIVE_Y"),
            (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072)] =
              "TEXTURE_CUBE_MAP_NEGATIVE_Y"),
            (t[(t.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073)] =
              "TEXTURE_CUBE_MAP_POSITIVE_Z"),
            (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074)] =
              "TEXTURE_CUBE_MAP_NEGATIVE_Z");
        })(w || (w = {})),
        (function (t) {
          (t[(t.UNSIGNED_BYTE = 5121)] = "UNSIGNED_BYTE"),
            (t[(t.UNSIGNED_SHORT = 5123)] = "UNSIGNED_SHORT"),
            (t[(t.UNSIGNED_SHORT_5_6_5 = 33635)] = "UNSIGNED_SHORT_5_6_5"),
            (t[(t.UNSIGNED_SHORT_4_4_4_4 = 32819)] = "UNSIGNED_SHORT_4_4_4_4"),
            (t[(t.UNSIGNED_SHORT_5_5_5_1 = 32820)] = "UNSIGNED_SHORT_5_5_5_1"),
            (t[(t.UNSIGNED_INT = 5125)] = "UNSIGNED_INT"),
            (t[(t.UNSIGNED_INT_10F_11F_11F_REV = 35899)] =
              "UNSIGNED_INT_10F_11F_11F_REV"),
            (t[(t.UNSIGNED_INT_2_10_10_10_REV = 33640)] =
              "UNSIGNED_INT_2_10_10_10_REV"),
            (t[(t.UNSIGNED_INT_24_8 = 34042)] = "UNSIGNED_INT_24_8"),
            (t[(t.UNSIGNED_INT_5_9_9_9_REV = 35902)] =
              "UNSIGNED_INT_5_9_9_9_REV"),
            (t[(t.BYTE = 5120)] = "BYTE"),
            (t[(t.SHORT = 5122)] = "SHORT"),
            (t[(t.INT = 5124)] = "INT"),
            (t[(t.FLOAT = 5126)] = "FLOAT"),
            (t[(t.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269)] =
              "FLOAT_32_UNSIGNED_INT_24_8_REV"),
            (t[(t.HALF_FLOAT = 36193)] = "HALF_FLOAT");
        })(T || (T = {})),
        (function (t) {
          (t[(t.FLOAT = 0)] = "FLOAT"),
            (t[(t.INT = 1)] = "INT"),
            (t[(t.UINT = 2)] = "UINT");
        })(A || (A = {})),
        (function (t) {
          (t[(t.NEAREST = 0)] = "NEAREST"), (t[(t.LINEAR = 1)] = "LINEAR");
        })(S || (S = {})),
        (function (t) {
          (t[(t.CLAMP = 33071)] = "CLAMP"),
            (t[(t.REPEAT = 10497)] = "REPEAT"),
            (t[(t.MIRRORED_REPEAT = 33648)] = "MIRRORED_REPEAT");
        })(E || (E = {})),
        (function (t) {
          (t[(t.OFF = 0)] = "OFF"),
            (t[(t.POW2 = 1)] = "POW2"),
            (t[(t.ON = 2)] = "ON"),
            (t[(t.ON_MANUAL = 3)] = "ON_MANUAL");
        })(C || (C = {})),
        (function (t) {
          (t[(t.NPM = 0)] = "NPM"),
            (t[(t.UNPACK = 1)] = "UNPACK"),
            (t[(t.PMA = 2)] = "PMA"),
            (t[(t.NO_PREMULTIPLIED_ALPHA = 0)] = "NO_PREMULTIPLIED_ALPHA"),
            (t[(t.PREMULTIPLY_ON_UPLOAD = 1)] = "PREMULTIPLY_ON_UPLOAD"),
            (t[(t.PREMULTIPLY_ALPHA = 2)] = "PREMULTIPLY_ALPHA"),
            (t[(t.PREMULTIPLIED_ALPHA = 2)] = "PREMULTIPLIED_ALPHA");
        })(M || (M = {})),
        (function (t) {
          (t[(t.NO = 0)] = "NO"),
            (t[(t.YES = 1)] = "YES"),
            (t[(t.AUTO = 2)] = "AUTO"),
            (t[(t.BLEND = 0)] = "BLEND"),
            (t[(t.CLEAR = 1)] = "CLEAR"),
            (t[(t.BLIT = 2)] = "BLIT");
        })(P || (P = {})),
        (function (t) {
          (t[(t.AUTO = 0)] = "AUTO"), (t[(t.MANUAL = 1)] = "MANUAL");
        })(B || (B = {})),
        (function (t) {
          (t.LOW = "lowp"), (t.MEDIUM = "mediump"), (t.HIGH = "highp");
        })(O || (O = {})),
        (function (t) {
          (t[(t.NONE = 0)] = "NONE"),
            (t[(t.SCISSOR = 1)] = "SCISSOR"),
            (t[(t.STENCIL = 2)] = "STENCIL"),
            (t[(t.SPRITE = 3)] = "SPRITE"),
            (t[(t.COLOR = 4)] = "COLOR");
        })(R || (R = {})),
        (function (t) {
          (t[(t.RED = 1)] = "RED"),
            (t[(t.GREEN = 2)] = "GREEN"),
            (t[(t.BLUE = 4)] = "BLUE"),
            (t[(t.ALPHA = 8)] = "ALPHA");
        })(I || (I = {})),
        (function (t) {
          (t[(t.NONE = 0)] = "NONE"),
            (t[(t.LOW = 2)] = "LOW"),
            (t[(t.MEDIUM = 4)] = "MEDIUM"),
            (t[(t.HIGH = 8)] = "HIGH");
        })(k || (k = {})),
        (function (t) {
          (t[(t.ELEMENT_ARRAY_BUFFER = 34963)] = "ELEMENT_ARRAY_BUFFER"),
            (t[(t.ARRAY_BUFFER = 34962)] = "ARRAY_BUFFER"),
            (t[(t.UNIFORM_BUFFER = 35345)] = "UNIFORM_BUFFER");
        })(F || (F = {}));
      var G = {
          createCanvas: function (t, e) {
            var i = document.createElement("canvas");
            return (i.width = t), (i.height = e), i;
          },
          getWebGLRenderingContext: function () {
            return WebGLRenderingContext;
          },
          getNavigator: function () {
            return navigator;
          },
          getBaseUrl: function () {
            var t;
            return null !== (t = document.baseURI) && void 0 !== t
              ? t
              : window.location.href;
          },
          fetch: function (t, e) {
            return fetch(t, e);
          },
        },
        V = /iPhone/i,
        j = /iPod/i,
        z = /iPad/i,
        X = /\biOS-universal(?:.+)Mac\b/i,
        H = /\bAndroid(?:.+)Mobile\b/i,
        Y = /Android/i,
        W = /(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,
        q = /Silk/i,
        $ = /Windows Phone/i,
        K = /\bWindows(?:.+)ARM\b/i,
        J = /BlackBerry/i,
        Z = /BB10/i,
        Q = /Opera Mini/i,
        tt = /\b(CriOS|Chrome)(?:.+)Mobile/i,
        et = /Mobile(?:.+)Firefox\b/i,
        it = function (t) {
          return (
            void 0 !== t &&
            "MacIntel" === t.platform &&
            "number" == typeof t.maxTouchPoints &&
            t.maxTouchPoints > 1 &&
            "undefined" == typeof MSStream
          );
        },
        rt = (function (t) {
          var e = { userAgent: "", platform: "", maxTouchPoints: 0 };
          t || "undefined" == typeof navigator
            ? "string" == typeof t
              ? (e.userAgent = t)
              : t &&
                t.userAgent &&
                (e = {
                  userAgent: t.userAgent,
                  platform: t.platform,
                  maxTouchPoints: t.maxTouchPoints || 0,
                })
            : (e = {
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                maxTouchPoints: navigator.maxTouchPoints || 0,
              });
          var i = e.userAgent,
            r = i.split("[FBAN");
          void 0 !== r[1] && (i = r[0]),
            void 0 !== (r = i.split("Twitter"))[1] && (i = r[0]);
          var n = (function (t) {
              return function (e) {
                return e.test(t);
              };
            })(i),
            o = {
              apple: {
                phone: n(V) && !n($),
                ipod: n(j),
                tablet: !n(V) && (n(z) || it(e)) && !n($),
                universal: n(X),
                device: (n(V) || n(j) || n(z) || n(X) || it(e)) && !n($),
              },
              amazon: {
                phone: n(W),
                tablet: !n(W) && n(q),
                device: n(W) || n(q),
              },
              android: {
                phone: (!n($) && n(W)) || (!n($) && n(H)),
                tablet: !n($) && !n(W) && !n(H) && (n(q) || n(Y)),
                device:
                  (!n($) && (n(W) || n(q) || n(H) || n(Y))) || n(/\bokhttp\b/i),
              },
              windows: { phone: n($), tablet: n(K), device: n($) || n(K) },
              other: {
                blackberry: n(J),
                blackberry10: n(Z),
                opera: n(Q),
                firefox: n(et),
                chrome: n(tt),
                device: n(J) || n(Z) || n(Q) || n(et) || n(tt),
              },
              any: !1,
              phone: !1,
              tablet: !1,
            };
          return (
            (o.any =
              o.apple.device ||
              o.android.device ||
              o.windows.device ||
              o.other.device),
            (o.phone = o.apple.phone || o.android.phone || o.windows.phone),
            (o.tablet = o.apple.tablet || o.android.tablet || o.windows.tablet),
            o
          );
        })(globalThis.navigator),
        nt = {
          ADAPTER: G,
          MIPMAP_TEXTURES: C.POW2,
          ANISOTROPIC_LEVEL: 0,
          RESOLUTION: 1,
          FILTER_RESOLUTION: 1,
          FILTER_MULTISAMPLE: k.NONE,
          SPRITE_MAX_TEXTURES: (function () {
            var t,
              e = !0;
            (rt.tablet || rt.phone) &&
              (rt.apple.device &&
                (t = navigator.userAgent.match(/OS (\d+)_(\d+)?/)) &&
                parseInt(t[1], 10) < 11 &&
                (e = !1),
              rt.android.device &&
                (t = navigator.userAgent.match(/Android\s([0-9.]*)/)) &&
                parseInt(t[1], 10) < 7 &&
                (e = !1));
            return e ? 32 : 4;
          })(),
          SPRITE_BATCH_SIZE: 4096,
          RENDER_OPTIONS: {
            view: null,
            width: 800,
            height: 600,
            autoDensity: !1,
            backgroundColor: 0,
            backgroundAlpha: 1,
            useContextAlpha: !0,
            clearBeforeRender: !0,
            antialias: !1,
            preserveDrawingBuffer: !1,
          },
          GC_MODE: B.AUTO,
          GC_MAX_IDLE: 3600,
          GC_MAX_CHECK_COUNT: 600,
          WRAP_MODE: E.CLAMP,
          SCALE_MODE: S.LINEAR,
          PRECISION_VERTEX: O.HIGH,
          PRECISION_FRAGMENT: rt.apple.device ? O.HIGH : O.MEDIUM,
          CAN_UPLOAD_SAME_BUFFER: !rt.apple.device,
          CREATE_IMAGE_BITMAP: !1,
          ROUND_PIXELS: !1,
        },
        ot = i(585),
        st = i(570),
        at = i(835),
        ht = { parse: at.qg, format: at.GP, resolve: at.hd };
      (nt.RETINA_PREFIX = /@([0-9\.]+)x/),
        (nt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT = !1);
      var ut,
        lt = !1,
        ct = "6.5.10",
        dt = {
          aliceblue: "#f0f8ff",
          antiquewhite: "#faebd7",
          aqua: "#00ffff",
          aquamarine: "#7fffd4",
          azure: "#f0ffff",
          beige: "#f5f5dc",
          bisque: "#ffe4c4",
          black: "#000000",
          blanchedalmond: "#ffebcd",
          blue: "#0000ff",
          blueviolet: "#8a2be2",
          brown: "#a52a2a",
          burlywood: "#deb887",
          cadetblue: "#5f9ea0",
          chartreuse: "#7fff00",
          chocolate: "#d2691e",
          coral: "#ff7f50",
          cornflowerblue: "#6495ed",
          cornsilk: "#fff8dc",
          crimson: "#dc143c",
          cyan: "#00ffff",
          darkblue: "#00008b",
          darkcyan: "#008b8b",
          darkgoldenrod: "#b8860b",
          darkgray: "#a9a9a9",
          darkgreen: "#006400",
          darkgrey: "#a9a9a9",
          darkkhaki: "#bdb76b",
          darkmagenta: "#8b008b",
          darkolivegreen: "#556b2f",
          darkorange: "#ff8c00",
          darkorchid: "#9932cc",
          darkred: "#8b0000",
          darksalmon: "#e9967a",
          darkseagreen: "#8fbc8f",
          darkslateblue: "#483d8b",
          darkslategray: "#2f4f4f",
          darkslategrey: "#2f4f4f",
          darkturquoise: "#00ced1",
          darkviolet: "#9400d3",
          deeppink: "#ff1493",
          deepskyblue: "#00bfff",
          dimgray: "#696969",
          dimgrey: "#696969",
          dodgerblue: "#1e90ff",
          firebrick: "#b22222",
          floralwhite: "#fffaf0",
          forestgreen: "#228b22",
          fuchsia: "#ff00ff",
          gainsboro: "#dcdcdc",
          ghostwhite: "#f8f8ff",
          goldenrod: "#daa520",
          gold: "#ffd700",
          gray: "#808080",
          green: "#008000",
          greenyellow: "#adff2f",
          grey: "#808080",
          honeydew: "#f0fff0",
          hotpink: "#ff69b4",
          indianred: "#cd5c5c",
          indigo: "#4b0082",
          ivory: "#fffff0",
          khaki: "#f0e68c",
          lavenderblush: "#fff0f5",
          lavender: "#e6e6fa",
          lawngreen: "#7cfc00",
          lemonchiffon: "#fffacd",
          lightblue: "#add8e6",
          lightcoral: "#f08080",
          lightcyan: "#e0ffff",
          lightgoldenrodyellow: "#fafad2",
          lightgray: "#d3d3d3",
          lightgreen: "#90ee90",
          lightgrey: "#d3d3d3",
          lightpink: "#ffb6c1",
          lightsalmon: "#ffa07a",
          lightseagreen: "#20b2aa",
          lightskyblue: "#87cefa",
          lightslategray: "#778899",
          lightslategrey: "#778899",
          lightsteelblue: "#b0c4de",
          lightyellow: "#ffffe0",
          lime: "#00ff00",
          limegreen: "#32cd32",
          linen: "#faf0e6",
          magenta: "#ff00ff",
          maroon: "#800000",
          mediumaquamarine: "#66cdaa",
          mediumblue: "#0000cd",
          mediumorchid: "#ba55d3",
          mediumpurple: "#9370db",
          mediumseagreen: "#3cb371",
          mediumslateblue: "#7b68ee",
          mediumspringgreen: "#00fa9a",
          mediumturquoise: "#48d1cc",
          mediumvioletred: "#c71585",
          midnightblue: "#191970",
          mintcream: "#f5fffa",
          mistyrose: "#ffe4e1",
          moccasin: "#ffe4b5",
          navajowhite: "#ffdead",
          navy: "#000080",
          oldlace: "#fdf5e6",
          olive: "#808000",
          olivedrab: "#6b8e23",
          orange: "#ffa500",
          orangered: "#ff4500",
          orchid: "#da70d6",
          palegoldenrod: "#eee8aa",
          palegreen: "#98fb98",
          paleturquoise: "#afeeee",
          palevioletred: "#db7093",
          papayawhip: "#ffefd5",
          peachpuff: "#ffdab9",
          peru: "#cd853f",
          pink: "#ffc0cb",
          plum: "#dda0dd",
          powderblue: "#b0e0e6",
          purple: "#800080",
          rebeccapurple: "#663399",
          red: "#ff0000",
          rosybrown: "#bc8f8f",
          royalblue: "#4169e1",
          saddlebrown: "#8b4513",
          salmon: "#fa8072",
          sandybrown: "#f4a460",
          seagreen: "#2e8b57",
          seashell: "#fff5ee",
          sienna: "#a0522d",
          silver: "#c0c0c0",
          skyblue: "#87ceeb",
          slateblue: "#6a5acd",
          slategray: "#708090",
          slategrey: "#708090",
          snow: "#fffafa",
          springgreen: "#00ff7f",
          steelblue: "#4682b4",
          tan: "#d2b48c",
          teal: "#008080",
          thistle: "#d8bfd8",
          tomato: "#ff6347",
          turquoise: "#40e0d0",
          violet: "#ee82ee",
          wheat: "#f5deb3",
          white: "#ffffff",
          whitesmoke: "#f5f5f5",
          yellow: "#ffff00",
          yellowgreen: "#9acd32",
        };
      function pt(t, e) {
        return (
          void 0 === e && (e = []),
          (e[0] = ((t >> 16) & 255) / 255),
          (e[1] = ((t >> 8) & 255) / 255),
          (e[2] = (255 & t) / 255),
          e
        );
      }
      function _t(t) {
        var e = t.toString(16);
        return "#" + ("000000".substring(0, 6 - e.length) + e);
      }
      function ft(t) {
        return (
          "string" == typeof t &&
            "#" === (t = dt[t.toLowerCase()] || t)[0] &&
            (t = t.slice(1)),
          parseInt(t, 16)
        );
      }
      function mt(t) {
        return ((255 * t[0]) << 16) + ((255 * t[1]) << 8) + ((255 * t[2]) | 0);
      }
      var yt = (function () {
        for (var t = [], e = [], i = 0; i < 32; i++) (t[i] = i), (e[i] = i);
        (t[v.NORMAL_NPM] = v.NORMAL),
          (t[v.ADD_NPM] = v.ADD),
          (t[v.SCREEN_NPM] = v.SCREEN),
          (e[v.NORMAL] = v.NORMAL_NPM),
          (e[v.ADD] = v.ADD_NPM),
          (e[v.SCREEN] = v.SCREEN_NPM);
        var r = [];
        return r.push(e), r.push(t), r;
      })();
      function gt(t, e) {
        return yt[e ? 1 : 0][t];
      }
      function vt(t, e) {
        if (1 === e) return ((255 * e) << 24) + t;
        if (0 === e) return 0;
        var i = (t >> 16) & 255,
          r = (t >> 8) & 255,
          n = 255 & t;
        return (
          ((255 * e) << 24) +
          ((i = (i * e + 0.5) | 0) << 16) +
          ((r = (r * e + 0.5) | 0) << 8) +
          ((n * e + 0.5) | 0)
        );
      }
      function bt(t, e, i, r) {
        return (
          ((i = i || new Float32Array(4))[0] = ((t >> 16) & 255) / 255),
          (i[1] = ((t >> 8) & 255) / 255),
          (i[2] = (255 & t) / 255),
          (r || void 0 === r) && ((i[0] *= e), (i[1] *= e), (i[2] *= e)),
          (i[3] = e),
          i
        );
      }
      function xt(t) {
        if (4 === t.BYTES_PER_ELEMENT)
          return t instanceof Float32Array
            ? "Float32Array"
            : t instanceof Uint32Array
            ? "Uint32Array"
            : "Int32Array";
        if (2 === t.BYTES_PER_ELEMENT) {
          if (t instanceof Uint16Array) return "Uint16Array";
        } else if (1 === t.BYTES_PER_ELEMENT && t instanceof Uint8Array)
          return "Uint8Array";
        return null;
      }
      function wt(t) {
        return (
          (t += 0 === t ? 1 : 0),
          --t,
          (t |= t >>> 1),
          (t |= t >>> 2),
          (t |= t >>> 4),
          (t |= t >>> 8),
          1 + (t |= t >>> 16)
        );
      }
      function Tt(t) {
        return !(t & (t - 1) || !t);
      }
      function At(t) {
        var e = (t > 65535 ? 1 : 0) << 4,
          i = ((t >>>= e) > 255 ? 1 : 0) << 3;
        return (
          (e |= i),
          (e |= i = ((t >>>= i) > 15 ? 1 : 0) << 2),
          (e |= i = ((t >>>= i) > 3 ? 1 : 0) << 1) | ((t >>>= i) >> 1)
        );
      }
      function St(t, e, i) {
        var r,
          n = t.length;
        if (!(e >= n || 0 === i)) {
          var o = n - (i = e + i > n ? n - e : i);
          for (r = e; r < o; ++r) t[r] = t[r + i];
          t.length = o;
        }
      }
      function Et(t) {
        return 0 === t ? 0 : t < 0 ? -1 : 1;
      }
      Float32Array, Uint32Array, Int32Array, Uint8Array;
      var Ct = 0;
      function Mt() {
        return ++Ct;
      }
      var Pt = {};
      function Bt(t, e, i) {
        if ((void 0 === i && (i = 3), !Pt[e])) {
          var r = new Error().stack;
          void 0 === r
            ? console.warn(
                "PixiJS Deprecation Warning: ",
                e + "\nDeprecated since v" + t
              )
            : ((r = r.split("\n").splice(i).join("\n")),
              console.groupCollapsed
                ? (console.groupCollapsed(
                    "%cPixiJS Deprecation Warning: %c%s",
                    "color:#614108;background:#fffbe6",
                    "font-weight:normal;color:#614108;background:#fffbe6",
                    e + "\nDeprecated since v" + t
                  ),
                  console.warn(r),
                  console.groupEnd())
                : (console.warn(
                    "PixiJS Deprecation Warning: ",
                    e + "\nDeprecated since v" + t
                  ),
                  console.warn(r))),
            (Pt[e] = !0);
        }
      }
      var Ot,
        Rt = {},
        It = Object.create(null),
        kt = Object.create(null),
        Ft = (function () {
          function t(t, e, i) {
            (this.canvas = nt.ADAPTER.createCanvas()),
              (this.context = this.canvas.getContext("2d")),
              (this.resolution = i || nt.RESOLUTION),
              this.resize(t, e);
          }
          return (
            (t.prototype.clear = function () {
              this.context.setTransform(1, 0, 0, 1, 0, 0),
                this.context.clearRect(
                  0,
                  0,
                  this.canvas.width,
                  this.canvas.height
                );
            }),
            (t.prototype.resize = function (t, e) {
              (this.canvas.width = Math.round(t * this.resolution)),
                (this.canvas.height = Math.round(e * this.resolution));
            }),
            (t.prototype.destroy = function () {
              (this.context = null), (this.canvas = null);
            }),
            Object.defineProperty(t.prototype, "width", {
              get: function () {
                return this.canvas.width;
              },
              set: function (t) {
                this.canvas.width = Math.round(t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "height", {
              get: function () {
                return this.canvas.height;
              },
              set: function (t) {
                this.canvas.height = Math.round(t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            t
          );
        })();
      function Dt(t, e) {
        var i = nt.RETINA_PREFIX.exec(t);
        return i ? parseFloat(i[1]) : void 0 !== e ? e : 1;
      }
      var Nt,
        Lt = 2 * Math.PI,
        Ut = 180 / Math.PI,
        Gt = Math.PI / 180;
      !(function (t) {
        (t[(t.POLY = 0)] = "POLY"),
          (t[(t.RECT = 1)] = "RECT"),
          (t[(t.CIRC = 2)] = "CIRC"),
          (t[(t.ELIP = 3)] = "ELIP"),
          (t[(t.RREC = 4)] = "RREC");
      })(Nt || (Nt = {}));
      var Vt = (function () {
          function t(t, e) {
            void 0 === t && (t = 0),
              void 0 === e && (e = 0),
              (this.x = 0),
              (this.y = 0),
              (this.x = t),
              (this.y = e);
          }
          return (
            (t.prototype.clone = function () {
              return new t(this.x, this.y);
            }),
            (t.prototype.copyFrom = function (t) {
              return this.set(t.x, t.y), this;
            }),
            (t.prototype.copyTo = function (t) {
              return t.set(this.x, this.y), t;
            }),
            (t.prototype.equals = function (t) {
              return t.x === this.x && t.y === this.y;
            }),
            (t.prototype.set = function (t, e) {
              return (
                void 0 === t && (t = 0),
                void 0 === e && (e = t),
                (this.x = t),
                (this.y = e),
                this
              );
            }),
            (t.prototype.toString = function () {
              return "[@pixi/math:Point x=" + this.x + " y=" + this.y + "]";
            }),
            t
          );
        })(),
        jt = [new Vt(), new Vt(), new Vt(), new Vt()],
        zt = (function () {
          function t(t, e, i, r) {
            void 0 === t && (t = 0),
              void 0 === e && (e = 0),
              void 0 === i && (i = 0),
              void 0 === r && (r = 0),
              (this.x = Number(t)),
              (this.y = Number(e)),
              (this.width = Number(i)),
              (this.height = Number(r)),
              (this.type = Nt.RECT);
          }
          return (
            Object.defineProperty(t.prototype, "left", {
              get: function () {
                return this.x;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "right", {
              get: function () {
                return this.x + this.width;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "top", {
              get: function () {
                return this.y;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "bottom", {
              get: function () {
                return this.y + this.height;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "EMPTY", {
              get: function () {
                return new t(0, 0, 0, 0);
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.clone = function () {
              return new t(this.x, this.y, this.width, this.height);
            }),
            (t.prototype.copyFrom = function (t) {
              return (
                (this.x = t.x),
                (this.y = t.y),
                (this.width = t.width),
                (this.height = t.height),
                this
              );
            }),
            (t.prototype.copyTo = function (t) {
              return (
                (t.x = this.x),
                (t.y = this.y),
                (t.width = this.width),
                (t.height = this.height),
                t
              );
            }),
            (t.prototype.contains = function (t, e) {
              return (
                !(this.width <= 0 || this.height <= 0) &&
                t >= this.x &&
                t < this.x + this.width &&
                e >= this.y &&
                e < this.y + this.height
              );
            }),
            (t.prototype.intersects = function (t, e) {
              if (!e) {
                var i = this.x < t.x ? t.x : this.x;
                if ((this.right > t.right ? t.right : this.right) <= i)
                  return !1;
                var r = this.y < t.y ? t.y : this.y;
                return (this.bottom > t.bottom ? t.bottom : this.bottom) > r;
              }
              var n = this.left,
                o = this.right,
                s = this.top,
                a = this.bottom;
              if (o <= n || a <= s) return !1;
              var h = jt[0].set(t.left, t.top),
                u = jt[1].set(t.left, t.bottom),
                l = jt[2].set(t.right, t.top),
                c = jt[3].set(t.right, t.bottom);
              if (l.x <= h.x || u.y <= h.y) return !1;
              var d = Math.sign(e.a * e.d - e.b * e.c);
              if (0 === d) return !1;
              if (
                (e.apply(h, h),
                e.apply(u, u),
                e.apply(l, l),
                e.apply(c, c),
                Math.max(h.x, u.x, l.x, c.x) <= n ||
                  Math.min(h.x, u.x, l.x, c.x) >= o ||
                  Math.max(h.y, u.y, l.y, c.y) <= s ||
                  Math.min(h.y, u.y, l.y, c.y) >= a)
              )
                return !1;
              var p = d * (u.y - h.y),
                _ = d * (h.x - u.x),
                f = p * n + _ * s,
                m = p * o + _ * s,
                y = p * n + _ * a,
                g = p * o + _ * a;
              if (
                Math.max(f, m, y, g) <= p * h.x + _ * h.y ||
                Math.min(f, m, y, g) >= p * c.x + _ * c.y
              )
                return !1;
              var v = d * (h.y - l.y),
                b = d * (l.x - h.x),
                x = v * n + b * s,
                w = v * o + b * s,
                T = v * n + b * a,
                A = v * o + b * a;
              return !(
                Math.max(x, w, T, A) <= v * h.x + b * h.y ||
                Math.min(x, w, T, A) >= v * c.x + b * c.y
              );
            }),
            (t.prototype.pad = function (t, e) {
              return (
                void 0 === t && (t = 0),
                void 0 === e && (e = t),
                (this.x -= t),
                (this.y -= e),
                (this.width += 2 * t),
                (this.height += 2 * e),
                this
              );
            }),
            (t.prototype.fit = function (t) {
              var e = Math.max(this.x, t.x),
                i = Math.min(this.x + this.width, t.x + t.width),
                r = Math.max(this.y, t.y),
                n = Math.min(this.y + this.height, t.y + t.height);
              return (
                (this.x = e),
                (this.width = Math.max(i - e, 0)),
                (this.y = r),
                (this.height = Math.max(n - r, 0)),
                this
              );
            }),
            (t.prototype.ceil = function (t, e) {
              void 0 === t && (t = 1), void 0 === e && (e = 0.001);
              var i = Math.ceil((this.x + this.width - e) * t) / t,
                r = Math.ceil((this.y + this.height - e) * t) / t;
              return (
                (this.x = Math.floor((this.x + e) * t) / t),
                (this.y = Math.floor((this.y + e) * t) / t),
                (this.width = i - this.x),
                (this.height = r - this.y),
                this
              );
            }),
            (t.prototype.enlarge = function (t) {
              var e = Math.min(this.x, t.x),
                i = Math.max(this.x + this.width, t.x + t.width),
                r = Math.min(this.y, t.y),
                n = Math.max(this.y + this.height, t.y + t.height);
              return (
                (this.x = e),
                (this.width = i - e),
                (this.y = r),
                (this.height = n - r),
                this
              );
            }),
            (t.prototype.toString = function () {
              return (
                "[@pixi/math:Rectangle x=" +
                this.x +
                " y=" +
                this.y +
                " width=" +
                this.width +
                " height=" +
                this.height +
                "]"
              );
            }),
            t
          );
        })(),
        Xt = (function () {
          function t(t, e, i) {
            void 0 === t && (t = 0),
              void 0 === e && (e = 0),
              void 0 === i && (i = 0),
              (this.x = t),
              (this.y = e),
              (this.radius = i),
              (this.type = Nt.CIRC);
          }
          return (
            (t.prototype.clone = function () {
              return new t(this.x, this.y, this.radius);
            }),
            (t.prototype.contains = function (t, e) {
              if (this.radius <= 0) return !1;
              var i = this.radius * this.radius,
                r = this.x - t,
                n = this.y - e;
              return (r *= r) + (n *= n) <= i;
            }),
            (t.prototype.getBounds = function () {
              return new zt(
                this.x - this.radius,
                this.y - this.radius,
                2 * this.radius,
                2 * this.radius
              );
            }),
            (t.prototype.toString = function () {
              return (
                "[@pixi/math:Circle x=" +
                this.x +
                " y=" +
                this.y +
                " radius=" +
                this.radius +
                "]"
              );
            }),
            t
          );
        })(),
        Ht = (function () {
          function t(t, e, i, r) {
            void 0 === t && (t = 0),
              void 0 === e && (e = 0),
              void 0 === i && (i = 0),
              void 0 === r && (r = 0),
              (this.x = t),
              (this.y = e),
              (this.width = i),
              (this.height = r),
              (this.type = Nt.ELIP);
          }
          return (
            (t.prototype.clone = function () {
              return new t(this.x, this.y, this.width, this.height);
            }),
            (t.prototype.contains = function (t, e) {
              if (this.width <= 0 || this.height <= 0) return !1;
              var i = (t - this.x) / this.width,
                r = (e - this.y) / this.height;
              return (i *= i) + (r *= r) <= 1;
            }),
            (t.prototype.getBounds = function () {
              return new zt(
                this.x - this.width,
                this.y - this.height,
                this.width,
                this.height
              );
            }),
            (t.prototype.toString = function () {
              return (
                "[@pixi/math:Ellipse x=" +
                this.x +
                " y=" +
                this.y +
                " width=" +
                this.width +
                " height=" +
                this.height +
                "]"
              );
            }),
            t
          );
        })(),
        Yt = (function () {
          function t() {
            for (var t = arguments, e = [], i = 0; i < arguments.length; i++)
              e[i] = t[i];
            var r = Array.isArray(e[0]) ? e[0] : e;
            if ("number" != typeof r[0]) {
              for (var n = [], o = 0, s = r.length; o < s; o++)
                n.push(r[o].x, r[o].y);
              r = n;
            }
            (this.points = r), (this.type = Nt.POLY), (this.closeStroke = !0);
          }
          return (
            (t.prototype.clone = function () {
              var e = new t(this.points.slice());
              return (e.closeStroke = this.closeStroke), e;
            }),
            (t.prototype.contains = function (t, e) {
              for (
                var i = !1, r = this.points.length / 2, n = 0, o = r - 1;
                n < r;
                o = n++
              ) {
                var s = this.points[2 * n],
                  a = this.points[2 * n + 1],
                  h = this.points[2 * o],
                  u = this.points[2 * o + 1];
                a > e != u > e &&
                  t < ((e - a) / (u - a)) * (h - s) + s &&
                  (i = !i);
              }
              return i;
            }),
            (t.prototype.toString = function () {
              return (
                "[@pixi/math:PolygoncloseStroke=" +
                this.closeStroke +
                "points=" +
                this.points.reduce(function (t, e) {
                  return t + ", " + e;
                }, "") +
                "]"
              );
            }),
            t
          );
        })(),
        Wt = (function () {
          function t(t, e, i, r, n) {
            void 0 === t && (t = 0),
              void 0 === e && (e = 0),
              void 0 === i && (i = 0),
              void 0 === r && (r = 0),
              void 0 === n && (n = 20),
              (this.x = t),
              (this.y = e),
              (this.width = i),
              (this.height = r),
              (this.radius = n),
              (this.type = Nt.RREC);
          }
          return (
            (t.prototype.clone = function () {
              return new t(
                this.x,
                this.y,
                this.width,
                this.height,
                this.radius
              );
            }),
            (t.prototype.contains = function (t, e) {
              if (this.width <= 0 || this.height <= 0) return !1;
              if (
                t >= this.x &&
                t <= this.x + this.width &&
                e >= this.y &&
                e <= this.y + this.height
              ) {
                var i = Math.max(
                  0,
                  Math.min(this.radius, Math.min(this.width, this.height) / 2)
                );
                if (
                  (e >= this.y + i && e <= this.y + this.height - i) ||
                  (t >= this.x + i && t <= this.x + this.width - i)
                )
                  return !0;
                var r = t - (this.x + i),
                  n = e - (this.y + i),
                  o = i * i;
                if (r * r + n * n <= o) return !0;
                if ((r = t - (this.x + this.width - i)) * r + n * n <= o)
                  return !0;
                if (r * r + (n = e - (this.y + this.height - i)) * n <= o)
                  return !0;
                if ((r = t - (this.x + i)) * r + n * n <= o) return !0;
              }
              return !1;
            }),
            (t.prototype.toString = function () {
              return (
                "[@pixi/math:RoundedRectangle x=" +
                this.x +
                " y=" +
                this.y +
                "width=" +
                this.width +
                " height=" +
                this.height +
                " radius=" +
                this.radius +
                "]"
              );
            }),
            t
          );
        })(),
        qt = (function () {
          function t(t, e, i, r) {
            void 0 === i && (i = 0),
              void 0 === r && (r = 0),
              (this._x = i),
              (this._y = r),
              (this.cb = t),
              (this.scope = e);
          }
          return (
            (t.prototype.clone = function (e, i) {
              return (
                void 0 === e && (e = this.cb),
                void 0 === i && (i = this.scope),
                new t(e, i, this._x, this._y)
              );
            }),
            (t.prototype.set = function (t, e) {
              return (
                void 0 === t && (t = 0),
                void 0 === e && (e = t),
                (this._x === t && this._y === e) ||
                  ((this._x = t), (this._y = e), this.cb.call(this.scope)),
                this
              );
            }),
            (t.prototype.copyFrom = function (t) {
              return (
                (this._x === t.x && this._y === t.y) ||
                  ((this._x = t.x), (this._y = t.y), this.cb.call(this.scope)),
                this
              );
            }),
            (t.prototype.copyTo = function (t) {
              return t.set(this._x, this._y), t;
            }),
            (t.prototype.equals = function (t) {
              return t.x === this._x && t.y === this._y;
            }),
            (t.prototype.toString = function () {
              return (
                "[@pixi/math:ObservablePoint x=0 y=0 scope=" + this.scope + "]"
              );
            }),
            Object.defineProperty(t.prototype, "x", {
              get: function () {
                return this._x;
              },
              set: function (t) {
                this._x !== t && ((this._x = t), this.cb.call(this.scope));
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "y", {
              get: function () {
                return this._y;
              },
              set: function (t) {
                this._y !== t && ((this._y = t), this.cb.call(this.scope));
              },
              enumerable: !1,
              configurable: !0,
            }),
            t
          );
        })(),
        $t = (function () {
          function t(t, e, i, r, n, o) {
            void 0 === t && (t = 1),
              void 0 === e && (e = 0),
              void 0 === i && (i = 0),
              void 0 === r && (r = 1),
              void 0 === n && (n = 0),
              void 0 === o && (o = 0),
              (this.array = null),
              (this.a = t),
              (this.b = e),
              (this.c = i),
              (this.d = r),
              (this.tx = n),
              (this.ty = o);
          }
          return (
            (t.prototype.fromArray = function (t) {
              (this.a = t[0]),
                (this.b = t[1]),
                (this.c = t[3]),
                (this.d = t[4]),
                (this.tx = t[2]),
                (this.ty = t[5]);
            }),
            (t.prototype.set = function (t, e, i, r, n, o) {
              return (
                (this.a = t),
                (this.b = e),
                (this.c = i),
                (this.d = r),
                (this.tx = n),
                (this.ty = o),
                this
              );
            }),
            (t.prototype.toArray = function (t, e) {
              this.array || (this.array = new Float32Array(9));
              var i = e || this.array;
              return (
                t
                  ? ((i[0] = this.a),
                    (i[1] = this.b),
                    (i[2] = 0),
                    (i[3] = this.c),
                    (i[4] = this.d),
                    (i[5] = 0),
                    (i[6] = this.tx),
                    (i[7] = this.ty),
                    (i[8] = 1))
                  : ((i[0] = this.a),
                    (i[1] = this.c),
                    (i[2] = this.tx),
                    (i[3] = this.b),
                    (i[4] = this.d),
                    (i[5] = this.ty),
                    (i[6] = 0),
                    (i[7] = 0),
                    (i[8] = 1)),
                i
              );
            }),
            (t.prototype.apply = function (t, e) {
              e = e || new Vt();
              var i = t.x,
                r = t.y;
              return (
                (e.x = this.a * i + this.c * r + this.tx),
                (e.y = this.b * i + this.d * r + this.ty),
                e
              );
            }),
            (t.prototype.applyInverse = function (t, e) {
              e = e || new Vt();
              var i = 1 / (this.a * this.d + this.c * -this.b),
                r = t.x,
                n = t.y;
              return (
                (e.x =
                  this.d * i * r +
                  -this.c * i * n +
                  (this.ty * this.c - this.tx * this.d) * i),
                (e.y =
                  this.a * i * n +
                  -this.b * i * r +
                  (-this.ty * this.a + this.tx * this.b) * i),
                e
              );
            }),
            (t.prototype.translate = function (t, e) {
              return (this.tx += t), (this.ty += e), this;
            }),
            (t.prototype.scale = function (t, e) {
              return (
                (this.a *= t),
                (this.d *= e),
                (this.c *= t),
                (this.b *= e),
                (this.tx *= t),
                (this.ty *= e),
                this
              );
            }),
            (t.prototype.rotate = function (t) {
              var e = Math.cos(t),
                i = Math.sin(t),
                r = this.a,
                n = this.c,
                o = this.tx;
              return (
                (this.a = r * e - this.b * i),
                (this.b = r * i + this.b * e),
                (this.c = n * e - this.d * i),
                (this.d = n * i + this.d * e),
                (this.tx = o * e - this.ty * i),
                (this.ty = o * i + this.ty * e),
                this
              );
            }),
            (t.prototype.append = function (t) {
              var e = this.a,
                i = this.b,
                r = this.c,
                n = this.d;
              return (
                (this.a = t.a * e + t.b * r),
                (this.b = t.a * i + t.b * n),
                (this.c = t.c * e + t.d * r),
                (this.d = t.c * i + t.d * n),
                (this.tx = t.tx * e + t.ty * r + this.tx),
                (this.ty = t.tx * i + t.ty * n + this.ty),
                this
              );
            }),
            (t.prototype.setTransform = function (t, e, i, r, n, o, s, a, h) {
              return (
                (this.a = Math.cos(s + h) * n),
                (this.b = Math.sin(s + h) * n),
                (this.c = -Math.sin(s - a) * o),
                (this.d = Math.cos(s - a) * o),
                (this.tx = t - (i * this.a + r * this.c)),
                (this.ty = e - (i * this.b + r * this.d)),
                this
              );
            }),
            (t.prototype.prepend = function (t) {
              var e = this.tx;
              if (1 !== t.a || 0 !== t.b || 0 !== t.c || 1 !== t.d) {
                var i = this.a,
                  r = this.c;
                (this.a = i * t.a + this.b * t.c),
                  (this.b = i * t.b + this.b * t.d),
                  (this.c = r * t.a + this.d * t.c),
                  (this.d = r * t.b + this.d * t.d);
              }
              return (
                (this.tx = e * t.a + this.ty * t.c + t.tx),
                (this.ty = e * t.b + this.ty * t.d + t.ty),
                this
              );
            }),
            (t.prototype.decompose = function (t) {
              var e = this.a,
                i = this.b,
                r = this.c,
                n = this.d,
                o = t.pivot,
                s = -Math.atan2(-r, n),
                a = Math.atan2(i, e),
                h = Math.abs(s + a);
              return (
                h < 1e-5 || Math.abs(Lt - h) < 1e-5
                  ? ((t.rotation = a), (t.skew.x = t.skew.y = 0))
                  : ((t.rotation = 0), (t.skew.x = s), (t.skew.y = a)),
                (t.scale.x = Math.sqrt(e * e + i * i)),
                (t.scale.y = Math.sqrt(r * r + n * n)),
                (t.position.x = this.tx + (o.x * e + o.y * r)),
                (t.position.y = this.ty + (o.x * i + o.y * n)),
                t
              );
            }),
            (t.prototype.invert = function () {
              var t = this.a,
                e = this.b,
                i = this.c,
                r = this.d,
                n = this.tx,
                o = t * r - e * i;
              return (
                (this.a = r / o),
                (this.b = -e / o),
                (this.c = -i / o),
                (this.d = t / o),
                (this.tx = (i * this.ty - r * n) / o),
                (this.ty = -(t * this.ty - e * n) / o),
                this
              );
            }),
            (t.prototype.identity = function () {
              return (
                (this.a = 1),
                (this.b = 0),
                (this.c = 0),
                (this.d = 1),
                (this.tx = 0),
                (this.ty = 0),
                this
              );
            }),
            (t.prototype.clone = function () {
              var e = new t();
              return (
                (e.a = this.a),
                (e.b = this.b),
                (e.c = this.c),
                (e.d = this.d),
                (e.tx = this.tx),
                (e.ty = this.ty),
                e
              );
            }),
            (t.prototype.copyTo = function (t) {
              return (
                (t.a = this.a),
                (t.b = this.b),
                (t.c = this.c),
                (t.d = this.d),
                (t.tx = this.tx),
                (t.ty = this.ty),
                t
              );
            }),
            (t.prototype.copyFrom = function (t) {
              return (
                (this.a = t.a),
                (this.b = t.b),
                (this.c = t.c),
                (this.d = t.d),
                (this.tx = t.tx),
                (this.ty = t.ty),
                this
              );
            }),
            (t.prototype.toString = function () {
              return (
                "[@pixi/math:Matrix a=" +
                this.a +
                " b=" +
                this.b +
                " c=" +
                this.c +
                " d=" +
                this.d +
                " tx=" +
                this.tx +
                " ty=" +
                this.ty +
                "]"
              );
            }),
            Object.defineProperty(t, "IDENTITY", {
              get: function () {
                return new t();
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "TEMP_MATRIX", {
              get: function () {
                return new t();
              },
              enumerable: !1,
              configurable: !0,
            }),
            t
          );
        })(),
        Kt = [1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1, 0, 1],
        Jt = [0, 1, 1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1],
        Zt = [0, -1, -1, -1, 0, 1, 1, 1, 0, 1, 1, 1, 0, -1, -1, -1],
        Qt = [1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, 1, 1, 1, 0, -1],
        te = [],
        ee = [],
        ie = Math.sign;
      !(function () {
        for (var t = 0; t < 16; t++) {
          var e = [];
          te.push(e);
          for (var i = 0; i < 16; i++)
            for (
              var r = ie(Kt[t] * Kt[i] + Zt[t] * Jt[i]),
                n = ie(Jt[t] * Kt[i] + Qt[t] * Jt[i]),
                o = ie(Kt[t] * Zt[i] + Zt[t] * Qt[i]),
                s = ie(Jt[t] * Zt[i] + Qt[t] * Qt[i]),
                a = 0;
              a < 16;
              a++
            )
              if (Kt[a] === r && Jt[a] === n && Zt[a] === o && Qt[a] === s) {
                e.push(a);
                break;
              }
        }
        for (t = 0; t < 16; t++) {
          var h = new $t();
          h.set(Kt[t], Jt[t], Zt[t], Qt[t], 0, 0), ee.push(h);
        }
      })();
      var re = {
          E: 0,
          SE: 1,
          S: 2,
          SW: 3,
          W: 4,
          NW: 5,
          N: 6,
          NE: 7,
          MIRROR_VERTICAL: 8,
          MAIN_DIAGONAL: 10,
          MIRROR_HORIZONTAL: 12,
          REVERSE_DIAGONAL: 14,
          uX: function (t) {
            return Kt[t];
          },
          uY: function (t) {
            return Jt[t];
          },
          vX: function (t) {
            return Zt[t];
          },
          vY: function (t) {
            return Qt[t];
          },
          inv: function (t) {
            return 8 & t ? 15 & t : 7 & -t;
          },
          add: function (t, e) {
            return te[t][e];
          },
          sub: function (t, e) {
            return te[t][re.inv(e)];
          },
          rotate180: function (t) {
            return 4 ^ t;
          },
          isVertical: function (t) {
            return 2 == (3 & t);
          },
          byDirection: function (t, e) {
            return 2 * Math.abs(t) <= Math.abs(e)
              ? e >= 0
                ? re.S
                : re.N
              : 2 * Math.abs(e) <= Math.abs(t)
              ? t > 0
                ? re.E
                : re.W
              : e > 0
              ? t > 0
                ? re.SE
                : re.SW
              : t > 0
              ? re.NE
              : re.NW;
          },
          matrixAppendRotationInv: function (t, e, i, r) {
            void 0 === i && (i = 0), void 0 === r && (r = 0);
            var n = ee[re.inv(e)];
            (n.tx = i), (n.ty = r), t.append(n);
          },
        },
        ne = (function () {
          function t() {
            (this.worldTransform = new $t()),
              (this.localTransform = new $t()),
              (this.position = new qt(this.onChange, this, 0, 0)),
              (this.scale = new qt(this.onChange, this, 1, 1)),
              (this.pivot = new qt(this.onChange, this, 0, 0)),
              (this.skew = new qt(this.updateSkew, this, 0, 0)),
              (this._rotation = 0),
              (this._cx = 1),
              (this._sx = 0),
              (this._cy = 0),
              (this._sy = 1),
              (this._localID = 0),
              (this._currentLocalID = 0),
              (this._worldID = 0),
              (this._parentID = 0);
          }
          return (
            (t.prototype.onChange = function () {
              this._localID++;
            }),
            (t.prototype.updateSkew = function () {
              (this._cx = Math.cos(this._rotation + this.skew.y)),
                (this._sx = Math.sin(this._rotation + this.skew.y)),
                (this._cy = -Math.sin(this._rotation - this.skew.x)),
                (this._sy = Math.cos(this._rotation - this.skew.x)),
                this._localID++;
            }),
            (t.prototype.toString = function () {
              return (
                "[@pixi/math:Transform position=(" +
                this.position.x +
                ", " +
                this.position.y +
                ") rotation=" +
                this.rotation +
                " scale=(" +
                this.scale.x +
                ", " +
                this.scale.y +
                ") skew=(" +
                this.skew.x +
                ", " +
                this.skew.y +
                ") ]"
              );
            }),
            (t.prototype.updateLocalTransform = function () {
              var t = this.localTransform;
              this._localID !== this._currentLocalID &&
                ((t.a = this._cx * this.scale.x),
                (t.b = this._sx * this.scale.x),
                (t.c = this._cy * this.scale.y),
                (t.d = this._sy * this.scale.y),
                (t.tx =
                  this.position.x - (this.pivot.x * t.a + this.pivot.y * t.c)),
                (t.ty =
                  this.position.y - (this.pivot.x * t.b + this.pivot.y * t.d)),
                (this._currentLocalID = this._localID),
                (this._parentID = -1));
            }),
            (t.prototype.updateTransform = function (t) {
              var e = this.localTransform;
              if (
                (this._localID !== this._currentLocalID &&
                  ((e.a = this._cx * this.scale.x),
                  (e.b = this._sx * this.scale.x),
                  (e.c = this._cy * this.scale.y),
                  (e.d = this._sy * this.scale.y),
                  (e.tx =
                    this.position.x -
                    (this.pivot.x * e.a + this.pivot.y * e.c)),
                  (e.ty =
                    this.position.y -
                    (this.pivot.x * e.b + this.pivot.y * e.d)),
                  (this._currentLocalID = this._localID),
                  (this._parentID = -1)),
                this._parentID !== t._worldID)
              ) {
                var i = t.worldTransform,
                  r = this.worldTransform;
                (r.a = e.a * i.a + e.b * i.c),
                  (r.b = e.a * i.b + e.b * i.d),
                  (r.c = e.c * i.a + e.d * i.c),
                  (r.d = e.c * i.b + e.d * i.d),
                  (r.tx = e.tx * i.a + e.ty * i.c + i.tx),
                  (r.ty = e.tx * i.b + e.ty * i.d + i.ty),
                  (this._parentID = t._worldID),
                  this._worldID++;
              }
            }),
            (t.prototype.setFromMatrix = function (t) {
              t.decompose(this), this._localID++;
            }),
            Object.defineProperty(t.prototype, "rotation", {
              get: function () {
                return this._rotation;
              },
              set: function (t) {
                this._rotation !== t &&
                  ((this._rotation = t), this.updateSkew());
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.IDENTITY = new t()),
            t
          );
        })();
      nt.SORTABLE_CHILDREN = !1;
      var oe = (function () {
          function t() {
            (this.minX = 1 / 0),
              (this.minY = 1 / 0),
              (this.maxX = -1 / 0),
              (this.maxY = -1 / 0),
              (this.rect = null),
              (this.updateID = -1);
          }
          return (
            (t.prototype.isEmpty = function () {
              return this.minX > this.maxX || this.minY > this.maxY;
            }),
            (t.prototype.clear = function () {
              (this.minX = 1 / 0),
                (this.minY = 1 / 0),
                (this.maxX = -1 / 0),
                (this.maxY = -1 / 0);
            }),
            (t.prototype.getRectangle = function (t) {
              return this.minX > this.maxX || this.minY > this.maxY
                ? zt.EMPTY
                : (((t = t || new zt(0, 0, 1, 1)).x = this.minX),
                  (t.y = this.minY),
                  (t.width = this.maxX - this.minX),
                  (t.height = this.maxY - this.minY),
                  t);
            }),
            (t.prototype.addPoint = function (t) {
              (this.minX = Math.min(this.minX, t.x)),
                (this.maxX = Math.max(this.maxX, t.x)),
                (this.minY = Math.min(this.minY, t.y)),
                (this.maxY = Math.max(this.maxY, t.y));
            }),
            (t.prototype.addPointMatrix = function (t, e) {
              var i = t.a,
                r = t.b,
                n = t.c,
                o = t.d,
                s = t.tx,
                a = t.ty,
                h = i * e.x + n * e.y + s,
                u = r * e.x + o * e.y + a;
              (this.minX = Math.min(this.minX, h)),
                (this.maxX = Math.max(this.maxX, h)),
                (this.minY = Math.min(this.minY, u)),
                (this.maxY = Math.max(this.maxY, u));
            }),
            (t.prototype.addQuad = function (t) {
              var e = this.minX,
                i = this.minY,
                r = this.maxX,
                n = this.maxY,
                o = t[0],
                s = t[1];
              (e = o < e ? o : e),
                (i = s < i ? s : i),
                (r = o > r ? o : r),
                (n = s > n ? s : n),
                (e = (o = t[2]) < e ? o : e),
                (i = (s = t[3]) < i ? s : i),
                (r = o > r ? o : r),
                (n = s > n ? s : n),
                (e = (o = t[4]) < e ? o : e),
                (i = (s = t[5]) < i ? s : i),
                (r = o > r ? o : r),
                (n = s > n ? s : n),
                (e = (o = t[6]) < e ? o : e),
                (i = (s = t[7]) < i ? s : i),
                (r = o > r ? o : r),
                (n = s > n ? s : n),
                (this.minX = e),
                (this.minY = i),
                (this.maxX = r),
                (this.maxY = n);
            }),
            (t.prototype.addFrame = function (t, e, i, r, n) {
              this.addFrameMatrix(t.worldTransform, e, i, r, n);
            }),
            (t.prototype.addFrameMatrix = function (t, e, i, r, n) {
              var o = t.a,
                s = t.b,
                a = t.c,
                h = t.d,
                u = t.tx,
                l = t.ty,
                c = this.minX,
                d = this.minY,
                p = this.maxX,
                _ = this.maxY,
                f = o * e + a * i + u,
                m = s * e + h * i + l;
              (c = f < c ? f : c),
                (d = m < d ? m : d),
                (p = f > p ? f : p),
                (_ = m > _ ? m : _),
                (c = (f = o * r + a * i + u) < c ? f : c),
                (d = (m = s * r + h * i + l) < d ? m : d),
                (p = f > p ? f : p),
                (_ = m > _ ? m : _),
                (c = (f = o * e + a * n + u) < c ? f : c),
                (d = (m = s * e + h * n + l) < d ? m : d),
                (p = f > p ? f : p),
                (_ = m > _ ? m : _),
                (c = (f = o * r + a * n + u) < c ? f : c),
                (d = (m = s * r + h * n + l) < d ? m : d),
                (p = f > p ? f : p),
                (_ = m > _ ? m : _),
                (this.minX = c),
                (this.minY = d),
                (this.maxX = p),
                (this.maxY = _);
            }),
            (t.prototype.addVertexData = function (t, e, i) {
              for (
                var r = this.minX,
                  n = this.minY,
                  o = this.maxX,
                  s = this.maxY,
                  a = e;
                a < i;
                a += 2
              ) {
                var h = t[a],
                  u = t[a + 1];
                (r = h < r ? h : r),
                  (n = u < n ? u : n),
                  (o = h > o ? h : o),
                  (s = u > s ? u : s);
              }
              (this.minX = r),
                (this.minY = n),
                (this.maxX = o),
                (this.maxY = s);
            }),
            (t.prototype.addVertices = function (t, e, i, r) {
              this.addVerticesMatrix(t.worldTransform, e, i, r);
            }),
            (t.prototype.addVerticesMatrix = function (t, e, i, r, n, o) {
              void 0 === n && (n = 0), void 0 === o && (o = n);
              for (
                var s = t.a,
                  a = t.b,
                  h = t.c,
                  u = t.d,
                  l = t.tx,
                  c = t.ty,
                  d = this.minX,
                  p = this.minY,
                  _ = this.maxX,
                  f = this.maxY,
                  m = i;
                m < r;
                m += 2
              ) {
                var y = e[m],
                  g = e[m + 1],
                  v = s * y + h * g + l,
                  b = u * g + a * y + c;
                (d = Math.min(d, v - n)),
                  (_ = Math.max(_, v + n)),
                  (p = Math.min(p, b - o)),
                  (f = Math.max(f, b + o));
              }
              (this.minX = d),
                (this.minY = p),
                (this.maxX = _),
                (this.maxY = f);
            }),
            (t.prototype.addBounds = function (t) {
              var e = this.minX,
                i = this.minY,
                r = this.maxX,
                n = this.maxY;
              (this.minX = t.minX < e ? t.minX : e),
                (this.minY = t.minY < i ? t.minY : i),
                (this.maxX = t.maxX > r ? t.maxX : r),
                (this.maxY = t.maxY > n ? t.maxY : n);
            }),
            (t.prototype.addBoundsMask = function (t, e) {
              var i = t.minX > e.minX ? t.minX : e.minX,
                r = t.minY > e.minY ? t.minY : e.minY,
                n = t.maxX < e.maxX ? t.maxX : e.maxX,
                o = t.maxY < e.maxY ? t.maxY : e.maxY;
              if (i <= n && r <= o) {
                var s = this.minX,
                  a = this.minY,
                  h = this.maxX,
                  u = this.maxY;
                (this.minX = i < s ? i : s),
                  (this.minY = r < a ? r : a),
                  (this.maxX = n > h ? n : h),
                  (this.maxY = o > u ? o : u);
              }
            }),
            (t.prototype.addBoundsMatrix = function (t, e) {
              this.addFrameMatrix(e, t.minX, t.minY, t.maxX, t.maxY);
            }),
            (t.prototype.addBoundsArea = function (t, e) {
              var i = t.minX > e.x ? t.minX : e.x,
                r = t.minY > e.y ? t.minY : e.y,
                n = t.maxX < e.x + e.width ? t.maxX : e.x + e.width,
                o = t.maxY < e.y + e.height ? t.maxY : e.y + e.height;
              if (i <= n && r <= o) {
                var s = this.minX,
                  a = this.minY,
                  h = this.maxX,
                  u = this.maxY;
                (this.minX = i < s ? i : s),
                  (this.minY = r < a ? r : a),
                  (this.maxX = n > h ? n : h),
                  (this.maxY = o > u ? o : u);
              }
            }),
            (t.prototype.pad = function (t, e) {
              void 0 === t && (t = 0),
                void 0 === e && (e = t),
                this.isEmpty() ||
                  ((this.minX -= t),
                  (this.maxX += t),
                  (this.minY -= e),
                  (this.maxY += e));
            }),
            (t.prototype.addFramePad = function (t, e, i, r, n, o) {
              (t -= n),
                (e -= o),
                (i += n),
                (r += o),
                (this.minX = this.minX < t ? this.minX : t),
                (this.maxX = this.maxX > i ? this.maxX : i),
                (this.minY = this.minY < e ? this.minY : e),
                (this.maxY = this.maxY > r ? this.maxY : r);
            }),
            t
          );
        })(),
        se = function (t, e) {
          return (
            (se =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
              }),
            se(t, e)
          );
        };
      function ae(t, e) {
        function i() {
          this.constructor = t;
        }
        se(t, e),
          (t.prototype =
            null === e
              ? Object.create(e)
              : ((i.prototype = e.prototype), new i()));
      }
      var he = (function (t) {
          function e() {
            var e = t.call(this) || this;
            return (
              (e.tempDisplayObjectParent = null),
              (e.transform = new ne()),
              (e.alpha = 1),
              (e.visible = !0),
              (e.renderable = !0),
              (e.cullable = !1),
              (e.cullArea = null),
              (e.parent = null),
              (e.worldAlpha = 1),
              (e._lastSortedIndex = 0),
              (e._zIndex = 0),
              (e.filterArea = null),
              (e.filters = null),
              (e._enabledFilters = null),
              (e._bounds = new oe()),
              (e._localBounds = null),
              (e._boundsID = 0),
              (e._boundsRect = null),
              (e._localBoundsRect = null),
              (e._mask = null),
              (e._maskRefCount = 0),
              (e._destroyed = !1),
              (e.isSprite = !1),
              (e.isMask = !1),
              e
            );
          }
          return (
            ae(e, t),
            (e.mixin = function (t) {
              for (var i = Object.keys(t), r = 0; r < i.length; ++r) {
                var n = i[r];
                Object.defineProperty(
                  e.prototype,
                  n,
                  Object.getOwnPropertyDescriptor(t, n)
                );
              }
            }),
            Object.defineProperty(e.prototype, "destroyed", {
              get: function () {
                return this._destroyed;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype._recursivePostUpdateTransform = function () {
              this.parent
                ? (this.parent._recursivePostUpdateTransform(),
                  this.transform.updateTransform(this.parent.transform))
                : this.transform.updateTransform(
                    this._tempDisplayObjectParent.transform
                  );
            }),
            (e.prototype.updateTransform = function () {
              this._boundsID++,
                this.transform.updateTransform(this.parent.transform),
                (this.worldAlpha = this.alpha * this.parent.worldAlpha);
            }),
            (e.prototype.getBounds = function (t, e) {
              return (
                t ||
                  (this.parent
                    ? (this._recursivePostUpdateTransform(),
                      this.updateTransform())
                    : ((this.parent = this._tempDisplayObjectParent),
                      this.updateTransform(),
                      (this.parent = null))),
                this._bounds.updateID !== this._boundsID &&
                  (this.calculateBounds(),
                  (this._bounds.updateID = this._boundsID)),
                e ||
                  (this._boundsRect || (this._boundsRect = new zt()),
                  (e = this._boundsRect)),
                this._bounds.getRectangle(e)
              );
            }),
            (e.prototype.getLocalBounds = function (t) {
              t ||
                (this._localBoundsRect || (this._localBoundsRect = new zt()),
                (t = this._localBoundsRect)),
                this._localBounds || (this._localBounds = new oe());
              var e = this.transform,
                i = this.parent;
              (this.parent = null),
                (this.transform = this._tempDisplayObjectParent.transform);
              var r = this._bounds,
                n = this._boundsID;
              this._bounds = this._localBounds;
              var o = this.getBounds(!1, t);
              return (
                (this.parent = i),
                (this.transform = e),
                (this._bounds = r),
                (this._bounds.updateID += this._boundsID - n),
                o
              );
            }),
            (e.prototype.toGlobal = function (t, e, i) {
              return (
                void 0 === i && (i = !1),
                i ||
                  (this._recursivePostUpdateTransform(),
                  this.parent
                    ? this.displayObjectUpdateTransform()
                    : ((this.parent = this._tempDisplayObjectParent),
                      this.displayObjectUpdateTransform(),
                      (this.parent = null))),
                this.worldTransform.apply(t, e)
              );
            }),
            (e.prototype.toLocal = function (t, e, i, r) {
              return (
                e && (t = e.toGlobal(t, i, r)),
                r ||
                  (this._recursivePostUpdateTransform(),
                  this.parent
                    ? this.displayObjectUpdateTransform()
                    : ((this.parent = this._tempDisplayObjectParent),
                      this.displayObjectUpdateTransform(),
                      (this.parent = null))),
                this.worldTransform.applyInverse(t, i)
              );
            }),
            (e.prototype.setParent = function (t) {
              if (!t || !t.addChild)
                throw new Error("setParent: Argument must be a Container");
              return t.addChild(this), t;
            }),
            (e.prototype.setTransform = function (t, e, i, r, n, o, s, a, h) {
              return (
                void 0 === t && (t = 0),
                void 0 === e && (e = 0),
                void 0 === i && (i = 1),
                void 0 === r && (r = 1),
                void 0 === n && (n = 0),
                void 0 === o && (o = 0),
                void 0 === s && (s = 0),
                void 0 === a && (a = 0),
                void 0 === h && (h = 0),
                (this.position.x = t),
                (this.position.y = e),
                (this.scale.x = i || 1),
                (this.scale.y = r || 1),
                (this.rotation = n),
                (this.skew.x = o),
                (this.skew.y = s),
                (this.pivot.x = a),
                (this.pivot.y = h),
                this
              );
            }),
            (e.prototype.destroy = function (t) {
              this.parent && this.parent.removeChild(this),
                (this._destroyed = !0),
                (this.transform = null),
                (this.parent = null),
                (this._bounds = null),
                (this.mask = null),
                (this.cullArea = null),
                (this.filters = null),
                (this.filterArea = null),
                (this.hitArea = null),
                (this.interactive = !1),
                (this.interactiveChildren = !1),
                this.emit("destroyed"),
                this.removeAllListeners();
            }),
            Object.defineProperty(e.prototype, "_tempDisplayObjectParent", {
              get: function () {
                return (
                  null === this.tempDisplayObjectParent &&
                    (this.tempDisplayObjectParent = new ue()),
                  this.tempDisplayObjectParent
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.enableTempParent = function () {
              var t = this.parent;
              return (this.parent = this._tempDisplayObjectParent), t;
            }),
            (e.prototype.disableTempParent = function (t) {
              this.parent = t;
            }),
            Object.defineProperty(e.prototype, "x", {
              get: function () {
                return this.position.x;
              },
              set: function (t) {
                this.transform.position.x = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "y", {
              get: function () {
                return this.position.y;
              },
              set: function (t) {
                this.transform.position.y = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "worldTransform", {
              get: function () {
                return this.transform.worldTransform;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "localTransform", {
              get: function () {
                return this.transform.localTransform;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "position", {
              get: function () {
                return this.transform.position;
              },
              set: function (t) {
                this.transform.position.copyFrom(t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "scale", {
              get: function () {
                return this.transform.scale;
              },
              set: function (t) {
                this.transform.scale.copyFrom(t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "pivot", {
              get: function () {
                return this.transform.pivot;
              },
              set: function (t) {
                this.transform.pivot.copyFrom(t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "skew", {
              get: function () {
                return this.transform.skew;
              },
              set: function (t) {
                this.transform.skew.copyFrom(t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "rotation", {
              get: function () {
                return this.transform.rotation;
              },
              set: function (t) {
                this.transform.rotation = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "angle", {
              get: function () {
                return this.transform.rotation * Ut;
              },
              set: function (t) {
                this.transform.rotation = t * Gt;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "zIndex", {
              get: function () {
                return this._zIndex;
              },
              set: function (t) {
                (this._zIndex = t), this.parent && (this.parent.sortDirty = !0);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "worldVisible", {
              get: function () {
                var t = this;
                do {
                  if (!t.visible) return !1;
                  t = t.parent;
                } while (t);
                return !0;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "mask", {
              get: function () {
                return this._mask;
              },
              set: function (t) {
                var e;
                this._mask !== t &&
                  (this._mask &&
                    (e = this._mask.isMaskData
                      ? this._mask.maskObject
                      : this._mask) &&
                    (e._maskRefCount--,
                    0 === e._maskRefCount &&
                      ((e.renderable = !0), (e.isMask = !1))),
                  (this._mask = t),
                  this._mask &&
                    (e = this._mask.isMaskData
                      ? this._mask.maskObject
                      : this._mask) &&
                    (0 === e._maskRefCount &&
                      ((e.renderable = !1), (e.isMask = !0)),
                    e._maskRefCount++));
              },
              enumerable: !1,
              configurable: !0,
            }),
            e
          );
        })(ot),
        ue = (function (t) {
          function e() {
            var e = (null !== t && t.apply(this, arguments)) || this;
            return (e.sortDirty = null), e;
          }
          return ae(e, t), e;
        })(he);
      function le(t, e) {
        return t.zIndex === e.zIndex
          ? t._lastSortedIndex - e._lastSortedIndex
          : t.zIndex - e.zIndex;
      }
      he.prototype.displayObjectUpdateTransform = he.prototype.updateTransform;
      var ce = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (
            (e.children = []),
            (e.sortableChildren = nt.SORTABLE_CHILDREN),
            (e.sortDirty = !1),
            e
          );
        }
        return (
          ae(e, t),
          (e.prototype.onChildrenChange = function (t) {}),
          (e.prototype.addChild = function () {
            for (var t = arguments, e = [], i = 0; i < arguments.length; i++)
              e[i] = t[i];
            if (e.length > 1)
              for (var r = 0; r < e.length; r++) this.addChild(e[r]);
            else {
              var n = e[0];
              n.parent && n.parent.removeChild(n),
                (n.parent = this),
                (this.sortDirty = !0),
                (n.transform._parentID = -1),
                this.children.push(n),
                this._boundsID++,
                this.onChildrenChange(this.children.length - 1),
                this.emit("childAdded", n, this, this.children.length - 1),
                n.emit("added", this);
            }
            return e[0];
          }),
          (e.prototype.addChildAt = function (t, e) {
            if (e < 0 || e > this.children.length)
              throw new Error(
                t +
                  "addChildAt: The index " +
                  e +
                  " supplied is out of bounds " +
                  this.children.length
              );
            return (
              t.parent && t.parent.removeChild(t),
              (t.parent = this),
              (this.sortDirty = !0),
              (t.transform._parentID = -1),
              this.children.splice(e, 0, t),
              this._boundsID++,
              this.onChildrenChange(e),
              t.emit("added", this),
              this.emit("childAdded", t, this, e),
              t
            );
          }),
          (e.prototype.swapChildren = function (t, e) {
            if (t !== e) {
              var i = this.getChildIndex(t),
                r = this.getChildIndex(e);
              (this.children[i] = e),
                (this.children[r] = t),
                this.onChildrenChange(i < r ? i : r);
            }
          }),
          (e.prototype.getChildIndex = function (t) {
            var e = this.children.indexOf(t);
            if (-1 === e)
              throw new Error(
                "The supplied DisplayObject must be a child of the caller"
              );
            return e;
          }),
          (e.prototype.setChildIndex = function (t, e) {
            if (e < 0 || e >= this.children.length)
              throw new Error(
                "The index " +
                  e +
                  " supplied is out of bounds " +
                  this.children.length
              );
            var i = this.getChildIndex(t);
            St(this.children, i, 1),
              this.children.splice(e, 0, t),
              this.onChildrenChange(e);
          }),
          (e.prototype.getChildAt = function (t) {
            if (t < 0 || t >= this.children.length)
              throw new Error("getChildAt: Index (" + t + ") does not exist.");
            return this.children[t];
          }),
          (e.prototype.removeChild = function () {
            for (var t = arguments, e = [], i = 0; i < arguments.length; i++)
              e[i] = t[i];
            if (e.length > 1)
              for (var r = 0; r < e.length; r++) this.removeChild(e[r]);
            else {
              var n = e[0],
                o = this.children.indexOf(n);
              if (-1 === o) return null;
              (n.parent = null),
                (n.transform._parentID = -1),
                St(this.children, o, 1),
                this._boundsID++,
                this.onChildrenChange(o),
                n.emit("removed", this),
                this.emit("childRemoved", n, this, o);
            }
            return e[0];
          }),
          (e.prototype.removeChildAt = function (t) {
            var e = this.getChildAt(t);
            return (
              (e.parent = null),
              (e.transform._parentID = -1),
              St(this.children, t, 1),
              this._boundsID++,
              this.onChildrenChange(t),
              e.emit("removed", this),
              this.emit("childRemoved", e, this, t),
              e
            );
          }),
          (e.prototype.removeChildren = function (t, e) {
            void 0 === t && (t = 0), void 0 === e && (e = this.children.length);
            var i,
              r = t,
              n = e - r;
            if (n > 0 && n <= e) {
              i = this.children.splice(r, n);
              for (var o = 0; o < i.length; ++o)
                (i[o].parent = null),
                  i[o].transform && (i[o].transform._parentID = -1);
              for (
                this._boundsID++, this.onChildrenChange(t), o = 0;
                o < i.length;
                ++o
              )
                i[o].emit("removed", this),
                  this.emit("childRemoved", i[o], this, o);
              return i;
            }
            if (0 === n && 0 === this.children.length) return [];
            throw new RangeError(
              "removeChildren: numeric values are outside the acceptable range."
            );
          }),
          (e.prototype.sortChildren = function () {
            for (var t = !1, e = 0, i = this.children.length; e < i; ++e) {
              var r = this.children[e];
              (r._lastSortedIndex = e), t || 0 === r.zIndex || (t = !0);
            }
            t && this.children.length > 1 && this.children.sort(le),
              (this.sortDirty = !1);
          }),
          (e.prototype.updateTransform = function () {
            this.sortableChildren && this.sortDirty && this.sortChildren(),
              this._boundsID++,
              this.transform.updateTransform(this.parent.transform),
              (this.worldAlpha = this.alpha * this.parent.worldAlpha);
            for (var t = 0, e = this.children.length; t < e; ++t) {
              var i = this.children[t];
              i.visible && i.updateTransform();
            }
          }),
          (e.prototype.calculateBounds = function () {
            this._bounds.clear(), this._calculateBounds();
            for (var t = 0; t < this.children.length; t++) {
              var e = this.children[t];
              if (e.visible && e.renderable)
                if ((e.calculateBounds(), e._mask)) {
                  var i = e._mask.isMaskData ? e._mask.maskObject : e._mask;
                  i
                    ? (i.calculateBounds(),
                      this._bounds.addBoundsMask(e._bounds, i._bounds))
                    : this._bounds.addBounds(e._bounds);
                } else
                  e.filterArea
                    ? this._bounds.addBoundsArea(e._bounds, e.filterArea)
                    : this._bounds.addBounds(e._bounds);
            }
            this._bounds.updateID = this._boundsID;
          }),
          (e.prototype.getLocalBounds = function (e, i) {
            void 0 === i && (i = !1);
            var r = t.prototype.getLocalBounds.call(this, e);
            if (!i)
              for (var n = 0, o = this.children.length; n < o; ++n) {
                var s = this.children[n];
                s.visible && s.updateTransform();
              }
            return r;
          }),
          (e.prototype._calculateBounds = function () {}),
          (e.prototype._renderWithCulling = function (t) {
            var i = t.renderTexture.sourceFrame;
            if (i.width > 0 && i.height > 0) {
              var r, n;
              if (
                (this.cullArea
                  ? ((r = this.cullArea), (n = this.worldTransform))
                  : this._render !== e.prototype._render &&
                    (r = this.getBounds(!0)),
                r && i.intersects(r, n))
              )
                this._render(t);
              else if (this.cullArea) return;
              for (var o = 0, s = this.children.length; o < s; ++o) {
                var a = this.children[o],
                  h = a.cullable;
                (a.cullable = h || !this.cullArea),
                  a.render(t),
                  (a.cullable = h);
              }
            }
          }),
          (e.prototype.render = function (t) {
            if (this.visible && !(this.worldAlpha <= 0) && this.renderable)
              if (this._mask || (this.filters && this.filters.length))
                this.renderAdvanced(t);
              else if (this.cullable) this._renderWithCulling(t);
              else {
                this._render(t);
                for (var e = 0, i = this.children.length; e < i; ++e)
                  this.children[e].render(t);
              }
          }),
          (e.prototype.renderAdvanced = function (t) {
            var e = this.filters,
              i = this._mask;
            if (e) {
              this._enabledFilters || (this._enabledFilters = []),
                (this._enabledFilters.length = 0);
              for (var r = 0; r < e.length; r++)
                e[r].enabled && this._enabledFilters.push(e[r]);
            }
            var n =
              (e && this._enabledFilters && this._enabledFilters.length) ||
              (i &&
                (!i.isMaskData ||
                  (i.enabled && (i.autoDetect || i.type !== R.NONE))));
            if (
              (n && t.batch.flush(),
              e &&
                this._enabledFilters &&
                this._enabledFilters.length &&
                t.filter.push(this, this._enabledFilters),
              i && t.mask.push(this, this._mask),
              this.cullable)
            )
              this._renderWithCulling(t);
            else {
              this._render(t), (r = 0);
              for (var o = this.children.length; r < o; ++r)
                this.children[r].render(t);
            }
            n && t.batch.flush(),
              i && t.mask.pop(this),
              e &&
                this._enabledFilters &&
                this._enabledFilters.length &&
                t.filter.pop();
          }),
          (e.prototype._render = function (t) {}),
          (e.prototype.destroy = function (e) {
            t.prototype.destroy.call(this), (this.sortDirty = !1);
            var i = "boolean" == typeof e ? e : e && e.children,
              r = this.removeChildren(0, this.children.length);
            if (i) for (var n = 0; n < r.length; ++n) r[n].destroy(e);
          }),
          Object.defineProperty(e.prototype, "width", {
            get: function () {
              return this.scale.x * this.getLocalBounds().width;
            },
            set: function (t) {
              var e = this.getLocalBounds().width;
              (this.scale.x = 0 !== e ? t / e : 1), (this._width = t);
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(e.prototype, "height", {
            get: function () {
              return this.scale.y * this.getLocalBounds().height;
            },
            set: function (t) {
              var e = this.getLocalBounds().height;
              (this.scale.y = 0 !== e ? t / e : 1), (this._height = t);
            },
            enumerable: !1,
            configurable: !0,
          }),
          e
        );
      })(he);
      ce.prototype.containerUpdateTransform = ce.prototype.updateTransform;
      var de,
        pe = function () {
          return (
            (pe =
              Object.assign ||
              function (t) {
                for (
                  var e, i = arguments, r = 1, n = arguments.length;
                  r < n;
                  r++
                )
                  for (var o in (e = i[r]))
                    Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o]);
                return t;
              }),
            pe.apply(this, arguments)
          );
        };
      !(function (t) {
        (t.Application = "application"),
          (t.RendererPlugin = "renderer-webgl-plugin"),
          (t.CanvasRendererPlugin = "renderer-canvas-plugin"),
          (t.Loader = "loader"),
          (t.LoadParser = "load-parser"),
          (t.ResolveParser = "resolve-parser"),
          (t.CacheParser = "cache-parser"),
          (t.DetectionParser = "detection-parser");
      })(de || (de = {}));
      var _e,
        fe = function (t) {
          if ("function" == typeof t || ("object" == typeof t && t.extension)) {
            if (!t.extension)
              throw new Error("Extension class must have an extension object");
            var e =
              "object" != typeof t.extension
                ? { type: t.extension }
                : t.extension;
            t = pe(pe({}, e), { ref: t });
          }
          if ("object" != typeof t) throw new Error("Invalid extension type");
          return (
            "string" == typeof (t = pe({}, t)).type && (t.type = [t.type]), t
          );
        },
        me = {
          _addHandlers: null,
          _removeHandlers: null,
          _queue: {},
          remove: function () {
            for (
              var t = arguments, e = this, i = [], r = 0;
              r < arguments.length;
              r++
            )
              i[r] = t[r];
            return (
              i.map(fe).forEach(function (t) {
                t.type.forEach(function (i) {
                  var r, n;
                  return null === (n = (r = e._removeHandlers)[i]) ||
                    void 0 === n
                    ? void 0
                    : n.call(r, t);
                });
              }),
              this
            );
          },
          add: function () {
            for (
              var t = arguments, e = this, i = [], r = 0;
              r < arguments.length;
              r++
            )
              i[r] = t[r];
            return (
              i.map(fe).forEach(function (t) {
                t.type.forEach(function (i) {
                  var r = e._addHandlers,
                    n = e._queue;
                  r[i] ? r[i](t) : ((n[i] = n[i] || []), n[i].push(t));
                });
              }),
              this
            );
          },
          handle: function (t, e, i) {
            var r = (this._addHandlers = this._addHandlers || {}),
              n = (this._removeHandlers = this._removeHandlers || {});
            if (r[t] || n[t])
              throw new Error("Extension type " + t + " already has a handler");
            (r[t] = e), (n[t] = i);
            var o = this._queue;
            return (
              o[t] &&
                (o[t].forEach(function (t) {
                  return e(t);
                }),
                delete o[t]),
              this
            );
          },
          handleByMap: function (t, e) {
            return this.handle(
              t,
              function (t) {
                e[t.name] = t.ref;
              },
              function (t) {
                delete e[t.name];
              }
            );
          },
          handleByList: function (t, e) {
            return this.handle(
              t,
              function (i) {
                var r, n;
                e.includes(i.ref) ||
                  (e.push(i.ref),
                  t === de.Loader &&
                    (null === (n = (r = i.ref).add) ||
                      void 0 === n ||
                      n.call(r)));
              },
              function (t) {
                var i = e.indexOf(t.ref);
                -1 !== i && e.splice(i, 1);
              }
            );
          },
        },
        ye = (function () {
          function t(t) {
            (this.items = []), (this._name = t), (this._aliasCount = 0);
          }
          return (
            (t.prototype.emit = function (t, e, i, r, n, o, s, a) {
              if (arguments.length > 8)
                throw new Error("max arguments reached");
              var h = this.name,
                u = this.items;
              this._aliasCount++;
              for (var l = 0, c = u.length; l < c; l++)
                u[l][h](t, e, i, r, n, o, s, a);
              return u === this.items && this._aliasCount--, this;
            }),
            (t.prototype.ensureNonAliasedItems = function () {
              this._aliasCount > 0 &&
                this.items.length > 1 &&
                ((this._aliasCount = 0), (this.items = this.items.slice(0)));
            }),
            (t.prototype.add = function (t) {
              return (
                t[this._name] &&
                  (this.ensureNonAliasedItems(),
                  this.remove(t),
                  this.items.push(t)),
                this
              );
            }),
            (t.prototype.remove = function (t) {
              var e = this.items.indexOf(t);
              return (
                -1 !== e &&
                  (this.ensureNonAliasedItems(), this.items.splice(e, 1)),
                this
              );
            }),
            (t.prototype.contains = function (t) {
              return -1 !== this.items.indexOf(t);
            }),
            (t.prototype.removeAll = function () {
              return (
                this.ensureNonAliasedItems(), (this.items.length = 0), this
              );
            }),
            (t.prototype.destroy = function () {
              this.removeAll(), (this.items = null), (this._name = null);
            }),
            Object.defineProperty(t.prototype, "empty", {
              get: function () {
                return 0 === this.items.length;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "name", {
              get: function () {
                return this._name;
              },
              enumerable: !1,
              configurable: !0,
            }),
            t
          );
        })();
      Object.defineProperties(ye.prototype, {
        dispatch: { value: ye.prototype.emit },
        run: { value: ye.prototype.emit },
      }),
        (nt.TARGET_FPMS = 0.06),
        (function (t) {
          (t[(t.INTERACTION = 50)] = "INTERACTION"),
            (t[(t.HIGH = 25)] = "HIGH"),
            (t[(t.NORMAL = 0)] = "NORMAL"),
            (t[(t.LOW = -25)] = "LOW"),
            (t[(t.UTILITY = -50)] = "UTILITY");
        })(_e || (_e = {}));
      var ge = (function () {
          function t(t, e, i, r) {
            void 0 === e && (e = null),
              void 0 === i && (i = 0),
              void 0 === r && (r = !1),
              (this.next = null),
              (this.previous = null),
              (this._destroyed = !1),
              (this.fn = t),
              (this.context = e),
              (this.priority = i),
              (this.once = r);
          }
          return (
            (t.prototype.match = function (t, e) {
              return (
                void 0 === e && (e = null), this.fn === t && this.context === e
              );
            }),
            (t.prototype.emit = function (t) {
              this.fn &&
                (this.context ? this.fn.call(this.context, t) : this.fn(t));
              var e = this.next;
              return (
                this.once && this.destroy(!0),
                this._destroyed && (this.next = null),
                e
              );
            }),
            (t.prototype.connect = function (t) {
              (this.previous = t),
                t.next && (t.next.previous = this),
                (this.next = t.next),
                (t.next = this);
            }),
            (t.prototype.destroy = function (t) {
              void 0 === t && (t = !1),
                (this._destroyed = !0),
                (this.fn = null),
                (this.context = null),
                this.previous && (this.previous.next = this.next),
                this.next && (this.next.previous = this.previous);
              var e = this.next;
              return (this.next = t ? null : e), (this.previous = null), e;
            }),
            t
          );
        })(),
        ve = (function () {
          function t() {
            var t = this;
            (this.autoStart = !1),
              (this.deltaTime = 1),
              (this.lastTime = -1),
              (this.speed = 1),
              (this.started = !1),
              (this._requestId = null),
              (this._maxElapsedMS = 100),
              (this._minElapsedMS = 0),
              (this._protected = !1),
              (this._lastFrame = -1),
              (this._head = new ge(null, null, 1 / 0)),
              (this.deltaMS = 1 / nt.TARGET_FPMS),
              (this.elapsedMS = 1 / nt.TARGET_FPMS),
              (this._tick = function (e) {
                (t._requestId = null),
                  t.started &&
                    (t.update(e),
                    t.started &&
                      null === t._requestId &&
                      t._head.next &&
                      (t._requestId = requestAnimationFrame(t._tick)));
              });
          }
          return (
            (t.prototype._requestIfNeeded = function () {
              null === this._requestId &&
                this._head.next &&
                ((this.lastTime = performance.now()),
                (this._lastFrame = this.lastTime),
                (this._requestId = requestAnimationFrame(this._tick)));
            }),
            (t.prototype._cancelIfNeeded = function () {
              null !== this._requestId &&
                (cancelAnimationFrame(this._requestId),
                (this._requestId = null));
            }),
            (t.prototype._startIfPossible = function () {
              this.started
                ? this._requestIfNeeded()
                : this.autoStart && this.start();
            }),
            (t.prototype.add = function (t, e, i) {
              return (
                void 0 === i && (i = _e.NORMAL),
                this._addListener(new ge(t, e, i))
              );
            }),
            (t.prototype.addOnce = function (t, e, i) {
              return (
                void 0 === i && (i = _e.NORMAL),
                this._addListener(new ge(t, e, i, !0))
              );
            }),
            (t.prototype._addListener = function (t) {
              var e = this._head.next,
                i = this._head;
              if (e) {
                for (; e; ) {
                  if (t.priority > e.priority) {
                    t.connect(i);
                    break;
                  }
                  (i = e), (e = e.next);
                }
                t.previous || t.connect(i);
              } else t.connect(i);
              return this._startIfPossible(), this;
            }),
            (t.prototype.remove = function (t, e) {
              for (var i = this._head.next; i; )
                i = i.match(t, e) ? i.destroy() : i.next;
              return this._head.next || this._cancelIfNeeded(), this;
            }),
            Object.defineProperty(t.prototype, "count", {
              get: function () {
                if (!this._head) return 0;
                for (var t = 0, e = this._head; (e = e.next); ) t++;
                return t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.start = function () {
              this.started || ((this.started = !0), this._requestIfNeeded());
            }),
            (t.prototype.stop = function () {
              this.started && ((this.started = !1), this._cancelIfNeeded());
            }),
            (t.prototype.destroy = function () {
              if (!this._protected) {
                this.stop();
                for (var t = this._head.next; t; ) t = t.destroy(!0);
                this._head.destroy(), (this._head = null);
              }
            }),
            (t.prototype.update = function (t) {
              var e;
              if (
                (void 0 === t && (t = performance.now()), t > this.lastTime)
              ) {
                if (
                  ((e = this.elapsedMS = t - this.lastTime) >
                    this._maxElapsedMS && (e = this._maxElapsedMS),
                  (e *= this.speed),
                  this._minElapsedMS)
                ) {
                  var i = (t - this._lastFrame) | 0;
                  if (i < this._minElapsedMS) return;
                  this._lastFrame = t - (i % this._minElapsedMS);
                }
                (this.deltaMS = e),
                  (this.deltaTime = this.deltaMS * nt.TARGET_FPMS);
                for (var r = this._head, n = r.next; n; )
                  n = n.emit(this.deltaTime);
                r.next || this._cancelIfNeeded();
              } else this.deltaTime = this.deltaMS = this.elapsedMS = 0;
              this.lastTime = t;
            }),
            Object.defineProperty(t.prototype, "FPS", {
              get: function () {
                return 1e3 / this.elapsedMS;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "minFPS", {
              get: function () {
                return 1e3 / this._maxElapsedMS;
              },
              set: function (t) {
                var e = Math.min(this.maxFPS, t),
                  i = Math.min(Math.max(0, e) / 1e3, nt.TARGET_FPMS);
                this._maxElapsedMS = 1 / i;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "maxFPS", {
              get: function () {
                return this._minElapsedMS
                  ? Math.round(1e3 / this._minElapsedMS)
                  : 0;
              },
              set: function (t) {
                if (0 === t) this._minElapsedMS = 0;
                else {
                  var e = Math.max(this.minFPS, t);
                  this._minElapsedMS = 1 / (e / 1e3);
                }
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "shared", {
              get: function () {
                if (!t._shared) {
                  var e = (t._shared = new t());
                  (e.autoStart = !0), (e._protected = !0);
                }
                return t._shared;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "system", {
              get: function () {
                if (!t._system) {
                  var e = (t._system = new t());
                  (e.autoStart = !0), (e._protected = !0);
                }
                return t._system;
              },
              enumerable: !1,
              configurable: !0,
            }),
            t
          );
        })(),
        be = (function () {
          function t() {}
          return (
            (t.init = function (t) {
              var e = this;
              (t = Object.assign({ autoStart: !0, sharedTicker: !1 }, t)),
                Object.defineProperty(this, "ticker", {
                  set: function (t) {
                    this._ticker && this._ticker.remove(this.render, this),
                      (this._ticker = t),
                      t && t.add(this.render, this, _e.LOW);
                  },
                  get: function () {
                    return this._ticker;
                  },
                }),
                (this.stop = function () {
                  e._ticker.stop();
                }),
                (this.start = function () {
                  e._ticker.start();
                }),
                (this._ticker = null),
                (this.ticker = t.sharedTicker ? ve.shared : new ve()),
                t.autoStart && this.start();
            }),
            (t.destroy = function () {
              if (this._ticker) {
                var t = this._ticker;
                (this.ticker = null), t.destroy();
              }
            }),
            (t.extension = de.Application),
            t
          );
        })();
      (nt.PREFER_ENV = rt.any ? m.WEBGL : m.WEBGL2),
        (nt.STRICT_TEXTURE_CACHE = !1);
      var xe = [];
      function we(t, e) {
        if (!t) return null;
        var i = "";
        if ("string" == typeof t) {
          var r = /\.(\w{3,4})(?:$|\?|#)/i.exec(t);
          r && (i = r[1].toLowerCase());
        }
        for (var n = xe.length - 1; n >= 0; --n) {
          var o = xe[n];
          if (o.test && o.test(t, i)) return new o(t, e);
        }
        throw new Error("Unrecognized source type to auto-detect Resource");
      }
      var Te = function (t, e) {
        return (
          (Te =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
            }),
          Te(t, e)
        );
      };
      function Ae(t, e) {
        function i() {
          this.constructor = t;
        }
        Te(t, e),
          (t.prototype =
            null === e
              ? Object.create(e)
              : ((i.prototype = e.prototype), new i()));
      }
      var Se = function () {
          return (
            (Se =
              Object.assign ||
              function (t) {
                for (
                  var e, i = arguments, r = 1, n = arguments.length;
                  r < n;
                  r++
                )
                  for (var o in (e = i[r]))
                    Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o]);
                return t;
              }),
            Se.apply(this, arguments)
          );
        },
        Ee = (function () {
          function t(t, e) {
            void 0 === t && (t = 0),
              void 0 === e && (e = 0),
              (this._width = t),
              (this._height = e),
              (this.destroyed = !1),
              (this.internal = !1),
              (this.onResize = new ye("setRealSize")),
              (this.onUpdate = new ye("update")),
              (this.onError = new ye("onError"));
          }
          return (
            (t.prototype.bind = function (t) {
              this.onResize.add(t),
                this.onUpdate.add(t),
                this.onError.add(t),
                (this._width || this._height) &&
                  this.onResize.emit(this._width, this._height);
            }),
            (t.prototype.unbind = function (t) {
              this.onResize.remove(t),
                this.onUpdate.remove(t),
                this.onError.remove(t);
            }),
            (t.prototype.resize = function (t, e) {
              (t === this._width && e === this._height) ||
                ((this._width = t),
                (this._height = e),
                this.onResize.emit(t, e));
            }),
            Object.defineProperty(t.prototype, "valid", {
              get: function () {
                return !!this._width && !!this._height;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.update = function () {
              this.destroyed || this.onUpdate.emit();
            }),
            (t.prototype.load = function () {
              return Promise.resolve(this);
            }),
            Object.defineProperty(t.prototype, "width", {
              get: function () {
                return this._width;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "height", {
              get: function () {
                return this._height;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.style = function (t, e, i) {
              return !1;
            }),
            (t.prototype.dispose = function () {}),
            (t.prototype.destroy = function () {
              this.destroyed ||
                ((this.destroyed = !0),
                this.dispose(),
                this.onError.removeAll(),
                (this.onError = null),
                this.onResize.removeAll(),
                (this.onResize = null),
                this.onUpdate.removeAll(),
                (this.onUpdate = null));
            }),
            (t.test = function (t, e) {
              return !1;
            }),
            t
          );
        })(),
        Ce = (function (t) {
          function e(e, i) {
            var r = this,
              n = i || {},
              o = n.width,
              s = n.height;
            if (!o || !s)
              throw new Error("BufferResource width or height invalid");
            return ((r = t.call(this, o, s) || this).data = e), r;
          }
          return (
            Ae(e, t),
            (e.prototype.upload = function (t, e, i) {
              var r = t.gl;
              r.pixelStorei(
                r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
                e.alphaMode === M.UNPACK
              );
              var n = e.realWidth,
                o = e.realHeight;
              return (
                i.width === n && i.height === o
                  ? r.texSubImage2D(
                      e.target,
                      0,
                      0,
                      0,
                      n,
                      o,
                      e.format,
                      i.type,
                      this.data
                    )
                  : ((i.width = n),
                    (i.height = o),
                    r.texImage2D(
                      e.target,
                      0,
                      i.internalFormat,
                      n,
                      o,
                      0,
                      e.format,
                      i.type,
                      this.data
                    )),
                !0
              );
            }),
            (e.prototype.dispose = function () {
              this.data = null;
            }),
            (e.test = function (t) {
              return (
                t instanceof Float32Array ||
                t instanceof Uint8Array ||
                t instanceof Uint32Array
              );
            }),
            e
          );
        })(Ee),
        Me = { scaleMode: S.NEAREST, format: x.RGBA, alphaMode: M.NPM },
        Pe = (function (t) {
          function e(e, i) {
            void 0 === e && (e = null), void 0 === i && (i = null);
            var r = t.call(this) || this,
              n = (i = i || {}).alphaMode,
              o = i.mipmap,
              s = i.anisotropicLevel,
              a = i.scaleMode,
              h = i.width,
              u = i.height,
              l = i.wrapMode,
              c = i.format,
              d = i.type,
              p = i.target,
              _ = i.resolution,
              f = i.resourceOptions;
            return (
              !e || e instanceof Ee || ((e = we(e, f)).internal = !0),
              (r.resolution = _ || nt.RESOLUTION),
              (r.width = Math.round((h || 0) * r.resolution) / r.resolution),
              (r.height = Math.round((u || 0) * r.resolution) / r.resolution),
              (r._mipmap = void 0 !== o ? o : nt.MIPMAP_TEXTURES),
              (r.anisotropicLevel = void 0 !== s ? s : nt.ANISOTROPIC_LEVEL),
              (r._wrapMode = l || nt.WRAP_MODE),
              (r._scaleMode = void 0 !== a ? a : nt.SCALE_MODE),
              (r.format = c || x.RGBA),
              (r.type = d || T.UNSIGNED_BYTE),
              (r.target = p || w.TEXTURE_2D),
              (r.alphaMode = void 0 !== n ? n : M.UNPACK),
              (r.uid = Mt()),
              (r.touched = 0),
              (r.isPowerOfTwo = !1),
              r._refreshPOT(),
              (r._glTextures = {}),
              (r.dirtyId = 0),
              (r.dirtyStyleId = 0),
              (r.cacheId = null),
              (r.valid = h > 0 && u > 0),
              (r.textureCacheIds = []),
              (r.destroyed = !1),
              (r.resource = null),
              (r._batchEnabled = 0),
              (r._batchLocation = 0),
              (r.parentTextureArray = null),
              r.setResource(e),
              r
            );
          }
          return (
            Ae(e, t),
            Object.defineProperty(e.prototype, "realWidth", {
              get: function () {
                return Math.round(this.width * this.resolution);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "realHeight", {
              get: function () {
                return Math.round(this.height * this.resolution);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "mipmap", {
              get: function () {
                return this._mipmap;
              },
              set: function (t) {
                this._mipmap !== t && ((this._mipmap = t), this.dirtyStyleId++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "scaleMode", {
              get: function () {
                return this._scaleMode;
              },
              set: function (t) {
                this._scaleMode !== t &&
                  ((this._scaleMode = t), this.dirtyStyleId++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "wrapMode", {
              get: function () {
                return this._wrapMode;
              },
              set: function (t) {
                this._wrapMode !== t &&
                  ((this._wrapMode = t), this.dirtyStyleId++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.setStyle = function (t, e) {
              var i;
              return (
                void 0 !== t &&
                  t !== this.scaleMode &&
                  ((this.scaleMode = t), (i = !0)),
                void 0 !== e &&
                  e !== this.mipmap &&
                  ((this.mipmap = e), (i = !0)),
                i && this.dirtyStyleId++,
                this
              );
            }),
            (e.prototype.setSize = function (t, e, i) {
              return (
                (i = i || this.resolution), this.setRealSize(t * i, e * i, i)
              );
            }),
            (e.prototype.setRealSize = function (t, e, i) {
              return (
                (this.resolution = i || this.resolution),
                (this.width = Math.round(t) / this.resolution),
                (this.height = Math.round(e) / this.resolution),
                this._refreshPOT(),
                this.update(),
                this
              );
            }),
            (e.prototype._refreshPOT = function () {
              this.isPowerOfTwo = Tt(this.realWidth) && Tt(this.realHeight);
            }),
            (e.prototype.setResolution = function (t) {
              var e = this.resolution;
              return (
                e === t ||
                  ((this.resolution = t),
                  this.valid &&
                    ((this.width = Math.round(this.width * e) / t),
                    (this.height = Math.round(this.height * e) / t),
                    this.emit("update", this)),
                  this._refreshPOT()),
                this
              );
            }),
            (e.prototype.setResource = function (t) {
              if (this.resource === t) return this;
              if (this.resource)
                throw new Error("Resource can be set only once");
              return t.bind(this), (this.resource = t), this;
            }),
            (e.prototype.update = function () {
              this.valid
                ? (this.dirtyId++,
                  this.dirtyStyleId++,
                  this.emit("update", this))
                : this.width > 0 &&
                  this.height > 0 &&
                  ((this.valid = !0),
                  this.emit("loaded", this),
                  this.emit("update", this));
            }),
            (e.prototype.onError = function (t) {
              this.emit("error", this, t);
            }),
            (e.prototype.destroy = function () {
              this.resource &&
                (this.resource.unbind(this),
                this.resource.internal && this.resource.destroy(),
                (this.resource = null)),
                this.cacheId &&
                  (delete kt[this.cacheId],
                  delete It[this.cacheId],
                  (this.cacheId = null)),
                this.dispose(),
                e.removeFromCache(this),
                (this.textureCacheIds = null),
                (this.destroyed = !0);
            }),
            (e.prototype.dispose = function () {
              this.emit("dispose", this);
            }),
            (e.prototype.castToBaseTexture = function () {
              return this;
            }),
            (e.from = function (t, i, r) {
              void 0 === r && (r = nt.STRICT_TEXTURE_CACHE);
              var n = "string" == typeof t,
                o = null;
              if (n) o = t;
              else {
                if (!t._pixiId) {
                  var s = (i && i.pixiIdPrefix) || "pixiid";
                  t._pixiId = s + "_" + Mt();
                }
                o = t._pixiId;
              }
              var a = kt[o];
              if (n && r && !a)
                throw new Error(
                  'The cacheId "' + o + '" does not exist in BaseTextureCache.'
                );
              return (
                a || (((a = new e(t, i)).cacheId = o), e.addToCache(a, o)), a
              );
            }),
            (e.fromBuffer = function (t, i, r, n) {
              t = t || new Float32Array(i * r * 4);
              var o = new Ce(t, { width: i, height: r }),
                s = t instanceof Float32Array ? T.FLOAT : T.UNSIGNED_BYTE;
              return new e(
                o,
                Object.assign({}, Me, n || { width: i, height: r, type: s })
              );
            }),
            (e.addToCache = function (t, e) {
              e &&
                (-1 === t.textureCacheIds.indexOf(e) &&
                  t.textureCacheIds.push(e),
                kt[e] &&
                  console.warn(
                    "BaseTexture added to the cache with an id [" +
                      e +
                      "] that already had an entry"
                  ),
                (kt[e] = t));
            }),
            (e.removeFromCache = function (t) {
              if ("string" == typeof t) {
                var e = kt[t];
                if (e) {
                  var i = e.textureCacheIds.indexOf(t);
                  return (
                    i > -1 && e.textureCacheIds.splice(i, 1), delete kt[t], e
                  );
                }
              } else if (t && t.textureCacheIds) {
                for (var r = 0; r < t.textureCacheIds.length; ++r)
                  delete kt[t.textureCacheIds[r]];
                return (t.textureCacheIds.length = 0), t;
              }
              return null;
            }),
            (e._globalBatch = 0),
            e
          );
        })(ot),
        Be = (function (t) {
          function e(e, i) {
            var r = this,
              n = i || {},
              o = n.width,
              s = n.height;
            ((r = t.call(this, o, s) || this).items = []),
              (r.itemDirtyIds = []);
            for (var a = 0; a < e; a++) {
              var h = new Pe();
              r.items.push(h), r.itemDirtyIds.push(-2);
            }
            return (r.length = e), (r._load = null), (r.baseTexture = null), r;
          }
          return (
            Ae(e, t),
            (e.prototype.initFromArray = function (t, e) {
              for (var i = 0; i < this.length; i++)
                t[i] &&
                  (t[i].castToBaseTexture
                    ? this.addBaseTextureAt(t[i].castToBaseTexture(), i)
                    : t[i] instanceof Ee
                    ? this.addResourceAt(t[i], i)
                    : this.addResourceAt(we(t[i], e), i));
            }),
            (e.prototype.dispose = function () {
              for (var t = 0, e = this.length; t < e; t++)
                this.items[t].destroy();
              (this.items = null),
                (this.itemDirtyIds = null),
                (this._load = null);
            }),
            (e.prototype.addResourceAt = function (t, e) {
              if (!this.items[e])
                throw new Error("Index " + e + " is out of bounds");
              return (
                t.valid && !this.valid && this.resize(t.width, t.height),
                this.items[e].setResource(t),
                this
              );
            }),
            (e.prototype.bind = function (e) {
              if (null !== this.baseTexture)
                throw new Error(
                  "Only one base texture per TextureArray is allowed"
                );
              t.prototype.bind.call(this, e);
              for (var i = 0; i < this.length; i++)
                (this.items[i].parentTextureArray = e),
                  this.items[i].on("update", e.update, e);
            }),
            (e.prototype.unbind = function (e) {
              t.prototype.unbind.call(this, e);
              for (var i = 0; i < this.length; i++)
                (this.items[i].parentTextureArray = null),
                  this.items[i].off("update", e.update, e);
            }),
            (e.prototype.load = function () {
              var t = this;
              if (this._load) return this._load;
              var e = this.items
                .map(function (t) {
                  return t.resource;
                })
                .filter(function (t) {
                  return t;
                })
                .map(function (t) {
                  return t.load();
                });
              return (
                (this._load = Promise.all(e).then(function () {
                  var e = t.items[0],
                    i = e.realWidth,
                    r = e.realHeight;
                  return t.resize(i, r), Promise.resolve(t);
                })),
                this._load
              );
            }),
            e
          );
        })(Ee),
        Oe = (function (t) {
          function e(e, i) {
            var r,
              n,
              o = this,
              s = i || {},
              a = s.width,
              h = s.height;
            return (
              Array.isArray(e) ? ((r = e), (n = e.length)) : (n = e),
              (o = t.call(this, n, { width: a, height: h }) || this),
              r && o.initFromArray(r, i),
              o
            );
          }
          return (
            Ae(e, t),
            (e.prototype.addBaseTextureAt = function (t, e) {
              if (!t.resource)
                throw new Error("ArrayResource does not support RenderTexture");
              return this.addResourceAt(t.resource, e), this;
            }),
            (e.prototype.bind = function (e) {
              t.prototype.bind.call(this, e), (e.target = w.TEXTURE_2D_ARRAY);
            }),
            (e.prototype.upload = function (t, e, i) {
              var r = this,
                n = r.length,
                o = r.itemDirtyIds,
                s = r.items,
                a = t.gl;
              i.dirtyId < 0 &&
                a.texImage3D(
                  a.TEXTURE_2D_ARRAY,
                  0,
                  i.internalFormat,
                  this._width,
                  this._height,
                  n,
                  0,
                  e.format,
                  i.type,
                  null
                );
              for (var h = 0; h < n; h++) {
                var u = s[h];
                o[h] < u.dirtyId &&
                  ((o[h] = u.dirtyId),
                  u.valid &&
                    a.texSubImage3D(
                      a.TEXTURE_2D_ARRAY,
                      0,
                      0,
                      0,
                      h,
                      u.resource.width,
                      u.resource.height,
                      1,
                      e.format,
                      i.type,
                      u.resource.source
                    ));
              }
              return !0;
            }),
            e
          );
        })(Be),
        Re = (function (t) {
          function e(e) {
            var i = this,
              r = e,
              n = r.naturalWidth || r.videoWidth || r.width,
              o = r.naturalHeight || r.videoHeight || r.height;
            return (
              ((i = t.call(this, n, o) || this).source = e),
              (i.noSubImage = !1),
              i
            );
          }
          return (
            Ae(e, t),
            (e.crossOrigin = function (t, e, i) {
              void 0 === i && 0 !== e.indexOf("data:")
                ? (t.crossOrigin = (function (t, e) {
                    if (
                      (void 0 === e && (e = globalThis.location),
                      0 === t.indexOf("data:"))
                    )
                      return "";
                    (e = e || globalThis.location),
                      Ot || (Ot = document.createElement("a")),
                      (Ot.href = t);
                    var i = ht.parse(Ot.href),
                      r = (!i.port && "" === e.port) || i.port === e.port;
                    return i.hostname === e.hostname &&
                      r &&
                      i.protocol === e.protocol
                      ? ""
                      : "anonymous";
                  })(e))
                : !1 !== i &&
                  (t.crossOrigin = "string" == typeof i ? i : "anonymous");
            }),
            (e.prototype.upload = function (t, e, i, r) {
              var n = t.gl,
                o = e.realWidth,
                s = e.realHeight;
              if ((r = r || this.source) instanceof HTMLImageElement) {
                if (!r.complete || 0 === r.naturalWidth) return !1;
              } else if (r instanceof HTMLVideoElement && r.readyState <= 1)
                return !1;
              return (
                n.pixelStorei(
                  n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
                  e.alphaMode === M.UNPACK
                ),
                this.noSubImage ||
                e.target !== n.TEXTURE_2D ||
                i.width !== o ||
                i.height !== s
                  ? ((i.width = o),
                    (i.height = s),
                    n.texImage2D(
                      e.target,
                      0,
                      i.internalFormat,
                      e.format,
                      i.type,
                      r
                    ))
                  : n.texSubImage2D(n.TEXTURE_2D, 0, 0, 0, e.format, i.type, r),
                !0
              );
            }),
            (e.prototype.update = function () {
              if (!this.destroyed) {
                var e = this.source,
                  i = e.naturalWidth || e.videoWidth || e.width,
                  r = e.naturalHeight || e.videoHeight || e.height;
                this.resize(i, r), t.prototype.update.call(this);
              }
            }),
            (e.prototype.dispose = function () {
              this.source = null;
            }),
            e
          );
        })(Ee),
        Ie = (function (t) {
          function e(e) {
            return t.call(this, e) || this;
          }
          return (
            Ae(e, t),
            (e.test = function (t) {
              var e = globalThis.OffscreenCanvas;
              return (
                !!(e && t instanceof e) ||
                (globalThis.HTMLCanvasElement && t instanceof HTMLCanvasElement)
              );
            }),
            e
          );
        })(Re),
        ke = (function (t) {
          function e(i, r) {
            var n = this,
              o = r || {},
              s = o.width,
              a = o.height,
              h = o.autoLoad,
              u = o.linkBaseTexture;
            if (i && i.length !== e.SIDES)
              throw new Error(
                "Invalid length. Got " + i.length + ", expected 6"
              );
            n = t.call(this, 6, { width: s, height: a }) || this;
            for (var l = 0; l < e.SIDES; l++)
              n.items[l].target = w.TEXTURE_CUBE_MAP_POSITIVE_X + l;
            return (
              (n.linkBaseTexture = !1 !== u),
              i && n.initFromArray(i, r),
              !1 !== h && n.load(),
              n
            );
          }
          return (
            Ae(e, t),
            (e.prototype.bind = function (e) {
              t.prototype.bind.call(this, e), (e.target = w.TEXTURE_CUBE_MAP);
            }),
            (e.prototype.addBaseTextureAt = function (t, e, i) {
              if (!this.items[e])
                throw new Error("Index " + e + " is out of bounds");
              if (
                !this.linkBaseTexture ||
                t.parentTextureArray ||
                Object.keys(t._glTextures).length > 0
              ) {
                if (!t.resource)
                  throw new Error(
                    "CubeResource does not support copying of renderTexture."
                  );
                this.addResourceAt(t.resource, e);
              } else
                (t.target = w.TEXTURE_CUBE_MAP_POSITIVE_X + e),
                  (t.parentTextureArray = this.baseTexture),
                  (this.items[e] = t);
              return (
                t.valid &&
                  !this.valid &&
                  this.resize(t.realWidth, t.realHeight),
                (this.items[e] = t),
                this
              );
            }),
            (e.prototype.upload = function (t, i, r) {
              for (var n = this.itemDirtyIds, o = 0; o < e.SIDES; o++) {
                var s = this.items[o];
                (n[o] < s.dirtyId || r.dirtyId < i.dirtyId) &&
                  (s.valid && s.resource
                    ? (s.resource.upload(t, s, r), (n[o] = s.dirtyId))
                    : n[o] < -1 &&
                      (t.gl.texImage2D(
                        s.target,
                        0,
                        r.internalFormat,
                        i.realWidth,
                        i.realHeight,
                        0,
                        i.format,
                        r.type,
                        null
                      ),
                      (n[o] = -1)));
              }
              return !0;
            }),
            (e.test = function (t) {
              return Array.isArray(t) && t.length === e.SIDES;
            }),
            (e.SIDES = 6),
            e
          );
        })(Be),
        Fe = (function (t) {
          function e(e, i) {
            var r = this;
            if (((i = i || {}), !(e instanceof HTMLImageElement))) {
              var n = new Image();
              Re.crossOrigin(n, e, i.crossorigin), (n.src = e), (e = n);
            }
            return (
              (r = t.call(this, e) || this),
              !e.complete &&
                r._width &&
                r._height &&
                ((r._width = 0), (r._height = 0)),
              (r.url = e.src),
              (r._process = null),
              (r.preserveBitmap = !1),
              (r.createBitmap =
                (void 0 !== i.createBitmap
                  ? i.createBitmap
                  : nt.CREATE_IMAGE_BITMAP) && !!globalThis.createImageBitmap),
              (r.alphaMode =
                "number" == typeof i.alphaMode ? i.alphaMode : null),
              (r.bitmap = null),
              (r._load = null),
              !1 !== i.autoLoad && r.load(),
              r
            );
          }
          return (
            Ae(e, t),
            (e.prototype.load = function (t) {
              var e = this;
              return (
                this._load ||
                  (void 0 !== t && (this.createBitmap = t),
                  (this._load = new Promise(function (t, i) {
                    var r = e.source;
                    e.url = r.src;
                    var n = function () {
                      e.destroyed ||
                        ((r.onload = null),
                        (r.onerror = null),
                        e.resize(r.width, r.height),
                        (e._load = null),
                        e.createBitmap ? t(e.process()) : t(e));
                    };
                    r.complete && r.src
                      ? n()
                      : ((r.onload = n),
                        (r.onerror = function (t) {
                          i(t), e.onError.emit(t);
                        }));
                  }))),
                this._load
              );
            }),
            (e.prototype.process = function () {
              var t = this,
                e = this.source;
              if (null !== this._process) return this._process;
              if (null !== this.bitmap || !globalThis.createImageBitmap)
                return Promise.resolve(this);
              var i = globalThis.createImageBitmap,
                r = !e.crossOrigin || "anonymous" === e.crossOrigin;
              return (
                (this._process = fetch(e.src, { mode: r ? "cors" : "no-cors" })
                  .then(function (t) {
                    return t.blob();
                  })
                  .then(function (r) {
                    return i(r, 0, 0, e.width, e.height, {
                      premultiplyAlpha:
                        null === t.alphaMode || t.alphaMode === M.UNPACK
                          ? "premultiply"
                          : "none",
                    });
                  })
                  .then(function (e) {
                    return t.destroyed
                      ? Promise.reject()
                      : ((t.bitmap = e),
                        t.update(),
                        (t._process = null),
                        Promise.resolve(t));
                  })),
                this._process
              );
            }),
            (e.prototype.upload = function (e, i, r) {
              if (
                ("number" == typeof this.alphaMode &&
                  (i.alphaMode = this.alphaMode),
                !this.createBitmap)
              )
                return t.prototype.upload.call(this, e, i, r);
              if (!this.bitmap && (this.process(), !this.bitmap)) return !1;
              if (
                (t.prototype.upload.call(this, e, i, r, this.bitmap),
                !this.preserveBitmap)
              ) {
                var n = !0,
                  o = i._glTextures;
                for (var s in o) {
                  var a = o[s];
                  if (a !== r && a.dirtyId !== i.dirtyId) {
                    n = !1;
                    break;
                  }
                }
                n &&
                  (this.bitmap.close && this.bitmap.close(),
                  (this.bitmap = null));
              }
              return !0;
            }),
            (e.prototype.dispose = function () {
              (this.source.onload = null),
                (this.source.onerror = null),
                t.prototype.dispose.call(this),
                this.bitmap && (this.bitmap.close(), (this.bitmap = null)),
                (this._process = null),
                (this._load = null);
            }),
            (e.test = function (t) {
              return "string" == typeof t || t instanceof HTMLImageElement;
            }),
            e
          );
        })(Re),
        De = (function (t) {
          function e(e, i) {
            var r = this;
            return (
              (i = i || {}),
              ((r =
                t.call(this, nt.ADAPTER.createCanvas()) || this)._width = 0),
              (r._height = 0),
              (r.svg = e),
              (r.scale = i.scale || 1),
              (r._overrideWidth = i.width),
              (r._overrideHeight = i.height),
              (r._resolve = null),
              (r._crossorigin = i.crossorigin),
              (r._load = null),
              !1 !== i.autoLoad && r.load(),
              r
            );
          }
          return (
            Ae(e, t),
            (e.prototype.load = function () {
              var t = this;
              return (
                this._load ||
                  (this._load = new Promise(function (i) {
                    if (
                      ((t._resolve = function () {
                        t.resize(t.source.width, t.source.height), i(t);
                      }),
                      e.SVG_XML.test(t.svg.trim()))
                    ) {
                      if (!btoa)
                        throw new Error(
                          "Your browser doesn't support base64 conversions."
                        );
                      t.svg =
                        "data:image/svg+xml;base64," +
                        btoa(unescape(encodeURIComponent(t.svg)));
                    }
                    t._loadSvg();
                  })),
                this._load
              );
            }),
            (e.prototype._loadSvg = function () {
              var t = this,
                e = new Image();
              Re.crossOrigin(e, this.svg, this._crossorigin),
                (e.src = this.svg),
                (e.onerror = function (i) {
                  t._resolve && ((e.onerror = null), t.onError.emit(i));
                }),
                (e.onload = function () {
                  if (t._resolve) {
                    var i = e.width,
                      r = e.height;
                    if (!i || !r)
                      throw new Error(
                        "The SVG image must have width and height defined (in pixels), canvas API needs them."
                      );
                    var n = i * t.scale,
                      o = r * t.scale;
                    (t._overrideWidth || t._overrideHeight) &&
                      ((n = t._overrideWidth || (t._overrideHeight / r) * i),
                      (o = t._overrideHeight || (t._overrideWidth / i) * r)),
                      (n = Math.round(n)),
                      (o = Math.round(o));
                    var s = t.source;
                    (s.width = n),
                      (s.height = o),
                      (s._pixiId = "canvas_" + Mt()),
                      s.getContext("2d").drawImage(e, 0, 0, i, r, 0, 0, n, o),
                      t._resolve(),
                      (t._resolve = null);
                  }
                });
            }),
            (e.getSize = function (t) {
              var i = e.SVG_SIZE.exec(t),
                r = {};
              return (
                i &&
                  ((r[i[1]] = Math.round(parseFloat(i[3]))),
                  (r[i[5]] = Math.round(parseFloat(i[7])))),
                r
              );
            }),
            (e.prototype.dispose = function () {
              t.prototype.dispose.call(this),
                (this._resolve = null),
                (this._crossorigin = null);
            }),
            (e.test = function (t, i) {
              return (
                "svg" === i ||
                ("string" == typeof t && t.startsWith("data:image/svg+xml")) ||
                ("string" == typeof t && e.SVG_XML.test(t))
              );
            }),
            (e.SVG_XML = /^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m),
            (e.SVG_SIZE =
              /<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i),
            e
          );
        })(Re),
        Ne = (function (t) {
          function e(i, r) {
            var n = this;
            if (((r = r || {}), !(i instanceof HTMLVideoElement))) {
              var o = document.createElement("video");
              o.setAttribute("preload", "auto"),
                o.setAttribute("webkit-playsinline", ""),
                o.setAttribute("playsinline", ""),
                "string" == typeof i && (i = [i]);
              var s = i[0].src || i[0];
              Re.crossOrigin(o, s, r.crossorigin);
              for (var a = 0; a < i.length; ++a) {
                var h = document.createElement("source"),
                  u = i[a],
                  l = u.src,
                  c = u.mime,
                  d = (l = l || i[a]).split("?").shift().toLowerCase(),
                  p = d.slice(d.lastIndexOf(".") + 1);
                (c = c || e.MIME_TYPES[p] || "video/" + p),
                  (h.src = l),
                  (h.type = c),
                  o.appendChild(h);
              }
              i = o;
            }
            return (
              ((n = t.call(this, i) || this).noSubImage = !0),
              (n._autoUpdate = !0),
              (n._isConnectedToTicker = !1),
              (n._updateFPS = r.updateFPS || 0),
              (n._msToNextUpdate = 0),
              (n.autoPlay = !1 !== r.autoPlay),
              (n._load = null),
              (n._resolve = null),
              (n._onCanPlay = n._onCanPlay.bind(n)),
              (n._onError = n._onError.bind(n)),
              !1 !== r.autoLoad && n.load(),
              n
            );
          }
          return (
            Ae(e, t),
            (e.prototype.update = function (e) {
              if (!this.destroyed) {
                var i = ve.shared.elapsedMS * this.source.playbackRate;
                (this._msToNextUpdate = Math.floor(this._msToNextUpdate - i)),
                  (!this._updateFPS || this._msToNextUpdate <= 0) &&
                    (t.prototype.update.call(this),
                    (this._msToNextUpdate = this._updateFPS
                      ? Math.floor(1e3 / this._updateFPS)
                      : 0));
              }
            }),
            (e.prototype.load = function () {
              var t = this;
              if (this._load) return this._load;
              var e = this.source;
              return (
                (e.readyState === e.HAVE_ENOUGH_DATA ||
                  e.readyState === e.HAVE_FUTURE_DATA) &&
                  e.width &&
                  e.height &&
                  (e.complete = !0),
                e.addEventListener("play", this._onPlayStart.bind(this)),
                e.addEventListener("pause", this._onPlayStop.bind(this)),
                this._isSourceReady()
                  ? this._onCanPlay()
                  : (e.addEventListener("canplay", this._onCanPlay),
                    e.addEventListener("canplaythrough", this._onCanPlay),
                    e.addEventListener("error", this._onError, !0)),
                (this._load = new Promise(function (i) {
                  t.valid ? i(t) : ((t._resolve = i), e.load());
                })),
                this._load
              );
            }),
            (e.prototype._onError = function (t) {
              this.source.removeEventListener("error", this._onError, !0),
                this.onError.emit(t);
            }),
            (e.prototype._isSourcePlaying = function () {
              var t = this.source;
              return !t.paused && !t.ended && this._isSourceReady();
            }),
            (e.prototype._isSourceReady = function () {
              return this.source.readyState > 2;
            }),
            (e.prototype._onPlayStart = function () {
              this.valid || this._onCanPlay(),
                this.autoUpdate &&
                  !this._isConnectedToTicker &&
                  (ve.shared.add(this.update, this),
                  (this._isConnectedToTicker = !0));
            }),
            (e.prototype._onPlayStop = function () {
              this._isConnectedToTicker &&
                (ve.shared.remove(this.update, this),
                (this._isConnectedToTicker = !1));
            }),
            (e.prototype._onCanPlay = function () {
              var t = this.source;
              t.removeEventListener("canplay", this._onCanPlay),
                t.removeEventListener("canplaythrough", this._onCanPlay);
              var e = this.valid;
              this.resize(t.videoWidth, t.videoHeight),
                !e &&
                  this._resolve &&
                  (this._resolve(this), (this._resolve = null)),
                this._isSourcePlaying()
                  ? this._onPlayStart()
                  : this.autoPlay && t.play();
            }),
            (e.prototype.dispose = function () {
              this._isConnectedToTicker &&
                (ve.shared.remove(this.update, this),
                (this._isConnectedToTicker = !1));
              var e = this.source;
              e &&
                (e.removeEventListener("error", this._onError, !0),
                e.pause(),
                (e.src = ""),
                e.load()),
                t.prototype.dispose.call(this);
            }),
            Object.defineProperty(e.prototype, "autoUpdate", {
              get: function () {
                return this._autoUpdate;
              },
              set: function (t) {
                t !== this._autoUpdate &&
                  ((this._autoUpdate = t),
                  !this._autoUpdate && this._isConnectedToTicker
                    ? (ve.shared.remove(this.update, this),
                      (this._isConnectedToTicker = !1))
                    : this._autoUpdate &&
                      !this._isConnectedToTicker &&
                      this._isSourcePlaying() &&
                      (ve.shared.add(this.update, this),
                      (this._isConnectedToTicker = !0)));
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "updateFPS", {
              get: function () {
                return this._updateFPS;
              },
              set: function (t) {
                t !== this._updateFPS && (this._updateFPS = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.test = function (t, i) {
              return (
                (globalThis.HTMLVideoElement &&
                  t instanceof HTMLVideoElement) ||
                e.TYPES.indexOf(i) > -1
              );
            }),
            (e.TYPES = [
              "mp4",
              "m4v",
              "webm",
              "ogg",
              "ogv",
              "h264",
              "avi",
              "mov",
            ]),
            (e.MIME_TYPES = {
              ogv: "video/ogg",
              mov: "video/quicktime",
              m4v: "video/mp4",
            }),
            e
          );
        })(Re),
        Le = (function (t) {
          function e(e) {
            return t.call(this, e) || this;
          }
          return (
            Ae(e, t),
            (e.test = function (t) {
              return (
                !!globalThis.createImageBitmap &&
                "undefined" != typeof ImageBitmap &&
                t instanceof ImageBitmap
              );
            }),
            e
          );
        })(Re);
      xe.push(Fe, Le, Ie, Ne, De, Ce, ke, Oe);
      var Ue = {
          __proto__: null,
          Resource: Ee,
          BaseImageResource: Re,
          INSTALLED: xe,
          autoDetectResource: we,
          AbstractMultiResource: Be,
          ArrayResource: Oe,
          BufferResource: Ce,
          CanvasResource: Ie,
          CubeResource: ke,
          ImageResource: Fe,
          SVGResource: De,
          VideoResource: Ne,
          ImageBitmapResource: Le,
        },
        Ge = (function (t) {
          function e() {
            return (null !== t && t.apply(this, arguments)) || this;
          }
          return (
            Ae(e, t),
            (e.prototype.upload = function (t, e, i) {
              var r = t.gl;
              r.pixelStorei(
                r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
                e.alphaMode === M.UNPACK
              );
              var n = e.realWidth,
                o = e.realHeight;
              return (
                i.width === n && i.height === o
                  ? r.texSubImage2D(
                      e.target,
                      0,
                      0,
                      0,
                      n,
                      o,
                      e.format,
                      i.type,
                      this.data
                    )
                  : ((i.width = n),
                    (i.height = o),
                    r.texImage2D(
                      e.target,
                      0,
                      i.internalFormat,
                      n,
                      o,
                      0,
                      e.format,
                      i.type,
                      this.data
                    )),
                !0
              );
            }),
            e
          );
        })(Ce),
        Ve = (function () {
          function t(t, e) {
            (this.width = Math.round(t || 100)),
              (this.height = Math.round(e || 100)),
              (this.stencil = !1),
              (this.depth = !1),
              (this.dirtyId = 0),
              (this.dirtyFormat = 0),
              (this.dirtySize = 0),
              (this.depthTexture = null),
              (this.colorTextures = []),
              (this.glFramebuffers = {}),
              (this.disposeRunner = new ye("disposeFramebuffer")),
              (this.multisample = k.NONE);
          }
          return (
            Object.defineProperty(t.prototype, "colorTexture", {
              get: function () {
                return this.colorTextures[0];
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.addColorTexture = function (t, e) {
              return (
                void 0 === t && (t = 0),
                (this.colorTextures[t] =
                  e ||
                  new Pe(null, {
                    scaleMode: S.NEAREST,
                    resolution: 1,
                    mipmap: C.OFF,
                    width: this.width,
                    height: this.height,
                  })),
                this.dirtyId++,
                this.dirtyFormat++,
                this
              );
            }),
            (t.prototype.addDepthTexture = function (t) {
              return (
                (this.depthTexture =
                  t ||
                  new Pe(
                    new Ge(null, { width: this.width, height: this.height }),
                    {
                      scaleMode: S.NEAREST,
                      resolution: 1,
                      width: this.width,
                      height: this.height,
                      mipmap: C.OFF,
                      format: x.DEPTH_COMPONENT,
                      type: T.UNSIGNED_SHORT,
                    }
                  )),
                this.dirtyId++,
                this.dirtyFormat++,
                this
              );
            }),
            (t.prototype.enableDepth = function () {
              return (
                (this.depth = !0), this.dirtyId++, this.dirtyFormat++, this
              );
            }),
            (t.prototype.enableStencil = function () {
              return (
                (this.stencil = !0), this.dirtyId++, this.dirtyFormat++, this
              );
            }),
            (t.prototype.resize = function (t, e) {
              if (
                ((t = Math.round(t)),
                (e = Math.round(e)),
                t !== this.width || e !== this.height)
              ) {
                (this.width = t),
                  (this.height = e),
                  this.dirtyId++,
                  this.dirtySize++;
                for (var i = 0; i < this.colorTextures.length; i++) {
                  var r = this.colorTextures[i],
                    n = r.resolution;
                  r.setSize(t / n, e / n);
                }
                this.depthTexture &&
                  ((n = this.depthTexture.resolution),
                  this.depthTexture.setSize(t / n, e / n));
              }
            }),
            (t.prototype.dispose = function () {
              this.disposeRunner.emit(this, !1);
            }),
            (t.prototype.destroyDepthTexture = function () {
              this.depthTexture &&
                (this.depthTexture.destroy(),
                (this.depthTexture = null),
                ++this.dirtyId,
                ++this.dirtyFormat);
            }),
            t
          );
        })(),
        je = (function (t) {
          function e(e) {
            void 0 === e && (e = {});
            var i = this;
            return (
              "number" == typeof e &&
                (e = {
                  width: arguments[0],
                  height: arguments[1],
                  scaleMode: arguments[2],
                  resolution: arguments[3],
                }),
              (e.width = e.width || 100),
              (e.height = e.height || 100),
              (e.multisample =
                void 0 !== e.multisample ? e.multisample : k.NONE),
              ((i = t.call(this, null, e) || this).mipmap = C.OFF),
              (i.valid = !0),
              (i.clearColor = [0, 0, 0, 0]),
              (i.framebuffer = new Ve(
                i.realWidth,
                i.realHeight
              ).addColorTexture(0, i)),
              (i.framebuffer.multisample = e.multisample),
              (i.maskStack = []),
              (i.filterStack = [{}]),
              i
            );
          }
          return (
            Ae(e, t),
            (e.prototype.resize = function (t, e) {
              this.framebuffer.resize(t * this.resolution, e * this.resolution),
                this.setRealSize(
                  this.framebuffer.width,
                  this.framebuffer.height
                );
            }),
            (e.prototype.dispose = function () {
              this.framebuffer.dispose(), t.prototype.dispose.call(this);
            }),
            (e.prototype.destroy = function () {
              t.prototype.destroy.call(this),
                this.framebuffer.destroyDepthTexture(),
                (this.framebuffer = null);
            }),
            e
          );
        })(Pe),
        ze = (function () {
          function t() {
            (this.x0 = 0),
              (this.y0 = 0),
              (this.x1 = 1),
              (this.y1 = 0),
              (this.x2 = 1),
              (this.y2 = 1),
              (this.x3 = 0),
              (this.y3 = 1),
              (this.uvsFloat32 = new Float32Array(8));
          }
          return (
            (t.prototype.set = function (t, e, i) {
              var r = e.width,
                n = e.height;
              if (i) {
                var o = t.width / 2 / r,
                  s = t.height / 2 / n,
                  a = t.x / r + o,
                  h = t.y / n + s;
                (i = re.add(i, re.NW)),
                  (this.x0 = a + o * re.uX(i)),
                  (this.y0 = h + s * re.uY(i)),
                  (i = re.add(i, 2)),
                  (this.x1 = a + o * re.uX(i)),
                  (this.y1 = h + s * re.uY(i)),
                  (i = re.add(i, 2)),
                  (this.x2 = a + o * re.uX(i)),
                  (this.y2 = h + s * re.uY(i)),
                  (i = re.add(i, 2)),
                  (this.x3 = a + o * re.uX(i)),
                  (this.y3 = h + s * re.uY(i));
              } else
                (this.x0 = t.x / r),
                  (this.y0 = t.y / n),
                  (this.x1 = (t.x + t.width) / r),
                  (this.y1 = t.y / n),
                  (this.x2 = (t.x + t.width) / r),
                  (this.y2 = (t.y + t.height) / n),
                  (this.x3 = t.x / r),
                  (this.y3 = (t.y + t.height) / n);
              (this.uvsFloat32[0] = this.x0),
                (this.uvsFloat32[1] = this.y0),
                (this.uvsFloat32[2] = this.x1),
                (this.uvsFloat32[3] = this.y1),
                (this.uvsFloat32[4] = this.x2),
                (this.uvsFloat32[5] = this.y2),
                (this.uvsFloat32[6] = this.x3),
                (this.uvsFloat32[7] = this.y3);
            }),
            (t.prototype.toString = function () {
              return (
                "[@pixi/core:TextureUvs x0=" +
                this.x0 +
                " y0=" +
                this.y0 +
                " x1=" +
                this.x1 +
                " y1=" +
                this.y1 +
                " x2=" +
                this.x2 +
                " y2=" +
                this.y2 +
                " x3=" +
                this.x3 +
                " y3=" +
                this.y3 +
                "]"
              );
            }),
            t
          );
        })(),
        Xe = new ze();
      function He(t) {
        (t.destroy = function () {}),
          (t.on = function () {}),
          (t.once = function () {}),
          (t.emit = function () {});
      }
      var Ye = (function (t) {
          function e(i, r, n, o, s, a) {
            var h = t.call(this) || this;
            if (
              ((h.noFrame = !1),
              r || ((h.noFrame = !0), (r = new zt(0, 0, 1, 1))),
              i instanceof e && (i = i.baseTexture),
              (h.baseTexture = i),
              (h._frame = r),
              (h.trim = o),
              (h.valid = !1),
              (h._uvs = Xe),
              (h.uvMatrix = null),
              (h.orig = n || r),
              (h._rotate = Number(s || 0)),
              !0 === s)
            )
              h._rotate = 2;
            else if (h._rotate % 2 != 0)
              throw new Error(
                "attempt to use diamond-shaped UVs. If you are sure, set rotation manually"
              );
            return (
              (h.defaultAnchor = a ? new Vt(a.x, a.y) : new Vt(0, 0)),
              (h._updateID = 0),
              (h.textureCacheIds = []),
              i.valid
                ? h.noFrame
                  ? i.valid && h.onBaseTextureUpdated(i)
                  : (h.frame = r)
                : i.once("loaded", h.onBaseTextureUpdated, h),
              h.noFrame && i.on("update", h.onBaseTextureUpdated, h),
              h
            );
          }
          return (
            Ae(e, t),
            (e.prototype.update = function () {
              this.baseTexture.resource && this.baseTexture.resource.update();
            }),
            (e.prototype.onBaseTextureUpdated = function (t) {
              if (this.noFrame) {
                if (!this.baseTexture.valid) return;
                (this._frame.width = t.width),
                  (this._frame.height = t.height),
                  (this.valid = !0),
                  this.updateUvs();
              } else this.frame = this._frame;
              this.emit("update", this);
            }),
            (e.prototype.destroy = function (t) {
              if (this.baseTexture) {
                if (t) {
                  var i = this.baseTexture.resource;
                  i && i.url && It[i.url] && e.removeFromCache(i.url),
                    this.baseTexture.destroy();
                }
                this.baseTexture.off("loaded", this.onBaseTextureUpdated, this),
                  this.baseTexture.off(
                    "update",
                    this.onBaseTextureUpdated,
                    this
                  ),
                  (this.baseTexture = null);
              }
              (this._frame = null),
                (this._uvs = null),
                (this.trim = null),
                (this.orig = null),
                (this.valid = !1),
                e.removeFromCache(this),
                (this.textureCacheIds = null);
            }),
            (e.prototype.clone = function () {
              var t = this._frame.clone(),
                i = this._frame === this.orig ? t : this.orig.clone(),
                r = new e(
                  this.baseTexture,
                  !this.noFrame && t,
                  i,
                  this.trim && this.trim.clone(),
                  this.rotate,
                  this.defaultAnchor
                );
              return this.noFrame && (r._frame = t), r;
            }),
            (e.prototype.updateUvs = function () {
              this._uvs === Xe && (this._uvs = new ze()),
                this._uvs.set(this._frame, this.baseTexture, this.rotate),
                this._updateID++;
            }),
            (e.from = function (t, i, r) {
              void 0 === i && (i = {}),
                void 0 === r && (r = nt.STRICT_TEXTURE_CACHE);
              var n = "string" == typeof t,
                o = null;
              if (n) o = t;
              else if (t instanceof Pe) {
                if (!t.cacheId) {
                  var s = (i && i.pixiIdPrefix) || "pixiid";
                  (t.cacheId = s + "-" + Mt()), Pe.addToCache(t, t.cacheId);
                }
                o = t.cacheId;
              } else
                t._pixiId ||
                  ((s = (i && i.pixiIdPrefix) || "pixiid"),
                  (t._pixiId = s + "_" + Mt())),
                  (o = t._pixiId);
              var a = It[o];
              if (n && r && !a)
                throw new Error(
                  'The cacheId "' + o + '" does not exist in TextureCache.'
                );
              return (
                a || t instanceof Pe
                  ? !a &&
                    t instanceof Pe &&
                    ((a = new e(t)), e.addToCache(a, o))
                  : (i.resolution || (i.resolution = Dt(t)),
                    ((a = new e(new Pe(t, i))).baseTexture.cacheId = o),
                    Pe.addToCache(a.baseTexture, o),
                    e.addToCache(a, o)),
                a
              );
            }),
            (e.fromURL = function (t, i) {
              var r = Object.assign(
                  { autoLoad: !1 },
                  null == i ? void 0 : i.resourceOptions
                ),
                n = e.from(t, Object.assign({ resourceOptions: r }, i), !1),
                o = n.baseTexture.resource;
              return n.baseTexture.valid
                ? Promise.resolve(n)
                : o.load().then(function () {
                    return Promise.resolve(n);
                  });
            }),
            (e.fromBuffer = function (t, i, r, n) {
              return new e(Pe.fromBuffer(t, i, r, n));
            }),
            (e.fromLoader = function (t, i, r, n) {
              var o = new Pe(
                  t,
                  Object.assign(
                    { scaleMode: nt.SCALE_MODE, resolution: Dt(i) },
                    n
                  )
                ),
                s = o.resource;
              s instanceof Fe && (s.url = i);
              var a = new e(o);
              return (
                r || (r = i),
                Pe.addToCache(a.baseTexture, r),
                e.addToCache(a, r),
                r !== i &&
                  (Pe.addToCache(a.baseTexture, i), e.addToCache(a, i)),
                a.baseTexture.valid
                  ? Promise.resolve(a)
                  : new Promise(function (t) {
                      a.baseTexture.once("loaded", function () {
                        return t(a);
                      });
                    })
              );
            }),
            (e.addToCache = function (t, e) {
              e &&
                (-1 === t.textureCacheIds.indexOf(e) &&
                  t.textureCacheIds.push(e),
                It[e] &&
                  console.warn(
                    "Texture added to the cache with an id [" +
                      e +
                      "] that already had an entry"
                  ),
                (It[e] = t));
            }),
            (e.removeFromCache = function (t) {
              if ("string" == typeof t) {
                var e = It[t];
                if (e) {
                  var i = e.textureCacheIds.indexOf(t);
                  return (
                    i > -1 && e.textureCacheIds.splice(i, 1), delete It[t], e
                  );
                }
              } else if (t && t.textureCacheIds) {
                for (var r = 0; r < t.textureCacheIds.length; ++r)
                  It[t.textureCacheIds[r]] === t &&
                    delete It[t.textureCacheIds[r]];
                return (t.textureCacheIds.length = 0), t;
              }
              return null;
            }),
            Object.defineProperty(e.prototype, "resolution", {
              get: function () {
                return this.baseTexture.resolution;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "frame", {
              get: function () {
                return this._frame;
              },
              set: function (t) {
                (this._frame = t), (this.noFrame = !1);
                var e = t.x,
                  i = t.y,
                  r = t.width,
                  n = t.height,
                  o = e + r > this.baseTexture.width,
                  s = i + n > this.baseTexture.height;
                if (o || s) {
                  var a = o && s ? "and" : "or",
                    h =
                      "X: " +
                      e +
                      " + " +
                      r +
                      " = " +
                      (e + r) +
                      " > " +
                      this.baseTexture.width,
                    u =
                      "Y: " +
                      i +
                      " + " +
                      n +
                      " = " +
                      (i + n) +
                      " > " +
                      this.baseTexture.height;
                  throw new Error(
                    "Texture Error: frame does not fit inside the base Texture dimensions: " +
                      h +
                      " " +
                      a +
                      " " +
                      u
                  );
                }
                (this.valid = r && n && this.baseTexture.valid),
                  this.trim || this.rotate || (this.orig = t),
                  this.valid && this.updateUvs();
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "rotate", {
              get: function () {
                return this._rotate;
              },
              set: function (t) {
                (this._rotate = t), this.valid && this.updateUvs();
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "width", {
              get: function () {
                return this.orig.width;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "height", {
              get: function () {
                return this.orig.height;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.castToBaseTexture = function () {
              return this.baseTexture;
            }),
            Object.defineProperty(e, "EMPTY", {
              get: function () {
                return (
                  e._EMPTY ||
                    ((e._EMPTY = new e(new Pe())),
                    He(e._EMPTY),
                    He(e._EMPTY.baseTexture)),
                  e._EMPTY
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e, "WHITE", {
              get: function () {
                if (!e._WHITE) {
                  var t = nt.ADAPTER.createCanvas(16, 16),
                    i = t.getContext("2d");
                  (t.width = 16),
                    (t.height = 16),
                    (i.fillStyle = "white"),
                    i.fillRect(0, 0, 16, 16),
                    (e._WHITE = new e(Pe.from(t))),
                    He(e._WHITE),
                    He(e._WHITE.baseTexture);
                }
                return e._WHITE;
              },
              enumerable: !1,
              configurable: !0,
            }),
            e
          );
        })(ot),
        We = (function (t) {
          function e(e, i) {
            var r = t.call(this, e, i) || this;
            return (
              (r.valid = !0),
              (r.filterFrame = null),
              (r.filterPoolKey = null),
              r.updateUvs(),
              r
            );
          }
          return (
            Ae(e, t),
            Object.defineProperty(e.prototype, "framebuffer", {
              get: function () {
                return this.baseTexture.framebuffer;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "multisample", {
              get: function () {
                return this.framebuffer.multisample;
              },
              set: function (t) {
                this.framebuffer.multisample = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.resize = function (t, e, i) {
              void 0 === i && (i = !0);
              var r = this.baseTexture.resolution,
                n = Math.round(t * r) / r,
                o = Math.round(e * r) / r;
              (this.valid = n > 0 && o > 0),
                (this._frame.width = this.orig.width = n),
                (this._frame.height = this.orig.height = o),
                i && this.baseTexture.resize(n, o),
                this.updateUvs();
            }),
            (e.prototype.setResolution = function (t) {
              var e = this.baseTexture;
              e.resolution !== t &&
                (e.setResolution(t), this.resize(e.width, e.height, !1));
            }),
            (e.create = function (t) {
              for (var i = arguments, r = [], n = 1; n < arguments.length; n++)
                r[n - 1] = i[n];
              return (
                "number" == typeof t &&
                  (Bt(
                    "6.0.0",
                    "Arguments (width, height, scaleMode, resolution) have been deprecated."
                  ),
                  (t = {
                    width: t,
                    height: r[0],
                    scaleMode: r[1],
                    resolution: r[2],
                  })),
                new e(new je(t))
              );
            }),
            e
          );
        })(Ye),
        qe = (function () {
          function t(t) {
            (this.texturePool = {}),
              (this.textureOptions = t || {}),
              (this.enableFullScreen = !1),
              (this._pixelsWidth = 0),
              (this._pixelsHeight = 0);
          }
          return (
            (t.prototype.createTexture = function (t, e, i) {
              void 0 === i && (i = k.NONE);
              var r = new je(
                Object.assign(
                  { width: t, height: e, resolution: 1, multisample: i },
                  this.textureOptions
                )
              );
              return new We(r);
            }),
            (t.prototype.getOptimalTexture = function (t, e, i, r) {
              var n;
              void 0 === i && (i = 1),
                void 0 === r && (r = k.NONE),
                (t = Math.ceil(t * i - 1e-6)),
                (e = Math.ceil(e * i - 1e-6)),
                this.enableFullScreen &&
                t === this._pixelsWidth &&
                e === this._pixelsHeight
                  ? (n = r > 1 ? -r : -1)
                  : ((n =
                      (((65535 & (t = wt(t))) << 16) |
                        (65535 & (e = wt(e)))) >>>
                      0),
                    r > 1 && (n += 4294967296 * r)),
                this.texturePool[n] || (this.texturePool[n] = []);
              var o = this.texturePool[n].pop();
              return (
                o || (o = this.createTexture(t, e, r)),
                (o.filterPoolKey = n),
                o.setResolution(i),
                o
              );
            }),
            (t.prototype.getFilterTexture = function (t, e, i) {
              var r = this.getOptimalTexture(
                t.width,
                t.height,
                e || t.resolution,
                i || k.NONE
              );
              return (r.filterFrame = t.filterFrame), r;
            }),
            (t.prototype.returnTexture = function (t) {
              var e = t.filterPoolKey;
              (t.filterFrame = null), this.texturePool[e].push(t);
            }),
            (t.prototype.returnFilterTexture = function (t) {
              this.returnTexture(t);
            }),
            (t.prototype.clear = function (t) {
              if ((t = !1 !== t))
                for (var e in this.texturePool) {
                  var i = this.texturePool[e];
                  if (i) for (var r = 0; r < i.length; r++) i[r].destroy(!0);
                }
              this.texturePool = {};
            }),
            (t.prototype.setScreenSize = function (t) {
              if (
                t.width !== this._pixelsWidth ||
                t.height !== this._pixelsHeight
              ) {
                for (var e in ((this.enableFullScreen =
                  t.width > 0 && t.height > 0),
                this.texturePool))
                  if (Number(e) < 0) {
                    var i = this.texturePool[e];
                    if (i) for (var r = 0; r < i.length; r++) i[r].destroy(!0);
                    this.texturePool[e] = [];
                  }
                (this._pixelsWidth = t.width), (this._pixelsHeight = t.height);
              }
            }),
            (t.SCREEN_KEY = -1),
            t
          );
        })(),
        $e = (function () {
          function t(t, e, i, r, n, o, s) {
            void 0 === e && (e = 0),
              void 0 === i && (i = !1),
              void 0 === r && (r = T.FLOAT),
              (this.buffer = t),
              (this.size = e),
              (this.normalized = i),
              (this.type = r),
              (this.stride = n),
              (this.start = o),
              (this.instance = s);
          }
          return (
            (t.prototype.destroy = function () {
              this.buffer = null;
            }),
            (t.from = function (e, i, r, n, o) {
              return new t(e, i, r, n, o);
            }),
            t
          );
        })(),
        Ke = 0,
        Je = (function () {
          function t(t, e, i) {
            void 0 === e && (e = !0),
              void 0 === i && (i = !1),
              (this.data = t || new Float32Array(1)),
              (this._glBuffers = {}),
              (this._updateID = 0),
              (this.index = i),
              (this.static = e),
              (this.id = Ke++),
              (this.disposeRunner = new ye("disposeBuffer"));
          }
          return (
            (t.prototype.update = function (t) {
              t instanceof Array && (t = new Float32Array(t)),
                (this.data = t || this.data),
                this._updateID++;
            }),
            (t.prototype.dispose = function () {
              this.disposeRunner.emit(this, !1);
            }),
            (t.prototype.destroy = function () {
              this.dispose(), (this.data = null);
            }),
            Object.defineProperty(t.prototype, "index", {
              get: function () {
                return this.type === F.ELEMENT_ARRAY_BUFFER;
              },
              set: function (t) {
                this.type = t ? F.ELEMENT_ARRAY_BUFFER : F.ARRAY_BUFFER;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.from = function (e) {
              return e instanceof Array && (e = new Float32Array(e)), new t(e);
            }),
            t
          );
        })(),
        Ze = { Float32Array, Uint32Array, Int32Array, Uint8Array },
        Qe = { 5126: 4, 5123: 2, 5121: 1 },
        ti = 0,
        ei = { Float32Array, Uint32Array, Int32Array, Uint8Array, Uint16Array },
        ii = (function () {
          function t(t, e) {
            void 0 === t && (t = []),
              void 0 === e && (e = {}),
              (this.buffers = t),
              (this.indexBuffer = null),
              (this.attributes = e),
              (this.glVertexArrayObjects = {}),
              (this.id = ti++),
              (this.instanced = !1),
              (this.instanceCount = 1),
              (this.disposeRunner = new ye("disposeGeometry")),
              (this.refCount = 0);
          }
          return (
            (t.prototype.addAttribute = function (t, e, i, r, n, o, s, a) {
              if (
                (void 0 === i && (i = 0),
                void 0 === r && (r = !1),
                void 0 === a && (a = !1),
                !e)
              )
                throw new Error(
                  "You must pass a buffer when creating an attribute"
                );
              e instanceof Je ||
                (e instanceof Array && (e = new Float32Array(e)),
                (e = new Je(e)));
              var h = t.split("|");
              if (h.length > 1) {
                for (var u = 0; u < h.length; u++)
                  this.addAttribute(h[u], e, i, r, n);
                return this;
              }
              var l = this.buffers.indexOf(e);
              return (
                -1 === l &&
                  (this.buffers.push(e), (l = this.buffers.length - 1)),
                (this.attributes[t] = new $e(l, i, r, n, o, s, a)),
                (this.instanced = this.instanced || a),
                this
              );
            }),
            (t.prototype.getAttribute = function (t) {
              return this.attributes[t];
            }),
            (t.prototype.getBuffer = function (t) {
              return this.buffers[this.getAttribute(t).buffer];
            }),
            (t.prototype.addIndex = function (t) {
              return (
                t instanceof Je ||
                  (t instanceof Array && (t = new Uint16Array(t)),
                  (t = new Je(t))),
                (t.type = F.ELEMENT_ARRAY_BUFFER),
                (this.indexBuffer = t),
                -1 === this.buffers.indexOf(t) && this.buffers.push(t),
                this
              );
            }),
            (t.prototype.getIndex = function () {
              return this.indexBuffer;
            }),
            (t.prototype.interleave = function () {
              if (
                1 === this.buffers.length ||
                (2 === this.buffers.length && this.indexBuffer)
              )
                return this;
              var t,
                e = [],
                i = [],
                r = new Je();
              for (t in this.attributes) {
                var n = this.attributes[t],
                  o = this.buffers[n.buffer];
                e.push(o.data),
                  i.push((n.size * Qe[n.type]) / 4),
                  (n.buffer = 0);
              }
              for (
                r.data = (function (t, e) {
                  for (var i = 0, r = 0, n = {}, o = 0; o < t.length; o++)
                    (r += e[o]), (i += t[o].length);
                  var s = new ArrayBuffer(4 * i),
                    a = null,
                    h = 0;
                  for (o = 0; o < t.length; o++) {
                    var u = e[o],
                      l = t[o],
                      c = xt(l);
                    n[c] || (n[c] = new Ze[c](s)), (a = n[c]);
                    for (var d = 0; d < l.length; d++)
                      a[((d / u) | 0) * r + h + (d % u)] = l[d];
                    h += u;
                  }
                  return new Float32Array(s);
                })(e, i),
                  t = 0;
                t < this.buffers.length;
                t++
              )
                this.buffers[t] !== this.indexBuffer &&
                  this.buffers[t].destroy();
              return (
                (this.buffers = [r]),
                this.indexBuffer && this.buffers.push(this.indexBuffer),
                this
              );
            }),
            (t.prototype.getSize = function () {
              for (var t in this.attributes) {
                var e = this.attributes[t];
                return (
                  this.buffers[e.buffer].data.length / (e.stride / 4 || e.size)
                );
              }
              return 0;
            }),
            (t.prototype.dispose = function () {
              this.disposeRunner.emit(this, !1);
            }),
            (t.prototype.destroy = function () {
              this.dispose(),
                (this.buffers = null),
                (this.indexBuffer = null),
                (this.attributes = null);
            }),
            (t.prototype.clone = function () {
              for (var e = new t(), i = 0; i < this.buffers.length; i++)
                e.buffers[i] = new Je(this.buffers[i].data.slice(0));
              for (var i in this.attributes) {
                var r = this.attributes[i];
                e.attributes[i] = new $e(
                  r.buffer,
                  r.size,
                  r.normalized,
                  r.type,
                  r.stride,
                  r.start,
                  r.instance
                );
              }
              return (
                this.indexBuffer &&
                  ((e.indexBuffer =
                    e.buffers[this.buffers.indexOf(this.indexBuffer)]),
                  (e.indexBuffer.type = F.ELEMENT_ARRAY_BUFFER)),
                e
              );
            }),
            (t.merge = function (e) {
              for (
                var i, r = new t(), n = [], o = [], s = [], a = 0;
                a < e.length;
                a++
              ) {
                i = e[a];
                for (var h = 0; h < i.buffers.length; h++)
                  (o[h] = o[h] || 0),
                    (o[h] += i.buffers[h].data.length),
                    (s[h] = 0);
              }
              for (a = 0; a < i.buffers.length; a++)
                (n[a] = new ei[xt(i.buffers[a].data)](o[a])),
                  (r.buffers[a] = new Je(n[a]));
              for (a = 0; a < e.length; a++)
                for (i = e[a], h = 0; h < i.buffers.length; h++)
                  n[h].set(i.buffers[h].data, s[h]),
                    (s[h] += i.buffers[h].data.length);
              if (((r.attributes = i.attributes), i.indexBuffer)) {
                (r.indexBuffer = r.buffers[i.buffers.indexOf(i.indexBuffer)]),
                  (r.indexBuffer.type = F.ELEMENT_ARRAY_BUFFER);
                var u = 0,
                  l = 0,
                  c = 0,
                  d = 0;
                for (a = 0; a < i.buffers.length; a++)
                  if (i.buffers[a] !== i.indexBuffer) {
                    d = a;
                    break;
                  }
                for (var a in i.attributes) {
                  var p = i.attributes[a];
                  (0 | p.buffer) === d && (l += (p.size * Qe[p.type]) / 4);
                }
                for (a = 0; a < e.length; a++) {
                  var _ = e[a].indexBuffer.data;
                  for (h = 0; h < _.length; h++) r.indexBuffer.data[h + c] += u;
                  (u += e[a].buffers[d].data.length / l), (c += _.length);
                }
              }
              return r;
            }),
            t
          );
        })(),
        ri = (function (t) {
          function e() {
            var e = t.call(this) || this;
            return (
              e
                .addAttribute(
                  "aVertexPosition",
                  new Float32Array([0, 0, 1, 0, 1, 1, 0, 1])
                )
                .addIndex([0, 1, 3, 2]),
              e
            );
          }
          return Ae(e, t), e;
        })(ii),
        ni = (function (t) {
          function e() {
            var e = t.call(this) || this;
            return (
              (e.vertices = new Float32Array([-1, -1, 1, -1, 1, 1, -1, 1])),
              (e.uvs = new Float32Array([0, 0, 1, 0, 1, 1, 0, 1])),
              (e.vertexBuffer = new Je(e.vertices)),
              (e.uvBuffer = new Je(e.uvs)),
              e
                .addAttribute("aVertexPosition", e.vertexBuffer)
                .addAttribute("aTextureCoord", e.uvBuffer)
                .addIndex([0, 1, 2, 0, 2, 3]),
              e
            );
          }
          return (
            Ae(e, t),
            (e.prototype.map = function (t, e) {
              var i = 0,
                r = 0;
              return (
                (this.uvs[0] = i),
                (this.uvs[1] = r),
                (this.uvs[2] = i + e.width / t.width),
                (this.uvs[3] = r),
                (this.uvs[4] = i + e.width / t.width),
                (this.uvs[5] = r + e.height / t.height),
                (this.uvs[6] = i),
                (this.uvs[7] = r + e.height / t.height),
                (i = e.x),
                (r = e.y),
                (this.vertices[0] = i),
                (this.vertices[1] = r),
                (this.vertices[2] = i + e.width),
                (this.vertices[3] = r),
                (this.vertices[4] = i + e.width),
                (this.vertices[5] = r + e.height),
                (this.vertices[6] = i),
                (this.vertices[7] = r + e.height),
                this.invalidate(),
                this
              );
            }),
            (e.prototype.invalidate = function () {
              return (
                this.vertexBuffer._updateID++, this.uvBuffer._updateID++, this
              );
            }),
            e
          );
        })(ii),
        oi = 0,
        si = (function () {
          function t(t, e, i) {
            (this.group = !0),
              (this.syncUniforms = {}),
              (this.dirtyId = 0),
              (this.id = oi++),
              (this.static = !!e),
              (this.ubo = !!i),
              t instanceof Je
                ? ((this.buffer = t),
                  (this.buffer.type = F.UNIFORM_BUFFER),
                  (this.autoManage = !1),
                  (this.ubo = !0))
                : ((this.uniforms = t),
                  this.ubo &&
                    ((this.buffer = new Je(new Float32Array(1))),
                    (this.buffer.type = F.UNIFORM_BUFFER),
                    (this.autoManage = !0)));
          }
          return (
            (t.prototype.update = function () {
              this.dirtyId++,
                !this.autoManage && this.buffer && this.buffer.update();
            }),
            (t.prototype.add = function (e, i, r) {
              if (this.ubo)
                throw new Error(
                  "[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them"
                );
              this.uniforms[e] = new t(i, r);
            }),
            (t.from = function (e, i, r) {
              return new t(e, i, r);
            }),
            (t.uboFrom = function (e, i) {
              return new t(e, null == i || i, !0);
            }),
            t
          );
        })(),
        ai = (function () {
          function t() {
            (this.renderTexture = null),
              (this.target = null),
              (this.legacy = !1),
              (this.resolution = 1),
              (this.multisample = k.NONE),
              (this.sourceFrame = new zt()),
              (this.destinationFrame = new zt()),
              (this.bindingSourceFrame = new zt()),
              (this.bindingDestinationFrame = new zt()),
              (this.filters = []),
              (this.transform = null);
          }
          return (
            (t.prototype.clear = function () {
              (this.target = null),
                (this.filters = null),
                (this.renderTexture = null);
            }),
            t
          );
        })(),
        hi = [new Vt(), new Vt(), new Vt(), new Vt()],
        ui = new $t(),
        li = (function () {
          function t(t) {
            (this.renderer = t),
              (this.defaultFilterStack = [{}]),
              (this.texturePool = new qe()),
              this.texturePool.setScreenSize(t.view),
              (this.statePool = []),
              (this.quad = new ri()),
              (this.quadUv = new ni()),
              (this.tempRect = new zt()),
              (this.activeState = {}),
              (this.globalUniforms = new si(
                {
                  outputFrame: new zt(),
                  inputSize: new Float32Array(4),
                  inputPixel: new Float32Array(4),
                  inputClamp: new Float32Array(4),
                  resolution: 1,
                  filterArea: new Float32Array(4),
                  filterClamp: new Float32Array(4),
                },
                !0
              )),
              (this.forceClear = !1),
              (this.useMaxPadding = !1);
          }
          return (
            (t.prototype.push = function (t, e) {
              for (
                var i,
                  r,
                  n = this.renderer,
                  o = this.defaultFilterStack,
                  s = this.statePool.pop() || new ai(),
                  a = this.renderer.renderTexture,
                  h = e[0].resolution,
                  u = e[0].multisample,
                  l = e[0].padding,
                  c = e[0].autoFit,
                  d = null === (i = e[0].legacy) || void 0 === i || i,
                  p = 1;
                p < e.length;
                p++
              ) {
                var _ = e[p];
                (h = Math.min(h, _.resolution)),
                  (u = Math.min(u, _.multisample)),
                  (l = this.useMaxPadding
                    ? Math.max(l, _.padding)
                    : l + _.padding),
                  (c = c && _.autoFit),
                  (d = d || null === (r = _.legacy) || void 0 === r || r);
              }
              1 === o.length &&
                (this.defaultFilterStack[0].renderTexture = a.current),
                o.push(s),
                (s.resolution = h),
                (s.multisample = u),
                (s.legacy = d),
                (s.target = t),
                s.sourceFrame.copyFrom(t.filterArea || t.getBounds(!0)),
                s.sourceFrame.pad(l);
              var f = this.tempRect.copyFrom(a.sourceFrame);
              n.projection.transform &&
                this.transformAABB(
                  ui.copyFrom(n.projection.transform).invert(),
                  f
                ),
                c
                  ? (s.sourceFrame.fit(f),
                    (s.sourceFrame.width <= 0 || s.sourceFrame.height <= 0) &&
                      ((s.sourceFrame.width = 0), (s.sourceFrame.height = 0)))
                  : s.sourceFrame.intersects(f) ||
                    ((s.sourceFrame.width = 0), (s.sourceFrame.height = 0)),
                this.roundFrame(
                  s.sourceFrame,
                  a.current ? a.current.resolution : n.resolution,
                  a.sourceFrame,
                  a.destinationFrame,
                  n.projection.transform
                ),
                (s.renderTexture = this.getOptimalFilterTexture(
                  s.sourceFrame.width,
                  s.sourceFrame.height,
                  h,
                  u
                )),
                (s.filters = e),
                (s.destinationFrame.width = s.renderTexture.width),
                (s.destinationFrame.height = s.renderTexture.height);
              var m = this.tempRect;
              (m.x = 0),
                (m.y = 0),
                (m.width = s.sourceFrame.width),
                (m.height = s.sourceFrame.height),
                (s.renderTexture.filterFrame = s.sourceFrame),
                s.bindingSourceFrame.copyFrom(a.sourceFrame),
                s.bindingDestinationFrame.copyFrom(a.destinationFrame),
                (s.transform = n.projection.transform),
                (n.projection.transform = null),
                a.bind(s.renderTexture, s.sourceFrame, m),
                n.framebuffer.clear(0, 0, 0, 0);
            }),
            (t.prototype.pop = function () {
              var t = this.defaultFilterStack,
                e = t.pop(),
                i = e.filters;
              this.activeState = e;
              var r = this.globalUniforms.uniforms;
              (r.outputFrame = e.sourceFrame), (r.resolution = e.resolution);
              var n = r.inputSize,
                o = r.inputPixel,
                s = r.inputClamp;
              if (
                ((n[0] = e.destinationFrame.width),
                (n[1] = e.destinationFrame.height),
                (n[2] = 1 / n[0]),
                (n[3] = 1 / n[1]),
                (o[0] = Math.round(n[0] * e.resolution)),
                (o[1] = Math.round(n[1] * e.resolution)),
                (o[2] = 1 / o[0]),
                (o[3] = 1 / o[1]),
                (s[0] = 0.5 * o[2]),
                (s[1] = 0.5 * o[3]),
                (s[2] = e.sourceFrame.width * n[2] - 0.5 * o[2]),
                (s[3] = e.sourceFrame.height * n[3] - 0.5 * o[3]),
                e.legacy)
              ) {
                var a = r.filterArea;
                (a[0] = e.destinationFrame.width),
                  (a[1] = e.destinationFrame.height),
                  (a[2] = e.sourceFrame.x),
                  (a[3] = e.sourceFrame.y),
                  (r.filterClamp = r.inputClamp);
              }
              this.globalUniforms.update();
              var h = t[t.length - 1];
              if ((this.renderer.framebuffer.blit(), 1 === i.length))
                i[0].apply(this, e.renderTexture, h.renderTexture, P.BLEND, e),
                  this.returnFilterTexture(e.renderTexture);
              else {
                var u = e.renderTexture,
                  l = this.getOptimalFilterTexture(
                    u.width,
                    u.height,
                    e.resolution
                  );
                l.filterFrame = u.filterFrame;
                var c = 0;
                for (c = 0; c < i.length - 1; ++c) {
                  1 === c &&
                    e.multisample > 1 &&
                    ((l = this.getOptimalFilterTexture(
                      u.width,
                      u.height,
                      e.resolution
                    )).filterFrame = u.filterFrame),
                    i[c].apply(this, u, l, P.CLEAR, e);
                  var d = u;
                  (u = l), (l = d);
                }
                i[c].apply(this, u, h.renderTexture, P.BLEND, e),
                  c > 1 &&
                    e.multisample > 1 &&
                    this.returnFilterTexture(e.renderTexture),
                  this.returnFilterTexture(u),
                  this.returnFilterTexture(l);
              }
              e.clear(), this.statePool.push(e);
            }),
            (t.prototype.bindAndClear = function (t, e) {
              void 0 === e && (e = P.CLEAR);
              var i = this.renderer,
                r = i.renderTexture,
                n = i.state;
              if (
                (t ===
                this.defaultFilterStack[this.defaultFilterStack.length - 1]
                  .renderTexture
                  ? (this.renderer.projection.transform =
                      this.activeState.transform)
                  : (this.renderer.projection.transform = null),
                t && t.filterFrame)
              ) {
                var o = this.tempRect;
                (o.x = 0),
                  (o.y = 0),
                  (o.width = t.filterFrame.width),
                  (o.height = t.filterFrame.height),
                  r.bind(t, t.filterFrame, o);
              } else
                t !==
                this.defaultFilterStack[this.defaultFilterStack.length - 1]
                  .renderTexture
                  ? r.bind(t)
                  : this.renderer.renderTexture.bind(
                      t,
                      this.activeState.bindingSourceFrame,
                      this.activeState.bindingDestinationFrame
                    );
              var s = 1 & n.stateId || this.forceClear;
              (e === P.CLEAR || (e === P.BLIT && s)) &&
                this.renderer.framebuffer.clear(0, 0, 0, 0);
            }),
            (t.prototype.applyFilter = function (t, e, i, r) {
              var n = this.renderer;
              n.state.set(t.state),
                this.bindAndClear(i, r),
                (t.uniforms.uSampler = e),
                (t.uniforms.filterGlobals = this.globalUniforms),
                n.shader.bind(t),
                (t.legacy = !!t.program.attributeData.aTextureCoord),
                t.legacy
                  ? (this.quadUv.map(e._frame, e.filterFrame),
                    n.geometry.bind(this.quadUv),
                    n.geometry.draw(b.TRIANGLES))
                  : (n.geometry.bind(this.quad),
                    n.geometry.draw(b.TRIANGLE_STRIP));
            }),
            (t.prototype.calculateSpriteMatrix = function (t, e) {
              var i = this.activeState,
                r = i.sourceFrame,
                n = i.destinationFrame,
                o = e._texture.orig,
                s = t.set(n.width, 0, 0, n.height, r.x, r.y),
                a = e.worldTransform.copyTo($t.TEMP_MATRIX);
              return (
                a.invert(),
                s.prepend(a),
                s.scale(1 / o.width, 1 / o.height),
                s.translate(e.anchor.x, e.anchor.y),
                s
              );
            }),
            (t.prototype.destroy = function () {
              (this.renderer = null), this.texturePool.clear(!1);
            }),
            (t.prototype.getOptimalFilterTexture = function (t, e, i, r) {
              return (
                void 0 === i && (i = 1),
                void 0 === r && (r = k.NONE),
                this.texturePool.getOptimalTexture(t, e, i, r)
              );
            }),
            (t.prototype.getFilterTexture = function (t, e, i) {
              if ("number" == typeof t) {
                var r = t;
                (t = e), (e = r);
              }
              t = t || this.activeState.renderTexture;
              var n = this.texturePool.getOptimalTexture(
                t.width,
                t.height,
                e || t.resolution,
                i || k.NONE
              );
              return (n.filterFrame = t.filterFrame), n;
            }),
            (t.prototype.returnFilterTexture = function (t) {
              this.texturePool.returnTexture(t);
            }),
            (t.prototype.emptyPool = function () {
              this.texturePool.clear(!0);
            }),
            (t.prototype.resize = function () {
              this.texturePool.setScreenSize(this.renderer.view);
            }),
            (t.prototype.transformAABB = function (t, e) {
              var i = hi[0],
                r = hi[1],
                n = hi[2],
                o = hi[3];
              i.set(e.left, e.top),
                r.set(e.left, e.bottom),
                n.set(e.right, e.top),
                o.set(e.right, e.bottom),
                t.apply(i, i),
                t.apply(r, r),
                t.apply(n, n),
                t.apply(o, o);
              var s = Math.min(i.x, r.x, n.x, o.x),
                a = Math.min(i.y, r.y, n.y, o.y),
                h = Math.max(i.x, r.x, n.x, o.x),
                u = Math.max(i.y, r.y, n.y, o.y);
              (e.x = s), (e.y = a), (e.width = h - s), (e.height = u - a);
            }),
            (t.prototype.roundFrame = function (t, e, i, r, n) {
              if (
                !(
                  t.width <= 0 ||
                  t.height <= 0 ||
                  i.width <= 0 ||
                  i.height <= 0
                )
              ) {
                if (n) {
                  var o = n.a,
                    s = n.b,
                    a = n.c,
                    h = n.d;
                  if (
                    (Math.abs(s) > 1e-4 || Math.abs(a) > 1e-4) &&
                    (Math.abs(o) > 1e-4 || Math.abs(h) > 1e-4)
                  )
                    return;
                }
                (n = n ? ui.copyFrom(n) : ui.identity())
                  .translate(-i.x, -i.y)
                  .scale(r.width / i.width, r.height / i.height)
                  .translate(r.x, r.y),
                  this.transformAABB(n, t),
                  t.ceil(e),
                  this.transformAABB(n.invert(), t);
              }
            }),
            t
          );
        })(),
        ci = (function () {
          function t(t) {
            this.renderer = t;
          }
          return (
            (t.prototype.flush = function () {}),
            (t.prototype.destroy = function () {
              this.renderer = null;
            }),
            (t.prototype.start = function () {}),
            (t.prototype.stop = function () {
              this.flush();
            }),
            (t.prototype.render = function (t) {}),
            t
          );
        })(),
        di = (function () {
          function t(t) {
            (this.renderer = t),
              (this.emptyRenderer = new ci(t)),
              (this.currentRenderer = this.emptyRenderer);
          }
          return (
            (t.prototype.setObjectRenderer = function (t) {
              this.currentRenderer !== t &&
                (this.currentRenderer.stop(),
                (this.currentRenderer = t),
                this.currentRenderer.start());
            }),
            (t.prototype.flush = function () {
              this.setObjectRenderer(this.emptyRenderer);
            }),
            (t.prototype.reset = function () {
              this.setObjectRenderer(this.emptyRenderer);
            }),
            (t.prototype.copyBoundTextures = function (t, e) {
              for (
                var i = this.renderer.texture.boundTextures, r = e - 1;
                r >= 0;
                --r
              )
                (t[r] = i[r] || null), t[r] && (t[r]._batchLocation = r);
            }),
            (t.prototype.boundArray = function (t, e, i, r) {
              for (
                var n = t.elements, o = t.ids, s = t.count, a = 0, h = 0;
                h < s;
                h++
              ) {
                var u = n[h],
                  l = u._batchLocation;
                if (l >= 0 && l < r && e[l] === u) o[h] = l;
                else
                  for (; a < r; ) {
                    var c = e[a];
                    if (!c || c._batchEnabled !== i || c._batchLocation !== a) {
                      (o[h] = a), (u._batchLocation = a), (e[a] = u);
                      break;
                    }
                    a++;
                  }
              }
            }),
            (t.prototype.destroy = function () {
              this.renderer = null;
            }),
            t
          );
        })(),
        pi = 0,
        _i = (function () {
          function t(t) {
            (this.renderer = t),
              (this.webGLVersion = 1),
              (this.extensions = {}),
              (this.supports = { uint32Indices: !1 }),
              (this.handleContextLost = this.handleContextLost.bind(this)),
              (this.handleContextRestored =
                this.handleContextRestored.bind(this)),
              t.view.addEventListener(
                "webglcontextlost",
                this.handleContextLost,
                !1
              ),
              t.view.addEventListener(
                "webglcontextrestored",
                this.handleContextRestored,
                !1
              );
          }
          return (
            Object.defineProperty(t.prototype, "isLost", {
              get: function () {
                return !this.gl || this.gl.isContextLost();
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.contextChange = function (t) {
              (this.gl = t),
                (this.renderer.gl = t),
                (this.renderer.CONTEXT_UID = pi++);
            }),
            (t.prototype.initFromContext = function (t) {
              (this.gl = t),
                this.validateContext(t),
                (this.renderer.gl = t),
                (this.renderer.CONTEXT_UID = pi++),
                this.renderer.runners.contextChange.emit(t);
            }),
            (t.prototype.initFromOptions = function (t) {
              var e = this.createContext(this.renderer.view, t);
              this.initFromContext(e);
            }),
            (t.prototype.createContext = function (t, e) {
              var i;
              if (
                (nt.PREFER_ENV >= m.WEBGL2 && (i = t.getContext("webgl2", e)),
                i)
              )
                this.webGLVersion = 2;
              else if (
                ((this.webGLVersion = 1),
                !(i =
                  t.getContext("webgl", e) ||
                  t.getContext("experimental-webgl", e)))
              )
                throw new Error(
                  "This browser does not support WebGL. Try using the canvas renderer"
                );
              return (this.gl = i), this.getExtensions(), this.gl;
            }),
            (t.prototype.getExtensions = function () {
              var t = this.gl,
                e = {
                  loseContext: t.getExtension("WEBGL_lose_context"),
                  anisotropicFiltering: t.getExtension(
                    "EXT_texture_filter_anisotropic"
                  ),
                  floatTextureLinear: t.getExtension(
                    "OES_texture_float_linear"
                  ),
                  s3tc: t.getExtension("WEBGL_compressed_texture_s3tc"),
                  s3tc_sRGB: t.getExtension(
                    "WEBGL_compressed_texture_s3tc_srgb"
                  ),
                  etc: t.getExtension("WEBGL_compressed_texture_etc"),
                  etc1: t.getExtension("WEBGL_compressed_texture_etc1"),
                  pvrtc:
                    t.getExtension("WEBGL_compressed_texture_pvrtc") ||
                    t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),
                  atc: t.getExtension("WEBGL_compressed_texture_atc"),
                  astc: t.getExtension("WEBGL_compressed_texture_astc"),
                };
              1 === this.webGLVersion
                ? Object.assign(this.extensions, e, {
                    drawBuffers: t.getExtension("WEBGL_draw_buffers"),
                    depthTexture: t.getExtension("WEBGL_depth_texture"),
                    vertexArrayObject:
                      t.getExtension("OES_vertex_array_object") ||
                      t.getExtension("MOZ_OES_vertex_array_object") ||
                      t.getExtension("WEBKIT_OES_vertex_array_object"),
                    uint32ElementIndex: t.getExtension(
                      "OES_element_index_uint"
                    ),
                    floatTexture: t.getExtension("OES_texture_float"),
                    floatTextureLinear: t.getExtension(
                      "OES_texture_float_linear"
                    ),
                    textureHalfFloat: t.getExtension("OES_texture_half_float"),
                    textureHalfFloatLinear: t.getExtension(
                      "OES_texture_half_float_linear"
                    ),
                  })
                : 2 === this.webGLVersion &&
                  Object.assign(this.extensions, e, {
                    colorBufferFloat: t.getExtension("EXT_color_buffer_float"),
                  });
            }),
            (t.prototype.handleContextLost = function (t) {
              var e = this;
              t.preventDefault(),
                setTimeout(function () {
                  e.gl.isContextLost() &&
                    e.extensions.loseContext &&
                    e.extensions.loseContext.restoreContext();
                }, 0);
            }),
            (t.prototype.handleContextRestored = function () {
              this.renderer.runners.contextChange.emit(this.gl);
            }),
            (t.prototype.destroy = function () {
              var t = this.renderer.view;
              (this.renderer = null),
                t.removeEventListener(
                  "webglcontextlost",
                  this.handleContextLost
                ),
                t.removeEventListener(
                  "webglcontextrestored",
                  this.handleContextRestored
                ),
                this.gl.useProgram(null),
                this.extensions.loseContext &&
                  this.extensions.loseContext.loseContext();
            }),
            (t.prototype.postrender = function () {
              this.renderer.renderingToScreen && this.gl.flush();
            }),
            (t.prototype.validateContext = function (t) {
              var e = t.getContextAttributes(),
                i =
                  "WebGL2RenderingContext" in globalThis &&
                  t instanceof globalThis.WebGL2RenderingContext;
              i && (this.webGLVersion = 2),
                e &&
                  !e.stencil &&
                  console.warn(
                    "Provided WebGL context does not have a stencil buffer, masks may not render correctly"
                  );
              var r = i || !!t.getExtension("OES_element_index_uint");
              (this.supports.uint32Indices = r),
                r ||
                  console.warn(
                    "Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly"
                  );
            }),
            t
          );
        })(),
        fi = function (t) {
          (this.framebuffer = t),
            (this.stencil = null),
            (this.dirtyId = -1),
            (this.dirtyFormat = -1),
            (this.dirtySize = -1),
            (this.multisample = k.NONE),
            (this.msaaBuffer = null),
            (this.blitFramebuffer = null),
            (this.mipLevel = 0);
        },
        mi = new zt(),
        yi = (function () {
          function t(t) {
            (this.renderer = t),
              (this.managedFramebuffers = []),
              (this.unknownFramebuffer = new Ve(10, 10)),
              (this.msaaSamples = null);
          }
          return (
            (t.prototype.contextChange = function () {
              this.disposeAll(!0);
              var t = (this.gl = this.renderer.gl);
              if (
                ((this.CONTEXT_UID = this.renderer.CONTEXT_UID),
                (this.current = this.unknownFramebuffer),
                (this.viewport = new zt()),
                (this.hasMRT = !0),
                (this.writeDepthTexture = !0),
                1 === this.renderer.context.webGLVersion)
              ) {
                var e = this.renderer.context.extensions.drawBuffers,
                  i = this.renderer.context.extensions.depthTexture;
                nt.PREFER_ENV === m.WEBGL_LEGACY && ((e = null), (i = null)),
                  e
                    ? (t.drawBuffers = function (t) {
                        return e.drawBuffersWEBGL(t);
                      })
                    : ((this.hasMRT = !1), (t.drawBuffers = function () {})),
                  i || (this.writeDepthTexture = !1);
              } else
                this.msaaSamples = t.getInternalformatParameter(
                  t.RENDERBUFFER,
                  t.RGBA8,
                  t.SAMPLES
                );
            }),
            (t.prototype.bind = function (t, e, i) {
              void 0 === i && (i = 0);
              var r = this.gl;
              if (t) {
                var n =
                  t.glFramebuffers[this.CONTEXT_UID] || this.initFramebuffer(t);
                this.current !== t &&
                  ((this.current = t),
                  r.bindFramebuffer(r.FRAMEBUFFER, n.framebuffer)),
                  n.mipLevel !== i &&
                    (t.dirtyId++, t.dirtyFormat++, (n.mipLevel = i)),
                  n.dirtyId !== t.dirtyId &&
                    ((n.dirtyId = t.dirtyId),
                    n.dirtyFormat !== t.dirtyFormat
                      ? ((n.dirtyFormat = t.dirtyFormat),
                        (n.dirtySize = t.dirtySize),
                        this.updateFramebuffer(t, i))
                      : n.dirtySize !== t.dirtySize &&
                        ((n.dirtySize = t.dirtySize),
                        this.resizeFramebuffer(t)));
                for (var o = 0; o < t.colorTextures.length; o++) {
                  var s = t.colorTextures[o];
                  this.renderer.texture.unbind(s.parentTextureArray || s);
                }
                if (
                  (t.depthTexture &&
                    this.renderer.texture.unbind(t.depthTexture),
                  e)
                ) {
                  var a = e.width >> i,
                    h = e.height >> i,
                    u = a / e.width;
                  this.setViewport(e.x * u, e.y * u, a, h);
                } else
                  (a = t.width >> i),
                    (h = t.height >> i),
                    this.setViewport(0, 0, a, h);
              } else
                this.current &&
                  ((this.current = null),
                  r.bindFramebuffer(r.FRAMEBUFFER, null)),
                  e
                    ? this.setViewport(e.x, e.y, e.width, e.height)
                    : this.setViewport(
                        0,
                        0,
                        this.renderer.width,
                        this.renderer.height
                      );
            }),
            (t.prototype.setViewport = function (t, e, i, r) {
              var n = this.viewport;
              (t = Math.round(t)),
                (e = Math.round(e)),
                (i = Math.round(i)),
                (r = Math.round(r)),
                (n.width === i && n.height === r && n.x === t && n.y === e) ||
                  ((n.x = t),
                  (n.y = e),
                  (n.width = i),
                  (n.height = r),
                  this.gl.viewport(t, e, i, r));
            }),
            Object.defineProperty(t.prototype, "size", {
              get: function () {
                return this.current
                  ? {
                      x: 0,
                      y: 0,
                      width: this.current.width,
                      height: this.current.height,
                    }
                  : {
                      x: 0,
                      y: 0,
                      width: this.renderer.width,
                      height: this.renderer.height,
                    };
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.clear = function (t, e, i, r, n) {
              void 0 === n && (n = g.COLOR | g.DEPTH);
              var o = this.gl;
              o.clearColor(t, e, i, r), o.clear(n);
            }),
            (t.prototype.initFramebuffer = function (t) {
              var e = this.gl,
                i = new fi(e.createFramebuffer());
              return (
                (i.multisample = this.detectSamples(t.multisample)),
                (t.glFramebuffers[this.CONTEXT_UID] = i),
                this.managedFramebuffers.push(t),
                t.disposeRunner.add(this),
                i
              );
            }),
            (t.prototype.resizeFramebuffer = function (t) {
              var e = this.gl,
                i = t.glFramebuffers[this.CONTEXT_UID];
              i.msaaBuffer &&
                (e.bindRenderbuffer(e.RENDERBUFFER, i.msaaBuffer),
                e.renderbufferStorageMultisample(
                  e.RENDERBUFFER,
                  i.multisample,
                  e.RGBA8,
                  t.width,
                  t.height
                )),
                i.stencil &&
                  (e.bindRenderbuffer(e.RENDERBUFFER, i.stencil),
                  i.msaaBuffer
                    ? e.renderbufferStorageMultisample(
                        e.RENDERBUFFER,
                        i.multisample,
                        e.DEPTH24_STENCIL8,
                        t.width,
                        t.height
                      )
                    : e.renderbufferStorage(
                        e.RENDERBUFFER,
                        e.DEPTH_STENCIL,
                        t.width,
                        t.height
                      ));
              var r = t.colorTextures,
                n = r.length;
              e.drawBuffers || (n = Math.min(n, 1));
              for (var o = 0; o < n; o++) {
                var s = r[o],
                  a = s.parentTextureArray || s;
                this.renderer.texture.bind(a, 0);
              }
              t.depthTexture &&
                this.writeDepthTexture &&
                this.renderer.texture.bind(t.depthTexture, 0);
            }),
            (t.prototype.updateFramebuffer = function (t, e) {
              var i = this.gl,
                r = t.glFramebuffers[this.CONTEXT_UID],
                n = t.colorTextures,
                o = n.length;
              i.drawBuffers || (o = Math.min(o, 1)),
                r.multisample > 1 && this.canMultisampleFramebuffer(t)
                  ? ((r.msaaBuffer = r.msaaBuffer || i.createRenderbuffer()),
                    i.bindRenderbuffer(i.RENDERBUFFER, r.msaaBuffer),
                    i.renderbufferStorageMultisample(
                      i.RENDERBUFFER,
                      r.multisample,
                      i.RGBA8,
                      t.width,
                      t.height
                    ),
                    i.framebufferRenderbuffer(
                      i.FRAMEBUFFER,
                      i.COLOR_ATTACHMENT0,
                      i.RENDERBUFFER,
                      r.msaaBuffer
                    ))
                  : r.msaaBuffer &&
                    (i.deleteRenderbuffer(r.msaaBuffer),
                    (r.msaaBuffer = null),
                    r.blitFramebuffer &&
                      (r.blitFramebuffer.dispose(),
                      (r.blitFramebuffer = null)));
              for (var s = [], a = 0; a < o; a++) {
                var h = n[a],
                  u = h.parentTextureArray || h;
                this.renderer.texture.bind(u, 0),
                  (0 === a && r.msaaBuffer) ||
                    (i.framebufferTexture2D(
                      i.FRAMEBUFFER,
                      i.COLOR_ATTACHMENT0 + a,
                      h.target,
                      u._glTextures[this.CONTEXT_UID].texture,
                      e
                    ),
                    s.push(i.COLOR_ATTACHMENT0 + a));
              }
              if (
                (s.length > 1 && i.drawBuffers(s),
                t.depthTexture && this.writeDepthTexture)
              ) {
                var l = t.depthTexture;
                this.renderer.texture.bind(l, 0),
                  i.framebufferTexture2D(
                    i.FRAMEBUFFER,
                    i.DEPTH_ATTACHMENT,
                    i.TEXTURE_2D,
                    l._glTextures[this.CONTEXT_UID].texture,
                    e
                  );
              }
              (!t.stencil && !t.depth) ||
              (t.depthTexture && this.writeDepthTexture)
                ? r.stencil &&
                  (i.deleteRenderbuffer(r.stencil), (r.stencil = null))
                : ((r.stencil = r.stencil || i.createRenderbuffer()),
                  i.bindRenderbuffer(i.RENDERBUFFER, r.stencil),
                  r.msaaBuffer
                    ? i.renderbufferStorageMultisample(
                        i.RENDERBUFFER,
                        r.multisample,
                        i.DEPTH24_STENCIL8,
                        t.width,
                        t.height
                      )
                    : i.renderbufferStorage(
                        i.RENDERBUFFER,
                        i.DEPTH_STENCIL,
                        t.width,
                        t.height
                      ),
                  i.framebufferRenderbuffer(
                    i.FRAMEBUFFER,
                    i.DEPTH_STENCIL_ATTACHMENT,
                    i.RENDERBUFFER,
                    r.stencil
                  ));
            }),
            (t.prototype.canMultisampleFramebuffer = function (t) {
              return (
                1 !== this.renderer.context.webGLVersion &&
                t.colorTextures.length <= 1 &&
                !t.depthTexture
              );
            }),
            (t.prototype.detectSamples = function (t) {
              var e = this.msaaSamples,
                i = k.NONE;
              if (t <= 1 || null === e) return i;
              for (var r = 0; r < e.length; r++)
                if (e[r] <= t) {
                  i = e[r];
                  break;
                }
              return 1 === i && (i = k.NONE), i;
            }),
            (t.prototype.blit = function (t, e, i) {
              var r = this,
                n = r.current,
                o = r.renderer,
                s = r.gl,
                a = r.CONTEXT_UID;
              if (2 === o.context.webGLVersion && n) {
                var h = n.glFramebuffers[a];
                if (h) {
                  if (!t) {
                    if (!h.msaaBuffer) return;
                    var u = n.colorTextures[0];
                    if (!u) return;
                    h.blitFramebuffer ||
                      ((h.blitFramebuffer = new Ve(n.width, n.height)),
                      h.blitFramebuffer.addColorTexture(0, u)),
                      (t = h.blitFramebuffer).colorTextures[0] !== u &&
                        ((t.colorTextures[0] = u),
                        t.dirtyId++,
                        t.dirtyFormat++),
                      (t.width === n.width && t.height === n.height) ||
                        ((t.width = n.width),
                        (t.height = n.height),
                        t.dirtyId++,
                        t.dirtySize++);
                  }
                  e || (((e = mi).width = n.width), (e.height = n.height)),
                    i || (i = e);
                  var l = e.width === i.width && e.height === i.height;
                  this.bind(t),
                    s.bindFramebuffer(s.READ_FRAMEBUFFER, h.framebuffer),
                    s.blitFramebuffer(
                      e.left,
                      e.top,
                      e.right,
                      e.bottom,
                      i.left,
                      i.top,
                      i.right,
                      i.bottom,
                      s.COLOR_BUFFER_BIT,
                      l ? s.NEAREST : s.LINEAR
                    );
                }
              }
            }),
            (t.prototype.disposeFramebuffer = function (t, e) {
              var i = t.glFramebuffers[this.CONTEXT_UID],
                r = this.gl;
              if (i) {
                delete t.glFramebuffers[this.CONTEXT_UID];
                var n = this.managedFramebuffers.indexOf(t);
                n >= 0 && this.managedFramebuffers.splice(n, 1),
                  t.disposeRunner.remove(this),
                  e ||
                    (r.deleteFramebuffer(i.framebuffer),
                    i.msaaBuffer && r.deleteRenderbuffer(i.msaaBuffer),
                    i.stencil && r.deleteRenderbuffer(i.stencil)),
                  i.blitFramebuffer && i.blitFramebuffer.dispose();
              }
            }),
            (t.prototype.disposeAll = function (t) {
              var e = this.managedFramebuffers;
              this.managedFramebuffers = [];
              for (var i = 0; i < e.length; i++)
                this.disposeFramebuffer(e[i], t);
            }),
            (t.prototype.forceStencil = function () {
              var t = this.current;
              if (t) {
                var e = t.glFramebuffers[this.CONTEXT_UID];
                if (e && !e.stencil) {
                  t.stencil = !0;
                  var i = t.width,
                    r = t.height,
                    n = this.gl,
                    o = n.createRenderbuffer();
                  n.bindRenderbuffer(n.RENDERBUFFER, o),
                    e.msaaBuffer
                      ? n.renderbufferStorageMultisample(
                          n.RENDERBUFFER,
                          e.multisample,
                          n.DEPTH24_STENCIL8,
                          i,
                          r
                        )
                      : n.renderbufferStorage(
                          n.RENDERBUFFER,
                          n.DEPTH_STENCIL,
                          i,
                          r
                        ),
                    (e.stencil = o),
                    n.framebufferRenderbuffer(
                      n.FRAMEBUFFER,
                      n.DEPTH_STENCIL_ATTACHMENT,
                      n.RENDERBUFFER,
                      o
                    );
                }
              }
            }),
            (t.prototype.reset = function () {
              (this.current = this.unknownFramebuffer),
                (this.viewport = new zt());
            }),
            (t.prototype.destroy = function () {
              this.renderer = null;
            }),
            t
          );
        })(),
        gi = { 5126: 4, 5123: 2, 5121: 1 },
        vi = (function () {
          function t(t) {
            (this.renderer = t),
              (this._activeGeometry = null),
              (this._activeVao = null),
              (this.hasVao = !0),
              (this.hasInstance = !0),
              (this.canUseUInt32ElementIndex = !1),
              (this.managedGeometries = {});
          }
          return (
            (t.prototype.contextChange = function () {
              this.disposeAll(!0);
              var t = (this.gl = this.renderer.gl),
                e = this.renderer.context;
              if (
                ((this.CONTEXT_UID = this.renderer.CONTEXT_UID),
                2 !== e.webGLVersion)
              ) {
                var i = this.renderer.context.extensions.vertexArrayObject;
                nt.PREFER_ENV === m.WEBGL_LEGACY && (i = null),
                  i
                    ? ((t.createVertexArray = function () {
                        return i.createVertexArrayOES();
                      }),
                      (t.bindVertexArray = function (t) {
                        return i.bindVertexArrayOES(t);
                      }),
                      (t.deleteVertexArray = function (t) {
                        return i.deleteVertexArrayOES(t);
                      }))
                    : ((this.hasVao = !1),
                      (t.createVertexArray = function () {
                        return null;
                      }),
                      (t.bindVertexArray = function () {
                        return null;
                      }),
                      (t.deleteVertexArray = function () {
                        return null;
                      }));
              }
              if (2 !== e.webGLVersion) {
                var r = t.getExtension("ANGLE_instanced_arrays");
                r
                  ? ((t.vertexAttribDivisor = function (t, e) {
                      return r.vertexAttribDivisorANGLE(t, e);
                    }),
                    (t.drawElementsInstanced = function (t, e, i, n, o) {
                      return r.drawElementsInstancedANGLE(t, e, i, n, o);
                    }),
                    (t.drawArraysInstanced = function (t, e, i, n) {
                      return r.drawArraysInstancedANGLE(t, e, i, n);
                    }))
                  : (this.hasInstance = !1);
              }
              this.canUseUInt32ElementIndex =
                2 === e.webGLVersion || !!e.extensions.uint32ElementIndex;
            }),
            (t.prototype.bind = function (t, e) {
              e = e || this.renderer.shader.shader;
              var i = this.gl,
                r = t.glVertexArrayObjects[this.CONTEXT_UID],
                n = !1;
              r ||
                ((this.managedGeometries[t.id] = t),
                t.disposeRunner.add(this),
                (t.glVertexArrayObjects[this.CONTEXT_UID] = r = {}),
                (n = !0));
              var o = r[e.program.id] || this.initGeometryVao(t, e, n);
              (this._activeGeometry = t),
                this._activeVao !== o &&
                  ((this._activeVao = o),
                  this.hasVao
                    ? i.bindVertexArray(o)
                    : this.activateVao(t, e.program)),
                this.updateBuffers();
            }),
            (t.prototype.reset = function () {
              this.unbind();
            }),
            (t.prototype.updateBuffers = function () {
              for (
                var t = this._activeGeometry, e = this.renderer.buffer, i = 0;
                i < t.buffers.length;
                i++
              ) {
                var r = t.buffers[i];
                e.update(r);
              }
            }),
            (t.prototype.checkCompatibility = function (t, e) {
              var i = t.attributes,
                r = e.attributeData;
              for (var n in r)
                if (!i[n])
                  throw new Error(
                    'shader and geometry incompatible, geometry missing the "' +
                      n +
                      '" attribute'
                  );
            }),
            (t.prototype.getSignature = function (t, e) {
              var i = t.attributes,
                r = e.attributeData,
                n = ["g", t.id];
              for (var o in i) r[o] && n.push(o, r[o].location);
              return n.join("-");
            }),
            (t.prototype.initGeometryVao = function (t, e, i) {
              void 0 === i && (i = !0);
              var r = this.gl,
                n = this.CONTEXT_UID,
                o = this.renderer.buffer,
                s = e.program;
              s.glPrograms[n] || this.renderer.shader.generateProgram(e),
                this.checkCompatibility(t, s);
              var a = this.getSignature(t, s),
                h = t.glVertexArrayObjects[this.CONTEXT_UID],
                u = h[a];
              if (u) return (h[s.id] = u), u;
              var l = t.buffers,
                c = t.attributes,
                d = {},
                p = {};
              for (var _ in l) (d[_] = 0), (p[_] = 0);
              for (var _ in c)
                !c[_].size && s.attributeData[_]
                  ? (c[_].size = s.attributeData[_].size)
                  : c[_].size ||
                    console.warn(
                      "PIXI Geometry attribute '" +
                        _ +
                        "' size cannot be determined (likely the bound shader does not have the attribute)"
                    ),
                  (d[c[_].buffer] += c[_].size * gi[c[_].type]);
              for (var _ in c) {
                var f = c[_],
                  m = f.size;
                void 0 === f.stride &&
                  (d[f.buffer] === m * gi[f.type]
                    ? (f.stride = 0)
                    : (f.stride = d[f.buffer])),
                  void 0 === f.start &&
                    ((f.start = p[f.buffer]), (p[f.buffer] += m * gi[f.type]));
              }
              (u = r.createVertexArray()), r.bindVertexArray(u);
              for (var y = 0; y < l.length; y++) {
                var g = l[y];
                o.bind(g), i && g._glBuffers[n].refCount++;
              }
              return (
                this.activateVao(t, s),
                (this._activeVao = u),
                (h[s.id] = u),
                (h[a] = u),
                u
              );
            }),
            (t.prototype.disposeGeometry = function (t, e) {
              var i;
              if (this.managedGeometries[t.id]) {
                delete this.managedGeometries[t.id];
                var r = t.glVertexArrayObjects[this.CONTEXT_UID],
                  n = this.gl,
                  o = t.buffers,
                  s =
                    null === (i = this.renderer) || void 0 === i
                      ? void 0
                      : i.buffer;
                if ((t.disposeRunner.remove(this), r)) {
                  if (s)
                    for (var a = 0; a < o.length; a++) {
                      var h = o[a]._glBuffers[this.CONTEXT_UID];
                      h &&
                        (h.refCount--,
                        0 !== h.refCount || e || s.dispose(o[a], e));
                    }
                  if (!e)
                    for (var u in r)
                      if ("g" === u[0]) {
                        var l = r[u];
                        this._activeVao === l && this.unbind(),
                          n.deleteVertexArray(l);
                      }
                  delete t.glVertexArrayObjects[this.CONTEXT_UID];
                }
              }
            }),
            (t.prototype.disposeAll = function (t) {
              for (
                var e = Object.keys(this.managedGeometries), i = 0;
                i < e.length;
                i++
              )
                this.disposeGeometry(this.managedGeometries[e[i]], t);
            }),
            (t.prototype.activateVao = function (t, e) {
              var i = this.gl,
                r = this.CONTEXT_UID,
                n = this.renderer.buffer,
                o = t.buffers,
                s = t.attributes;
              t.indexBuffer && n.bind(t.indexBuffer);
              var a = null;
              for (var h in s) {
                var u = s[h],
                  l = o[u.buffer],
                  c = l._glBuffers[r];
                if (e.attributeData[h]) {
                  a !== c && (n.bind(l), (a = c));
                  var d = e.attributeData[h].location;
                  if (
                    (i.enableVertexAttribArray(d),
                    i.vertexAttribPointer(
                      d,
                      u.size,
                      u.type || i.FLOAT,
                      u.normalized,
                      u.stride,
                      u.start
                    ),
                    u.instance)
                  ) {
                    if (!this.hasInstance)
                      throw new Error(
                        "geometry error, GPU Instancing is not supported on this device"
                      );
                    i.vertexAttribDivisor(d, 1);
                  }
                }
              }
            }),
            (t.prototype.draw = function (t, e, i, r) {
              var n = this.gl,
                o = this._activeGeometry;
              if (o.indexBuffer) {
                var s = o.indexBuffer.data.BYTES_PER_ELEMENT,
                  a = 2 === s ? n.UNSIGNED_SHORT : n.UNSIGNED_INT;
                2 === s || (4 === s && this.canUseUInt32ElementIndex)
                  ? o.instanced
                    ? n.drawElementsInstanced(
                        t,
                        e || o.indexBuffer.data.length,
                        a,
                        (i || 0) * s,
                        r || 1
                      )
                    : n.drawElements(
                        t,
                        e || o.indexBuffer.data.length,
                        a,
                        (i || 0) * s
                      )
                  : console.warn("unsupported index buffer type: uint32");
              } else
                o.instanced
                  ? n.drawArraysInstanced(t, i, e || o.getSize(), r || 1)
                  : n.drawArrays(t, i, e || o.getSize());
              return this;
            }),
            (t.prototype.unbind = function () {
              this.gl.bindVertexArray(null),
                (this._activeVao = null),
                (this._activeGeometry = null);
            }),
            (t.prototype.destroy = function () {
              this.renderer = null;
            }),
            t
          );
        })(),
        bi = (function () {
          function t(t) {
            void 0 === t && (t = null),
              (this.type = R.NONE),
              (this.autoDetect = !0),
              (this.maskObject = t || null),
              (this.pooled = !1),
              (this.isMaskData = !0),
              (this.resolution = null),
              (this.multisample = nt.FILTER_MULTISAMPLE),
              (this.enabled = !0),
              (this.colorMask = 15),
              (this._filters = null),
              (this._stencilCounter = 0),
              (this._scissorCounter = 0),
              (this._scissorRect = null),
              (this._scissorRectLocal = null),
              (this._colorMask = 15),
              (this._target = null);
          }
          return (
            Object.defineProperty(t.prototype, "filter", {
              get: function () {
                return this._filters ? this._filters[0] : null;
              },
              set: function (t) {
                t
                  ? this._filters
                    ? (this._filters[0] = t)
                    : (this._filters = [t])
                  : (this._filters = null);
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.reset = function () {
              this.pooled &&
                ((this.maskObject = null),
                (this.type = R.NONE),
                (this.autoDetect = !0)),
                (this._target = null),
                (this._scissorRectLocal = null);
            }),
            (t.prototype.copyCountersOrReset = function (t) {
              t
                ? ((this._stencilCounter = t._stencilCounter),
                  (this._scissorCounter = t._scissorCounter),
                  (this._scissorRect = t._scissorRect))
                : ((this._stencilCounter = 0),
                  (this._scissorCounter = 0),
                  (this._scissorRect = null));
            }),
            t
          );
        })();
      function xi(t, e, i) {
        var r = t.createShader(e);
        return t.shaderSource(r, i), t.compileShader(r), r;
      }
      function wi(t, e) {
        var i = t
            .getShaderSource(e)
            .split("\n")
            .map(function (t, e) {
              return e + ": " + t;
            }),
          r = t.getShaderInfoLog(e),
          n = r.split("\n"),
          o = {},
          s = n
            .map(function (t) {
              return parseFloat(t.replace(/^ERROR\: 0\:([\d]+)\:.*$/, "$1"));
            })
            .filter(function (t) {
              return !(!t || o[t] || ((o[t] = !0), 0));
            }),
          a = [""];
        s.forEach(function (t) {
          (i[t - 1] = "%c" + i[t - 1] + "%c"),
            a.push(
              "background: #FF0000; color:#FFFFFF; font-size: 10px",
              "font-size: 10px"
            );
        });
        var h = i.join("\n");
        (a[0] = h),
          console.error(r),
          console.groupCollapsed("click to view full shader code"),
          console.warn.apply(console, a),
          console.groupEnd();
      }
      function Ti(t) {
        for (var e = new Array(t), i = 0; i < e.length; i++) e[i] = !1;
        return e;
      }
      function Ai(t, e) {
        switch (t) {
          case "float":
          case "int":
          case "uint":
          case "sampler2D":
          case "sampler2DArray":
            return 0;
          case "vec2":
            return new Float32Array(2 * e);
          case "vec3":
            return new Float32Array(3 * e);
          case "vec4":
            return new Float32Array(4 * e);
          case "ivec2":
            return new Int32Array(2 * e);
          case "ivec3":
            return new Int32Array(3 * e);
          case "ivec4":
            return new Int32Array(4 * e);
          case "uvec2":
            return new Uint32Array(2 * e);
          case "uvec3":
            return new Uint32Array(3 * e);
          case "uvec4":
            return new Uint32Array(4 * e);
          case "bool":
            return !1;
          case "bvec2":
            return Ti(2 * e);
          case "bvec3":
            return Ti(3 * e);
          case "bvec4":
            return Ti(4 * e);
          case "mat2":
            return new Float32Array([1, 0, 0, 1]);
          case "mat3":
            return new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]);
          case "mat4":
            return new Float32Array([
              1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1,
            ]);
        }
        return null;
      }
      var Si,
        Ei = {},
        Ci = Ei;
      function Mi(t, e, i) {
        if ("precision" !== t.substring(0, 9)) {
          var r = e;
          return (
            e === O.HIGH && i !== O.HIGH && (r = O.MEDIUM),
            "precision " + r + " float;\n" + t
          );
        }
        return i !== O.HIGH && "precision highp" === t.substring(0, 15)
          ? t.replace("precision highp", "precision mediump")
          : t;
      }
      var Pi = {
        float: 1,
        vec2: 2,
        vec3: 3,
        vec4: 4,
        int: 1,
        ivec2: 2,
        ivec3: 3,
        ivec4: 4,
        uint: 1,
        uvec2: 2,
        uvec3: 3,
        uvec4: 4,
        bool: 1,
        bvec2: 2,
        bvec3: 3,
        bvec4: 4,
        mat2: 4,
        mat3: 9,
        mat4: 16,
        sampler2D: 1,
      };
      function Bi(t) {
        return Pi[t];
      }
      var Oi = null,
        Ri = {
          FLOAT: "float",
          FLOAT_VEC2: "vec2",
          FLOAT_VEC3: "vec3",
          FLOAT_VEC4: "vec4",
          INT: "int",
          INT_VEC2: "ivec2",
          INT_VEC3: "ivec3",
          INT_VEC4: "ivec4",
          UNSIGNED_INT: "uint",
          UNSIGNED_INT_VEC2: "uvec2",
          UNSIGNED_INT_VEC3: "uvec3",
          UNSIGNED_INT_VEC4: "uvec4",
          BOOL: "bool",
          BOOL_VEC2: "bvec2",
          BOOL_VEC3: "bvec3",
          BOOL_VEC4: "bvec4",
          FLOAT_MAT2: "mat2",
          FLOAT_MAT3: "mat3",
          FLOAT_MAT4: "mat4",
          SAMPLER_2D: "sampler2D",
          INT_SAMPLER_2D: "sampler2D",
          UNSIGNED_INT_SAMPLER_2D: "sampler2D",
          SAMPLER_CUBE: "samplerCube",
          INT_SAMPLER_CUBE: "samplerCube",
          UNSIGNED_INT_SAMPLER_CUBE: "samplerCube",
          SAMPLER_2D_ARRAY: "sampler2DArray",
          INT_SAMPLER_2D_ARRAY: "sampler2DArray",
          UNSIGNED_INT_SAMPLER_2D_ARRAY: "sampler2DArray",
        };
      function Ii(t, e) {
        if (!Oi) {
          var i = Object.keys(Ri);
          Oi = {};
          for (var r = 0; r < i.length; ++r) {
            var n = i[r];
            Oi[t[n]] = Ri[n];
          }
        }
        return Oi[e];
      }
      var ki,
        Fi = [
          {
            test: function (t) {
              return "float" === t.type && 1 === t.size && !t.isArray;
            },
            code: function (t) {
              return (
                '\n            if(uv["' +
                t +
                '"] !== ud["' +
                t +
                '"].value)\n            {\n                ud["' +
                t +
                '"].value = uv["' +
                t +
                '"]\n                gl.uniform1f(ud["' +
                t +
                '"].location, uv["' +
                t +
                '"])\n            }\n            '
              );
            },
          },
          {
            test: function (t, e) {
              return !(
                ("sampler2D" !== t.type &&
                  "samplerCube" !== t.type &&
                  "sampler2DArray" !== t.type) ||
                1 !== t.size ||
                t.isArray ||
                (null != e && void 0 === e.castToBaseTexture)
              );
            },
            code: function (t) {
              return (
                't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["' +
                t +
                '"], t);\n\n            if(ud["' +
                t +
                '"].value !== t)\n            {\n                ud["' +
                t +
                '"].value = t;\n                gl.uniform1i(ud["' +
                t +
                '"].location, t);\n; // eslint-disable-line max-len\n            }'
              );
            },
          },
          {
            test: function (t, e) {
              return (
                "mat3" === t.type &&
                1 === t.size &&
                !t.isArray &&
                void 0 !== e.a
              );
            },
            code: function (t) {
              return (
                '\n            gl.uniformMatrix3fv(ud["' +
                t +
                '"].location, false, uv["' +
                t +
                '"].toArray(true));\n            '
              );
            },
            codeUbo: function (t) {
              return (
                "\n                var " +
                t +
                "_matrix = uv." +
                t +
                ".toArray(true);\n\n                data[offset] = " +
                t +
                "_matrix[0];\n                data[offset+1] = " +
                t +
                "_matrix[1];\n                data[offset+2] = " +
                t +
                "_matrix[2];\n        \n                data[offset + 4] = " +
                t +
                "_matrix[3];\n                data[offset + 5] = " +
                t +
                "_matrix[4];\n                data[offset + 6] = " +
                t +
                "_matrix[5];\n        \n                data[offset + 8] = " +
                t +
                "_matrix[6];\n                data[offset + 9] = " +
                t +
                "_matrix[7];\n                data[offset + 10] = " +
                t +
                "_matrix[8];\n            "
              );
            },
          },
          {
            test: function (t, e) {
              return (
                "vec2" === t.type &&
                1 === t.size &&
                !t.isArray &&
                void 0 !== e.x
              );
            },
            code: function (t) {
              return (
                '\n                cv = ud["' +
                t +
                '"].value;\n                v = uv["' +
                t +
                '"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["' +
                t +
                '"].location, v.x, v.y);\n                }'
              );
            },
            codeUbo: function (t) {
              return (
                "\n                v = uv." +
                t +
                ";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "
              );
            },
          },
          {
            test: function (t) {
              return "vec2" === t.type && 1 === t.size && !t.isArray;
            },
            code: function (t) {
              return (
                '\n                cv = ud["' +
                t +
                '"].value;\n                v = uv["' +
                t +
                '"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["' +
                t +
                '"].location, v[0], v[1]);\n                }\n            '
              );
            },
          },
          {
            test: function (t, e) {
              return (
                "vec4" === t.type &&
                1 === t.size &&
                !t.isArray &&
                void 0 !== e.width
              );
            },
            code: function (t) {
              return (
                '\n                cv = ud["' +
                t +
                '"].value;\n                v = uv["' +
                t +
                '"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["' +
                t +
                '"].location, v.x, v.y, v.width, v.height)\n                }'
              );
            },
            codeUbo: function (t) {
              return (
                "\n                    v = uv." +
                t +
                ";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "
              );
            },
          },
          {
            test: function (t) {
              return "vec4" === t.type && 1 === t.size && !t.isArray;
            },
            code: function (t) {
              return (
                '\n                cv = ud["' +
                t +
                '"].value;\n                v = uv["' +
                t +
                '"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["' +
                t +
                '"].location, v[0], v[1], v[2], v[3])\n                }'
              );
            },
          },
        ],
        Di = {
          float:
            "\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",
          vec2: "\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",
          vec3: "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",
          vec4: "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",
          int: "\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",
          ivec2:
            "\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",
          ivec3:
            "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",
          ivec4:
            "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",
          uint: "\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",
          uvec2:
            "\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",
          uvec3:
            "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",
          uvec4:
            "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",
          bool: "\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",
          bvec2:
            "\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",
          bvec3:
            "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",
          bvec4:
            "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",
          mat2: "gl.uniformMatrix2fv(location, false, v)",
          mat3: "gl.uniformMatrix3fv(location, false, v)",
          mat4: "gl.uniformMatrix4fv(location, false, v)",
          sampler2D:
            "\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",
          samplerCube:
            "\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",
          sampler2DArray:
            "\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",
        },
        Ni = {
          float: "gl.uniform1fv(location, v)",
          vec2: "gl.uniform2fv(location, v)",
          vec3: "gl.uniform3fv(location, v)",
          vec4: "gl.uniform4fv(location, v)",
          mat4: "gl.uniformMatrix4fv(location, false, v)",
          mat3: "gl.uniformMatrix3fv(location, false, v)",
          mat2: "gl.uniformMatrix2fv(location, false, v)",
          int: "gl.uniform1iv(location, v)",
          ivec2: "gl.uniform2iv(location, v)",
          ivec3: "gl.uniform3iv(location, v)",
          ivec4: "gl.uniform4iv(location, v)",
          uint: "gl.uniform1uiv(location, v)",
          uvec2: "gl.uniform2uiv(location, v)",
          uvec3: "gl.uniform3uiv(location, v)",
          uvec4: "gl.uniform4uiv(location, v)",
          bool: "gl.uniform1iv(location, v)",
          bvec2: "gl.uniform2iv(location, v)",
          bvec3: "gl.uniform3iv(location, v)",
          bvec4: "gl.uniform4iv(location, v)",
          sampler2D: "gl.uniform1iv(location, v)",
          samplerCube: "gl.uniform1iv(location, v)",
          sampler2DArray: "gl.uniform1iv(location, v)",
        },
        Li = [
          "precision mediump float;",
          "void main(void){",
          "float test = 0.1;",
          "%forloop%",
          "gl_FragColor = vec4(0.0);",
          "}",
        ].join("\n");
      function Ui(t) {
        for (var e = "", i = 0; i < t; ++i)
          i > 0 && (e += "\nelse "),
            i < t - 1 && (e += "if(test == " + i + ".0){}");
        return e;
      }
      var Gi = 0,
        Vi = {},
        ji = (function () {
          function t(e, i, r) {
            void 0 === r && (r = "pixi-shader"),
              (this.id = Gi++),
              (this.vertexSrc = e || t.defaultVertexSrc),
              (this.fragmentSrc = i || t.defaultFragmentSrc),
              (this.vertexSrc = this.vertexSrc.trim()),
              (this.fragmentSrc = this.fragmentSrc.trim()),
              "#version" !== this.vertexSrc.substring(0, 8) &&
                ((r = r.replace(/\s+/g, "-")),
                Vi[r] ? (Vi[r]++, (r += "-" + Vi[r])) : (Vi[r] = 1),
                (this.vertexSrc =
                  "#define SHADER_NAME " + r + "\n" + this.vertexSrc),
                (this.fragmentSrc =
                  "#define SHADER_NAME " + r + "\n" + this.fragmentSrc),
                (this.vertexSrc = Mi(
                  this.vertexSrc,
                  nt.PRECISION_VERTEX,
                  O.HIGH
                )),
                (this.fragmentSrc = Mi(
                  this.fragmentSrc,
                  nt.PRECISION_FRAGMENT,
                  (function () {
                    if (!Si) {
                      Si = O.MEDIUM;
                      var t = (function () {
                        if (Ci === Ei || (Ci && Ci.isContextLost())) {
                          var t = nt.ADAPTER.createCanvas(),
                            e = void 0;
                          nt.PREFER_ENV >= m.WEBGL2 &&
                            (e = t.getContext("webgl2", {})),
                            e ||
                              ((e =
                                t.getContext("webgl", {}) ||
                                t.getContext("experimental-webgl", {}))
                                ? e.getExtension("WEBGL_draw_buffers")
                                : (e = null)),
                            (Ci = e);
                        }
                        return Ci;
                      })();
                      if (t && t.getShaderPrecisionFormat) {
                        var e = t.getShaderPrecisionFormat(
                          t.FRAGMENT_SHADER,
                          t.HIGH_FLOAT
                        );
                        Si = e.precision ? O.HIGH : O.MEDIUM;
                      }
                    }
                    return Si;
                  })()
                ))),
              (this.glPrograms = {}),
              (this.syncUniforms = null);
          }
          return (
            Object.defineProperty(t, "defaultVertexSrc", {
              get: function () {
                return "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n";
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "defaultFragmentSrc", {
              get: function () {
                return "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}";
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.from = function (e, i, r) {
              var n = e + i,
                o = Rt[n];
              return o || (Rt[n] = o = new t(e, i, r)), o;
            }),
            t
          );
        })(),
        zi = (function () {
          function t(t, e) {
            (this.uniformBindCount = 0),
              (this.program = t),
              (this.uniformGroup = e
                ? e instanceof si
                  ? e
                  : new si(e)
                : new si({})),
              (this.disposeRunner = new ye("disposeShader"));
          }
          return (
            (t.prototype.checkUniformExists = function (t, e) {
              if (e.uniforms[t]) return !0;
              for (var i in e.uniforms) {
                var r = e.uniforms[i];
                if (r.group && this.checkUniformExists(t, r)) return !0;
              }
              return !1;
            }),
            (t.prototype.destroy = function () {
              (this.uniformGroup = null),
                this.disposeRunner.emit(this),
                this.disposeRunner.destroy();
            }),
            Object.defineProperty(t.prototype, "uniforms", {
              get: function () {
                return this.uniformGroup.uniforms;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.from = function (e, i, r) {
              return new t(ji.from(e, i), r);
            }),
            t
          );
        })(),
        Xi = (function () {
          function t() {
            (this.data = 0),
              (this.blendMode = v.NORMAL),
              (this.polygonOffset = 0),
              (this.blend = !0),
              (this.depthMask = !0);
          }
          return (
            Object.defineProperty(t.prototype, "blend", {
              get: function () {
                return !!(1 & this.data);
              },
              set: function (t) {
                !!(1 & this.data) !== t && (this.data ^= 1);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "offsets", {
              get: function () {
                return !!(2 & this.data);
              },
              set: function (t) {
                !!(2 & this.data) !== t && (this.data ^= 2);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "culling", {
              get: function () {
                return !!(4 & this.data);
              },
              set: function (t) {
                !!(4 & this.data) !== t && (this.data ^= 4);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "depthTest", {
              get: function () {
                return !!(8 & this.data);
              },
              set: function (t) {
                !!(8 & this.data) !== t && (this.data ^= 8);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "depthMask", {
              get: function () {
                return !!(32 & this.data);
              },
              set: function (t) {
                !!(32 & this.data) !== t && (this.data ^= 32);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "clockwiseFrontFace", {
              get: function () {
                return !!(16 & this.data);
              },
              set: function (t) {
                !!(16 & this.data) !== t && (this.data ^= 16);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "blendMode", {
              get: function () {
                return this._blendMode;
              },
              set: function (t) {
                (this.blend = t !== v.NONE), (this._blendMode = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "polygonOffset", {
              get: function () {
                return this._polygonOffset;
              },
              set: function (t) {
                (this.offsets = !!t), (this._polygonOffset = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.toString = function () {
              return (
                "[@pixi/core:State blendMode=" +
                this.blendMode +
                " clockwiseFrontFace=" +
                this.clockwiseFrontFace +
                " culling=" +
                this.culling +
                " depthMask=" +
                this.depthMask +
                " polygonOffset=" +
                this.polygonOffset +
                "]"
              );
            }),
            (t.for2d = function () {
              var e = new t();
              return (e.depthTest = !1), (e.blend = !0), e;
            }),
            t
          );
        })(),
        Hi = (function (t) {
          function e(i, r, n) {
            var o = this,
              s = ji.from(i || e.defaultVertexSrc, r || e.defaultFragmentSrc);
            return (
              ((o = t.call(this, s, n) || this).padding = 0),
              (o.resolution = nt.FILTER_RESOLUTION),
              (o.multisample = nt.FILTER_MULTISAMPLE),
              (o.enabled = !0),
              (o.autoFit = !0),
              (o.state = new Xi()),
              o
            );
          }
          return (
            Ae(e, t),
            (e.prototype.apply = function (t, e, i, r, n) {
              t.applyFilter(this, e, i, r);
            }),
            Object.defineProperty(e.prototype, "blendMode", {
              get: function () {
                return this.state.blendMode;
              },
              set: function (t) {
                this.state.blendMode = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "resolution", {
              get: function () {
                return this._resolution;
              },
              set: function (t) {
                this._resolution = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e, "defaultVertexSrc", {
              get: function () {
                return "attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n";
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e, "defaultFragmentSrc", {
              get: function () {
                return "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n";
              },
              enumerable: !1,
              configurable: !0,
            }),
            e
          );
        })(zi),
        Yi = new $t(),
        Wi = (function () {
          function t(t, e) {
            (this._texture = t),
              (this.mapCoord = new $t()),
              (this.uClampFrame = new Float32Array(4)),
              (this.uClampOffset = new Float32Array(2)),
              (this._textureID = -1),
              (this._updateID = 0),
              (this.clampOffset = 0),
              (this.clampMargin = void 0 === e ? 0.5 : e),
              (this.isSimple = !1);
          }
          return (
            Object.defineProperty(t.prototype, "texture", {
              get: function () {
                return this._texture;
              },
              set: function (t) {
                (this._texture = t), (this._textureID = -1);
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.multiplyUvs = function (t, e) {
              void 0 === e && (e = t);
              for (var i = this.mapCoord, r = 0; r < t.length; r += 2) {
                var n = t[r],
                  o = t[r + 1];
                (e[r] = n * i.a + o * i.c + i.tx),
                  (e[r + 1] = n * i.b + o * i.d + i.ty);
              }
              return e;
            }),
            (t.prototype.update = function (t) {
              var e = this._texture;
              if (!e || !e.valid) return !1;
              if (!t && this._textureID === e._updateID) return !1;
              (this._textureID = e._updateID), this._updateID++;
              var i = e._uvs;
              this.mapCoord.set(
                i.x1 - i.x0,
                i.y1 - i.y0,
                i.x3 - i.x0,
                i.y3 - i.y0,
                i.x0,
                i.y0
              );
              var r = e.orig,
                n = e.trim;
              n &&
                (Yi.set(
                  r.width / n.width,
                  0,
                  0,
                  r.height / n.height,
                  -n.x / n.width,
                  -n.y / n.height
                ),
                this.mapCoord.append(Yi));
              var o = e.baseTexture,
                s = this.uClampFrame,
                a = this.clampMargin / o.resolution,
                h = this.clampOffset;
              return (
                (s[0] = (e._frame.x + a + h) / o.width),
                (s[1] = (e._frame.y + a + h) / o.height),
                (s[2] = (e._frame.x + e._frame.width - a + h) / o.width),
                (s[3] = (e._frame.y + e._frame.height - a + h) / o.height),
                (this.uClampOffset[0] = h / o.realWidth),
                (this.uClampOffset[1] = h / o.realHeight),
                (this.isSimple =
                  e._frame.width === o.width &&
                  e._frame.height === o.height &&
                  0 === e.rotate),
                !0
              );
            }),
            t
          );
        })(),
        qi = (function (t) {
          function e(e, i, r) {
            var n = this,
              o = null;
            return (
              "string" != typeof e &&
                void 0 === i &&
                void 0 === r &&
                ((o = e), (e = void 0), (i = void 0), (r = void 0)),
              ((n =
                t.call(
                  this,
                  e ||
                    "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",
                  i ||
                    "varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",
                  r
                ) || this).maskSprite = o),
              (n.maskMatrix = new $t()),
              n
            );
          }
          return (
            Ae(e, t),
            Object.defineProperty(e.prototype, "maskSprite", {
              get: function () {
                return this._maskSprite;
              },
              set: function (t) {
                (this._maskSprite = t),
                  this._maskSprite && (this._maskSprite.renderable = !1);
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.apply = function (t, e, i, r) {
              var n = this._maskSprite,
                o = n._texture;
              o.valid &&
                (o.uvMatrix || (o.uvMatrix = new Wi(o, 0)),
                o.uvMatrix.update(),
                (this.uniforms.npmAlpha = o.baseTexture.alphaMode ? 0 : 1),
                (this.uniforms.mask = o),
                (this.uniforms.otherMatrix = t
                  .calculateSpriteMatrix(this.maskMatrix, n)
                  .prepend(o.uvMatrix.mapCoord)),
                (this.uniforms.alpha = n.worldAlpha),
                (this.uniforms.maskClamp = o.uvMatrix.uClampFrame),
                t.applyFilter(this, e, i, r));
            }),
            e
          );
        })(Hi),
        $i = (function () {
          function t(t) {
            (this.renderer = t),
              (this.enableScissor = !0),
              (this.alphaMaskPool = []),
              (this.maskDataPool = []),
              (this.maskStack = []),
              (this.alphaMaskIndex = 0);
          }
          return (
            (t.prototype.setMaskStack = function (t) {
              (this.maskStack = t),
                this.renderer.scissor.setMaskStack(t),
                this.renderer.stencil.setMaskStack(t);
            }),
            (t.prototype.push = function (t, e) {
              var i = e;
              if (!i.isMaskData) {
                var r = this.maskDataPool.pop() || new bi();
                (r.pooled = !0), (r.maskObject = e), (i = r);
              }
              var n =
                0 !== this.maskStack.length
                  ? this.maskStack[this.maskStack.length - 1]
                  : null;
              if (
                (i.copyCountersOrReset(n),
                (i._colorMask = n ? n._colorMask : 15),
                i.autoDetect && this.detect(i),
                (i._target = t),
                i.type !== R.SPRITE && this.maskStack.push(i),
                i.enabled)
              )
                switch (i.type) {
                  case R.SCISSOR:
                    this.renderer.scissor.push(i);
                    break;
                  case R.STENCIL:
                    this.renderer.stencil.push(i);
                    break;
                  case R.SPRITE:
                    i.copyCountersOrReset(null), this.pushSpriteMask(i);
                    break;
                  case R.COLOR:
                    this.pushColorMask(i);
                }
              i.type === R.SPRITE && this.maskStack.push(i);
            }),
            (t.prototype.pop = function (t) {
              var e = this.maskStack.pop();
              if (e && e._target === t) {
                if (e.enabled)
                  switch (e.type) {
                    case R.SCISSOR:
                      this.renderer.scissor.pop(e);
                      break;
                    case R.STENCIL:
                      this.renderer.stencil.pop(e.maskObject);
                      break;
                    case R.SPRITE:
                      this.popSpriteMask(e);
                      break;
                    case R.COLOR:
                      this.popColorMask(e);
                  }
                if (
                  (e.reset(),
                  e.pooled && this.maskDataPool.push(e),
                  0 !== this.maskStack.length)
                ) {
                  var i = this.maskStack[this.maskStack.length - 1];
                  i.type === R.SPRITE &&
                    i._filters &&
                    (i._filters[0].maskSprite = i.maskObject);
                }
              }
            }),
            (t.prototype.detect = function (t) {
              var e = t.maskObject;
              e
                ? e.isSprite
                  ? (t.type = R.SPRITE)
                  : this.enableScissor && this.renderer.scissor.testScissor(t)
                  ? (t.type = R.SCISSOR)
                  : (t.type = R.STENCIL)
                : (t.type = R.COLOR);
            }),
            (t.prototype.pushSpriteMask = function (t) {
              var e,
                i,
                r = t.maskObject,
                n = t._target,
                o = t._filters;
              o ||
                (o = this.alphaMaskPool[this.alphaMaskIndex]) ||
                (o = this.alphaMaskPool[this.alphaMaskIndex] = [new qi()]);
              var s,
                a,
                h = this.renderer,
                u = h.renderTexture;
              if (u.current) {
                var l = u.current;
                (s = t.resolution || l.resolution),
                  (a =
                    null !== (e = t.multisample) && void 0 !== e
                      ? e
                      : l.multisample);
              } else
                (s = t.resolution || h.resolution),
                  (a =
                    null !== (i = t.multisample) && void 0 !== i
                      ? i
                      : h.multisample);
              (o[0].resolution = s),
                (o[0].multisample = a),
                (o[0].maskSprite = r);
              var c = n.filterArea;
              (n.filterArea = r.getBounds(!0)),
                h.filter.push(n, o),
                (n.filterArea = c),
                t._filters || this.alphaMaskIndex++;
            }),
            (t.prototype.popSpriteMask = function (t) {
              this.renderer.filter.pop(),
                t._filters
                  ? (t._filters[0].maskSprite = null)
                  : (this.alphaMaskIndex--,
                    (this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite =
                      null));
            }),
            (t.prototype.pushColorMask = function (t) {
              var e = t._colorMask,
                i = (t._colorMask = e & t.colorMask);
              i !== e &&
                this.renderer.gl.colorMask(
                  !!(1 & i),
                  !!(2 & i),
                  !!(4 & i),
                  !!(8 & i)
                );
            }),
            (t.prototype.popColorMask = function (t) {
              var e = t._colorMask,
                i =
                  this.maskStack.length > 0
                    ? this.maskStack[this.maskStack.length - 1]._colorMask
                    : 15;
              i !== e &&
                this.renderer.gl.colorMask(
                  !!(1 & i),
                  !!(2 & i),
                  !!(4 & i),
                  !!(8 & i)
                );
            }),
            (t.prototype.destroy = function () {
              this.renderer = null;
            }),
            t
          );
        })(),
        Ki = (function () {
          function t(t) {
            (this.renderer = t), (this.maskStack = []), (this.glConst = 0);
          }
          return (
            (t.prototype.getStackLength = function () {
              return this.maskStack.length;
            }),
            (t.prototype.setMaskStack = function (t) {
              var e = this.renderer.gl,
                i = this.getStackLength();
              this.maskStack = t;
              var r = this.getStackLength();
              r !== i &&
                (0 === r
                  ? e.disable(this.glConst)
                  : (e.enable(this.glConst), this._useCurrent()));
            }),
            (t.prototype._useCurrent = function () {}),
            (t.prototype.destroy = function () {
              (this.renderer = null), (this.maskStack = null);
            }),
            t
          );
        })(),
        Ji = new $t(),
        Zi = [],
        Qi = (function (t) {
          function e(e) {
            var i = t.call(this, e) || this;
            return (
              (i.glConst = nt.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST),
              i
            );
          }
          return (
            Ae(e, t),
            (e.prototype.getStackLength = function () {
              var t = this.maskStack[this.maskStack.length - 1];
              return t ? t._scissorCounter : 0;
            }),
            (e.prototype.calcScissorRect = function (t) {
              var e;
              if (!t._scissorRectLocal) {
                var i = t._scissorRect,
                  r = t.maskObject,
                  n = this.renderer,
                  o = n.renderTexture,
                  s = r.getBounds(
                    !0,
                    null !== (e = Zi.pop()) && void 0 !== e ? e : new zt()
                  );
                this.roundFrameToPixels(
                  s,
                  o.current ? o.current.resolution : n.resolution,
                  o.sourceFrame,
                  o.destinationFrame,
                  n.projection.transform
                ),
                  i && s.fit(i),
                  (t._scissorRectLocal = s);
              }
            }),
            (e.isMatrixRotated = function (t) {
              if (!t) return !1;
              var e = t.a,
                i = t.b,
                r = t.c,
                n = t.d;
              return (
                (Math.abs(i) > 1e-4 || Math.abs(r) > 1e-4) &&
                (Math.abs(e) > 1e-4 || Math.abs(n) > 1e-4)
              );
            }),
            (e.prototype.testScissor = function (t) {
              var i = t.maskObject;
              if (!i.isFastRect || !i.isFastRect()) return !1;
              if (e.isMatrixRotated(i.worldTransform)) return !1;
              if (e.isMatrixRotated(this.renderer.projection.transform))
                return !1;
              this.calcScissorRect(t);
              var r = t._scissorRectLocal;
              return r.width > 0 && r.height > 0;
            }),
            (e.prototype.roundFrameToPixels = function (t, i, r, n, o) {
              e.isMatrixRotated(o) ||
                ((o = o ? Ji.copyFrom(o) : Ji.identity())
                  .translate(-r.x, -r.y)
                  .scale(n.width / r.width, n.height / r.height)
                  .translate(n.x, n.y),
                this.renderer.filter.transformAABB(o, t),
                t.fit(n),
                (t.x = Math.round(t.x * i)),
                (t.y = Math.round(t.y * i)),
                (t.width = Math.round(t.width * i)),
                (t.height = Math.round(t.height * i)));
            }),
            (e.prototype.push = function (t) {
              t._scissorRectLocal || this.calcScissorRect(t);
              var e = this.renderer.gl;
              t._scissorRect || e.enable(e.SCISSOR_TEST),
                t._scissorCounter++,
                (t._scissorRect = t._scissorRectLocal),
                this._useCurrent();
            }),
            (e.prototype.pop = function (t) {
              var e = this.renderer.gl;
              t && Zi.push(t._scissorRectLocal),
                this.getStackLength() > 0
                  ? this._useCurrent()
                  : e.disable(e.SCISSOR_TEST);
            }),
            (e.prototype._useCurrent = function () {
              var t,
                e = this.maskStack[this.maskStack.length - 1]._scissorRect;
              (t = this.renderer.renderTexture.current
                ? e.y
                : this.renderer.height - e.height - e.y),
                this.renderer.gl.scissor(e.x, t, e.width, e.height);
            }),
            e
          );
        })(Ki),
        tr = (function (t) {
          function e(e) {
            var i = t.call(this, e) || this;
            return (
              (i.glConst = nt.ADAPTER.getWebGLRenderingContext().STENCIL_TEST),
              i
            );
          }
          return (
            Ae(e, t),
            (e.prototype.getStackLength = function () {
              var t = this.maskStack[this.maskStack.length - 1];
              return t ? t._stencilCounter : 0;
            }),
            (e.prototype.push = function (t) {
              var e = t.maskObject,
                i = this.renderer.gl,
                r = t._stencilCounter;
              0 === r &&
                (this.renderer.framebuffer.forceStencil(),
                i.clearStencil(0),
                i.clear(i.STENCIL_BUFFER_BIT),
                i.enable(i.STENCIL_TEST)),
                t._stencilCounter++;
              var n = t._colorMask;
              0 !== n && ((t._colorMask = 0), i.colorMask(!1, !1, !1, !1)),
                i.stencilFunc(i.EQUAL, r, 4294967295),
                i.stencilOp(i.KEEP, i.KEEP, i.INCR),
                (e.renderable = !0),
                e.render(this.renderer),
                this.renderer.batch.flush(),
                (e.renderable = !1),
                0 !== n &&
                  ((t._colorMask = n),
                  i.colorMask(!!(1 & n), !!(2 & n), !!(4 & n), !!(8 & n))),
                this._useCurrent();
            }),
            (e.prototype.pop = function (t) {
              var e = this.renderer.gl;
              if (0 === this.getStackLength()) e.disable(e.STENCIL_TEST);
              else {
                var i =
                    0 !== this.maskStack.length
                      ? this.maskStack[this.maskStack.length - 1]
                      : null,
                  r = i ? i._colorMask : 15;
                0 !== r && ((i._colorMask = 0), e.colorMask(!1, !1, !1, !1)),
                  e.stencilOp(e.KEEP, e.KEEP, e.DECR),
                  (t.renderable = !0),
                  t.render(this.renderer),
                  this.renderer.batch.flush(),
                  (t.renderable = !1),
                  0 !== r &&
                    ((i._colorMask = r),
                    e.colorMask(!!(1 & r), !!(2 & r), !!(4 & r), !!(8 & r))),
                  this._useCurrent();
              }
            }),
            (e.prototype._useCurrent = function () {
              var t = this.renderer.gl;
              t.stencilFunc(t.EQUAL, this.getStackLength(), 4294967295),
                t.stencilOp(t.KEEP, t.KEEP, t.KEEP);
            }),
            e
          );
        })(Ki),
        er = (function () {
          function t(t) {
            (this.renderer = t),
              (this.destinationFrame = null),
              (this.sourceFrame = null),
              (this.defaultFrame = null),
              (this.projectionMatrix = new $t()),
              (this.transform = null);
          }
          return (
            (t.prototype.update = function (t, e, i, r) {
              (this.destinationFrame =
                t || this.destinationFrame || this.defaultFrame),
                (this.sourceFrame = e || this.sourceFrame || t),
                this.calculateProjection(
                  this.destinationFrame,
                  this.sourceFrame,
                  i,
                  r
                ),
                this.transform && this.projectionMatrix.append(this.transform);
              var n = this.renderer;
              (n.globalUniforms.uniforms.projectionMatrix =
                this.projectionMatrix),
                n.globalUniforms.update(),
                n.shader.shader &&
                  n.shader.syncUniformGroup(n.shader.shader.uniforms.globals);
            }),
            (t.prototype.calculateProjection = function (t, e, i, r) {
              var n = this.projectionMatrix,
                o = r ? -1 : 1;
              n.identity(),
                (n.a = (1 / e.width) * 2),
                (n.d = o * ((1 / e.height) * 2)),
                (n.tx = -1 - e.x * n.a),
                (n.ty = -o - e.y * n.d);
            }),
            (t.prototype.setTransform = function (t) {}),
            (t.prototype.destroy = function () {
              this.renderer = null;
            }),
            t
          );
        })(),
        ir = new zt(),
        rr = new zt(),
        nr = (function () {
          function t(t) {
            (this.renderer = t),
              (this.clearColor = t._backgroundColorRgba),
              (this.defaultMaskStack = []),
              (this.current = null),
              (this.sourceFrame = new zt()),
              (this.destinationFrame = new zt()),
              (this.viewportFrame = new zt());
          }
          return (
            (t.prototype.bind = function (t, e, i) {
              void 0 === t && (t = null);
              var r,
                n,
                o,
                s = this.renderer;
              (this.current = t),
                t
                  ? ((o = (r = t.baseTexture).resolution),
                    e ||
                      ((ir.width = t.frame.width),
                      (ir.height = t.frame.height),
                      (e = ir)),
                    i ||
                      ((rr.x = t.frame.x),
                      (rr.y = t.frame.y),
                      (rr.width = e.width),
                      (rr.height = e.height),
                      (i = rr)),
                    (n = r.framebuffer))
                  : ((o = s.resolution),
                    e ||
                      ((ir.width = s.screen.width),
                      (ir.height = s.screen.height),
                      (e = ir)),
                    i || (((i = ir).width = e.width), (i.height = e.height)));
              var a = this.viewportFrame;
              (a.x = i.x * o),
                (a.y = i.y * o),
                (a.width = i.width * o),
                (a.height = i.height * o),
                t || (a.y = s.view.height - (a.y + a.height)),
                a.ceil(),
                this.renderer.framebuffer.bind(n, a),
                this.renderer.projection.update(i, e, o, !n),
                t
                  ? this.renderer.mask.setMaskStack(r.maskStack)
                  : this.renderer.mask.setMaskStack(this.defaultMaskStack),
                this.sourceFrame.copyFrom(e),
                this.destinationFrame.copyFrom(i);
            }),
            (t.prototype.clear = function (t, e) {
              t = this.current
                ? t || this.current.baseTexture.clearColor
                : t || this.clearColor;
              var i = this.destinationFrame,
                r = this.current
                  ? this.current.baseTexture
                  : this.renderer.screen,
                n = i.width !== r.width || i.height !== r.height;
              if (n) {
                var o = this.viewportFrame,
                  s = o.x,
                  a = o.y,
                  h = o.width,
                  u = o.height;
                (s = Math.round(s)),
                  (a = Math.round(a)),
                  (h = Math.round(h)),
                  (u = Math.round(u)),
                  this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),
                  this.renderer.gl.scissor(s, a, h, u);
              }
              this.renderer.framebuffer.clear(t[0], t[1], t[2], t[3], e),
                n && this.renderer.scissor.pop();
            }),
            (t.prototype.resize = function () {
              this.bind(null);
            }),
            (t.prototype.reset = function () {
              this.bind(null);
            }),
            (t.prototype.destroy = function () {
              this.renderer = null;
            }),
            t
          );
        })();
      function or(t, e, i, r, n) {
        i.buffer.update(n);
      }
      var sr = {
          float: "\n        data[offset] = v;\n    ",
          vec2: "\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",
          vec3: "\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",
          vec4: "\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",
          mat2: "\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",
          mat3: "\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",
          mat4: "\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    ",
        },
        ar = {
          float: 4,
          vec2: 8,
          vec3: 12,
          vec4: 16,
          int: 4,
          ivec2: 8,
          ivec3: 12,
          ivec4: 16,
          uint: 4,
          uvec2: 8,
          uvec3: 12,
          uvec4: 16,
          bool: 4,
          bvec2: 8,
          bvec3: 12,
          bvec4: 16,
          mat2: 32,
          mat3: 48,
          mat4: 64,
        };
      var hr = (function () {
        function t(t, e) {
          (this.program = t),
            (this.uniformData = e),
            (this.uniformGroups = {}),
            (this.uniformDirtyGroups = {}),
            (this.uniformBufferBindings = {});
        }
        return (
          (t.prototype.destroy = function () {
            (this.uniformData = null),
              (this.uniformGroups = null),
              (this.uniformDirtyGroups = null),
              (this.uniformBufferBindings = null),
              (this.program = null);
          }),
          t
        );
      })();
      var ur = 0,
        lr = { textureCount: 0, uboCount: 0 },
        cr = (function () {
          function t(t) {
            (this.destroyed = !1),
              (this.renderer = t),
              this.systemCheck(),
              (this.gl = null),
              (this.shader = null),
              (this.program = null),
              (this.cache = {}),
              (this._uboCache = {}),
              (this.id = ur++);
          }
          return (
            (t.prototype.systemCheck = function () {
              if (
                !(function () {
                  if ("boolean" == typeof ki) return ki;
                  try {
                    var t = new Function(
                      "param1",
                      "param2",
                      "param3",
                      "return param1[param2] === param3;"
                    );
                    ki = !0 === t({ a: "b" }, "a", "b");
                  } catch (t) {
                    ki = !1;
                  }
                  return ki;
                })()
              )
                throw new Error(
                  "Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support."
                );
            }),
            (t.prototype.contextChange = function (t) {
              (this.gl = t), this.reset();
            }),
            (t.prototype.bind = function (t, e) {
              t.disposeRunner.add(this),
                (t.uniforms.globals = this.renderer.globalUniforms);
              var i = t.program,
                r =
                  i.glPrograms[this.renderer.CONTEXT_UID] ||
                  this.generateProgram(t);
              return (
                (this.shader = t),
                this.program !== i &&
                  ((this.program = i), this.gl.useProgram(r.program)),
                e ||
                  ((lr.textureCount = 0),
                  (lr.uboCount = 0),
                  this.syncUniformGroup(t.uniformGroup, lr)),
                r
              );
            }),
            (t.prototype.setUniforms = function (t) {
              var e = this.shader.program,
                i = e.glPrograms[this.renderer.CONTEXT_UID];
              e.syncUniforms(i.uniformData, t, this.renderer);
            }),
            (t.prototype.syncUniformGroup = function (t, e) {
              var i = this.getGlProgram();
              (t.static && t.dirtyId === i.uniformDirtyGroups[t.id]) ||
                ((i.uniformDirtyGroups[t.id] = t.dirtyId),
                this.syncUniforms(t, i, e));
            }),
            (t.prototype.syncUniforms = function (t, e, i) {
              (
                t.syncUniforms[this.shader.program.id] ||
                this.createSyncGroups(t)
              )(e.uniformData, t.uniforms, this.renderer, i);
            }),
            (t.prototype.createSyncGroups = function (t) {
              var e = this.getSignature(
                t,
                this.shader.program.uniformData,
                "u"
              );
              return (
                this.cache[e] ||
                  (this.cache[e] = (function (t, e) {
                    var i,
                      r = [
                        "\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    ",
                      ];
                    for (var n in t.uniforms) {
                      var o = e[n];
                      if (o) {
                        for (
                          var s = t.uniforms[n], a = !1, h = 0;
                          h < Fi.length;
                          h++
                        )
                          if (Fi[h].test(o, s)) {
                            r.push(Fi[h].code(n, s)), (a = !0);
                            break;
                          }
                        if (!a) {
                          var u = (1 !== o.size || o.isArray ? Ni : Di)[
                            o.type
                          ].replace("location", 'ud["' + n + '"].location');
                          r.push(
                            '\n            cu = ud["' +
                              n +
                              '"];\n            cv = cu.value;\n            v = uv["' +
                              n +
                              '"];\n            ' +
                              u +
                              ";"
                          );
                        }
                      } else
                        (null === (i = t.uniforms[n]) || void 0 === i
                          ? void 0
                          : i.group) &&
                          (t.uniforms[n].ubo
                            ? r.push(
                                "\n                        renderer.shader.syncUniformBufferGroup(uv." +
                                  n +
                                  ", '" +
                                  n +
                                  "');\n                    "
                              )
                            : r.push(
                                "\n                        renderer.shader.syncUniformGroup(uv." +
                                  n +
                                  ", syncData);\n                    "
                              ));
                    }
                    return new Function(
                      "ud",
                      "uv",
                      "renderer",
                      "syncData",
                      r.join("\n")
                    );
                  })(t, this.shader.program.uniformData)),
                (t.syncUniforms[this.shader.program.id] = this.cache[e]),
                t.syncUniforms[this.shader.program.id]
              );
            }),
            (t.prototype.syncUniformBufferGroup = function (t, e) {
              var i = this.getGlProgram();
              if (!t.static || 0 !== t.dirtyId || !i.uniformGroups[t.id]) {
                t.dirtyId = 0;
                var r =
                  i.uniformGroups[t.id] || this.createSyncBufferGroup(t, i, e);
                t.buffer.update(),
                  r(i.uniformData, t.uniforms, this.renderer, lr, t.buffer);
              }
              this.renderer.buffer.bindBufferBase(
                t.buffer,
                i.uniformBufferBindings[e]
              );
            }),
            (t.prototype.createSyncBufferGroup = function (t, e, i) {
              var r = this.renderer.gl;
              this.renderer.buffer.bind(t.buffer);
              var n = this.gl.getUniformBlockIndex(e.program, i);
              (e.uniformBufferBindings[i] = this.shader.uniformBindCount),
                r.uniformBlockBinding(
                  e.program,
                  n,
                  this.shader.uniformBindCount
                ),
                this.shader.uniformBindCount++;
              var o = this.getSignature(
                  t,
                  this.shader.program.uniformData,
                  "ubo"
                ),
                s = this._uboCache[o];
              if (
                (s ||
                  (s = this._uboCache[o] =
                    (function (t, e) {
                      if (!t.autoManage) return { size: 0, syncFunc: or };
                      for (
                        var i = (function (t, e) {
                            var i = [];
                            for (var r in t) e[r] && i.push(e[r]);
                            return (
                              i.sort(function (t, e) {
                                return t.index - e.index;
                              }),
                              i
                            );
                          })(t.uniforms, e),
                          r = (function (t) {
                            for (
                              var e = t.map(function (t) {
                                  return {
                                    data: t,
                                    offset: 0,
                                    dataLen: 0,
                                    dirty: 0,
                                  };
                                }),
                                i = 0,
                                r = 0,
                                n = 0,
                                o = 0;
                              o < e.length;
                              o++
                            ) {
                              var s = e[o];
                              if (
                                ((i = ar[s.data.type]),
                                s.data.size > 1 &&
                                  (i = Math.max(i, 16) * s.data.size),
                                (s.dataLen = i),
                                r % i != 0 && r < 16)
                              ) {
                                var a = (r % i) % 16;
                                (r += a), (n += a);
                              }
                              r + i > 16
                                ? ((n = 16 * Math.ceil(n / 16)),
                                  (s.offset = n),
                                  (n += i),
                                  (r = i))
                                : ((s.offset = n), (r += i), (n += i));
                            }
                            return {
                              uboElements: e,
                              size: (n = 16 * Math.ceil(n / 16)),
                            };
                          })(i),
                          n = r.uboElements,
                          o = r.size,
                          s = [
                            "\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    ",
                          ],
                          a = 0;
                        a < n.length;
                        a++
                      ) {
                        for (
                          var h = n[a],
                            u = t.uniforms[h.data.name],
                            l = h.data.name,
                            c = !1,
                            d = 0;
                          d < Fi.length;
                          d++
                        ) {
                          var p = Fi[d];
                          if (p.codeUbo && p.test(h.data, u)) {
                            s.push(
                              "offset = " + h.offset / 4 + ";",
                              Fi[d].codeUbo(h.data.name, u)
                            ),
                              (c = !0);
                            break;
                          }
                        }
                        if (!c)
                          if (h.data.size > 1) {
                            var _ = Bi(h.data.type),
                              f = Math.max(ar[h.data.type] / 16, 1),
                              m = _ / f,
                              y = (4 - (m % 4)) % 4;
                            s.push(
                              "\n                cv = ud." +
                                l +
                                ".value;\n                v = uv." +
                                l +
                                ";\n                offset = " +
                                h.offset / 4 +
                                ";\n\n                t = 0;\n\n                for(var i=0; i < " +
                                h.data.size * f +
                                "; i++)\n                {\n                    for(var j = 0; j < " +
                                m +
                                "; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += " +
                                y +
                                ";\n                }\n\n                "
                            );
                          } else {
                            var g = sr[h.data.type];
                            s.push(
                              "\n                cv = ud." +
                                l +
                                ".value;\n                v = uv." +
                                l +
                                ";\n                offset = " +
                                h.offset / 4 +
                                ";\n                " +
                                g +
                                ";\n                "
                            );
                          }
                      }
                      return (
                        s.push(
                          "\n       renderer.buffer.update(buffer);\n    "
                        ),
                        {
                          size: o,
                          syncFunc: new Function(
                            "ud",
                            "uv",
                            "renderer",
                            "syncData",
                            "buffer",
                            s.join("\n")
                          ),
                        }
                      );
                    })(t, this.shader.program.uniformData)),
                t.autoManage)
              ) {
                var a = new Float32Array(s.size / 4);
                t.buffer.update(a);
              }
              return (
                (e.uniformGroups[t.id] = s.syncFunc), e.uniformGroups[t.id]
              );
            }),
            (t.prototype.getSignature = function (t, e, i) {
              var r = t.uniforms,
                n = [i + "-"];
              for (var o in r) n.push(o), e[o] && n.push(e[o].type);
              return n.join("-");
            }),
            (t.prototype.getGlProgram = function () {
              return this.shader
                ? this.shader.program.glPrograms[this.renderer.CONTEXT_UID]
                : null;
            }),
            (t.prototype.generateProgram = function (t) {
              var e = this.gl,
                i = t.program,
                r = (function (t, e) {
                  var i = xi(t, t.VERTEX_SHADER, e.vertexSrc),
                    r = xi(t, t.FRAGMENT_SHADER, e.fragmentSrc),
                    n = t.createProgram();
                  if (
                    (t.attachShader(n, i),
                    t.attachShader(n, r),
                    t.linkProgram(n),
                    t.getProgramParameter(n, t.LINK_STATUS) ||
                      (function (t, e, i, r) {
                        t.getProgramParameter(e, t.LINK_STATUS) ||
                          (t.getShaderParameter(i, t.COMPILE_STATUS) ||
                            wi(t, i),
                          t.getShaderParameter(r, t.COMPILE_STATUS) || wi(t, r),
                          console.error(
                            "PixiJS Error: Could not initialize shader."
                          ),
                          "" !== t.getProgramInfoLog(e) &&
                            console.warn(
                              "PixiJS Warning: gl.getProgramInfoLog()",
                              t.getProgramInfoLog(e)
                            ));
                      })(t, n, i, r),
                    (e.attributeData = (function (t, e) {
                      for (
                        var i = {},
                          r = e.getProgramParameter(t, e.ACTIVE_ATTRIBUTES),
                          n = 0;
                        n < r;
                        n++
                      ) {
                        var o = e.getActiveAttrib(t, n);
                        if (0 !== o.name.indexOf("gl_")) {
                          var s = Ii(e, o.type),
                            a = {
                              type: s,
                              name: o.name,
                              size: Bi(s),
                              location: e.getAttribLocation(t, o.name),
                            };
                          i[o.name] = a;
                        }
                      }
                      return i;
                    })(n, t)),
                    (e.uniformData = (function (t, e) {
                      for (
                        var i = {},
                          r = e.getProgramParameter(t, e.ACTIVE_UNIFORMS),
                          n = 0;
                        n < r;
                        n++
                      ) {
                        var o = e.getActiveUniform(t, n),
                          s = o.name.replace(/\[.*?\]$/, ""),
                          a = !!o.name.match(/\[.*?\]$/),
                          h = Ii(e, o.type);
                        i[s] = {
                          name: s,
                          index: n,
                          type: h,
                          size: o.size,
                          isArray: a,
                          value: Ai(h, o.size),
                        };
                      }
                      return i;
                    })(n, t)),
                    !/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(
                      e.vertexSrc
                    ))
                  ) {
                    var o = Object.keys(e.attributeData);
                    o.sort(function (t, e) {
                      return t > e ? 1 : -1;
                    });
                    for (var s = 0; s < o.length; s++)
                      (e.attributeData[o[s]].location = s),
                        t.bindAttribLocation(n, s, o[s]);
                    t.linkProgram(n);
                  }
                  t.deleteShader(i), t.deleteShader(r);
                  var a = {};
                  for (var s in e.uniformData) {
                    var h = e.uniformData[s];
                    a[s] = {
                      location: t.getUniformLocation(n, s),
                      value: Ai(h.type, h.size),
                    };
                  }
                  return new hr(n, a);
                })(e, i);
              return (i.glPrograms[this.renderer.CONTEXT_UID] = r), r;
            }),
            (t.prototype.reset = function () {
              (this.program = null), (this.shader = null);
            }),
            (t.prototype.disposeShader = function (t) {
              this.shader === t && (this.shader = null);
            }),
            (t.prototype.destroy = function () {
              (this.renderer = null), (this.destroyed = !0);
            }),
            t
          );
        })(),
        dr = (function () {
          function t() {
            (this.gl = null),
              (this.stateId = 0),
              (this.polygonOffset = 0),
              (this.blendMode = v.NONE),
              (this._blendEq = !1),
              (this.map = []),
              (this.map[0] = this.setBlend),
              (this.map[1] = this.setOffset),
              (this.map[2] = this.setCullFace),
              (this.map[3] = this.setDepthTest),
              (this.map[4] = this.setFrontFace),
              (this.map[5] = this.setDepthMask),
              (this.checks = []),
              (this.defaultState = new Xi()),
              (this.defaultState.blend = !0);
          }
          return (
            (t.prototype.contextChange = function (t) {
              (this.gl = t),
                (this.blendModes = (function (t, e) {
                  return (
                    void 0 === e && (e = []),
                    (e[v.NORMAL] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                    (e[v.ADD] = [t.ONE, t.ONE]),
                    (e[v.MULTIPLY] = [
                      t.DST_COLOR,
                      t.ONE_MINUS_SRC_ALPHA,
                      t.ONE,
                      t.ONE_MINUS_SRC_ALPHA,
                    ]),
                    (e[v.SCREEN] = [
                      t.ONE,
                      t.ONE_MINUS_SRC_COLOR,
                      t.ONE,
                      t.ONE_MINUS_SRC_ALPHA,
                    ]),
                    (e[v.OVERLAY] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                    (e[v.DARKEN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                    (e[v.LIGHTEN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                    (e[v.COLOR_DODGE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                    (e[v.COLOR_BURN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                    (e[v.HARD_LIGHT] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                    (e[v.SOFT_LIGHT] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                    (e[v.DIFFERENCE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                    (e[v.EXCLUSION] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                    (e[v.HUE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                    (e[v.SATURATION] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                    (e[v.COLOR] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                    (e[v.LUMINOSITY] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                    (e[v.NONE] = [0, 0]),
                    (e[v.NORMAL_NPM] = [
                      t.SRC_ALPHA,
                      t.ONE_MINUS_SRC_ALPHA,
                      t.ONE,
                      t.ONE_MINUS_SRC_ALPHA,
                    ]),
                    (e[v.ADD_NPM] = [t.SRC_ALPHA, t.ONE, t.ONE, t.ONE]),
                    (e[v.SCREEN_NPM] = [
                      t.SRC_ALPHA,
                      t.ONE_MINUS_SRC_COLOR,
                      t.ONE,
                      t.ONE_MINUS_SRC_ALPHA,
                    ]),
                    (e[v.SRC_IN] = [t.DST_ALPHA, t.ZERO]),
                    (e[v.SRC_OUT] = [t.ONE_MINUS_DST_ALPHA, t.ZERO]),
                    (e[v.SRC_ATOP] = [t.DST_ALPHA, t.ONE_MINUS_SRC_ALPHA]),
                    (e[v.DST_OVER] = [t.ONE_MINUS_DST_ALPHA, t.ONE]),
                    (e[v.DST_IN] = [t.ZERO, t.SRC_ALPHA]),
                    (e[v.DST_OUT] = [t.ZERO, t.ONE_MINUS_SRC_ALPHA]),
                    (e[v.DST_ATOP] = [t.ONE_MINUS_DST_ALPHA, t.SRC_ALPHA]),
                    (e[v.XOR] = [t.ONE_MINUS_DST_ALPHA, t.ONE_MINUS_SRC_ALPHA]),
                    (e[v.SUBTRACT] = [
                      t.ONE,
                      t.ONE,
                      t.ONE,
                      t.ONE,
                      t.FUNC_REVERSE_SUBTRACT,
                      t.FUNC_ADD,
                    ]),
                    e
                  );
                })(t)),
                this.set(this.defaultState),
                this.reset();
            }),
            (t.prototype.set = function (t) {
              if (((t = t || this.defaultState), this.stateId !== t.data)) {
                for (var e = this.stateId ^ t.data, i = 0; e; )
                  1 & e && this.map[i].call(this, !!(t.data & (1 << i))),
                    (e >>= 1),
                    i++;
                this.stateId = t.data;
              }
              for (i = 0; i < this.checks.length; i++) this.checks[i](this, t);
            }),
            (t.prototype.forceState = function (t) {
              t = t || this.defaultState;
              for (var e = 0; e < this.map.length; e++)
                this.map[e].call(this, !!(t.data & (1 << e)));
              for (e = 0; e < this.checks.length; e++) this.checks[e](this, t);
              this.stateId = t.data;
            }),
            (t.prototype.setBlend = function (e) {
              this.updateCheck(t.checkBlendMode, e),
                this.gl[e ? "enable" : "disable"](this.gl.BLEND);
            }),
            (t.prototype.setOffset = function (e) {
              this.updateCheck(t.checkPolygonOffset, e),
                this.gl[e ? "enable" : "disable"](this.gl.POLYGON_OFFSET_FILL);
            }),
            (t.prototype.setDepthTest = function (t) {
              this.gl[t ? "enable" : "disable"](this.gl.DEPTH_TEST);
            }),
            (t.prototype.setDepthMask = function (t) {
              this.gl.depthMask(t);
            }),
            (t.prototype.setCullFace = function (t) {
              this.gl[t ? "enable" : "disable"](this.gl.CULL_FACE);
            }),
            (t.prototype.setFrontFace = function (t) {
              this.gl.frontFace(this.gl[t ? "CW" : "CCW"]);
            }),
            (t.prototype.setBlendMode = function (t) {
              if (t !== this.blendMode) {
                this.blendMode = t;
                var e = this.blendModes[t],
                  i = this.gl;
                2 === e.length
                  ? i.blendFunc(e[0], e[1])
                  : i.blendFuncSeparate(e[0], e[1], e[2], e[3]),
                  6 === e.length
                    ? ((this._blendEq = !0),
                      i.blendEquationSeparate(e[4], e[5]))
                    : this._blendEq &&
                      ((this._blendEq = !1),
                      i.blendEquationSeparate(i.FUNC_ADD, i.FUNC_ADD));
              }
            }),
            (t.prototype.setPolygonOffset = function (t, e) {
              this.gl.polygonOffset(t, e);
            }),
            (t.prototype.reset = function () {
              this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, !1),
                this.forceState(this.defaultState),
                (this._blendEq = !0),
                (this.blendMode = -1),
                this.setBlendMode(0);
            }),
            (t.prototype.updateCheck = function (t, e) {
              var i = this.checks.indexOf(t);
              e && -1 === i
                ? this.checks.push(t)
                : e || -1 === i || this.checks.splice(i, 1);
            }),
            (t.checkBlendMode = function (t, e) {
              t.setBlendMode(e.blendMode);
            }),
            (t.checkPolygonOffset = function (t, e) {
              t.setPolygonOffset(1, e.polygonOffset);
            }),
            (t.prototype.destroy = function () {
              this.gl = null;
            }),
            t
          );
        })(),
        pr = (function () {
          function t(t) {
            (this.renderer = t),
              (this.count = 0),
              (this.checkCount = 0),
              (this.maxIdle = nt.GC_MAX_IDLE),
              (this.checkCountMax = nt.GC_MAX_CHECK_COUNT),
              (this.mode = nt.GC_MODE);
          }
          return (
            (t.prototype.postrender = function () {
              this.renderer.renderingToScreen &&
                (this.count++,
                this.mode !== B.MANUAL &&
                  (this.checkCount++,
                  this.checkCount > this.checkCountMax &&
                    ((this.checkCount = 0), this.run())));
            }),
            (t.prototype.run = function () {
              for (
                var t = this.renderer.texture,
                  e = t.managedTextures,
                  i = !1,
                  r = 0;
                r < e.length;
                r++
              ) {
                var n = e[r];
                !n.framebuffer &&
                  this.count - n.touched > this.maxIdle &&
                  (t.destroyTexture(n, !0), (e[r] = null), (i = !0));
              }
              if (i) {
                var o = 0;
                for (r = 0; r < e.length; r++) null !== e[r] && (e[o++] = e[r]);
                e.length = o;
              }
            }),
            (t.prototype.unload = function (t) {
              var e = this.renderer.texture,
                i = t._texture;
              i && !i.framebuffer && e.destroyTexture(i);
              for (var r = t.children.length - 1; r >= 0; r--)
                this.unload(t.children[r]);
            }),
            (t.prototype.destroy = function () {
              this.renderer = null;
            }),
            t
          );
        })(),
        _r = function (t) {
          (this.texture = t),
            (this.width = -1),
            (this.height = -1),
            (this.dirtyId = -1),
            (this.dirtyStyleId = -1),
            (this.mipmap = !1),
            (this.wrapMode = 33071),
            (this.type = T.UNSIGNED_BYTE),
            (this.internalFormat = x.RGBA),
            (this.samplerType = 0);
        },
        fr = (function () {
          function t(t) {
            (this.renderer = t),
              (this.boundTextures = []),
              (this.currentLocation = -1),
              (this.managedTextures = []),
              (this._unknownBoundTextures = !1),
              (this.unknownTexture = new Pe()),
              (this.hasIntegerTextures = !1);
          }
          return (
            (t.prototype.contextChange = function () {
              var t = (this.gl = this.renderer.gl);
              (this.CONTEXT_UID = this.renderer.CONTEXT_UID),
                (this.webGLVersion = this.renderer.context.webGLVersion),
                (this.internalFormats = (function (t) {
                  var e,
                    i,
                    r,
                    n,
                    o,
                    s,
                    a,
                    h,
                    u,
                    l,
                    c,
                    d,
                    p,
                    _,
                    f,
                    m,
                    y,
                    g,
                    v,
                    b,
                    w,
                    A,
                    S;
                  return (
                    "WebGL2RenderingContext" in globalThis &&
                    t instanceof globalThis.WebGL2RenderingContext
                      ? (((e = {})[T.UNSIGNED_BYTE] =
                          (((i = {})[x.RGBA] = t.RGBA8),
                          (i[x.RGB] = t.RGB8),
                          (i[x.RG] = t.RG8),
                          (i[x.RED] = t.R8),
                          (i[x.RGBA_INTEGER] = t.RGBA8UI),
                          (i[x.RGB_INTEGER] = t.RGB8UI),
                          (i[x.RG_INTEGER] = t.RG8UI),
                          (i[x.RED_INTEGER] = t.R8UI),
                          (i[x.ALPHA] = t.ALPHA),
                          (i[x.LUMINANCE] = t.LUMINANCE),
                          (i[x.LUMINANCE_ALPHA] = t.LUMINANCE_ALPHA),
                          i)),
                        (e[T.BYTE] =
                          (((r = {})[x.RGBA] = t.RGBA8_SNORM),
                          (r[x.RGB] = t.RGB8_SNORM),
                          (r[x.RG] = t.RG8_SNORM),
                          (r[x.RED] = t.R8_SNORM),
                          (r[x.RGBA_INTEGER] = t.RGBA8I),
                          (r[x.RGB_INTEGER] = t.RGB8I),
                          (r[x.RG_INTEGER] = t.RG8I),
                          (r[x.RED_INTEGER] = t.R8I),
                          r)),
                        (e[T.UNSIGNED_SHORT] =
                          (((n = {})[x.RGBA_INTEGER] = t.RGBA16UI),
                          (n[x.RGB_INTEGER] = t.RGB16UI),
                          (n[x.RG_INTEGER] = t.RG16UI),
                          (n[x.RED_INTEGER] = t.R16UI),
                          (n[x.DEPTH_COMPONENT] = t.DEPTH_COMPONENT16),
                          n)),
                        (e[T.SHORT] =
                          (((o = {})[x.RGBA_INTEGER] = t.RGBA16I),
                          (o[x.RGB_INTEGER] = t.RGB16I),
                          (o[x.RG_INTEGER] = t.RG16I),
                          (o[x.RED_INTEGER] = t.R16I),
                          o)),
                        (e[T.UNSIGNED_INT] =
                          (((s = {})[x.RGBA_INTEGER] = t.RGBA32UI),
                          (s[x.RGB_INTEGER] = t.RGB32UI),
                          (s[x.RG_INTEGER] = t.RG32UI),
                          (s[x.RED_INTEGER] = t.R32UI),
                          (s[x.DEPTH_COMPONENT] = t.DEPTH_COMPONENT24),
                          s)),
                        (e[T.INT] =
                          (((a = {})[x.RGBA_INTEGER] = t.RGBA32I),
                          (a[x.RGB_INTEGER] = t.RGB32I),
                          (a[x.RG_INTEGER] = t.RG32I),
                          (a[x.RED_INTEGER] = t.R32I),
                          a)),
                        (e[T.FLOAT] =
                          (((h = {})[x.RGBA] = t.RGBA32F),
                          (h[x.RGB] = t.RGB32F),
                          (h[x.RG] = t.RG32F),
                          (h[x.RED] = t.R32F),
                          (h[x.DEPTH_COMPONENT] = t.DEPTH_COMPONENT32F),
                          h)),
                        (e[T.HALF_FLOAT] =
                          (((u = {})[x.RGBA] = t.RGBA16F),
                          (u[x.RGB] = t.RGB16F),
                          (u[x.RG] = t.RG16F),
                          (u[x.RED] = t.R16F),
                          u)),
                        (e[T.UNSIGNED_SHORT_5_6_5] =
                          (((l = {})[x.RGB] = t.RGB565), l)),
                        (e[T.UNSIGNED_SHORT_4_4_4_4] =
                          (((c = {})[x.RGBA] = t.RGBA4), c)),
                        (e[T.UNSIGNED_SHORT_5_5_5_1] =
                          (((d = {})[x.RGBA] = t.RGB5_A1), d)),
                        (e[T.UNSIGNED_INT_2_10_10_10_REV] =
                          (((p = {})[x.RGBA] = t.RGB10_A2),
                          (p[x.RGBA_INTEGER] = t.RGB10_A2UI),
                          p)),
                        (e[T.UNSIGNED_INT_10F_11F_11F_REV] =
                          (((_ = {})[x.RGB] = t.R11F_G11F_B10F), _)),
                        (e[T.UNSIGNED_INT_5_9_9_9_REV] =
                          (((f = {})[x.RGB] = t.RGB9_E5), f)),
                        (e[T.UNSIGNED_INT_24_8] =
                          (((m = {})[x.DEPTH_STENCIL] = t.DEPTH24_STENCIL8),
                          m)),
                        (e[T.FLOAT_32_UNSIGNED_INT_24_8_REV] =
                          (((y = {})[x.DEPTH_STENCIL] = t.DEPTH32F_STENCIL8),
                          y)),
                        (S = e))
                      : (((g = {})[T.UNSIGNED_BYTE] =
                          (((v = {})[x.RGBA] = t.RGBA),
                          (v[x.RGB] = t.RGB),
                          (v[x.ALPHA] = t.ALPHA),
                          (v[x.LUMINANCE] = t.LUMINANCE),
                          (v[x.LUMINANCE_ALPHA] = t.LUMINANCE_ALPHA),
                          v)),
                        (g[T.UNSIGNED_SHORT_5_6_5] =
                          (((b = {})[x.RGB] = t.RGB), b)),
                        (g[T.UNSIGNED_SHORT_4_4_4_4] =
                          (((w = {})[x.RGBA] = t.RGBA), w)),
                        (g[T.UNSIGNED_SHORT_5_5_5_1] =
                          (((A = {})[x.RGBA] = t.RGBA), A)),
                        (S = g)),
                    S
                  );
                })(t));
              var e = t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);
              this.boundTextures.length = e;
              for (var i = 0; i < e; i++) this.boundTextures[i] = null;
              this.emptyTextures = {};
              var r = new _r(t.createTexture());
              for (
                t.bindTexture(t.TEXTURE_2D, r.texture),
                  t.texImage2D(
                    t.TEXTURE_2D,
                    0,
                    t.RGBA,
                    1,
                    1,
                    0,
                    t.RGBA,
                    t.UNSIGNED_BYTE,
                    new Uint8Array(4)
                  ),
                  this.emptyTextures[t.TEXTURE_2D] = r,
                  this.emptyTextures[t.TEXTURE_CUBE_MAP] = new _r(
                    t.createTexture()
                  ),
                  t.bindTexture(
                    t.TEXTURE_CUBE_MAP,
                    this.emptyTextures[t.TEXTURE_CUBE_MAP].texture
                  ),
                  i = 0;
                i < 6;
                i++
              )
                t.texImage2D(
                  t.TEXTURE_CUBE_MAP_POSITIVE_X + i,
                  0,
                  t.RGBA,
                  1,
                  1,
                  0,
                  t.RGBA,
                  t.UNSIGNED_BYTE,
                  null
                );
              for (
                t.texParameteri(
                  t.TEXTURE_CUBE_MAP,
                  t.TEXTURE_MAG_FILTER,
                  t.LINEAR
                ),
                  t.texParameteri(
                    t.TEXTURE_CUBE_MAP,
                    t.TEXTURE_MIN_FILTER,
                    t.LINEAR
                  ),
                  i = 0;
                i < this.boundTextures.length;
                i++
              )
                this.bind(null, i);
            }),
            (t.prototype.bind = function (t, e) {
              void 0 === e && (e = 0);
              var i = this.gl;
              if (
                (t = null == t ? void 0 : t.castToBaseTexture()) &&
                t.valid &&
                !t.parentTextureArray
              ) {
                t.touched = this.renderer.textureGC.count;
                var r = t._glTextures[this.CONTEXT_UID] || this.initTexture(t);
                this.boundTextures[e] !== t &&
                  (this.currentLocation !== e &&
                    ((this.currentLocation = e),
                    i.activeTexture(i.TEXTURE0 + e)),
                  i.bindTexture(t.target, r.texture)),
                  r.dirtyId !== t.dirtyId
                    ? (this.currentLocation !== e &&
                        ((this.currentLocation = e),
                        i.activeTexture(i.TEXTURE0 + e)),
                      this.updateTexture(t))
                    : r.dirtyStyleId !== t.dirtyStyleId &&
                      this.updateTextureStyle(t),
                  (this.boundTextures[e] = t);
              } else
                this.currentLocation !== e &&
                  ((this.currentLocation = e), i.activeTexture(i.TEXTURE0 + e)),
                  i.bindTexture(
                    i.TEXTURE_2D,
                    this.emptyTextures[i.TEXTURE_2D].texture
                  ),
                  (this.boundTextures[e] = null);
            }),
            (t.prototype.reset = function () {
              (this._unknownBoundTextures = !0),
                (this.hasIntegerTextures = !1),
                (this.currentLocation = -1);
              for (var t = 0; t < this.boundTextures.length; t++)
                this.boundTextures[t] = this.unknownTexture;
            }),
            (t.prototype.unbind = function (t) {
              var e = this.gl,
                i = this.boundTextures;
              if (this._unknownBoundTextures) {
                this._unknownBoundTextures = !1;
                for (var r = 0; r < i.length; r++)
                  i[r] === this.unknownTexture && this.bind(null, r);
              }
              for (r = 0; r < i.length; r++)
                i[r] === t &&
                  (this.currentLocation !== r &&
                    (e.activeTexture(e.TEXTURE0 + r),
                    (this.currentLocation = r)),
                  e.bindTexture(t.target, this.emptyTextures[t.target].texture),
                  (i[r] = null));
            }),
            (t.prototype.ensureSamplerType = function (t) {
              var e = this,
                i = e.boundTextures,
                r = e.hasIntegerTextures,
                n = e.CONTEXT_UID;
              if (r)
                for (var o = t - 1; o >= 0; --o) {
                  var s = i[o];
                  s &&
                    s._glTextures[n].samplerType !== A.FLOAT &&
                    this.renderer.texture.unbind(s);
                }
            }),
            (t.prototype.initTexture = function (t) {
              var e = new _r(this.gl.createTexture());
              return (
                (e.dirtyId = -1),
                (t._glTextures[this.CONTEXT_UID] = e),
                this.managedTextures.push(t),
                t.on("dispose", this.destroyTexture, this),
                e
              );
            }),
            (t.prototype.initTextureType = function (t, e) {
              var i, r;
              (e.internalFormat =
                null !==
                  (r =
                    null === (i = this.internalFormats[t.type]) || void 0 === i
                      ? void 0
                      : i[t.format]) && void 0 !== r
                  ? r
                  : t.format),
                2 === this.webGLVersion && t.type === T.HALF_FLOAT
                  ? (e.type = this.gl.HALF_FLOAT)
                  : (e.type = t.type);
            }),
            (t.prototype.updateTexture = function (t) {
              var e = t._glTextures[this.CONTEXT_UID];
              if (e) {
                var i = this.renderer;
                if (
                  (this.initTextureType(t, e),
                  t.resource && t.resource.upload(i, t, e))
                )
                  e.samplerType !== A.FLOAT && (this.hasIntegerTextures = !0);
                else {
                  var r = t.realWidth,
                    n = t.realHeight,
                    o = i.gl;
                  (e.width !== r || e.height !== n || e.dirtyId < 0) &&
                    ((e.width = r),
                    (e.height = n),
                    o.texImage2D(
                      t.target,
                      0,
                      e.internalFormat,
                      r,
                      n,
                      0,
                      t.format,
                      e.type,
                      null
                    ));
                }
                t.dirtyStyleId !== e.dirtyStyleId && this.updateTextureStyle(t),
                  (e.dirtyId = t.dirtyId);
              }
            }),
            (t.prototype.destroyTexture = function (t, e) {
              var i = this.gl;
              if (
                (t = t.castToBaseTexture())._glTextures[this.CONTEXT_UID] &&
                (this.unbind(t),
                i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),
                t.off("dispose", this.destroyTexture, this),
                delete t._glTextures[this.CONTEXT_UID],
                !e)
              ) {
                var r = this.managedTextures.indexOf(t);
                -1 !== r && St(this.managedTextures, r, 1);
              }
            }),
            (t.prototype.updateTextureStyle = function (t) {
              var e = t._glTextures[this.CONTEXT_UID];
              e &&
                ((t.mipmap !== C.POW2 && 2 === this.webGLVersion) ||
                t.isPowerOfTwo
                  ? (e.mipmap = t.mipmap >= 1)
                  : (e.mipmap = !1),
                2 === this.webGLVersion || t.isPowerOfTwo
                  ? (e.wrapMode = t.wrapMode)
                  : (e.wrapMode = E.CLAMP),
                (t.resource && t.resource.style(this.renderer, t, e)) ||
                  this.setStyle(t, e),
                (e.dirtyStyleId = t.dirtyStyleId));
            }),
            (t.prototype.setStyle = function (t, e) {
              var i = this.gl;
              if (
                (e.mipmap &&
                  t.mipmap !== C.ON_MANUAL &&
                  i.generateMipmap(t.target),
                i.texParameteri(t.target, i.TEXTURE_WRAP_S, e.wrapMode),
                i.texParameteri(t.target, i.TEXTURE_WRAP_T, e.wrapMode),
                e.mipmap)
              ) {
                i.texParameteri(
                  t.target,
                  i.TEXTURE_MIN_FILTER,
                  t.scaleMode === S.LINEAR
                    ? i.LINEAR_MIPMAP_LINEAR
                    : i.NEAREST_MIPMAP_NEAREST
                );
                var r = this.renderer.context.extensions.anisotropicFiltering;
                if (r && t.anisotropicLevel > 0 && t.scaleMode === S.LINEAR) {
                  var n = Math.min(
                    t.anisotropicLevel,
                    i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)
                  );
                  i.texParameterf(t.target, r.TEXTURE_MAX_ANISOTROPY_EXT, n);
                }
              } else
                i.texParameteri(
                  t.target,
                  i.TEXTURE_MIN_FILTER,
                  t.scaleMode === S.LINEAR ? i.LINEAR : i.NEAREST
                );
              i.texParameteri(
                t.target,
                i.TEXTURE_MAG_FILTER,
                t.scaleMode === S.LINEAR ? i.LINEAR : i.NEAREST
              );
            }),
            (t.prototype.destroy = function () {
              this.renderer = null;
            }),
            t
          );
        })(),
        mr = {
          __proto__: null,
          FilterSystem: li,
          BatchSystem: di,
          ContextSystem: _i,
          FramebufferSystem: yi,
          GeometrySystem: vi,
          MaskSystem: $i,
          ScissorSystem: Qi,
          StencilSystem: tr,
          ProjectionSystem: er,
          RenderTextureSystem: nr,
          ShaderSystem: cr,
          StateSystem: dr,
          TextureGCSystem: pr,
          TextureSystem: fr,
        },
        yr = new $t(),
        gr = (function (t) {
          function e(e, i) {
            void 0 === e && (e = y.UNKNOWN);
            var r = t.call(this) || this;
            return (
              (i = Object.assign({}, nt.RENDER_OPTIONS, i)),
              (r.options = i),
              (r.type = e),
              (r.screen = new zt(0, 0, i.width, i.height)),
              (r.view = i.view || nt.ADAPTER.createCanvas()),
              (r.resolution = i.resolution || nt.RESOLUTION),
              (r.useContextAlpha = i.useContextAlpha),
              (r.autoDensity = !!i.autoDensity),
              (r.preserveDrawingBuffer = i.preserveDrawingBuffer),
              (r.clearBeforeRender = i.clearBeforeRender),
              (r._backgroundColor = 0),
              (r._backgroundColorRgba = [0, 0, 0, 1]),
              (r._backgroundColorString = "#000000"),
              (r.backgroundColor = i.backgroundColor || r._backgroundColor),
              (r.backgroundAlpha = i.backgroundAlpha),
              void 0 !== i.transparent &&
                (Bt(
                  "6.0.0",
                  "Option transparent is deprecated, please use backgroundAlpha instead."
                ),
                (r.useContextAlpha = i.transparent),
                (r.backgroundAlpha = i.transparent ? 0 : 1)),
              (r._lastObjectRendered = null),
              (r.plugins = {}),
              r
            );
          }
          return (
            Ae(e, t),
            (e.prototype.initPlugins = function (t) {
              for (var e in t) this.plugins[e] = new t[e](this);
            }),
            Object.defineProperty(e.prototype, "width", {
              get: function () {
                return this.view.width;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "height", {
              get: function () {
                return this.view.height;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.resize = function (t, e) {
              (this.view.width = Math.round(t * this.resolution)),
                (this.view.height = Math.round(e * this.resolution));
              var i = this.view.width / this.resolution,
                r = this.view.height / this.resolution;
              (this.screen.width = i),
                (this.screen.height = r),
                this.autoDensity &&
                  ((this.view.style.width = i + "px"),
                  (this.view.style.height = r + "px")),
                this.emit("resize", i, r);
            }),
            (e.prototype.generateTexture = function (t, e, i, r) {
              void 0 === e && (e = {}),
                "number" == typeof e &&
                  (Bt(
                    "6.1.0",
                    "generateTexture options (scaleMode, resolution, region) are now object options."
                  ),
                  (e = { scaleMode: e, resolution: i, region: r }));
              var n = e.region,
                o = (function (t, e) {
                  var i = {};
                  for (var r in t)
                    Object.prototype.hasOwnProperty.call(t, r) &&
                      e.indexOf(r) < 0 &&
                      (i[r] = t[r]);
                  if (
                    null != t &&
                    "function" == typeof Object.getOwnPropertySymbols
                  ) {
                    var n = 0;
                    for (r = Object.getOwnPropertySymbols(t); n < r.length; n++)
                      e.indexOf(r[n]) < 0 &&
                        Object.prototype.propertyIsEnumerable.call(t, r[n]) &&
                        (i[r[n]] = t[r[n]]);
                  }
                  return i;
                })(e, ["region"]);
              0 === (r = n || t.getLocalBounds(null, !0)).width &&
                (r.width = 1),
                0 === r.height && (r.height = 1);
              var s = We.create(Se({ width: r.width, height: r.height }, o));
              return (
                (yr.tx = -r.x),
                (yr.ty = -r.y),
                this.render(t, {
                  renderTexture: s,
                  clear: !1,
                  transform: yr,
                  skipUpdateTransform: !!t.parent,
                }),
                s
              );
            }),
            (e.prototype.destroy = function (t) {
              for (var e in this.plugins)
                this.plugins[e].destroy(), (this.plugins[e] = null);
              t &&
                this.view.parentNode &&
                this.view.parentNode.removeChild(this.view);
              var i = this;
              (i.plugins = null),
                (i.type = y.UNKNOWN),
                (i.view = null),
                (i.screen = null),
                (i._tempDisplayObjectParent = null),
                (i.options = null),
                (this._backgroundColorRgba = null),
                (this._backgroundColorString = null),
                (this._lastObjectRendered = null);
            }),
            Object.defineProperty(e.prototype, "backgroundColor", {
              get: function () {
                return this._backgroundColor;
              },
              set: function (t) {
                (this._backgroundColor = t),
                  (this._backgroundColorString = _t(t)),
                  pt(t, this._backgroundColorRgba);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "backgroundAlpha", {
              get: function () {
                return this._backgroundColorRgba[3];
              },
              set: function (t) {
                this._backgroundColorRgba[3] = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            e
          );
        })(ot),
        vr = function (t) {
          (this.buffer = t || null),
            (this.updateID = -1),
            (this.byteLength = -1),
            (this.refCount = 0);
        },
        br = (function () {
          function t(t) {
            (this.renderer = t),
              (this.managedBuffers = {}),
              (this.boundBufferBases = {});
          }
          return (
            (t.prototype.destroy = function () {
              this.renderer = null;
            }),
            (t.prototype.contextChange = function () {
              this.disposeAll(!0),
                (this.gl = this.renderer.gl),
                (this.CONTEXT_UID = this.renderer.CONTEXT_UID);
            }),
            (t.prototype.bind = function (t) {
              var e = this.gl,
                i = this.CONTEXT_UID,
                r = t._glBuffers[i] || this.createGLBuffer(t);
              e.bindBuffer(t.type, r.buffer);
            }),
            (t.prototype.bindBufferBase = function (t, e) {
              var i = this.gl,
                r = this.CONTEXT_UID;
              if (this.boundBufferBases[e] !== t) {
                var n = t._glBuffers[r] || this.createGLBuffer(t);
                (this.boundBufferBases[e] = t),
                  i.bindBufferBase(i.UNIFORM_BUFFER, e, n.buffer);
              }
            }),
            (t.prototype.bindBufferRange = function (t, e, i) {
              var r = this.gl,
                n = this.CONTEXT_UID;
              i = i || 0;
              var o = t._glBuffers[n] || this.createGLBuffer(t);
              r.bindBufferRange(
                r.UNIFORM_BUFFER,
                e || 0,
                o.buffer,
                256 * i,
                256
              );
            }),
            (t.prototype.update = function (t) {
              var e = this.gl,
                i = this.CONTEXT_UID,
                r = t._glBuffers[i];
              if (t._updateID !== r.updateID)
                if (
                  ((r.updateID = t._updateID),
                  e.bindBuffer(t.type, r.buffer),
                  r.byteLength >= t.data.byteLength)
                )
                  e.bufferSubData(t.type, 0, t.data);
                else {
                  var n = t.static ? e.STATIC_DRAW : e.DYNAMIC_DRAW;
                  (r.byteLength = t.data.byteLength),
                    e.bufferData(t.type, t.data, n);
                }
            }),
            (t.prototype.dispose = function (t, e) {
              if (this.managedBuffers[t.id]) {
                delete this.managedBuffers[t.id];
                var i = t._glBuffers[this.CONTEXT_UID],
                  r = this.gl;
                t.disposeRunner.remove(this),
                  i &&
                    (e || r.deleteBuffer(i.buffer),
                    delete t._glBuffers[this.CONTEXT_UID]);
              }
            }),
            (t.prototype.disposeAll = function (t) {
              for (
                var e = Object.keys(this.managedBuffers), i = 0;
                i < e.length;
                i++
              )
                this.dispose(this.managedBuffers[e[i]], t);
            }),
            (t.prototype.createGLBuffer = function (t) {
              var e = this.CONTEXT_UID,
                i = this.gl;
              return (
                (t._glBuffers[e] = new vr(i.createBuffer())),
                (this.managedBuffers[t.id] = t),
                t.disposeRunner.add(this),
                t._glBuffers[e]
              );
            }),
            t
          );
        })(),
        xr = (function (t) {
          function e(i) {
            var r = t.call(this, y.WEBGL, i) || this;
            return (
              (i = r.options),
              (r.gl = null),
              (r.CONTEXT_UID = 0),
              (r.runners = {
                destroy: new ye("destroy"),
                contextChange: new ye("contextChange"),
                reset: new ye("reset"),
                update: new ye("update"),
                postrender: new ye("postrender"),
                prerender: new ye("prerender"),
                resize: new ye("resize"),
              }),
              r.runners.contextChange.add(r),
              (r.globalUniforms = new si({ projectionMatrix: new $t() }, !0)),
              r
                .addSystem($i, "mask")
                .addSystem(_i, "context")
                .addSystem(dr, "state")
                .addSystem(cr, "shader")
                .addSystem(fr, "texture")
                .addSystem(br, "buffer")
                .addSystem(vi, "geometry")
                .addSystem(yi, "framebuffer")
                .addSystem(Qi, "scissor")
                .addSystem(tr, "stencil")
                .addSystem(er, "projection")
                .addSystem(pr, "textureGC")
                .addSystem(li, "filter")
                .addSystem(nr, "renderTexture")
                .addSystem(di, "batch"),
              r.initPlugins(e.__plugins),
              (r.multisample = void 0),
              i.context
                ? r.context.initFromContext(i.context)
                : r.context.initFromOptions({
                    alpha: !!r.useContextAlpha,
                    antialias: i.antialias,
                    premultipliedAlpha:
                      r.useContextAlpha &&
                      "notMultiplied" !== r.useContextAlpha,
                    stencil: !0,
                    preserveDrawingBuffer: i.preserveDrawingBuffer,
                    powerPreference: r.options.powerPreference,
                  }),
              (r.renderingToScreen = !0),
              (function (t) {
                var e;
                if (!lt) {
                  if (
                    nt.ADAPTER.getNavigator()
                      .userAgent.toLowerCase()
                      .indexOf("chrome") > -1
                  ) {
                    var i = [
                      "\n %c %c %c PixiJS " +
                        ct +
                        " -  " +
                        t +
                        "   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n",
                      "background: #ff66a5; padding:5px 0;",
                      "background: #ff66a5; padding:5px 0;",
                      "color: #ff66a5; background: #030307; padding:5px 0;",
                      "background: #ff66a5; padding:5px 0;",
                      "background: #ffc3dc; padding:5px 0;",
                      "background: #ff66a5; padding:5px 0;",
                      "color: #ff2424; background: #fff; padding:5px 0;",
                      "color: #ff2424; background: #fff; padding:5px 0;",
                      "color: #ff2424; background: #fff; padding:5px 0;",
                    ];
                    (e = globalThis.console).log.apply(e, i);
                  } else
                    globalThis.console &&
                      globalThis.console.log(
                        "PixiJS " + ct + " - " + t + " - http://www.pixijs.com/"
                      );
                  lt = !0;
                }
              })(2 === r.context.webGLVersion ? "WebGL 2" : "WebGL 1"),
              r.resize(r.options.width, r.options.height),
              r
            );
          }
          return (
            Ae(e, t),
            (e.create = function (t) {
              if (
                (void 0 === ut &&
                  (ut = (function () {
                    var t = {
                      stencil: !0,
                      failIfMajorPerformanceCaveat:
                        nt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT,
                    };
                    try {
                      if (!nt.ADAPTER.getWebGLRenderingContext()) return !1;
                      var e = nt.ADAPTER.createCanvas(),
                        i =
                          e.getContext("webgl", t) ||
                          e.getContext("experimental-webgl", t),
                        r = !(!i || !i.getContextAttributes().stencil);
                      if (i) {
                        var n = i.getExtension("WEBGL_lose_context");
                        n && n.loseContext();
                      }
                      return (i = null), r;
                    } catch (t) {
                      return !1;
                    }
                  })()),
                ut)
              )
                return new e(t);
              throw new Error(
                'WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.'
              );
            }),
            (e.prototype.contextChange = function () {
              var t,
                e = this.gl;
              if (1 === this.context.webGLVersion) {
                var i = e.getParameter(e.FRAMEBUFFER_BINDING);
                e.bindFramebuffer(e.FRAMEBUFFER, null),
                  (t = e.getParameter(e.SAMPLES)),
                  e.bindFramebuffer(e.FRAMEBUFFER, i);
              } else
                (i = e.getParameter(e.DRAW_FRAMEBUFFER_BINDING)),
                  e.bindFramebuffer(e.DRAW_FRAMEBUFFER, null),
                  (t = e.getParameter(e.SAMPLES)),
                  e.bindFramebuffer(e.DRAW_FRAMEBUFFER, i);
              t >= k.HIGH
                ? (this.multisample = k.HIGH)
                : t >= k.MEDIUM
                ? (this.multisample = k.MEDIUM)
                : t >= k.LOW
                ? (this.multisample = k.LOW)
                : (this.multisample = k.NONE);
            }),
            (e.prototype.addSystem = function (t, e) {
              var i = new t(this);
              if (this[e])
                throw new Error(
                  'Whoops! The name "' + e + '" is already in use'
                );
              for (var r in ((this[e] = i), this.runners))
                this.runners[r].add(i);
              return this;
            }),
            (e.prototype.render = function (t, e) {
              var i, r, n, o;
              if (
                (e &&
                  (e instanceof We
                    ? (Bt(
                        "6.0.0",
                        "Renderer#render arguments changed, use options instead."
                      ),
                      (i = e),
                      (r = arguments[2]),
                      (n = arguments[3]),
                      (o = arguments[4]))
                    : ((i = e.renderTexture),
                      (r = e.clear),
                      (n = e.transform),
                      (o = e.skipUpdateTransform))),
                (this.renderingToScreen = !i),
                this.runners.prerender.emit(),
                this.emit("prerender"),
                (this.projection.transform = n),
                !this.context.isLost)
              ) {
                if ((i || (this._lastObjectRendered = t), !o)) {
                  var s = t.enableTempParent();
                  t.updateTransform(), t.disableTempParent(s);
                }
                this.renderTexture.bind(i),
                  this.batch.currentRenderer.start(),
                  (void 0 !== r ? r : this.clearBeforeRender) &&
                    this.renderTexture.clear(),
                  t.render(this),
                  this.batch.currentRenderer.flush(),
                  i && i.baseTexture.update(),
                  this.runners.postrender.emit(),
                  (this.projection.transform = null),
                  this.emit("postrender");
              }
            }),
            (e.prototype.generateTexture = function (e, i, r, n) {
              void 0 === i && (i = {});
              var o = t.prototype.generateTexture.call(this, e, i, r, n);
              return this.framebuffer.blit(), o;
            }),
            (e.prototype.resize = function (e, i) {
              t.prototype.resize.call(this, e, i),
                this.runners.resize.emit(this.screen.height, this.screen.width);
            }),
            (e.prototype.reset = function () {
              return this.runners.reset.emit(), this;
            }),
            (e.prototype.clear = function () {
              this.renderTexture.bind(), this.renderTexture.clear();
            }),
            (e.prototype.destroy = function (e) {
              for (var i in (this.runners.destroy.emit(), this.runners))
                this.runners[i].destroy();
              t.prototype.destroy.call(this, e), (this.gl = null);
            }),
            Object.defineProperty(e.prototype, "extract", {
              get: function () {
                return (
                  Bt(
                    "6.0.0",
                    "Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."
                  ),
                  this.plugins.extract
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.registerPlugin = function (t, e) {
              Bt(
                "6.5.0",
                "Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."
              ),
                me.add({ name: t, type: de.RendererPlugin, ref: e });
            }),
            (e.__plugins = {}),
            e
          );
        })(gr);
      me.handleByMap(de.RendererPlugin, xr.__plugins);
      var wr =
          "attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",
        Tr = function () {
          (this.texArray = null),
            (this.blend = 0),
            (this.type = b.TRIANGLES),
            (this.start = 0),
            (this.size = 0),
            (this.data = null);
        },
        Ar = (function () {
          function t() {
            (this.elements = []), (this.ids = []), (this.count = 0);
          }
          return (
            (t.prototype.clear = function () {
              for (var t = 0; t < this.count; t++) this.elements[t] = null;
              this.count = 0;
            }),
            t
          );
        })(),
        Sr = (function () {
          function t(t) {
            "number" == typeof t
              ? (this.rawBinaryData = new ArrayBuffer(t))
              : t instanceof Uint8Array
              ? (this.rawBinaryData = t.buffer)
              : (this.rawBinaryData = t),
              (this.uint32View = new Uint32Array(this.rawBinaryData)),
              (this.float32View = new Float32Array(this.rawBinaryData));
          }
          return (
            Object.defineProperty(t.prototype, "int8View", {
              get: function () {
                return (
                  this._int8View ||
                    (this._int8View = new Int8Array(this.rawBinaryData)),
                  this._int8View
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "uint8View", {
              get: function () {
                return (
                  this._uint8View ||
                    (this._uint8View = new Uint8Array(this.rawBinaryData)),
                  this._uint8View
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "int16View", {
              get: function () {
                return (
                  this._int16View ||
                    (this._int16View = new Int16Array(this.rawBinaryData)),
                  this._int16View
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "uint16View", {
              get: function () {
                return (
                  this._uint16View ||
                    (this._uint16View = new Uint16Array(this.rawBinaryData)),
                  this._uint16View
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "int32View", {
              get: function () {
                return (
                  this._int32View ||
                    (this._int32View = new Int32Array(this.rawBinaryData)),
                  this._int32View
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.view = function (t) {
              return this[t + "View"];
            }),
            (t.prototype.destroy = function () {
              (this.rawBinaryData = null),
                (this._int8View = null),
                (this._uint8View = null),
                (this._int16View = null),
                (this._uint16View = null),
                (this._int32View = null),
                (this.uint32View = null),
                (this.float32View = null);
            }),
            (t.sizeOf = function (t) {
              switch (t) {
                case "int8":
                case "uint8":
                  return 1;
                case "int16":
                case "uint16":
                  return 2;
                case "int32":
                case "uint32":
                case "float32":
                  return 4;
                default:
                  throw new Error(t + " isn't a valid view type");
              }
            }),
            t
          );
        })(),
        Er = (function (t) {
          function e(e) {
            var i = t.call(this, e) || this;
            return (
              (i.shaderGenerator = null),
              (i.geometryClass = null),
              (i.vertexSize = null),
              (i.state = Xi.for2d()),
              (i.size = 4 * nt.SPRITE_BATCH_SIZE),
              (i._vertexCount = 0),
              (i._indexCount = 0),
              (i._bufferedElements = []),
              (i._bufferedTextures = []),
              (i._bufferSize = 0),
              (i._shader = null),
              (i._packedGeometries = []),
              (i._packedGeometryPoolSize = 2),
              (i._flushId = 0),
              (i._aBuffers = {}),
              (i._iBuffers = {}),
              (i.MAX_TEXTURES = 1),
              i.renderer.on("prerender", i.onPrerender, i),
              e.runners.contextChange.add(i),
              (i._dcIndex = 0),
              (i._aIndex = 0),
              (i._iIndex = 0),
              (i._attributeBuffer = null),
              (i._indexBuffer = null),
              (i._tempBoundTextures = []),
              i
            );
          }
          return (
            Ae(e, t),
            (e.prototype.contextChange = function () {
              var t = this.renderer.gl;
              nt.PREFER_ENV === m.WEBGL_LEGACY
                ? (this.MAX_TEXTURES = 1)
                : ((this.MAX_TEXTURES = Math.min(
                    t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),
                    nt.SPRITE_MAX_TEXTURES
                  )),
                  (this.MAX_TEXTURES = (function (t, e) {
                    if (0 === t)
                      throw new Error(
                        "Invalid value of `0` passed to `checkMaxIfStatementsInShader`"
                      );
                    for (var i = e.createShader(e.FRAGMENT_SHADER); ; ) {
                      var r = Li.replace(/%forloop%/gi, Ui(t));
                      if (
                        (e.shaderSource(i, r),
                        e.compileShader(i),
                        e.getShaderParameter(i, e.COMPILE_STATUS))
                      )
                        break;
                      t = (t / 2) | 0;
                    }
                    return t;
                  })(this.MAX_TEXTURES, t))),
                (this._shader = this.shaderGenerator.generateShader(
                  this.MAX_TEXTURES
                ));
              for (var e = 0; e < this._packedGeometryPoolSize; e++)
                this._packedGeometries[e] = new this.geometryClass();
              this.initFlushBuffers();
            }),
            (e.prototype.initFlushBuffers = function () {
              for (
                var t = e._drawCallPool,
                  i = e._textureArrayPool,
                  r = this.size / 4,
                  n = Math.floor(r / this.MAX_TEXTURES) + 1;
                t.length < r;

              )
                t.push(new Tr());
              for (; i.length < n; ) i.push(new Ar());
              for (var o = 0; o < this.MAX_TEXTURES; o++)
                this._tempBoundTextures[o] = null;
            }),
            (e.prototype.onPrerender = function () {
              this._flushId = 0;
            }),
            (e.prototype.render = function (t) {
              t._texture.valid &&
                (this._vertexCount + t.vertexData.length / 2 > this.size &&
                  this.flush(),
                (this._vertexCount += t.vertexData.length / 2),
                (this._indexCount += t.indices.length),
                (this._bufferedTextures[this._bufferSize] =
                  t._texture.baseTexture),
                (this._bufferedElements[this._bufferSize++] = t));
            }),
            (e.prototype.buildTexturesAndDrawCalls = function () {
              var t = this._bufferedTextures,
                i = this.MAX_TEXTURES,
                r = e._textureArrayPool,
                n = this.renderer.batch,
                o = this._tempBoundTextures,
                s = this.renderer.textureGC.count,
                a = ++Pe._globalBatch,
                h = 0,
                u = r[0],
                l = 0;
              n.copyBoundTextures(o, i);
              for (var c = 0; c < this._bufferSize; ++c) {
                var d = t[c];
                (t[c] = null),
                  d._batchEnabled !== a &&
                    (u.count >= i &&
                      (n.boundArray(u, o, a, i),
                      this.buildDrawCalls(u, l, c),
                      (l = c),
                      (u = r[++h]),
                      ++a),
                    (d._batchEnabled = a),
                    (d.touched = s),
                    (u.elements[u.count++] = d));
              }
              for (
                u.count > 0 &&
                  (n.boundArray(u, o, a, i),
                  this.buildDrawCalls(u, l, this._bufferSize),
                  ++h,
                  ++a),
                  c = 0;
                c < o.length;
                c++
              )
                o[c] = null;
              Pe._globalBatch = a;
            }),
            (e.prototype.buildDrawCalls = function (t, i, r) {
              var n = this,
                o = n._bufferedElements,
                s = n._attributeBuffer,
                a = n._indexBuffer,
                h = n.vertexSize,
                u = e._drawCallPool,
                l = this._dcIndex,
                c = this._aIndex,
                d = this._iIndex,
                p = u[l];
              (p.start = this._iIndex), (p.texArray = t);
              for (var _ = i; _ < r; ++_) {
                var f = o[_],
                  m = f._texture.baseTexture,
                  y = yt[m.alphaMode ? 1 : 0][f.blendMode];
                (o[_] = null),
                  i < _ &&
                    p.blend !== y &&
                    ((p.size = d - p.start),
                    (i = _),
                    ((p = u[++l]).texArray = t),
                    (p.start = d)),
                  this.packInterleavedGeometry(f, s, a, c, d),
                  (c += (f.vertexData.length / 2) * h),
                  (d += f.indices.length),
                  (p.blend = y);
              }
              i < r && ((p.size = d - p.start), ++l),
                (this._dcIndex = l),
                (this._aIndex = c),
                (this._iIndex = d);
            }),
            (e.prototype.bindAndClearTexArray = function (t) {
              for (var e = this.renderer.texture, i = 0; i < t.count; i++)
                e.bind(t.elements[i], t.ids[i]), (t.elements[i] = null);
              t.count = 0;
            }),
            (e.prototype.updateGeometry = function () {
              var t = this,
                e = t._packedGeometries,
                i = t._attributeBuffer,
                r = t._indexBuffer;
              nt.CAN_UPLOAD_SAME_BUFFER
                ? (e[this._flushId]._buffer.update(i.rawBinaryData),
                  e[this._flushId]._indexBuffer.update(r),
                  this.renderer.geometry.updateBuffers())
                : (this._packedGeometryPoolSize <= this._flushId &&
                    (this._packedGeometryPoolSize++,
                    (e[this._flushId] = new this.geometryClass())),
                  e[this._flushId]._buffer.update(i.rawBinaryData),
                  e[this._flushId]._indexBuffer.update(r),
                  this.renderer.geometry.bind(e[this._flushId]),
                  this.renderer.geometry.updateBuffers(),
                  this._flushId++);
            }),
            (e.prototype.drawBatches = function () {
              for (
                var t = this._dcIndex,
                  i = this.renderer,
                  r = i.gl,
                  n = i.state,
                  o = e._drawCallPool,
                  s = null,
                  a = 0;
                a < t;
                a++
              ) {
                var h = o[a],
                  u = h.texArray,
                  l = h.type,
                  c = h.size,
                  d = h.start,
                  p = h.blend;
                s !== u && ((s = u), this.bindAndClearTexArray(u)),
                  (this.state.blendMode = p),
                  n.set(this.state),
                  r.drawElements(l, c, r.UNSIGNED_SHORT, 2 * d);
              }
            }),
            (e.prototype.flush = function () {
              0 !== this._vertexCount &&
                ((this._attributeBuffer = this.getAttributeBuffer(
                  this._vertexCount
                )),
                (this._indexBuffer = this.getIndexBuffer(this._indexCount)),
                (this._aIndex = 0),
                (this._iIndex = 0),
                (this._dcIndex = 0),
                this.buildTexturesAndDrawCalls(),
                this.updateGeometry(),
                this.drawBatches(),
                (this._bufferSize = 0),
                (this._vertexCount = 0),
                (this._indexCount = 0));
            }),
            (e.prototype.start = function () {
              this.renderer.state.set(this.state),
                this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),
                this.renderer.shader.bind(this._shader),
                nt.CAN_UPLOAD_SAME_BUFFER &&
                  this.renderer.geometry.bind(
                    this._packedGeometries[this._flushId]
                  );
            }),
            (e.prototype.stop = function () {
              this.flush();
            }),
            (e.prototype.destroy = function () {
              for (var e = 0; e < this._packedGeometryPoolSize; e++)
                this._packedGeometries[e] &&
                  this._packedGeometries[e].destroy();
              this.renderer.off("prerender", this.onPrerender, this),
                (this._aBuffers = null),
                (this._iBuffers = null),
                (this._packedGeometries = null),
                (this._attributeBuffer = null),
                (this._indexBuffer = null),
                this._shader && (this._shader.destroy(), (this._shader = null)),
                t.prototype.destroy.call(this);
            }),
            (e.prototype.getAttributeBuffer = function (t) {
              var e = wt(Math.ceil(t / 8)),
                i = At(e),
                r = 8 * e;
              this._aBuffers.length <= i && (this._iBuffers.length = i + 1);
              var n = this._aBuffers[r];
              return (
                n || (this._aBuffers[r] = n = new Sr(r * this.vertexSize * 4)),
                n
              );
            }),
            (e.prototype.getIndexBuffer = function (t) {
              var e = wt(Math.ceil(t / 12)),
                i = At(e),
                r = 12 * e;
              this._iBuffers.length <= i && (this._iBuffers.length = i + 1);
              var n = this._iBuffers[i];
              return n || (this._iBuffers[i] = n = new Uint16Array(r)), n;
            }),
            (e.prototype.packInterleavedGeometry = function (t, e, i, r, n) {
              for (
                var o = e.uint32View,
                  s = e.float32View,
                  a = r / this.vertexSize,
                  h = t.uvs,
                  u = t.indices,
                  l = t.vertexData,
                  c = t._texture.baseTexture._batchLocation,
                  d = Math.min(t.worldAlpha, 1),
                  p =
                    d < 1 && t._texture.baseTexture.alphaMode
                      ? vt(t._tintRGB, d)
                      : t._tintRGB + ((255 * d) << 24),
                  _ = 0;
                _ < l.length;
                _ += 2
              )
                (s[r++] = l[_]),
                  (s[r++] = l[_ + 1]),
                  (s[r++] = h[_]),
                  (s[r++] = h[_ + 1]),
                  (o[r++] = p),
                  (s[r++] = c);
              for (_ = 0; _ < u.length; _++) i[n++] = a + u[_];
            }),
            (e._drawCallPool = []),
            (e._textureArrayPool = []),
            e
          );
        })(ci),
        Cr = (function () {
          function t(t, e) {
            if (
              ((this.vertexSrc = t),
              (this.fragTemplate = e),
              (this.programCache = {}),
              (this.defaultGroupCache = {}),
              e.indexOf("%count%") < 0)
            )
              throw new Error('Fragment template must contain "%count%".');
            if (e.indexOf("%forloop%") < 0)
              throw new Error('Fragment template must contain "%forloop%".');
          }
          return (
            (t.prototype.generateShader = function (t) {
              if (!this.programCache[t]) {
                for (var e = new Int32Array(t), i = 0; i < t; i++) e[i] = i;
                this.defaultGroupCache[t] = si.from({ uSamplers: e }, !0);
                var r = this.fragTemplate;
                (r = (r = r.replace(/%count%/gi, "" + t)).replace(
                  /%forloop%/gi,
                  this.generateSampleSrc(t)
                )),
                  (this.programCache[t] = new ji(this.vertexSrc, r));
              }
              var n = {
                tint: new Float32Array([1, 1, 1, 1]),
                translationMatrix: new $t(),
                default: this.defaultGroupCache[t],
              };
              return new zi(this.programCache[t], n);
            }),
            (t.prototype.generateSampleSrc = function (t) {
              var e = "";
              (e += "\n"), (e += "\n");
              for (var i = 0; i < t; i++)
                i > 0 && (e += "\nelse "),
                  i < t - 1 && (e += "if(vTextureId < " + i + ".5)"),
                  (e += "\n{"),
                  (e +=
                    "\n\tcolor = texture2D(uSamplers[" +
                    i +
                    "], vTextureCoord);"),
                  (e += "\n}");
              return (e += "\n") + "\n";
            }),
            t
          );
        })(),
        Mr = (function (t) {
          function e(e) {
            void 0 === e && (e = !1);
            var i = t.call(this) || this;
            return (
              (i._buffer = new Je(null, e, !1)),
              (i._indexBuffer = new Je(null, e, !0)),
              i
                .addAttribute("aVertexPosition", i._buffer, 2, !1, T.FLOAT)
                .addAttribute("aTextureCoord", i._buffer, 2, !1, T.FLOAT)
                .addAttribute("aColor", i._buffer, 4, !0, T.UNSIGNED_BYTE)
                .addAttribute("aTextureId", i._buffer, 1, !0, T.FLOAT)
                .addIndex(i._indexBuffer),
              i
            );
          }
          return Ae(e, t), e;
        })(ii),
        Pr =
          "precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",
        Br =
          "varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",
        Or = (function () {
          function t() {}
          return (
            (t.create = function (t) {
              var e = Object.assign(
                  {
                    vertex: Pr,
                    fragment: Br,
                    geometryClass: Mr,
                    vertexSize: 6,
                  },
                  t
                ),
                i = e.vertex,
                r = e.fragment,
                n = e.vertexSize,
                o = e.geometryClass;
              return (function (t) {
                function e(e) {
                  var s = t.call(this, e) || this;
                  return (
                    (s.shaderGenerator = new Cr(i, r)),
                    (s.geometryClass = o),
                    (s.vertexSize = n),
                    s
                  );
                }
                return Ae(e, t), e;
              })(Er);
            }),
            Object.defineProperty(t, "defaultVertexSrc", {
              get: function () {
                return Pr;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "defaultFragmentTemplate", {
              get: function () {
                return Br;
              },
              enumerable: !1,
              configurable: !0,
            }),
            t
          );
        })(),
        Rr = Or.create();
      Object.assign(Rr, {
        extension: { name: "batch", type: de.RendererPlugin },
      });
      var Ir = {},
        kr = function (t) {
          Object.defineProperty(Ir, t, {
            get: function () {
              return (
                Bt("6.0.0", "PIXI.systems." + t + " has moved to PIXI." + t),
                Ue[t]
              );
            },
          });
        };
      for (var Fr in Ue) kr(Fr);
      var Dr = {},
        Nr = function (t) {
          Object.defineProperty(Dr, t, {
            get: function () {
              return (
                Bt("6.0.0", "PIXI.resources." + t + " has moved to PIXI." + t),
                mr[t]
              );
            },
          });
        };
      for (var Fr in mr) Nr(Fr);
      he.mixin({
        accessible: !1,
        accessibleTitle: null,
        accessibleHint: null,
        tabIndex: 0,
        _accessibleActive: !1,
        _accessibleDiv: null,
        accessibleType: "button",
        accessiblePointerEvents: "auto",
        accessibleChildren: !0,
        renderId: -1,
      });
      var Lr = 100,
        Ur = (function () {
          function t(t) {
            (this.debug = !1),
              (this._isActive = !1),
              (this._isMobileAccessibility = !1),
              (this.pool = []),
              (this.renderId = 0),
              (this.children = []),
              (this.androidUpdateCount = 0),
              (this.androidUpdateFrequency = 500),
              (this._hookDiv = null),
              (rt.tablet || rt.phone) && this.createTouchHook();
            var e = document.createElement("div");
            (e.style.width = Lr + "px"),
              (e.style.height = Lr + "px"),
              (e.style.position = "absolute"),
              (e.style.top = "0px"),
              (e.style.left = "0px"),
              (e.style.zIndex = (2).toString()),
              (this.div = e),
              (this.renderer = t),
              (this._onKeyDown = this._onKeyDown.bind(this)),
              (this._onMouseMove = this._onMouseMove.bind(this)),
              globalThis.addEventListener("keydown", this._onKeyDown, !1);
          }
          return (
            Object.defineProperty(t.prototype, "isActive", {
              get: function () {
                return this._isActive;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "isMobileAccessibility", {
              get: function () {
                return this._isMobileAccessibility;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.createTouchHook = function () {
              var t = this,
                e = document.createElement("button");
              (e.style.width = "1px"),
                (e.style.height = "1px"),
                (e.style.position = "absolute"),
                (e.style.top = "-1000px"),
                (e.style.left = "-1000px"),
                (e.style.zIndex = (2).toString()),
                (e.style.backgroundColor = "#FF0000"),
                (e.title = "select to enable accessibility for this content"),
                e.addEventListener("focus", function () {
                  (t._isMobileAccessibility = !0),
                    t.activate(),
                    t.destroyTouchHook();
                }),
                document.body.appendChild(e),
                (this._hookDiv = e);
            }),
            (t.prototype.destroyTouchHook = function () {
              this._hookDiv &&
                (document.body.removeChild(this._hookDiv),
                (this._hookDiv = null));
            }),
            (t.prototype.activate = function () {
              var t;
              this._isActive ||
                ((this._isActive = !0),
                globalThis.document.addEventListener(
                  "mousemove",
                  this._onMouseMove,
                  !0
                ),
                globalThis.removeEventListener("keydown", this._onKeyDown, !1),
                this.renderer.on("postrender", this.update, this),
                null === (t = this.renderer.view.parentNode) ||
                  void 0 === t ||
                  t.appendChild(this.div));
            }),
            (t.prototype.deactivate = function () {
              var t;
              this._isActive &&
                !this._isMobileAccessibility &&
                ((this._isActive = !1),
                globalThis.document.removeEventListener(
                  "mousemove",
                  this._onMouseMove,
                  !0
                ),
                globalThis.addEventListener("keydown", this._onKeyDown, !1),
                this.renderer.off("postrender", this.update),
                null === (t = this.div.parentNode) ||
                  void 0 === t ||
                  t.removeChild(this.div));
            }),
            (t.prototype.updateAccessibleObjects = function (t) {
              if (t.visible && t.accessibleChildren) {
                t.accessible &&
                  t.interactive &&
                  (t._accessibleActive || this.addChild(t),
                  (t.renderId = this.renderId));
                var e = t.children;
                if (e)
                  for (var i = 0; i < e.length; i++)
                    this.updateAccessibleObjects(e[i]);
              }
            }),
            (t.prototype.update = function () {
              var t = performance.now();
              if (
                !(rt.android.device && t < this.androidUpdateCount) &&
                ((this.androidUpdateCount = t + this.androidUpdateFrequency),
                this.renderer.renderingToScreen)
              ) {
                this.renderer._lastObjectRendered &&
                  this.updateAccessibleObjects(
                    this.renderer._lastObjectRendered
                  );
                var e = this.renderer.view.getBoundingClientRect(),
                  i = e.left,
                  r = e.top,
                  n = e.width,
                  o = e.height,
                  s = this.renderer,
                  a = s.width,
                  h = s.height,
                  u = s.resolution,
                  l = (n / a) * u,
                  c = (o / h) * u,
                  d = this.div;
                (d.style.left = i + "px"),
                  (d.style.top = r + "px"),
                  (d.style.width = a + "px"),
                  (d.style.height = h + "px");
                for (var p = 0; p < this.children.length; p++) {
                  var _ = this.children[p];
                  if (_.renderId !== this.renderId)
                    (_._accessibleActive = !1),
                      St(this.children, p, 1),
                      this.div.removeChild(_._accessibleDiv),
                      this.pool.push(_._accessibleDiv),
                      (_._accessibleDiv = null),
                      p--;
                  else {
                    d = _._accessibleDiv;
                    var f = _.hitArea,
                      m = _.worldTransform;
                    _.hitArea
                      ? ((d.style.left = (m.tx + f.x * m.a) * l + "px"),
                        (d.style.top = (m.ty + f.y * m.d) * c + "px"),
                        (d.style.width = f.width * m.a * l + "px"),
                        (d.style.height = f.height * m.d * c + "px"))
                      : ((f = _.getBounds()),
                        this.capHitArea(f),
                        (d.style.left = f.x * l + "px"),
                        (d.style.top = f.y * c + "px"),
                        (d.style.width = f.width * l + "px"),
                        (d.style.height = f.height * c + "px"),
                        d.title !== _.accessibleTitle &&
                          null !== _.accessibleTitle &&
                          (d.title = _.accessibleTitle),
                        d.getAttribute("aria-label") !== _.accessibleHint &&
                          null !== _.accessibleHint &&
                          d.setAttribute("aria-label", _.accessibleHint)),
                      (_.accessibleTitle === d.title &&
                        _.tabIndex === d.tabIndex) ||
                        ((d.title = _.accessibleTitle),
                        (d.tabIndex = _.tabIndex),
                        this.debug && this.updateDebugHTML(d));
                  }
                }
                this.renderId++;
              }
            }),
            (t.prototype.updateDebugHTML = function (t) {
              t.innerHTML =
                "type: " +
                t.type +
                "</br> title : " +
                t.title +
                "</br> tabIndex: " +
                t.tabIndex;
            }),
            (t.prototype.capHitArea = function (t) {
              t.x < 0 && ((t.width += t.x), (t.x = 0)),
                t.y < 0 && ((t.height += t.y), (t.y = 0));
              var e = this.renderer,
                i = e.width,
                r = e.height;
              t.x + t.width > i && (t.width = i - t.x),
                t.y + t.height > r && (t.height = r - t.y);
            }),
            (t.prototype.addChild = function (t) {
              var e = this.pool.pop();
              e ||
                (((e = document.createElement("button")).style.width =
                  Lr + "px"),
                (e.style.height = Lr + "px"),
                (e.style.backgroundColor = this.debug
                  ? "rgba(255,255,255,0.5)"
                  : "transparent"),
                (e.style.position = "absolute"),
                (e.style.zIndex = (2).toString()),
                (e.style.borderStyle = "none"),
                navigator.userAgent.toLowerCase().indexOf("chrome") > -1
                  ? e.setAttribute("aria-live", "off")
                  : e.setAttribute("aria-live", "polite"),
                navigator.userAgent.match(/rv:.*Gecko\//)
                  ? e.setAttribute("aria-relevant", "additions")
                  : e.setAttribute("aria-relevant", "text"),
                e.addEventListener("click", this._onClick.bind(this)),
                e.addEventListener("focus", this._onFocus.bind(this)),
                e.addEventListener("focusout", this._onFocusOut.bind(this))),
                (e.style.pointerEvents = t.accessiblePointerEvents),
                (e.type = t.accessibleType),
                t.accessibleTitle && null !== t.accessibleTitle
                  ? (e.title = t.accessibleTitle)
                  : (t.accessibleHint && null !== t.accessibleHint) ||
                    (e.title = "displayObject " + t.tabIndex),
                t.accessibleHint &&
                  null !== t.accessibleHint &&
                  e.setAttribute("aria-label", t.accessibleHint),
                this.debug && this.updateDebugHTML(e),
                (t._accessibleActive = !0),
                (t._accessibleDiv = e),
                (e.displayObject = t),
                this.children.push(t),
                this.div.appendChild(t._accessibleDiv),
                (t._accessibleDiv.tabIndex = t.tabIndex);
            }),
            (t.prototype._onClick = function (t) {
              var e = this.renderer.plugins.interaction,
                i = t.target.displayObject,
                r = e.eventData;
              e.dispatchEvent(i, "click", r),
                e.dispatchEvent(i, "pointertap", r),
                e.dispatchEvent(i, "tap", r);
            }),
            (t.prototype._onFocus = function (t) {
              t.target.getAttribute("aria-live") ||
                t.target.setAttribute("aria-live", "assertive");
              var e = this.renderer.plugins.interaction,
                i = t.target.displayObject,
                r = e.eventData;
              e.dispatchEvent(i, "mouseover", r);
            }),
            (t.prototype._onFocusOut = function (t) {
              t.target.getAttribute("aria-live") ||
                t.target.setAttribute("aria-live", "polite");
              var e = this.renderer.plugins.interaction,
                i = t.target.displayObject,
                r = e.eventData;
              e.dispatchEvent(i, "mouseout", r);
            }),
            (t.prototype._onKeyDown = function (t) {
              9 === t.keyCode && this.activate();
            }),
            (t.prototype._onMouseMove = function (t) {
              (0 === t.movementX && 0 === t.movementY) || this.deactivate();
            }),
            (t.prototype.destroy = function () {
              this.destroyTouchHook(),
                (this.div = null),
                globalThis.document.removeEventListener(
                  "mousemove",
                  this._onMouseMove,
                  !0
                ),
                globalThis.removeEventListener("keydown", this._onKeyDown),
                (this.pool = null),
                (this.children = null),
                (this.renderer = null);
            }),
            (t.extension = {
              name: "accessibility",
              type: [de.RendererPlugin, de.CanvasRendererPlugin],
            }),
            t
          );
        })(),
        Gr = (function () {
          function t() {
            (this.pressure = 0),
              (this.rotationAngle = 0),
              (this.twist = 0),
              (this.tangentialPressure = 0),
              (this.global = new Vt()),
              (this.target = null),
              (this.originalEvent = null),
              (this.identifier = null),
              (this.isPrimary = !1),
              (this.button = 0),
              (this.buttons = 0),
              (this.width = 0),
              (this.height = 0),
              (this.tiltX = 0),
              (this.tiltY = 0),
              (this.pointerType = null),
              (this.pressure = 0),
              (this.rotationAngle = 0),
              (this.twist = 0),
              (this.tangentialPressure = 0);
          }
          return (
            Object.defineProperty(t.prototype, "pointerId", {
              get: function () {
                return this.identifier;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.getLocalPosition = function (t, e, i) {
              return t.worldTransform.applyInverse(i || this.global, e);
            }),
            (t.prototype.copyEvent = function (t) {
              "isPrimary" in t && t.isPrimary && (this.isPrimary = !0),
                (this.button = "button" in t && t.button);
              var e = "buttons" in t && t.buttons;
              (this.buttons = Number.isInteger(e)
                ? e
                : "which" in t && t.which),
                (this.width = "width" in t && t.width),
                (this.height = "height" in t && t.height),
                (this.tiltX = "tiltX" in t && t.tiltX),
                (this.tiltY = "tiltY" in t && t.tiltY),
                (this.pointerType = "pointerType" in t && t.pointerType),
                (this.pressure = "pressure" in t && t.pressure),
                (this.rotationAngle = "rotationAngle" in t && t.rotationAngle),
                (this.twist = ("twist" in t && t.twist) || 0),
                (this.tangentialPressure =
                  ("tangentialPressure" in t && t.tangentialPressure) || 0);
            }),
            (t.prototype.reset = function () {
              this.isPrimary = !1;
            }),
            t
          );
        })(),
        Vr = function (t, e) {
          return (
            (Vr =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
              }),
            Vr(t, e)
          );
        },
        jr = (function () {
          function t() {
            (this.stopped = !1),
              (this.stopsPropagatingAt = null),
              (this.stopPropagationHint = !1),
              (this.target = null),
              (this.currentTarget = null),
              (this.type = null),
              (this.data = null);
          }
          return (
            (t.prototype.stopPropagation = function () {
              (this.stopped = !0),
                (this.stopPropagationHint = !0),
                (this.stopsPropagatingAt = this.currentTarget);
            }),
            (t.prototype.reset = function () {
              (this.stopped = !1),
                (this.stopsPropagatingAt = null),
                (this.stopPropagationHint = !1),
                (this.currentTarget = null),
                (this.target = null);
            }),
            t
          );
        })(),
        zr = (function () {
          function t(e) {
            (this._pointerId = e), (this._flags = t.FLAGS.NONE);
          }
          return (
            (t.prototype._doSet = function (t, e) {
              this._flags = e ? this._flags | t : this._flags & ~t;
            }),
            Object.defineProperty(t.prototype, "pointerId", {
              get: function () {
                return this._pointerId;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "flags", {
              get: function () {
                return this._flags;
              },
              set: function (t) {
                this._flags = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "none", {
              get: function () {
                return this._flags === t.FLAGS.NONE;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "over", {
              get: function () {
                return !!(this._flags & t.FLAGS.OVER);
              },
              set: function (e) {
                this._doSet(t.FLAGS.OVER, e);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "rightDown", {
              get: function () {
                return !!(this._flags & t.FLAGS.RIGHT_DOWN);
              },
              set: function (e) {
                this._doSet(t.FLAGS.RIGHT_DOWN, e);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "leftDown", {
              get: function () {
                return !!(this._flags & t.FLAGS.LEFT_DOWN);
              },
              set: function (e) {
                this._doSet(t.FLAGS.LEFT_DOWN, e);
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.FLAGS = Object.freeze({
              NONE: 0,
              OVER: 1,
              LEFT_DOWN: 2,
              RIGHT_DOWN: 4,
            })),
            t
          );
        })(),
        Xr = (function () {
          function t() {
            this._tempPoint = new Vt();
          }
          return (
            (t.prototype.recursiveFindHit = function (t, e, i, r, n) {
              var o;
              if (!e || !e.visible) return !1;
              var s = t.data.global,
                a = !1,
                h = (n = e.interactive || n),
                u = !0;
              if (e.hitArea)
                r &&
                  (e.worldTransform.applyInverse(s, this._tempPoint),
                  e.hitArea.contains(this._tempPoint.x, this._tempPoint.y)
                    ? (a = !0)
                    : ((r = !1), (u = !1))),
                  (h = !1);
              else if (e._mask && r) {
                var l = e._mask.isMaskData ? e._mask.maskObject : e._mask;
                l &&
                  !(null === (o = l.containsPoint) || void 0 === o
                    ? void 0
                    : o.call(l, s)) &&
                  (r = !1);
              }
              if (u && e.interactiveChildren && e.children)
                for (var c = e.children, d = c.length - 1; d >= 0; d--) {
                  var p = c[d],
                    _ = this.recursiveFindHit(t, p, i, r, h);
                  if (_) {
                    if (!p.parent) continue;
                    (h = !1), _ && (t.target && (r = !1), (a = !0));
                  }
                }
              return (
                n &&
                  (r &&
                    !t.target &&
                    !e.hitArea &&
                    e.containsPoint &&
                    e.containsPoint(s) &&
                    (a = !0),
                  e.interactive &&
                    (a && !t.target && (t.target = e), i && i(t, e, !!a))),
                a
              );
            }),
            (t.prototype.findHit = function (t, e, i, r) {
              this.recursiveFindHit(t, e, i, r, !1);
            }),
            t
          );
        })(),
        Hr = {
          interactive: !1,
          interactiveChildren: !0,
          hitArea: null,
          get buttonMode() {
            return "pointer" === this.cursor;
          },
          set buttonMode(t) {
            t
              ? (this.cursor = "pointer")
              : "pointer" === this.cursor && (this.cursor = null);
          },
          cursor: null,
          get trackedPointers() {
            return (
              void 0 === this._trackedPointers && (this._trackedPointers = {}),
              this._trackedPointers
            );
          },
          _trackedPointers: void 0,
        };
      he.mixin(Hr);
      var Yr = { target: null, data: { global: null } },
        Wr = (function (t) {
          function e(e, i) {
            var r = t.call(this) || this;
            return (
              (i = i || {}),
              (r.renderer = e),
              (r.autoPreventDefault =
                void 0 === i.autoPreventDefault || i.autoPreventDefault),
              (r.interactionFrequency = i.interactionFrequency || 10),
              (r.mouse = new Gr()),
              (r.mouse.identifier = 1),
              r.mouse.global.set(-999999),
              (r.activeInteractionData = {}),
              (r.activeInteractionData[1] = r.mouse),
              (r.interactionDataPool = []),
              (r.eventData = new jr()),
              (r.interactionDOMElement = null),
              (r.moveWhenInside = !1),
              (r.eventsAdded = !1),
              (r.tickerAdded = !1),
              (r.mouseOverRenderer = !("PointerEvent" in globalThis)),
              (r.supportsTouchEvents = "ontouchstart" in globalThis),
              (r.supportsPointerEvents = !!globalThis.PointerEvent),
              (r.onPointerUp = r.onPointerUp.bind(r)),
              (r.processPointerUp = r.processPointerUp.bind(r)),
              (r.onPointerCancel = r.onPointerCancel.bind(r)),
              (r.processPointerCancel = r.processPointerCancel.bind(r)),
              (r.onPointerDown = r.onPointerDown.bind(r)),
              (r.processPointerDown = r.processPointerDown.bind(r)),
              (r.onPointerMove = r.onPointerMove.bind(r)),
              (r.processPointerMove = r.processPointerMove.bind(r)),
              (r.onPointerOut = r.onPointerOut.bind(r)),
              (r.processPointerOverOut = r.processPointerOverOut.bind(r)),
              (r.onPointerOver = r.onPointerOver.bind(r)),
              (r.cursorStyles = { default: "inherit", pointer: "pointer" }),
              (r.currentCursorMode = null),
              (r.cursor = null),
              (r.resolution = 1),
              (r.delayedEvents = []),
              (r.search = new Xr()),
              (r._tempDisplayObject = new ue()),
              (r._eventListenerOptions = { capture: !0, passive: !1 }),
              (r._useSystemTicker =
                void 0 === i.useSystemTicker || i.useSystemTicker),
              r.setTargetElement(r.renderer.view, r.renderer.resolution),
              r
            );
          }
          return (
            (function (t, e) {
              function i() {
                this.constructor = t;
              }
              Vr(t, e),
                (t.prototype =
                  null === e
                    ? Object.create(e)
                    : ((i.prototype = e.prototype), new i()));
            })(e, t),
            Object.defineProperty(e.prototype, "useSystemTicker", {
              get: function () {
                return this._useSystemTicker;
              },
              set: function (t) {
                (this._useSystemTicker = t),
                  t ? this.addTickerListener() : this.removeTickerListener();
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "lastObjectRendered", {
              get: function () {
                return (
                  this.renderer._lastObjectRendered || this._tempDisplayObject
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.hitTest = function (t, e) {
              return (
                (Yr.target = null),
                (Yr.data.global = t),
                e || (e = this.lastObjectRendered),
                this.processInteractive(Yr, e, null, !0),
                Yr.target
              );
            }),
            (e.prototype.setTargetElement = function (t, e) {
              void 0 === e && (e = 1),
                this.removeTickerListener(),
                this.removeEvents(),
                (this.interactionDOMElement = t),
                (this.resolution = e),
                this.addEvents(),
                this.addTickerListener();
            }),
            (e.prototype.addTickerListener = function () {
              !this.tickerAdded &&
                this.interactionDOMElement &&
                this._useSystemTicker &&
                (ve.system.add(this.tickerUpdate, this, _e.INTERACTION),
                (this.tickerAdded = !0));
            }),
            (e.prototype.removeTickerListener = function () {
              this.tickerAdded &&
                (ve.system.remove(this.tickerUpdate, this),
                (this.tickerAdded = !1));
            }),
            (e.prototype.addEvents = function () {
              if (!this.eventsAdded && this.interactionDOMElement) {
                var t = this.interactionDOMElement.style;
                globalThis.navigator.msPointerEnabled
                  ? ((t.msContentZooming = "none"), (t.msTouchAction = "none"))
                  : this.supportsPointerEvents && (t.touchAction = "none"),
                  this.supportsPointerEvents
                    ? (globalThis.document.addEventListener(
                        "pointermove",
                        this.onPointerMove,
                        this._eventListenerOptions
                      ),
                      this.interactionDOMElement.addEventListener(
                        "pointerdown",
                        this.onPointerDown,
                        this._eventListenerOptions
                      ),
                      this.interactionDOMElement.addEventListener(
                        "pointerleave",
                        this.onPointerOut,
                        this._eventListenerOptions
                      ),
                      this.interactionDOMElement.addEventListener(
                        "pointerover",
                        this.onPointerOver,
                        this._eventListenerOptions
                      ),
                      globalThis.addEventListener(
                        "pointercancel",
                        this.onPointerCancel,
                        this._eventListenerOptions
                      ),
                      globalThis.addEventListener(
                        "pointerup",
                        this.onPointerUp,
                        this._eventListenerOptions
                      ))
                    : (globalThis.document.addEventListener(
                        "mousemove",
                        this.onPointerMove,
                        this._eventListenerOptions
                      ),
                      this.interactionDOMElement.addEventListener(
                        "mousedown",
                        this.onPointerDown,
                        this._eventListenerOptions
                      ),
                      this.interactionDOMElement.addEventListener(
                        "mouseout",
                        this.onPointerOut,
                        this._eventListenerOptions
                      ),
                      this.interactionDOMElement.addEventListener(
                        "mouseover",
                        this.onPointerOver,
                        this._eventListenerOptions
                      ),
                      globalThis.addEventListener(
                        "mouseup",
                        this.onPointerUp,
                        this._eventListenerOptions
                      )),
                  this.supportsTouchEvents &&
                    (this.interactionDOMElement.addEventListener(
                      "touchstart",
                      this.onPointerDown,
                      this._eventListenerOptions
                    ),
                    this.interactionDOMElement.addEventListener(
                      "touchcancel",
                      this.onPointerCancel,
                      this._eventListenerOptions
                    ),
                    this.interactionDOMElement.addEventListener(
                      "touchend",
                      this.onPointerUp,
                      this._eventListenerOptions
                    ),
                    this.interactionDOMElement.addEventListener(
                      "touchmove",
                      this.onPointerMove,
                      this._eventListenerOptions
                    )),
                  (this.eventsAdded = !0);
              }
            }),
            (e.prototype.removeEvents = function () {
              if (this.eventsAdded && this.interactionDOMElement) {
                var t = this.interactionDOMElement.style;
                globalThis.navigator.msPointerEnabled
                  ? ((t.msContentZooming = ""), (t.msTouchAction = ""))
                  : this.supportsPointerEvents && (t.touchAction = ""),
                  this.supportsPointerEvents
                    ? (globalThis.document.removeEventListener(
                        "pointermove",
                        this.onPointerMove,
                        this._eventListenerOptions
                      ),
                      this.interactionDOMElement.removeEventListener(
                        "pointerdown",
                        this.onPointerDown,
                        this._eventListenerOptions
                      ),
                      this.interactionDOMElement.removeEventListener(
                        "pointerleave",
                        this.onPointerOut,
                        this._eventListenerOptions
                      ),
                      this.interactionDOMElement.removeEventListener(
                        "pointerover",
                        this.onPointerOver,
                        this._eventListenerOptions
                      ),
                      globalThis.removeEventListener(
                        "pointercancel",
                        this.onPointerCancel,
                        this._eventListenerOptions
                      ),
                      globalThis.removeEventListener(
                        "pointerup",
                        this.onPointerUp,
                        this._eventListenerOptions
                      ))
                    : (globalThis.document.removeEventListener(
                        "mousemove",
                        this.onPointerMove,
                        this._eventListenerOptions
                      ),
                      this.interactionDOMElement.removeEventListener(
                        "mousedown",
                        this.onPointerDown,
                        this._eventListenerOptions
                      ),
                      this.interactionDOMElement.removeEventListener(
                        "mouseout",
                        this.onPointerOut,
                        this._eventListenerOptions
                      ),
                      this.interactionDOMElement.removeEventListener(
                        "mouseover",
                        this.onPointerOver,
                        this._eventListenerOptions
                      ),
                      globalThis.removeEventListener(
                        "mouseup",
                        this.onPointerUp,
                        this._eventListenerOptions
                      )),
                  this.supportsTouchEvents &&
                    (this.interactionDOMElement.removeEventListener(
                      "touchstart",
                      this.onPointerDown,
                      this._eventListenerOptions
                    ),
                    this.interactionDOMElement.removeEventListener(
                      "touchcancel",
                      this.onPointerCancel,
                      this._eventListenerOptions
                    ),
                    this.interactionDOMElement.removeEventListener(
                      "touchend",
                      this.onPointerUp,
                      this._eventListenerOptions
                    ),
                    this.interactionDOMElement.removeEventListener(
                      "touchmove",
                      this.onPointerMove,
                      this._eventListenerOptions
                    )),
                  (this.interactionDOMElement = null),
                  (this.eventsAdded = !1);
              }
            }),
            (e.prototype.tickerUpdate = function (t) {
              (this._deltaTime += t),
                this._deltaTime < this.interactionFrequency ||
                  ((this._deltaTime = 0), this.update());
            }),
            (e.prototype.update = function () {
              if (this.interactionDOMElement)
                if (this._didMove) this._didMove = !1;
                else {
                  for (var t in ((this.cursor = null),
                  this.activeInteractionData))
                    if (this.activeInteractionData.hasOwnProperty(t)) {
                      var e = this.activeInteractionData[t];
                      if (e.originalEvent && "touch" !== e.pointerType) {
                        var i = this.configureInteractionEventForDOMEvent(
                          this.eventData,
                          e.originalEvent,
                          e
                        );
                        this.processInteractive(
                          i,
                          this.lastObjectRendered,
                          this.processPointerOverOut,
                          !0
                        );
                      }
                    }
                  this.setCursorMode(this.cursor);
                }
            }),
            (e.prototype.setCursorMode = function (t) {
              t = t || "default";
              var e = !0;
              if (
                (globalThis.OffscreenCanvas &&
                  this.interactionDOMElement instanceof OffscreenCanvas &&
                  (e = !1),
                this.currentCursorMode !== t)
              ) {
                this.currentCursorMode = t;
                var i = this.cursorStyles[t];
                if (i)
                  switch (typeof i) {
                    case "string":
                      e && (this.interactionDOMElement.style.cursor = i);
                      break;
                    case "function":
                      i(t);
                      break;
                    case "object":
                      e && Object.assign(this.interactionDOMElement.style, i);
                  }
                else
                  e &&
                    "string" == typeof t &&
                    !Object.prototype.hasOwnProperty.call(
                      this.cursorStyles,
                      t
                    ) &&
                    (this.interactionDOMElement.style.cursor = t);
              }
            }),
            (e.prototype.dispatchEvent = function (t, e, i) {
              (i.stopPropagationHint && t !== i.stopsPropagatingAt) ||
                ((i.currentTarget = t),
                (i.type = e),
                t.emit(e, i),
                t[e] && t[e](i));
            }),
            (e.prototype.delayDispatchEvent = function (t, e, i) {
              this.delayedEvents.push({
                displayObject: t,
                eventString: e,
                eventData: i,
              });
            }),
            (e.prototype.mapPositionToPoint = function (t, e, i) {
              var r;
              r = this.interactionDOMElement.parentElement
                ? this.interactionDOMElement.getBoundingClientRect()
                : {
                    x: 0,
                    y: 0,
                    width: this.interactionDOMElement.width,
                    height: this.interactionDOMElement.height,
                    left: 0,
                    top: 0,
                  };
              var n = 1 / this.resolution;
              (t.x =
                (e - r.left) *
                (this.interactionDOMElement.width / r.width) *
                n),
                (t.y =
                  (i - r.top) *
                  (this.interactionDOMElement.height / r.height) *
                  n);
            }),
            (e.prototype.processInteractive = function (t, e, i, r) {
              var n = this.search.findHit(t, e, i, r),
                o = this.delayedEvents;
              if (!o.length) return n;
              t.stopPropagationHint = !1;
              var s = o.length;
              this.delayedEvents = [];
              for (var a = 0; a < s; a++) {
                var h = o[a],
                  u = h.displayObject,
                  l = h.eventString,
                  c = h.eventData;
                c.stopsPropagatingAt === u && (c.stopPropagationHint = !0),
                  this.dispatchEvent(u, l, c);
              }
              return n;
            }),
            (e.prototype.onPointerDown = function (t) {
              if (!this.supportsTouchEvents || "touch" !== t.pointerType) {
                var e = this.normalizeToPointerData(t);
                this.autoPreventDefault &&
                  e[0].isNormalized &&
                  (t.cancelable || !("cancelable" in t)) &&
                  t.preventDefault();
                for (var i = e.length, r = 0; r < i; r++) {
                  var n = e[r],
                    o = this.getInteractionDataForPointerId(n),
                    s = this.configureInteractionEventForDOMEvent(
                      this.eventData,
                      n,
                      o
                    );
                  if (
                    ((s.data.originalEvent = t),
                    this.processInteractive(
                      s,
                      this.lastObjectRendered,
                      this.processPointerDown,
                      !0
                    ),
                    this.emit("pointerdown", s),
                    "touch" === n.pointerType)
                  )
                    this.emit("touchstart", s);
                  else if (
                    "mouse" === n.pointerType ||
                    "pen" === n.pointerType
                  ) {
                    var a = 2 === n.button;
                    this.emit(a ? "rightdown" : "mousedown", this.eventData);
                  }
                }
              }
            }),
            (e.prototype.processPointerDown = function (t, e, i) {
              var r = t.data,
                n = t.data.identifier;
              if (i)
                if (
                  (e.trackedPointers[n] || (e.trackedPointers[n] = new zr(n)),
                  this.dispatchEvent(e, "pointerdown", t),
                  "touch" === r.pointerType)
                )
                  this.dispatchEvent(e, "touchstart", t);
                else if ("mouse" === r.pointerType || "pen" === r.pointerType) {
                  var o = 2 === r.button;
                  o
                    ? (e.trackedPointers[n].rightDown = !0)
                    : (e.trackedPointers[n].leftDown = !0),
                    this.dispatchEvent(e, o ? "rightdown" : "mousedown", t);
                }
            }),
            (e.prototype.onPointerComplete = function (t, e, i) {
              var r = this.normalizeToPointerData(t),
                n = r.length,
                o = t.target;
              t.composedPath &&
                t.composedPath().length > 0 &&
                (o = t.composedPath()[0]);
              for (
                var s = o !== this.interactionDOMElement ? "outside" : "",
                  a = 0;
                a < n;
                a++
              ) {
                var h = r[a],
                  u = this.getInteractionDataForPointerId(h),
                  l = this.configureInteractionEventForDOMEvent(
                    this.eventData,
                    h,
                    u
                  );
                if (
                  ((l.data.originalEvent = t),
                  this.processInteractive(
                    l,
                    this.lastObjectRendered,
                    i,
                    e || !s
                  ),
                  this.emit(e ? "pointercancel" : "pointerup" + s, l),
                  "mouse" === h.pointerType || "pen" === h.pointerType)
                ) {
                  var c = 2 === h.button;
                  this.emit(c ? "rightup" + s : "mouseup" + s, l);
                } else
                  "touch" === h.pointerType &&
                    (this.emit(e ? "touchcancel" : "touchend" + s, l),
                    this.releaseInteractionDataForPointerId(h.pointerId));
              }
            }),
            (e.prototype.onPointerCancel = function (t) {
              (this.supportsTouchEvents && "touch" === t.pointerType) ||
                this.onPointerComplete(t, !0, this.processPointerCancel);
            }),
            (e.prototype.processPointerCancel = function (t, e) {
              var i = t.data,
                r = t.data.identifier;
              void 0 !== e.trackedPointers[r] &&
                (delete e.trackedPointers[r],
                this.dispatchEvent(e, "pointercancel", t),
                "touch" === i.pointerType &&
                  this.dispatchEvent(e, "touchcancel", t));
            }),
            (e.prototype.onPointerUp = function (t) {
              (this.supportsTouchEvents && "touch" === t.pointerType) ||
                this.onPointerComplete(t, !1, this.processPointerUp);
            }),
            (e.prototype.processPointerUp = function (t, e, i) {
              var r = t.data,
                n = t.data.identifier,
                o = e.trackedPointers[n],
                s = "touch" === r.pointerType,
                a = "mouse" === r.pointerType || "pen" === r.pointerType,
                h = !1;
              if (a) {
                var u = 2 === r.button,
                  l = zr.FLAGS,
                  c = u ? l.RIGHT_DOWN : l.LEFT_DOWN,
                  d = void 0 !== o && o.flags & c;
                i
                  ? (this.dispatchEvent(e, u ? "rightup" : "mouseup", t),
                    d &&
                      (this.dispatchEvent(e, u ? "rightclick" : "click", t),
                      (h = !0)))
                  : d &&
                    this.dispatchEvent(
                      e,
                      u ? "rightupoutside" : "mouseupoutside",
                      t
                    ),
                  o && (u ? (o.rightDown = !1) : (o.leftDown = !1));
              }
              i
                ? (this.dispatchEvent(e, "pointerup", t),
                  s && this.dispatchEvent(e, "touchend", t),
                  o &&
                    ((a && !h) || this.dispatchEvent(e, "pointertap", t),
                    s && (this.dispatchEvent(e, "tap", t), (o.over = !1))))
                : o &&
                  (this.dispatchEvent(e, "pointerupoutside", t),
                  s && this.dispatchEvent(e, "touchendoutside", t)),
                o && o.none && delete e.trackedPointers[n];
            }),
            (e.prototype.onPointerMove = function (t) {
              if (!this.supportsTouchEvents || "touch" !== t.pointerType) {
                var e = this.normalizeToPointerData(t);
                ("mouse" !== e[0].pointerType && "pen" !== e[0].pointerType) ||
                  ((this._didMove = !0), (this.cursor = null));
                for (var i = e.length, r = 0; r < i; r++) {
                  var n = e[r],
                    o = this.getInteractionDataForPointerId(n),
                    s = this.configureInteractionEventForDOMEvent(
                      this.eventData,
                      n,
                      o
                    );
                  (s.data.originalEvent = t),
                    this.processInteractive(
                      s,
                      this.lastObjectRendered,
                      this.processPointerMove,
                      !0
                    ),
                    this.emit("pointermove", s),
                    "touch" === n.pointerType && this.emit("touchmove", s),
                    ("mouse" !== n.pointerType && "pen" !== n.pointerType) ||
                      this.emit("mousemove", s);
                }
                "mouse" === e[0].pointerType && this.setCursorMode(this.cursor);
              }
            }),
            (e.prototype.processPointerMove = function (t, e, i) {
              var r = t.data,
                n = "touch" === r.pointerType,
                o = "mouse" === r.pointerType || "pen" === r.pointerType;
              o && this.processPointerOverOut(t, e, i),
                (this.moveWhenInside && !i) ||
                  (this.dispatchEvent(e, "pointermove", t),
                  n && this.dispatchEvent(e, "touchmove", t),
                  o && this.dispatchEvent(e, "mousemove", t));
            }),
            (e.prototype.onPointerOut = function (t) {
              if (!this.supportsTouchEvents || "touch" !== t.pointerType) {
                var e = this.normalizeToPointerData(t)[0];
                "mouse" === e.pointerType &&
                  ((this.mouseOverRenderer = !1), this.setCursorMode(null));
                var i = this.getInteractionDataForPointerId(e),
                  r = this.configureInteractionEventForDOMEvent(
                    this.eventData,
                    e,
                    i
                  );
                (r.data.originalEvent = e),
                  this.processInteractive(
                    r,
                    this.lastObjectRendered,
                    this.processPointerOverOut,
                    !1
                  ),
                  this.emit("pointerout", r),
                  "mouse" === e.pointerType || "pen" === e.pointerType
                    ? this.emit("mouseout", r)
                    : this.releaseInteractionDataForPointerId(i.identifier);
              }
            }),
            (e.prototype.processPointerOverOut = function (t, e, i) {
              var r = t.data,
                n = t.data.identifier,
                o = "mouse" === r.pointerType || "pen" === r.pointerType,
                s = e.trackedPointers[n];
              i && !s && (s = e.trackedPointers[n] = new zr(n)),
                void 0 !== s &&
                  (i && this.mouseOverRenderer
                    ? (s.over ||
                        ((s.over = !0),
                        this.delayDispatchEvent(e, "pointerover", t),
                        o && this.delayDispatchEvent(e, "mouseover", t)),
                      o && null === this.cursor && (this.cursor = e.cursor))
                    : s.over &&
                      ((s.over = !1),
                      this.dispatchEvent(e, "pointerout", this.eventData),
                      o && this.dispatchEvent(e, "mouseout", t),
                      s.none && delete e.trackedPointers[n]));
            }),
            (e.prototype.onPointerOver = function (t) {
              if (!this.supportsTouchEvents || "touch" !== t.pointerType) {
                var e = this.normalizeToPointerData(t)[0],
                  i = this.getInteractionDataForPointerId(e),
                  r = this.configureInteractionEventForDOMEvent(
                    this.eventData,
                    e,
                    i
                  );
                (r.data.originalEvent = e),
                  "mouse" === e.pointerType && (this.mouseOverRenderer = !0),
                  this.emit("pointerover", r),
                  ("mouse" !== e.pointerType && "pen" !== e.pointerType) ||
                    this.emit("mouseover", r);
              }
            }),
            (e.prototype.getInteractionDataForPointerId = function (t) {
              var e,
                i = t.pointerId;
              return (
                1 === i || "mouse" === t.pointerType
                  ? (e = this.mouse)
                  : this.activeInteractionData[i]
                  ? (e = this.activeInteractionData[i])
                  : (((e =
                      this.interactionDataPool.pop() || new Gr()).identifier =
                      i),
                    (this.activeInteractionData[i] = e)),
                e.copyEvent(t),
                e
              );
            }),
            (e.prototype.releaseInteractionDataForPointerId = function (t) {
              var e = this.activeInteractionData[t];
              e &&
                (delete this.activeInteractionData[t],
                e.reset(),
                this.interactionDataPool.push(e));
            }),
            (e.prototype.configureInteractionEventForDOMEvent = function (
              t,
              e,
              i
            ) {
              return (
                (t.data = i),
                this.mapPositionToPoint(i.global, e.clientX, e.clientY),
                "touch" === e.pointerType &&
                  ((e.globalX = i.global.x), (e.globalY = i.global.y)),
                (i.originalEvent = e),
                t.reset(),
                t
              );
            }),
            (e.prototype.normalizeToPointerData = function (t) {
              var e = [];
              if (this.supportsTouchEvents && t instanceof TouchEvent)
                for (var i = 0, r = t.changedTouches.length; i < r; i++) {
                  var n = t.changedTouches[i];
                  void 0 === n.button && (n.button = t.touches.length ? 1 : 0),
                    void 0 === n.buttons &&
                      (n.buttons = t.touches.length ? 1 : 0),
                    void 0 === n.isPrimary &&
                      (n.isPrimary =
                        1 === t.touches.length && "touchstart" === t.type),
                    void 0 === n.width && (n.width = n.radiusX || 1),
                    void 0 === n.height && (n.height = n.radiusY || 1),
                    void 0 === n.tiltX && (n.tiltX = 0),
                    void 0 === n.tiltY && (n.tiltY = 0),
                    void 0 === n.pointerType && (n.pointerType = "touch"),
                    void 0 === n.pointerId && (n.pointerId = n.identifier || 0),
                    void 0 === n.pressure && (n.pressure = n.force || 0.5),
                    void 0 === n.twist && (n.twist = 0),
                    void 0 === n.tangentialPressure &&
                      (n.tangentialPressure = 0),
                    void 0 === n.layerX && (n.layerX = n.offsetX = n.clientX),
                    void 0 === n.layerY && (n.layerY = n.offsetY = n.clientY),
                    (n.isNormalized = !0),
                    e.push(n);
                }
              else if (
                !globalThis.MouseEvent ||
                (t instanceof MouseEvent &&
                  !(
                    this.supportsPointerEvents &&
                    t instanceof globalThis.PointerEvent
                  ))
              ) {
                var o = t;
                void 0 === o.isPrimary && (o.isPrimary = !0),
                  void 0 === o.width && (o.width = 1),
                  void 0 === o.height && (o.height = 1),
                  void 0 === o.tiltX && (o.tiltX = 0),
                  void 0 === o.tiltY && (o.tiltY = 0),
                  void 0 === o.pointerType && (o.pointerType = "mouse"),
                  void 0 === o.pointerId && (o.pointerId = 1),
                  void 0 === o.pressure && (o.pressure = 0.5),
                  void 0 === o.twist && (o.twist = 0),
                  void 0 === o.tangentialPressure && (o.tangentialPressure = 0),
                  (o.isNormalized = !0),
                  e.push(o);
              } else e.push(t);
              return e;
            }),
            (e.prototype.destroy = function () {
              this.removeEvents(),
                this.removeTickerListener(),
                this.removeAllListeners(),
                (this.renderer = null),
                (this.mouse = null),
                (this.eventData = null),
                (this.interactionDOMElement = null),
                (this.onPointerDown = null),
                (this.processPointerDown = null),
                (this.onPointerUp = null),
                (this.processPointerUp = null),
                (this.onPointerCancel = null),
                (this.processPointerCancel = null),
                (this.onPointerMove = null),
                (this.processPointerMove = null),
                (this.onPointerOut = null),
                (this.processPointerOverOut = null),
                (this.onPointerOver = null),
                (this.search = null);
            }),
            (e.extension = {
              name: "interaction",
              type: [de.RendererPlugin, de.CanvasRendererPlugin],
            }),
            e
          );
        })(ot),
        qr = new zt(),
        $r = (function () {
          function t(t) {
            this.renderer = t;
          }
          return (
            (t.prototype.image = function (t, e, i) {
              var r = new Image();
              return (r.src = this.base64(t, e, i)), r;
            }),
            (t.prototype.base64 = function (t, e, i) {
              return this.canvas(t).toDataURL(e, i);
            }),
            (t.prototype.canvas = function (e, i) {
              var r = this._rawPixels(e, i),
                n = r.pixels,
                o = r.width,
                s = r.height,
                a = r.flipY,
                h = new Ft(o, s, 1),
                u = h.context.getImageData(0, 0, o, s);
              if (
                (t.arrayPostDivide(n, u.data),
                h.context.putImageData(u, 0, 0),
                a)
              ) {
                var l = new Ft(h.width, h.height, 1);
                l.context.scale(1, -1),
                  l.context.drawImage(h.canvas, 0, -s),
                  h.destroy(),
                  (h = l);
              }
              return h.canvas;
            }),
            (t.prototype.pixels = function (e, i) {
              var r = this._rawPixels(e, i).pixels;
              return t.arrayPostDivide(r, r), r;
            }),
            (t.prototype._rawPixels = function (t, e) {
              var i,
                r,
                n = this.renderer,
                o = !1,
                s = !1;
              if (t)
                if (t instanceof We) r = t;
                else {
                  var a = n.context.webGLVersion >= 2 ? n.multisample : k.NONE;
                  if (
                    ((r = this.renderer.generateTexture(t, { multisample: a })),
                    a !== k.NONE)
                  ) {
                    var h = We.create({ width: r.width, height: r.height });
                    n.framebuffer.bind(r.framebuffer),
                      n.framebuffer.blit(h.framebuffer),
                      n.framebuffer.bind(null),
                      r.destroy(!0),
                      (r = h);
                  }
                  s = !0;
                }
              r
                ? ((i = r.baseTexture.resolution),
                  (e = null != e ? e : r.frame),
                  (o = !1),
                  n.renderTexture.bind(r))
                : ((i = n.resolution),
                  e || (((e = qr).width = n.width), (e.height = n.height)),
                  (o = !0),
                  n.renderTexture.bind(null));
              var u = Math.round(e.width * i),
                l = Math.round(e.height * i),
                c = new Uint8Array(4 * u * l),
                d = n.gl;
              return (
                d.readPixels(
                  Math.round(e.x * i),
                  Math.round(e.y * i),
                  u,
                  l,
                  d.RGBA,
                  d.UNSIGNED_BYTE,
                  c
                ),
                s && r.destroy(!0),
                { pixels: c, width: u, height: l, flipY: o }
              );
            }),
            (t.prototype.destroy = function () {
              this.renderer = null;
            }),
            (t.arrayPostDivide = function (t, e) {
              for (var i = 0; i < t.length; i += 4) {
                var r = (e[i + 3] = t[i + 3]);
                0 !== r
                  ? ((e[i] = Math.round(Math.min((255 * t[i]) / r, 255))),
                    (e[i + 1] = Math.round(
                      Math.min((255 * t[i + 1]) / r, 255)
                    )),
                    (e[i + 2] = Math.round(
                      Math.min((255 * t[i + 2]) / r, 255)
                    )))
                  : ((e[i] = t[i]),
                    (e[i + 1] = t[i + 1]),
                    (e[i + 2] = t[i + 2]));
              }
            }),
            (t.extension = { name: "extract", type: de.RendererPlugin }),
            t
          );
        })(),
        Kr = (function () {
          function t(t, e, i) {
            void 0 === e && (e = !1),
              (this._fn = t),
              (this._once = e),
              (this._thisArg = i),
              (this._next = this._prev = this._owner = null);
          }
          return (
            (t.prototype.detach = function () {
              return null !== this._owner && (this._owner.detach(this), !0);
            }),
            t
          );
        })();
      function Jr(t, e) {
        return (
          t._head
            ? ((t._tail._next = e), (e._prev = t._tail), (t._tail = e))
            : ((t._head = e), (t._tail = e)),
          (e._owner = t),
          e
        );
      }
      var Zr,
        Qr = (function () {
          function t() {
            this._head = this._tail = void 0;
          }
          return (
            (t.prototype.handlers = function (t) {
              void 0 === t && (t = !1);
              var e = this._head;
              if (t) return !!e;
              for (var i = []; e; ) i.push(e), (e = e._next);
              return i;
            }),
            (t.prototype.has = function (t) {
              if (!(t instanceof Kr))
                throw new Error(
                  "MiniSignal#has(): First arg must be a SignalBinding object."
                );
              return t._owner === this;
            }),
            (t.prototype.dispatch = function () {
              for (var t = arguments, e = [], i = 0; i < arguments.length; i++)
                e[i] = t[i];
              var r = this._head;
              if (!r) return !1;
              for (; r; )
                r._once && this.detach(r),
                  r._fn.apply(r._thisArg, e),
                  (r = r._next);
              return !0;
            }),
            (t.prototype.add = function (t, e) {
              if ((void 0 === e && (e = null), "function" != typeof t))
                throw new Error(
                  "MiniSignal#add(): First arg must be a Function."
                );
              return Jr(this, new Kr(t, !1, e));
            }),
            (t.prototype.once = function (t, e) {
              if ((void 0 === e && (e = null), "function" != typeof t))
                throw new Error(
                  "MiniSignal#once(): First arg must be a Function."
                );
              return Jr(this, new Kr(t, !0, e));
            }),
            (t.prototype.detach = function (t) {
              if (!(t instanceof Kr))
                throw new Error(
                  "MiniSignal#detach(): First arg must be a SignalBinding object."
                );
              return (
                t._owner !== this ||
                  (t._prev && (t._prev._next = t._next),
                  t._next && (t._next._prev = t._prev),
                  t === this._head
                    ? ((this._head = t._next),
                      null === t._next && (this._tail = null))
                    : t === this._tail &&
                      ((this._tail = t._prev), (this._tail._next = null)),
                  (t._owner = null)),
                this
              );
            }),
            (t.prototype.detachAll = function () {
              var t = this._head;
              if (!t) return this;
              for (this._head = this._tail = null; t; )
                (t._owner = null), (t = t._next);
              return this;
            }),
            t
          );
        })();
      function tn(t, e) {
        e = e || {};
        for (
          var i = {
              key: [
                "source",
                "protocol",
                "authority",
                "userInfo",
                "user",
                "password",
                "host",
                "port",
                "relative",
                "path",
                "directory",
                "file",
                "query",
                "anchor",
              ],
              q: { name: "queryKey", parser: /(?:^|&)([^&=]*)=?([^&]*)/g },
              parser: {
                strict:
                  /^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
                loose:
                  /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
              },
            },
            r = i.parser[e.strictMode ? "strict" : "loose"].exec(t),
            n = {},
            o = 14;
          o--;

        )
          n[i.key[o]] = r[o] || "";
        return (
          (n[i.q.name] = {}),
          n[i.key[12]].replace(i.q.parser, function (t, e, r) {
            e && (n[i.q.name][e] = r);
          }),
          n
        );
      }
      var en = null;
      function rn() {}
      function nn(t, e, i) {
        e && 0 === e.indexOf(".") && (e = e.substring(1)), e && (t[e] = i);
      }
      function on(t) {
        return t.toString().replace("object ", "");
      }
      var sn = (function () {
        function t(e, i, r) {
          if (
            ((this._dequeue = rn),
            (this._onLoadBinding = null),
            (this._elementTimer = 0),
            (this._boundComplete = null),
            (this._boundOnError = null),
            (this._boundOnProgress = null),
            (this._boundOnTimeout = null),
            (this._boundXhrOnError = null),
            (this._boundXhrOnTimeout = null),
            (this._boundXhrOnAbort = null),
            (this._boundXhrOnLoad = null),
            "string" != typeof e || "string" != typeof i)
          )
            throw new Error(
              "Both name and url are required for constructing a resource."
            );
          (r = r || {}),
            (this._flags = 0),
            this._setFlag(t.STATUS_FLAGS.DATA_URL, 0 === i.indexOf("data:")),
            (this.name = e),
            (this.url = i),
            (this.extension = this._getExtension()),
            (this.data = null),
            (this.crossOrigin =
              !0 === r.crossOrigin ? "anonymous" : r.crossOrigin),
            (this.timeout = r.timeout || 0),
            (this.loadType = r.loadType || this._determineLoadType()),
            (this.xhrType = r.xhrType),
            (this.metadata = r.metadata || {}),
            (this.error = null),
            (this.xhr = null),
            (this.children = []),
            (this.type = t.TYPE.UNKNOWN),
            (this.progressChunk = 0),
            (this._dequeue = rn),
            (this._onLoadBinding = null),
            (this._elementTimer = 0),
            (this._boundComplete = this.complete.bind(this)),
            (this._boundOnError = this._onError.bind(this)),
            (this._boundOnProgress = this._onProgress.bind(this)),
            (this._boundOnTimeout = this._onTimeout.bind(this)),
            (this._boundXhrOnError = this._xhrOnError.bind(this)),
            (this._boundXhrOnTimeout = this._xhrOnTimeout.bind(this)),
            (this._boundXhrOnAbort = this._xhrOnAbort.bind(this)),
            (this._boundXhrOnLoad = this._xhrOnLoad.bind(this)),
            (this.onStart = new Qr()),
            (this.onProgress = new Qr()),
            (this.onComplete = new Qr()),
            (this.onAfterMiddleware = new Qr());
        }
        return (
          (t.setExtensionLoadType = function (e, i) {
            nn(t._loadTypeMap, e, i);
          }),
          (t.setExtensionXhrType = function (e, i) {
            nn(t._xhrTypeMap, e, i);
          }),
          Object.defineProperty(t.prototype, "isDataUrl", {
            get: function () {
              return this._hasFlag(t.STATUS_FLAGS.DATA_URL);
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(t.prototype, "isComplete", {
            get: function () {
              return this._hasFlag(t.STATUS_FLAGS.COMPLETE);
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(t.prototype, "isLoading", {
            get: function () {
              return this._hasFlag(t.STATUS_FLAGS.LOADING);
            },
            enumerable: !1,
            configurable: !0,
          }),
          (t.prototype.complete = function () {
            this._clearEvents(), this._finish();
          }),
          (t.prototype.abort = function (e) {
            if (!this.error) {
              if (((this.error = new Error(e)), this._clearEvents(), this.xhr))
                this.xhr.abort();
              else if (this.xdr) this.xdr.abort();
              else if (this.data)
                if (this.data.src) this.data.src = t.EMPTY_GIF;
                else
                  for (; this.data.firstChild; )
                    this.data.removeChild(this.data.firstChild);
              this._finish();
            }
          }),
          (t.prototype.load = function (e) {
            var i = this;
            if (!this.isLoading)
              if (this.isComplete)
                e &&
                  setTimeout(function () {
                    return e(i);
                  }, 1);
              else
                switch (
                  (e && this.onComplete.once(e),
                  this._setFlag(t.STATUS_FLAGS.LOADING, !0),
                  this.onStart.dispatch(this),
                  (!1 !== this.crossOrigin &&
                    "string" == typeof this.crossOrigin) ||
                    (this.crossOrigin = this._determineCrossOrigin(this.url)),
                  this.loadType)
                ) {
                  case t.LOAD_TYPE.IMAGE:
                    (this.type = t.TYPE.IMAGE), this._loadElement("image");
                    break;
                  case t.LOAD_TYPE.AUDIO:
                    (this.type = t.TYPE.AUDIO),
                      this._loadSourceElement("audio");
                    break;
                  case t.LOAD_TYPE.VIDEO:
                    (this.type = t.TYPE.VIDEO),
                      this._loadSourceElement("video");
                    break;
                  case t.LOAD_TYPE.XHR:
                  default:
                    void 0 === Zr &&
                      (Zr = !(
                        !globalThis.XDomainRequest ||
                        "withCredentials" in new XMLHttpRequest()
                      )),
                      Zr && this.crossOrigin
                        ? this._loadXdr()
                        : this._loadXhr();
                }
          }),
          (t.prototype._hasFlag = function (t) {
            return !!(this._flags & t);
          }),
          (t.prototype._setFlag = function (t, e) {
            this._flags = e ? this._flags | t : this._flags & ~t;
          }),
          (t.prototype._clearEvents = function () {
            clearTimeout(this._elementTimer),
              this.data &&
                this.data.removeEventListener &&
                (this.data.removeEventListener("error", this._boundOnError, !1),
                this.data.removeEventListener("load", this._boundComplete, !1),
                this.data.removeEventListener(
                  "progress",
                  this._boundOnProgress,
                  !1
                ),
                this.data.removeEventListener(
                  "canplaythrough",
                  this._boundComplete,
                  !1
                )),
              this.xhr &&
                (this.xhr.removeEventListener
                  ? (this.xhr.removeEventListener(
                      "error",
                      this._boundXhrOnError,
                      !1
                    ),
                    this.xhr.removeEventListener(
                      "timeout",
                      this._boundXhrOnTimeout,
                      !1
                    ),
                    this.xhr.removeEventListener(
                      "abort",
                      this._boundXhrOnAbort,
                      !1
                    ),
                    this.xhr.removeEventListener(
                      "progress",
                      this._boundOnProgress,
                      !1
                    ),
                    this.xhr.removeEventListener(
                      "load",
                      this._boundXhrOnLoad,
                      !1
                    ))
                  : ((this.xhr.onerror = null),
                    (this.xhr.ontimeout = null),
                    (this.xhr.onprogress = null),
                    (this.xhr.onload = null)));
          }),
          (t.prototype._finish = function () {
            if (this.isComplete)
              throw new Error(
                "Complete called again for an already completed resource."
              );
            this._setFlag(t.STATUS_FLAGS.COMPLETE, !0),
              this._setFlag(t.STATUS_FLAGS.LOADING, !1),
              this.onComplete.dispatch(this);
          }),
          (t.prototype._loadElement = function (t) {
            this.metadata.loadElement
              ? (this.data = this.metadata.loadElement)
              : "image" === t && void 0 !== globalThis.Image
              ? (this.data = new Image())
              : (this.data = document.createElement(t)),
              this.crossOrigin && (this.data.crossOrigin = this.crossOrigin),
              this.metadata.skipSource || (this.data.src = this.url),
              this.data.addEventListener("error", this._boundOnError, !1),
              this.data.addEventListener("load", this._boundComplete, !1),
              this.data.addEventListener("progress", this._boundOnProgress, !1),
              this.timeout &&
                (this._elementTimer = setTimeout(
                  this._boundOnTimeout,
                  this.timeout
                ));
          }),
          (t.prototype._loadSourceElement = function (t) {
            if (
              (this.metadata.loadElement
                ? (this.data = this.metadata.loadElement)
                : "audio" === t && void 0 !== globalThis.Audio
                ? (this.data = new Audio())
                : (this.data = document.createElement(t)),
              null !== this.data)
            ) {
              if (
                (this.crossOrigin && (this.data.crossOrigin = this.crossOrigin),
                !this.metadata.skipSource)
              )
                if (navigator.isCocoonJS)
                  this.data.src = Array.isArray(this.url)
                    ? this.url[0]
                    : this.url;
                else if (Array.isArray(this.url))
                  for (
                    var e = this.metadata.mimeType, i = 0;
                    i < this.url.length;
                    ++i
                  )
                    this.data.appendChild(
                      this._createSource(
                        t,
                        this.url[i],
                        Array.isArray(e) ? e[i] : e
                      )
                    );
                else
                  (e = this.metadata.mimeType),
                    this.data.appendChild(
                      this._createSource(
                        t,
                        this.url,
                        Array.isArray(e) ? e[0] : e
                      )
                    );
              this.data.addEventListener("error", this._boundOnError, !1),
                this.data.addEventListener("load", this._boundComplete, !1),
                this.data.addEventListener(
                  "progress",
                  this._boundOnProgress,
                  !1
                ),
                this.data.addEventListener(
                  "canplaythrough",
                  this._boundComplete,
                  !1
                ),
                this.data.load(),
                this.timeout &&
                  (this._elementTimer = setTimeout(
                    this._boundOnTimeout,
                    this.timeout
                  ));
            } else this.abort("Unsupported element: " + t);
          }),
          (t.prototype._loadXhr = function () {
            "string" != typeof this.xhrType &&
              (this.xhrType = this._determineXhrType());
            var e = (this.xhr = new XMLHttpRequest());
            "use-credentials" === this.crossOrigin && (e.withCredentials = !0),
              e.open("GET", this.url, !0),
              (e.timeout = this.timeout),
              this.xhrType === t.XHR_RESPONSE_TYPE.JSON ||
              this.xhrType === t.XHR_RESPONSE_TYPE.DOCUMENT
                ? (e.responseType = t.XHR_RESPONSE_TYPE.TEXT)
                : (e.responseType = this.xhrType),
              e.addEventListener("error", this._boundXhrOnError, !1),
              e.addEventListener("timeout", this._boundXhrOnTimeout, !1),
              e.addEventListener("abort", this._boundXhrOnAbort, !1),
              e.addEventListener("progress", this._boundOnProgress, !1),
              e.addEventListener("load", this._boundXhrOnLoad, !1),
              e.send();
          }),
          (t.prototype._loadXdr = function () {
            "string" != typeof this.xhrType &&
              (this.xhrType = this._determineXhrType());
            var t = (this.xhr = new globalThis.XDomainRequest());
            (t.timeout = this.timeout || 5e3),
              (t.onerror = this._boundXhrOnError),
              (t.ontimeout = this._boundXhrOnTimeout),
              (t.onprogress = this._boundOnProgress),
              (t.onload = this._boundXhrOnLoad),
              t.open("GET", this.url, !0),
              setTimeout(function () {
                return t.send();
              }, 1);
          }),
          (t.prototype._createSource = function (t, e, i) {
            i || (i = t + "/" + this._getExtension(e));
            var r = document.createElement("source");
            return (r.src = e), (r.type = i), r;
          }),
          (t.prototype._onError = function (t) {
            this.abort("Failed to load element using: " + t.target.nodeName);
          }),
          (t.prototype._onProgress = function (t) {
            t &&
              t.lengthComputable &&
              this.onProgress.dispatch(this, t.loaded / t.total);
          }),
          (t.prototype._onTimeout = function () {
            this.abort("Load timed out.");
          }),
          (t.prototype._xhrOnError = function () {
            var t = this.xhr;
            this.abort(
              on(t) +
                " Request failed. Status: " +
                t.status +
                ', text: "' +
                t.statusText +
                '"'
            );
          }),
          (t.prototype._xhrOnTimeout = function () {
            var t = this.xhr;
            this.abort(on(t) + " Request timed out.");
          }),
          (t.prototype._xhrOnAbort = function () {
            var t = this.xhr;
            this.abort(on(t) + " Request was aborted by the user.");
          }),
          (t.prototype._xhrOnLoad = function () {
            var e = this.xhr,
              i = "",
              r = void 0 === e.status ? 200 : e.status;
            if (
              (("" !== e.responseType &&
                "text" !== e.responseType &&
                void 0 !== e.responseType) ||
                (i = e.responseText),
              0 === r &&
              (i.length > 0 || e.responseType === t.XHR_RESPONSE_TYPE.BUFFER)
                ? (r = 200)
                : 1223 === r && (r = 204),
              2 == ((r / 100) | 0))
            ) {
              if (this.xhrType === t.XHR_RESPONSE_TYPE.TEXT)
                (this.data = i), (this.type = t.TYPE.TEXT);
              else if (this.xhrType === t.XHR_RESPONSE_TYPE.JSON)
                try {
                  (this.data = JSON.parse(i)), (this.type = t.TYPE.JSON);
                } catch (t) {
                  return void this.abort(
                    "Error trying to parse loaded json: " + t
                  );
                }
              else if (this.xhrType === t.XHR_RESPONSE_TYPE.DOCUMENT)
                try {
                  if (globalThis.DOMParser) {
                    var n = new DOMParser();
                    this.data = n.parseFromString(i, "text/xml");
                  } else {
                    var o = document.createElement("div");
                    (o.innerHTML = i), (this.data = o);
                  }
                  this.type = t.TYPE.XML;
                } catch (t) {
                  return void this.abort(
                    "Error trying to parse loaded xml: " + t
                  );
                }
              else this.data = e.response || i;
              this.complete();
            } else
              this.abort(
                "[" + e.status + "] " + e.statusText + ": " + e.responseURL
              );
          }),
          (t.prototype._determineCrossOrigin = function (t, e) {
            if (0 === t.indexOf("data:")) return "";
            if (globalThis.origin !== globalThis.location.origin)
              return "anonymous";
            (e = e || globalThis.location),
              en || (en = document.createElement("a")),
              (en.href = t);
            var i = tn(en.href, { strictMode: !0 }),
              r = (!i.port && "" === e.port) || i.port === e.port,
              n = i.protocol ? i.protocol + ":" : "";
            return i.host === e.hostname && r && n === e.protocol
              ? ""
              : "anonymous";
          }),
          (t.prototype._determineXhrType = function () {
            return t._xhrTypeMap[this.extension] || t.XHR_RESPONSE_TYPE.TEXT;
          }),
          (t.prototype._determineLoadType = function () {
            return t._loadTypeMap[this.extension] || t.LOAD_TYPE.XHR;
          }),
          (t.prototype._getExtension = function (t) {
            void 0 === t && (t = this.url);
            var e = "";
            if (this.isDataUrl) {
              var i = t.indexOf("/");
              e = t.substring(i + 1, t.indexOf(";", i));
            } else {
              var r = t.indexOf("?"),
                n = t.indexOf("#"),
                o = Math.min(r > -1 ? r : t.length, n > -1 ? n : t.length);
              e = (t = t.substring(0, o)).substring(t.lastIndexOf(".") + 1);
            }
            return e.toLowerCase();
          }),
          (t.prototype._getMimeFromXhrType = function (e) {
            switch (e) {
              case t.XHR_RESPONSE_TYPE.BUFFER:
                return "application/octet-binary";
              case t.XHR_RESPONSE_TYPE.BLOB:
                return "application/blob";
              case t.XHR_RESPONSE_TYPE.DOCUMENT:
                return "application/xml";
              case t.XHR_RESPONSE_TYPE.JSON:
                return "application/json";
              case t.XHR_RESPONSE_TYPE.DEFAULT:
              case t.XHR_RESPONSE_TYPE.TEXT:
              default:
                return "text/plain";
            }
          }),
          t
        );
      })();
      function an() {}
      function hn(t) {
        return function () {
          for (var e = arguments, i = [], r = 0; r < arguments.length; r++)
            i[r] = e[r];
          if (null === t) throw new Error("Callback was already called.");
          var n = t;
          (t = null), n.apply(this, i);
        };
      }
      !(function (t) {
        var e, i, r, n;
        ((e = t.STATUS_FLAGS || (t.STATUS_FLAGS = {}))[(e.NONE = 0)] = "NONE"),
          (e[(e.DATA_URL = 1)] = "DATA_URL"),
          (e[(e.COMPLETE = 2)] = "COMPLETE"),
          (e[(e.LOADING = 4)] = "LOADING"),
          ((i = t.TYPE || (t.TYPE = {}))[(i.UNKNOWN = 0)] = "UNKNOWN"),
          (i[(i.JSON = 1)] = "JSON"),
          (i[(i.XML = 2)] = "XML"),
          (i[(i.IMAGE = 3)] = "IMAGE"),
          (i[(i.AUDIO = 4)] = "AUDIO"),
          (i[(i.VIDEO = 5)] = "VIDEO"),
          (i[(i.TEXT = 6)] = "TEXT"),
          ((r = t.LOAD_TYPE || (t.LOAD_TYPE = {}))[(r.XHR = 1)] = "XHR"),
          (r[(r.IMAGE = 2)] = "IMAGE"),
          (r[(r.AUDIO = 3)] = "AUDIO"),
          (r[(r.VIDEO = 4)] = "VIDEO"),
          ((n = t.XHR_RESPONSE_TYPE || (t.XHR_RESPONSE_TYPE = {})).DEFAULT =
            "text"),
          (n.BUFFER = "arraybuffer"),
          (n.BLOB = "blob"),
          (n.DOCUMENT = "document"),
          (n.JSON = "json"),
          (n.TEXT = "text"),
          (t._loadTypeMap = {
            gif: t.LOAD_TYPE.IMAGE,
            png: t.LOAD_TYPE.IMAGE,
            bmp: t.LOAD_TYPE.IMAGE,
            jpg: t.LOAD_TYPE.IMAGE,
            jpeg: t.LOAD_TYPE.IMAGE,
            tif: t.LOAD_TYPE.IMAGE,
            tiff: t.LOAD_TYPE.IMAGE,
            webp: t.LOAD_TYPE.IMAGE,
            tga: t.LOAD_TYPE.IMAGE,
            avif: t.LOAD_TYPE.IMAGE,
            svg: t.LOAD_TYPE.IMAGE,
            "svg+xml": t.LOAD_TYPE.IMAGE,
            mp3: t.LOAD_TYPE.AUDIO,
            ogg: t.LOAD_TYPE.AUDIO,
            wav: t.LOAD_TYPE.AUDIO,
            mp4: t.LOAD_TYPE.VIDEO,
            webm: t.LOAD_TYPE.VIDEO,
          }),
          (t._xhrTypeMap = {
            xhtml: t.XHR_RESPONSE_TYPE.DOCUMENT,
            html: t.XHR_RESPONSE_TYPE.DOCUMENT,
            htm: t.XHR_RESPONSE_TYPE.DOCUMENT,
            xml: t.XHR_RESPONSE_TYPE.DOCUMENT,
            tmx: t.XHR_RESPONSE_TYPE.DOCUMENT,
            svg: t.XHR_RESPONSE_TYPE.DOCUMENT,
            tsx: t.XHR_RESPONSE_TYPE.DOCUMENT,
            gif: t.XHR_RESPONSE_TYPE.BLOB,
            png: t.XHR_RESPONSE_TYPE.BLOB,
            bmp: t.XHR_RESPONSE_TYPE.BLOB,
            jpg: t.XHR_RESPONSE_TYPE.BLOB,
            jpeg: t.XHR_RESPONSE_TYPE.BLOB,
            tif: t.XHR_RESPONSE_TYPE.BLOB,
            tiff: t.XHR_RESPONSE_TYPE.BLOB,
            webp: t.XHR_RESPONSE_TYPE.BLOB,
            tga: t.XHR_RESPONSE_TYPE.BLOB,
            avif: t.XHR_RESPONSE_TYPE.BLOB,
            json: t.XHR_RESPONSE_TYPE.JSON,
            text: t.XHR_RESPONSE_TYPE.TEXT,
            txt: t.XHR_RESPONSE_TYPE.TEXT,
            ttf: t.XHR_RESPONSE_TYPE.BUFFER,
            otf: t.XHR_RESPONSE_TYPE.BUFFER,
          }),
          (t.EMPTY_GIF =
            "data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==");
      })(sn || (sn = {}));
      var un = function (t, e) {
          (this.data = t), (this.callback = e);
        },
        ln = (function () {
          function t(t, e) {
            var i = this;
            if (
              (void 0 === e && (e = 1),
              (this.workers = 0),
              (this.saturated = an),
              (this.unsaturated = an),
              (this.empty = an),
              (this.drain = an),
              (this.error = an),
              (this.started = !1),
              (this.paused = !1),
              (this._tasks = []),
              (this._insert = function (t, e, r) {
                if (r && "function" != typeof r)
                  throw new Error("task callback must be a function");
                if (((i.started = !0), null == t && i.idle()))
                  setTimeout(function () {
                    return i.drain();
                  }, 1);
                else {
                  var n = new un(t, "function" == typeof r ? r : an);
                  e ? i._tasks.unshift(n) : i._tasks.push(n),
                    setTimeout(i.process, 1);
                }
              }),
              (this.process = function () {
                for (
                  ;
                  !i.paused && i.workers < i.concurrency && i._tasks.length;

                ) {
                  var t = i._tasks.shift();
                  0 === i._tasks.length && i.empty(),
                    (i.workers += 1),
                    i.workers === i.concurrency && i.saturated(),
                    i._worker(t.data, hn(i._next(t)));
                }
              }),
              (this._worker = t),
              0 === e)
            )
              throw new Error("Concurrency must not be zero");
            (this.concurrency = e), (this.buffer = e / 4);
          }
          return (
            (t.prototype._next = function (t) {
              var e = this;
              return function () {
                for (
                  var i = arguments, r = [], n = 0;
                  n < arguments.length;
                  n++
                )
                  r[n] = i[n];
                (e.workers -= 1),
                  t.callback.apply(t, r),
                  null != r[0] && e.error(r[0], t.data),
                  e.workers <= e.concurrency - e.buffer && e.unsaturated(),
                  e.idle() && e.drain(),
                  e.process();
              };
            }),
            (t.prototype.push = function (t, e) {
              this._insert(t, !1, e);
            }),
            (t.prototype.kill = function () {
              (this.workers = 0),
                (this.drain = an),
                (this.started = !1),
                (this._tasks = []);
            }),
            (t.prototype.unshift = function (t, e) {
              this._insert(t, !0, e);
            }),
            (t.prototype.length = function () {
              return this._tasks.length;
            }),
            (t.prototype.running = function () {
              return this.workers;
            }),
            (t.prototype.idle = function () {
              return this._tasks.length + this.workers === 0;
            }),
            (t.prototype.pause = function () {
              !0 !== this.paused && (this.paused = !0);
            }),
            (t.prototype.resume = function () {
              if (!1 !== this.paused) {
                this.paused = !1;
                for (var t = 1; t <= this.concurrency; t++) this.process();
              }
            }),
            (t.eachSeries = function (t, e, i, r) {
              var n = 0,
                o = t.length;
              !(function s(a) {
                a || n === o
                  ? i && i(a)
                  : r
                  ? setTimeout(function () {
                      e(t[n++], s);
                    }, 1)
                  : e(t[n++], s);
              })();
            }),
            (t.queue = function (e, i) {
              return new t(e, i);
            }),
            t
          );
        })(),
        cn = /(#[\w-]+)?$/,
        dn = (function () {
          function t(e, i) {
            var r = this;
            void 0 === e && (e = ""),
              void 0 === i && (i = 10),
              (this.progress = 0),
              (this.loading = !1),
              (this.defaultQueryString = ""),
              (this._beforeMiddleware = []),
              (this._afterMiddleware = []),
              (this._resourcesParsing = []),
              (this._boundLoadResource = function (t, e) {
                return r._loadResource(t, e);
              }),
              (this.resources = {}),
              (this.baseUrl = e),
              (this._beforeMiddleware = []),
              (this._afterMiddleware = []),
              (this._resourcesParsing = []),
              (this._boundLoadResource = function (t, e) {
                return r._loadResource(t, e);
              }),
              (this._queue = ln.queue(this._boundLoadResource, i)),
              this._queue.pause(),
              (this.resources = {}),
              (this.onProgress = new Qr()),
              (this.onError = new Qr()),
              (this.onLoad = new Qr()),
              (this.onStart = new Qr()),
              (this.onComplete = new Qr());
            for (var n = 0; n < t._plugins.length; ++n) {
              var o = t._plugins[n],
                s = o.pre,
                a = o.use;
              s && this.pre(s), a && this.use(a);
            }
            this._protected = !1;
          }
          return (
            (t.prototype._add = function (t, e, i, r) {
              if (this.loading && (!i || !i.parentResource))
                throw new Error(
                  "Cannot add resources while the loader is running."
                );
              if (this.resources[t])
                throw new Error('Resource named "' + t + '" already exists.');
              if (
                ((e = this._prepareUrl(e)),
                (this.resources[t] = new sn(t, e, i)),
                "function" == typeof r &&
                  this.resources[t].onAfterMiddleware.once(r),
                this.loading)
              ) {
                for (
                  var n = i.parentResource, o = [], s = 0;
                  s < n.children.length;
                  ++s
                )
                  n.children[s].isComplete || o.push(n.children[s]);
                var a = (n.progressChunk * (o.length + 1)) / (o.length + 2);
                for (
                  n.children.push(this.resources[t]),
                    n.progressChunk = a,
                    s = 0;
                  s < o.length;
                  ++s
                )
                  o[s].progressChunk = a;
                this.resources[t].progressChunk = a;
              }
              return this._queue.push(this.resources[t]), this;
            }),
            (t.prototype.pre = function (t) {
              return this._beforeMiddleware.push(t), this;
            }),
            (t.prototype.use = function (t) {
              return this._afterMiddleware.push(t), this;
            }),
            (t.prototype.reset = function () {
              for (var t in ((this.progress = 0),
              (this.loading = !1),
              this._queue.kill(),
              this._queue.pause(),
              this.resources)) {
                var e = this.resources[t];
                e._onLoadBinding && e._onLoadBinding.detach(),
                  e.isLoading && e.abort("loader reset");
              }
              return (this.resources = {}), this;
            }),
            (t.prototype.load = function (t) {
              if (
                (Bt(
                  "6.5.0",
                  "@pixi/loaders is being replaced with @pixi/assets in the next major release."
                ),
                "function" == typeof t && this.onComplete.once(t),
                this.loading)
              )
                return this;
              if (this._queue.idle()) this._onStart(), this._onComplete();
              else {
                for (
                  var e = 100 / this._queue._tasks.length, i = 0;
                  i < this._queue._tasks.length;
                  ++i
                )
                  this._queue._tasks[i].data.progressChunk = e;
                this._onStart(), this._queue.resume();
              }
              return this;
            }),
            Object.defineProperty(t.prototype, "concurrency", {
              get: function () {
                return this._queue.concurrency;
              },
              set: function (t) {
                this._queue.concurrency = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype._prepareUrl = function (t) {
              var e,
                i = tn(t, { strictMode: !0 });
              if (
                ((e =
                  i.protocol || !i.path || 0 === t.indexOf("//")
                    ? t
                    : this.baseUrl.length &&
                      this.baseUrl.lastIndexOf("/") !==
                        this.baseUrl.length - 1 &&
                      "/" !== t.charAt(0)
                    ? this.baseUrl + "/" + t
                    : this.baseUrl + t),
                this.defaultQueryString)
              ) {
                var r = cn.exec(e)[0];
                -1 !== (e = e.slice(0, e.length - r.length)).indexOf("?")
                  ? (e += "&" + this.defaultQueryString)
                  : (e += "?" + this.defaultQueryString),
                  (e += r);
              }
              return e;
            }),
            (t.prototype._loadResource = function (t, e) {
              var i = this;
              (t._dequeue = e),
                ln.eachSeries(
                  this._beforeMiddleware,
                  function (e, r) {
                    e.call(i, t, function () {
                      r(t.isComplete ? {} : null);
                    });
                  },
                  function () {
                    t.isComplete
                      ? i._onLoad(t)
                      : ((t._onLoadBinding = t.onComplete.once(i._onLoad, i)),
                        t.load());
                  },
                  !0
                );
            }),
            (t.prototype._onStart = function () {
              (this.progress = 0),
                (this.loading = !0),
                this.onStart.dispatch(this);
            }),
            (t.prototype._onComplete = function () {
              (this.progress = 100),
                (this.loading = !1),
                this.onComplete.dispatch(this, this.resources);
            }),
            (t.prototype._onLoad = function (t) {
              var e = this;
              (t._onLoadBinding = null),
                this._resourcesParsing.push(t),
                t._dequeue(),
                ln.eachSeries(
                  this._afterMiddleware,
                  function (i, r) {
                    i.call(e, t, r);
                  },
                  function () {
                    t.onAfterMiddleware.dispatch(t),
                      (e.progress = Math.min(
                        100,
                        e.progress + t.progressChunk
                      )),
                      e.onProgress.dispatch(e, t),
                      t.error
                        ? e.onError.dispatch(t.error, e, t)
                        : e.onLoad.dispatch(e, t),
                      e._resourcesParsing.splice(
                        e._resourcesParsing.indexOf(t),
                        1
                      ),
                      e._queue.idle() &&
                        0 === e._resourcesParsing.length &&
                        e._onComplete();
                  },
                  !0
                );
            }),
            (t.prototype.destroy = function () {
              this._protected || this.reset();
            }),
            Object.defineProperty(t, "shared", {
              get: function () {
                var e = t._shared;
                return (
                  e || (((e = new t())._protected = !0), (t._shared = e)), e
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.registerPlugin = function (e) {
              return (
                Bt(
                  "6.5.0",
                  "Loader.registerPlugin() is deprecated, use extensions.add() instead."
                ),
                me.add({ type: de.Loader, ref: e }),
                t
              );
            }),
            (t._plugins = []),
            t
          );
        })();
      me.handleByList(de.Loader, dn._plugins),
        (dn.prototype.add = function (t, e, i, r) {
          if (Array.isArray(t)) {
            for (var n = 0; n < t.length; ++n) this.add(t[n]);
            return this;
          }
          if (
            ("object" == typeof t &&
              ((i = t),
              (r = e || i.callback || i.onComplete),
              (e = i.url),
              (t = i.name || i.key || i.url)),
            "string" != typeof e && ((r = i), (i = e), (e = t)),
            "string" != typeof e)
          )
            throw new Error("No url passed to add resource to loader.");
          return (
            "function" == typeof i && ((r = i), (i = null)),
            this._add(t, e, i, r)
          );
        });
      var pn = (function () {
          function t() {}
          return (
            (t.init = function (t) {
              (t = Object.assign({ sharedLoader: !1 }, t)),
                (this.loader = t.sharedLoader ? dn.shared : new dn());
            }),
            (t.destroy = function () {
              this.loader && (this.loader.destroy(), (this.loader = null));
            }),
            (t.extension = de.Application),
            t
          );
        })(),
        _n = (function () {
          function t() {}
          return (
            (t.add = function () {
              sn.setExtensionLoadType("svg", sn.LOAD_TYPE.XHR),
                sn.setExtensionXhrType("svg", sn.XHR_RESPONSE_TYPE.TEXT);
            }),
            (t.use = function (t, e) {
              if (
                !t.data ||
                (t.type !== sn.TYPE.IMAGE && "svg" !== t.extension)
              )
                e();
              else {
                var i = t.data,
                  r = t.url,
                  n = t.name,
                  o = t.metadata;
                Ye.fromLoader(i, r, n, o)
                  .then(function (i) {
                    (t.texture = i), e();
                  })
                  .catch(e);
              }
            }),
            (t.extension = de.Loader),
            t
          );
        })();
      function fn(t, e) {
        if (t.data) {
          if (t.xhr && t.xhrType === sn.XHR_RESPONSE_TYPE.BLOB)
            if (self.Blob && "string" != typeof t.data) {
              if (0 === t.data.type.indexOf("image")) {
                var i = globalThis.URL || globalThis.webkitURL,
                  r = i.createObjectURL(t.data);
                return (
                  (t.blob = t.data),
                  (t.data = new Image()),
                  (t.data.src = r),
                  (t.type = sn.TYPE.IMAGE),
                  void (t.data.onload = function () {
                    i.revokeObjectURL(r), (t.data.onload = null), e();
                  })
                );
              }
            } else {
              var n = t.xhr.getResponseHeader("content-type");
              if (n && 0 === n.indexOf("image"))
                return (
                  (t.data = new Image()),
                  (t.data.src =
                    "data:" +
                    n +
                    ";base64," +
                    (function (t) {
                      for (var e = "", i = 0; i < t.length; ) {
                        for (
                          var r = [0, 0, 0], n = [0, 0, 0, 0], o = 0;
                          o < r.length;
                          ++o
                        )
                          i < t.length
                            ? (r[o] = 255 & t.charCodeAt(i++))
                            : (r[o] = 0);
                        switch (
                          ((n[0] = r[0] >> 2),
                          (n[1] = ((3 & r[0]) << 4) | (r[1] >> 4)),
                          (n[2] = ((15 & r[1]) << 2) | (r[2] >> 6)),
                          (n[3] = 63 & r[2]),
                          i - (t.length - 1))
                        ) {
                          case 2:
                            (n[3] = 64), (n[2] = 64);
                            break;
                          case 1:
                            n[3] = 64;
                        }
                        for (o = 0; o < n.length; ++o)
                          e +=
                            "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(
                              n[o]
                            );
                      }
                      return e;
                    })(t.xhr.responseText)),
                  (t.type = sn.TYPE.IMAGE),
                  void (t.data.onload = function () {
                    (t.data.onload = null), e();
                  })
                );
            }
          e();
        } else e();
      }
      var mn,
        yn,
        gn = (function () {
          function t() {}
          return (t.extension = de.Loader), (t.use = fn), t;
        })();
      me.add(_n, gn),
        (function (t) {
          (t[(t.COMPRESSED_RGB_S3TC_DXT1_EXT = 33776)] =
            "COMPRESSED_RGB_S3TC_DXT1_EXT"),
            (t[(t.COMPRESSED_RGBA_S3TC_DXT1_EXT = 33777)] =
              "COMPRESSED_RGBA_S3TC_DXT1_EXT"),
            (t[(t.COMPRESSED_RGBA_S3TC_DXT3_EXT = 33778)] =
              "COMPRESSED_RGBA_S3TC_DXT3_EXT"),
            (t[(t.COMPRESSED_RGBA_S3TC_DXT5_EXT = 33779)] =
              "COMPRESSED_RGBA_S3TC_DXT5_EXT"),
            (t[(t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT = 35917)] =
              "COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT"),
            (t[(t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT = 35918)] =
              "COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT"),
            (t[(t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT = 35919)] =
              "COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT"),
            (t[(t.COMPRESSED_SRGB_S3TC_DXT1_EXT = 35916)] =
              "COMPRESSED_SRGB_S3TC_DXT1_EXT"),
            (t[(t.COMPRESSED_R11_EAC = 37488)] = "COMPRESSED_R11_EAC"),
            (t[(t.COMPRESSED_SIGNED_R11_EAC = 37489)] =
              "COMPRESSED_SIGNED_R11_EAC"),
            (t[(t.COMPRESSED_RG11_EAC = 37490)] = "COMPRESSED_RG11_EAC"),
            (t[(t.COMPRESSED_SIGNED_RG11_EAC = 37491)] =
              "COMPRESSED_SIGNED_RG11_EAC"),
            (t[(t.COMPRESSED_RGB8_ETC2 = 37492)] = "COMPRESSED_RGB8_ETC2"),
            (t[(t.COMPRESSED_RGBA8_ETC2_EAC = 37496)] =
              "COMPRESSED_RGBA8_ETC2_EAC"),
            (t[(t.COMPRESSED_SRGB8_ETC2 = 37493)] = "COMPRESSED_SRGB8_ETC2"),
            (t[(t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC = 37497)] =
              "COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"),
            (t[(t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 37494)] =
              "COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2"),
            (t[(t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 37495)] =
              "COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2"),
            (t[(t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG = 35840)] =
              "COMPRESSED_RGB_PVRTC_4BPPV1_IMG"),
            (t[(t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG = 35842)] =
              "COMPRESSED_RGBA_PVRTC_4BPPV1_IMG"),
            (t[(t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG = 35841)] =
              "COMPRESSED_RGB_PVRTC_2BPPV1_IMG"),
            (t[(t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG = 35843)] =
              "COMPRESSED_RGBA_PVRTC_2BPPV1_IMG"),
            (t[(t.COMPRESSED_RGB_ETC1_WEBGL = 36196)] =
              "COMPRESSED_RGB_ETC1_WEBGL"),
            (t[(t.COMPRESSED_RGB_ATC_WEBGL = 35986)] =
              "COMPRESSED_RGB_ATC_WEBGL"),
            (t[(t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL = 35986)] =
              "COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL"),
            (t[(t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL = 34798)] =
              "COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"),
            (t[(t.COMPRESSED_RGBA_ASTC_4x4_KHR = 37808)] =
              "COMPRESSED_RGBA_ASTC_4x4_KHR");
        })(yn || (yn = {}));
      var vn =
          (((mn = {})[yn.COMPRESSED_RGB_S3TC_DXT1_EXT] = 0.5),
          (mn[yn.COMPRESSED_RGBA_S3TC_DXT1_EXT] = 0.5),
          (mn[yn.COMPRESSED_RGBA_S3TC_DXT3_EXT] = 1),
          (mn[yn.COMPRESSED_RGBA_S3TC_DXT5_EXT] = 1),
          (mn[yn.COMPRESSED_SRGB_S3TC_DXT1_EXT] = 0.5),
          (mn[yn.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT] = 0.5),
          (mn[yn.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT] = 1),
          (mn[yn.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT] = 1),
          (mn[yn.COMPRESSED_R11_EAC] = 0.5),
          (mn[yn.COMPRESSED_SIGNED_R11_EAC] = 0.5),
          (mn[yn.COMPRESSED_RG11_EAC] = 1),
          (mn[yn.COMPRESSED_SIGNED_RG11_EAC] = 1),
          (mn[yn.COMPRESSED_RGB8_ETC2] = 0.5),
          (mn[yn.COMPRESSED_RGBA8_ETC2_EAC] = 1),
          (mn[yn.COMPRESSED_SRGB8_ETC2] = 0.5),
          (mn[yn.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC] = 1),
          (mn[yn.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2] = 0.5),
          (mn[yn.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2] = 0.5),
          (mn[yn.COMPRESSED_RGB_PVRTC_4BPPV1_IMG] = 0.5),
          (mn[yn.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG] = 0.5),
          (mn[yn.COMPRESSED_RGB_PVRTC_2BPPV1_IMG] = 0.25),
          (mn[yn.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG] = 0.25),
          (mn[yn.COMPRESSED_RGB_ETC1_WEBGL] = 0.5),
          (mn[yn.COMPRESSED_RGB_ATC_WEBGL] = 0.5),
          (mn[yn.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL] = 1),
          (mn[yn.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL] = 1),
          (mn[yn.COMPRESSED_RGBA_ASTC_4x4_KHR] = 1),
          mn),
        bn = function (t, e) {
          return (
            (bn =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
              }),
            bn(t, e)
          );
        };
      function xn(t, e) {
        function i() {
          this.constructor = t;
        }
        bn(t, e),
          (t.prototype =
            null === e
              ? Object.create(e)
              : ((i.prototype = e.prototype), new i()));
      }
      var wn,
        Tn,
        An = (function (t) {
          function e(e, i) {
            void 0 === i && (i = { width: 1, height: 1, autoLoad: !0 });
            var r,
              n,
              o = this;
            return (
              "string" == typeof e
                ? ((r = e), (n = new Uint8Array()))
                : ((r = null), (n = e)),
              ((o = t.call(this, n, i) || this).origin = r),
              (o.buffer = n ? new Sr(n) : null),
              o.origin && !1 !== i.autoLoad && o.load(),
              n &&
                n.length &&
                ((o.loaded = !0), o.onBlobLoaded(o.buffer.rawBinaryData)),
              o
            );
          }
          return (
            xn(e, t),
            (e.prototype.onBlobLoaded = function (t) {}),
            (e.prototype.load = function () {
              return (function (t, e, i, r) {
                return new (i || (i = Promise))(function (n, o) {
                  function s(t) {
                    try {
                      h(r.next(t));
                    } catch (t) {
                      o(t);
                    }
                  }
                  function a(t) {
                    try {
                      h(r.throw(t));
                    } catch (t) {
                      o(t);
                    }
                  }
                  function h(t) {
                    var e;
                    t.done
                      ? n(t.value)
                      : ((e = t.value),
                        e instanceof i
                          ? e
                          : new i(function (t) {
                              t(e);
                            })).then(s, a);
                  }
                  h((r = r.apply(t, e || [])).next());
                });
              })(this, void 0, Promise, function () {
                var t;
                return (function (t, e) {
                  var i,
                    r,
                    n,
                    o,
                    s = {
                      label: 0,
                      sent: function () {
                        if (1 & n[0]) throw n[1];
                        return n[1];
                      },
                      trys: [],
                      ops: [],
                    };
                  return (
                    (o = { next: a(0), throw: a(1), return: a(2) }),
                    "function" == typeof Symbol &&
                      (o[Symbol.iterator] = function () {
                        return this;
                      }),
                    o
                  );
                  function a(o) {
                    return function (a) {
                      return (function (o) {
                        if (i)
                          throw new TypeError(
                            "Generator is already executing."
                          );
                        for (; s; )
                          try {
                            if (
                              ((i = 1),
                              r &&
                                (n =
                                  2 & o[0]
                                    ? r.return
                                    : o[0]
                                    ? r.throw ||
                                      ((n = r.return) && n.call(r), 0)
                                    : r.next) &&
                                !(n = n.call(r, o[1])).done)
                            )
                              return n;
                            switch (
                              ((r = 0), n && (o = [2 & o[0], n.value]), o[0])
                            ) {
                              case 0:
                              case 1:
                                n = o;
                                break;
                              case 4:
                                return s.label++, { value: o[1], done: !1 };
                              case 5:
                                s.label++, (r = o[1]), (o = [0]);
                                continue;
                              case 7:
                                (o = s.ops.pop()), s.trys.pop();
                                continue;
                              default:
                                if (
                                  !(
                                    (n =
                                      (n = s.trys).length > 0 &&
                                      n[n.length - 1]) ||
                                    (6 !== o[0] && 2 !== o[0])
                                  )
                                ) {
                                  s = 0;
                                  continue;
                                }
                                if (
                                  3 === o[0] &&
                                  (!n || (o[1] > n[0] && o[1] < n[3]))
                                ) {
                                  s.label = o[1];
                                  break;
                                }
                                if (6 === o[0] && s.label < n[1]) {
                                  (s.label = n[1]), (n = o);
                                  break;
                                }
                                if (n && s.label < n[2]) {
                                  (s.label = n[2]), s.ops.push(o);
                                  break;
                                }
                                n[2] && s.ops.pop(), s.trys.pop();
                                continue;
                            }
                            o = e.call(t, s);
                          } catch (t) {
                            (o = [6, t]), (r = 0);
                          } finally {
                            i = n = 0;
                          }
                        if (5 & o[0]) throw o[1];
                        return { value: o[0] ? o[1] : void 0, done: !0 };
                      })([o, a]);
                    };
                  }
                })(this, function (e) {
                  switch (e.label) {
                    case 0:
                      return [4, fetch(this.origin)];
                    case 1:
                      return [4, e.sent().blob()];
                    case 2:
                      return [4, e.sent().arrayBuffer()];
                    case 3:
                      return (
                        (t = e.sent()),
                        (this.data = new Uint32Array(t)),
                        (this.buffer = new Sr(t)),
                        (this.loaded = !0),
                        this.onBlobLoaded(t),
                        this.update(),
                        [2, this]
                      );
                  }
                });
              });
            }),
            e
          );
        })(Ce),
        Sn = (function (t) {
          function e(i, r) {
            var n = t.call(this, i, r) || this;
            return (
              (n.format = r.format),
              (n.levels = r.levels || 1),
              (n._width = r.width),
              (n._height = r.height),
              (n._extension = e._formatToExtension(n.format)),
              (r.levelBuffers || n.buffer) &&
                (n._levelBuffers =
                  r.levelBuffers ||
                  e._createLevelBuffers(
                    i instanceof Uint8Array ? i : n.buffer.uint8View,
                    n.format,
                    n.levels,
                    4,
                    4,
                    n.width,
                    n.height
                  )),
              n
            );
          }
          return (
            xn(e, t),
            (e.prototype.upload = function (t, e, i) {
              var r = t.gl;
              if (!t.context.extensions[this._extension])
                throw new Error(
                  this._extension +
                    " textures are not supported on the current machine"
                );
              if (!this._levelBuffers) return !1;
              for (var n = 0, o = this.levels; n < o; n++) {
                var s = this._levelBuffers[n],
                  a = s.levelID,
                  h = s.levelWidth,
                  u = s.levelHeight,
                  l = s.levelBuffer;
                r.compressedTexImage2D(
                  r.TEXTURE_2D,
                  a,
                  this.format,
                  h,
                  u,
                  0,
                  l
                );
              }
              return !0;
            }),
            (e.prototype.onBlobLoaded = function () {
              this._levelBuffers = e._createLevelBuffers(
                this.buffer.uint8View,
                this.format,
                this.levels,
                4,
                4,
                this.width,
                this.height
              );
            }),
            (e._formatToExtension = function (t) {
              if (t >= 33776 && t <= 33779) return "s3tc";
              if (t >= 37488 && t <= 37497) return "etc";
              if (t >= 35840 && t <= 35843) return "pvrtc";
              if (t >= 36196) return "etc1";
              if (t >= 35986 && t <= 34798) return "atc";
              throw new Error("Invalid (compressed) texture format given!");
            }),
            (e._createLevelBuffers = function (t, e, i, r, n, o, s) {
              for (
                var a = new Array(i),
                  h = t.byteOffset,
                  u = o,
                  l = s,
                  c = (u + r - 1) & ~(r - 1),
                  d = (l + n - 1) & ~(n - 1),
                  p = c * d * vn[e],
                  _ = 0;
                _ < i;
                _++
              )
                (a[_] = {
                  levelID: _,
                  levelWidth: i > 1 ? u : c,
                  levelHeight: i > 1 ? l : d,
                  levelBuffer: new Uint8Array(t.buffer, h, p),
                }),
                  (h += p),
                  (p =
                    (c = ((u = u >> 1 || 1) + r - 1) & ~(r - 1)) *
                    (d = ((l = l >> 1 || 1) + n - 1) & ~(n - 1)) *
                    vn[e]);
              return a;
            }),
            e
          );
        })(An),
        En = (function () {
          function t() {}
          return (
            (t.use = function (e, i) {
              var r = e.data;
              if (e.type === sn.TYPE.JSON && r && r.cacheID && r.textures) {
                for (
                  var n = r.textures,
                    o = void 0,
                    s = void 0,
                    a = 0,
                    h = n.length;
                  a < h;
                  a++
                ) {
                  var u = n[a],
                    l = u.src,
                    c = u.format;
                  if ((c || (s = l), t.textureFormats[c])) {
                    o = l;
                    break;
                  }
                }
                if (!(o = o || s))
                  return void i(
                    new Error(
                      "Cannot load compressed-textures in " +
                        e.url +
                        ", make sure you provide a fallback"
                    )
                  );
                if (o === e.url)
                  return void i(
                    new Error(
                      "URL of compressed texture cannot be the same as the manifest's URL"
                    )
                  );
                var d = {
                    crossOrigin: e.crossOrigin,
                    metadata: e.metadata.imageMetadata,
                    parentResource: e,
                  },
                  p = ht.resolve(e.url.replace(this.baseUrl, ""), o),
                  _ = r.cacheID;
                this.add(_, p, d, function (t) {
                  if (t.error) i(t.error);
                  else {
                    var r = t.texture,
                      n = void 0 === r ? null : r,
                      o = t.textures,
                      s = void 0 === o ? {} : o;
                    Object.assign(e, { texture: n, textures: s }), i();
                  }
                });
              } else i();
            }),
            Object.defineProperty(t, "textureExtensions", {
              get: function () {
                if (!t._textureExtensions) {
                  var e = nt.ADAPTER.createCanvas().getContext("webgl");
                  if (!e)
                    return (
                      console.warn(
                        "WebGL not available for compressed textures. Silently failing."
                      ),
                      {}
                    );
                  var i = {
                    s3tc: e.getExtension("WEBGL_compressed_texture_s3tc"),
                    s3tc_sRGB: e.getExtension(
                      "WEBGL_compressed_texture_s3tc_srgb"
                    ),
                    etc: e.getExtension("WEBGL_compressed_texture_etc"),
                    etc1: e.getExtension("WEBGL_compressed_texture_etc1"),
                    pvrtc:
                      e.getExtension("WEBGL_compressed_texture_pvrtc") ||
                      e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),
                    atc: e.getExtension("WEBGL_compressed_texture_atc"),
                    astc: e.getExtension("WEBGL_compressed_texture_astc"),
                  };
                  t._textureExtensions = i;
                }
                return t._textureExtensions;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "textureFormats", {
              get: function () {
                if (!t._textureFormats) {
                  var e = t.textureExtensions;
                  for (var i in ((t._textureFormats = {}), e)) {
                    var r = e[i];
                    r &&
                      Object.assign(
                        t._textureFormats,
                        Object.getPrototypeOf(r)
                      );
                  }
                }
                return t._textureFormats;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.extension = de.Loader),
            t
          );
        })();
      function Cn(t, e, i) {
        var r = { textures: {}, texture: null };
        return e
          ? (e
              .map(function (t) {
                return new Ye(
                  new Pe(
                    t,
                    Object.assign(
                      { mipmap: C.OFF, alphaMode: M.NO_PREMULTIPLIED_ALPHA },
                      i
                    )
                  )
                );
              })
              .forEach(function (e, i) {
                var n = e.baseTexture,
                  o = t + "-" + (i + 1);
                Pe.addToCache(n, o),
                  Ye.addToCache(e, o),
                  0 === i &&
                    (Pe.addToCache(n, t), Ye.addToCache(e, t), (r.texture = e)),
                  (r.textures[o] = e);
              }),
            r)
          : r;
      }
      var Mn, Pn;
      !(function (t) {
        (t[(t.DXGI_FORMAT_UNKNOWN = 0)] = "DXGI_FORMAT_UNKNOWN"),
          (t[(t.DXGI_FORMAT_R32G32B32A32_TYPELESS = 1)] =
            "DXGI_FORMAT_R32G32B32A32_TYPELESS"),
          (t[(t.DXGI_FORMAT_R32G32B32A32_FLOAT = 2)] =
            "DXGI_FORMAT_R32G32B32A32_FLOAT"),
          (t[(t.DXGI_FORMAT_R32G32B32A32_UINT = 3)] =
            "DXGI_FORMAT_R32G32B32A32_UINT"),
          (t[(t.DXGI_FORMAT_R32G32B32A32_SINT = 4)] =
            "DXGI_FORMAT_R32G32B32A32_SINT"),
          (t[(t.DXGI_FORMAT_R32G32B32_TYPELESS = 5)] =
            "DXGI_FORMAT_R32G32B32_TYPELESS"),
          (t[(t.DXGI_FORMAT_R32G32B32_FLOAT = 6)] =
            "DXGI_FORMAT_R32G32B32_FLOAT"),
          (t[(t.DXGI_FORMAT_R32G32B32_UINT = 7)] =
            "DXGI_FORMAT_R32G32B32_UINT"),
          (t[(t.DXGI_FORMAT_R32G32B32_SINT = 8)] =
            "DXGI_FORMAT_R32G32B32_SINT"),
          (t[(t.DXGI_FORMAT_R16G16B16A16_TYPELESS = 9)] =
            "DXGI_FORMAT_R16G16B16A16_TYPELESS"),
          (t[(t.DXGI_FORMAT_R16G16B16A16_FLOAT = 10)] =
            "DXGI_FORMAT_R16G16B16A16_FLOAT"),
          (t[(t.DXGI_FORMAT_R16G16B16A16_UNORM = 11)] =
            "DXGI_FORMAT_R16G16B16A16_UNORM"),
          (t[(t.DXGI_FORMAT_R16G16B16A16_UINT = 12)] =
            "DXGI_FORMAT_R16G16B16A16_UINT"),
          (t[(t.DXGI_FORMAT_R16G16B16A16_SNORM = 13)] =
            "DXGI_FORMAT_R16G16B16A16_SNORM"),
          (t[(t.DXGI_FORMAT_R16G16B16A16_SINT = 14)] =
            "DXGI_FORMAT_R16G16B16A16_SINT"),
          (t[(t.DXGI_FORMAT_R32G32_TYPELESS = 15)] =
            "DXGI_FORMAT_R32G32_TYPELESS"),
          (t[(t.DXGI_FORMAT_R32G32_FLOAT = 16)] = "DXGI_FORMAT_R32G32_FLOAT"),
          (t[(t.DXGI_FORMAT_R32G32_UINT = 17)] = "DXGI_FORMAT_R32G32_UINT"),
          (t[(t.DXGI_FORMAT_R32G32_SINT = 18)] = "DXGI_FORMAT_R32G32_SINT"),
          (t[(t.DXGI_FORMAT_R32G8X24_TYPELESS = 19)] =
            "DXGI_FORMAT_R32G8X24_TYPELESS"),
          (t[(t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT = 20)] =
            "DXGI_FORMAT_D32_FLOAT_S8X24_UINT"),
          (t[(t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS = 21)] =
            "DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS"),
          (t[(t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT = 22)] =
            "DXGI_FORMAT_X32_TYPELESS_G8X24_UINT"),
          (t[(t.DXGI_FORMAT_R10G10B10A2_TYPELESS = 23)] =
            "DXGI_FORMAT_R10G10B10A2_TYPELESS"),
          (t[(t.DXGI_FORMAT_R10G10B10A2_UNORM = 24)] =
            "DXGI_FORMAT_R10G10B10A2_UNORM"),
          (t[(t.DXGI_FORMAT_R10G10B10A2_UINT = 25)] =
            "DXGI_FORMAT_R10G10B10A2_UINT"),
          (t[(t.DXGI_FORMAT_R11G11B10_FLOAT = 26)] =
            "DXGI_FORMAT_R11G11B10_FLOAT"),
          (t[(t.DXGI_FORMAT_R8G8B8A8_TYPELESS = 27)] =
            "DXGI_FORMAT_R8G8B8A8_TYPELESS"),
          (t[(t.DXGI_FORMAT_R8G8B8A8_UNORM = 28)] =
            "DXGI_FORMAT_R8G8B8A8_UNORM"),
          (t[(t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB = 29)] =
            "DXGI_FORMAT_R8G8B8A8_UNORM_SRGB"),
          (t[(t.DXGI_FORMAT_R8G8B8A8_UINT = 30)] = "DXGI_FORMAT_R8G8B8A8_UINT"),
          (t[(t.DXGI_FORMAT_R8G8B8A8_SNORM = 31)] =
            "DXGI_FORMAT_R8G8B8A8_SNORM"),
          (t[(t.DXGI_FORMAT_R8G8B8A8_SINT = 32)] = "DXGI_FORMAT_R8G8B8A8_SINT"),
          (t[(t.DXGI_FORMAT_R16G16_TYPELESS = 33)] =
            "DXGI_FORMAT_R16G16_TYPELESS"),
          (t[(t.DXGI_FORMAT_R16G16_FLOAT = 34)] = "DXGI_FORMAT_R16G16_FLOAT"),
          (t[(t.DXGI_FORMAT_R16G16_UNORM = 35)] = "DXGI_FORMAT_R16G16_UNORM"),
          (t[(t.DXGI_FORMAT_R16G16_UINT = 36)] = "DXGI_FORMAT_R16G16_UINT"),
          (t[(t.DXGI_FORMAT_R16G16_SNORM = 37)] = "DXGI_FORMAT_R16G16_SNORM"),
          (t[(t.DXGI_FORMAT_R16G16_SINT = 38)] = "DXGI_FORMAT_R16G16_SINT"),
          (t[(t.DXGI_FORMAT_R32_TYPELESS = 39)] = "DXGI_FORMAT_R32_TYPELESS"),
          (t[(t.DXGI_FORMAT_D32_FLOAT = 40)] = "DXGI_FORMAT_D32_FLOAT"),
          (t[(t.DXGI_FORMAT_R32_FLOAT = 41)] = "DXGI_FORMAT_R32_FLOAT"),
          (t[(t.DXGI_FORMAT_R32_UINT = 42)] = "DXGI_FORMAT_R32_UINT"),
          (t[(t.DXGI_FORMAT_R32_SINT = 43)] = "DXGI_FORMAT_R32_SINT"),
          (t[(t.DXGI_FORMAT_R24G8_TYPELESS = 44)] =
            "DXGI_FORMAT_R24G8_TYPELESS"),
          (t[(t.DXGI_FORMAT_D24_UNORM_S8_UINT = 45)] =
            "DXGI_FORMAT_D24_UNORM_S8_UINT"),
          (t[(t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS = 46)] =
            "DXGI_FORMAT_R24_UNORM_X8_TYPELESS"),
          (t[(t.DXGI_FORMAT_X24_TYPELESS_G8_UINT = 47)] =
            "DXGI_FORMAT_X24_TYPELESS_G8_UINT"),
          (t[(t.DXGI_FORMAT_R8G8_TYPELESS = 48)] = "DXGI_FORMAT_R8G8_TYPELESS"),
          (t[(t.DXGI_FORMAT_R8G8_UNORM = 49)] = "DXGI_FORMAT_R8G8_UNORM"),
          (t[(t.DXGI_FORMAT_R8G8_UINT = 50)] = "DXGI_FORMAT_R8G8_UINT"),
          (t[(t.DXGI_FORMAT_R8G8_SNORM = 51)] = "DXGI_FORMAT_R8G8_SNORM"),
          (t[(t.DXGI_FORMAT_R8G8_SINT = 52)] = "DXGI_FORMAT_R8G8_SINT"),
          (t[(t.DXGI_FORMAT_R16_TYPELESS = 53)] = "DXGI_FORMAT_R16_TYPELESS"),
          (t[(t.DXGI_FORMAT_R16_FLOAT = 54)] = "DXGI_FORMAT_R16_FLOAT"),
          (t[(t.DXGI_FORMAT_D16_UNORM = 55)] = "DXGI_FORMAT_D16_UNORM"),
          (t[(t.DXGI_FORMAT_R16_UNORM = 56)] = "DXGI_FORMAT_R16_UNORM"),
          (t[(t.DXGI_FORMAT_R16_UINT = 57)] = "DXGI_FORMAT_R16_UINT"),
          (t[(t.DXGI_FORMAT_R16_SNORM = 58)] = "DXGI_FORMAT_R16_SNORM"),
          (t[(t.DXGI_FORMAT_R16_SINT = 59)] = "DXGI_FORMAT_R16_SINT"),
          (t[(t.DXGI_FORMAT_R8_TYPELESS = 60)] = "DXGI_FORMAT_R8_TYPELESS"),
          (t[(t.DXGI_FORMAT_R8_UNORM = 61)] = "DXGI_FORMAT_R8_UNORM"),
          (t[(t.DXGI_FORMAT_R8_UINT = 62)] = "DXGI_FORMAT_R8_UINT"),
          (t[(t.DXGI_FORMAT_R8_SNORM = 63)] = "DXGI_FORMAT_R8_SNORM"),
          (t[(t.DXGI_FORMAT_R8_SINT = 64)] = "DXGI_FORMAT_R8_SINT"),
          (t[(t.DXGI_FORMAT_A8_UNORM = 65)] = "DXGI_FORMAT_A8_UNORM"),
          (t[(t.DXGI_FORMAT_R1_UNORM = 66)] = "DXGI_FORMAT_R1_UNORM"),
          (t[(t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP = 67)] =
            "DXGI_FORMAT_R9G9B9E5_SHAREDEXP"),
          (t[(t.DXGI_FORMAT_R8G8_B8G8_UNORM = 68)] =
            "DXGI_FORMAT_R8G8_B8G8_UNORM"),
          (t[(t.DXGI_FORMAT_G8R8_G8B8_UNORM = 69)] =
            "DXGI_FORMAT_G8R8_G8B8_UNORM"),
          (t[(t.DXGI_FORMAT_BC1_TYPELESS = 70)] = "DXGI_FORMAT_BC1_TYPELESS"),
          (t[(t.DXGI_FORMAT_BC1_UNORM = 71)] = "DXGI_FORMAT_BC1_UNORM"),
          (t[(t.DXGI_FORMAT_BC1_UNORM_SRGB = 72)] =
            "DXGI_FORMAT_BC1_UNORM_SRGB"),
          (t[(t.DXGI_FORMAT_BC2_TYPELESS = 73)] = "DXGI_FORMAT_BC2_TYPELESS"),
          (t[(t.DXGI_FORMAT_BC2_UNORM = 74)] = "DXGI_FORMAT_BC2_UNORM"),
          (t[(t.DXGI_FORMAT_BC2_UNORM_SRGB = 75)] =
            "DXGI_FORMAT_BC2_UNORM_SRGB"),
          (t[(t.DXGI_FORMAT_BC3_TYPELESS = 76)] = "DXGI_FORMAT_BC3_TYPELESS"),
          (t[(t.DXGI_FORMAT_BC3_UNORM = 77)] = "DXGI_FORMAT_BC3_UNORM"),
          (t[(t.DXGI_FORMAT_BC3_UNORM_SRGB = 78)] =
            "DXGI_FORMAT_BC3_UNORM_SRGB"),
          (t[(t.DXGI_FORMAT_BC4_TYPELESS = 79)] = "DXGI_FORMAT_BC4_TYPELESS"),
          (t[(t.DXGI_FORMAT_BC4_UNORM = 80)] = "DXGI_FORMAT_BC4_UNORM"),
          (t[(t.DXGI_FORMAT_BC4_SNORM = 81)] = "DXGI_FORMAT_BC4_SNORM"),
          (t[(t.DXGI_FORMAT_BC5_TYPELESS = 82)] = "DXGI_FORMAT_BC5_TYPELESS"),
          (t[(t.DXGI_FORMAT_BC5_UNORM = 83)] = "DXGI_FORMAT_BC5_UNORM"),
          (t[(t.DXGI_FORMAT_BC5_SNORM = 84)] = "DXGI_FORMAT_BC5_SNORM"),
          (t[(t.DXGI_FORMAT_B5G6R5_UNORM = 85)] = "DXGI_FORMAT_B5G6R5_UNORM"),
          (t[(t.DXGI_FORMAT_B5G5R5A1_UNORM = 86)] =
            "DXGI_FORMAT_B5G5R5A1_UNORM"),
          (t[(t.DXGI_FORMAT_B8G8R8A8_UNORM = 87)] =
            "DXGI_FORMAT_B8G8R8A8_UNORM"),
          (t[(t.DXGI_FORMAT_B8G8R8X8_UNORM = 88)] =
            "DXGI_FORMAT_B8G8R8X8_UNORM"),
          (t[(t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM = 89)] =
            "DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM"),
          (t[(t.DXGI_FORMAT_B8G8R8A8_TYPELESS = 90)] =
            "DXGI_FORMAT_B8G8R8A8_TYPELESS"),
          (t[(t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB = 91)] =
            "DXGI_FORMAT_B8G8R8A8_UNORM_SRGB"),
          (t[(t.DXGI_FORMAT_B8G8R8X8_TYPELESS = 92)] =
            "DXGI_FORMAT_B8G8R8X8_TYPELESS"),
          (t[(t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB = 93)] =
            "DXGI_FORMAT_B8G8R8X8_UNORM_SRGB"),
          (t[(t.DXGI_FORMAT_BC6H_TYPELESS = 94)] = "DXGI_FORMAT_BC6H_TYPELESS"),
          (t[(t.DXGI_FORMAT_BC6H_UF16 = 95)] = "DXGI_FORMAT_BC6H_UF16"),
          (t[(t.DXGI_FORMAT_BC6H_SF16 = 96)] = "DXGI_FORMAT_BC6H_SF16"),
          (t[(t.DXGI_FORMAT_BC7_TYPELESS = 97)] = "DXGI_FORMAT_BC7_TYPELESS"),
          (t[(t.DXGI_FORMAT_BC7_UNORM = 98)] = "DXGI_FORMAT_BC7_UNORM"),
          (t[(t.DXGI_FORMAT_BC7_UNORM_SRGB = 99)] =
            "DXGI_FORMAT_BC7_UNORM_SRGB"),
          (t[(t.DXGI_FORMAT_AYUV = 100)] = "DXGI_FORMAT_AYUV"),
          (t[(t.DXGI_FORMAT_Y410 = 101)] = "DXGI_FORMAT_Y410"),
          (t[(t.DXGI_FORMAT_Y416 = 102)] = "DXGI_FORMAT_Y416"),
          (t[(t.DXGI_FORMAT_NV12 = 103)] = "DXGI_FORMAT_NV12"),
          (t[(t.DXGI_FORMAT_P010 = 104)] = "DXGI_FORMAT_P010"),
          (t[(t.DXGI_FORMAT_P016 = 105)] = "DXGI_FORMAT_P016"),
          (t[(t.DXGI_FORMAT_420_OPAQUE = 106)] = "DXGI_FORMAT_420_OPAQUE"),
          (t[(t.DXGI_FORMAT_YUY2 = 107)] = "DXGI_FORMAT_YUY2"),
          (t[(t.DXGI_FORMAT_Y210 = 108)] = "DXGI_FORMAT_Y210"),
          (t[(t.DXGI_FORMAT_Y216 = 109)] = "DXGI_FORMAT_Y216"),
          (t[(t.DXGI_FORMAT_NV11 = 110)] = "DXGI_FORMAT_NV11"),
          (t[(t.DXGI_FORMAT_AI44 = 111)] = "DXGI_FORMAT_AI44"),
          (t[(t.DXGI_FORMAT_IA44 = 112)] = "DXGI_FORMAT_IA44"),
          (t[(t.DXGI_FORMAT_P8 = 113)] = "DXGI_FORMAT_P8"),
          (t[(t.DXGI_FORMAT_A8P8 = 114)] = "DXGI_FORMAT_A8P8"),
          (t[(t.DXGI_FORMAT_B4G4R4A4_UNORM = 115)] =
            "DXGI_FORMAT_B4G4R4A4_UNORM"),
          (t[(t.DXGI_FORMAT_P208 = 116)] = "DXGI_FORMAT_P208"),
          (t[(t.DXGI_FORMAT_V208 = 117)] = "DXGI_FORMAT_V208"),
          (t[(t.DXGI_FORMAT_V408 = 118)] = "DXGI_FORMAT_V408"),
          (t[(t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE = 119)] =
            "DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE"),
          (t[(t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE = 120)] =
            "DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE"),
          (t[(t.DXGI_FORMAT_FORCE_UINT = 121)] = "DXGI_FORMAT_FORCE_UINT");
      })(Mn || (Mn = {})),
        (function (t) {
          (t[(t.DDS_DIMENSION_TEXTURE1D = 2)] = "DDS_DIMENSION_TEXTURE1D"),
            (t[(t.DDS_DIMENSION_TEXTURE2D = 3)] = "DDS_DIMENSION_TEXTURE2D"),
            (t[(t.DDS_DIMENSION_TEXTURE3D = 6)] = "DDS_DIMENSION_TEXTURE3D");
        })(Pn || (Pn = {}));
      var Bn,
        On,
        Rn,
        In =
          (((wn = {})[827611204] = yn.COMPRESSED_RGBA_S3TC_DXT1_EXT),
          (wn[861165636] = yn.COMPRESSED_RGBA_S3TC_DXT3_EXT),
          (wn[894720068] = yn.COMPRESSED_RGBA_S3TC_DXT5_EXT),
          wn),
        kn =
          (((Tn = {})[Mn.DXGI_FORMAT_BC1_TYPELESS] =
            yn.COMPRESSED_RGBA_S3TC_DXT1_EXT),
          (Tn[Mn.DXGI_FORMAT_BC1_UNORM] = yn.COMPRESSED_RGBA_S3TC_DXT1_EXT),
          (Tn[Mn.DXGI_FORMAT_BC2_TYPELESS] = yn.COMPRESSED_RGBA_S3TC_DXT3_EXT),
          (Tn[Mn.DXGI_FORMAT_BC2_UNORM] = yn.COMPRESSED_RGBA_S3TC_DXT3_EXT),
          (Tn[Mn.DXGI_FORMAT_BC3_TYPELESS] = yn.COMPRESSED_RGBA_S3TC_DXT5_EXT),
          (Tn[Mn.DXGI_FORMAT_BC3_UNORM] = yn.COMPRESSED_RGBA_S3TC_DXT5_EXT),
          (Tn[Mn.DXGI_FORMAT_BC1_UNORM_SRGB] =
            yn.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT),
          (Tn[Mn.DXGI_FORMAT_BC2_UNORM_SRGB] =
            yn.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT),
          (Tn[Mn.DXGI_FORMAT_BC3_UNORM_SRGB] =
            yn.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT),
          Tn),
        Fn = [171, 75, 84, 88, 32, 49, 49, 187, 13, 10, 26, 10],
        Dn =
          (((Bn = {})[T.UNSIGNED_BYTE] = 1),
          (Bn[T.UNSIGNED_SHORT] = 2),
          (Bn[T.INT] = 4),
          (Bn[T.UNSIGNED_INT] = 4),
          (Bn[T.FLOAT] = 4),
          (Bn[T.HALF_FLOAT] = 8),
          Bn),
        Nn =
          (((On = {})[x.RGBA] = 4),
          (On[x.RGB] = 3),
          (On[x.RG] = 2),
          (On[x.RED] = 1),
          (On[x.LUMINANCE] = 1),
          (On[x.LUMINANCE_ALPHA] = 2),
          (On[x.ALPHA] = 1),
          On),
        Ln =
          (((Rn = {})[T.UNSIGNED_SHORT_4_4_4_4] = 2),
          (Rn[T.UNSIGNED_SHORT_5_5_5_1] = 2),
          (Rn[T.UNSIGNED_SHORT_5_6_5] = 2),
          Rn);
      function Un(t) {
        switch (t) {
          case x.RGBA:
            return x.RGBA_INTEGER;
          case x.RGB:
            return x.RGB_INTEGER;
          case x.RG:
            return x.RG_INTEGER;
          case x.RED:
            return x.RED_INTEGER;
          default:
            return t;
        }
      }
      sn.setExtensionXhrType("dds", sn.XHR_RESPONSE_TYPE.BUFFER);
      var Gn = (function () {
        function t() {}
        return (
          (t.use = function (t, e) {
            if ("dds" === t.extension && t.data)
              try {
                Object.assign(
                  t,
                  Cn(
                    t.name || t.url,
                    (function (t) {
                      var e = new Uint32Array(t);
                      if (542327876 !== e[0])
                        throw new Error("Invalid DDS file magic word");
                      var i = new Uint32Array(
                          t,
                          0,
                          124 / Uint32Array.BYTES_PER_ELEMENT
                        ),
                        r = i[3],
                        n = i[4],
                        o = i[7],
                        s = new Uint32Array(
                          t,
                          19 * Uint32Array.BYTES_PER_ELEMENT,
                          32 / Uint32Array.BYTES_PER_ELEMENT
                        ),
                        a = s[1];
                      if (4 & a) {
                        var h = s[2];
                        if (808540228 !== h) {
                          var u = In[h],
                            l = new Uint8Array(t, 128);
                          return [
                            new Sn(l, {
                              format: u,
                              width: n,
                              height: r,
                              levels: o,
                            }),
                          ];
                        }
                        var c = new Uint32Array(
                            e.buffer,
                            128,
                            20 / Uint32Array.BYTES_PER_ELEMENT
                          ),
                          d = c[0],
                          p = c[1],
                          _ = c[2],
                          f = c[3],
                          m = kn[d];
                        if (void 0 === m)
                          throw new Error(
                            "DDSParser cannot parse texture data with DXGI format " +
                              d
                          );
                        if (4 === _)
                          throw new Error(
                            "DDSParser does not support cubemap textures"
                          );
                        if (p === Pn.DDS_DIMENSION_TEXTURE3D)
                          throw new Error(
                            "DDSParser does not supported 3D texture data"
                          );
                        var y = new Array();
                        if (1 === f) y.push(new Uint8Array(t, 148));
                        else {
                          for (
                            var g = vn[m], v = 0, b = n, x = r, w = 0;
                            w < o;
                            w++
                          )
                            (v +=
                              Math.max(1, (b + 3) & -4) *
                              Math.max(1, (x + 3) & -4) *
                              g),
                              (b >>>= 1),
                              (x >>>= 1);
                          var T = 148;
                          for (w = 0; w < f; w++)
                            y.push(new Uint8Array(t, T, v)), (T += v);
                        }
                        return y.map(function (t) {
                          return new Sn(t, {
                            format: m,
                            width: n,
                            height: r,
                            levels: o,
                          });
                        });
                      }
                      if (64 & a)
                        throw new Error(
                          "DDSParser does not support uncompressed texture data."
                        );
                      if (512 & a)
                        throw new Error(
                          "DDSParser does not supported YUV uncompressed texture data."
                        );
                      if (131072 & a)
                        throw new Error(
                          "DDSParser does not support single-channel (lumninance) texture data!"
                        );
                      if (2 & a)
                        throw new Error(
                          "DDSParser does not support single-channel (alpha) texture data!"
                        );
                      throw new Error(
                        "DDSParser failed to load a texture file due to an unknown reason!"
                      );
                    })(t.data),
                    t.metadata
                  )
                );
              } catch (t) {
                return void e(t);
              }
            e();
          }),
          (t.extension = de.Loader),
          t
        );
      })();
      sn.setExtensionXhrType("ktx", sn.XHR_RESPONSE_TYPE.BUFFER);
      var Vn = (function () {
          function t() {}
          return (
            (t.use = function (t, e) {
              if ("ktx" === t.extension && t.data)
                try {
                  var i = t.name || t.url,
                    r = (function (t, e, i) {
                      void 0 === i && (i = !1);
                      var r = new DataView(e);
                      if (
                        !(function (t, e) {
                          for (var i = 0; i < Fn.length; i++)
                            if (e.getUint8(i) !== Fn[i])
                              return (
                                console.error(
                                  t + " is not a valid *.ktx file!"
                                ),
                                !1
                              );
                          return !0;
                        })(t, r)
                      )
                        return null;
                      var n = 67305985 === r.getUint32(12, !0),
                        o = r.getUint32(16, n),
                        s = r.getUint32(24, n),
                        a = r.getUint32(28, n),
                        h = r.getUint32(36, n),
                        u = r.getUint32(40, n) || 1,
                        l = r.getUint32(44, n) || 1,
                        c = r.getUint32(48, n) || 1,
                        d = r.getUint32(52, n),
                        p = r.getUint32(56, n),
                        _ = r.getUint32(60, n);
                      if (0 === u || 1 !== l)
                        throw new Error("Only 2D textures are supported");
                      if (1 !== d)
                        throw new Error(
                          "CubeTextures are not supported by KTXLoader yet!"
                        );
                      if (1 !== c)
                        throw new Error(
                          "WebGL does not support array textures"
                        );
                      var f,
                        m = (h + 3) & -4,
                        y = (u + 3) & -4,
                        g = new Array(c),
                        v = h * u;
                      if (
                        (0 === o && (v = m * y),
                        void 0 ===
                          (f =
                            0 !== o ? (Dn[o] ? Dn[o] * Nn[s] : Ln[o]) : vn[a]))
                      )
                        throw new Error(
                          "Unable to resolve the pixel format stored in the *.ktx file!"
                        );
                      for (
                        var b = i
                            ? (function (t, e, i) {
                                for (var r = new Map(), n = 0; n < e; ) {
                                  var o = t.getUint32(64 + n, i),
                                    s = 64 + n + 4,
                                    a = 3 - ((o + 3) % 4);
                                  if (0 === o || o > e - n) {
                                    console.error(
                                      "KTXLoader: keyAndValueByteSize out of bounds"
                                    );
                                    break;
                                  }
                                  for (
                                    var h = 0;
                                    h < o && 0 !== t.getUint8(s + h);
                                    h++
                                  );
                                  if (-1 === h) {
                                    console.error(
                                      "KTXLoader: Failed to find null byte terminating kvData key"
                                    );
                                    break;
                                  }
                                  var u = new TextDecoder().decode(
                                      new Uint8Array(t.buffer, s, h)
                                    ),
                                    l = new DataView(
                                      t.buffer,
                                      s + h + 1,
                                      o - h - 1
                                    );
                                  r.set(u, l), (n += 4 + o + a);
                                }
                                return r;
                              })(r, _, n)
                            : null,
                          x = v * f,
                          w = h,
                          A = u,
                          S = m,
                          E = y,
                          C = 64 + _,
                          M = 0;
                        M < p;
                        M++
                      ) {
                        for (
                          var P = r.getUint32(C, n), B = C + 4, O = 0;
                          O < c;
                          O++
                        ) {
                          var R = g[O];
                          R || (R = g[O] = new Array(p)),
                            (R[M] = {
                              levelID: M,
                              levelWidth: p > 1 || 0 !== o ? w : S,
                              levelHeight: p > 1 || 0 !== o ? A : E,
                              levelBuffer: new Uint8Array(e, B, x),
                            }),
                            (B += x);
                        }
                        (C = (C += P + 4) % 4 != 0 ? C + 4 - (C % 4) : C),
                          (x =
                            (S = ((w = w >> 1 || 1) + 4 - 1) & -4) *
                            (E = ((A = A >> 1 || 1) + 4 - 1) & -4) *
                            f);
                      }
                      return 0 !== o
                        ? {
                            uncompressed: g.map(function (t) {
                              var e = t[0].levelBuffer,
                                i = !1;
                              return (
                                o === T.FLOAT
                                  ? (e = new Float32Array(
                                      t[0].levelBuffer.buffer,
                                      t[0].levelBuffer.byteOffset,
                                      t[0].levelBuffer.byteLength / 4
                                    ))
                                  : o === T.UNSIGNED_INT
                                  ? ((i = !0),
                                    (e = new Uint32Array(
                                      t[0].levelBuffer.buffer,
                                      t[0].levelBuffer.byteOffset,
                                      t[0].levelBuffer.byteLength / 4
                                    )))
                                  : o === T.INT &&
                                    ((i = !0),
                                    (e = new Int32Array(
                                      t[0].levelBuffer.buffer,
                                      t[0].levelBuffer.byteOffset,
                                      t[0].levelBuffer.byteLength / 4
                                    ))),
                                {
                                  resource: new Ce(e, {
                                    width: t[0].levelWidth,
                                    height: t[0].levelHeight,
                                  }),
                                  type: o,
                                  format: i ? Un(s) : s,
                                }
                              );
                            }),
                            kvData: b,
                          }
                        : {
                            compressed: g.map(function (t) {
                              return new Sn(null, {
                                format: a,
                                width: h,
                                height: u,
                                levels: p,
                                levelBuffers: t,
                              });
                            }),
                            kvData: b,
                          };
                    })(i, t.data, this.loadKeyValueData),
                    n = r.compressed,
                    o = r.uncompressed,
                    s = r.kvData;
                  if (n) {
                    var a = Cn(i, n, t.metadata);
                    if (s && a.textures)
                      for (var h in a.textures)
                        a.textures[h].baseTexture.ktxKeyValueData = s;
                    Object.assign(t, a);
                  } else if (o) {
                    var u = {};
                    o.forEach(function (t, e) {
                      var r = new Ye(
                          new Pe(t.resource, {
                            mipmap: C.OFF,
                            alphaMode: M.NO_PREMULTIPLIED_ALPHA,
                            type: t.type,
                            format: t.format,
                          })
                        ),
                        n = i + "-" + (e + 1);
                      s && (r.baseTexture.ktxKeyValueData = s),
                        Pe.addToCache(r.baseTexture, n),
                        Ye.addToCache(r, n),
                        0 === e &&
                          ((u[i] = r),
                          Pe.addToCache(r.baseTexture, i),
                          Ye.addToCache(r, i)),
                        (u[n] = r);
                    }),
                      Object.assign(t, { textures: u });
                  }
                } catch (t) {
                  return void e(t);
                }
              e();
            }),
            (t.extension = de.Loader),
            (t.loadKeyValueData = !1),
            t
          );
        })(),
        jn = function (t, e) {
          return (
            (jn =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
              }),
            jn(t, e)
          );
        };
      function zn(t, e) {
        function i() {
          this.constructor = t;
        }
        jn(t, e),
          (t.prototype =
            null === e
              ? Object.create(e)
              : ((i.prototype = e.prototype), new i()));
      }
      !(function (t) {
        function e(e, i, r, n) {
          void 0 === e && (e = 1500),
            void 0 === r && (r = 16384),
            void 0 === n && (n = !1);
          var o = t.call(this) || this;
          return (
            r > 16384 && (r = 16384),
            (o._properties = [!1, !0, !1, !1, !1]),
            (o._maxSize = e),
            (o._batchSize = r),
            (o._buffers = null),
            (o._bufferUpdateIDs = []),
            (o._updateID = 0),
            (o.interactiveChildren = !1),
            (o.blendMode = v.NORMAL),
            (o.autoResize = n),
            (o.roundPixels = !0),
            (o.baseTexture = null),
            o.setProperties(i),
            (o._tint = 0),
            (o.tintRgb = new Float32Array(4)),
            (o.tint = 16777215),
            o
          );
        }
        zn(e, t),
          (e.prototype.setProperties = function (t) {
            t &&
              ((this._properties[0] =
                "vertices" in t || "scale" in t
                  ? !!t.vertices || !!t.scale
                  : this._properties[0]),
              (this._properties[1] =
                "position" in t ? !!t.position : this._properties[1]),
              (this._properties[2] =
                "rotation" in t ? !!t.rotation : this._properties[2]),
              (this._properties[3] =
                "uvs" in t ? !!t.uvs : this._properties[3]),
              (this._properties[4] =
                "tint" in t || "alpha" in t
                  ? !!t.tint || !!t.alpha
                  : this._properties[4]));
          }),
          (e.prototype.updateTransform = function () {
            this.displayObjectUpdateTransform();
          }),
          Object.defineProperty(e.prototype, "tint", {
            get: function () {
              return this._tint;
            },
            set: function (t) {
              (this._tint = t), pt(t, this.tintRgb);
            },
            enumerable: !1,
            configurable: !0,
          }),
          (e.prototype.render = function (t) {
            var e = this;
            this.visible &&
              !(this.worldAlpha <= 0) &&
              this.children.length &&
              this.renderable &&
              (this.baseTexture ||
                ((this.baseTexture = this.children[0]._texture.baseTexture),
                this.baseTexture.valid ||
                  this.baseTexture.once("update", function () {
                    return e.onChildrenChange(0);
                  })),
              t.batch.setObjectRenderer(t.plugins.particle),
              t.plugins.particle.render(this));
          }),
          (e.prototype.onChildrenChange = function (t) {
            for (
              var e = Math.floor(t / this._batchSize);
              this._bufferUpdateIDs.length < e;

            )
              this._bufferUpdateIDs.push(0);
            this._bufferUpdateIDs[e] = ++this._updateID;
          }),
          (e.prototype.dispose = function () {
            if (this._buffers) {
              for (var t = 0; t < this._buffers.length; ++t)
                this._buffers[t].destroy();
              this._buffers = null;
            }
          }),
          (e.prototype.destroy = function (e) {
            t.prototype.destroy.call(this, e),
              this.dispose(),
              (this._properties = null),
              (this._buffers = null),
              (this._bufferUpdateIDs = null);
          });
      })(ce);
      var Xn,
        Hn,
        Yn = (function () {
          function t(t, e, i) {
            (this.geometry = new ii()),
              (this.indexBuffer = null),
              (this.size = i),
              (this.dynamicProperties = []),
              (this.staticProperties = []);
            for (var r = 0; r < t.length; ++r) {
              var n = t[r];
              (n = {
                attributeName: n.attributeName,
                size: n.size,
                uploadFunction: n.uploadFunction,
                type: n.type || T.FLOAT,
                offset: n.offset,
              }),
                e[r]
                  ? this.dynamicProperties.push(n)
                  : this.staticProperties.push(n);
            }
            (this.staticStride = 0),
              (this.staticBuffer = null),
              (this.staticData = null),
              (this.staticDataUint32 = null),
              (this.dynamicStride = 0),
              (this.dynamicBuffer = null),
              (this.dynamicData = null),
              (this.dynamicDataUint32 = null),
              (this._updateID = 0),
              this.initBuffers();
          }
          return (
            (t.prototype.initBuffers = function () {
              var t = this.geometry,
                e = 0;
              (this.indexBuffer = new Je(
                (function (t, e) {
                  void 0 === e && (e = null);
                  var i = 6 * t;
                  if ((e = e || new Uint16Array(i)).length !== i)
                    throw new Error(
                      "Out buffer length is incorrect, got " +
                        e.length +
                        " and expected " +
                        i
                    );
                  for (var r = 0, n = 0; r < i; r += 6, n += 4)
                    (e[r + 0] = n + 0),
                      (e[r + 1] = n + 1),
                      (e[r + 2] = n + 2),
                      (e[r + 3] = n + 0),
                      (e[r + 4] = n + 2),
                      (e[r + 5] = n + 3);
                  return e;
                })(this.size),
                !0,
                !0
              )),
                t.addIndex(this.indexBuffer),
                (this.dynamicStride = 0);
              for (var i = 0; i < this.dynamicProperties.length; ++i)
                ((s = this.dynamicProperties[i]).offset = e),
                  (e += s.size),
                  (this.dynamicStride += s.size);
              var r = new ArrayBuffer(this.size * this.dynamicStride * 4 * 4);
              (this.dynamicData = new Float32Array(r)),
                (this.dynamicDataUint32 = new Uint32Array(r)),
                (this.dynamicBuffer = new Je(this.dynamicData, !1, !1));
              var n = 0;
              for (
                this.staticStride = 0, i = 0;
                i < this.staticProperties.length;
                ++i
              )
                ((s = this.staticProperties[i]).offset = n),
                  (n += s.size),
                  (this.staticStride += s.size);
              var o = new ArrayBuffer(this.size * this.staticStride * 4 * 4);
              for (
                this.staticData = new Float32Array(o),
                  this.staticDataUint32 = new Uint32Array(o),
                  this.staticBuffer = new Je(this.staticData, !0, !1),
                  i = 0;
                i < this.dynamicProperties.length;
                ++i
              ) {
                var s = this.dynamicProperties[i];
                t.addAttribute(
                  s.attributeName,
                  this.dynamicBuffer,
                  0,
                  s.type === T.UNSIGNED_BYTE,
                  s.type,
                  4 * this.dynamicStride,
                  4 * s.offset
                );
              }
              for (i = 0; i < this.staticProperties.length; ++i)
                (s = this.staticProperties[i]),
                  t.addAttribute(
                    s.attributeName,
                    this.staticBuffer,
                    0,
                    s.type === T.UNSIGNED_BYTE,
                    s.type,
                    4 * this.staticStride,
                    4 * s.offset
                  );
            }),
            (t.prototype.uploadDynamic = function (t, e, i) {
              for (var r = 0; r < this.dynamicProperties.length; r++) {
                var n = this.dynamicProperties[r];
                n.uploadFunction(
                  t,
                  e,
                  i,
                  n.type === T.UNSIGNED_BYTE
                    ? this.dynamicDataUint32
                    : this.dynamicData,
                  this.dynamicStride,
                  n.offset
                );
              }
              this.dynamicBuffer._updateID++;
            }),
            (t.prototype.uploadStatic = function (t, e, i) {
              for (var r = 0; r < this.staticProperties.length; r++) {
                var n = this.staticProperties[r];
                n.uploadFunction(
                  t,
                  e,
                  i,
                  n.type === T.UNSIGNED_BYTE
                    ? this.staticDataUint32
                    : this.staticData,
                  this.staticStride,
                  n.offset
                );
              }
              this.staticBuffer._updateID++;
            }),
            (t.prototype.destroy = function () {
              (this.indexBuffer = null),
                (this.dynamicProperties = null),
                (this.dynamicBuffer = null),
                (this.dynamicData = null),
                (this.dynamicDataUint32 = null),
                (this.staticProperties = null),
                (this.staticBuffer = null),
                (this.staticData = null),
                (this.staticDataUint32 = null),
                this.geometry.destroy();
            }),
            t
          );
        })(),
        Wn = (function (t) {
          function e(e) {
            var i = t.call(this, e) || this;
            return (
              (i.shader = null),
              (i.properties = null),
              (i.tempMatrix = new $t()),
              (i.properties = [
                {
                  attributeName: "aVertexPosition",
                  size: 2,
                  uploadFunction: i.uploadVertices,
                  offset: 0,
                },
                {
                  attributeName: "aPositionCoord",
                  size: 2,
                  uploadFunction: i.uploadPosition,
                  offset: 0,
                },
                {
                  attributeName: "aRotation",
                  size: 1,
                  uploadFunction: i.uploadRotation,
                  offset: 0,
                },
                {
                  attributeName: "aTextureCoord",
                  size: 2,
                  uploadFunction: i.uploadUvs,
                  offset: 0,
                },
                {
                  attributeName: "aColor",
                  size: 1,
                  type: T.UNSIGNED_BYTE,
                  uploadFunction: i.uploadTint,
                  offset: 0,
                },
              ]),
              (i.shader = zi.from(
                "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n",
                "varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",
                {}
              )),
              (i.state = Xi.for2d()),
              i
            );
          }
          return (
            zn(e, t),
            (e.prototype.render = function (t) {
              var e = t.children,
                i = t._maxSize,
                r = t._batchSize,
                n = this.renderer,
                o = e.length;
              if (0 !== o) {
                o > i && !t.autoResize && (o = i);
                var s = t._buffers;
                s || (s = t._buffers = this.generateBuffers(t));
                var a = e[0]._texture.baseTexture,
                  h = a.alphaMode > 0;
                (this.state.blendMode = gt(t.blendMode, h)),
                  n.state.set(this.state);
                var u,
                  l,
                  c,
                  d,
                  p = n.gl,
                  _ = t.worldTransform.copyTo(this.tempMatrix);
                _.prepend(n.globalUniforms.uniforms.projectionMatrix),
                  (this.shader.uniforms.translationMatrix = _.toArray(!0)),
                  (this.shader.uniforms.uColor =
                    ((u = t.tintRgb),
                    (l = t.worldAlpha),
                    (d = h),
                    (c =
                      (c = this.shader.uniforms.uColor) || new Float32Array(4)),
                    d || void 0 === d
                      ? ((c[0] = u[0] * l),
                        (c[1] = u[1] * l),
                        (c[2] = u[2] * l))
                      : ((c[0] = u[0]), (c[1] = u[1]), (c[2] = u[2])),
                    (c[3] = l),
                    c)),
                  (this.shader.uniforms.uSampler = a),
                  this.renderer.shader.bind(this.shader);
                for (var f = !1, m = 0, y = 0; m < o; m += r, y += 1) {
                  var g = o - m;
                  g > r && (g = r),
                    y >= s.length && s.push(this._generateOneMoreBuffer(t));
                  var v = s[y];
                  v.uploadDynamic(e, m, g);
                  var b = t._bufferUpdateIDs[y] || 0;
                  (f = f || v._updateID < b) &&
                    ((v._updateID = t._updateID), v.uploadStatic(e, m, g)),
                    n.geometry.bind(v.geometry),
                    p.drawElements(p.TRIANGLES, 6 * g, p.UNSIGNED_SHORT, 0);
                }
              }
            }),
            (e.prototype.generateBuffers = function (t) {
              for (
                var e = [],
                  i = t._maxSize,
                  r = t._batchSize,
                  n = t._properties,
                  o = 0;
                o < i;
                o += r
              )
                e.push(new Yn(this.properties, n, r));
              return e;
            }),
            (e.prototype._generateOneMoreBuffer = function (t) {
              var e = t._batchSize,
                i = t._properties;
              return new Yn(this.properties, i, e);
            }),
            (e.prototype.uploadVertices = function (t, e, i, r, n, o) {
              for (var s = 0, a = 0, h = 0, u = 0, l = 0; l < i; ++l) {
                var c = t[e + l],
                  d = c._texture,
                  p = c.scale.x,
                  _ = c.scale.y,
                  f = d.trim,
                  m = d.orig;
                f
                  ? ((s = (a = f.x - c.anchor.x * m.width) + f.width),
                    (h = (u = f.y - c.anchor.y * m.height) + f.height))
                  : ((s = m.width * (1 - c.anchor.x)),
                    (a = m.width * -c.anchor.x),
                    (h = m.height * (1 - c.anchor.y)),
                    (u = m.height * -c.anchor.y)),
                  (r[o] = a * p),
                  (r[o + 1] = u * _),
                  (r[o + n] = s * p),
                  (r[o + n + 1] = u * _),
                  (r[o + 2 * n] = s * p),
                  (r[o + 2 * n + 1] = h * _),
                  (r[o + 3 * n] = a * p),
                  (r[o + 3 * n + 1] = h * _),
                  (o += 4 * n);
              }
            }),
            (e.prototype.uploadPosition = function (t, e, i, r, n, o) {
              for (var s = 0; s < i; s++) {
                var a = t[e + s].position;
                (r[o] = a.x),
                  (r[o + 1] = a.y),
                  (r[o + n] = a.x),
                  (r[o + n + 1] = a.y),
                  (r[o + 2 * n] = a.x),
                  (r[o + 2 * n + 1] = a.y),
                  (r[o + 3 * n] = a.x),
                  (r[o + 3 * n + 1] = a.y),
                  (o += 4 * n);
              }
            }),
            (e.prototype.uploadRotation = function (t, e, i, r, n, o) {
              for (var s = 0; s < i; s++) {
                var a = t[e + s].rotation;
                (r[o] = a),
                  (r[o + n] = a),
                  (r[o + 2 * n] = a),
                  (r[o + 3 * n] = a),
                  (o += 4 * n);
              }
            }),
            (e.prototype.uploadUvs = function (t, e, i, r, n, o) {
              for (var s = 0; s < i; ++s) {
                var a = t[e + s]._texture._uvs;
                a
                  ? ((r[o] = a.x0),
                    (r[o + 1] = a.y0),
                    (r[o + n] = a.x1),
                    (r[o + n + 1] = a.y1),
                    (r[o + 2 * n] = a.x2),
                    (r[o + 2 * n + 1] = a.y2),
                    (r[o + 3 * n] = a.x3),
                    (r[o + 3 * n + 1] = a.y3),
                    (o += 4 * n))
                  : ((r[o] = 0),
                    (r[o + 1] = 0),
                    (r[o + n] = 0),
                    (r[o + n + 1] = 0),
                    (r[o + 2 * n] = 0),
                    (r[o + 2 * n + 1] = 0),
                    (r[o + 3 * n] = 0),
                    (r[o + 3 * n + 1] = 0),
                    (o += 4 * n));
              }
            }),
            (e.prototype.uploadTint = function (t, e, i, r, n, o) {
              for (var s = 0; s < i; ++s) {
                var a = t[e + s],
                  h = a._texture.baseTexture.alphaMode > 0,
                  u = a.alpha,
                  l =
                    u < 1 && h
                      ? vt(a._tintRGB, u)
                      : a._tintRGB + ((255 * u) << 24);
                (r[o] = l),
                  (r[o + n] = l),
                  (r[o + 2 * n] = l),
                  (r[o + 3 * n] = l),
                  (o += 4 * n);
              }
            }),
            (e.prototype.destroy = function () {
              t.prototype.destroy.call(this),
                this.shader && (this.shader.destroy(), (this.shader = null)),
                (this.tempMatrix = null);
            }),
            (e.extension = { name: "particle", type: de.RendererPlugin }),
            e
          );
        })(ci);
      !(function (t) {
        (t.MITER = "miter"), (t.BEVEL = "bevel"), (t.ROUND = "round");
      })(Xn || (Xn = {})),
        (function (t) {
          (t.BUTT = "butt"), (t.ROUND = "round"), (t.SQUARE = "square");
        })(Hn || (Hn = {}));
      var qn = {
          adaptive: !0,
          maxLength: 10,
          minSegments: 8,
          maxSegments: 2048,
          epsilon: 1e-4,
          _segmentsCount: function (t, e) {
            if ((void 0 === e && (e = 20), !this.adaptive || !t || isNaN(t)))
              return e;
            var i = Math.ceil(t / this.maxLength);
            return (
              i < this.minSegments
                ? (i = this.minSegments)
                : i > this.maxSegments && (i = this.maxSegments),
              i
            );
          },
        },
        $n = (function () {
          function t() {
            (this.color = 16777215),
              (this.alpha = 1),
              (this.texture = Ye.WHITE),
              (this.matrix = null),
              (this.visible = !1),
              this.reset();
          }
          return (
            (t.prototype.clone = function () {
              var e = new t();
              return (
                (e.color = this.color),
                (e.alpha = this.alpha),
                (e.texture = this.texture),
                (e.matrix = this.matrix),
                (e.visible = this.visible),
                e
              );
            }),
            (t.prototype.reset = function () {
              (this.color = 16777215),
                (this.alpha = 1),
                (this.texture = Ye.WHITE),
                (this.matrix = null),
                (this.visible = !1);
            }),
            (t.prototype.destroy = function () {
              (this.texture = null), (this.matrix = null);
            }),
            t
          );
        })(),
        Kn = function (t, e) {
          return (
            (Kn =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
              }),
            Kn(t, e)
          );
        };
      function Jn(t, e) {
        function i() {
          this.constructor = t;
        }
        Kn(t, e),
          (t.prototype =
            null === e
              ? Object.create(e)
              : ((i.prototype = e.prototype), new i()));
      }
      function Zn(t, e) {
        var i, r;
        void 0 === e && (e = !1);
        var n = t.length;
        if (!(n < 6)) {
          for (var o = 0, s = 0, a = t[n - 2], h = t[n - 1]; s < n; s += 2) {
            var u = t[s],
              l = t[s + 1];
            (o += (u - a) * (l + h)), (a = u), (h = l);
          }
          if ((!e && o > 0) || (e && o <= 0)) {
            var c = n / 2;
            for (s = c + (c % 2); s < n; s += 2) {
              var d = n - s - 2,
                p = n - s - 1,
                _ = s,
                f = s + 1;
              (i = [t[_], t[d]]),
                (t[d] = i[0]),
                (t[_] = i[1]),
                (r = [t[f], t[p]]),
                (t[p] = r[0]),
                (t[f] = r[1]);
            }
          }
        }
      }
      var Qn = {
          build: function (t) {
            t.points = t.shape.points.slice();
          },
          triangulate: function (t, e) {
            var i = t.points,
              r = t.holes,
              n = e.points,
              o = e.indices;
            if (i.length >= 6) {
              Zn(i, !1);
              for (var s = [], a = 0; a < r.length; a++) {
                var h = r[a];
                Zn(h.points, !0),
                  s.push(i.length / 2),
                  (i = i.concat(h.points));
              }
              var u = st(i, s, 2);
              if (!u) return;
              var l = n.length / 2;
              for (a = 0; a < u.length; a += 3)
                o.push(u[a] + l), o.push(u[a + 1] + l), o.push(u[a + 2] + l);
              for (a = 0; a < i.length; a++) n.push(i[a]);
            }
          },
        },
        to = {
          build: function (t) {
            var e,
              i,
              r,
              n,
              o,
              s,
              a = t.points;
            if (t.type === Nt.CIRC) {
              var h = t.shape;
              (e = h.x), (i = h.y), (o = s = h.radius), (r = n = 0);
            } else if (t.type === Nt.ELIP) {
              var u = t.shape;
              (e = u.x), (i = u.y), (o = u.width), (s = u.height), (r = n = 0);
            } else {
              var l = t.shape,
                c = l.width / 2,
                d = l.height / 2;
              (e = l.x + c),
                (i = l.y + d),
                (r =
                  c -
                  (o = s = Math.max(0, Math.min(l.radius, Math.min(c, d))))),
                (n = d - s);
            }
            if (o >= 0 && s >= 0 && r >= 0 && n >= 0) {
              var p = Math.ceil(2.3 * Math.sqrt(o + s)),
                _ = 8 * p + (r ? 4 : 0) + (n ? 4 : 0);
              if (((a.length = _), 0 !== _)) {
                if (0 === p)
                  return (
                    (a.length = 8),
                    (a[0] = a[6] = e + r),
                    (a[1] = a[3] = i + n),
                    (a[2] = a[4] = e - r),
                    void (a[5] = a[7] = i - n)
                  );
                var f,
                  m,
                  y = 0,
                  g = 4 * p + (r ? 2 : 0) + 2,
                  v = g,
                  b = _,
                  x = e + (f = r + o),
                  w = e - f,
                  T = i + (m = n);
                if (
                  ((a[y++] = x), (a[y++] = T), (a[--g] = T), (a[--g] = w), n)
                ) {
                  var A = i - m;
                  (a[v++] = w), (a[v++] = A), (a[--b] = A), (a[--b] = x);
                }
                for (var S = 1; S < p; S++) {
                  var E = (Math.PI / 2) * (S / p);
                  (x = e + (f = r + Math.cos(E) * o)),
                    (w = e - f),
                    (T = i + (m = n + Math.sin(E) * s)),
                    (A = i - m),
                    (a[y++] = x),
                    (a[y++] = T),
                    (a[--g] = T),
                    (a[--g] = w),
                    (a[v++] = w),
                    (a[v++] = A),
                    (a[--b] = A),
                    (a[--b] = x);
                }
                (x = e + (f = r)),
                  (w = e - f),
                  (T = i + (m = n + s)),
                  (A = i - m),
                  (a[y++] = x),
                  (a[y++] = T),
                  (a[--b] = A),
                  (a[--b] = x),
                  r && ((a[y++] = w), (a[y++] = T), (a[--b] = A), (a[--b] = w));
              }
            } else a.length = 0;
          },
          triangulate: function (t, e) {
            var i = t.points,
              r = e.points,
              n = e.indices;
            if (0 !== i.length) {
              var o,
                s,
                a = r.length / 2,
                h = a;
              if (t.type !== Nt.RREC) {
                var u = t.shape;
                (o = u.x), (s = u.y);
              } else {
                var l = t.shape;
                (o = l.x + l.width / 2), (s = l.y + l.height / 2);
              }
              var c = t.matrix;
              r.push(
                t.matrix ? c.a * o + c.c * s + c.tx : o,
                t.matrix ? c.b * o + c.d * s + c.ty : s
              ),
                a++,
                r.push(i[0], i[1]);
              for (var d = 2; d < i.length; d += 2)
                r.push(i[d], i[d + 1]), n.push(a++, h, a);
              n.push(h + 1, h, a);
            }
          },
        };
      function eo(t, e, i) {
        return t + (e - t) * i;
      }
      function io(t, e, i, r, n, o, s) {
        void 0 === s && (s = []);
        for (
          var a = s, h = 0, u = 0, l = 0, c = 0, d = 0, p = 0, _ = 0, f = 0;
          _ <= 20;
          ++_
        )
          (h = eo(t, i, (f = _ / 20))),
            (u = eo(e, r, f)),
            (l = eo(i, n, f)),
            (c = eo(r, o, f)),
            (d = eo(h, l, f)),
            (p = eo(u, c, f)),
            (0 === _ && a[a.length - 2] === d && a[a.length - 1] === p) ||
              a.push(d, p);
        return a;
      }
      var ro = {
        build: function (t) {
          if (To.nextRoundedRectBehavior) to.build(t);
          else {
            var e = t.shape,
              i = t.points,
              r = e.x,
              n = e.y,
              o = e.width,
              s = e.height,
              a = Math.max(0, Math.min(e.radius, Math.min(o, s) / 2));
            (i.length = 0),
              a
                ? (io(r, n + a, r, n, r + a, n, i),
                  io(r + o - a, n, r + o, n, r + o, n + a, i),
                  io(r + o, n + s - a, r + o, n + s, r + o - a, n + s, i),
                  io(r + a, n + s, r, n + s, r, n + s - a, i))
                : i.push(r, n, r + o, n, r + o, n + s, r, n + s);
          }
        },
        triangulate: function (t, e) {
          if (To.nextRoundedRectBehavior) to.triangulate(t, e);
          else {
            for (
              var i = t.points,
                r = e.points,
                n = e.indices,
                o = r.length / 2,
                s = st(i, null, 2),
                a = 0,
                h = s.length;
              a < h;
              a += 3
            )
              n.push(s[a] + o), n.push(s[a + 1] + o), n.push(s[a + 2] + o);
            for (a = 0, h = i.length; a < h; a++) r.push(i[a], i[++a]);
          }
        },
      };
      function no(t, e, i, r, n, o, s, a) {
        var h, u;
        s ? ((h = r), (u = -i)) : ((h = -r), (u = i));
        var l = t - i * n + h,
          c = e - r * n + u,
          d = t + i * o + h,
          p = e + r * o + u;
        return a.push(l, c), a.push(d, p), 2;
      }
      function oo(t, e, i, r, n, o, s, a) {
        var h = i - t,
          u = r - e,
          l = Math.atan2(h, u),
          c = Math.atan2(n - t, o - e);
        a && l < c ? (l += 2 * Math.PI) : !a && l > c && (c += 2 * Math.PI);
        var d = l,
          p = c - l,
          _ = Math.abs(p),
          f = Math.sqrt(h * h + u * u),
          m = 1 + (((15 * _ * Math.sqrt(f)) / Math.PI) | 0),
          y = p / m;
        if (((d += y), a)) {
          s.push(t, e), s.push(i, r);
          for (var g = 1, v = d; g < m; g++, v += y)
            s.push(t, e), s.push(t + Math.sin(v) * f, e + Math.cos(v) * f);
          s.push(t, e), s.push(n, o);
        } else {
          for (s.push(i, r), s.push(t, e), g = 1, v = d; g < m; g++, v += y)
            s.push(t + Math.sin(v) * f, e + Math.cos(v) * f), s.push(t, e);
          s.push(n, o), s.push(t, e);
        }
        return 2 * m;
      }
      function so(t, e) {
        t.lineStyle.native
          ? (function (t, e) {
              var i = 0,
                r = t.shape,
                n = t.points || r.points,
                o = r.type !== Nt.POLY || r.closeStroke;
              if (0 !== n.length) {
                var s = e.points,
                  a = e.indices,
                  h = n.length / 2,
                  u = s.length / 2,
                  l = u;
                for (s.push(n[0], n[1]), i = 1; i < h; i++)
                  s.push(n[2 * i], n[2 * i + 1]), a.push(l, l + 1), l++;
                o && a.push(l, u);
              }
            })(t, e)
          : (function (t, e) {
              var i = t.shape,
                r = t.points || i.points.slice(),
                n = e.closePointEps;
              if (0 !== r.length) {
                var o = t.lineStyle,
                  s = new Vt(r[0], r[1]),
                  a = new Vt(r[r.length - 2], r[r.length - 1]),
                  h = i.type !== Nt.POLY || i.closeStroke,
                  u = Math.abs(s.x - a.x) < n && Math.abs(s.y - a.y) < n;
                if (h) {
                  (r = r.slice()),
                    u &&
                      (r.pop(),
                      r.pop(),
                      a.set(r[r.length - 2], r[r.length - 1]));
                  var l = 0.5 * (s.x + a.x),
                    c = 0.5 * (a.y + s.y);
                  r.unshift(l, c), r.push(l, c);
                }
                var d = e.points,
                  p = r.length / 2,
                  _ = r.length,
                  f = d.length / 2,
                  m = o.width / 2,
                  y = m * m,
                  g = o.miterLimit * o.miterLimit,
                  v = r[0],
                  b = r[1],
                  x = r[2],
                  w = r[3],
                  T = 0,
                  A = 0,
                  S = -(b - w),
                  E = v - x,
                  C = 0,
                  M = 0,
                  P = Math.sqrt(S * S + E * E);
                (S /= P), (E /= P), (S *= m), (E *= m);
                var B = o.alignment,
                  O = 2 * (1 - B),
                  R = 2 * B;
                h ||
                  (o.cap === Hn.ROUND
                    ? (_ +=
                        oo(
                          v - S * (O - R) * 0.5,
                          b - E * (O - R) * 0.5,
                          v - S * O,
                          b - E * O,
                          v + S * R,
                          b + E * R,
                          d,
                          !0
                        ) + 2)
                    : o.cap === Hn.SQUARE &&
                      (_ += no(v, b, S, E, O, R, !0, d))),
                  d.push(v - S * O, b - E * O),
                  d.push(v + S * R, b + E * R);
                for (var I = 1; I < p - 1; ++I) {
                  (v = r[2 * (I - 1)]),
                    (b = r[2 * (I - 1) + 1]),
                    (x = r[2 * I]),
                    (w = r[2 * I + 1]),
                    (T = r[2 * (I + 1)]),
                    (A = r[2 * (I + 1) + 1]),
                    (S = -(b - w)),
                    (E = v - x),
                    (S /= P = Math.sqrt(S * S + E * E)),
                    (E /= P),
                    (S *= m),
                    (E *= m),
                    (C = -(w - A)),
                    (M = x - T),
                    (C /= P = Math.sqrt(C * C + M * M)),
                    (M /= P),
                    (C *= m),
                    (M *= m);
                  var k = x - v,
                    F = b - w,
                    D = x - T,
                    N = A - w,
                    L = k * D + F * N,
                    U = F * D - N * k,
                    G = U < 0;
                  if (Math.abs(U) < 0.001 * Math.abs(L))
                    d.push(x - S * O, w - E * O),
                      d.push(x + S * R, w + E * R),
                      L >= 0 &&
                        (o.join === Xn.ROUND
                          ? (_ +=
                              oo(
                                x,
                                w,
                                x - S * O,
                                w - E * O,
                                x - C * O,
                                w - M * O,
                                d,
                                !1
                              ) + 4)
                          : (_ += 2),
                        d.push(x - C * R, w - M * R),
                        d.push(x + C * O, w + M * O));
                  else {
                    var V = (-S + v) * (-E + w) - (-S + x) * (-E + b),
                      j = (-C + T) * (-M + w) - (-C + x) * (-M + A),
                      z = (k * j - D * V) / U,
                      X = (N * V - F * j) / U,
                      H = (z - x) * (z - x) + (X - w) * (X - w),
                      Y = x + (z - x) * O,
                      W = w + (X - w) * O,
                      q = x - (z - x) * R,
                      $ = w - (X - w) * R,
                      K = G ? O : R;
                    H <= Math.min(k * k + F * F, D * D + N * N) + K * K * y
                      ? o.join === Xn.BEVEL || H / y > g
                        ? (G
                            ? (d.push(Y, W),
                              d.push(x + S * R, w + E * R),
                              d.push(Y, W),
                              d.push(x + C * R, w + M * R))
                            : (d.push(x - S * O, w - E * O),
                              d.push(q, $),
                              d.push(x - C * O, w - M * O),
                              d.push(q, $)),
                          (_ += 2))
                        : o.join === Xn.ROUND
                        ? G
                          ? (d.push(Y, W),
                            d.push(x + S * R, w + E * R),
                            (_ +=
                              oo(
                                x,
                                w,
                                x + S * R,
                                w + E * R,
                                x + C * R,
                                w + M * R,
                                d,
                                !0
                              ) + 4),
                            d.push(Y, W),
                            d.push(x + C * R, w + M * R))
                          : (d.push(x - S * O, w - E * O),
                            d.push(q, $),
                            (_ +=
                              oo(
                                x,
                                w,
                                x - S * O,
                                w - E * O,
                                x - C * O,
                                w - M * O,
                                d,
                                !1
                              ) + 4),
                            d.push(x - C * O, w - M * O),
                            d.push(q, $))
                        : (d.push(Y, W), d.push(q, $))
                      : (d.push(x - S * O, w - E * O),
                        d.push(x + S * R, w + E * R),
                        o.join === Xn.ROUND
                          ? (_ += G
                              ? oo(
                                  x,
                                  w,
                                  x + S * R,
                                  w + E * R,
                                  x + C * R,
                                  w + M * R,
                                  d,
                                  !0
                                ) + 2
                              : oo(
                                  x,
                                  w,
                                  x - S * O,
                                  w - E * O,
                                  x - C * O,
                                  w - M * O,
                                  d,
                                  !1
                                ) + 2)
                          : o.join === Xn.MITER &&
                            H / y <= g &&
                            (G
                              ? (d.push(q, $), d.push(q, $))
                              : (d.push(Y, W), d.push(Y, W)),
                            (_ += 2)),
                        d.push(x - C * O, w - M * O),
                        d.push(x + C * R, w + M * R),
                        (_ += 2));
                  }
                }
                (v = r[2 * (p - 2)]),
                  (b = r[2 * (p - 2) + 1]),
                  (x = r[2 * (p - 1)]),
                  (S = -(b - (w = r[2 * (p - 1) + 1]))),
                  (E = v - x),
                  (S /= P = Math.sqrt(S * S + E * E)),
                  (E /= P),
                  (S *= m),
                  (E *= m),
                  d.push(x - S * O, w - E * O),
                  d.push(x + S * R, w + E * R),
                  h ||
                    (o.cap === Hn.ROUND
                      ? (_ +=
                          oo(
                            x - S * (O - R) * 0.5,
                            w - E * (O - R) * 0.5,
                            x - S * O,
                            w - E * O,
                            x + S * R,
                            w + E * R,
                            d,
                            !1
                          ) + 2)
                      : o.cap === Hn.SQUARE &&
                        (_ += no(x, w, S, E, O, R, !1, d)));
                var J = e.indices,
                  Z = qn.epsilon * qn.epsilon;
                for (I = f; I < _ + f - 2; ++I)
                  (v = d[2 * I]),
                    (b = d[2 * I + 1]),
                    (x = d[2 * (I + 1)]),
                    (w = d[2 * (I + 1) + 1]),
                    (T = d[2 * (I + 2)]),
                    (A = d[2 * (I + 2) + 1]),
                    Math.abs(v * (w - A) + x * (A - b) + T * (b - w)) < Z ||
                      J.push(I, I + 1, I + 2);
              }
            })(t, e);
      }
      var ao,
        ho,
        uo = (function () {
          function t() {}
          return (
            (t.curveTo = function (t, e, i, r, n, o) {
              var s = o[o.length - 2],
                a = o[o.length - 1] - e,
                h = s - t,
                u = r - e,
                l = i - t,
                c = Math.abs(a * l - h * u);
              if (c < 1e-8 || 0 === n)
                return (
                  (o[o.length - 2] === t && o[o.length - 1] === e) ||
                    o.push(t, e),
                  null
                );
              var d = a * a + h * h,
                p = u * u + l * l,
                _ = a * u + h * l,
                f = (n * Math.sqrt(d)) / c,
                m = (n * Math.sqrt(p)) / c,
                y = (f * _) / d,
                g = (m * _) / p,
                v = f * l + m * h,
                b = f * u + m * a,
                x = h * (m + y),
                w = a * (m + y),
                T = l * (f + g),
                A = u * (f + g);
              return {
                cx: v + t,
                cy: b + e,
                radius: n,
                startAngle: Math.atan2(w - b, x - v),
                endAngle: Math.atan2(A - b, T - v),
                anticlockwise: h * u > l * a,
              };
            }),
            (t.arc = function (t, e, i, r, n, o, s, a, h) {
              for (
                var u = s - o,
                  l = qn._segmentsCount(
                    Math.abs(u) * n,
                    40 * Math.ceil(Math.abs(u) / Lt)
                  ),
                  c = u / (2 * l),
                  d = 2 * c,
                  p = Math.cos(c),
                  _ = Math.sin(c),
                  f = l - 1,
                  m = (f % 1) / f,
                  y = 0;
                y <= f;
                ++y
              ) {
                var g = c + o + d * (y + m * y),
                  v = Math.cos(g),
                  b = -Math.sin(g);
                h.push((p * v + _ * b) * n + i, (p * -b + _ * v) * n + r);
              }
            }),
            t
          );
        })(),
        lo = (function () {
          function t() {}
          return (
            (t.curveLength = function (t, e, i, r, n, o, s, a) {
              for (
                var h = 0,
                  u = 0,
                  l = 0,
                  c = 0,
                  d = 0,
                  p = 0,
                  _ = 0,
                  f = 0,
                  m = 0,
                  y = 0,
                  g = 0,
                  v = t,
                  b = e,
                  x = 1;
                x <= 10;
                ++x
              )
                (y =
                  v -
                  (f =
                    (_ = (p = (d = 1 - (u = x / 10)) * d) * d) * t +
                    3 * p * u * i +
                    3 * d * (l = u * u) * n +
                    (c = l * u) * s)),
                  (g = b - (m = _ * e + 3 * p * u * r + 3 * d * l * o + c * a)),
                  (v = f),
                  (b = m),
                  (h += Math.sqrt(y * y + g * g));
              return h;
            }),
            (t.curveTo = function (e, i, r, n, o, s, a) {
              var h = a[a.length - 2],
                u = a[a.length - 1];
              a.length -= 2;
              var l = qn._segmentsCount(t.curveLength(h, u, e, i, r, n, o, s)),
                c = 0,
                d = 0,
                p = 0,
                _ = 0,
                f = 0;
              a.push(h, u);
              for (var m = 1, y = 0; m <= l; ++m)
                (p = (d = (c = 1 - (y = m / l)) * c) * c),
                  (f = (_ = y * y) * y),
                  a.push(
                    p * h + 3 * d * y * e + 3 * c * _ * r + f * o,
                    p * u + 3 * d * y * i + 3 * c * _ * n + f * s
                  );
            }),
            t
          );
        })(),
        co = (function () {
          function t() {}
          return (
            (t.curveLength = function (t, e, i, r, n, o) {
              var s = t - 2 * i + n,
                a = e - 2 * r + o,
                h = 2 * i - 2 * t,
                u = 2 * r - 2 * e,
                l = 4 * (s * s + a * a),
                c = 4 * (s * h + a * u),
                d = h * h + u * u,
                p = 2 * Math.sqrt(l + c + d),
                _ = Math.sqrt(l),
                f = 2 * l * _,
                m = 2 * Math.sqrt(d),
                y = c / _;
              return (
                (f * p +
                  _ * c * (p - m) +
                  (4 * d * l - c * c) * Math.log((2 * _ + y + p) / (y + m))) /
                (4 * f)
              );
            }),
            (t.curveTo = function (e, i, r, n, o) {
              for (
                var s = o[o.length - 2],
                  a = o[o.length - 1],
                  h = qn._segmentsCount(t.curveLength(s, a, e, i, r, n)),
                  u = 0,
                  l = 0,
                  c = 1;
                c <= h;
                ++c
              ) {
                var d = c / h;
                (u = s + (e - s) * d),
                  (l = a + (i - a) * d),
                  o.push(
                    u + (e + (r - e) * d - u) * d,
                    l + (i + (n - i) * d - l) * d
                  );
              }
            }),
            t
          );
        })(),
        po = (function () {
          function t() {
            this.reset();
          }
          return (
            (t.prototype.begin = function (t, e, i) {
              this.reset(),
                (this.style = t),
                (this.start = e),
                (this.attribStart = i);
            }),
            (t.prototype.end = function (t, e) {
              (this.attribSize = e - this.attribStart),
                (this.size = t - this.start);
            }),
            (t.prototype.reset = function () {
              (this.style = null),
                (this.size = 0),
                (this.start = 0),
                (this.attribStart = 0),
                (this.attribSize = 0);
            }),
            t
          );
        })(),
        _o =
          (((ao = {})[Nt.POLY] = Qn),
          (ao[Nt.CIRC] = to),
          (ao[Nt.ELIP] = to),
          (ao[Nt.RECT] = {
            build: function (t) {
              var e = t.shape,
                i = e.x,
                r = e.y,
                n = e.width,
                o = e.height,
                s = t.points;
              (s.length = 0), s.push(i, r, i + n, r, i + n, r + o, i, r + o);
            },
            triangulate: function (t, e) {
              var i = t.points,
                r = e.points,
                n = r.length / 2;
              r.push(i[0], i[1], i[2], i[3], i[6], i[7], i[4], i[5]),
                e.indices.push(n, n + 1, n + 2, n + 1, n + 2, n + 3);
            },
          }),
          (ao[Nt.RREC] = ro),
          ao),
        fo = [],
        mo = [],
        yo = (function () {
          function t(t, e, i, r) {
            void 0 === e && (e = null),
              void 0 === i && (i = null),
              void 0 === r && (r = null),
              (this.points = []),
              (this.holes = []),
              (this.shape = t),
              (this.lineStyle = i),
              (this.fillStyle = e),
              (this.matrix = r),
              (this.type = t.type);
          }
          return (
            (t.prototype.clone = function () {
              return new t(
                this.shape,
                this.fillStyle,
                this.lineStyle,
                this.matrix
              );
            }),
            (t.prototype.destroy = function () {
              (this.shape = null),
                (this.holes.length = 0),
                (this.holes = null),
                (this.points.length = 0),
                (this.points = null),
                (this.lineStyle = null),
                (this.fillStyle = null);
            }),
            t
          );
        })(),
        go = new Vt(),
        vo = (function (t) {
          function e() {
            var e = t.call(this) || this;
            return (
              (e.closePointEps = 1e-4),
              (e.boundsPadding = 0),
              (e.uvsFloat32 = null),
              (e.indicesUint16 = null),
              (e.batchable = !1),
              (e.points = []),
              (e.colors = []),
              (e.uvs = []),
              (e.indices = []),
              (e.textureIds = []),
              (e.graphicsData = []),
              (e.drawCalls = []),
              (e.batchDirty = -1),
              (e.batches = []),
              (e.dirty = 0),
              (e.cacheDirty = -1),
              (e.clearDirty = 0),
              (e.shapeIndex = 0),
              (e._bounds = new oe()),
              (e.boundsDirty = -1),
              e
            );
          }
          return (
            Jn(e, t),
            Object.defineProperty(e.prototype, "bounds", {
              get: function () {
                return (
                  this.updateBatches(),
                  this.boundsDirty !== this.dirty &&
                    ((this.boundsDirty = this.dirty), this.calculateBounds()),
                  this._bounds
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.invalidate = function () {
              (this.boundsDirty = -1),
                this.dirty++,
                this.batchDirty++,
                (this.shapeIndex = 0),
                (this.points.length = 0),
                (this.colors.length = 0),
                (this.uvs.length = 0),
                (this.indices.length = 0),
                (this.textureIds.length = 0);
              for (var t = 0; t < this.drawCalls.length; t++)
                this.drawCalls[t].texArray.clear(), mo.push(this.drawCalls[t]);
              for (
                this.drawCalls.length = 0, t = 0;
                t < this.batches.length;
                t++
              ) {
                var e = this.batches[t];
                e.reset(), fo.push(e);
              }
              this.batches.length = 0;
            }),
            (e.prototype.clear = function () {
              return (
                this.graphicsData.length > 0 &&
                  (this.invalidate(),
                  this.clearDirty++,
                  (this.graphicsData.length = 0)),
                this
              );
            }),
            (e.prototype.drawShape = function (t, e, i, r) {
              void 0 === e && (e = null),
                void 0 === i && (i = null),
                void 0 === r && (r = null);
              var n = new yo(t, e, i, r);
              return this.graphicsData.push(n), this.dirty++, this;
            }),
            (e.prototype.drawHole = function (t, e) {
              if ((void 0 === e && (e = null), !this.graphicsData.length))
                return null;
              var i = new yo(t, null, null, e),
                r = this.graphicsData[this.graphicsData.length - 1];
              return (
                (i.lineStyle = r.lineStyle), r.holes.push(i), this.dirty++, this
              );
            }),
            (e.prototype.destroy = function () {
              t.prototype.destroy.call(this);
              for (var e = 0; e < this.graphicsData.length; ++e)
                this.graphicsData[e].destroy();
              (this.points.length = 0),
                (this.points = null),
                (this.colors.length = 0),
                (this.colors = null),
                (this.uvs.length = 0),
                (this.uvs = null),
                (this.indices.length = 0),
                (this.indices = null),
                this.indexBuffer.destroy(),
                (this.indexBuffer = null),
                (this.graphicsData.length = 0),
                (this.graphicsData = null),
                (this.drawCalls.length = 0),
                (this.drawCalls = null),
                (this.batches.length = 0),
                (this.batches = null),
                (this._bounds = null);
            }),
            (e.prototype.containsPoint = function (t) {
              for (var e = this.graphicsData, i = 0; i < e.length; ++i) {
                var r = e[i];
                if (
                  r.fillStyle.visible &&
                  r.shape &&
                  (r.matrix ? r.matrix.applyInverse(t, go) : go.copyFrom(t),
                  r.shape.contains(go.x, go.y))
                ) {
                  var n = !1;
                  if (r.holes)
                    for (var o = 0; o < r.holes.length; o++)
                      if (r.holes[o].shape.contains(go.x, go.y)) {
                        n = !0;
                        break;
                      }
                  if (!n) return !0;
                }
              }
              return !1;
            }),
            (e.prototype.updateBatches = function () {
              if (this.graphicsData.length) {
                if (this.validateBatching()) {
                  this.cacheDirty = this.dirty;
                  var t = this.uvs,
                    e = this.graphicsData,
                    i = null,
                    r = null;
                  this.batches.length > 0 &&
                    (r = (i = this.batches[this.batches.length - 1]).style);
                  for (var n = this.shapeIndex; n < e.length; n++) {
                    this.shapeIndex++;
                    var o = e[n],
                      s = o.fillStyle,
                      a = o.lineStyle;
                    _o[o.type].build(o),
                      o.matrix && this.transformPoints(o.points, o.matrix),
                      (s.visible || a.visible) && this.processHoles(o.holes);
                    for (var h = 0; h < 2; h++) {
                      var u = 0 === h ? s : a;
                      if (u.visible) {
                        var l = u.texture.baseTexture,
                          c = this.indices.length,
                          d = this.points.length / 2;
                        (l.wrapMode = E.REPEAT),
                          0 === h ? this.processFill(o) : this.processLine(o);
                        var p = this.points.length / 2 - d;
                        0 !== p &&
                          (i &&
                            !this._compareStyles(r, u) &&
                            (i.end(c, d), (i = null)),
                          i ||
                            ((i = fo.pop() || new po()).begin(u, c, d),
                            this.batches.push(i),
                            (r = u)),
                          this.addUvs(
                            this.points,
                            t,
                            u.texture,
                            d,
                            p,
                            u.matrix
                          ));
                      }
                    }
                  }
                  var _ = this.indices.length,
                    f = this.points.length / 2;
                  if ((i && i.end(_, f), 0 !== this.batches.length)) {
                    var m = f > 65535;
                    this.indicesUint16 &&
                    this.indices.length === this.indicesUint16.length &&
                    m === this.indicesUint16.BYTES_PER_ELEMENT > 2
                      ? this.indicesUint16.set(this.indices)
                      : (this.indicesUint16 = m
                          ? new Uint32Array(this.indices)
                          : new Uint16Array(this.indices)),
                      (this.batchable = this.isBatchable()),
                      this.batchable
                        ? this.packBatches()
                        : this.buildDrawCalls();
                  } else this.batchable = !0;
                }
              } else this.batchable = !0;
            }),
            (e.prototype._compareStyles = function (t, e) {
              return (
                !(!t || !e) &&
                t.texture.baseTexture === e.texture.baseTexture &&
                t.color + t.alpha === e.color + e.alpha &&
                !!t.native == !!e.native
              );
            }),
            (e.prototype.validateBatching = function () {
              if (this.dirty === this.cacheDirty || !this.graphicsData.length)
                return !1;
              for (var t = 0, e = this.graphicsData.length; t < e; t++) {
                var i = this.graphicsData[t],
                  r = i.fillStyle,
                  n = i.lineStyle;
                if (r && !r.texture.baseTexture.valid) return !1;
                if (n && !n.texture.baseTexture.valid) return !1;
              }
              return !0;
            }),
            (e.prototype.packBatches = function () {
              this.batchDirty++, (this.uvsFloat32 = new Float32Array(this.uvs));
              for (var t = this.batches, e = 0, i = t.length; e < i; e++)
                for (var r = t[e], n = 0; n < r.size; n++) {
                  var o = r.start + n;
                  this.indicesUint16[o] = this.indicesUint16[o] - r.attribStart;
                }
            }),
            (e.prototype.isBatchable = function () {
              if (this.points.length > 131070) return !1;
              for (var t = this.batches, i = 0; i < t.length; i++)
                if (t[i].style.native) return !1;
              return this.points.length < 2 * e.BATCHABLE_SIZE;
            }),
            (e.prototype.buildDrawCalls = function () {
              for (
                var t = ++Pe._globalBatch, e = 0;
                e < this.drawCalls.length;
                e++
              )
                this.drawCalls[e].texArray.clear(), mo.push(this.drawCalls[e]);
              this.drawCalls.length = 0;
              var i = this.colors,
                r = this.textureIds,
                n = mo.pop();
              n || ((n = new Tr()).texArray = new Ar()),
                (n.texArray.count = 0),
                (n.start = 0),
                (n.size = 0),
                (n.type = b.TRIANGLES);
              var o = 0,
                s = null,
                a = 0,
                h = !1,
                u = b.TRIANGLES,
                l = 0;
              for (
                this.drawCalls.push(n), e = 0;
                e < this.batches.length;
                e++
              ) {
                var c = this.batches[e],
                  d = c.style,
                  p = d.texture.baseTexture;
                h !== !!d.native &&
                  ((u = (h = !!d.native) ? b.LINES : b.TRIANGLES),
                  (s = null),
                  (o = 8),
                  t++),
                  s !== p &&
                    ((s = p),
                    p._batchEnabled !== t &&
                      (8 === o &&
                        (t++,
                        (o = 0),
                        n.size > 0 &&
                          ((n = mo.pop()) ||
                            ((n = new Tr()).texArray = new Ar()),
                          this.drawCalls.push(n)),
                        (n.start = l),
                        (n.size = 0),
                        (n.texArray.count = 0),
                        (n.type = u)),
                      (p.touched = 1),
                      (p._batchEnabled = t),
                      (p._batchLocation = o),
                      (p.wrapMode = E.REPEAT),
                      (n.texArray.elements[n.texArray.count++] = p),
                      o++)),
                  (n.size += c.size),
                  (l += c.size),
                  (a = p._batchLocation),
                  this.addColors(
                    i,
                    d.color,
                    d.alpha,
                    c.attribSize,
                    c.attribStart
                  ),
                  this.addTextureIds(r, a, c.attribSize, c.attribStart);
              }
              (Pe._globalBatch = t), this.packAttributes();
            }),
            (e.prototype.packAttributes = function () {
              for (
                var t = this.points,
                  e = this.uvs,
                  i = this.colors,
                  r = this.textureIds,
                  n = new ArrayBuffer(3 * t.length * 4),
                  o = new Float32Array(n),
                  s = new Uint32Array(n),
                  a = 0,
                  h = 0;
                h < t.length / 2;
                h++
              )
                (o[a++] = t[2 * h]),
                  (o[a++] = t[2 * h + 1]),
                  (o[a++] = e[2 * h]),
                  (o[a++] = e[2 * h + 1]),
                  (s[a++] = i[h]),
                  (o[a++] = r[h]);
              this._buffer.update(n),
                this._indexBuffer.update(this.indicesUint16);
            }),
            (e.prototype.processFill = function (t) {
              t.holes.length
                ? Qn.triangulate(t, this)
                : _o[t.type].triangulate(t, this);
            }),
            (e.prototype.processLine = function (t) {
              so(t, this);
              for (var e = 0; e < t.holes.length; e++) so(t.holes[e], this);
            }),
            (e.prototype.processHoles = function (t) {
              for (var e = 0; e < t.length; e++) {
                var i = t[e];
                _o[i.type].build(i),
                  i.matrix && this.transformPoints(i.points, i.matrix);
              }
            }),
            (e.prototype.calculateBounds = function () {
              var t = this._bounds;
              t.clear(),
                t.addVertexData(this.points, 0, this.points.length),
                t.pad(this.boundsPadding, this.boundsPadding);
            }),
            (e.prototype.transformPoints = function (t, e) {
              for (var i = 0; i < t.length / 2; i++) {
                var r = t[2 * i],
                  n = t[2 * i + 1];
                (t[2 * i] = e.a * r + e.c * n + e.tx),
                  (t[2 * i + 1] = e.b * r + e.d * n + e.ty);
              }
            }),
            (e.prototype.addColors = function (t, e, i, r, n) {
              void 0 === n && (n = 0);
              var o = vt((e >> 16) + (65280 & e) + ((255 & e) << 16), i);
              t.length = Math.max(t.length, n + r);
              for (var s = 0; s < r; s++) t[n + s] = o;
            }),
            (e.prototype.addTextureIds = function (t, e, i, r) {
              void 0 === r && (r = 0), (t.length = Math.max(t.length, r + i));
              for (var n = 0; n < i; n++) t[r + n] = e;
            }),
            (e.prototype.addUvs = function (t, e, i, r, n, o) {
              void 0 === o && (o = null);
              for (var s = 0, a = e.length, h = i.frame; s < n; ) {
                var u = t[2 * (r + s)],
                  l = t[2 * (r + s) + 1];
                if (o) {
                  var c = o.a * u + o.c * l + o.tx;
                  (l = o.b * u + o.d * l + o.ty), (u = c);
                }
                s++, e.push(u / h.width, l / h.height);
              }
              var d = i.baseTexture;
              (h.width < d.width || h.height < d.height) &&
                this.adjustUvs(e, i, a, n);
            }),
            (e.prototype.adjustUvs = function (t, e, i, r) {
              for (
                var n = e.baseTexture,
                  o = 1e-6,
                  s = i + 2 * r,
                  a = e.frame,
                  h = a.width / n.width,
                  u = a.height / n.height,
                  l = a.x / a.width,
                  c = a.y / a.height,
                  d = Math.floor(t[i] + o),
                  p = Math.floor(t[i + 1] + o),
                  _ = i + 2;
                _ < s;
                _ += 2
              )
                (d = Math.min(d, Math.floor(t[_] + o))),
                  (p = Math.min(p, Math.floor(t[_ + 1] + o)));
              for (l -= d, c -= p, _ = i; _ < s; _ += 2)
                (t[_] = (t[_] + l) * h), (t[_ + 1] = (t[_ + 1] + c) * u);
            }),
            (e.BATCHABLE_SIZE = 100),
            e
          );
        })(Mr),
        bo = (function (t) {
          function e() {
            var e = (null !== t && t.apply(this, arguments)) || this;
            return (
              (e.width = 0),
              (e.alignment = 0.5),
              (e.native = !1),
              (e.cap = Hn.BUTT),
              (e.join = Xn.MITER),
              (e.miterLimit = 10),
              e
            );
          }
          return (
            Jn(e, t),
            (e.prototype.clone = function () {
              var t = new e();
              return (
                (t.color = this.color),
                (t.alpha = this.alpha),
                (t.texture = this.texture),
                (t.matrix = this.matrix),
                (t.visible = this.visible),
                (t.width = this.width),
                (t.alignment = this.alignment),
                (t.native = this.native),
                (t.cap = this.cap),
                (t.join = this.join),
                (t.miterLimit = this.miterLimit),
                t
              );
            }),
            (e.prototype.reset = function () {
              t.prototype.reset.call(this),
                (this.color = 0),
                (this.alignment = 0.5),
                (this.width = 0),
                (this.native = !1);
            }),
            e
          );
        })($n),
        xo = new Float32Array(3),
        wo = {},
        To = (function (t) {
          function e(e) {
            void 0 === e && (e = null);
            var i = t.call(this) || this;
            return (
              (i.shader = null),
              (i.pluginName = "batch"),
              (i.currentPath = null),
              (i.batches = []),
              (i.batchTint = -1),
              (i.batchDirty = -1),
              (i.vertexData = null),
              (i._fillStyle = new $n()),
              (i._lineStyle = new bo()),
              (i._matrix = null),
              (i._holeMode = !1),
              (i.state = Xi.for2d()),
              (i._geometry = e || new vo()),
              i._geometry.refCount++,
              (i._transformID = -1),
              (i.tint = 16777215),
              (i.blendMode = v.NORMAL),
              i
            );
          }
          return (
            Jn(e, t),
            Object.defineProperty(e.prototype, "geometry", {
              get: function () {
                return this._geometry;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.clone = function () {
              return this.finishPoly(), new e(this._geometry);
            }),
            Object.defineProperty(e.prototype, "blendMode", {
              get: function () {
                return this.state.blendMode;
              },
              set: function (t) {
                this.state.blendMode = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "tint", {
              get: function () {
                return this._tint;
              },
              set: function (t) {
                this._tint = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "fill", {
              get: function () {
                return this._fillStyle;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "line", {
              get: function () {
                return this._lineStyle;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.lineStyle = function (t, e, i, r, n) {
              return (
                void 0 === t && (t = null),
                void 0 === e && (e = 0),
                void 0 === i && (i = 1),
                void 0 === r && (r = 0.5),
                void 0 === n && (n = !1),
                "number" == typeof t &&
                  (t = {
                    width: t,
                    color: e,
                    alpha: i,
                    alignment: r,
                    native: n,
                  }),
                this.lineTextureStyle(t)
              );
            }),
            (e.prototype.lineTextureStyle = function (t) {
              (t = Object.assign(
                {
                  width: 0,
                  texture: Ye.WHITE,
                  color: t && t.texture ? 16777215 : 0,
                  alpha: 1,
                  matrix: null,
                  alignment: 0.5,
                  native: !1,
                  cap: Hn.BUTT,
                  join: Xn.MITER,
                  miterLimit: 10,
                },
                t
              )),
                this.currentPath && this.startPoly();
              var e = t.width > 0 && t.alpha > 0;
              return (
                e
                  ? (t.matrix &&
                      ((t.matrix = t.matrix.clone()), t.matrix.invert()),
                    Object.assign(this._lineStyle, { visible: e }, t))
                  : this._lineStyle.reset(),
                this
              );
            }),
            (e.prototype.startPoly = function () {
              if (this.currentPath) {
                var t = this.currentPath.points,
                  e = this.currentPath.points.length;
                e > 2 &&
                  (this.drawShape(this.currentPath),
                  (this.currentPath = new Yt()),
                  (this.currentPath.closeStroke = !1),
                  this.currentPath.points.push(t[e - 2], t[e - 1]));
              } else
                (this.currentPath = new Yt()),
                  (this.currentPath.closeStroke = !1);
            }),
            (e.prototype.finishPoly = function () {
              this.currentPath &&
                (this.currentPath.points.length > 2
                  ? (this.drawShape(this.currentPath),
                    (this.currentPath = null))
                  : (this.currentPath.points.length = 0));
            }),
            (e.prototype.moveTo = function (t, e) {
              return (
                this.startPoly(),
                (this.currentPath.points[0] = t),
                (this.currentPath.points[1] = e),
                this
              );
            }),
            (e.prototype.lineTo = function (t, e) {
              this.currentPath || this.moveTo(0, 0);
              var i = this.currentPath.points,
                r = i[i.length - 2],
                n = i[i.length - 1];
              return (r === t && n === e) || i.push(t, e), this;
            }),
            (e.prototype._initCurve = function (t, e) {
              void 0 === t && (t = 0),
                void 0 === e && (e = 0),
                this.currentPath
                  ? 0 === this.currentPath.points.length &&
                    (this.currentPath.points = [t, e])
                  : this.moveTo(t, e);
            }),
            (e.prototype.quadraticCurveTo = function (t, e, i, r) {
              this._initCurve();
              var n = this.currentPath.points;
              return (
                0 === n.length && this.moveTo(0, 0),
                co.curveTo(t, e, i, r, n),
                this
              );
            }),
            (e.prototype.bezierCurveTo = function (t, e, i, r, n, o) {
              return (
                this._initCurve(),
                lo.curveTo(t, e, i, r, n, o, this.currentPath.points),
                this
              );
            }),
            (e.prototype.arcTo = function (t, e, i, r, n) {
              this._initCurve(t, e);
              var o = this.currentPath.points,
                s = uo.curveTo(t, e, i, r, n, o);
              if (s) {
                var a = s.cx,
                  h = s.cy,
                  u = s.radius,
                  l = s.startAngle,
                  c = s.endAngle,
                  d = s.anticlockwise;
                this.arc(a, h, u, l, c, d);
              }
              return this;
            }),
            (e.prototype.arc = function (t, e, i, r, n, o) {
              if ((void 0 === o && (o = !1), r === n)) return this;
              if (
                (!o && n <= r ? (n += Lt) : o && r <= n && (r += Lt),
                0 == n - r)
              )
                return this;
              var s = t + Math.cos(r) * i,
                a = e + Math.sin(r) * i,
                h = this._geometry.closePointEps,
                u = this.currentPath ? this.currentPath.points : null;
              if (u) {
                var l = Math.abs(u[u.length - 2] - s),
                  c = Math.abs(u[u.length - 1] - a);
                (l < h && c < h) || u.push(s, a);
              } else this.moveTo(s, a), (u = this.currentPath.points);
              return uo.arc(s, a, t, e, i, r, n, o, u), this;
            }),
            (e.prototype.beginFill = function (t, e) {
              return (
                void 0 === t && (t = 0),
                void 0 === e && (e = 1),
                this.beginTextureFill({ texture: Ye.WHITE, color: t, alpha: e })
              );
            }),
            (e.prototype.beginTextureFill = function (t) {
              (t = Object.assign(
                { texture: Ye.WHITE, color: 16777215, alpha: 1, matrix: null },
                t
              )),
                this.currentPath && this.startPoly();
              var e = t.alpha > 0;
              return (
                e
                  ? (t.matrix &&
                      ((t.matrix = t.matrix.clone()), t.matrix.invert()),
                    Object.assign(this._fillStyle, { visible: e }, t))
                  : this._fillStyle.reset(),
                this
              );
            }),
            (e.prototype.endFill = function () {
              return this.finishPoly(), this._fillStyle.reset(), this;
            }),
            (e.prototype.drawRect = function (t, e, i, r) {
              return this.drawShape(new zt(t, e, i, r));
            }),
            (e.prototype.drawRoundedRect = function (t, e, i, r, n) {
              return this.drawShape(new Wt(t, e, i, r, n));
            }),
            (e.prototype.drawCircle = function (t, e, i) {
              return this.drawShape(new Xt(t, e, i));
            }),
            (e.prototype.drawEllipse = function (t, e, i, r) {
              return this.drawShape(new Ht(t, e, i, r));
            }),
            (e.prototype.drawPolygon = function () {
              for (
                var t, e = arguments, i = [], r = 0;
                r < arguments.length;
                r++
              )
                i[r] = e[r];
              var n = !0,
                o = i[0];
              o.points
                ? ((n = o.closeStroke), (t = o.points))
                : (t = Array.isArray(i[0]) ? i[0] : i);
              var s = new Yt(t);
              return (s.closeStroke = n), this.drawShape(s), this;
            }),
            (e.prototype.drawShape = function (t) {
              return (
                this._holeMode
                  ? this._geometry.drawHole(t, this._matrix)
                  : this._geometry.drawShape(
                      t,
                      this._fillStyle.clone(),
                      this._lineStyle.clone(),
                      this._matrix
                    ),
                this
              );
            }),
            (e.prototype.clear = function () {
              return (
                this._geometry.clear(),
                this._lineStyle.reset(),
                this._fillStyle.reset(),
                this._boundsID++,
                (this._matrix = null),
                (this._holeMode = !1),
                (this.currentPath = null),
                this
              );
            }),
            (e.prototype.isFastRect = function () {
              var t = this._geometry.graphicsData;
              return !(
                1 !== t.length ||
                t[0].shape.type !== Nt.RECT ||
                t[0].matrix ||
                t[0].holes.length ||
                (t[0].lineStyle.visible && t[0].lineStyle.width)
              );
            }),
            (e.prototype._render = function (t) {
              this.finishPoly();
              var e = this._geometry;
              e.updateBatches(),
                e.batchable
                  ? (this.batchDirty !== e.batchDirty &&
                      this._populateBatches(),
                    this._renderBatched(t))
                  : (t.batch.flush(), this._renderDirect(t));
            }),
            (e.prototype._populateBatches = function () {
              var t = this._geometry,
                e = this.blendMode,
                i = t.batches.length;
              (this.batchTint = -1),
                (this._transformID = -1),
                (this.batchDirty = t.batchDirty),
                (this.batches.length = i),
                (this.vertexData = new Float32Array(t.points));
              for (var r = 0; r < i; r++) {
                var n = t.batches[r],
                  o = n.style.color,
                  s = new Float32Array(
                    this.vertexData.buffer,
                    4 * n.attribStart * 2,
                    2 * n.attribSize
                  ),
                  a = new Float32Array(
                    t.uvsFloat32.buffer,
                    4 * n.attribStart * 2,
                    2 * n.attribSize
                  ),
                  h = {
                    vertexData: s,
                    blendMode: e,
                    indices: new Uint16Array(
                      t.indicesUint16.buffer,
                      2 * n.start,
                      n.size
                    ),
                    uvs: a,
                    _batchRGB: pt(o),
                    _tintRGB: o,
                    _texture: n.style.texture,
                    alpha: n.style.alpha,
                    worldAlpha: 1,
                  };
                this.batches[r] = h;
              }
            }),
            (e.prototype._renderBatched = function (t) {
              if (this.batches.length) {
                t.batch.setObjectRenderer(t.plugins[this.pluginName]),
                  this.calculateVertices(),
                  this.calculateTints();
                for (var e = 0, i = this.batches.length; e < i; e++) {
                  var r = this.batches[e];
                  (r.worldAlpha = this.worldAlpha * r.alpha),
                    t.plugins[this.pluginName].render(r);
                }
              }
            }),
            (e.prototype._renderDirect = function (t) {
              var e = this._resolveDirectShader(t),
                i = this._geometry,
                r = this.tint,
                n = this.worldAlpha,
                o = e.uniforms,
                s = i.drawCalls;
              (o.translationMatrix = this.transform.worldTransform),
                (o.tint[0] = (((r >> 16) & 255) / 255) * n),
                (o.tint[1] = (((r >> 8) & 255) / 255) * n),
                (o.tint[2] = ((255 & r) / 255) * n),
                (o.tint[3] = n),
                t.shader.bind(e),
                t.geometry.bind(i, e),
                t.state.set(this.state);
              for (var a = 0, h = s.length; a < h; a++)
                this._renderDrawCallDirect(t, i.drawCalls[a]);
            }),
            (e.prototype._renderDrawCallDirect = function (t, e) {
              for (
                var i = e.texArray,
                  r = e.type,
                  n = e.size,
                  o = e.start,
                  s = i.count,
                  a = 0;
                a < s;
                a++
              )
                t.texture.bind(i.elements[a], a);
              t.geometry.draw(r, n, o);
            }),
            (e.prototype._resolveDirectShader = function (t) {
              var e = this.shader,
                i = this.pluginName;
              if (!e) {
                if (!wo[i]) {
                  for (
                    var r = t.plugins[i].MAX_TEXTURES,
                      n = new Int32Array(r),
                      o = 0;
                    o < r;
                    o++
                  )
                    n[o] = o;
                  var s = {
                      tint: new Float32Array([1, 1, 1, 1]),
                      translationMatrix: new $t(),
                      default: si.from({ uSamplers: n }, !0),
                    },
                    a = t.plugins[i]._shader.program;
                  wo[i] = new zi(a, s);
                }
                e = wo[i];
              }
              return e;
            }),
            (e.prototype._calculateBounds = function () {
              this.finishPoly();
              var t = this._geometry;
              if (t.graphicsData.length) {
                var e = t.bounds,
                  i = e.minX,
                  r = e.minY,
                  n = e.maxX,
                  o = e.maxY;
                this._bounds.addFrame(this.transform, i, r, n, o);
              }
            }),
            (e.prototype.containsPoint = function (t) {
              return (
                this.worldTransform.applyInverse(t, e._TEMP_POINT),
                this._geometry.containsPoint(e._TEMP_POINT)
              );
            }),
            (e.prototype.calculateTints = function () {
              if (this.batchTint !== this.tint) {
                this.batchTint = this.tint;
                for (
                  var t = pt(this.tint, xo), e = 0;
                  e < this.batches.length;
                  e++
                ) {
                  var i = this.batches[e],
                    r = i._batchRGB,
                    n =
                      ((t[0] * r[0] * 255) << 16) +
                      ((t[1] * r[1] * 255) << 8) +
                      (0 | (t[2] * r[2] * 255));
                  i._tintRGB = (n >> 16) + (65280 & n) + ((255 & n) << 16);
                }
              }
            }),
            (e.prototype.calculateVertices = function () {
              var t = this.transform._worldID;
              if (this._transformID !== t) {
                this._transformID = t;
                for (
                  var e = this.transform.worldTransform,
                    i = e.a,
                    r = e.b,
                    n = e.c,
                    o = e.d,
                    s = e.tx,
                    a = e.ty,
                    h = this._geometry.points,
                    u = this.vertexData,
                    l = 0,
                    c = 0;
                  c < h.length;
                  c += 2
                ) {
                  var d = h[c],
                    p = h[c + 1];
                  (u[l++] = i * d + n * p + s), (u[l++] = o * p + r * d + a);
                }
              }
            }),
            (e.prototype.closePath = function () {
              var t = this.currentPath;
              return t && ((t.closeStroke = !0), this.finishPoly()), this;
            }),
            (e.prototype.setMatrix = function (t) {
              return (this._matrix = t), this;
            }),
            (e.prototype.beginHole = function () {
              return this.finishPoly(), (this._holeMode = !0), this;
            }),
            (e.prototype.endHole = function () {
              return this.finishPoly(), (this._holeMode = !1), this;
            }),
            (e.prototype.destroy = function (e) {
              this._geometry.refCount--,
                0 === this._geometry.refCount && this._geometry.dispose(),
                (this._matrix = null),
                (this.currentPath = null),
                this._lineStyle.destroy(),
                (this._lineStyle = null),
                this._fillStyle.destroy(),
                (this._fillStyle = null),
                (this._geometry = null),
                (this.shader = null),
                (this.vertexData = null),
                (this.batches.length = 0),
                (this.batches = null),
                t.prototype.destroy.call(this, e);
            }),
            (e.nextRoundedRectBehavior = !1),
            (e._TEMP_POINT = new Vt()),
            e
          );
        })(ce),
        Ao = function (t, e) {
          return (
            (Ao =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
              }),
            Ao(t, e)
          );
        },
        So = new Vt(),
        Eo = new Uint16Array([0, 1, 2, 0, 2, 3]),
        Co = (function (t) {
          function e(e) {
            var i = t.call(this) || this;
            return (
              (i._anchor = new qt(
                i._onAnchorUpdate,
                i,
                e ? e.defaultAnchor.x : 0,
                e ? e.defaultAnchor.y : 0
              )),
              (i._texture = null),
              (i._width = 0),
              (i._height = 0),
              (i._tint = null),
              (i._tintRGB = null),
              (i.tint = 16777215),
              (i.blendMode = v.NORMAL),
              (i._cachedTint = 16777215),
              (i.uvs = null),
              (i.texture = e || Ye.EMPTY),
              (i.vertexData = new Float32Array(8)),
              (i.vertexTrimmedData = null),
              (i._transformID = -1),
              (i._textureID = -1),
              (i._transformTrimmedID = -1),
              (i._textureTrimmedID = -1),
              (i.indices = Eo),
              (i.pluginName = "batch"),
              (i.isSprite = !0),
              (i._roundPixels = nt.ROUND_PIXELS),
              i
            );
          }
          return (
            (function (t, e) {
              function i() {
                this.constructor = t;
              }
              Ao(t, e),
                (t.prototype =
                  null === e
                    ? Object.create(e)
                    : ((i.prototype = e.prototype), new i()));
            })(e, t),
            (e.prototype._onTextureUpdate = function () {
              (this._textureID = -1),
                (this._textureTrimmedID = -1),
                (this._cachedTint = 16777215),
                this._width &&
                  (this.scale.x =
                    (Et(this.scale.x) * this._width) /
                    this._texture.orig.width),
                this._height &&
                  (this.scale.y =
                    (Et(this.scale.y) * this._height) /
                    this._texture.orig.height);
            }),
            (e.prototype._onAnchorUpdate = function () {
              (this._transformID = -1), (this._transformTrimmedID = -1);
            }),
            (e.prototype.calculateVertices = function () {
              var t = this._texture;
              if (
                this._transformID !== this.transform._worldID ||
                this._textureID !== t._updateID
              ) {
                this._textureID !== t._updateID &&
                  (this.uvs = this._texture._uvs.uvsFloat32),
                  (this._transformID = this.transform._worldID),
                  (this._textureID = t._updateID);
                var e = this.transform.worldTransform,
                  i = e.a,
                  r = e.b,
                  n = e.c,
                  o = e.d,
                  s = e.tx,
                  a = e.ty,
                  h = this.vertexData,
                  u = t.trim,
                  l = t.orig,
                  c = this._anchor,
                  d = 0,
                  p = 0,
                  _ = 0,
                  f = 0;
                if (
                  (u
                    ? ((d = (p = u.x - c._x * l.width) + u.width),
                      (_ = (f = u.y - c._y * l.height) + u.height))
                    : ((d = (p = -c._x * l.width) + l.width),
                      (_ = (f = -c._y * l.height) + l.height)),
                  (h[0] = i * p + n * f + s),
                  (h[1] = o * f + r * p + a),
                  (h[2] = i * d + n * f + s),
                  (h[3] = o * f + r * d + a),
                  (h[4] = i * d + n * _ + s),
                  (h[5] = o * _ + r * d + a),
                  (h[6] = i * p + n * _ + s),
                  (h[7] = o * _ + r * p + a),
                  this._roundPixels)
                )
                  for (var m = nt.RESOLUTION, y = 0; y < h.length; ++y)
                    h[y] = Math.round(((h[y] * m) | 0) / m);
              }
            }),
            (e.prototype.calculateTrimmedVertices = function () {
              if (this.vertexTrimmedData) {
                if (
                  this._transformTrimmedID === this.transform._worldID &&
                  this._textureTrimmedID === this._texture._updateID
                )
                  return;
              } else this.vertexTrimmedData = new Float32Array(8);
              (this._transformTrimmedID = this.transform._worldID),
                (this._textureTrimmedID = this._texture._updateID);
              var t = this._texture,
                e = this.vertexTrimmedData,
                i = t.orig,
                r = this._anchor,
                n = this.transform.worldTransform,
                o = n.a,
                s = n.b,
                a = n.c,
                h = n.d,
                u = n.tx,
                l = n.ty,
                c = -r._x * i.width,
                d = c + i.width,
                p = -r._y * i.height,
                _ = p + i.height;
              (e[0] = o * c + a * p + u),
                (e[1] = h * p + s * c + l),
                (e[2] = o * d + a * p + u),
                (e[3] = h * p + s * d + l),
                (e[4] = o * d + a * _ + u),
                (e[5] = h * _ + s * d + l),
                (e[6] = o * c + a * _ + u),
                (e[7] = h * _ + s * c + l);
            }),
            (e.prototype._render = function (t) {
              this.calculateVertices(),
                t.batch.setObjectRenderer(t.plugins[this.pluginName]),
                t.plugins[this.pluginName].render(this);
            }),
            (e.prototype._calculateBounds = function () {
              var t = this._texture.trim,
                e = this._texture.orig;
              !t || (t.width === e.width && t.height === e.height)
                ? (this.calculateVertices(),
                  this._bounds.addQuad(this.vertexData))
                : (this.calculateTrimmedVertices(),
                  this._bounds.addQuad(this.vertexTrimmedData));
            }),
            (e.prototype.getLocalBounds = function (e) {
              return 0 === this.children.length
                ? (this._localBounds || (this._localBounds = new oe()),
                  (this._localBounds.minX =
                    this._texture.orig.width * -this._anchor._x),
                  (this._localBounds.minY =
                    this._texture.orig.height * -this._anchor._y),
                  (this._localBounds.maxX =
                    this._texture.orig.width * (1 - this._anchor._x)),
                  (this._localBounds.maxY =
                    this._texture.orig.height * (1 - this._anchor._y)),
                  e ||
                    (this._localBoundsRect ||
                      (this._localBoundsRect = new zt()),
                    (e = this._localBoundsRect)),
                  this._localBounds.getRectangle(e))
                : t.prototype.getLocalBounds.call(this, e);
            }),
            (e.prototype.containsPoint = function (t) {
              this.worldTransform.applyInverse(t, So);
              var e = this._texture.orig.width,
                i = this._texture.orig.height,
                r = -e * this.anchor.x,
                n = 0;
              return (
                So.x >= r &&
                So.x < r + e &&
                ((n = -i * this.anchor.y), So.y >= n && So.y < n + i)
              );
            }),
            (e.prototype.destroy = function (e) {
              if (
                (t.prototype.destroy.call(this, e),
                this._texture.off("update", this._onTextureUpdate, this),
                (this._anchor = null),
                "boolean" == typeof e ? e : e && e.texture)
              ) {
                var i = "boolean" == typeof e ? e : e && e.baseTexture;
                this._texture.destroy(!!i);
              }
              this._texture = null;
            }),
            (e.from = function (t, i) {
              return new e(t instanceof Ye ? t : Ye.from(t, i));
            }),
            Object.defineProperty(e.prototype, "roundPixels", {
              get: function () {
                return this._roundPixels;
              },
              set: function (t) {
                this._roundPixels !== t && (this._transformID = -1),
                  (this._roundPixels = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "width", {
              get: function () {
                return Math.abs(this.scale.x) * this._texture.orig.width;
              },
              set: function (t) {
                var e = Et(this.scale.x) || 1;
                (this.scale.x = (e * t) / this._texture.orig.width),
                  (this._width = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "height", {
              get: function () {
                return Math.abs(this.scale.y) * this._texture.orig.height;
              },
              set: function (t) {
                var e = Et(this.scale.y) || 1;
                (this.scale.y = (e * t) / this._texture.orig.height),
                  (this._height = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "anchor", {
              get: function () {
                return this._anchor;
              },
              set: function (t) {
                this._anchor.copyFrom(t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "tint", {
              get: function () {
                return this._tint;
              },
              set: function (t) {
                (this._tint = t),
                  (this._tintRGB = (t >> 16) + (65280 & t) + ((255 & t) << 16));
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "texture", {
              get: function () {
                return this._texture;
              },
              set: function (t) {
                this._texture !== t &&
                  (this._texture &&
                    this._texture.off("update", this._onTextureUpdate, this),
                  (this._texture = t || Ye.EMPTY),
                  (this._cachedTint = 16777215),
                  (this._textureID = -1),
                  (this._textureTrimmedID = -1),
                  t &&
                    (t.baseTexture.valid
                      ? this._onTextureUpdate()
                      : t.once("update", this._onTextureUpdate, this)));
              },
              enumerable: !1,
              configurable: !0,
            }),
            e
          );
        })(ce),
        Mo = function (t, e) {
          return (
            (Mo =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
              }),
            Mo(t, e)
          );
        };
      !(function (t) {
        (t[(t.LINEAR_VERTICAL = 0)] = "LINEAR_VERTICAL"),
          (t[(t.LINEAR_HORIZONTAL = 1)] = "LINEAR_HORIZONTAL");
      })(ho || (ho = {}));
      var Po = {
          align: "left",
          breakWords: !1,
          dropShadow: !1,
          dropShadowAlpha: 1,
          dropShadowAngle: Math.PI / 6,
          dropShadowBlur: 0,
          dropShadowColor: "black",
          dropShadowDistance: 5,
          fill: "black",
          fillGradientType: ho.LINEAR_VERTICAL,
          fillGradientStops: [],
          fontFamily: "Arial",
          fontSize: 26,
          fontStyle: "normal",
          fontVariant: "normal",
          fontWeight: "normal",
          letterSpacing: 0,
          lineHeight: 0,
          lineJoin: "miter",
          miterLimit: 10,
          padding: 0,
          stroke: "black",
          strokeThickness: 0,
          textBaseline: "alphabetic",
          trim: !1,
          whiteSpace: "pre",
          wordWrap: !1,
          wordWrapWidth: 100,
          leading: 0,
        },
        Bo = [
          "serif",
          "sans-serif",
          "monospace",
          "cursive",
          "fantasy",
          "system-ui",
        ],
        Oo = (function () {
          function t(t) {
            (this.styleID = 0), this.reset(), ko(this, t, t);
          }
          return (
            (t.prototype.clone = function () {
              var e = {};
              return ko(e, this, Po), new t(e);
            }),
            (t.prototype.reset = function () {
              ko(this, Po, Po);
            }),
            Object.defineProperty(t.prototype, "align", {
              get: function () {
                return this._align;
              },
              set: function (t) {
                this._align !== t && ((this._align = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "breakWords", {
              get: function () {
                return this._breakWords;
              },
              set: function (t) {
                this._breakWords !== t &&
                  ((this._breakWords = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "dropShadow", {
              get: function () {
                return this._dropShadow;
              },
              set: function (t) {
                this._dropShadow !== t &&
                  ((this._dropShadow = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "dropShadowAlpha", {
              get: function () {
                return this._dropShadowAlpha;
              },
              set: function (t) {
                this._dropShadowAlpha !== t &&
                  ((this._dropShadowAlpha = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "dropShadowAngle", {
              get: function () {
                return this._dropShadowAngle;
              },
              set: function (t) {
                this._dropShadowAngle !== t &&
                  ((this._dropShadowAngle = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "dropShadowBlur", {
              get: function () {
                return this._dropShadowBlur;
              },
              set: function (t) {
                this._dropShadowBlur !== t &&
                  ((this._dropShadowBlur = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "dropShadowColor", {
              get: function () {
                return this._dropShadowColor;
              },
              set: function (t) {
                var e = Io(t);
                this._dropShadowColor !== e &&
                  ((this._dropShadowColor = e), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "dropShadowDistance", {
              get: function () {
                return this._dropShadowDistance;
              },
              set: function (t) {
                this._dropShadowDistance !== t &&
                  ((this._dropShadowDistance = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "fill", {
              get: function () {
                return this._fill;
              },
              set: function (t) {
                var e = Io(t);
                this._fill !== e && ((this._fill = e), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "fillGradientType", {
              get: function () {
                return this._fillGradientType;
              },
              set: function (t) {
                this._fillGradientType !== t &&
                  ((this._fillGradientType = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "fillGradientStops", {
              get: function () {
                return this._fillGradientStops;
              },
              set: function (t) {
                (function (t, e) {
                  if (!Array.isArray(t) || !Array.isArray(e)) return !1;
                  if (t.length !== e.length) return !1;
                  for (var i = 0; i < t.length; ++i)
                    if (t[i] !== e[i]) return !1;
                  return !0;
                })(this._fillGradientStops, t) ||
                  ((this._fillGradientStops = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "fontFamily", {
              get: function () {
                return this._fontFamily;
              },
              set: function (t) {
                this.fontFamily !== t &&
                  ((this._fontFamily = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "fontSize", {
              get: function () {
                return this._fontSize;
              },
              set: function (t) {
                this._fontSize !== t && ((this._fontSize = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "fontStyle", {
              get: function () {
                return this._fontStyle;
              },
              set: function (t) {
                this._fontStyle !== t &&
                  ((this._fontStyle = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "fontVariant", {
              get: function () {
                return this._fontVariant;
              },
              set: function (t) {
                this._fontVariant !== t &&
                  ((this._fontVariant = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "fontWeight", {
              get: function () {
                return this._fontWeight;
              },
              set: function (t) {
                this._fontWeight !== t &&
                  ((this._fontWeight = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "letterSpacing", {
              get: function () {
                return this._letterSpacing;
              },
              set: function (t) {
                this._letterSpacing !== t &&
                  ((this._letterSpacing = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "lineHeight", {
              get: function () {
                return this._lineHeight;
              },
              set: function (t) {
                this._lineHeight !== t &&
                  ((this._lineHeight = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "leading", {
              get: function () {
                return this._leading;
              },
              set: function (t) {
                this._leading !== t && ((this._leading = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "lineJoin", {
              get: function () {
                return this._lineJoin;
              },
              set: function (t) {
                this._lineJoin !== t && ((this._lineJoin = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "miterLimit", {
              get: function () {
                return this._miterLimit;
              },
              set: function (t) {
                this._miterLimit !== t &&
                  ((this._miterLimit = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "padding", {
              get: function () {
                return this._padding;
              },
              set: function (t) {
                this._padding !== t && ((this._padding = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "stroke", {
              get: function () {
                return this._stroke;
              },
              set: function (t) {
                var e = Io(t);
                this._stroke !== e && ((this._stroke = e), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "strokeThickness", {
              get: function () {
                return this._strokeThickness;
              },
              set: function (t) {
                this._strokeThickness !== t &&
                  ((this._strokeThickness = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "textBaseline", {
              get: function () {
                return this._textBaseline;
              },
              set: function (t) {
                this._textBaseline !== t &&
                  ((this._textBaseline = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "trim", {
              get: function () {
                return this._trim;
              },
              set: function (t) {
                this._trim !== t && ((this._trim = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "whiteSpace", {
              get: function () {
                return this._whiteSpace;
              },
              set: function (t) {
                this._whiteSpace !== t &&
                  ((this._whiteSpace = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "wordWrap", {
              get: function () {
                return this._wordWrap;
              },
              set: function (t) {
                this._wordWrap !== t && ((this._wordWrap = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "wordWrapWidth", {
              get: function () {
                return this._wordWrapWidth;
              },
              set: function (t) {
                this._wordWrapWidth !== t &&
                  ((this._wordWrapWidth = t), this.styleID++);
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.toFontString = function () {
              var t =
                  "number" == typeof this.fontSize
                    ? this.fontSize + "px"
                    : this.fontSize,
                e = this.fontFamily;
              Array.isArray(this.fontFamily) ||
                (e = this.fontFamily.split(","));
              for (var i = e.length - 1; i >= 0; i--) {
                var r = e[i].trim();
                !/([\"\'])[^\'\"]+\1/.test(r) &&
                  Bo.indexOf(r) < 0 &&
                  (r = '"' + r + '"'),
                  (e[i] = r);
              }
              return (
                this.fontStyle +
                " " +
                this.fontVariant +
                " " +
                this.fontWeight +
                " " +
                t +
                " " +
                e.join(",")
              );
            }),
            t
          );
        })();
      function Ro(t) {
        return "number" == typeof t
          ? _t(t)
          : ("string" == typeof t &&
              0 === t.indexOf("0x") &&
              (t = t.replace("0x", "#")),
            t);
      }
      function Io(t) {
        if (Array.isArray(t)) {
          for (var e = 0; e < t.length; ++e) t[e] = Ro(t[e]);
          return t;
        }
        return Ro(t);
      }
      function ko(t, e, i) {
        for (var r in i)
          Array.isArray(e[r]) ? (t[r] = e[r].slice()) : (t[r] = e[r]);
      }
      var Fo = { willReadFrequently: !0 },
        Do = (function () {
          function t(t, e, i, r, n, o, s, a, h) {
            (this.text = t),
              (this.style = e),
              (this.width = i),
              (this.height = r),
              (this.lines = n),
              (this.lineWidths = o),
              (this.lineHeight = s),
              (this.maxLineWidth = a),
              (this.fontProperties = h);
          }
          return (
            (t.measureText = function (e, i, r, n) {
              void 0 === n && (n = t._canvas), (r = null == r ? i.wordWrap : r);
              var o = i.toFontString(),
                s = t.measureFont(o);
              0 === s.fontSize &&
                ((s.fontSize = i.fontSize), (s.ascent = i.fontSize));
              var a = n.getContext("2d", Fo);
              a.font = o;
              for (
                var h = (r ? t.wordWrap(e, i, n) : e).split(/(?:\r\n|\r|\n)/),
                  u = new Array(h.length),
                  l = 0,
                  c = 0;
                c < h.length;
                c++
              ) {
                var d =
                  a.measureText(h[c]).width +
                  (h[c].length - 1) * i.letterSpacing;
                (u[c] = d), (l = Math.max(l, d));
              }
              var p = l + i.strokeThickness;
              i.dropShadow && (p += i.dropShadowDistance);
              var _ = i.lineHeight || s.fontSize + i.strokeThickness,
                f =
                  Math.max(_, s.fontSize + i.strokeThickness) +
                  (h.length - 1) * (_ + i.leading);
              return (
                i.dropShadow && (f += i.dropShadowDistance),
                new t(e, i, p, f, h, u, _ + i.leading, l, s)
              );
            }),
            (t.wordWrap = function (e, i, r) {
              void 0 === r && (r = t._canvas);
              for (
                var n = r.getContext("2d", Fo),
                  o = 0,
                  s = "",
                  a = "",
                  h = Object.create(null),
                  u = i.letterSpacing,
                  l = i.whiteSpace,
                  c = t.collapseSpaces(l),
                  d = t.collapseNewlines(l),
                  p = !c,
                  _ = i.wordWrapWidth + u,
                  f = t.tokenize(e),
                  m = 0;
                m < f.length;
                m++
              ) {
                var y = f[m];
                if (t.isNewline(y)) {
                  if (!d) {
                    (a += t.addLine(s)), (p = !c), (s = ""), (o = 0);
                    continue;
                  }
                  y = " ";
                }
                if (c) {
                  var g = t.isBreakingSpace(y),
                    v = t.isBreakingSpace(s[s.length - 1]);
                  if (g && v) continue;
                }
                var b = t.getFromCache(y, u, h, n);
                if (b > _)
                  if (
                    ("" !== s && ((a += t.addLine(s)), (s = ""), (o = 0)),
                    t.canBreakWords(y, i.breakWords))
                  )
                    for (var x = t.wordWrapSplit(y), w = 0; w < x.length; w++) {
                      for (var T = x[w], A = 1; x[w + A]; ) {
                        var S = x[w + A],
                          E = T[T.length - 1];
                        if (t.canBreakChars(E, S, y, w, i.breakWords)) break;
                        (T += S), A++;
                      }
                      w += T.length - 1;
                      var C = t.getFromCache(T, u, h, n);
                      C + o > _ &&
                        ((a += t.addLine(s)), (p = !1), (s = ""), (o = 0)),
                        (s += T),
                        (o += C);
                    }
                  else {
                    s.length > 0 && ((a += t.addLine(s)), (s = ""), (o = 0));
                    var M = m === f.length - 1;
                    (a += t.addLine(y, !M)), (p = !1), (s = ""), (o = 0);
                  }
                else
                  b + o > _ &&
                    ((p = !1), (a += t.addLine(s)), (s = ""), (o = 0)),
                    (s.length > 0 || !t.isBreakingSpace(y) || p) &&
                      ((s += y), (o += b));
              }
              return a + t.addLine(s, !1);
            }),
            (t.addLine = function (e, i) {
              return (
                void 0 === i && (i = !0), (e = t.trimRight(e)), i ? e + "\n" : e
              );
            }),
            (t.getFromCache = function (t, e, i, r) {
              var n = i[t];
              if ("number" != typeof n) {
                var o = t.length * e;
                (n = r.measureText(t).width + o), (i[t] = n);
              }
              return n;
            }),
            (t.collapseSpaces = function (t) {
              return "normal" === t || "pre-line" === t;
            }),
            (t.collapseNewlines = function (t) {
              return "normal" === t;
            }),
            (t.trimRight = function (e) {
              if ("string" != typeof e) return "";
              for (var i = e.length - 1; i >= 0; i--) {
                var r = e[i];
                if (!t.isBreakingSpace(r)) break;
                e = e.slice(0, -1);
              }
              return e;
            }),
            (t.isNewline = function (e) {
              return (
                "string" == typeof e &&
                t._newlines.indexOf(e.charCodeAt(0)) >= 0
              );
            }),
            (t.isBreakingSpace = function (e, i) {
              return (
                "string" == typeof e &&
                t._breakingSpaces.indexOf(e.charCodeAt(0)) >= 0
              );
            }),
            (t.tokenize = function (e) {
              var i = [],
                r = "";
              if ("string" != typeof e) return i;
              for (var n = 0; n < e.length; n++) {
                var o = e[n],
                  s = e[n + 1];
                t.isBreakingSpace(o, s) || t.isNewline(o)
                  ? ("" !== r && (i.push(r), (r = "")), i.push(o))
                  : (r += o);
              }
              return "" !== r && i.push(r), i;
            }),
            (t.canBreakWords = function (t, e) {
              return e;
            }),
            (t.canBreakChars = function (t, e, i, r, n) {
              return !0;
            }),
            (t.wordWrapSplit = function (t) {
              return t.split("");
            }),
            (t.measureFont = function (e) {
              if (t._fonts[e]) return t._fonts[e];
              var i = { ascent: 0, descent: 0, fontSize: 0 },
                r = t._canvas,
                n = t._context;
              n.font = e;
              var o = t.METRICS_STRING + t.BASELINE_SYMBOL,
                s = Math.ceil(n.measureText(o).width),
                a = Math.ceil(n.measureText(t.BASELINE_SYMBOL).width),
                h = Math.ceil(t.HEIGHT_MULTIPLIER * a);
              (a = (a * t.BASELINE_MULTIPLIER) | 0),
                (r.width = s),
                (r.height = h),
                (n.fillStyle = "#f00"),
                n.fillRect(0, 0, s, h),
                (n.font = e),
                (n.textBaseline = "alphabetic"),
                (n.fillStyle = "#000"),
                n.fillText(o, 0, a);
              var u = n.getImageData(0, 0, s, h).data,
                l = u.length,
                c = 4 * s,
                d = 0,
                p = 0,
                _ = !1;
              for (d = 0; d < a; ++d) {
                for (var f = 0; f < c; f += 4)
                  if (255 !== u[p + f]) {
                    _ = !0;
                    break;
                  }
                if (_) break;
                p += c;
              }
              for (i.ascent = a - d, p = l - c, _ = !1, d = h; d > a; --d) {
                for (f = 0; f < c; f += 4)
                  if (255 !== u[p + f]) {
                    _ = !0;
                    break;
                  }
                if (_) break;
                p -= c;
              }
              return (
                (i.descent = d - a),
                (i.fontSize = i.ascent + i.descent),
                (t._fonts[e] = i),
                i
              );
            }),
            (t.clearMetrics = function (e) {
              void 0 === e && (e = ""),
                e ? delete t._fonts[e] : (t._fonts = {});
            }),
            Object.defineProperty(t, "_canvas", {
              get: function () {
                if (!t.__canvas) {
                  var e = void 0;
                  try {
                    var i = new OffscreenCanvas(0, 0),
                      r = i.getContext("2d", Fo);
                    if (r && r.measureText) return (t.__canvas = i), i;
                    e = nt.ADAPTER.createCanvas();
                  } catch (t) {
                    e = nt.ADAPTER.createCanvas();
                  }
                  (e.width = e.height = 10), (t.__canvas = e);
                }
                return t.__canvas;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "_context", {
              get: function () {
                return (
                  t.__context || (t.__context = t._canvas.getContext("2d", Fo)),
                  t.__context
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            t
          );
        })();
      (Do._fonts = {}),
        (Do.METRICS_STRING = "|q"),
        (Do.BASELINE_SYMBOL = "M"),
        (Do.BASELINE_MULTIPLIER = 1.4),
        (Do.HEIGHT_MULTIPLIER = 2),
        (Do._newlines = [10, 13]),
        (Do._breakingSpaces = [
          9, 32, 8192, 8193, 8194, 8195, 8196, 8197, 8198, 8200, 8201, 8202,
          8287, 12288,
        ]);
      var No = { texture: !0, children: !1, baseTexture: !0 },
        Lo = (function (t) {
          function e(e, i, r) {
            var n = this,
              o = !1;
            r || ((r = nt.ADAPTER.createCanvas()), (o = !0)),
              (r.width = 3),
              (r.height = 3);
            var s = Ye.from(r);
            return (
              (s.orig = new zt()),
              (s.trim = new zt()),
              ((n = t.call(this, s) || this)._ownCanvas = o),
              (n.canvas = r),
              (n.context = r.getContext("2d", { willReadFrequently: !0 })),
              (n._resolution = nt.RESOLUTION),
              (n._autoResolution = !0),
              (n._text = null),
              (n._style = null),
              (n._styleListener = null),
              (n._font = ""),
              (n.text = e),
              (n.style = i),
              (n.localStyleID = -1),
              n
            );
          }
          return (
            (function (t, e) {
              function i() {
                this.constructor = t;
              }
              Mo(t, e),
                (t.prototype =
                  null === e
                    ? Object.create(e)
                    : ((i.prototype = e.prototype), new i()));
            })(e, t),
            (e.prototype.updateText = function (t) {
              var i = this._style;
              if (
                (this.localStyleID !== i.styleID &&
                  ((this.dirty = !0), (this.localStyleID = i.styleID)),
                this.dirty || !t)
              ) {
                this._font = this._style.toFontString();
                var r,
                  n,
                  o = this.context,
                  s = Do.measureText(
                    this._text || " ",
                    this._style,
                    this._style.wordWrap,
                    this.canvas
                  ),
                  a = s.width,
                  h = s.height,
                  u = s.lines,
                  l = s.lineHeight,
                  c = s.lineWidths,
                  d = s.maxLineWidth,
                  p = s.fontProperties;
                (this.canvas.width = Math.ceil(
                  Math.ceil(Math.max(1, a) + 2 * i.padding) * this._resolution
                )),
                  (this.canvas.height = Math.ceil(
                    Math.ceil(Math.max(1, h) + 2 * i.padding) * this._resolution
                  )),
                  o.scale(this._resolution, this._resolution),
                  o.clearRect(0, 0, this.canvas.width, this.canvas.height),
                  (o.font = this._font),
                  (o.lineWidth = i.strokeThickness),
                  (o.textBaseline = i.textBaseline),
                  (o.lineJoin = i.lineJoin),
                  (o.miterLimit = i.miterLimit);
                for (var _ = i.dropShadow ? 2 : 1, f = 0; f < _; ++f) {
                  var m = i.dropShadow && 0 === f,
                    y = m ? Math.ceil(Math.max(1, h) + 2 * i.padding) : 0,
                    g = y * this._resolution;
                  if (m) {
                    (o.fillStyle = "black"), (o.strokeStyle = "black");
                    var v = i.dropShadowColor,
                      b = pt("number" == typeof v ? v : ft(v)),
                      x = i.dropShadowBlur * this._resolution,
                      w = i.dropShadowDistance * this._resolution;
                    (o.shadowColor =
                      "rgba(" +
                      255 * b[0] +
                      "," +
                      255 * b[1] +
                      "," +
                      255 * b[2] +
                      "," +
                      i.dropShadowAlpha +
                      ")"),
                      (o.shadowBlur = x),
                      (o.shadowOffsetX = Math.cos(i.dropShadowAngle) * w),
                      (o.shadowOffsetY = Math.sin(i.dropShadowAngle) * w + g);
                  } else
                    (o.fillStyle = this._generateFillStyle(i, u, s)),
                      (o.strokeStyle = i.stroke),
                      (o.shadowColor = "black"),
                      (o.shadowBlur = 0),
                      (o.shadowOffsetX = 0),
                      (o.shadowOffsetY = 0);
                  var T = (l - p.fontSize) / 2;
                  (!e.nextLineHeightBehavior || l - p.fontSize < 0) && (T = 0);
                  for (var A = 0; A < u.length; A++)
                    (r = i.strokeThickness / 2),
                      (n = i.strokeThickness / 2 + A * l + p.ascent + T),
                      "right" === i.align
                        ? (r += d - c[A])
                        : "center" === i.align && (r += (d - c[A]) / 2),
                      i.stroke &&
                        i.strokeThickness &&
                        this.drawLetterSpacing(
                          u[A],
                          r + i.padding,
                          n + i.padding - y,
                          !0
                        ),
                      i.fill &&
                        this.drawLetterSpacing(
                          u[A],
                          r + i.padding,
                          n + i.padding - y
                        );
                }
                this.updateTexture();
              }
            }),
            (e.prototype.drawLetterSpacing = function (t, i, r, n) {
              void 0 === n && (n = !1);
              var o = this._style.letterSpacing,
                s =
                  e.experimentalLetterSpacing &&
                  ("letterSpacing" in CanvasRenderingContext2D.prototype ||
                    "textLetterSpacing" in CanvasRenderingContext2D.prototype);
              if (0 === o || s)
                return (
                  s &&
                    ((this.context.letterSpacing = o),
                    (this.context.textLetterSpacing = o)),
                  void (n
                    ? this.context.strokeText(t, i, r)
                    : this.context.fillText(t, i, r))
                );
              for (
                var a = i,
                  h = Array.from ? Array.from(t) : t.split(""),
                  u = this.context.measureText(t).width,
                  l = 0,
                  c = 0;
                c < h.length;
                ++c
              ) {
                var d = h[c];
                n
                  ? this.context.strokeText(d, a, r)
                  : this.context.fillText(d, a, r);
                for (var p = "", _ = c + 1; _ < h.length; ++_) p += h[_];
                (a += u - (l = this.context.measureText(p).width) + o), (u = l);
              }
            }),
            (e.prototype.updateTexture = function () {
              var t = this.canvas;
              if (this._style.trim) {
                var e = (function (t) {
                  var e,
                    i,
                    r,
                    n = t.width,
                    o = t.height,
                    s = t.getContext("2d", { willReadFrequently: !0 }),
                    a = s.getImageData(0, 0, n, o).data,
                    h = a.length,
                    u = { top: null, left: null, right: null, bottom: null },
                    l = null;
                  for (e = 0; e < h; e += 4)
                    0 !== a[e + 3] &&
                      ((i = (e / 4) % n),
                      (r = ~~(e / 4 / n)),
                      null === u.top && (u.top = r),
                      (null === u.left || i < u.left) && (u.left = i),
                      (null === u.right || u.right < i) && (u.right = i + 1),
                      (null === u.bottom || u.bottom < r) && (u.bottom = r));
                  return (
                    null !== u.top &&
                      ((n = u.right - u.left),
                      (o = u.bottom - u.top + 1),
                      (l = s.getImageData(u.left, u.top, n, o))),
                    { height: o, width: n, data: l }
                  );
                })(t);
                e.data &&
                  ((t.width = e.width),
                  (t.height = e.height),
                  this.context.putImageData(e.data, 0, 0));
              }
              var i = this._texture,
                r = this._style,
                n = r.trim ? 0 : r.padding,
                o = i.baseTexture;
              (i.trim.width = i._frame.width = t.width / this._resolution),
                (i.trim.height = i._frame.height = t.height / this._resolution),
                (i.trim.x = -n),
                (i.trim.y = -n),
                (i.orig.width = i._frame.width - 2 * n),
                (i.orig.height = i._frame.height - 2 * n),
                this._onTextureUpdate(),
                o.setRealSize(t.width, t.height, this._resolution),
                i.updateUvs(),
                (this.dirty = !1);
            }),
            (e.prototype._render = function (e) {
              this._autoResolution &&
                this._resolution !== e.resolution &&
                ((this._resolution = e.resolution), (this.dirty = !0)),
                this.updateText(!0),
                t.prototype._render.call(this, e);
            }),
            (e.prototype.updateTransform = function () {
              this.updateText(!0), t.prototype.updateTransform.call(this);
            }),
            (e.prototype.getBounds = function (e, i) {
              return (
                this.updateText(!0),
                -1 === this._textureID && (e = !1),
                t.prototype.getBounds.call(this, e, i)
              );
            }),
            (e.prototype.getLocalBounds = function (e) {
              return (
                this.updateText(!0), t.prototype.getLocalBounds.call(this, e)
              );
            }),
            (e.prototype._calculateBounds = function () {
              this.calculateVertices(), this._bounds.addQuad(this.vertexData);
            }),
            (e.prototype._generateFillStyle = function (t, e, i) {
              var r,
                n = t.fill;
              if (!Array.isArray(n)) return n;
              if (1 === n.length) return n[0];
              var o = t.dropShadow ? t.dropShadowDistance : 0,
                s = t.padding || 0,
                a = this.canvas.width / this._resolution - o - 2 * s,
                h = this.canvas.height / this._resolution - o - 2 * s,
                u = n.slice(),
                l = t.fillGradientStops.slice();
              if (!l.length)
                for (var c = u.length + 1, d = 1; d < c; ++d) l.push(d / c);
              if (
                (u.unshift(n[0]),
                l.unshift(0),
                u.push(n[n.length - 1]),
                l.push(1),
                t.fillGradientType === ho.LINEAR_VERTICAL)
              ) {
                r = this.context.createLinearGradient(a / 2, s, a / 2, h + s);
                var p = i.fontProperties.fontSize + t.strokeThickness;
                for (d = 0; d < e.length; d++) {
                  var _ = i.lineHeight * (d - 1) + p,
                    f = i.lineHeight * d,
                    m = f;
                  d > 0 && _ > f && (m = (f + _) / 2);
                  var y = f + p,
                    g = i.lineHeight * (d + 1),
                    v = y;
                  d + 1 < e.length && g < y && (v = (y + g) / 2);
                  for (var b = (v - m) / h, x = 0; x < u.length; x++) {
                    var w;
                    w = "number" == typeof l[x] ? l[x] : x / u.length;
                    var T = Math.min(1, Math.max(0, m / h + w * b));
                    (T = Number(T.toFixed(5))), r.addColorStop(T, u[x]);
                  }
                }
              } else {
                r = this.context.createLinearGradient(s, h / 2, a + s, h / 2);
                var A = u.length + 1,
                  S = 1;
                for (d = 0; d < u.length; d++) {
                  var E;
                  (E = "number" == typeof l[d] ? l[d] : S / A),
                    r.addColorStop(E, u[d]),
                    S++;
                }
              }
              return r;
            }),
            (e.prototype.destroy = function (e) {
              "boolean" == typeof e && (e = { children: e }),
                (e = Object.assign({}, No, e)),
                t.prototype.destroy.call(this, e),
                this._ownCanvas && (this.canvas.height = this.canvas.width = 0),
                (this.context = null),
                (this.canvas = null),
                (this._style = null);
            }),
            Object.defineProperty(e.prototype, "width", {
              get: function () {
                return (
                  this.updateText(!0),
                  Math.abs(this.scale.x) * this._texture.orig.width
                );
              },
              set: function (t) {
                this.updateText(!0);
                var e = Et(this.scale.x) || 1;
                (this.scale.x = (e * t) / this._texture.orig.width),
                  (this._width = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "height", {
              get: function () {
                return (
                  this.updateText(!0),
                  Math.abs(this.scale.y) * this._texture.orig.height
                );
              },
              set: function (t) {
                this.updateText(!0);
                var e = Et(this.scale.y) || 1;
                (this.scale.y = (e * t) / this._texture.orig.height),
                  (this._height = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "style", {
              get: function () {
                return this._style;
              },
              set: function (t) {
                (t = t || {}),
                  (this._style = t instanceof Oo ? t : new Oo(t)),
                  (this.localStyleID = -1),
                  (this.dirty = !0);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "text", {
              get: function () {
                return this._text;
              },
              set: function (t) {
                (t = String(null == t ? "" : t)),
                  this._text !== t && ((this._text = t), (this.dirty = !0));
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "resolution", {
              get: function () {
                return this._resolution;
              },
              set: function (t) {
                (this._autoResolution = !1),
                  this._resolution !== t &&
                    ((this._resolution = t), (this.dirty = !0));
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.nextLineHeightBehavior = !1),
            (e.experimentalLetterSpacing = !1),
            e
          );
        })(Co);
      nt.UPLOADS_PER_FRAME = 4;
      var Uo = function (t, e) {
          return (
            (Uo =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
              }),
            Uo(t, e)
          );
        },
        Go = (function () {
          function t(t) {
            (this.maxItemsPerFrame = t), (this.itemsLeft = 0);
          }
          return (
            (t.prototype.beginFrame = function () {
              this.itemsLeft = this.maxItemsPerFrame;
            }),
            (t.prototype.allowedToUpload = function () {
              return this.itemsLeft-- > 0;
            }),
            t
          );
        })();
      function Vo(t, e) {
        var i = !1;
        if (t && t._textures && t._textures.length)
          for (var r = 0; r < t._textures.length; r++)
            if (t._textures[r] instanceof Ye) {
              var n = t._textures[r].baseTexture;
              -1 === e.indexOf(n) && (e.push(n), (i = !0));
            }
        return i;
      }
      function jo(t, e) {
        if (t.baseTexture instanceof Pe) {
          var i = t.baseTexture;
          return -1 === e.indexOf(i) && e.push(i), !0;
        }
        return !1;
      }
      function zo(t, e) {
        if (t._texture && t._texture instanceof Ye) {
          var i = t._texture.baseTexture;
          return -1 === e.indexOf(i) && e.push(i), !0;
        }
        return !1;
      }
      function Xo(t, e) {
        return e instanceof Lo && (e.updateText(!0), !0);
      }
      function Ho(t, e) {
        if (e instanceof Oo) {
          var i = e.toFontString();
          return Do.measureFont(i), !0;
        }
        return !1;
      }
      function Yo(t, e) {
        if (t instanceof Lo) {
          -1 === e.indexOf(t.style) && e.push(t.style),
            -1 === e.indexOf(t) && e.push(t);
          var i = t._texture.baseTexture;
          return -1 === e.indexOf(i) && e.push(i), !0;
        }
        return !1;
      }
      function Wo(t, e) {
        return t instanceof Oo && (-1 === e.indexOf(t) && e.push(t), !0);
      }
      var qo = (function () {
        function t(t) {
          var e = this;
          (this.limiter = new Go(nt.UPLOADS_PER_FRAME)),
            (this.renderer = t),
            (this.uploadHookHelper = null),
            (this.queue = []),
            (this.addHooks = []),
            (this.uploadHooks = []),
            (this.completes = []),
            (this.ticking = !1),
            (this.delayedTick = function () {
              e.queue && e.prepareItems();
            }),
            this.registerFindHook(Yo),
            this.registerFindHook(Wo),
            this.registerFindHook(Vo),
            this.registerFindHook(jo),
            this.registerFindHook(zo),
            this.registerUploadHook(Xo),
            this.registerUploadHook(Ho);
        }
        return (
          (t.prototype.upload = function (t, e) {
            var i = this;
            return (
              "function" == typeof t && ((e = t), (t = null)),
              e &&
                Bt(
                  "6.5.0",
                  "BasePrepare.upload callback is deprecated, use the return Promise instead."
                ),
              new Promise(function (r) {
                t && i.add(t);
                var n = function () {
                  null == e || e(), r();
                };
                i.queue.length
                  ? (i.completes.push(n),
                    i.ticking ||
                      ((i.ticking = !0),
                      ve.system.addOnce(i.tick, i, _e.UTILITY)))
                  : n();
              })
            );
          }),
          (t.prototype.tick = function () {
            setTimeout(this.delayedTick, 0);
          }),
          (t.prototype.prepareItems = function () {
            for (
              this.limiter.beginFrame();
              this.queue.length && this.limiter.allowedToUpload();

            ) {
              var t = this.queue[0],
                e = !1;
              if (t && !t._destroyed)
                for (var i = 0, r = this.uploadHooks.length; i < r; i++)
                  if (this.uploadHooks[i](this.uploadHookHelper, t)) {
                    this.queue.shift(), (e = !0);
                    break;
                  }
              e || this.queue.shift();
            }
            if (this.queue.length)
              ve.system.addOnce(this.tick, this, _e.UTILITY);
            else {
              this.ticking = !1;
              var n = this.completes.slice(0);
              for (this.completes.length = 0, i = 0, r = n.length; i < r; i++)
                n[i]();
            }
          }),
          (t.prototype.registerFindHook = function (t) {
            return t && this.addHooks.push(t), this;
          }),
          (t.prototype.registerUploadHook = function (t) {
            return t && this.uploadHooks.push(t), this;
          }),
          (t.prototype.add = function (t) {
            for (
              var e = 0, i = this.addHooks.length;
              e < i && !this.addHooks[e](t, this.queue);
              e++
            );
            if (t instanceof ce)
              for (e = t.children.length - 1; e >= 0; e--)
                this.add(t.children[e]);
            return this;
          }),
          (t.prototype.destroy = function () {
            this.ticking && ve.system.remove(this.tick, this),
              (this.ticking = !1),
              (this.addHooks = null),
              (this.uploadHooks = null),
              (this.renderer = null),
              (this.completes = null),
              (this.queue = null),
              (this.limiter = null),
              (this.uploadHookHelper = null);
          }),
          t
        );
      })();
      function $o(t, e) {
        return (
          e instanceof Pe &&
          (e._glTextures[t.CONTEXT_UID] || t.texture.bind(e), !0)
        );
      }
      function Ko(t, e) {
        if (!(e instanceof To)) return !1;
        var i = e.geometry;
        e.finishPoly(), i.updateBatches();
        for (var r = i.batches, n = 0; n < r.length; n++) {
          var o = r[n].style.texture;
          o && $o(t, o.baseTexture);
        }
        return i.batchable || t.geometry.bind(i, e._resolveDirectShader(t)), !0;
      }
      function Jo(t, e) {
        return t instanceof To && (e.push(t), !0);
      }
      var Zo = (function (t) {
          function e(e) {
            var i = t.call(this, e) || this;
            return (
              (i.uploadHookHelper = i.renderer),
              i.registerFindHook(Jo),
              i.registerUploadHook($o),
              i.registerUploadHook(Ko),
              i
            );
          }
          return (
            (function (t, e) {
              function i() {
                this.constructor = t;
              }
              Uo(t, e),
                (t.prototype =
                  null === e
                    ? Object.create(e)
                    : ((i.prototype = e.prototype), new i()));
            })(e, t),
            (e.extension = { name: "prepare", type: de.RendererPlugin }),
            e
          );
        })(qo),
        Qo =
          ((function () {
            function t(t) {
              (this.maxMilliseconds = t), (this.frameStart = 0);
            }
            (t.prototype.beginFrame = function () {
              this.frameStart = Date.now();
            }),
              (t.prototype.allowedToUpload = function () {
                return Date.now() - this.frameStart < this.maxMilliseconds;
              });
          })(),
          (function () {
            function t(t, e, i) {
              void 0 === i && (i = null),
                (this.linkedSheets = []),
                (this._texture = t instanceof Ye ? t : null),
                (this.baseTexture =
                  t instanceof Pe ? t : this._texture.baseTexture),
                (this.textures = {}),
                (this.animations = {}),
                (this.data = e);
              var r = this.baseTexture.resource;
              (this.resolution = this._updateResolution(
                i || (r ? r.url : null)
              )),
                (this._frames = this.data.frames),
                (this._frameKeys = Object.keys(this._frames)),
                (this._batchIndex = 0),
                (this._callback = null);
            }
            return (
              (t.prototype._updateResolution = function (t) {
                void 0 === t && (t = null);
                var e = this.data.meta.scale,
                  i = Dt(t, null);
                return (
                  null === i && (i = void 0 !== e ? parseFloat(e) : 1),
                  1 !== i && this.baseTexture.setResolution(i),
                  i
                );
              }),
              (t.prototype.parse = function (e) {
                var i = this;
                return (
                  e &&
                    Bt(
                      "6.5.0",
                      "Spritesheet.parse callback is deprecated, use the return Promise instead."
                    ),
                  new Promise(function (r) {
                    (i._callback = function (t) {
                      null == e || e(t), r(t);
                    }),
                      (i._batchIndex = 0),
                      i._frameKeys.length <= t.BATCH_SIZE
                        ? (i._processFrames(0),
                          i._processAnimations(),
                          i._parseComplete())
                        : i._nextBatch();
                  })
                );
              }),
              (t.prototype._processFrames = function (e) {
                for (
                  var i = e, r = t.BATCH_SIZE;
                  i - e < r && i < this._frameKeys.length;

                ) {
                  var n = this._frameKeys[i],
                    o = this._frames[n],
                    s = o.frame;
                  if (s) {
                    var a,
                      h = null,
                      u =
                        !1 !== o.trimmed && o.sourceSize
                          ? o.sourceSize
                          : o.frame,
                      l = new zt(
                        0,
                        0,
                        Math.floor(u.w) / this.resolution,
                        Math.floor(u.h) / this.resolution
                      );
                    (a = o.rotated
                      ? new zt(
                          Math.floor(s.x) / this.resolution,
                          Math.floor(s.y) / this.resolution,
                          Math.floor(s.h) / this.resolution,
                          Math.floor(s.w) / this.resolution
                        )
                      : new zt(
                          Math.floor(s.x) / this.resolution,
                          Math.floor(s.y) / this.resolution,
                          Math.floor(s.w) / this.resolution,
                          Math.floor(s.h) / this.resolution
                        )),
                      !1 !== o.trimmed &&
                        o.spriteSourceSize &&
                        (h = new zt(
                          Math.floor(o.spriteSourceSize.x) / this.resolution,
                          Math.floor(o.spriteSourceSize.y) / this.resolution,
                          Math.floor(s.w) / this.resolution,
                          Math.floor(s.h) / this.resolution
                        )),
                      (this.textures[n] = new Ye(
                        this.baseTexture,
                        a,
                        l,
                        h,
                        o.rotated ? 2 : 0,
                        o.anchor
                      )),
                      Ye.addToCache(this.textures[n], n);
                  }
                  i++;
                }
              }),
              (t.prototype._processAnimations = function () {
                var t = this.data.animations || {};
                for (var e in t) {
                  this.animations[e] = [];
                  for (var i = 0; i < t[e].length; i++) {
                    var r = t[e][i];
                    this.animations[e].push(this.textures[r]);
                  }
                }
              }),
              (t.prototype._parseComplete = function () {
                var t = this._callback;
                (this._callback = null),
                  (this._batchIndex = 0),
                  t.call(this, this.textures);
              }),
              (t.prototype._nextBatch = function () {
                var e = this;
                this._processFrames(this._batchIndex * t.BATCH_SIZE),
                  this._batchIndex++,
                  setTimeout(function () {
                    e._batchIndex * t.BATCH_SIZE < e._frameKeys.length
                      ? e._nextBatch()
                      : (e._processAnimations(), e._parseComplete());
                  }, 0);
              }),
              (t.prototype.destroy = function (t) {
                var e;
                for (var i in (void 0 === t && (t = !1), this.textures))
                  this.textures[i].destroy();
                (this._frames = null),
                  (this._frameKeys = null),
                  (this.data = null),
                  (this.textures = null),
                  t &&
                    (null === (e = this._texture) ||
                      void 0 === e ||
                      e.destroy(),
                    this.baseTexture.destroy()),
                  (this._texture = null),
                  (this.baseTexture = null),
                  (this.linkedSheets = []);
              }),
              (t.BATCH_SIZE = 1e3),
              t
            );
          })()),
        ts = (function () {
          function t() {}
          return (
            (t.use = function (e, i) {
              var r,
                n,
                o = this,
                s = e.name + "_image";
              if (
                e.data &&
                e.type === sn.TYPE.JSON &&
                e.data.frames &&
                !o.resources[s]
              ) {
                var a =
                  null ===
                    (n =
                      null === (r = e.data) || void 0 === r
                        ? void 0
                        : r.meta) || void 0 === n
                    ? void 0
                    : n.related_multi_packs;
                if (Array.isArray(a))
                  for (
                    var h = function (t) {
                        if ("string" != typeof t) return "continue";
                        var i = t.replace(".json", ""),
                          r = ht.resolve(e.url.replace(o.baseUrl, ""), t);
                        if (
                          o.resources[i] ||
                          Object.values(o.resources).some(function (t) {
                            return ht.format(ht.parse(t.url)) === r;
                          })
                        )
                          return "continue";
                        var n = {
                          crossOrigin: e.crossOrigin,
                          loadType: sn.LOAD_TYPE.XHR,
                          xhrType: sn.XHR_RESPONSE_TYPE.JSON,
                          parentResource: e,
                          metadata: e.metadata,
                        };
                        o.add(i, r, n);
                      },
                      u = 0,
                      l = a;
                    u < l.length;
                    u++
                  )
                    h(l[u]);
                var c = {
                    crossOrigin: e.crossOrigin,
                    metadata: e.metadata.imageMetadata,
                    parentResource: e,
                  },
                  d = t.getResourcePath(e, o.baseUrl);
                o.add(s, d, c, function (t) {
                  if (t.error) i(t.error);
                  else {
                    var r = new Qo(t.texture, e.data, e.url);
                    r.parse().then(function () {
                      (e.spritesheet = r), (e.textures = r.textures), i();
                    });
                  }
                });
              } else i();
            }),
            (t.getResourcePath = function (t, e) {
              return t.isDataUrl
                ? t.data.meta.image
                : ht.resolve(t.url.replace(e, ""), t.data.meta.image);
            }),
            (t.extension = de.Loader),
            t
          );
        })(),
        es = function (t, e) {
          return (
            (es =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
              }),
            es(t, e)
          );
        };
      function is(t, e) {
        function i() {
          this.constructor = t;
        }
        es(t, e),
          (t.prototype =
            null === e
              ? Object.create(e)
              : ((i.prototype = e.prototype), new i()));
      }
      var rs = new Vt(),
        ns =
          ((function (t) {
            function e(e, i, r) {
              void 0 === i && (i = 100), void 0 === r && (r = 100);
              var n = t.call(this, e) || this;
              return (
                (n.tileTransform = new ne()),
                (n._width = i),
                (n._height = r),
                (n.uvMatrix = n.texture.uvMatrix || new Wi(e)),
                (n.pluginName = "tilingSprite"),
                (n.uvRespectAnchor = !1),
                n
              );
            }
            is(e, t),
              Object.defineProperty(e.prototype, "clampMargin", {
                get: function () {
                  return this.uvMatrix.clampMargin;
                },
                set: function (t) {
                  (this.uvMatrix.clampMargin = t), this.uvMatrix.update(!0);
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "tileScale", {
                get: function () {
                  return this.tileTransform.scale;
                },
                set: function (t) {
                  this.tileTransform.scale.copyFrom(t);
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "tilePosition", {
                get: function () {
                  return this.tileTransform.position;
                },
                set: function (t) {
                  this.tileTransform.position.copyFrom(t);
                },
                enumerable: !1,
                configurable: !0,
              }),
              (e.prototype._onTextureUpdate = function () {
                this.uvMatrix && (this.uvMatrix.texture = this._texture),
                  (this._cachedTint = 16777215);
              }),
              (e.prototype._render = function (t) {
                var e = this._texture;
                e &&
                  e.valid &&
                  (this.tileTransform.updateLocalTransform(),
                  this.uvMatrix.update(),
                  t.batch.setObjectRenderer(t.plugins[this.pluginName]),
                  t.plugins[this.pluginName].render(this));
              }),
              (e.prototype._calculateBounds = function () {
                var t = this._width * -this._anchor._x,
                  e = this._height * -this._anchor._y,
                  i = this._width * (1 - this._anchor._x),
                  r = this._height * (1 - this._anchor._y);
                this._bounds.addFrame(this.transform, t, e, i, r);
              }),
              (e.prototype.getLocalBounds = function (e) {
                return 0 === this.children.length
                  ? ((this._bounds.minX = this._width * -this._anchor._x),
                    (this._bounds.minY = this._height * -this._anchor._y),
                    (this._bounds.maxX = this._width * (1 - this._anchor._x)),
                    (this._bounds.maxY = this._height * (1 - this._anchor._y)),
                    e ||
                      (this._localBoundsRect ||
                        (this._localBoundsRect = new zt()),
                      (e = this._localBoundsRect)),
                    this._bounds.getRectangle(e))
                  : t.prototype.getLocalBounds.call(this, e);
              }),
              (e.prototype.containsPoint = function (t) {
                this.worldTransform.applyInverse(t, rs);
                var e = this._width,
                  i = this._height,
                  r = -e * this.anchor._x;
                if (rs.x >= r && rs.x < r + e) {
                  var n = -i * this.anchor._y;
                  if (rs.y >= n && rs.y < n + i) return !0;
                }
                return !1;
              }),
              (e.prototype.destroy = function (e) {
                t.prototype.destroy.call(this, e),
                  (this.tileTransform = null),
                  (this.uvMatrix = null);
              }),
              (e.from = function (t, i) {
                return new e(
                  t instanceof Ye ? t : Ye.from(t, i),
                  i.width,
                  i.height
                );
              }),
              Object.defineProperty(e.prototype, "width", {
                get: function () {
                  return this._width;
                },
                set: function (t) {
                  this._width = t;
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "height", {
                get: function () {
                  return this._height;
                },
                set: function (t) {
                  this._height = t;
                },
                enumerable: !1,
                configurable: !0,
              });
          })(Co),
          "#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n"),
        os = new $t(),
        ss = (function (t) {
          function e(e) {
            var i = t.call(this, e) || this;
            return (
              e.runners.contextChange.add(i),
              (i.quad = new ni()),
              (i.state = Xi.for2d()),
              i
            );
          }
          return (
            is(e, t),
            (e.prototype.contextChange = function () {
              var t = this.renderer,
                e = { globals: t.globalUniforms };
              (this.simpleShader = zi.from(
                ns,
                "#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",
                e
              )),
                (this.shader =
                  t.context.webGLVersion > 1
                    ? zi.from(
                        "#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",
                        "#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",
                        e
                      )
                    : zi.from(
                        ns,
                        "#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",
                        e
                      ));
            }),
            (e.prototype.render = function (t) {
              var e = this.renderer,
                i = this.quad,
                r = i.vertices;
              (r[0] = r[6] = t._width * -t.anchor.x),
                (r[1] = r[3] = t._height * -t.anchor.y),
                (r[2] = r[4] = t._width * (1 - t.anchor.x)),
                (r[5] = r[7] = t._height * (1 - t.anchor.y));
              var n = t.uvRespectAnchor ? t.anchor.x : 0,
                o = t.uvRespectAnchor ? t.anchor.y : 0;
              ((r = i.uvs)[0] = r[6] = -n),
                (r[1] = r[3] = -o),
                (r[2] = r[4] = 1 - n),
                (r[5] = r[7] = 1 - o),
                i.invalidate();
              var s = t._texture,
                a = s.baseTexture,
                h = a.alphaMode > 0,
                u = t.tileTransform.localTransform,
                l = t.uvMatrix,
                c =
                  a.isPowerOfTwo &&
                  s.frame.width === a.width &&
                  s.frame.height === a.height;
              c &&
                (a._glTextures[e.CONTEXT_UID]
                  ? (c = a.wrapMode !== E.CLAMP)
                  : a.wrapMode === E.CLAMP && (a.wrapMode = E.REPEAT));
              var d = c ? this.simpleShader : this.shader,
                p = s.width,
                _ = s.height,
                f = t._width,
                m = t._height;
              os.set(
                (u.a * p) / f,
                (u.b * p) / m,
                (u.c * _) / f,
                (u.d * _) / m,
                u.tx / f,
                u.ty / m
              ),
                os.invert(),
                c
                  ? os.prepend(l.mapCoord)
                  : ((d.uniforms.uMapCoord = l.mapCoord.toArray(!0)),
                    (d.uniforms.uClampFrame = l.uClampFrame),
                    (d.uniforms.uClampOffset = l.uClampOffset)),
                (d.uniforms.uTransform = os.toArray(!0)),
                (d.uniforms.uColor = bt(
                  t.tint,
                  t.worldAlpha,
                  d.uniforms.uColor,
                  h
                )),
                (d.uniforms.translationMatrix =
                  t.transform.worldTransform.toArray(!0)),
                (d.uniforms.uSampler = s),
                e.shader.bind(d),
                e.geometry.bind(i),
                (this.state.blendMode = gt(t.blendMode, h)),
                e.state.set(this.state),
                e.geometry.draw(this.renderer.gl.TRIANGLES, 6, 0);
            }),
            (e.extension = { name: "tilingSprite", type: de.RendererPlugin }),
            e
          );
        })(ci),
        as = function (t, e) {
          return (
            (as =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
              }),
            as(t, e)
          );
        };
      function hs(t, e) {
        function i() {
          this.constructor = t;
        }
        as(t, e),
          (t.prototype =
            null === e
              ? Object.create(e)
              : ((i.prototype = e.prototype), new i()));
      }
      var us = (function () {
          function t(t, e) {
            (this.uvBuffer = t),
              (this.uvMatrix = e),
              (this.data = null),
              (this._bufferUpdateId = -1),
              (this._textureUpdateId = -1),
              (this._updateID = 0);
          }
          return (
            (t.prototype.update = function (t) {
              if (
                t ||
                this._bufferUpdateId !== this.uvBuffer._updateID ||
                this._textureUpdateId !== this.uvMatrix._updateID
              ) {
                (this._bufferUpdateId = this.uvBuffer._updateID),
                  (this._textureUpdateId = this.uvMatrix._updateID);
                var e = this.uvBuffer.data;
                (this.data && this.data.length === e.length) ||
                  (this.data = new Float32Array(e.length)),
                  this.uvMatrix.multiplyUvs(e, this.data),
                  this._updateID++;
              }
            }),
            t
          );
        })(),
        ls = new Vt(),
        cs = new Yt(),
        ds = (function (t) {
          function e(e, i, r, n) {
            void 0 === n && (n = b.TRIANGLES);
            var o = t.call(this) || this;
            return (
              (o.geometry = e),
              (o.shader = i),
              (o.state = r || Xi.for2d()),
              (o.drawMode = n),
              (o.start = 0),
              (o.size = 0),
              (o.uvs = null),
              (o.indices = null),
              (o.vertexData = new Float32Array(1)),
              (o.vertexDirty = -1),
              (o._transformID = -1),
              (o._roundPixels = nt.ROUND_PIXELS),
              (o.batchUvs = null),
              o
            );
          }
          return (
            hs(e, t),
            Object.defineProperty(e.prototype, "geometry", {
              get: function () {
                return this._geometry;
              },
              set: function (t) {
                this._geometry !== t &&
                  (this._geometry &&
                    (this._geometry.refCount--,
                    0 === this._geometry.refCount && this._geometry.dispose()),
                  (this._geometry = t),
                  this._geometry && this._geometry.refCount++,
                  (this.vertexDirty = -1));
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "uvBuffer", {
              get: function () {
                return this.geometry.buffers[1];
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "verticesBuffer", {
              get: function () {
                return this.geometry.buffers[0];
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "material", {
              get: function () {
                return this.shader;
              },
              set: function (t) {
                this.shader = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "blendMode", {
              get: function () {
                return this.state.blendMode;
              },
              set: function (t) {
                this.state.blendMode = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "roundPixels", {
              get: function () {
                return this._roundPixels;
              },
              set: function (t) {
                this._roundPixels !== t && (this._transformID = -1),
                  (this._roundPixels = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "tint", {
              get: function () {
                return "tint" in this.shader ? this.shader.tint : null;
              },
              set: function (t) {
                this.shader.tint = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "texture", {
              get: function () {
                return "texture" in this.shader ? this.shader.texture : null;
              },
              set: function (t) {
                this.shader.texture = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype._render = function (t) {
              var i = this.geometry.buffers[0].data;
              this.shader.batchable &&
              this.drawMode === b.TRIANGLES &&
              i.length < 2 * e.BATCHABLE_SIZE
                ? this._renderToBatch(t)
                : this._renderDefault(t);
            }),
            (e.prototype._renderDefault = function (t) {
              var e = this.shader;
              (e.alpha = this.worldAlpha),
                e.update && e.update(),
                t.batch.flush(),
                (e.uniforms.translationMatrix =
                  this.transform.worldTransform.toArray(!0)),
                t.shader.bind(e),
                t.state.set(this.state),
                t.geometry.bind(this.geometry, e),
                t.geometry.draw(
                  this.drawMode,
                  this.size,
                  this.start,
                  this.geometry.instanceCount
                );
            }),
            (e.prototype._renderToBatch = function (t) {
              var e = this.geometry,
                i = this.shader;
              i.uvMatrix && (i.uvMatrix.update(), this.calculateUvs()),
                this.calculateVertices(),
                (this.indices = e.indexBuffer.data),
                (this._tintRGB = i._tintRGB),
                (this._texture = i.texture);
              var r = this.material.pluginName;
              t.batch.setObjectRenderer(t.plugins[r]),
                t.plugins[r].render(this);
            }),
            (e.prototype.calculateVertices = function () {
              var t = this.geometry.buffers[0],
                e = t.data,
                i = t._updateID;
              if (
                i !== this.vertexDirty ||
                this._transformID !== this.transform._worldID
              ) {
                (this._transformID = this.transform._worldID),
                  this.vertexData.length !== e.length &&
                    (this.vertexData = new Float32Array(e.length));
                for (
                  var r = this.transform.worldTransform,
                    n = r.a,
                    o = r.b,
                    s = r.c,
                    a = r.d,
                    h = r.tx,
                    u = r.ty,
                    l = this.vertexData,
                    c = 0;
                  c < l.length / 2;
                  c++
                ) {
                  var d = e[2 * c],
                    p = e[2 * c + 1];
                  (l[2 * c] = n * d + s * p + h),
                    (l[2 * c + 1] = o * d + a * p + u);
                }
                if (this._roundPixels) {
                  var _ = nt.RESOLUTION;
                  for (c = 0; c < l.length; ++c)
                    l[c] = Math.round(((l[c] * _) | 0) / _);
                }
                this.vertexDirty = i;
              }
            }),
            (e.prototype.calculateUvs = function () {
              var t = this.geometry.buffers[1],
                e = this.shader;
              e.uvMatrix.isSimple
                ? (this.uvs = t.data)
                : (this.batchUvs || (this.batchUvs = new us(t, e.uvMatrix)),
                  this.batchUvs.update(),
                  (this.uvs = this.batchUvs.data));
            }),
            (e.prototype._calculateBounds = function () {
              this.calculateVertices(),
                this._bounds.addVertexData(
                  this.vertexData,
                  0,
                  this.vertexData.length
                );
            }),
            (e.prototype.containsPoint = function (t) {
              if (!this.getBounds().contains(t.x, t.y)) return !1;
              this.worldTransform.applyInverse(t, ls);
              for (
                var e = this.geometry.getBuffer("aVertexPosition").data,
                  i = cs.points,
                  r = this.geometry.getIndex().data,
                  n = r.length,
                  o = 4 === this.drawMode ? 3 : 1,
                  s = 0;
                s + 2 < n;
                s += o
              ) {
                var a = 2 * r[s],
                  h = 2 * r[s + 1],
                  u = 2 * r[s + 2];
                if (
                  ((i[0] = e[a]),
                  (i[1] = e[a + 1]),
                  (i[2] = e[h]),
                  (i[3] = e[h + 1]),
                  (i[4] = e[u]),
                  (i[5] = e[u + 1]),
                  cs.contains(ls.x, ls.y))
                )
                  return !0;
              }
              return !1;
            }),
            (e.prototype.destroy = function (e) {
              t.prototype.destroy.call(this, e),
                this._cachedTexture &&
                  (this._cachedTexture.destroy(), (this._cachedTexture = null)),
                (this.geometry = null),
                (this.shader = null),
                (this.state = null),
                (this.uvs = null),
                (this.indices = null),
                (this.vertexData = null);
            }),
            (e.BATCHABLE_SIZE = 100),
            e
          );
        })(ce),
        ps = (function (t) {
          function e(e, i) {
            var r = this,
              n = {
                uSampler: e,
                alpha: 1,
                uTextureMatrix: $t.IDENTITY,
                uColor: new Float32Array([1, 1, 1, 1]),
              };
            return (
              (i = Object.assign(
                { tint: 16777215, alpha: 1, pluginName: "batch" },
                i
              )).uniforms && Object.assign(n, i.uniforms),
              ((r =
                t.call(
                  this,
                  i.program ||
                    ji.from(
                      "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n",
                      "varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"
                    ),
                  n
                ) || this)._colorDirty = !1),
              (r.uvMatrix = new Wi(e)),
              (r.batchable = void 0 === i.program),
              (r.pluginName = i.pluginName),
              (r.tint = i.tint),
              (r.alpha = i.alpha),
              r
            );
          }
          return (
            hs(e, t),
            Object.defineProperty(e.prototype, "texture", {
              get: function () {
                return this.uniforms.uSampler;
              },
              set: function (t) {
                this.uniforms.uSampler !== t &&
                  (!this.uniforms.uSampler.baseTexture.alphaMode !=
                    !t.baseTexture.alphaMode && (this._colorDirty = !0),
                  (this.uniforms.uSampler = t),
                  (this.uvMatrix.texture = t));
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "alpha", {
              get: function () {
                return this._alpha;
              },
              set: function (t) {
                t !== this._alpha &&
                  ((this._alpha = t), (this._colorDirty = !0));
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "tint", {
              get: function () {
                return this._tint;
              },
              set: function (t) {
                t !== this._tint &&
                  ((this._tint = t),
                  (this._tintRGB = (t >> 16) + (65280 & t) + ((255 & t) << 16)),
                  (this._colorDirty = !0));
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.update = function () {
              if (this._colorDirty) {
                this._colorDirty = !1;
                var t = this.texture.baseTexture;
                bt(this._tint, this._alpha, this.uniforms.uColor, t.alphaMode);
              }
              this.uvMatrix.update() &&
                (this.uniforms.uTextureMatrix = this.uvMatrix.mapCoord);
            }),
            e
          );
        })(zi),
        _s = (function (t) {
          function e(e, i, r) {
            var n = t.call(this) || this,
              o = new Je(e),
              s = new Je(i, !0),
              a = new Je(r, !0, !0);
            return (
              n
                .addAttribute("aVertexPosition", o, 2, !1, T.FLOAT)
                .addAttribute("aTextureCoord", s, 2, !1, T.FLOAT)
                .addIndex(a),
              (n._updateId = -1),
              n
            );
          }
          return (
            hs(e, t),
            Object.defineProperty(e.prototype, "vertexDirtyId", {
              get: function () {
                return this.buffers[0]._updateID;
              },
              enumerable: !1,
              configurable: !0,
            }),
            e
          );
        })(ii),
        fs = function (t, e) {
          return (
            (fs =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
              }),
            fs(t, e)
          );
        },
        ms = function () {
          (this.info = []),
            (this.common = []),
            (this.page = []),
            (this.char = []),
            (this.kerning = []),
            (this.distanceField = []);
        },
        ys = (function () {
          function t() {}
          return (
            (t.test = function (t) {
              return "string" == typeof t && 0 === t.indexOf("info face=");
            }),
            (t.parse = function (t) {
              var e = t.match(/^[a-z]+\s+.+$/gm),
                i = {
                  info: [],
                  common: [],
                  page: [],
                  char: [],
                  chars: [],
                  kerning: [],
                  kernings: [],
                  distanceField: [],
                };
              for (var r in e) {
                var n = e[r].match(/^[a-z]+/gm)[0],
                  o = e[r].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),
                  s = {};
                for (var a in o) {
                  var h = o[a].split("="),
                    u = h[0],
                    l = h[1].replace(/"/gm, ""),
                    c = parseFloat(l),
                    d = isNaN(c) ? l : c;
                  s[u] = d;
                }
                i[n].push(s);
              }
              var p = new ms();
              return (
                i.info.forEach(function (t) {
                  return p.info.push({
                    face: t.face,
                    size: parseInt(t.size, 10),
                  });
                }),
                i.common.forEach(function (t) {
                  return p.common.push({
                    lineHeight: parseInt(t.lineHeight, 10),
                  });
                }),
                i.page.forEach(function (t) {
                  return p.page.push({ id: parseInt(t.id, 10), file: t.file });
                }),
                i.char.forEach(function (t) {
                  return p.char.push({
                    id: parseInt(t.id, 10),
                    page: parseInt(t.page, 10),
                    x: parseInt(t.x, 10),
                    y: parseInt(t.y, 10),
                    width: parseInt(t.width, 10),
                    height: parseInt(t.height, 10),
                    xoffset: parseInt(t.xoffset, 10),
                    yoffset: parseInt(t.yoffset, 10),
                    xadvance: parseInt(t.xadvance, 10),
                  });
                }),
                i.kerning.forEach(function (t) {
                  return p.kerning.push({
                    first: parseInt(t.first, 10),
                    second: parseInt(t.second, 10),
                    amount: parseInt(t.amount, 10),
                  });
                }),
                i.distanceField.forEach(function (t) {
                  return p.distanceField.push({
                    distanceRange: parseInt(t.distanceRange, 10),
                    fieldType: t.fieldType,
                  });
                }),
                p
              );
            }),
            t
          );
        })(),
        gs = (function () {
          function t() {}
          return (
            (t.test = function (t) {
              return (
                t instanceof XMLDocument &&
                t.getElementsByTagName("page").length &&
                null !== t.getElementsByTagName("info")[0].getAttribute("face")
              );
            }),
            (t.parse = function (t) {
              for (
                var e = new ms(),
                  i = t.getElementsByTagName("info"),
                  r = t.getElementsByTagName("common"),
                  n = t.getElementsByTagName("page"),
                  o = t.getElementsByTagName("char"),
                  s = t.getElementsByTagName("kerning"),
                  a = t.getElementsByTagName("distanceField"),
                  h = 0;
                h < i.length;
                h++
              )
                e.info.push({
                  face: i[h].getAttribute("face"),
                  size: parseInt(i[h].getAttribute("size"), 10),
                });
              for (h = 0; h < r.length; h++)
                e.common.push({
                  lineHeight: parseInt(r[h].getAttribute("lineHeight"), 10),
                });
              for (h = 0; h < n.length; h++)
                e.page.push({
                  id: parseInt(n[h].getAttribute("id"), 10) || 0,
                  file: n[h].getAttribute("file"),
                });
              for (h = 0; h < o.length; h++) {
                var u = o[h];
                e.char.push({
                  id: parseInt(u.getAttribute("id"), 10),
                  page: parseInt(u.getAttribute("page"), 10) || 0,
                  x: parseInt(u.getAttribute("x"), 10),
                  y: parseInt(u.getAttribute("y"), 10),
                  width: parseInt(u.getAttribute("width"), 10),
                  height: parseInt(u.getAttribute("height"), 10),
                  xoffset: parseInt(u.getAttribute("xoffset"), 10),
                  yoffset: parseInt(u.getAttribute("yoffset"), 10),
                  xadvance: parseInt(u.getAttribute("xadvance"), 10),
                });
              }
              for (h = 0; h < s.length; h++)
                e.kerning.push({
                  first: parseInt(s[h].getAttribute("first"), 10),
                  second: parseInt(s[h].getAttribute("second"), 10),
                  amount: parseInt(s[h].getAttribute("amount"), 10),
                });
              for (h = 0; h < a.length; h++)
                e.distanceField.push({
                  fieldType: a[h].getAttribute("fieldType"),
                  distanceRange: parseInt(
                    a[h].getAttribute("distanceRange"),
                    10
                  ),
                });
              return e;
            }),
            t
          );
        })(),
        vs = (function () {
          function t() {}
          return (
            (t.test = function (t) {
              if ("string" == typeof t && t.indexOf("<font>") > -1) {
                var e = new globalThis.DOMParser().parseFromString(
                  t,
                  "text/xml"
                );
                return gs.test(e);
              }
              return !1;
            }),
            (t.parse = function (t) {
              var e = new globalThis.DOMParser().parseFromString(t, "text/xml");
              return gs.parse(e);
            }),
            t
          );
        })(),
        bs = [ys, gs, vs];
      function xs(t) {
        for (var e = 0; e < bs.length; e++) if (bs[e].test(t)) return bs[e];
        return null;
      }
      function ws(t, e, i, r, n, o, s) {
        var a = i.text,
          h = i.fontProperties;
        e.translate(r, n), e.scale(o, o);
        var u = s.strokeThickness / 2,
          l = -s.strokeThickness / 2;
        if (
          ((e.font = s.toFontString()),
          (e.lineWidth = s.strokeThickness),
          (e.textBaseline = s.textBaseline),
          (e.lineJoin = s.lineJoin),
          (e.miterLimit = s.miterLimit),
          (e.fillStyle = (function (t, e, i, r, n, o) {
            var s,
              a = i.fill;
            if (!Array.isArray(a)) return a;
            if (1 === a.length) return a[0];
            var h = i.dropShadow ? i.dropShadowDistance : 0,
              u = i.padding || 0,
              l = t.width / r - h - 2 * u,
              c = t.height / r - h - 2 * u,
              d = a.slice(),
              p = i.fillGradientStops.slice();
            if (!p.length)
              for (var _ = d.length + 1, f = 1; f < _; ++f) p.push(f / _);
            if (
              (d.unshift(a[0]),
              p.unshift(0),
              d.push(a[a.length - 1]),
              p.push(1),
              i.fillGradientType === ho.LINEAR_VERTICAL)
            ) {
              s = e.createLinearGradient(l / 2, u, l / 2, c + u);
              var m = 0,
                y = (o.fontProperties.fontSize + i.strokeThickness) / c;
              for (f = 0; f < n.length; f++)
                for (var g = o.lineHeight * f, v = 0; v < d.length; v++) {
                  var b =
                      g / c +
                      ("number" == typeof p[v] ? p[v] : v / d.length) * y,
                    x = Math.max(m, b);
                  (x = Math.min(x, 1)), s.addColorStop(x, d[v]), (m = x);
                }
            } else {
              s = e.createLinearGradient(u, c / 2, l + u, c / 2);
              var w = d.length + 1,
                T = 1;
              for (f = 0; f < d.length; f++) {
                var A;
                (A = "number" == typeof p[f] ? p[f] : T / w),
                  s.addColorStop(A, d[f]),
                  T++;
              }
            }
            return s;
          })(t, e, s, o, [a], i)),
          (e.strokeStyle = s.stroke),
          s.dropShadow)
        ) {
          var c = s.dropShadowColor,
            d = pt("number" == typeof c ? c : ft(c)),
            p = s.dropShadowBlur * o,
            _ = s.dropShadowDistance * o;
          (e.shadowColor =
            "rgba(" +
            255 * d[0] +
            "," +
            255 * d[1] +
            "," +
            255 * d[2] +
            "," +
            s.dropShadowAlpha +
            ")"),
            (e.shadowBlur = p),
            (e.shadowOffsetX = Math.cos(s.dropShadowAngle) * _),
            (e.shadowOffsetY = Math.sin(s.dropShadowAngle) * _);
        } else
          (e.shadowColor = "black"),
            (e.shadowBlur = 0),
            (e.shadowOffsetX = 0),
            (e.shadowOffsetY = 0);
        s.stroke &&
          s.strokeThickness &&
          e.strokeText(a, u, l + i.lineHeight - h.descent),
          s.fill && e.fillText(a, u, l + i.lineHeight - h.descent),
          e.setTransform(1, 0, 0, 1, 0, 0),
          (e.fillStyle = "rgba(0, 0, 0, 0)");
      }
      function Ts(t) {
        return Array.from ? Array.from(t) : t.split("");
      }
      function As(t) {
        return t.codePointAt ? t.codePointAt(0) : t.charCodeAt(0);
      }
      var Ss = (function () {
          function t(t, e, i) {
            var r,
              n,
              o = t.info[0],
              s = t.common[0],
              a = t.page[0],
              h = t.distanceField[0],
              u = Dt(a.file),
              l = {};
            (this._ownsTextures = i),
              (this.font = o.face),
              (this.size = o.size),
              (this.lineHeight = s.lineHeight / u),
              (this.chars = {}),
              (this.pageTextures = l);
            for (var c = 0; c < t.page.length; c++) {
              var d = t.page[c],
                p = d.id,
                _ = d.file;
              (l[p] = e instanceof Array ? e[c] : e[_]),
                (null == h ? void 0 : h.fieldType) &&
                  "none" !== h.fieldType &&
                  ((l[p].baseTexture.alphaMode = M.NO_PREMULTIPLIED_ALPHA),
                  (l[p].baseTexture.mipmap = C.OFF));
            }
            for (c = 0; c < t.char.length; c++) {
              var f = t.char[c],
                m = ((p = f.id), f.page),
                y = t.char[c],
                g = y.x,
                v = y.y,
                b = y.width,
                x = y.height,
                w = y.xoffset,
                T = y.yoffset,
                A = y.xadvance;
              (v /= u), (b /= u), (x /= u), (w /= u), (T /= u), (A /= u);
              var S = new zt(
                (g /= u) + l[m].frame.x / u,
                v + l[m].frame.y / u,
                b,
                x
              );
              this.chars[p] = {
                xOffset: w,
                yOffset: T,
                xAdvance: A,
                kerning: {},
                texture: new Ye(l[m].baseTexture, S),
                page: m,
              };
            }
            for (c = 0; c < t.kerning.length; c++) {
              var E = t.kerning[c],
                P = E.first,
                B = E.second,
                O = E.amount;
              (P /= u),
                (B /= u),
                (O /= u),
                this.chars[B] && (this.chars[B].kerning[P] = O);
            }
            (this.distanceFieldRange = null == h ? void 0 : h.distanceRange),
              (this.distanceFieldType =
                null !==
                  (n =
                    null === (r = null == h ? void 0 : h.fieldType) ||
                    void 0 === r
                      ? void 0
                      : r.toLowerCase()) && void 0 !== n
                  ? n
                  : "none");
          }
          return (
            (t.prototype.destroy = function () {
              for (var t in this.chars)
                this.chars[t].texture.destroy(), (this.chars[t].texture = null);
              for (var t in this.pageTextures)
                this._ownsTextures && this.pageTextures[t].destroy(!0),
                  (this.pageTextures[t] = null);
              (this.chars = null), (this.pageTextures = null);
            }),
            (t.install = function (e, i, r) {
              var n;
              if (e instanceof ms) n = e;
              else {
                var o = xs(e);
                if (!o) throw new Error("Unrecognized data format for font.");
                n = o.parse(e);
              }
              i instanceof Ye && (i = [i]);
              var s = new t(n, i, r);
              return (t.available[s.font] = s), s;
            }),
            (t.uninstall = function (e) {
              var i = t.available[e];
              if (!i) throw new Error("No font found named '" + e + "'");
              i.destroy(), delete t.available[e];
            }),
            (t.from = function (e, i, r) {
              if (!e)
                throw new Error("[BitmapFont] Property `name` is required.");
              var n = Object.assign({}, t.defaultOptions, r),
                o = n.chars,
                s = n.padding,
                a = n.resolution,
                h = n.textureWidth,
                u = n.textureHeight,
                l = (function (t) {
                  "string" == typeof t && (t = [t]);
                  for (var e = [], i = 0, r = t.length; i < r; i++) {
                    var n = t[i];
                    if (Array.isArray(n)) {
                      if (2 !== n.length)
                        throw new Error(
                          "[BitmapFont]: Invalid character range length, expecting 2 got " +
                            n.length +
                            "."
                        );
                      var o = n[0].charCodeAt(0),
                        s = n[1].charCodeAt(0);
                      if (s < o)
                        throw new Error(
                          "[BitmapFont]: Invalid character range."
                        );
                      for (var a = o, h = s; a <= h; a++)
                        e.push(String.fromCharCode(a));
                    } else e.push.apply(e, Ts(n));
                  }
                  if (0 === e.length)
                    throw new Error(
                      "[BitmapFont]: Empty set when resolving characters."
                    );
                  return e;
                })(o),
                c = i instanceof Oo ? i : new Oo(i),
                d = h,
                p = new ms();
              (p.info[0] = { face: c.fontFamily, size: c.fontSize }),
                (p.common[0] = { lineHeight: c.fontSize });
              for (
                var _, f, m, y = 0, g = 0, v = 0, b = [], x = 0;
                x < l.length;
                x++
              ) {
                _ ||
                  (((_ = nt.ADAPTER.createCanvas()).width = h),
                  (_.height = u),
                  (f = _.getContext("2d")),
                  (m = new Pe(_, { resolution: a })),
                  b.push(new Ye(m)),
                  p.page.push({ id: b.length - 1, file: "" }));
                var w = l[x],
                  T = Do.measureText(w, c, !1, _),
                  A = T.width,
                  S = Math.ceil(T.height),
                  E = Math.ceil(("italic" === c.fontStyle ? 2 : 1) * A);
                if (g >= u - S * a) {
                  if (0 === g)
                    throw new Error(
                      "[BitmapFont] textureHeight " +
                        u +
                        "px is too small (fontFamily: '" +
                        c.fontFamily +
                        "', fontSize: " +
                        c.fontSize +
                        "px, char: '" +
                        w +
                        "')"
                    );
                  --x,
                    (_ = null),
                    (f = null),
                    (m = null),
                    (g = 0),
                    (y = 0),
                    (v = 0);
                } else if (
                  ((v = Math.max(S + T.fontProperties.descent, v)),
                  E * a + y >= d)
                ) {
                  if (0 === y)
                    throw new Error(
                      "[BitmapFont] textureWidth " +
                        h +
                        "px is too small (fontFamily: '" +
                        c.fontFamily +
                        "', fontSize: " +
                        c.fontSize +
                        "px, char: '" +
                        w +
                        "')"
                    );
                  --x, (g += v * a), (g = Math.ceil(g)), (y = 0), (v = 0);
                } else {
                  ws(_, f, T, y, g, a, c);
                  var C = As(T.text);
                  p.char.push({
                    id: C,
                    page: b.length - 1,
                    x: y / a,
                    y: g / a,
                    width: E,
                    height: S,
                    xoffset: 0,
                    yoffset: 0,
                    xadvance: Math.ceil(
                      A -
                        (c.dropShadow ? c.dropShadowDistance : 0) -
                        (c.stroke ? c.strokeThickness : 0)
                    ),
                  }),
                    (y += (E + 2 * s) * a),
                    (y = Math.ceil(y));
                }
              }
              if (!(null == r ? void 0 : r.skipKerning)) {
                x = 0;
                for (var M = l.length; x < M; x++)
                  for (var P = l[x], B = 0; B < M; B++) {
                    var O = l[B],
                      R = f.measureText(P).width,
                      I = f.measureText(O).width,
                      k = f.measureText(P + O).width - (R + I);
                    k &&
                      p.kerning.push({
                        first: As(P),
                        second: As(O),
                        amount: k,
                      });
                  }
              }
              var F = new t(p, b, !0);
              return (
                void 0 !== t.available[e] && t.uninstall(e),
                (t.available[e] = F),
                F
              );
            }),
            (t.ALPHA = [["a", "z"], ["A", "Z"], " "]),
            (t.NUMERIC = [["0", "9"]]),
            (t.ALPHANUMERIC = [["a", "z"], ["A", "Z"], ["0", "9"], " "]),
            (t.ASCII = [[" ", "~"]]),
            (t.defaultOptions = {
              resolution: 1,
              textureWidth: 512,
              textureHeight: 512,
              padding: 4,
              chars: t.ALPHANUMERIC,
            }),
            (t.available = {}),
            t
          );
        })(),
        Es = [],
        Cs = [],
        Ms = [],
        Ps =
          ((function (t) {
            function e(i, r) {
              void 0 === r && (r = {});
              var n = t.call(this) || this;
              n._tint = 16777215;
              var o = Object.assign({}, e.styleDefaults, r),
                s = o.align,
                a = o.tint,
                h = o.maxWidth,
                u = o.letterSpacing,
                l = o.fontName,
                c = o.fontSize;
              if (!Ss.available[l])
                throw new Error('Missing BitmapFont "' + l + '"');
              return (
                (n._activePagesMeshData = []),
                (n._textWidth = 0),
                (n._textHeight = 0),
                (n._align = s),
                (n._tint = a),
                (n._font = void 0),
                (n._fontName = l),
                (n._fontSize = c),
                (n.text = i),
                (n._maxWidth = h),
                (n._maxLineHeight = 0),
                (n._letterSpacing = u),
                (n._anchor = new qt(
                  function () {
                    n.dirty = !0;
                  },
                  n,
                  0,
                  0
                )),
                (n._roundPixels = nt.ROUND_PIXELS),
                (n.dirty = !0),
                (n._resolution = nt.RESOLUTION),
                (n._autoResolution = !0),
                (n._textureCache = {}),
                n
              );
            }
            (function (t, e) {
              function i() {
                this.constructor = t;
              }
              fs(t, e),
                (t.prototype =
                  null === e
                    ? Object.create(e)
                    : ((i.prototype = e.prototype), new i()));
            })(e, t),
              (e.prototype.updateText = function () {
                for (
                  var t,
                    e = Ss.available[this._fontName],
                    i = this.fontSize,
                    r = i / e.size,
                    n = new Vt(),
                    o = [],
                    s = [],
                    a = [],
                    h = Ts(this._text.replace(/(?:\r\n|\r)/g, "\n") || " "),
                    u = (this._maxWidth * e.size) / i,
                    l = "none" === e.distanceFieldType ? Es : Cs,
                    c = null,
                    d = 0,
                    p = 0,
                    _ = 0,
                    f = -1,
                    m = 0,
                    y = 0,
                    g = 0,
                    b = 0,
                    x = 0;
                  x < h.length;
                  x++
                ) {
                  var w = As((j = h[x]));
                  if (
                    (/(?:\s)/.test(j) && ((f = x), (m = d), b++),
                    "\r" !== j && "\n" !== j)
                  ) {
                    var T = e.chars[w];
                    if (T) {
                      c && T.kerning[c] && (n.x += T.kerning[c]);
                      var A = Ms.pop() || {
                        texture: Ye.EMPTY,
                        line: 0,
                        charCode: 0,
                        prevSpaces: 0,
                        position: new Vt(),
                      };
                      (A.texture = T.texture),
                        (A.line = _),
                        (A.charCode = w),
                        (A.position.x =
                          n.x + T.xOffset + this._letterSpacing / 2),
                        (A.position.y = n.y + T.yOffset),
                        (A.prevSpaces = b),
                        o.push(A),
                        (d =
                          A.position.x +
                          Math.max(
                            T.xAdvance - T.xOffset,
                            T.texture.orig.width
                          )),
                        (n.x += T.xAdvance + this._letterSpacing),
                        (g = Math.max(g, T.yOffset + T.texture.height)),
                        (c = w),
                        -1 !== f &&
                          u > 0 &&
                          n.x > u &&
                          (St(o, 1 + f - ++y, 1 + x - f),
                          (x = f),
                          (f = -1),
                          s.push(m),
                          a.push(o.length > 0 ? o[o.length - 1].prevSpaces : 0),
                          (p = Math.max(p, m)),
                          _++,
                          (n.x = 0),
                          (n.y += e.lineHeight),
                          (c = null),
                          (b = 0));
                    }
                  } else
                    s.push(d),
                      a.push(-1),
                      (p = Math.max(p, d)),
                      ++_,
                      ++y,
                      (n.x = 0),
                      (n.y += e.lineHeight),
                      (c = null),
                      (b = 0);
                }
                var S = h[h.length - 1];
                "\r" !== S &&
                  "\n" !== S &&
                  (/(?:\s)/.test(S) && (d = m),
                  s.push(d),
                  (p = Math.max(p, d)),
                  a.push(-1));
                var E = [];
                for (x = 0; x <= _; x++) {
                  var C = 0;
                  "right" === this._align
                    ? (C = p - s[x])
                    : "center" === this._align
                    ? (C = (p - s[x]) / 2)
                    : "justify" === this._align &&
                      (C = a[x] < 0 ? 0 : (p - s[x]) / a[x]),
                    E.push(C);
                }
                var M = o.length,
                  P = {},
                  B = [],
                  O = this._activePagesMeshData;
                for (l.push.apply(l, O), x = 0; x < M; x++) {
                  var R = (X = o[x].texture).baseTexture.uid;
                  if (!P[R]) {
                    if (!(J = l.pop())) {
                      var I = new _s(),
                        k = void 0,
                        F = void 0;
                      "none" === e.distanceFieldType
                        ? ((k = new ps(Ye.EMPTY)), (F = v.NORMAL))
                        : ((k = new ps(Ye.EMPTY, {
                            program: ji.from(
                              "// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n",
                              "// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"
                            ),
                            uniforms: { uFWidth: 0 },
                          })),
                          (F = v.NORMAL_NPM));
                      var D = new ds(I, k);
                      (D.blendMode = F),
                        (J = {
                          index: 0,
                          indexCount: 0,
                          vertexCount: 0,
                          uvsCount: 0,
                          total: 0,
                          mesh: D,
                          vertices: null,
                          uvs: null,
                          indices: null,
                        });
                    }
                    (J.index = 0),
                      (J.indexCount = 0),
                      (J.vertexCount = 0),
                      (J.uvsCount = 0),
                      (J.total = 0);
                    var N = this._textureCache;
                    (N[R] = N[R] || new Ye(X.baseTexture)),
                      (J.mesh.texture = N[R]),
                      (J.mesh.tint = this._tint),
                      B.push(J),
                      (P[R] = J);
                  }
                  P[R].total++;
                }
                for (x = 0; x < O.length; x++)
                  -1 === B.indexOf(O[x]) && this.removeChild(O[x].mesh);
                for (x = 0; x < B.length; x++)
                  B[x].mesh.parent !== this && this.addChild(B[x].mesh);
                for (var x in ((this._activePagesMeshData = B), P)) {
                  var L = (J = P[x]).total;
                  if (
                    !(
                      (null === (t = J.indices) || void 0 === t
                        ? void 0
                        : t.length) >
                      6 * L
                    ) ||
                    J.vertices.length < 2 * ds.BATCHABLE_SIZE
                  )
                    (J.vertices = new Float32Array(8 * L)),
                      (J.uvs = new Float32Array(8 * L)),
                      (J.indices = new Uint16Array(6 * L));
                  else
                    for (
                      var U = J.total, G = J.vertices, V = 4 * U * 2;
                      V < G.length;
                      V++
                    )
                      G[V] = 0;
                  J.mesh.size = 6 * L;
                }
                for (x = 0; x < M; x++) {
                  var j,
                    z =
                      (j = o[x]).position.x +
                      E[j.line] *
                        ("justify" === this._align ? j.prevSpaces : 1);
                  this._roundPixels && (z = Math.round(z));
                  var X,
                    H = z * r,
                    Y = j.position.y * r,
                    W = P[(X = j.texture).baseTexture.uid],
                    q = X.frame,
                    $ = X._uvs,
                    K = W.index++;
                  (W.indices[6 * K + 0] = 0 + 4 * K),
                    (W.indices[6 * K + 1] = 1 + 4 * K),
                    (W.indices[6 * K + 2] = 2 + 4 * K),
                    (W.indices[6 * K + 3] = 0 + 4 * K),
                    (W.indices[6 * K + 4] = 2 + 4 * K),
                    (W.indices[6 * K + 5] = 3 + 4 * K),
                    (W.vertices[8 * K + 0] = H),
                    (W.vertices[8 * K + 1] = Y),
                    (W.vertices[8 * K + 2] = H + q.width * r),
                    (W.vertices[8 * K + 3] = Y),
                    (W.vertices[8 * K + 4] = H + q.width * r),
                    (W.vertices[8 * K + 5] = Y + q.height * r),
                    (W.vertices[8 * K + 6] = H),
                    (W.vertices[8 * K + 7] = Y + q.height * r),
                    (W.uvs[8 * K + 0] = $.x0),
                    (W.uvs[8 * K + 1] = $.y0),
                    (W.uvs[8 * K + 2] = $.x1),
                    (W.uvs[8 * K + 3] = $.y1),
                    (W.uvs[8 * K + 4] = $.x2),
                    (W.uvs[8 * K + 5] = $.y2),
                    (W.uvs[8 * K + 6] = $.x3),
                    (W.uvs[8 * K + 7] = $.y3);
                }
                for (var x in ((this._textWidth = p * r),
                (this._textHeight = (n.y + e.lineHeight) * r),
                P)) {
                  var J = P[x];
                  if (0 !== this.anchor.x || 0 !== this.anchor.y)
                    for (
                      var Z = 0,
                        Q = this._textWidth * this.anchor.x,
                        tt = this._textHeight * this.anchor.y,
                        et = 0;
                      et < J.total;
                      et++
                    )
                      (J.vertices[Z++] -= Q),
                        (J.vertices[Z++] -= tt),
                        (J.vertices[Z++] -= Q),
                        (J.vertices[Z++] -= tt),
                        (J.vertices[Z++] -= Q),
                        (J.vertices[Z++] -= tt),
                        (J.vertices[Z++] -= Q),
                        (J.vertices[Z++] -= tt);
                  this._maxLineHeight = g * r;
                  var it = J.mesh.geometry.getBuffer("aVertexPosition"),
                    rt = J.mesh.geometry.getBuffer("aTextureCoord"),
                    nt = J.mesh.geometry.getIndex();
                  (it.data = J.vertices),
                    (rt.data = J.uvs),
                    (nt.data = J.indices),
                    it.update(),
                    rt.update(),
                    nt.update();
                }
                for (x = 0; x < o.length; x++) Ms.push(o[x]);
                (this._font = e), (this.dirty = !1);
              }),
              (e.prototype.updateTransform = function () {
                this.validate(), this.containerUpdateTransform();
              }),
              (e.prototype._render = function (e) {
                this._autoResolution &&
                  this._resolution !== e.resolution &&
                  ((this._resolution = e.resolution), (this.dirty = !0));
                var i = Ss.available[this._fontName],
                  r = i.distanceFieldRange,
                  n = i.distanceFieldType,
                  o = i.size;
                if ("none" !== n)
                  for (
                    var s = this.worldTransform,
                      a = s.a,
                      h = s.b,
                      u = s.c,
                      l = s.d,
                      c = Math.sqrt(a * a + h * h),
                      d = Math.sqrt(u * u + l * l),
                      p = (Math.abs(c) + Math.abs(d)) / 2,
                      _ = this.fontSize / o,
                      f = 0,
                      m = this._activePagesMeshData;
                    f < m.length;
                    f++
                  )
                    m[f].mesh.shader.uniforms.uFWidth =
                      p * r * _ * this._resolution;
                t.prototype._render.call(this, e);
              }),
              (e.prototype.getLocalBounds = function () {
                return this.validate(), t.prototype.getLocalBounds.call(this);
              }),
              (e.prototype.validate = function () {
                var t = Ss.available[this._fontName];
                if (!t)
                  throw new Error(
                    'Missing BitmapFont "' + this._fontName + '"'
                  );
                this._font !== t && (this.dirty = !0),
                  this.dirty && this.updateText();
              }),
              Object.defineProperty(e.prototype, "tint", {
                get: function () {
                  return this._tint;
                },
                set: function (t) {
                  if (this._tint !== t) {
                    this._tint = t;
                    for (var e = 0; e < this._activePagesMeshData.length; e++)
                      this._activePagesMeshData[e].mesh.tint = t;
                  }
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "align", {
                get: function () {
                  return this._align;
                },
                set: function (t) {
                  this._align !== t && ((this._align = t), (this.dirty = !0));
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "fontName", {
                get: function () {
                  return this._fontName;
                },
                set: function (t) {
                  if (!Ss.available[t])
                    throw new Error('Missing BitmapFont "' + t + '"');
                  this._fontName !== t &&
                    ((this._fontName = t), (this.dirty = !0));
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "fontSize", {
                get: function () {
                  var t;
                  return null !== (t = this._fontSize) && void 0 !== t
                    ? t
                    : Ss.available[this._fontName].size;
                },
                set: function (t) {
                  this._fontSize !== t &&
                    ((this._fontSize = t), (this.dirty = !0));
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "anchor", {
                get: function () {
                  return this._anchor;
                },
                set: function (t) {
                  "number" == typeof t
                    ? this._anchor.set(t)
                    : this._anchor.copyFrom(t);
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "text", {
                get: function () {
                  return this._text;
                },
                set: function (t) {
                  (t = String(null == t ? "" : t)),
                    this._text !== t && ((this._text = t), (this.dirty = !0));
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "maxWidth", {
                get: function () {
                  return this._maxWidth;
                },
                set: function (t) {
                  this._maxWidth !== t &&
                    ((this._maxWidth = t), (this.dirty = !0));
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "maxLineHeight", {
                get: function () {
                  return this.validate(), this._maxLineHeight;
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "textWidth", {
                get: function () {
                  return this.validate(), this._textWidth;
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "letterSpacing", {
                get: function () {
                  return this._letterSpacing;
                },
                set: function (t) {
                  this._letterSpacing !== t &&
                    ((this._letterSpacing = t), (this.dirty = !0));
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "roundPixels", {
                get: function () {
                  return this._roundPixels;
                },
                set: function (t) {
                  t !== this._roundPixels &&
                    ((this._roundPixels = t), (this.dirty = !0));
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "textHeight", {
                get: function () {
                  return this.validate(), this._textHeight;
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "resolution", {
                get: function () {
                  return this._resolution;
                },
                set: function (t) {
                  (this._autoResolution = !1),
                    this._resolution !== t &&
                      ((this._resolution = t), (this.dirty = !0));
                },
                enumerable: !1,
                configurable: !0,
              }),
              (e.prototype.destroy = function (e) {
                var i = this._textureCache,
                  r =
                    "none" === Ss.available[this._fontName].distanceFieldType
                      ? Es
                      : Cs;
                r.push.apply(r, this._activePagesMeshData);
                for (
                  var n = 0, o = this._activePagesMeshData;
                  n < o.length;
                  n++
                ) {
                  var s = o[n];
                  this.removeChild(s.mesh);
                }
                for (var a in ((this._activePagesMeshData = []),
                r
                  .filter(function (t) {
                    return i[t.mesh.texture.baseTexture.uid];
                  })
                  .forEach(function (t) {
                    t.mesh.texture = Ye.EMPTY;
                  }),
                i))
                  i[a].destroy(), delete i[a];
                (this._font = null),
                  (this._textureCache = null),
                  t.prototype.destroy.call(this, e);
              }),
              (e.styleDefaults = {
                align: "left",
                tint: 16777215,
                maxWidth: 0,
                letterSpacing: 0,
              });
          })(ce),
          (function () {
            function t() {}
            return (
              (t.add = function () {
                sn.setExtensionXhrType("fnt", sn.XHR_RESPONSE_TYPE.TEXT);
              }),
              (t.use = function (e, i) {
                var r = xs(e.data);
                if (r)
                  for (
                    var n = t.getBaseUrl(this, e),
                      o = r.parse(e.data),
                      s = {},
                      a = function (t) {
                        (s[t.metadata.pageFile] = t.texture),
                          Object.keys(s).length === o.page.length &&
                            ((e.bitmapFont = Ss.install(o, s, !0)), i());
                      },
                      h = 0;
                    h < o.page.length;
                    ++h
                  ) {
                    var u = o.page[h].file,
                      l = n + u,
                      c = !1;
                    for (var d in this.resources) {
                      var p = this.resources[d];
                      if (p.url === l) {
                        (p.metadata.pageFile = u),
                          p.texture ? a(p) : p.onAfterMiddleware.add(a),
                          (c = !0);
                        break;
                      }
                    }
                    if (!c) {
                      var _ = {
                        crossOrigin: e.crossOrigin,
                        loadType: sn.LOAD_TYPE.IMAGE,
                        metadata: Object.assign(
                          { pageFile: u },
                          e.metadata.imageMetadata
                        ),
                        parentResource: e,
                      };
                      this.add(l, _, a);
                    }
                  }
                else i();
              }),
              (t.getBaseUrl = function (e, i) {
                var r = i.isDataUrl ? "" : t.dirname(i.url);
                return (
                  i.isDataUrl &&
                    ("." === r && (r = ""),
                    e.baseUrl &&
                      r &&
                      "/" === e.baseUrl.charAt(e.baseUrl.length - 1) &&
                      (r += "/")),
                  (r = r.replace(e.baseUrl, "")) &&
                    "/" !== r.charAt(r.length - 1) &&
                    (r += "/"),
                  r
                );
              }),
              (t.dirname = function (t) {
                var e = t
                  .replace(/\\/g, "/")
                  .replace(/\/$/, "")
                  .replace(/\/[^\/]*$/, "");
                return e === t ? "." : "" === e ? "/" : e;
              }),
              (t.extension = de.Loader),
              t
            );
          })()),
        Bs = function (t, e) {
          return (
            (Bs =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
              }),
            Bs(t, e)
          );
        };
      !(function (t) {
        function e(e) {
          void 0 === e && (e = 1);
          var i =
            t.call(
              this,
              "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",
              "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",
              { uAlpha: 1 }
            ) || this;
          return (i.alpha = e), i;
        }
        (function (t, e) {
          function i() {
            this.constructor = t;
          }
          Bs(t, e),
            (t.prototype =
              null === e
                ? Object.create(e)
                : ((i.prototype = e.prototype), new i()));
        })(e, t),
          Object.defineProperty(e.prototype, "alpha", {
            get: function () {
              return this.uniforms.uAlpha;
            },
            set: function (t) {
              this.uniforms.uAlpha = t;
            },
            enumerable: !1,
            configurable: !0,
          });
      })(Hi);
      var Os = function (t, e) {
        return (
          (Os =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
            }),
          Os(t, e)
        );
      };
      function Rs(t, e) {
        function i() {
          this.constructor = t;
        }
        Os(t, e),
          (t.prototype =
            null === e
              ? Object.create(e)
              : ((i.prototype = e.prototype), new i()));
      }
      var Is = {
          5: [0.153388, 0.221461, 0.250301],
          7: [0.071303, 0.131514, 0.189879, 0.214607],
          9: [0.028532, 0.067234, 0.124009, 0.179044, 0.20236],
          11: [0.0093, 0.028002, 0.065984, 0.121703, 0.175713, 0.198596],
          13: [
            0.002406, 0.009255, 0.027867, 0.065666, 0.121117, 0.174868,
            0.197641,
          ],
          15: [
            489e-6, 0.002403, 0.009246, 0.02784, 0.065602, 0.120999, 0.174697,
            0.197448,
          ],
        },
        ks = [
          "varying vec2 vBlurTexCoords[%size%];",
          "uniform sampler2D uSampler;",
          "void main(void)",
          "{",
          "    gl_FragColor = vec4(0.0);",
          "    %blur%",
          "}",
        ].join("\n"),
        Fs = (function (t) {
          function e(e, i, r, n, o) {
            void 0 === i && (i = 8),
              void 0 === r && (r = 4),
              void 0 === n && (n = nt.FILTER_RESOLUTION),
              void 0 === o && (o = 5);
            var s = this,
              a = (function (t, e) {
                var i,
                  r = Math.ceil(t / 2),
                  n =
                    "\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",
                  o = "";
                i = e
                  ? "vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);"
                  : "vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";
                for (var s = 0; s < t; s++) {
                  var a = i.replace("%index%", s.toString());
                  (o += a = a.replace("%sampleIndex%", s - (r - 1) + ".0")),
                    (o += "\n");
                }
                return (n = n.replace("%blur%", o)).replace(
                  "%size%",
                  t.toString()
                );
              })(o, e),
              h = (function (t) {
                for (
                  var e, i = Is[t], r = i.length, n = ks, o = "", s = 0;
                  s < t;
                  s++
                ) {
                  var a =
                    "gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace(
                      "%index%",
                      s.toString()
                    );
                  (e = s),
                    s >= r && (e = t - s - 1),
                    (o += a = a.replace("%value%", i[e].toString())),
                    (o += "\n");
                }
                return (n = n.replace("%blur%", o)).replace(
                  "%size%",
                  t.toString()
                );
              })(o);
            return (
              ((s = t.call(this, a, h) || this).horizontal = e),
              (s.resolution = n),
              (s._quality = 0),
              (s.quality = r),
              (s.blur = i),
              s
            );
          }
          return (
            Rs(e, t),
            (e.prototype.apply = function (t, e, i, r) {
              if (
                (i
                  ? this.horizontal
                    ? (this.uniforms.strength =
                        (1 / i.width) * (i.width / e.width))
                    : (this.uniforms.strength =
                        (1 / i.height) * (i.height / e.height))
                  : this.horizontal
                  ? (this.uniforms.strength =
                      (1 / t.renderer.width) * (t.renderer.width / e.width))
                  : (this.uniforms.strength =
                      (1 / t.renderer.height) * (t.renderer.height / e.height)),
                (this.uniforms.strength *= this.strength),
                (this.uniforms.strength /= this.passes),
                1 === this.passes)
              )
                t.applyFilter(this, e, i, r);
              else {
                var n = t.getFilterTexture(),
                  o = t.renderer,
                  s = e,
                  a = n;
                (this.state.blend = !1), t.applyFilter(this, s, a, P.CLEAR);
                for (var h = 1; h < this.passes - 1; h++) {
                  t.bindAndClear(s, P.BLIT), (this.uniforms.uSampler = a);
                  var u = a;
                  (a = s), (s = u), o.shader.bind(this), o.geometry.draw(5);
                }
                (this.state.blend = !0),
                  t.applyFilter(this, a, i, r),
                  t.returnFilterTexture(n);
              }
            }),
            Object.defineProperty(e.prototype, "blur", {
              get: function () {
                return this.strength;
              },
              set: function (t) {
                (this.padding = 1 + 2 * Math.abs(t)), (this.strength = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "quality", {
              get: function () {
                return this._quality;
              },
              set: function (t) {
                (this._quality = t), (this.passes = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            e
          );
        })(Hi),
        Ds =
          ((function (t) {
            function e(e, i, r, n) {
              void 0 === e && (e = 8),
                void 0 === i && (i = 4),
                void 0 === r && (r = nt.FILTER_RESOLUTION),
                void 0 === n && (n = 5);
              var o = t.call(this) || this;
              return (
                (o.blurXFilter = new Fs(!0, e, i, r, n)),
                (o.blurYFilter = new Fs(!1, e, i, r, n)),
                (o.resolution = r),
                (o.quality = i),
                (o.blur = e),
                (o.repeatEdgePixels = !1),
                o
              );
            }
            Rs(e, t),
              (e.prototype.apply = function (t, e, i, r) {
                var n = Math.abs(this.blurXFilter.strength),
                  o = Math.abs(this.blurYFilter.strength);
                if (n && o) {
                  var s = t.getFilterTexture();
                  this.blurXFilter.apply(t, e, s, P.CLEAR),
                    this.blurYFilter.apply(t, s, i, r),
                    t.returnFilterTexture(s);
                } else
                  o
                    ? this.blurYFilter.apply(t, e, i, r)
                    : this.blurXFilter.apply(t, e, i, r);
              }),
              (e.prototype.updatePadding = function () {
                this._repeatEdgePixels
                  ? (this.padding = 0)
                  : (this.padding =
                      2 *
                      Math.max(
                        Math.abs(this.blurXFilter.strength),
                        Math.abs(this.blurYFilter.strength)
                      ));
              }),
              Object.defineProperty(e.prototype, "blur", {
                get: function () {
                  return this.blurXFilter.blur;
                },
                set: function (t) {
                  (this.blurXFilter.blur = this.blurYFilter.blur = t),
                    this.updatePadding();
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "quality", {
                get: function () {
                  return this.blurXFilter.quality;
                },
                set: function (t) {
                  this.blurXFilter.quality = this.blurYFilter.quality = t;
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "blurX", {
                get: function () {
                  return this.blurXFilter.blur;
                },
                set: function (t) {
                  (this.blurXFilter.blur = t), this.updatePadding();
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "blurY", {
                get: function () {
                  return this.blurYFilter.blur;
                },
                set: function (t) {
                  (this.blurYFilter.blur = t), this.updatePadding();
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "blendMode", {
                get: function () {
                  return this.blurYFilter.blendMode;
                },
                set: function (t) {
                  this.blurYFilter.blendMode = t;
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "repeatEdgePixels", {
                get: function () {
                  return this._repeatEdgePixels;
                },
                set: function (t) {
                  (this._repeatEdgePixels = t), this.updatePadding();
                },
                enumerable: !1,
                configurable: !0,
              });
          })(Hi),
          function (t, e) {
            return (
              (Ds =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
                }),
              Ds(t, e)
            );
          }),
        Ns = (function (t) {
          function e() {
            var e = this,
              i = {
                m: new Float32Array([
                  1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0,
                ]),
                uAlpha: 1,
              };
            return (
              ((e =
                t.call(
                  this,
                  wr,
                  "varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",
                  i
                ) || this).alpha = 1),
              e
            );
          }
          return (
            (function (t, e) {
              function i() {
                this.constructor = t;
              }
              Ds(t, e),
                (t.prototype =
                  null === e
                    ? Object.create(e)
                    : ((i.prototype = e.prototype), new i()));
            })(e, t),
            (e.prototype._loadMatrix = function (t, e) {
              void 0 === e && (e = !1);
              var i = t;
              e &&
                (this._multiply(i, this.uniforms.m, t),
                (i = this._colorMatrix(i))),
                (this.uniforms.m = i);
            }),
            (e.prototype._multiply = function (t, e, i) {
              return (
                (t[0] =
                  e[0] * i[0] + e[1] * i[5] + e[2] * i[10] + e[3] * i[15]),
                (t[1] =
                  e[0] * i[1] + e[1] * i[6] + e[2] * i[11] + e[3] * i[16]),
                (t[2] =
                  e[0] * i[2] + e[1] * i[7] + e[2] * i[12] + e[3] * i[17]),
                (t[3] =
                  e[0] * i[3] + e[1] * i[8] + e[2] * i[13] + e[3] * i[18]),
                (t[4] =
                  e[0] * i[4] +
                  e[1] * i[9] +
                  e[2] * i[14] +
                  e[3] * i[19] +
                  e[4]),
                (t[5] =
                  e[5] * i[0] + e[6] * i[5] + e[7] * i[10] + e[8] * i[15]),
                (t[6] =
                  e[5] * i[1] + e[6] * i[6] + e[7] * i[11] + e[8] * i[16]),
                (t[7] =
                  e[5] * i[2] + e[6] * i[7] + e[7] * i[12] + e[8] * i[17]),
                (t[8] =
                  e[5] * i[3] + e[6] * i[8] + e[7] * i[13] + e[8] * i[18]),
                (t[9] =
                  e[5] * i[4] +
                  e[6] * i[9] +
                  e[7] * i[14] +
                  e[8] * i[19] +
                  e[9]),
                (t[10] =
                  e[10] * i[0] + e[11] * i[5] + e[12] * i[10] + e[13] * i[15]),
                (t[11] =
                  e[10] * i[1] + e[11] * i[6] + e[12] * i[11] + e[13] * i[16]),
                (t[12] =
                  e[10] * i[2] + e[11] * i[7] + e[12] * i[12] + e[13] * i[17]),
                (t[13] =
                  e[10] * i[3] + e[11] * i[8] + e[12] * i[13] + e[13] * i[18]),
                (t[14] =
                  e[10] * i[4] +
                  e[11] * i[9] +
                  e[12] * i[14] +
                  e[13] * i[19] +
                  e[14]),
                (t[15] =
                  e[15] * i[0] + e[16] * i[5] + e[17] * i[10] + e[18] * i[15]),
                (t[16] =
                  e[15] * i[1] + e[16] * i[6] + e[17] * i[11] + e[18] * i[16]),
                (t[17] =
                  e[15] * i[2] + e[16] * i[7] + e[17] * i[12] + e[18] * i[17]),
                (t[18] =
                  e[15] * i[3] + e[16] * i[8] + e[17] * i[13] + e[18] * i[18]),
                (t[19] =
                  e[15] * i[4] +
                  e[16] * i[9] +
                  e[17] * i[14] +
                  e[18] * i[19] +
                  e[19]),
                t
              );
            }),
            (e.prototype._colorMatrix = function (t) {
              var e = new Float32Array(t);
              return (
                (e[4] /= 255), (e[9] /= 255), (e[14] /= 255), (e[19] /= 255), e
              );
            }),
            (e.prototype.brightness = function (t, e) {
              var i = [
                t,
                0,
                0,
                0,
                0,
                0,
                t,
                0,
                0,
                0,
                0,
                0,
                t,
                0,
                0,
                0,
                0,
                0,
                1,
                0,
              ];
              this._loadMatrix(i, e);
            }),
            (e.prototype.tint = function (t, e) {
              var i = [
                ((t >> 16) & 255) / 255,
                0,
                0,
                0,
                0,
                0,
                ((t >> 8) & 255) / 255,
                0,
                0,
                0,
                0,
                0,
                (255 & t) / 255,
                0,
                0,
                0,
                0,
                0,
                1,
                0,
              ];
              this._loadMatrix(i, e);
            }),
            (e.prototype.greyscale = function (t, e) {
              var i = [
                t,
                t,
                t,
                0,
                0,
                t,
                t,
                t,
                0,
                0,
                t,
                t,
                t,
                0,
                0,
                0,
                0,
                0,
                1,
                0,
              ];
              this._loadMatrix(i, e);
            }),
            (e.prototype.blackAndWhite = function (t) {
              this._loadMatrix(
                [
                  0.3, 0.6, 0.1, 0, 0, 0.3, 0.6, 0.1, 0, 0, 0.3, 0.6, 0.1, 0, 0,
                  0, 0, 0, 1, 0,
                ],
                t
              );
            }),
            (e.prototype.hue = function (t, e) {
              t = ((t || 0) / 180) * Math.PI;
              var i = Math.cos(t),
                r = Math.sin(t),
                n = 1 / 3,
                o = (0, Math.sqrt)(n),
                s = [
                  i + (1 - i) * n,
                  n * (1 - i) - o * r,
                  n * (1 - i) + o * r,
                  0,
                  0,
                  n * (1 - i) + o * r,
                  i + n * (1 - i),
                  n * (1 - i) - o * r,
                  0,
                  0,
                  n * (1 - i) - o * r,
                  n * (1 - i) + o * r,
                  i + n * (1 - i),
                  0,
                  0,
                  0,
                  0,
                  0,
                  1,
                  0,
                ];
              this._loadMatrix(s, e);
            }),
            (e.prototype.contrast = function (t, e) {
              var i = (t || 0) + 1,
                r = -0.5 * (i - 1),
                n = [
                  i,
                  0,
                  0,
                  0,
                  r,
                  0,
                  i,
                  0,
                  0,
                  r,
                  0,
                  0,
                  i,
                  0,
                  r,
                  0,
                  0,
                  0,
                  1,
                  0,
                ];
              this._loadMatrix(n, e);
            }),
            (e.prototype.saturate = function (t, e) {
              void 0 === t && (t = 0);
              var i = (2 * t) / 3 + 1,
                r = -0.5 * (i - 1),
                n = [
                  i,
                  r,
                  r,
                  0,
                  0,
                  r,
                  i,
                  r,
                  0,
                  0,
                  r,
                  r,
                  i,
                  0,
                  0,
                  0,
                  0,
                  0,
                  1,
                  0,
                ];
              this._loadMatrix(n, e);
            }),
            (e.prototype.desaturate = function () {
              this.saturate(-1);
            }),
            (e.prototype.negative = function (t) {
              this._loadMatrix(
                [-1, 0, 0, 1, 0, 0, -1, 0, 1, 0, 0, 0, -1, 1, 0, 0, 0, 0, 1, 0],
                t
              );
            }),
            (e.prototype.sepia = function (t) {
              this._loadMatrix(
                [
                  0.393, 0.7689999, 0.18899999, 0, 0, 0.349, 0.6859999,
                  0.16799999, 0, 0, 0.272, 0.5339999, 0.13099999, 0, 0, 0, 0, 0,
                  1, 0,
                ],
                t
              );
            }),
            (e.prototype.technicolor = function (t) {
              this._loadMatrix(
                [
                  1.9125277891456083, -0.8545344976951645, -0.09155508482755585,
                  0, 11.793603434377337, -0.3087833385928097,
                  1.7658908555458428, -0.10601743074722245, 0,
                  -70.35205161461398, -0.231103377548616, -0.7501899197440212,
                  1.847597816108189, 0, 30.950940869491138, 0, 0, 0, 1, 0,
                ],
                t
              );
            }),
            (e.prototype.polaroid = function (t) {
              this._loadMatrix(
                [
                  1.438, -0.062, -0.062, 0, 0, -0.122, 1.378, -0.122, 0, 0,
                  -0.016, -0.016, 1.483, 0, 0, 0, 0, 0, 1, 0,
                ],
                t
              );
            }),
            (e.prototype.toBGR = function (t) {
              this._loadMatrix(
                [0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0],
                t
              );
            }),
            (e.prototype.kodachrome = function (t) {
              this._loadMatrix(
                [
                  1.1285582396593525, -0.3967382283601348, -0.03992559172921793,
                  0, 63.72958762196502, -0.16404339962244616,
                  1.0835251566291304, -0.05498805115633132, 0,
                  24.732407896706203, -0.16786010706155763, -0.5603416277695248,
                  1.6014850761964943, 0, 35.62982807460946, 0, 0, 0, 1, 0,
                ],
                t
              );
            }),
            (e.prototype.browni = function (t) {
              this._loadMatrix(
                [
                  0.5997023498159715, 0.34553243048391263, -0.2708298674538042,
                  0, 47.43192855600873, -0.037703249837783157,
                  0.8609577587992641, 0.15059552388459913, 0,
                  -36.96841498319127, 0.24113635128153335, -0.07441037908422492,
                  0.44972182064877153, 0, -7.562075277591283, 0, 0, 0, 1, 0,
                ],
                t
              );
            }),
            (e.prototype.vintage = function (t) {
              this._loadMatrix(
                [
                  0.6279345635605994, 0.3202183420819367, -0.03965408211312453,
                  0, 9.651285835294123, 0.02578397704808868, 0.6441188644374771,
                  0.03259127616149294, 0, 7.462829176470591, 0.0466055556782719,
                  -0.0851232987247891, 0.5241648018700465, 0, 5.159190588235296,
                  0, 0, 0, 1, 0,
                ],
                t
              );
            }),
            (e.prototype.colorTone = function (t, e, i, r, n) {
              var o = (((i = i || 16770432) >> 16) & 255) / 255,
                s = ((i >> 8) & 255) / 255,
                a = (255 & i) / 255,
                h = (((r = r || 3375104) >> 16) & 255) / 255,
                u = ((r >> 8) & 255) / 255,
                l = (255 & r) / 255,
                c = [
                  0.3,
                  0.59,
                  0.11,
                  0,
                  0,
                  o,
                  s,
                  a,
                  (t = t || 0.2),
                  0,
                  h,
                  u,
                  l,
                  (e = e || 0.15),
                  0,
                  o - h,
                  s - u,
                  a - l,
                  0,
                  0,
                ];
              this._loadMatrix(c, n);
            }),
            (e.prototype.night = function (t, e) {
              var i = [
                -2 * (t = t || 0.1),
                -t,
                0,
                0,
                0,
                -t,
                0,
                t,
                0,
                0,
                0,
                t,
                2 * t,
                0,
                0,
                0,
                0,
                0,
                1,
                0,
              ];
              this._loadMatrix(i, e);
            }),
            (e.prototype.predator = function (t, e) {
              var i = [
                11.224130630493164 * t,
                -4.794486999511719 * t,
                -2.8746118545532227 * t,
                0 * t,
                0.40342438220977783 * t,
                -3.6330697536468506 * t,
                9.193157196044922 * t,
                -2.951810836791992 * t,
                0 * t,
                -1.316135048866272 * t,
                -3.2184197902679443 * t,
                -4.2375030517578125 * t,
                7.476448059082031 * t,
                0 * t,
                0.8044459223747253 * t,
                0,
                0,
                0,
                1,
                0,
              ];
              this._loadMatrix(i, e);
            }),
            (e.prototype.lsd = function (t) {
              this._loadMatrix(
                [
                  2, -0.4, 0.5, 0, 0, -0.5, 2, -0.4, 0, 0, -0.4, -0.5, 3, 0, 0,
                  0, 0, 0, 1, 0,
                ],
                t
              );
            }),
            (e.prototype.reset = function () {
              this._loadMatrix(
                [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0],
                !1
              );
            }),
            Object.defineProperty(e.prototype, "matrix", {
              get: function () {
                return this.uniforms.m;
              },
              set: function (t) {
                this.uniforms.m = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "alpha", {
              get: function () {
                return this.uniforms.uAlpha;
              },
              set: function (t) {
                this.uniforms.uAlpha = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            e
          );
        })(Hi);
      Ns.prototype.grayscale = Ns.prototype.greyscale;
      var Ls = function (t, e) {
        return (
          (Ls =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
            }),
          Ls(t, e)
        );
      };
      !(function (t) {
        function e(e, i) {
          var r = this,
            n = new $t();
          return (
            (e.renderable = !1),
            ((r =
              t.call(
                this,
                "attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n",
                "varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",
                {
                  mapSampler: e._texture,
                  filterMatrix: n,
                  scale: { x: 1, y: 1 },
                  rotation: new Float32Array([1, 0, 0, 1]),
                }
              ) || this).maskSprite = e),
            (r.maskMatrix = n),
            null == i && (i = 20),
            (r.scale = new Vt(i, i)),
            r
          );
        }
        (function (t, e) {
          function i() {
            this.constructor = t;
          }
          Ls(t, e),
            (t.prototype =
              null === e
                ? Object.create(e)
                : ((i.prototype = e.prototype), new i()));
        })(e, t),
          (e.prototype.apply = function (t, e, i, r) {
            (this.uniforms.filterMatrix = t.calculateSpriteMatrix(
              this.maskMatrix,
              this.maskSprite
            )),
              (this.uniforms.scale.x = this.scale.x),
              (this.uniforms.scale.y = this.scale.y);
            var n = this.maskSprite.worldTransform,
              o = Math.sqrt(n.a * n.a + n.b * n.b),
              s = Math.sqrt(n.c * n.c + n.d * n.d);
            0 !== o &&
              0 !== s &&
              ((this.uniforms.rotation[0] = n.a / o),
              (this.uniforms.rotation[1] = n.b / o),
              (this.uniforms.rotation[2] = n.c / s),
              (this.uniforms.rotation[3] = n.d / s)),
              t.applyFilter(this, e, i, r);
          }),
          Object.defineProperty(e.prototype, "map", {
            get: function () {
              return this.uniforms.mapSampler;
            },
            set: function (t) {
              this.uniforms.mapSampler = t;
            },
            enumerable: !1,
            configurable: !0,
          });
      })(Hi);
      var Us,
        Gs = function (t, e) {
          return (
            (Gs =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
              }),
            Gs(t, e)
          );
        };
      (function (t, e) {
        function i() {
          this.constructor = t;
        }
        Gs(t, e),
          (t.prototype =
            null === e
              ? Object.create(e)
              : ((i.prototype = e.prototype), new i()));
      })(function () {
        return (
          Us.call(
            this,
            "\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",
            'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'
          ) || this
        );
      }, (Us = Hi));
      var Vs = function (t, e) {
        return (
          (Vs =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
            }),
          Vs(t, e)
        );
      };
      !(function (t) {
        function e(e, i) {
          void 0 === e && (e = 0.5), void 0 === i && (i = Math.random());
          var r =
            t.call(
              this,
              wr,
              "precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",
              { uNoise: 0, uSeed: 0 }
            ) || this;
          return (r.noise = e), (r.seed = i), r;
        }
        (function (t, e) {
          function i() {
            this.constructor = t;
          }
          Vs(t, e),
            (t.prototype =
              null === e
                ? Object.create(e)
                : ((i.prototype = e.prototype), new i()));
        })(e, t),
          Object.defineProperty(e.prototype, "noise", {
            get: function () {
              return this.uniforms.uNoise;
            },
            set: function (t) {
              this.uniforms.uNoise = t;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(e.prototype, "seed", {
            get: function () {
              return this.uniforms.uSeed;
            },
            set: function (t) {
              this.uniforms.uSeed = t;
            },
            enumerable: !1,
            configurable: !0,
          });
      })(Hi);
      var js = new $t();
      (he.prototype._cacheAsBitmap = !1),
        (he.prototype._cacheData = null),
        (he.prototype._cacheAsBitmapResolution = null),
        (he.prototype._cacheAsBitmapMultisample = k.NONE);
      var zs = function () {
        (this.textureCacheId = null),
          (this.originalRender = null),
          (this.originalRenderCanvas = null),
          (this.originalCalculateBounds = null),
          (this.originalGetLocalBounds = null),
          (this.originalUpdateTransform = null),
          (this.originalDestroy = null),
          (this.originalMask = null),
          (this.originalFilterArea = null),
          (this.originalContainsPoint = null),
          (this.sprite = null);
      };
      Object.defineProperties(he.prototype, {
        cacheAsBitmapResolution: {
          get: function () {
            return this._cacheAsBitmapResolution;
          },
          set: function (t) {
            t !== this._cacheAsBitmapResolution &&
              ((this._cacheAsBitmapResolution = t),
              this.cacheAsBitmap &&
                ((this.cacheAsBitmap = !1), (this.cacheAsBitmap = !0)));
          },
        },
        cacheAsBitmapMultisample: {
          get: function () {
            return this._cacheAsBitmapMultisample;
          },
          set: function (t) {
            t !== this._cacheAsBitmapMultisample &&
              ((this._cacheAsBitmapMultisample = t),
              this.cacheAsBitmap &&
                ((this.cacheAsBitmap = !1), (this.cacheAsBitmap = !0)));
          },
        },
        cacheAsBitmap: {
          get: function () {
            return this._cacheAsBitmap;
          },
          set: function (t) {
            var e;
            this._cacheAsBitmap !== t &&
              ((this._cacheAsBitmap = t),
              t
                ? (this._cacheData || (this._cacheData = new zs()),
                  ((e = this._cacheData).originalRender = this.render),
                  (e.originalRenderCanvas = this.renderCanvas),
                  (e.originalUpdateTransform = this.updateTransform),
                  (e.originalCalculateBounds = this.calculateBounds),
                  (e.originalGetLocalBounds = this.getLocalBounds),
                  (e.originalDestroy = this.destroy),
                  (e.originalContainsPoint = this.containsPoint),
                  (e.originalMask = this._mask),
                  (e.originalFilterArea = this.filterArea),
                  (this.render = this._renderCached),
                  (this.renderCanvas = this._renderCachedCanvas),
                  (this.destroy = this._cacheAsBitmapDestroy))
                : ((e = this._cacheData).sprite &&
                    this._destroyCachedDisplayObject(),
                  (this.render = e.originalRender),
                  (this.renderCanvas = e.originalRenderCanvas),
                  (this.calculateBounds = e.originalCalculateBounds),
                  (this.getLocalBounds = e.originalGetLocalBounds),
                  (this.destroy = e.originalDestroy),
                  (this.updateTransform = e.originalUpdateTransform),
                  (this.containsPoint = e.originalContainsPoint),
                  (this._mask = e.originalMask),
                  (this.filterArea = e.originalFilterArea)));
          },
        },
      }),
        (he.prototype._renderCached = function (t) {
          !this.visible ||
            this.worldAlpha <= 0 ||
            !this.renderable ||
            (this._initCachedDisplayObject(t),
            (this._cacheData.sprite.transform._worldID =
              this.transform._worldID),
            (this._cacheData.sprite.worldAlpha = this.worldAlpha),
            this._cacheData.sprite._render(t));
        }),
        (he.prototype._initCachedDisplayObject = function (t) {
          var e;
          if (!this._cacheData || !this._cacheData.sprite) {
            var i = this.alpha;
            (this.alpha = 1), t.batch.flush();
            var r = this.getLocalBounds(null, !0).clone();
            if (this.filters && this.filters.length) {
              var n = this.filters[0].padding;
              r.pad(n);
            }
            r.ceil(nt.RESOLUTION);
            var o = t.renderTexture.current,
              s = t.renderTexture.sourceFrame.clone(),
              a = t.renderTexture.destinationFrame.clone(),
              h = t.projection.transform,
              u = We.create({
                width: r.width,
                height: r.height,
                resolution: this.cacheAsBitmapResolution || t.resolution,
                multisample:
                  null !== (e = this.cacheAsBitmapMultisample) && void 0 !== e
                    ? e
                    : t.multisample,
              }),
              l = "cacheAsBitmap_" + Mt();
            (this._cacheData.textureCacheId = l),
              Pe.addToCache(u.baseTexture, l),
              Ye.addToCache(u, l);
            var c = this.transform.localTransform
              .copyTo(js)
              .invert()
              .translate(-r.x, -r.y);
            (this.render = this._cacheData.originalRender),
              t.render(this, {
                renderTexture: u,
                clear: !0,
                transform: c,
                skipUpdateTransform: !1,
              }),
              t.framebuffer.blit(),
              (t.projection.transform = h),
              t.renderTexture.bind(o, s, a),
              (this.render = this._renderCached),
              (this.updateTransform = this.displayObjectUpdateTransform),
              (this.calculateBounds = this._calculateCachedBounds),
              (this.getLocalBounds = this._getCachedLocalBounds),
              (this._mask = null),
              (this.filterArea = null),
              (this.alpha = i);
            var d = new Co(u);
            (d.transform.worldTransform = this.transform.worldTransform),
              (d.anchor.x = -r.x / r.width),
              (d.anchor.y = -r.y / r.height),
              (d.alpha = i),
              (d._bounds = this._bounds),
              (this._cacheData.sprite = d),
              (this.transform._parentID = -1),
              this.parent
                ? this.updateTransform()
                : (this.enableTempParent(),
                  this.updateTransform(),
                  this.disableTempParent(null)),
              (this.containsPoint = d.containsPoint.bind(d));
          }
        }),
        (he.prototype._renderCachedCanvas = function (t) {
          !this.visible ||
            this.worldAlpha <= 0 ||
            !this.renderable ||
            (this._initCachedDisplayObjectCanvas(t),
            (this._cacheData.sprite.worldAlpha = this.worldAlpha),
            this._cacheData.sprite._renderCanvas(t));
        }),
        (he.prototype._initCachedDisplayObjectCanvas = function (t) {
          if (!this._cacheData || !this._cacheData.sprite) {
            var e = this.getLocalBounds(null, !0),
              i = this.alpha;
            this.alpha = 1;
            var r = t.context,
              n = t._projTransform;
            e.ceil(nt.RESOLUTION);
            var o = We.create({ width: e.width, height: e.height }),
              s = "cacheAsBitmap_" + Mt();
            (this._cacheData.textureCacheId = s),
              Pe.addToCache(o.baseTexture, s),
              Ye.addToCache(o, s);
            var a = js;
            this.transform.localTransform.copyTo(a),
              a.invert(),
              (a.tx -= e.x),
              (a.ty -= e.y),
              (this.renderCanvas = this._cacheData.originalRenderCanvas),
              t.render(this, {
                renderTexture: o,
                clear: !0,
                transform: a,
                skipUpdateTransform: !1,
              }),
              (t.context = r),
              (t._projTransform = n),
              (this.renderCanvas = this._renderCachedCanvas),
              (this.updateTransform = this.displayObjectUpdateTransform),
              (this.calculateBounds = this._calculateCachedBounds),
              (this.getLocalBounds = this._getCachedLocalBounds),
              (this._mask = null),
              (this.filterArea = null),
              (this.alpha = i);
            var h = new Co(o);
            (h.transform.worldTransform = this.transform.worldTransform),
              (h.anchor.x = -e.x / e.width),
              (h.anchor.y = -e.y / e.height),
              (h.alpha = i),
              (h._bounds = this._bounds),
              (this._cacheData.sprite = h),
              (this.transform._parentID = -1),
              this.parent
                ? this.updateTransform()
                : ((this.parent = t._tempDisplayObjectParent),
                  this.updateTransform(),
                  (this.parent = null)),
              (this.containsPoint = h.containsPoint.bind(h));
          }
        }),
        (he.prototype._calculateCachedBounds = function () {
          this._bounds.clear(),
            (this._cacheData.sprite.transform._worldID =
              this.transform._worldID),
            this._cacheData.sprite._calculateBounds(),
            (this._bounds.updateID = this._boundsID);
        }),
        (he.prototype._getCachedLocalBounds = function () {
          return this._cacheData.sprite.getLocalBounds(null);
        }),
        (he.prototype._destroyCachedDisplayObject = function () {
          this._cacheData.sprite._texture.destroy(!0),
            (this._cacheData.sprite = null),
            Pe.removeFromCache(this._cacheData.textureCacheId),
            Ye.removeFromCache(this._cacheData.textureCacheId),
            (this._cacheData.textureCacheId = null);
        }),
        (he.prototype._cacheAsBitmapDestroy = function (t) {
          (this.cacheAsBitmap = !1), this.destroy(t);
        }),
        (he.prototype.name = null),
        (ce.prototype.getChildByName = function (t, e) {
          for (var i = 0, r = this.children.length; i < r; i++)
            if (this.children[i].name === t) return this.children[i];
          if (e)
            for (i = 0, r = this.children.length; i < r; i++) {
              var n = this.children[i];
              if (n.getChildByName) {
                var o = n.getChildByName(t, !0);
                if (o) return o;
              }
            }
          return null;
        }),
        (he.prototype.getGlobalPosition = function (t, e) {
          return (
            void 0 === t && (t = new Vt()),
            void 0 === e && (e = !1),
            this.parent
              ? this.parent.toGlobal(this.position, t, e)
              : ((t.x = this.position.x), (t.y = this.position.y)),
            t
          );
        });
      var Xs = (function () {
          function t() {}
          return (
            (t.init = function (t) {
              var e = this;
              Object.defineProperty(this, "resizeTo", {
                set: function (t) {
                  globalThis.removeEventListener("resize", this.queueResize),
                    (this._resizeTo = t),
                    t &&
                      (globalThis.addEventListener("resize", this.queueResize),
                      this.resize());
                },
                get: function () {
                  return this._resizeTo;
                },
              }),
                (this.queueResize = function () {
                  e._resizeTo &&
                    (e.cancelResize(),
                    (e._resizeId = requestAnimationFrame(function () {
                      return e.resize();
                    })));
                }),
                (this.cancelResize = function () {
                  e._resizeId &&
                    (cancelAnimationFrame(e._resizeId), (e._resizeId = null));
                }),
                (this.resize = function () {
                  if (e._resizeTo) {
                    var t, i;
                    if ((e.cancelResize(), e._resizeTo === globalThis.window))
                      (t = globalThis.innerWidth), (i = globalThis.innerHeight);
                    else {
                      var r = e._resizeTo;
                      (t = r.clientWidth), (i = r.clientHeight);
                    }
                    e.renderer.resize(t, i);
                  }
                }),
                (this._resizeId = null),
                (this._resizeTo = null),
                (this.resizeTo = t.resizeTo || null);
            }),
            (t.destroy = function () {
              globalThis.removeEventListener("resize", this.queueResize),
                this.cancelResize(),
                (this.cancelResize = null),
                (this.queueResize = null),
                (this.resizeTo = null),
                (this.resize = null);
            }),
            (t.extension = de.Application),
            t
          );
        })(),
        Hs = (function () {
          function t(e) {
            var i = this;
            (this.stage = new ce()),
              (e = Object.assign({ forceCanvas: !1 }, e)),
              (this.renderer = (function (t) {
                return xr.create(t);
              })(e)),
              t._plugins.forEach(function (t) {
                t.init.call(i, e);
              });
          }
          return (
            (t.registerPlugin = function (t) {
              Bt(
                "6.5.0",
                "Application.registerPlugin() is deprecated, use extensions.add()"
              ),
                me.add({ type: de.Application, ref: t });
            }),
            (t.prototype.render = function () {
              this.renderer.render(this.stage);
            }),
            Object.defineProperty(t.prototype, "view", {
              get: function () {
                return this.renderer.view;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "screen", {
              get: function () {
                return this.renderer.screen;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.destroy = function (e, i) {
              var r = this,
                n = t._plugins.slice(0);
              n.reverse(),
                n.forEach(function (t) {
                  t.destroy.call(r);
                }),
                this.stage.destroy(i),
                (this.stage = null),
                this.renderer.destroy(e),
                (this.renderer = null);
            }),
            (t._plugins = []),
            t
          );
        })();
      me.handleByList(de.Application, Hs._plugins), me.add(Xs);
      var Ys = function (t, e) {
        return (
          (Ys =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
            }),
          Ys(t, e)
        );
      };
      function Ws(t, e) {
        function i() {
          this.constructor = t;
        }
        Ys(t, e),
          (t.prototype =
            null === e
              ? Object.create(e)
              : ((i.prototype = e.prototype), new i()));
      }
      var qs = (function (t) {
          function e(e, i, r, n) {
            void 0 === e && (e = 100),
              void 0 === i && (i = 100),
              void 0 === r && (r = 10),
              void 0 === n && (n = 10);
            var o = t.call(this) || this;
            return (
              (o.segWidth = r),
              (o.segHeight = n),
              (o.width = e),
              (o.height = i),
              o.build(),
              o
            );
          }
          return (
            Ws(e, t),
            (e.prototype.build = function () {
              for (
                var t = this.segWidth * this.segHeight,
                  e = [],
                  i = [],
                  r = [],
                  n = this.segWidth - 1,
                  o = this.segHeight - 1,
                  s = this.width / n,
                  a = this.height / o,
                  h = 0;
                h < t;
                h++
              ) {
                var u = h % this.segWidth,
                  l = (h / this.segWidth) | 0;
                e.push(u * s, l * a), i.push(u / n, l / o);
              }
              var c = n * o;
              for (h = 0; h < c; h++) {
                var d = h % n,
                  p = (h / n) | 0,
                  _ = p * this.segWidth + d,
                  f = p * this.segWidth + d + 1,
                  m = (p + 1) * this.segWidth + d,
                  y = (p + 1) * this.segWidth + d + 1;
                r.push(_, f, m, f, y, m);
              }
              (this.buffers[0].data = new Float32Array(e)),
                (this.buffers[1].data = new Float32Array(i)),
                (this.indexBuffer.data = new Uint16Array(r)),
                this.buffers[0].update(),
                this.buffers[1].update(),
                this.indexBuffer.update();
            }),
            e
          );
        })(_s),
        $s = (function (t) {
          function e(e, i, r) {
            void 0 === e && (e = 200), void 0 === r && (r = 0);
            var n =
              t.call(
                this,
                new Float32Array(4 * i.length),
                new Float32Array(4 * i.length),
                new Uint16Array(6 * (i.length - 1))
              ) || this;
            return (
              (n.points = i), (n._width = e), (n.textureScale = r), n.build(), n
            );
          }
          return (
            Ws(e, t),
            Object.defineProperty(e.prototype, "width", {
              get: function () {
                return this._width;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.build = function () {
              var t = this.points;
              if (t) {
                var e = this.getBuffer("aVertexPosition"),
                  i = this.getBuffer("aTextureCoord"),
                  r = this.getIndex();
                if (!(t.length < 1)) {
                  e.data.length / 4 !== t.length &&
                    ((e.data = new Float32Array(4 * t.length)),
                    (i.data = new Float32Array(4 * t.length)),
                    (r.data = new Uint16Array(6 * (t.length - 1))));
                  var n = i.data,
                    o = r.data;
                  (n[0] = 0), (n[1] = 0), (n[2] = 0), (n[3] = 1);
                  for (
                    var s = 0,
                      a = t[0],
                      h = this._width * this.textureScale,
                      u = t.length,
                      l = 0;
                    l < u;
                    l++
                  ) {
                    var c = 4 * l;
                    if (this.textureScale > 0) {
                      var d = a.x - t[l].x,
                        p = a.y - t[l].y,
                        _ = Math.sqrt(d * d + p * p);
                      (a = t[l]), (s += _ / h);
                    } else s = l / (u - 1);
                    (n[c] = s), (n[c + 1] = 0), (n[c + 2] = s), (n[c + 3] = 1);
                  }
                  var f = 0;
                  for (l = 0; l < u - 1; l++)
                    (c = 2 * l),
                      (o[f++] = c),
                      (o[f++] = c + 1),
                      (o[f++] = c + 2),
                      (o[f++] = c + 2),
                      (o[f++] = c + 1),
                      (o[f++] = c + 3);
                  i.update(), r.update(), this.updateVertices();
                }
              }
            }),
            (e.prototype.updateVertices = function () {
              var t = this.points;
              if (!(t.length < 1)) {
                for (
                  var e,
                    i = t[0],
                    r = 0,
                    n = 0,
                    o = this.buffers[0].data,
                    s = t.length,
                    a = 0;
                  a < s;
                  a++
                ) {
                  var h = t[a],
                    u = 4 * a;
                  (n = -((e = a < t.length - 1 ? t[a + 1] : h).x - i.x)),
                    (r = e.y - i.y);
                  var l = Math.sqrt(r * r + n * n),
                    c =
                      this.textureScale > 0
                        ? (this.textureScale * this._width) / 2
                        : this._width / 2;
                  (r /= l),
                    (n /= l),
                    (r *= c),
                    (n *= c),
                    (o[u] = h.x + r),
                    (o[u + 1] = h.y + n),
                    (o[u + 2] = h.x - r),
                    (o[u + 3] = h.y - n),
                    (i = h);
                }
                this.buffers[0].update();
              }
            }),
            (e.prototype.update = function () {
              this.textureScale > 0 ? this.build() : this.updateVertices();
            }),
            e
          );
        })(_s),
        Ks =
          ((function (t) {
            function e(e, i, r) {
              void 0 === r && (r = 0);
              var n = this,
                o = new $s(e.height, i, r),
                s = new ps(e);
              return (
                r > 0 && (e.baseTexture.wrapMode = E.REPEAT),
                ((n = t.call(this, o, s) || this).autoUpdate = !0),
                n
              );
            }
            Ws(e, t),
              (e.prototype._render = function (e) {
                var i = this.geometry;
                (this.autoUpdate || i._width !== this.shader.texture.height) &&
                  ((i._width = this.shader.texture.height), i.update()),
                  t.prototype._render.call(this, e);
              });
          })(ds),
          (function (t) {
            function e(e, i, r) {
              var n = this,
                o = new qs(e.width, e.height, i, r),
                s = new ps(Ye.WHITE);
              return (
                ((n = t.call(this, o, s) || this).texture = e),
                (n.autoResize = !0),
                n
              );
            }
            return (
              Ws(e, t),
              (e.prototype.textureUpdated = function () {
                this._textureID = this.shader.texture._updateID;
                var t = this.geometry,
                  e = this.shader.texture,
                  i = e.width,
                  r = e.height;
                !this.autoResize ||
                  (t.width === i && t.height === r) ||
                  ((t.width = this.shader.texture.width),
                  (t.height = this.shader.texture.height),
                  t.build());
              }),
              Object.defineProperty(e.prototype, "texture", {
                get: function () {
                  return this.shader.texture;
                },
                set: function (t) {
                  this.shader.texture !== t &&
                    ((this.shader.texture = t),
                    (this._textureID = -1),
                    t.baseTexture.valid
                      ? this.textureUpdated()
                      : t.once("update", this.textureUpdated, this));
                },
                enumerable: !1,
                configurable: !0,
              }),
              (e.prototype._render = function (e) {
                this._textureID !== this.shader.texture._updateID &&
                  this.textureUpdated(),
                  t.prototype._render.call(this, e);
              }),
              (e.prototype.destroy = function (e) {
                this.shader.texture.off("update", this.textureUpdated, this),
                  t.prototype.destroy.call(this, e);
              }),
              e
            );
          })(ds)),
        Js =
          ((function (t) {
            function e(e, i, r, n, o) {
              void 0 === e && (e = Ye.EMPTY);
              var s = this,
                a = new _s(i, r, n);
              a.getBuffer("aVertexPosition").static = !1;
              var h = new ps(e);
              return (
                ((s = t.call(this, a, h, null, o) || this).autoUpdate = !0), s
              );
            }
            Ws(e, t),
              Object.defineProperty(e.prototype, "vertices", {
                get: function () {
                  return this.geometry.getBuffer("aVertexPosition").data;
                },
                set: function (t) {
                  this.geometry.getBuffer("aVertexPosition").data = t;
                },
                enumerable: !1,
                configurable: !0,
              }),
              (e.prototype._render = function (e) {
                this.autoUpdate &&
                  this.geometry.getBuffer("aVertexPosition").update(),
                  t.prototype._render.call(this, e);
              });
          })(ds),
          (function (t) {
            function e(e, i, r, n, o) {
              void 0 === i && (i = 10),
                void 0 === r && (r = 10),
                void 0 === n && (n = 10),
                void 0 === o && (o = 10);
              var s = t.call(this, Ye.WHITE, 4, 4) || this;
              return (
                (s._origWidth = e.orig.width),
                (s._origHeight = e.orig.height),
                (s._width = s._origWidth),
                (s._height = s._origHeight),
                (s._leftWidth = i),
                (s._rightWidth = n),
                (s._topHeight = r),
                (s._bottomHeight = o),
                (s.texture = e),
                s
              );
            }
            Ws(e, t),
              (e.prototype.textureUpdated = function () {
                (this._textureID = this.shader.texture._updateID),
                  this._refresh();
              }),
              Object.defineProperty(e.prototype, "vertices", {
                get: function () {
                  return this.geometry.getBuffer("aVertexPosition").data;
                },
                set: function (t) {
                  this.geometry.getBuffer("aVertexPosition").data = t;
                },
                enumerable: !1,
                configurable: !0,
              }),
              (e.prototype.updateHorizontalVertices = function () {
                var t = this.vertices,
                  e = this._getMinScale();
                (t[9] = t[11] = t[13] = t[15] = this._topHeight * e),
                  (t[17] =
                    t[19] =
                    t[21] =
                    t[23] =
                      this._height - this._bottomHeight * e),
                  (t[25] = t[27] = t[29] = t[31] = this._height);
              }),
              (e.prototype.updateVerticalVertices = function () {
                var t = this.vertices,
                  e = this._getMinScale();
                (t[2] = t[10] = t[18] = t[26] = this._leftWidth * e),
                  (t[4] =
                    t[12] =
                    t[20] =
                    t[28] =
                      this._width - this._rightWidth * e),
                  (t[6] = t[14] = t[22] = t[30] = this._width);
              }),
              (e.prototype._getMinScale = function () {
                var t = this._leftWidth + this._rightWidth,
                  e = this._width > t ? 1 : this._width / t,
                  i = this._topHeight + this._bottomHeight,
                  r = this._height > i ? 1 : this._height / i;
                return Math.min(e, r);
              }),
              Object.defineProperty(e.prototype, "width", {
                get: function () {
                  return this._width;
                },
                set: function (t) {
                  (this._width = t), this._refresh();
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "height", {
                get: function () {
                  return this._height;
                },
                set: function (t) {
                  (this._height = t), this._refresh();
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "leftWidth", {
                get: function () {
                  return this._leftWidth;
                },
                set: function (t) {
                  (this._leftWidth = t), this._refresh();
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "rightWidth", {
                get: function () {
                  return this._rightWidth;
                },
                set: function (t) {
                  (this._rightWidth = t), this._refresh();
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "topHeight", {
                get: function () {
                  return this._topHeight;
                },
                set: function (t) {
                  (this._topHeight = t), this._refresh();
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "bottomHeight", {
                get: function () {
                  return this._bottomHeight;
                },
                set: function (t) {
                  (this._bottomHeight = t), this._refresh();
                },
                enumerable: !1,
                configurable: !0,
              }),
              (e.prototype._refresh = function () {
                var t = this.texture,
                  e = this.geometry.buffers[1].data;
                (this._origWidth = t.orig.width),
                  (this._origHeight = t.orig.height);
                var i = 1 / this._origWidth,
                  r = 1 / this._origHeight;
                (e[0] = e[8] = e[16] = e[24] = 0),
                  (e[1] = e[3] = e[5] = e[7] = 0),
                  (e[6] = e[14] = e[22] = e[30] = 1),
                  (e[25] = e[27] = e[29] = e[31] = 1),
                  (e[2] = e[10] = e[18] = e[26] = i * this._leftWidth),
                  (e[4] = e[12] = e[20] = e[28] = 1 - i * this._rightWidth),
                  (e[9] = e[11] = e[13] = e[15] = r * this._topHeight),
                  (e[17] = e[19] = e[21] = e[23] = 1 - r * this._bottomHeight),
                  this.updateHorizontalVertices(),
                  this.updateVerticalVertices(),
                  this.geometry.buffers[0].update(),
                  this.geometry.buffers[1].update();
              });
          })(Ks),
          function (t, e) {
            return (
              (Js =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]);
                }),
              Js(t, e)
            );
          }),
        Zs = (function (t) {
          function e(e, i) {
            void 0 === i && (i = !0);
            var r =
              t.call(this, e[0] instanceof Ye ? e[0] : e[0].texture) || this;
            return (
              (r._textures = null),
              (r._durations = null),
              (r._autoUpdate = i),
              (r._isConnectedToTicker = !1),
              (r.animationSpeed = 1),
              (r.loop = !0),
              (r.updateAnchor = !1),
              (r.onComplete = null),
              (r.onFrameChange = null),
              (r.onLoop = null),
              (r._currentTime = 0),
              (r._playing = !1),
              (r._previousFrame = null),
              (r.textures = e),
              r
            );
          }
          return (
            (function (t, e) {
              function i() {
                this.constructor = t;
              }
              Js(t, e),
                (t.prototype =
                  null === e
                    ? Object.create(e)
                    : ((i.prototype = e.prototype), new i()));
            })(e, t),
            (e.prototype.stop = function () {
              this._playing &&
                ((this._playing = !1),
                this._autoUpdate &&
                  this._isConnectedToTicker &&
                  (ve.shared.remove(this.update, this),
                  (this._isConnectedToTicker = !1)));
            }),
            (e.prototype.play = function () {
              this._playing ||
                ((this._playing = !0),
                this._autoUpdate &&
                  !this._isConnectedToTicker &&
                  (ve.shared.add(this.update, this, _e.HIGH),
                  (this._isConnectedToTicker = !0)));
            }),
            (e.prototype.gotoAndStop = function (t) {
              this.stop();
              var e = this.currentFrame;
              (this._currentTime = t),
                e !== this.currentFrame && this.updateTexture();
            }),
            (e.prototype.gotoAndPlay = function (t) {
              var e = this.currentFrame;
              (this._currentTime = t),
                e !== this.currentFrame && this.updateTexture(),
                this.play();
            }),
            (e.prototype.update = function (t) {
              if (this._playing) {
                var e = this.animationSpeed * t,
                  i = this.currentFrame;
                if (null !== this._durations) {
                  var r =
                    (this._currentTime % 1) *
                    this._durations[this.currentFrame];
                  for (r += (e / 60) * 1e3; r < 0; )
                    this._currentTime--,
                      (r += this._durations[this.currentFrame]);
                  var n = Math.sign(this.animationSpeed * t);
                  for (
                    this._currentTime = Math.floor(this._currentTime);
                    r >= this._durations[this.currentFrame];

                  )
                    (r -= this._durations[this.currentFrame] * n),
                      (this._currentTime += n);
                  this._currentTime += r / this._durations[this.currentFrame];
                } else this._currentTime += e;
                this._currentTime < 0 && !this.loop
                  ? (this.gotoAndStop(0), this.onComplete && this.onComplete())
                  : this._currentTime >= this._textures.length && !this.loop
                  ? (this.gotoAndStop(this._textures.length - 1),
                    this.onComplete && this.onComplete())
                  : i !== this.currentFrame &&
                    (this.loop &&
                      this.onLoop &&
                      ((this.animationSpeed > 0 && this.currentFrame < i) ||
                        (this.animationSpeed < 0 && this.currentFrame > i)) &&
                      this.onLoop(),
                    this.updateTexture());
              }
            }),
            (e.prototype.updateTexture = function () {
              var t = this.currentFrame;
              this._previousFrame !== t &&
                ((this._previousFrame = t),
                (this._texture = this._textures[t]),
                (this._textureID = -1),
                (this._textureTrimmedID = -1),
                (this._cachedTint = 16777215),
                (this.uvs = this._texture._uvs.uvsFloat32),
                this.updateAnchor &&
                  this._anchor.copyFrom(this._texture.defaultAnchor),
                this.onFrameChange && this.onFrameChange(this.currentFrame));
            }),
            (e.prototype.destroy = function (e) {
              this.stop(),
                t.prototype.destroy.call(this, e),
                (this.onComplete = null),
                (this.onFrameChange = null),
                (this.onLoop = null);
            }),
            (e.fromFrames = function (t) {
              for (var i = [], r = 0; r < t.length; ++r) i.push(Ye.from(t[r]));
              return new e(i);
            }),
            (e.fromImages = function (t) {
              for (var i = [], r = 0; r < t.length; ++r) i.push(Ye.from(t[r]));
              return new e(i);
            }),
            Object.defineProperty(e.prototype, "totalFrames", {
              get: function () {
                return this._textures.length;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "textures", {
              get: function () {
                return this._textures;
              },
              set: function (t) {
                if (t[0] instanceof Ye)
                  (this._textures = t), (this._durations = null);
                else {
                  (this._textures = []), (this._durations = []);
                  for (var e = 0; e < t.length; e++)
                    this._textures.push(t[e].texture),
                      this._durations.push(t[e].time);
                }
                (this._previousFrame = null),
                  this.gotoAndStop(0),
                  this.updateTexture();
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "currentFrame", {
              get: function () {
                var t = Math.floor(this._currentTime) % this._textures.length;
                return t < 0 && (t += this._textures.length), t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "playing", {
              get: function () {
                return this._playing;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "autoUpdate", {
              get: function () {
                return this._autoUpdate;
              },
              set: function (t) {
                t !== this._autoUpdate &&
                  ((this._autoUpdate = t),
                  !this._autoUpdate && this._isConnectedToTicker
                    ? (ve.shared.remove(this.update, this),
                      (this._isConnectedToTicker = !1))
                    : this._autoUpdate &&
                      !this._isConnectedToTicker &&
                      this._playing &&
                      (ve.shared.add(this.update, this),
                      (this._isConnectedToTicker = !0)));
              },
              enumerable: !1,
              configurable: !0,
            }),
            e
          );
        })(Co);
      function Qs(t) {
        if (void 0 === t)
          throw new ReferenceError(
            "this hasn't been initialised - super() hasn't been called"
          );
        return t;
      }
      function ta(t, e) {
        (t.prototype = Object.create(e.prototype)),
          (t.prototype.constructor = t),
          (t.__proto__ = e);
      }
      me.add(Ur, $r, Wr, Wn, Zo, Rr, ss, Ps, En, Gn, Vn, ts, be, pn);
      var ea,
        ia,
        ra,
        na,
        oa,
        sa,
        aa,
        ha,
        ua,
        la,
        ca,
        da = {
          autoSleep: 120,
          force3D: "auto",
          nullTargetWarn: 1,
          units: { lineHeight: "" },
        },
        pa = { duration: 0.5, overwrite: !1, delay: 0 },
        _a = 1e8,
        fa = 1e-8,
        ma = 2 * Math.PI,
        ya = ma / 4,
        ga = 0,
        va = Math.sqrt,
        ba = Math.cos,
        xa = Math.sin,
        wa = function (t) {
          return "string" == typeof t;
        },
        Ta = function (t) {
          return "function" == typeof t;
        },
        Aa = function (t) {
          return "number" == typeof t;
        },
        Sa = function (t) {
          return void 0 === t;
        },
        Ea = function (t) {
          return "object" == typeof t;
        },
        Ca = function (t) {
          return !1 !== t;
        },
        Ma = function () {
          return "undefined" != typeof window;
        },
        Pa = function (t) {
          return Ta(t) || wa(t);
        },
        Ba =
          ("function" == typeof ArrayBuffer && ArrayBuffer.isView) ||
          function () {},
        Oa = Array.isArray,
        Ra = /(?:-?\.?\d|\.)+/gi,
        Ia = /[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,
        ka = /[-+=.]*\d+[.e-]*\d*[a-z%]*/g,
        Fa = /[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,
        Da = /[+-]=-?[.\d]+/,
        Na = /[^,'"\[\]\s]+/gi,
        La = /^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,
        Ua = {},
        Ga = {},
        Va = function (t) {
          return (Ga = mh(t, Ua)) && ml;
        },
        ja = function (t, e) {
          return console.warn(
            "Invalid property",
            t,
            "set to",
            e,
            "Missing plugin? gsap.registerPlugin()"
          );
        },
        za = function (t, e) {
          return !e && console.warn(t);
        },
        Xa = function (t, e) {
          return (t && (Ua[t] = e) && Ga && (Ga[t] = e)) || Ua;
        },
        Ha = function () {
          return 0;
        },
        Ya = { suppressEvents: !0, isStart: !0, kill: !1 },
        Wa = { suppressEvents: !0, kill: !1 },
        qa = { suppressEvents: !0 },
        $a = {},
        Ka = [],
        Ja = {},
        Za = {},
        Qa = {},
        th = 30,
        eh = [],
        ih = "",
        rh = function (t) {
          var e,
            i,
            r = t[0];
          if ((Ea(r) || Ta(r) || (t = [t]), !(e = (r._gsap || {}).harness))) {
            for (i = eh.length; i-- && !eh[i].targetTest(r); );
            e = eh[i];
          }
          for (i = t.length; i--; )
            (t[i] && (t[i]._gsap || (t[i]._gsap = new Bu(t[i], e)))) ||
              t.splice(i, 1);
          return t;
        },
        nh = function (t) {
          return t._gsap || rh(Wh(t))[0]._gsap;
        },
        oh = function (t, e, i) {
          return (i = t[e]) && Ta(i)
            ? t[e]()
            : (Sa(i) && t.getAttribute && t.getAttribute(e)) || i;
        },
        sh = function (t, e) {
          return (t = t.split(",")).forEach(e) || t;
        },
        ah = function (t) {
          return Math.round(1e5 * t) / 1e5 || 0;
        },
        hh = function (t) {
          return Math.round(1e7 * t) / 1e7 || 0;
        },
        uh = function (t, e) {
          var i = e.charAt(0),
            r = parseFloat(e.substr(2));
          return (
            (t = parseFloat(t)),
            "+" === i ? t + r : "-" === i ? t - r : "*" === i ? t * r : t / r
          );
        },
        lh = function (t, e) {
          for (var i = e.length, r = 0; t.indexOf(e[r]) < 0 && ++r < i; );
          return r < i;
        },
        ch = function () {
          var t,
            e,
            i = Ka.length,
            r = Ka.slice(0);
          for (Ja = {}, Ka.length = 0, t = 0; t < i; t++)
            (e = r[t]) &&
              e._lazy &&
              (e.render(e._lazy[0], e._lazy[1], !0)._lazy = 0);
        },
        dh = function (t, e, i, r) {
          Ka.length && !ia && ch(),
            t.render(e, i, r || (ia && e < 0 && (t._initted || t._startAt))),
            Ka.length && !ia && ch();
        },
        ph = function (t) {
          var e = parseFloat(t);
          return (e || 0 === e) && (t + "").match(Na).length < 2
            ? e
            : wa(t)
            ? t.trim()
            : t;
        },
        _h = function (t) {
          return t;
        },
        fh = function (t, e) {
          for (var i in e) i in t || (t[i] = e[i]);
          return t;
        },
        mh = function (t, e) {
          for (var i in e) t[i] = e[i];
          return t;
        },
        yh = function t(e, i) {
          for (var r in i)
            "__proto__" !== r &&
              "constructor" !== r &&
              "prototype" !== r &&
              (e[r] = Ea(i[r]) ? t(e[r] || (e[r] = {}), i[r]) : i[r]);
          return e;
        },
        gh = function (t, e) {
          var i,
            r = {};
          for (i in t) i in e || (r[i] = t[i]);
          return r;
        },
        vh = function (t) {
          var e,
            i = t.parent || na,
            r = t.keyframes
              ? ((e = Oa(t.keyframes)),
                function (t, i) {
                  for (var r in i)
                    r in t ||
                      ("duration" === r && e) ||
                      "ease" === r ||
                      (t[r] = i[r]);
                })
              : fh;
          if (Ca(t.inherit))
            for (; i; ) r(t, i.vars.defaults), (i = i.parent || i._dp);
          return t;
        },
        bh = function (t, e, i, r, n) {
          void 0 === i && (i = "_first"), void 0 === r && (r = "_last");
          var o,
            s = t[r];
          if (n) for (o = e[n]; s && s[n] > o; ) s = s._prev;
          return (
            s
              ? ((e._next = s._next), (s._next = e))
              : ((e._next = t[i]), (t[i] = e)),
            e._next ? (e._next._prev = e) : (t[r] = e),
            (e._prev = s),
            (e.parent = e._dp = t),
            e
          );
        },
        xh = function (t, e, i, r) {
          void 0 === i && (i = "_first"), void 0 === r && (r = "_last");
          var n = e._prev,
            o = e._next;
          n ? (n._next = o) : t[i] === e && (t[i] = o),
            o ? (o._prev = n) : t[r] === e && (t[r] = n),
            (e._next = e._prev = e.parent = null);
        },
        wh = function (t, e) {
          t.parent &&
            (!e || t.parent.autoRemoveChildren) &&
            t.parent.remove &&
            t.parent.remove(t),
            (t._act = 0);
        },
        Th = function (t, e) {
          if (t && (!e || e._end > t._dur || e._start < 0))
            for (var i = t; i; ) (i._dirty = 1), (i = i.parent);
          return t;
        },
        Ah = function (t, e, i, r) {
          return (
            t._startAt &&
            (ia
              ? t._startAt.revert(Wa)
              : (t.vars.immediateRender && !t.vars.autoRevert) ||
                t._startAt.render(e, !0, r))
          );
        },
        Sh = function t(e) {
          return !e || (e._ts && t(e.parent));
        },
        Eh = function (t) {
          return t._repeat
            ? Ch(t._tTime, (t = t.duration() + t._rDelay)) * t
            : 0;
        },
        Ch = function (t, e) {
          var i = Math.floor((t /= e));
          return t && i === t ? i - 1 : i;
        },
        Mh = function (t, e) {
          return (
            (t - e._start) * e._ts +
            (e._ts >= 0 ? 0 : e._dirty ? e.totalDuration() : e._tDur)
          );
        },
        Ph = function (t) {
          return (t._end = hh(
            t._start + (t._tDur / Math.abs(t._ts || t._rts || fa) || 0)
          ));
        },
        Bh = function (t, e) {
          var i = t._dp;
          return (
            i &&
              i.smoothChildTiming &&
              t._ts &&
              ((t._start = hh(
                i._time -
                  (t._ts > 0
                    ? e / t._ts
                    : ((t._dirty ? t.totalDuration() : t._tDur) - e) / -t._ts)
              )),
              Ph(t),
              i._dirty || Th(i, t)),
            t
          );
        },
        Oh = function (t, e) {
          var i;
          if (
            ((e._time ||
              (!e._dur && e._initted) ||
              (e._start < t._time && (e._dur || !e.add))) &&
              ((i = Mh(t.rawTime(), e)),
              (!e._dur || zh(0, e.totalDuration(), i) - e._tTime > fa) &&
                e.render(i, !0)),
            Th(t, e)._dp && t._initted && t._time >= t._dur && t._ts)
          ) {
            if (t._dur < t.duration())
              for (i = t; i._dp; )
                i.rawTime() >= 0 && i.totalTime(i._tTime), (i = i._dp);
            t._zTime = -1e-8;
          }
        },
        Rh = function (t, e, i, r) {
          return (
            e.parent && wh(e),
            (e._start = hh(
              (Aa(i) ? i : i || t !== na ? Gh(t, i, e) : t._time) + e._delay
            )),
            (e._end = hh(
              e._start + (e.totalDuration() / Math.abs(e.timeScale()) || 0)
            )),
            bh(t, e, "_first", "_last", t._sort ? "_start" : 0),
            Dh(e) || (t._recent = e),
            r || Oh(t, e),
            t._ts < 0 && Bh(t, t._tTime),
            t
          );
        },
        Ih = function (t, e) {
          return (
            (Ua.ScrollTrigger || ja("scrollTrigger", e)) &&
            Ua.ScrollTrigger.create(e, t)
          );
        },
        kh = function (t, e, i, r, n) {
          return (
            Lu(t, e, n),
            t._initted
              ? !i &&
                t._pt &&
                !ia &&
                ((t._dur && !1 !== t.vars.lazy) || (!t._dur && t.vars.lazy)) &&
                ua !== yu.frame
                ? (Ka.push(t), (t._lazy = [n, r]), 1)
                : void 0
              : 1
          );
        },
        Fh = function t(e) {
          var i = e.parent;
          return (
            i && i._ts && i._initted && !i._lock && (i.rawTime() < 0 || t(i))
          );
        },
        Dh = function (t) {
          var e = t.data;
          return "isFromStart" === e || "isStart" === e;
        },
        Nh = function (t, e, i, r) {
          var n = t._repeat,
            o = hh(e) || 0,
            s = t._tTime / t._tDur;
          return (
            s && !r && (t._time *= o / t._dur),
            (t._dur = o),
            (t._tDur = n
              ? n < 0
                ? 1e10
                : hh(o * (n + 1) + t._rDelay * n)
              : o),
            s > 0 && !r && Bh(t, (t._tTime = t._tDur * s)),
            t.parent && Ph(t),
            i || Th(t.parent, t),
            t
          );
        },
        Lh = function (t) {
          return t instanceof Ru ? Th(t) : Nh(t, t._dur);
        },
        Uh = { _start: 0, endTime: Ha, totalDuration: Ha },
        Gh = function t(e, i, r) {
          var n,
            o,
            s,
            a = e.labels,
            h = e._recent || Uh,
            u = e.duration() >= _a ? h.endTime(!1) : e._dur;
          return wa(i) && (isNaN(i) || i in a)
            ? ((o = i.charAt(0)),
              (s = "%" === i.substr(-1)),
              (n = i.indexOf("=")),
              "<" === o || ">" === o
                ? (n >= 0 && (i = i.replace(/=/, "")),
                  ("<" === o ? h._start : h.endTime(h._repeat >= 0)) +
                    (parseFloat(i.substr(1)) || 0) *
                      (s ? (n < 0 ? h : r).totalDuration() / 100 : 1))
                : n < 0
                ? (i in a || (a[i] = u), a[i])
                : ((o = parseFloat(i.charAt(n - 1) + i.substr(n + 1))),
                  s &&
                    r &&
                    (o = (o / 100) * (Oa(r) ? r[0] : r).totalDuration()),
                  n > 1 ? t(e, i.substr(0, n - 1), r) + o : u + o))
            : null == i
            ? u
            : +i;
        },
        Vh = function (t, e, i) {
          var r,
            n,
            o = Aa(e[1]),
            s = (o ? 2 : 1) + (t < 2 ? 0 : 1),
            a = e[s];
          if ((o && (a.duration = e[1]), (a.parent = i), t)) {
            for (r = a, n = i; n && !("immediateRender" in r); )
              (r = n.vars.defaults || {}), (n = Ca(n.vars.inherit) && n.parent);
            (a.immediateRender = Ca(r.immediateRender)),
              t < 2 ? (a.runBackwards = 1) : (a.startAt = e[s - 1]);
          }
          return new zu(e[0], a, e[s + 1]);
        },
        jh = function (t, e) {
          return t || 0 === t ? e(t) : e;
        },
        zh = function (t, e, i) {
          return i < t ? t : i > e ? e : i;
        },
        Xh = function (t, e) {
          return wa(t) && (e = La.exec(t)) ? e[1] : "";
        },
        Hh = [].slice,
        Yh = function (t, e) {
          return (
            t &&
            Ea(t) &&
            "length" in t &&
            ((!e && !t.length) || (t.length - 1 in t && Ea(t[0]))) &&
            !t.nodeType &&
            t !== oa
          );
        },
        Wh = function (t, e, i) {
          return ra && !e && ra.selector
            ? ra.selector(t)
            : !wa(t) || i || (!sa && gu())
            ? Oa(t)
              ? (function (t, e, i) {
                  return (
                    void 0 === i && (i = []),
                    t.forEach(function (t) {
                      var r;
                      return (wa(t) && !e) || Yh(t, 1)
                        ? (r = i).push.apply(r, Wh(t))
                        : i.push(t);
                    }) || i
                  );
                })(t, i)
              : Yh(t)
              ? Hh.call(t, 0)
              : t
              ? [t]
              : []
            : Hh.call((e || aa).querySelectorAll(t), 0);
        },
        qh = function (t) {
          return (
            (t = Wh(t)[0] || za("Invalid scope") || {}),
            function (e) {
              var i = t.current || t.nativeElement || t;
              return Wh(
                e,
                i.querySelectorAll
                  ? i
                  : i === t
                  ? za("Invalid scope") || aa.createElement("div")
                  : t
              );
            }
          );
        },
        $h = function (t) {
          return t.sort(function () {
            return 0.5 - Math.random();
          });
        },
        Kh = function (t) {
          if (Ta(t)) return t;
          var e = Ea(t) ? t : { each: t },
            i = Su(e.ease),
            r = e.from || 0,
            n = parseFloat(e.base) || 0,
            o = {},
            s = r > 0 && r < 1,
            a = isNaN(r) || s,
            h = e.axis,
            u = r,
            l = r;
          return (
            wa(r)
              ? (u = l = { center: 0.5, edges: 0.5, end: 1 }[r] || 0)
              : !s && a && ((u = r[0]), (l = r[1])),
            function (t, s, c) {
              var d,
                p,
                _,
                f,
                m,
                y,
                g,
                v,
                b,
                x = (c || e).length,
                w = o[x];
              if (!w) {
                if (!(b = "auto" === e.grid ? 0 : (e.grid || [1, _a])[1])) {
                  for (
                    g = -_a;
                    g < (g = c[b++].getBoundingClientRect().left) && b < x;

                  );
                  b < x && b--;
                }
                for (
                  w = o[x] = [],
                    d = a ? Math.min(b, x) * u - 0.5 : r % b,
                    p = b === _a ? 0 : a ? (x * l) / b - 0.5 : (r / b) | 0,
                    g = 0,
                    v = _a,
                    y = 0;
                  y < x;
                  y++
                )
                  (_ = (y % b) - d),
                    (f = p - ((y / b) | 0)),
                    (w[y] = m =
                      h ? Math.abs("y" === h ? f : _) : va(_ * _ + f * f)),
                    m > g && (g = m),
                    m < v && (v = m);
                "random" === r && $h(w),
                  (w.max = g - v),
                  (w.min = v),
                  (w.v = x =
                    (parseFloat(e.amount) ||
                      parseFloat(e.each) *
                        (b > x
                          ? x - 1
                          : h
                          ? "y" === h
                            ? x / b
                            : b
                          : Math.max(b, x / b)) ||
                      0) * ("edges" === r ? -1 : 1)),
                  (w.b = x < 0 ? n - x : n),
                  (w.u = Xh(e.amount || e.each) || 0),
                  (i = i && x < 0 ? Tu(i) : i);
              }
              return (
                (x = (w[t] - w.min) / w.max || 0),
                hh(w.b + (i ? i(x) : x) * w.v) + w.u
              );
            }
          );
        },
        Jh = function (t) {
          var e = Math.pow(10, ((t + "").split(".")[1] || "").length);
          return function (i) {
            var r = hh(Math.round(parseFloat(i) / t) * t * e);
            return (r - (r % 1)) / e + (Aa(i) ? 0 : Xh(i));
          };
        },
        Zh = function (t, e) {
          var i,
            r,
            n = Oa(t);
          return (
            !n &&
              Ea(t) &&
              ((i = n = t.radius || _a),
              t.values
                ? ((t = Wh(t.values)), (r = !Aa(t[0])) && (i *= i))
                : (t = Jh(t.increment))),
            jh(
              e,
              n
                ? Ta(t)
                  ? function (e) {
                      return (r = t(e)), Math.abs(r - e) <= i ? r : e;
                    }
                  : function (e) {
                      for (
                        var n,
                          o,
                          s = parseFloat(r ? e.x : e),
                          a = parseFloat(r ? e.y : 0),
                          h = _a,
                          u = 0,
                          l = t.length;
                        l--;

                      )
                        (n = r
                          ? (n = t[l].x - s) * n + (o = t[l].y - a) * o
                          : Math.abs(t[l] - s)) < h && ((h = n), (u = l));
                      return (
                        (u = !i || h <= i ? t[u] : e),
                        r || u === e || Aa(e) ? u : u + Xh(e)
                      );
                    }
                : Jh(t)
            )
          );
        },
        Qh = function (t, e, i, r) {
          return jh(Oa(t) ? !e : !0 === i ? !!(i = 0) : !r, function () {
            return Oa(t)
              ? t[~~(Math.random() * t.length)]
              : (i = i || 1e-5) &&
                  (r = i < 1 ? Math.pow(10, (i + "").length - 2) : 1) &&
                  Math.floor(
                    Math.round(
                      (t - i / 2 + Math.random() * (e - t + 0.99 * i)) / i
                    ) *
                      i *
                      r
                  ) / r;
          });
        },
        tu = function (t, e, i) {
          return jh(i, function (i) {
            return t[~~e(i)];
          });
        },
        eu = function (t) {
          for (var e, i, r, n, o = 0, s = ""; ~(e = t.indexOf("random(", o)); )
            (r = t.indexOf(")", e)),
              (n = "[" === t.charAt(e + 7)),
              (i = t.substr(e + 7, r - e - 7).match(n ? Na : Ra)),
              (s +=
                t.substr(o, e - o) +
                Qh(n ? i : +i[0], n ? 0 : +i[1], +i[2] || 1e-5)),
              (o = r + 1);
          return s + t.substr(o, t.length - o);
        },
        iu = function (t, e, i, r, n) {
          var o = e - t,
            s = r - i;
          return jh(n, function (e) {
            return i + (((e - t) / o) * s || 0);
          });
        },
        ru = function (t, e, i) {
          var r,
            n,
            o,
            s = t.labels,
            a = _a;
          for (r in s)
            (n = s[r] - e) < 0 == !!i &&
              n &&
              a > (n = Math.abs(n)) &&
              ((o = r), (a = n));
          return o;
        },
        nu = function (t, e, i) {
          var r,
            n,
            o,
            s = t.vars,
            a = s[e],
            h = ra,
            u = t._ctx;
          if (a)
            return (
              (r = s[e + "Params"]),
              (n = s.callbackScope || t),
              i && Ka.length && ch(),
              u && (ra = u),
              (o = r ? a.apply(n, r) : a.call(n)),
              (ra = h),
              o
            );
        },
        ou = function (t) {
          return (
            wh(t),
            t.scrollTrigger && t.scrollTrigger.kill(!!ia),
            t.progress() < 1 && nu(t, "onInterrupt"),
            t
          );
        },
        su = [],
        au = function (t) {
          if (t)
            if (((t = (!t.name && t.default) || t), Ma() || t.headless)) {
              var e = t.name,
                i = Ta(t),
                r =
                  e && !i && t.init
                    ? function () {
                        this._props = [];
                      }
                    : t,
                n = {
                  init: Ha,
                  render: Zu,
                  add: Du,
                  kill: tl,
                  modifier: Qu,
                  rawVars: 0,
                },
                o = {
                  targetTest: 0,
                  get: 0,
                  getSetter: qu,
                  aliases: {},
                  register: 0,
                };
              if ((gu(), t !== r)) {
                if (Za[e]) return;
                fh(r, fh(gh(t, n), o)),
                  mh(r.prototype, mh(n, gh(t, o))),
                  (Za[(r.prop = e)] = r),
                  t.targetTest && (eh.push(r), ($a[e] = 1)),
                  (e =
                    ("css" === e
                      ? "CSS"
                      : e.charAt(0).toUpperCase() + e.substr(1)) + "Plugin");
              }
              Xa(e, r), t.register && t.register(ml, r, rl);
            } else su.push(t);
        },
        hu = 255,
        uu = {
          aqua: [0, hu, hu],
          lime: [0, hu, 0],
          silver: [192, 192, 192],
          black: [0, 0, 0],
          maroon: [128, 0, 0],
          teal: [0, 128, 128],
          blue: [0, 0, hu],
          navy: [0, 0, 128],
          white: [hu, hu, hu],
          olive: [128, 128, 0],
          yellow: [hu, hu, 0],
          orange: [hu, 165, 0],
          gray: [128, 128, 128],
          purple: [128, 0, 128],
          green: [0, 128, 0],
          red: [hu, 0, 0],
          pink: [hu, 192, 203],
          cyan: [0, hu, hu],
          transparent: [hu, hu, hu, 0],
        },
        lu = function (t, e, i) {
          return (
            ((6 * (t += t < 0 ? 1 : t > 1 ? -1 : 0) < 1
              ? e + (i - e) * t * 6
              : t < 0.5
              ? i
              : 3 * t < 2
              ? e + (i - e) * (2 / 3 - t) * 6
              : e) *
              hu +
              0.5) |
            0
          );
        },
        cu = function (t, e, i) {
          var r,
            n,
            o,
            s,
            a,
            h,
            u,
            l,
            c,
            d,
            p = t ? (Aa(t) ? [t >> 16, (t >> 8) & hu, t & hu] : 0) : uu.black;
          if (!p) {
            if (
              ("," === t.substr(-1) && (t = t.substr(0, t.length - 1)), uu[t])
            )
              p = uu[t];
            else if ("#" === t.charAt(0)) {
              if (
                (t.length < 6 &&
                  ((r = t.charAt(1)),
                  (n = t.charAt(2)),
                  (o = t.charAt(3)),
                  (t =
                    "#" +
                    r +
                    r +
                    n +
                    n +
                    o +
                    o +
                    (5 === t.length ? t.charAt(4) + t.charAt(4) : ""))),
                9 === t.length)
              )
                return [
                  (p = parseInt(t.substr(1, 6), 16)) >> 16,
                  (p >> 8) & hu,
                  p & hu,
                  parseInt(t.substr(7), 16) / 255,
                ];
              p = [
                (t = parseInt(t.substr(1), 16)) >> 16,
                (t >> 8) & hu,
                t & hu,
              ];
            } else if ("hsl" === t.substr(0, 3))
              if (((p = d = t.match(Ra)), e)) {
                if (~t.indexOf("="))
                  return (p = t.match(Ia)), i && p.length < 4 && (p[3] = 1), p;
              } else
                (s = (+p[0] % 360) / 360),
                  (a = +p[1] / 100),
                  (r =
                    2 * (h = +p[2] / 100) -
                    (n = h <= 0.5 ? h * (a + 1) : h + a - h * a)),
                  p.length > 3 && (p[3] *= 1),
                  (p[0] = lu(s + 1 / 3, r, n)),
                  (p[1] = lu(s, r, n)),
                  (p[2] = lu(s - 1 / 3, r, n));
            else p = t.match(Ra) || uu.transparent;
            p = p.map(Number);
          }
          return (
            e &&
              !d &&
              ((r = p[0] / hu),
              (n = p[1] / hu),
              (o = p[2] / hu),
              (h = ((u = Math.max(r, n, o)) + (l = Math.min(r, n, o))) / 2),
              u === l
                ? (s = a = 0)
                : ((c = u - l),
                  (a = h > 0.5 ? c / (2 - u - l) : c / (u + l)),
                  (s =
                    u === r
                      ? (n - o) / c + (n < o ? 6 : 0)
                      : u === n
                      ? (o - r) / c + 2
                      : (r - n) / c + 4),
                  (s *= 60)),
              (p[0] = ~~(s + 0.5)),
              (p[1] = ~~(100 * a + 0.5)),
              (p[2] = ~~(100 * h + 0.5))),
            i && p.length < 4 && (p[3] = 1),
            p
          );
        },
        du = function (t) {
          var e = [],
            i = [],
            r = -1;
          return (
            t.split(_u).forEach(function (t) {
              var n = t.match(ka) || [];
              e.push.apply(e, n), i.push((r += n.length + 1));
            }),
            (e.c = i),
            e
          );
        },
        pu = function (t, e, i) {
          var r,
            n,
            o,
            s,
            a = "",
            h = (t + a).match(_u),
            u = e ? "hsla(" : "rgba(",
            l = 0;
          if (!h) return t;
          if (
            ((h = h.map(function (t) {
              return (
                (t = cu(t, e, 1)) &&
                u +
                  (e
                    ? t[0] + "," + t[1] + "%," + t[2] + "%," + t[3]
                    : t.join(",")) +
                  ")"
              );
            })),
            i && ((o = du(t)), (r = i.c).join(a) !== o.c.join(a)))
          )
            for (s = (n = t.replace(_u, "1").split(ka)).length - 1; l < s; l++)
              a +=
                n[l] +
                (~r.indexOf(l)
                  ? h.shift() || u + "0,0,0,0)"
                  : (o.length ? o : h.length ? h : i).shift());
          if (!n)
            for (s = (n = t.split(_u)).length - 1; l < s; l++) a += n[l] + h[l];
          return a + n[s];
        },
        _u = (function () {
          var t,
            e =
              "(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";
          for (t in uu) e += "|" + t + "\\b";
          return new RegExp(e + ")", "gi");
        })(),
        fu = /hsl[a]?\(/,
        mu = function (t) {
          var e,
            i = t.join(" ");
          if (((_u.lastIndex = 0), _u.test(i)))
            return (
              (e = fu.test(i)),
              (t[1] = pu(t[1], e)),
              (t[0] = pu(t[0], e, du(t[1]))),
              !0
            );
        },
        yu = (function () {
          var t,
            e,
            i,
            r,
            n,
            o,
            s = Date.now,
            a = 500,
            h = 33,
            u = s(),
            l = u,
            c = 1e3 / 240,
            d = c,
            p = [],
            _ = function i(_) {
              var f,
                m,
                y,
                g,
                v = s() - l,
                b = !0 === _;
              if (
                ((v > a || v < 0) && (u += v - h),
                ((f = (y = (l += v) - u) - d) > 0 || b) &&
                  ((g = ++r.frame),
                  (n = y - 1e3 * r.time),
                  (r.time = y /= 1e3),
                  (d += f + (f >= c ? 4 : c - f)),
                  (m = 1)),
                b || (t = e(i)),
                m)
              )
                for (o = 0; o < p.length; o++) p[o](y, n, g, _);
            };
          return (
            (r = {
              time: 0,
              frame: 0,
              tick: function () {
                _(!0);
              },
              deltaRatio: function (t) {
                return n / (1e3 / (t || 60));
              },
              wake: function () {
                ha &&
                  (!sa &&
                    Ma() &&
                    ((oa = sa = window),
                    (aa = oa.document || {}),
                    (Ua.gsap = ml),
                    (oa.gsapVersions || (oa.gsapVersions = [])).push(
                      ml.version
                    ),
                    Va(Ga || oa.GreenSockGlobals || (!oa.gsap && oa) || {}),
                    su.forEach(au)),
                  (i =
                    "undefined" != typeof requestAnimationFrame &&
                    requestAnimationFrame),
                  t && r.sleep(),
                  (e =
                    i ||
                    function (t) {
                      return setTimeout(t, (d - 1e3 * r.time + 1) | 0);
                    }),
                  (ca = 1),
                  _(2));
              },
              sleep: function () {
                (i ? cancelAnimationFrame : clearTimeout)(t),
                  (ca = 0),
                  (e = Ha);
              },
              lagSmoothing: function (t, e) {
                (a = t || 1 / 0), (h = Math.min(e || 33, a));
              },
              fps: function (t) {
                (c = 1e3 / (t || 240)), (d = 1e3 * r.time + c);
              },
              add: function (t, e, i) {
                var n = e
                  ? function (e, i, o, s) {
                      t(e, i, o, s), r.remove(n);
                    }
                  : t;
                return r.remove(t), p[i ? "unshift" : "push"](n), gu(), n;
              },
              remove: function (t, e) {
                ~(e = p.indexOf(t)) && p.splice(e, 1) && o >= e && o--;
              },
              _listeners: p,
            }),
            r
          );
        })(),
        gu = function () {
          return !ca && yu.wake();
        },
        vu = {},
        bu = /^[\d.\-M][\d.\-,\s]/,
        xu = /["']/g,
        wu = function (t) {
          for (
            var e,
              i,
              r,
              n = {},
              o = t.substr(1, t.length - 3).split(":"),
              s = o[0],
              a = 1,
              h = o.length;
            a < h;
            a++
          )
            (i = o[a]),
              (e = a !== h - 1 ? i.lastIndexOf(",") : i.length),
              (r = i.substr(0, e)),
              (n[s] = isNaN(r) ? r.replace(xu, "").trim() : +r),
              (s = i.substr(e + 1).trim());
          return n;
        },
        Tu = function (t) {
          return function (e) {
            return 1 - t(1 - e);
          };
        },
        Au = function t(e, i) {
          for (var r, n = e._first; n; )
            n instanceof Ru
              ? t(n, i)
              : !n.vars.yoyoEase ||
                (n._yoyo && n._repeat) ||
                n._yoyo === i ||
                (n.timeline
                  ? t(n.timeline, i)
                  : ((r = n._ease),
                    (n._ease = n._yEase),
                    (n._yEase = r),
                    (n._yoyo = i))),
              (n = n._next);
        },
        Su = function (t, e) {
          return (
            (t &&
              (Ta(t)
                ? t
                : vu[t] ||
                  (function (t) {
                    var e,
                      i,
                      r,
                      n,
                      o = (t + "").split("("),
                      s = vu[o[0]];
                    return s && o.length > 1 && s.config
                      ? s.config.apply(
                          null,
                          ~t.indexOf("{")
                            ? [wu(o[1])]
                            : ((e = t),
                              (i = e.indexOf("(") + 1),
                              (r = e.indexOf(")")),
                              (n = e.indexOf("(", i)),
                              e.substring(
                                i,
                                ~n && n < r ? e.indexOf(")", r + 1) : r
                              ))
                                .split(",")
                                .map(ph)
                        )
                      : vu._CE && bu.test(t)
                      ? vu._CE("", t)
                      : s;
                  })(t))) ||
            e
          );
        },
        Eu = function (t, e, i, r) {
          void 0 === i &&
            (i = function (t) {
              return 1 - e(1 - t);
            }),
            void 0 === r &&
              (r = function (t) {
                return t < 0.5 ? e(2 * t) / 2 : 1 - e(2 * (1 - t)) / 2;
              });
          var n,
            o = { easeIn: e, easeOut: i, easeInOut: r };
          return (
            sh(t, function (t) {
              for (var e in ((vu[t] = Ua[t] = o),
              (vu[(n = t.toLowerCase())] = i),
              o))
                vu[
                  n +
                    ("easeIn" === e
                      ? ".in"
                      : "easeOut" === e
                      ? ".out"
                      : ".inOut")
                ] = vu[t + "." + e] = o[e];
            }),
            o
          );
        },
        Cu = function (t) {
          return function (e) {
            return e < 0.5
              ? (1 - t(1 - 2 * e)) / 2
              : 0.5 + t(2 * (e - 0.5)) / 2;
          };
        },
        Mu = function t(e, i, r) {
          var n = i >= 1 ? i : 1,
            o = (r || (e ? 0.3 : 0.45)) / (i < 1 ? i : 1),
            s = (o / ma) * (Math.asin(1 / n) || 0),
            a = function (t) {
              return 1 === t
                ? 1
                : n * Math.pow(2, -10 * t) * xa((t - s) * o) + 1;
            },
            h =
              "out" === e
                ? a
                : "in" === e
                ? function (t) {
                    return 1 - a(1 - t);
                  }
                : Cu(a);
          return (
            (o = ma / o),
            (h.config = function (i, r) {
              return t(e, i, r);
            }),
            h
          );
        },
        Pu = function t(e, i) {
          void 0 === i && (i = 1.70158);
          var r = function (t) {
              return t ? --t * t * ((i + 1) * t + i) + 1 : 0;
            },
            n =
              "out" === e
                ? r
                : "in" === e
                ? function (t) {
                    return 1 - r(1 - t);
                  }
                : Cu(r);
          return (
            (n.config = function (i) {
              return t(e, i);
            }),
            n
          );
        };
      sh("Linear,Quad,Cubic,Quart,Quint,Strong", function (t, e) {
        var i = e < 5 ? e + 1 : e;
        Eu(
          t + ",Power" + (i - 1),
          e
            ? function (t) {
                return Math.pow(t, i);
              }
            : function (t) {
                return t;
              },
          function (t) {
            return 1 - Math.pow(1 - t, i);
          },
          function (t) {
            return t < 0.5
              ? Math.pow(2 * t, i) / 2
              : 1 - Math.pow(2 * (1 - t), i) / 2;
          }
        );
      }),
        (vu.Linear.easeNone = vu.none = vu.Linear.easeIn),
        Eu("Elastic", Mu("in"), Mu("out"), Mu()),
        (function (t, e) {
          var i = 1 / e,
            r = 2 * i,
            n = 2.5 * i,
            o = function (o) {
              return o < i
                ? t * o * o
                : o < r
                ? t * Math.pow(o - 1.5 / e, 2) + 0.75
                : o < n
                ? t * (o -= 2.25 / e) * o + 0.9375
                : t * Math.pow(o - 2.625 / e, 2) + 0.984375;
            };
          Eu(
            "Bounce",
            function (t) {
              return 1 - o(1 - t);
            },
            o
          );
        })(7.5625, 2.75),
        Eu("Expo", function (t) {
          return t ? Math.pow(2, 10 * (t - 1)) : 0;
        }),
        Eu("Circ", function (t) {
          return -(va(1 - t * t) - 1);
        }),
        Eu("Sine", function (t) {
          return 1 === t ? 1 : 1 - ba(t * ya);
        }),
        Eu("Back", Pu("in"), Pu("out"), Pu()),
        (vu.SteppedEase =
          vu.steps =
          Ua.SteppedEase =
            {
              config: function (t, e) {
                void 0 === t && (t = 1);
                var i = 1 / t,
                  r = t + (e ? 0 : 1),
                  n = e ? 1 : 0;
                return function (t) {
                  return (((r * zh(0, 0.99999999, t)) | 0) + n) * i;
                };
              },
            }),
        (pa.ease = vu["quad.out"]),
        sh(
          "onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",
          function (t) {
            return (ih += t + "," + t + "Params,");
          }
        );
      var Bu = function (t, e) {
          (this.id = ga++),
            (t._gsap = this),
            (this.target = t),
            (this.harness = e),
            (this.get = e ? e.get : oh),
            (this.set = e ? e.getSetter : qu);
        },
        Ou = (function () {
          function t(t) {
            (this.vars = t),
              (this._delay = +t.delay || 0),
              (this._repeat = t.repeat === 1 / 0 ? -2 : t.repeat || 0) &&
                ((this._rDelay = t.repeatDelay || 0),
                (this._yoyo = !!t.yoyo || !!t.yoyoEase)),
              (this._ts = 1),
              Nh(this, +t.duration, 1, 1),
              (this.data = t.data),
              ra && ((this._ctx = ra), ra.data.push(this)),
              ca || yu.wake();
          }
          var e = t.prototype;
          return (
            (e.delay = function (t) {
              return t || 0 === t
                ? (this.parent &&
                    this.parent.smoothChildTiming &&
                    this.startTime(this._start + t - this._delay),
                  (this._delay = t),
                  this)
                : this._delay;
            }),
            (e.duration = function (t) {
              return arguments.length
                ? this.totalDuration(
                    this._repeat > 0 ? t + (t + this._rDelay) * this._repeat : t
                  )
                : this.totalDuration() && this._dur;
            }),
            (e.totalDuration = function (t) {
              return arguments.length
                ? ((this._dirty = 0),
                  Nh(
                    this,
                    this._repeat < 0
                      ? t
                      : (t - this._repeat * this._rDelay) / (this._repeat + 1)
                  ))
                : this._tDur;
            }),
            (e.totalTime = function (t, e) {
              if ((gu(), !arguments.length)) return this._tTime;
              var i = this._dp;
              if (i && i.smoothChildTiming && this._ts) {
                for (
                  Bh(this, t), !i._dp || i.parent || Oh(i, this);
                  i && i.parent;

                )
                  i.parent._time !==
                    i._start +
                      (i._ts >= 0
                        ? i._tTime / i._ts
                        : (i.totalDuration() - i._tTime) / -i._ts) &&
                    i.totalTime(i._tTime, !0),
                    (i = i.parent);
                !this.parent &&
                  this._dp.autoRemoveChildren &&
                  ((this._ts > 0 && t < this._tDur) ||
                    (this._ts < 0 && t > 0) ||
                    (!this._tDur && !t)) &&
                  Rh(this._dp, this, this._start - this._delay);
              }
              return (
                (this._tTime !== t ||
                  (!this._dur && !e) ||
                  (this._initted && Math.abs(this._zTime) === fa) ||
                  (!t && !this._initted && (this.add || this._ptLookup))) &&
                  (this._ts || (this._pTime = t), dh(this, t, e)),
                this
              );
            }),
            (e.time = function (t, e) {
              return arguments.length
                ? this.totalTime(
                    Math.min(this.totalDuration(), t + Eh(this)) %
                      (this._dur + this._rDelay) || (t ? this._dur : 0),
                    e
                  )
                : this._time;
            }),
            (e.totalProgress = function (t, e) {
              return arguments.length
                ? this.totalTime(this.totalDuration() * t, e)
                : this.totalDuration()
                ? Math.min(1, this._tTime / this._tDur)
                : this.rawTime() > 0
                ? 1
                : 0;
            }),
            (e.progress = function (t, e) {
              return arguments.length
                ? this.totalTime(
                    this.duration() *
                      (!this._yoyo || 1 & this.iteration() ? t : 1 - t) +
                      Eh(this),
                    e
                  )
                : this.duration()
                ? Math.min(1, this._time / this._dur)
                : this.rawTime() > 0
                ? 1
                : 0;
            }),
            (e.iteration = function (t, e) {
              var i = this.duration() + this._rDelay;
              return arguments.length
                ? this.totalTime(this._time + (t - 1) * i, e)
                : this._repeat
                ? Ch(this._tTime, i) + 1
                : 1;
            }),
            (e.timeScale = function (t, e) {
              if (!arguments.length) return -1e-8 === this._rts ? 0 : this._rts;
              if (this._rts === t) return this;
              var i =
                this.parent && this._ts
                  ? Mh(this.parent._time, this)
                  : this._tTime;
              return (
                (this._rts = +t || 0),
                (this._ts = this._ps || -1e-8 === t ? 0 : this._rts),
                this.totalTime(
                  zh(-Math.abs(this._delay), this._tDur, i),
                  !1 !== e
                ),
                Ph(this),
                (function (t) {
                  for (var e = t.parent; e && e.parent; )
                    (e._dirty = 1), e.totalDuration(), (e = e.parent);
                  return t;
                })(this)
              );
            }),
            (e.paused = function (t) {
              return arguments.length
                ? (this._ps !== t &&
                    ((this._ps = t),
                    t
                      ? ((this._pTime =
                          this._tTime ||
                          Math.max(-this._delay, this.rawTime())),
                        (this._ts = this._act = 0))
                      : (gu(),
                        (this._ts = this._rts),
                        this.totalTime(
                          this.parent && !this.parent.smoothChildTiming
                            ? this.rawTime()
                            : this._tTime || this._pTime,
                          1 === this.progress() &&
                            Math.abs(this._zTime) !== fa &&
                            (this._tTime -= fa)
                        ))),
                  this)
                : this._ps;
            }),
            (e.startTime = function (t) {
              if (arguments.length) {
                this._start = t;
                var e = this.parent || this._dp;
                return (
                  e &&
                    (e._sort || !this.parent) &&
                    Rh(e, this, t - this._delay),
                  this
                );
              }
              return this._start;
            }),
            (e.endTime = function (t) {
              return (
                this._start +
                (Ca(t) ? this.totalDuration() : this.duration()) /
                  Math.abs(this._ts || 1)
              );
            }),
            (e.rawTime = function (t) {
              var e = this.parent || this._dp;
              return e
                ? t &&
                  (!this._ts ||
                    (this._repeat && this._time && this.totalProgress() < 1))
                  ? this._tTime % (this._dur + this._rDelay)
                  : this._ts
                  ? Mh(e.rawTime(t), this)
                  : this._tTime
                : this._tTime;
            }),
            (e.revert = function (t) {
              void 0 === t && (t = qa);
              var e = ia;
              return (
                (ia = t),
                (this._initted || this._startAt) &&
                  (this.timeline && this.timeline.revert(t),
                  this.totalTime(-0.01, t.suppressEvents)),
                "nested" !== this.data && !1 !== t.kill && this.kill(),
                (ia = e),
                this
              );
            }),
            (e.globalTime = function (t) {
              for (var e = this, i = arguments.length ? t : e.rawTime(); e; )
                (i = e._start + i / (Math.abs(e._ts) || 1)), (e = e._dp);
              return !this.parent && this._sat ? this._sat.globalTime(t) : i;
            }),
            (e.repeat = function (t) {
              return arguments.length
                ? ((this._repeat = t === 1 / 0 ? -2 : t), Lh(this))
                : -2 === this._repeat
                ? 1 / 0
                : this._repeat;
            }),
            (e.repeatDelay = function (t) {
              if (arguments.length) {
                var e = this._time;
                return (this._rDelay = t), Lh(this), e ? this.time(e) : this;
              }
              return this._rDelay;
            }),
            (e.yoyo = function (t) {
              return arguments.length ? ((this._yoyo = t), this) : this._yoyo;
            }),
            (e.seek = function (t, e) {
              return this.totalTime(Gh(this, t), Ca(e));
            }),
            (e.restart = function (t, e) {
              return this.play().totalTime(t ? -this._delay : 0, Ca(e));
            }),
            (e.play = function (t, e) {
              return null != t && this.seek(t, e), this.reversed(!1).paused(!1);
            }),
            (e.reverse = function (t, e) {
              return (
                null != t && this.seek(t || this.totalDuration(), e),
                this.reversed(!0).paused(!1)
              );
            }),
            (e.pause = function (t, e) {
              return null != t && this.seek(t, e), this.paused(!0);
            }),
            (e.resume = function () {
              return this.paused(!1);
            }),
            (e.reversed = function (t) {
              return arguments.length
                ? (!!t !== this.reversed() &&
                    this.timeScale(-this._rts || (t ? -1e-8 : 0)),
                  this)
                : this._rts < 0;
            }),
            (e.invalidate = function () {
              return (
                (this._initted = this._act = 0), (this._zTime = -1e-8), this
              );
            }),
            (e.isActive = function () {
              var t,
                e = this.parent || this._dp,
                i = this._start;
              return !(
                e &&
                !(
                  this._ts &&
                  this._initted &&
                  e.isActive() &&
                  (t = e.rawTime(!0)) >= i &&
                  t < this.endTime(!0) - fa
                )
              );
            }),
            (e.eventCallback = function (t, e, i) {
              var r = this.vars;
              return arguments.length > 1
                ? (e
                    ? ((r[t] = e),
                      i && (r[t + "Params"] = i),
                      "onUpdate" === t && (this._onUpdate = e))
                    : delete r[t],
                  this)
                : r[t];
            }),
            (e.then = function (t) {
              var e = this;
              return new Promise(function (i) {
                var r = Ta(t) ? t : _h,
                  n = function () {
                    var t = e.then;
                    (e.then = null),
                      Ta(r) &&
                        (r = r(e)) &&
                        (r.then || r === e) &&
                        (e.then = t),
                      i(r),
                      (e.then = t);
                  };
                (e._initted && 1 === e.totalProgress() && e._ts >= 0) ||
                (!e._tTime && e._ts < 0)
                  ? n()
                  : (e._prom = n);
              });
            }),
            (e.kill = function () {
              ou(this);
            }),
            t
          );
        })();
      fh(Ou.prototype, {
        _time: 0,
        _start: 0,
        _end: 0,
        _tTime: 0,
        _tDur: 0,
        _dirty: 0,
        _repeat: 0,
        _yoyo: !1,
        parent: null,
        _initted: !1,
        _rDelay: 0,
        _ts: 1,
        _dp: 0,
        ratio: 0,
        _zTime: -1e-8,
        _prom: 0,
        _ps: !1,
        _rts: 1,
      });
      var Ru = (function (t) {
        function e(e, i) {
          var r;
          return (
            void 0 === e && (e = {}),
            ((r = t.call(this, e) || this).labels = {}),
            (r.smoothChildTiming = !!e.smoothChildTiming),
            (r.autoRemoveChildren = !!e.autoRemoveChildren),
            (r._sort = Ca(e.sortChildren)),
            na && Rh(e.parent || na, Qs(r), i),
            e.reversed && r.reverse(),
            e.paused && r.paused(!0),
            e.scrollTrigger && Ih(Qs(r), e.scrollTrigger),
            r
          );
        }
        ta(e, t);
        var i = e.prototype;
        return (
          (i.to = function (t, e, i) {
            return Vh(0, arguments, this), this;
          }),
          (i.from = function (t, e, i) {
            return Vh(1, arguments, this), this;
          }),
          (i.fromTo = function (t, e, i, r) {
            return Vh(2, arguments, this), this;
          }),
          (i.set = function (t, e, i) {
            return (
              (e.duration = 0),
              (e.parent = this),
              vh(e).repeatDelay || (e.repeat = 0),
              (e.immediateRender = !!e.immediateRender),
              new zu(t, e, Gh(this, i), 1),
              this
            );
          }),
          (i.call = function (t, e, i) {
            return Rh(this, zu.delayedCall(0, t, e), i);
          }),
          (i.staggerTo = function (t, e, i, r, n, o, s) {
            return (
              (i.duration = e),
              (i.stagger = i.stagger || r),
              (i.onComplete = o),
              (i.onCompleteParams = s),
              (i.parent = this),
              new zu(t, i, Gh(this, n)),
              this
            );
          }),
          (i.staggerFrom = function (t, e, i, r, n, o, s) {
            return (
              (i.runBackwards = 1),
              (vh(i).immediateRender = Ca(i.immediateRender)),
              this.staggerTo(t, e, i, r, n, o, s)
            );
          }),
          (i.staggerFromTo = function (t, e, i, r, n, o, s, a) {
            return (
              (r.startAt = i),
              (vh(r).immediateRender = Ca(r.immediateRender)),
              this.staggerTo(t, e, r, n, o, s, a)
            );
          }),
          (i.render = function (t, e, i) {
            var r,
              n,
              o,
              s,
              a,
              h,
              u,
              l,
              c,
              d,
              p,
              _,
              f = this._time,
              m = this._dirty ? this.totalDuration() : this._tDur,
              y = this._dur,
              g = t <= 0 ? 0 : hh(t),
              v = this._zTime < 0 != t < 0 && (this._initted || !y);
            if (
              (this !== na && g > m && t >= 0 && (g = m),
              g !== this._tTime || i || v)
            ) {
              if (
                (f !== this._time &&
                  y &&
                  ((g += this._time - f), (t += this._time - f)),
                (r = g),
                (c = this._start),
                (h = !(l = this._ts)),
                v && (y || (f = this._zTime), (t || !e) && (this._zTime = t)),
                this._repeat)
              ) {
                if (
                  ((p = this._yoyo),
                  (a = y + this._rDelay),
                  this._repeat < -1 && t < 0)
                )
                  return this.totalTime(100 * a + t, e, i);
                if (
                  ((r = hh(g % a)),
                  g === m
                    ? ((s = this._repeat), (r = y))
                    : ((s = ~~(g / a)) && s === g / a && ((r = y), s--),
                      r > y && (r = y)),
                  (d = Ch(this._tTime, a)),
                  !f &&
                    this._tTime &&
                    d !== s &&
                    this._tTime - d * a - this._dur <= 0 &&
                    (d = s),
                  p && 1 & s && ((r = y - r), (_ = 1)),
                  s !== d && !this._lock)
                ) {
                  var b = p && 1 & d,
                    x = b === (p && 1 & s);
                  if (
                    (s < d && (b = !b),
                    (f = b ? 0 : g % y ? y : g),
                    (this._lock = 1),
                    (this.render(f || (_ ? 0 : hh(s * a)), e, !y)._lock = 0),
                    (this._tTime = g),
                    !e && this.parent && nu(this, "onRepeat"),
                    this.vars.repeatRefresh &&
                      !_ &&
                      (this.invalidate()._lock = 1),
                    (f && f !== this._time) ||
                      h !== !this._ts ||
                      (this.vars.onRepeat && !this.parent && !this._act))
                  )
                    return this;
                  if (
                    ((y = this._dur),
                    (m = this._tDur),
                    x &&
                      ((this._lock = 2),
                      (f = b ? y : -1e-4),
                      this.render(f, !0),
                      this.vars.repeatRefresh && !_ && this.invalidate()),
                    (this._lock = 0),
                    !this._ts && !h)
                  )
                    return this;
                  Au(this, _);
                }
              }
              if (
                (this._hasPause &&
                  !this._forcing &&
                  this._lock < 2 &&
                  ((u = (function (t, e, i) {
                    var r;
                    if (i > e)
                      for (r = t._first; r && r._start <= i; ) {
                        if ("isPause" === r.data && r._start > e) return r;
                        r = r._next;
                      }
                    else
                      for (r = t._last; r && r._start >= i; ) {
                        if ("isPause" === r.data && r._start < e) return r;
                        r = r._prev;
                      }
                  })(this, hh(f), hh(r))),
                  u && (g -= r - (r = u._start))),
                (this._tTime = g),
                (this._time = r),
                (this._act = !l),
                this._initted ||
                  ((this._onUpdate = this.vars.onUpdate),
                  (this._initted = 1),
                  (this._zTime = t),
                  (f = 0)),
                !f && r && !e && !s && (nu(this, "onStart"), this._tTime !== g))
              )
                return this;
              if (r >= f && t >= 0)
                for (n = this._first; n; ) {
                  if (
                    ((o = n._next),
                    (n._act || r >= n._start) && n._ts && u !== n)
                  ) {
                    if (n.parent !== this) return this.render(t, e, i);
                    if (
                      (n.render(
                        n._ts > 0
                          ? (r - n._start) * n._ts
                          : (n._dirty ? n.totalDuration() : n._tDur) +
                              (r - n._start) * n._ts,
                        e,
                        i
                      ),
                      r !== this._time || (!this._ts && !h))
                    ) {
                      (u = 0), o && (g += this._zTime = -1e-8);
                      break;
                    }
                  }
                  n = o;
                }
              else {
                n = this._last;
                for (var w = t < 0 ? t : r; n; ) {
                  if (
                    ((o = n._prev), (n._act || w <= n._end) && n._ts && u !== n)
                  ) {
                    if (n.parent !== this) return this.render(t, e, i);
                    if (
                      (n.render(
                        n._ts > 0
                          ? (w - n._start) * n._ts
                          : (n._dirty ? n.totalDuration() : n._tDur) +
                              (w - n._start) * n._ts,
                        e,
                        i || (ia && (n._initted || n._startAt))
                      ),
                      r !== this._time || (!this._ts && !h))
                    ) {
                      (u = 0), o && (g += this._zTime = w ? -1e-8 : fa);
                      break;
                    }
                  }
                  n = o;
                }
              }
              if (
                u &&
                !e &&
                (this.pause(),
                (u.render(r >= f ? 0 : -1e-8)._zTime = r >= f ? 1 : -1),
                this._ts)
              )
                return (this._start = c), Ph(this), this.render(t, e, i);
              this._onUpdate && !e && nu(this, "onUpdate", !0),
                ((g === m && this._tTime >= this.totalDuration()) ||
                  (!g && f)) &&
                  ((c !== this._start && Math.abs(l) === Math.abs(this._ts)) ||
                    this._lock ||
                    ((t || !y) &&
                      ((g === m && this._ts > 0) || (!g && this._ts < 0)) &&
                      wh(this, 1),
                    e ||
                      (t < 0 && !f) ||
                      (!g && !f && m) ||
                      (nu(
                        this,
                        g === m && t >= 0 ? "onComplete" : "onReverseComplete",
                        !0
                      ),
                      this._prom &&
                        !(g < m && this.timeScale() > 0) &&
                        this._prom())));
            }
            return this;
          }),
          (i.add = function (t, e) {
            var i = this;
            if ((Aa(e) || (e = Gh(this, e, t)), !(t instanceof Ou))) {
              if (Oa(t))
                return (
                  t.forEach(function (t) {
                    return i.add(t, e);
                  }),
                  this
                );
              if (wa(t)) return this.addLabel(t, e);
              if (!Ta(t)) return this;
              t = zu.delayedCall(0, t);
            }
            return this !== t ? Rh(this, t, e) : this;
          }),
          (i.getChildren = function (t, e, i, r) {
            void 0 === t && (t = !0),
              void 0 === e && (e = !0),
              void 0 === i && (i = !0),
              void 0 === r && (r = -_a);
            for (var n = [], o = this._first; o; )
              o._start >= r &&
                (o instanceof zu
                  ? e && n.push(o)
                  : (i && n.push(o),
                    t && n.push.apply(n, o.getChildren(!0, e, i)))),
                (o = o._next);
            return n;
          }),
          (i.getById = function (t) {
            for (var e = this.getChildren(1, 1, 1), i = e.length; i--; )
              if (e[i].vars.id === t) return e[i];
          }),
          (i.remove = function (t) {
            return wa(t)
              ? this.removeLabel(t)
              : Ta(t)
              ? this.killTweensOf(t)
              : (xh(this, t),
                t === this._recent && (this._recent = this._last),
                Th(this));
          }),
          (i.totalTime = function (e, i) {
            return arguments.length
              ? ((this._forcing = 1),
                !this._dp &&
                  this._ts &&
                  (this._start = hh(
                    yu.time -
                      (this._ts > 0
                        ? e / this._ts
                        : (this.totalDuration() - e) / -this._ts)
                  )),
                t.prototype.totalTime.call(this, e, i),
                (this._forcing = 0),
                this)
              : this._tTime;
          }),
          (i.addLabel = function (t, e) {
            return (this.labels[t] = Gh(this, e)), this;
          }),
          (i.removeLabel = function (t) {
            return delete this.labels[t], this;
          }),
          (i.addPause = function (t, e, i) {
            var r = zu.delayedCall(0, e || Ha, i);
            return (
              (r.data = "isPause"),
              (this._hasPause = 1),
              Rh(this, r, Gh(this, t))
            );
          }),
          (i.removePause = function (t) {
            var e = this._first;
            for (t = Gh(this, t); e; )
              e._start === t && "isPause" === e.data && wh(e), (e = e._next);
          }),
          (i.killTweensOf = function (t, e, i) {
            for (var r = this.getTweensOf(t, i), n = r.length; n--; )
              Iu !== r[n] && r[n].kill(t, e);
            return this;
          }),
          (i.getTweensOf = function (t, e) {
            for (var i, r = [], n = Wh(t), o = this._first, s = Aa(e); o; )
              o instanceof zu
                ? lh(o._targets, n) &&
                  (s
                    ? (!Iu || (o._initted && o._ts)) &&
                      o.globalTime(0) <= e &&
                      o.globalTime(o.totalDuration()) > e
                    : !e || o.isActive()) &&
                  r.push(o)
                : (i = o.getTweensOf(n, e)).length && r.push.apply(r, i),
                (o = o._next);
            return r;
          }),
          (i.tweenTo = function (t, e) {
            e = e || {};
            var i,
              r = this,
              n = Gh(r, t),
              o = e,
              s = o.startAt,
              a = o.onStart,
              h = o.onStartParams,
              u = o.immediateRender,
              l = zu.to(
                r,
                fh(
                  {
                    ease: e.ease || "none",
                    lazy: !1,
                    immediateRender: !1,
                    time: n,
                    overwrite: "auto",
                    duration:
                      e.duration ||
                      Math.abs(
                        (n - (s && "time" in s ? s.time : r._time)) /
                          r.timeScale()
                      ) ||
                      fa,
                    onStart: function () {
                      if ((r.pause(), !i)) {
                        var t =
                          e.duration ||
                          Math.abs(
                            (n - (s && "time" in s ? s.time : r._time)) /
                              r.timeScale()
                          );
                        l._dur !== t && Nh(l, t, 0, 1).render(l._time, !0, !0),
                          (i = 1);
                      }
                      a && a.apply(l, h || []);
                    },
                  },
                  e
                )
              );
            return u ? l.render(0) : l;
          }),
          (i.tweenFromTo = function (t, e, i) {
            return this.tweenTo(e, fh({ startAt: { time: Gh(this, t) } }, i));
          }),
          (i.recent = function () {
            return this._recent;
          }),
          (i.nextLabel = function (t) {
            return void 0 === t && (t = this._time), ru(this, Gh(this, t));
          }),
          (i.previousLabel = function (t) {
            return void 0 === t && (t = this._time), ru(this, Gh(this, t), 1);
          }),
          (i.currentLabel = function (t) {
            return arguments.length
              ? this.seek(t, !0)
              : this.previousLabel(this._time + fa);
          }),
          (i.shiftChildren = function (t, e, i) {
            void 0 === i && (i = 0);
            for (var r, n = this._first, o = this.labels; n; )
              n._start >= i && ((n._start += t), (n._end += t)), (n = n._next);
            if (e) for (r in o) o[r] >= i && (o[r] += t);
            return Th(this);
          }),
          (i.invalidate = function (e) {
            var i = this._first;
            for (this._lock = 0; i; ) i.invalidate(e), (i = i._next);
            return t.prototype.invalidate.call(this, e);
          }),
          (i.clear = function (t) {
            void 0 === t && (t = !0);
            for (var e, i = this._first; i; )
              (e = i._next), this.remove(i), (i = e);
            return (
              this._dp && (this._time = this._tTime = this._pTime = 0),
              t && (this.labels = {}),
              Th(this)
            );
          }),
          (i.totalDuration = function (t) {
            var e,
              i,
              r,
              n = 0,
              o = this,
              s = o._last,
              a = _a;
            if (arguments.length)
              return o.timeScale(
                (o._repeat < 0 ? o.duration() : o.totalDuration()) /
                  (o.reversed() ? -t : t)
              );
            if (o._dirty) {
              for (r = o.parent; s; )
                (e = s._prev),
                  s._dirty && s.totalDuration(),
                  (i = s._start) > a && o._sort && s._ts && !o._lock
                    ? ((o._lock = 1), (Rh(o, s, i - s._delay, 1)._lock = 0))
                    : (a = i),
                  i < 0 &&
                    s._ts &&
                    ((n -= i),
                    ((!r && !o._dp) || (r && r.smoothChildTiming)) &&
                      ((o._start += i / o._ts),
                      (o._time -= i),
                      (o._tTime -= i)),
                    o.shiftChildren(-i, !1, -Infinity),
                    (a = 0)),
                  s._end > n && s._ts && (n = s._end),
                  (s = e);
              Nh(o, o === na && o._time > n ? o._time : n, 1, 1),
                (o._dirty = 0);
            }
            return o._tDur;
          }),
          (e.updateRoot = function (t) {
            if (
              (na._ts && (dh(na, Mh(t, na)), (ua = yu.frame)), yu.frame >= th)
            ) {
              th += da.autoSleep || 120;
              var e = na._first;
              if ((!e || !e._ts) && da.autoSleep && yu._listeners.length < 2) {
                for (; e && !e._ts; ) e = e._next;
                e || yu.sleep();
              }
            }
          }),
          e
        );
      })(Ou);
      fh(Ru.prototype, { _lock: 0, _hasPause: 0, _forcing: 0 });
      var Iu,
        ku,
        Fu = function (t, e, i, r, n, o, s) {
          var a,
            h,
            u,
            l,
            c,
            d,
            p,
            _,
            f = new rl(this._pt, t, e, 0, 1, Ju, null, n),
            m = 0,
            y = 0;
          for (
            f.b = i,
              f.e = r,
              i += "",
              (p = ~(r += "").indexOf("random(")) && (r = eu(r)),
              o && (o((_ = [i, r]), t, e), (i = _[0]), (r = _[1])),
              h = i.match(Fa) || [];
            (a = Fa.exec(r));

          )
            (l = a[0]),
              (c = r.substring(m, a.index)),
              u ? (u = (u + 1) % 5) : "rgba(" === c.substr(-5) && (u = 1),
              l !== h[y++] &&
                ((d = parseFloat(h[y - 1]) || 0),
                (f._pt = {
                  _next: f._pt,
                  p: c || 1 === y ? c : ",",
                  s: d,
                  c: "=" === l.charAt(1) ? uh(d, l) - d : parseFloat(l) - d,
                  m: u && u < 4 ? Math.round : 0,
                }),
                (m = Fa.lastIndex));
          return (
            (f.c = m < r.length ? r.substring(m, r.length) : ""),
            (f.fp = s),
            (Da.test(r) || p) && (f.e = 0),
            (this._pt = f),
            f
          );
        },
        Du = function (t, e, i, r, n, o, s, a, h, u) {
          Ta(r) && (r = r(n || 0, t, o));
          var l,
            c = t[e],
            d =
              "get" !== i
                ? i
                : Ta(c)
                ? h
                  ? t[
                      e.indexOf("set") || !Ta(t["get" + e.substr(3)])
                        ? e
                        : "get" + e.substr(3)
                    ](h)
                  : t[e]()
                : c,
            p = Ta(c) ? (h ? Yu : Hu) : Xu;
          if (
            (wa(r) &&
              (~r.indexOf("random(") && (r = eu(r)),
              "=" === r.charAt(1) &&
                ((l = uh(d, r) + (Xh(d) || 0)) || 0 === l) &&
                (r = l)),
            !u || d !== r || ku)
          )
            return isNaN(d * r) || "" === r
              ? (!c && !(e in t) && ja(e, r),
                Fu.call(this, t, e, d, r, p, a || da.stringFilter, h))
              : ((l = new rl(
                  this._pt,
                  t,
                  e,
                  +d || 0,
                  r - (d || 0),
                  "boolean" == typeof c ? Ku : $u,
                  0,
                  p
                )),
                h && (l.fp = h),
                s && l.modifier(s, this, t),
                (this._pt = l));
        },
        Nu = function (t, e, i, r, n, o) {
          var s, a, h, u;
          if (
            Za[t] &&
            !1 !==
              (s = new Za[t]()).init(
                n,
                s.rawVars
                  ? e[t]
                  : (function (t, e, i, r, n) {
                      if (
                        (Ta(t) && (t = Gu(t, n, e, i, r)),
                        !Ea(t) || (t.style && t.nodeType) || Oa(t) || Ba(t))
                      )
                        return wa(t) ? Gu(t, n, e, i, r) : t;
                      var o,
                        s = {};
                      for (o in t) s[o] = Gu(t[o], n, e, i, r);
                      return s;
                    })(e[t], r, n, o, i),
                i,
                r,
                o
              ) &&
            ((i._pt = a =
              new rl(i._pt, n, t, 0, 1, s.render, s, 0, s.priority)),
            i !== la)
          )
            for (
              h = i._ptLookup[i._targets.indexOf(n)], u = s._props.length;
              u--;

            )
              h[s._props[u]] = a;
          return s;
        },
        Lu = function t(e, i, r) {
          var n,
            o,
            s,
            a,
            h,
            u,
            l,
            c,
            d,
            p,
            _,
            f,
            m,
            y = e.vars,
            g = y.ease,
            v = y.startAt,
            b = y.immediateRender,
            x = y.lazy,
            w = y.onUpdate,
            T = y.runBackwards,
            A = y.yoyoEase,
            S = y.keyframes,
            E = y.autoRevert,
            C = e._dur,
            M = e._startAt,
            P = e._targets,
            B = e.parent,
            O = B && "nested" === B.data ? B.vars.targets : P,
            R = "auto" === e._overwrite && !ea,
            I = e.timeline;
          if (
            (I && (!S || !g) && (g = "none"),
            (e._ease = Su(g, pa.ease)),
            (e._yEase = A ? Tu(Su(!0 === A ? g : A, pa.ease)) : 0),
            A &&
              e._yoyo &&
              !e._repeat &&
              ((A = e._yEase), (e._yEase = e._ease), (e._ease = A)),
            (e._from = !I && !!y.runBackwards),
            !I || (S && !y.stagger))
          ) {
            if (
              ((f = (c = P[0] ? nh(P[0]).harness : 0) && y[c.prop]),
              (n = gh(y, $a)),
              M &&
                (M._zTime < 0 && M.progress(1),
                i < 0 && T && b && !E
                  ? M.render(-1, !0)
                  : M.revert(T && C ? Wa : Ya),
                (M._lazy = 0)),
              v)
            ) {
              if (
                (wh(
                  (e._startAt = zu.set(
                    P,
                    fh(
                      {
                        data: "isStart",
                        overwrite: !1,
                        parent: B,
                        immediateRender: !0,
                        lazy: !M && Ca(x),
                        startAt: null,
                        delay: 0,
                        onUpdate:
                          w &&
                          function () {
                            return nu(e, "onUpdate");
                          },
                        stagger: 0,
                      },
                      v
                    )
                  ))
                ),
                (e._startAt._dp = 0),
                (e._startAt._sat = e),
                i < 0 && (ia || (!b && !E)) && e._startAt.revert(Wa),
                b && C && i <= 0 && r <= 0)
              )
                return void (i && (e._zTime = i));
            } else if (T && C && !M)
              if (
                (i && (b = !1),
                (s = fh(
                  {
                    overwrite: !1,
                    data: "isFromStart",
                    lazy: b && !M && Ca(x),
                    immediateRender: b,
                    stagger: 0,
                    parent: B,
                  },
                  n
                )),
                f && (s[c.prop] = f),
                wh((e._startAt = zu.set(P, s))),
                (e._startAt._dp = 0),
                (e._startAt._sat = e),
                i < 0 &&
                  (ia ? e._startAt.revert(Wa) : e._startAt.render(-1, !0)),
                (e._zTime = i),
                b)
              ) {
                if (!i) return;
              } else t(e._startAt, fa, fa);
            for (
              e._pt = e._ptCache = 0, x = (C && Ca(x)) || (x && !C), o = 0;
              o < P.length;
              o++
            ) {
              if (
                ((l = (h = P[o])._gsap || rh(P)[o]._gsap),
                (e._ptLookup[o] = p = {}),
                Ja[l.id] && Ka.length && ch(),
                (_ = O === P ? o : O.indexOf(h)),
                c &&
                  !1 !== (d = new c()).init(h, f || n, e, _, O) &&
                  ((e._pt = a =
                    new rl(e._pt, h, d.name, 0, 1, d.render, d, 0, d.priority)),
                  d._props.forEach(function (t) {
                    p[t] = a;
                  }),
                  d.priority && (u = 1)),
                !c || f)
              )
                for (s in n)
                  Za[s] && (d = Nu(s, n, e, _, h, O))
                    ? d.priority && (u = 1)
                    : (p[s] = a =
                        Du.call(e, h, s, "get", n[s], _, O, 0, y.stringFilter));
              e._op && e._op[o] && e.kill(h, e._op[o]),
                R &&
                  e._pt &&
                  ((Iu = e),
                  na.killTweensOf(h, p, e.globalTime(i)),
                  (m = !e.parent),
                  (Iu = 0)),
                e._pt && x && (Ja[l.id] = 1);
            }
            u && il(e), e._onInit && e._onInit(e);
          }
          (e._onUpdate = w),
            (e._initted = (!e._op || e._pt) && !m),
            S && i <= 0 && I.render(_a, !0, !0);
        },
        Uu = function (t, e, i, r) {
          var n,
            o,
            s = e.ease || r || "power1.inOut";
          if (Oa(e))
            (o = i[t] || (i[t] = [])),
              e.forEach(function (t, i) {
                return o.push({ t: (i / (e.length - 1)) * 100, v: t, e: s });
              });
          else
            for (n in e)
              (o = i[n] || (i[n] = [])),
                "ease" === n || o.push({ t: parseFloat(t), v: e[n], e: s });
        },
        Gu = function (t, e, i, r, n) {
          return Ta(t)
            ? t.call(e, i, r, n)
            : wa(t) && ~t.indexOf("random(")
            ? eu(t)
            : t;
        },
        Vu = ih + "repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",
        ju = {};
      sh(Vu + ",id,stagger,delay,duration,paused,scrollTrigger", function (t) {
        return (ju[t] = 1);
      });
      var zu = (function (t) {
        function e(e, i, r, n) {
          var o;
          "number" == typeof i && ((r.duration = i), (i = r), (r = null));
          var s,
            a,
            h,
            u,
            l,
            c,
            d,
            p,
            _ = (o = t.call(this, n ? i : vh(i)) || this).vars,
            f = _.duration,
            m = _.delay,
            y = _.immediateRender,
            g = _.stagger,
            v = _.overwrite,
            b = _.keyframes,
            x = _.defaults,
            w = _.scrollTrigger,
            T = _.yoyoEase,
            A = i.parent || na,
            S = (Oa(e) || Ba(e) ? Aa(e[0]) : "length" in i) ? [e] : Wh(e);
          if (
            ((o._targets = S.length
              ? rh(S)
              : za(
                  "GSAP target " + e + " not found. https://gsap.com",
                  !da.nullTargetWarn
                ) || []),
            (o._ptLookup = []),
            (o._overwrite = v),
            b || g || Pa(f) || Pa(m))
          ) {
            if (
              ((i = o.vars),
              (s = o.timeline =
                new Ru({
                  data: "nested",
                  defaults: x || {},
                  targets: A && "nested" === A.data ? A.vars.targets : S,
                })).kill(),
              (s.parent = s._dp = Qs(o)),
              (s._start = 0),
              g || Pa(f) || Pa(m))
            ) {
              if (((u = S.length), (d = g && Kh(g)), Ea(g)))
                for (l in g) ~Vu.indexOf(l) && (p || (p = {}), (p[l] = g[l]));
              for (a = 0; a < u; a++)
                ((h = gh(i, ju)).stagger = 0),
                  T && (h.yoyoEase = T),
                  p && mh(h, p),
                  (c = S[a]),
                  (h.duration = +Gu(f, Qs(o), a, c, S)),
                  (h.delay = (+Gu(m, Qs(o), a, c, S) || 0) - o._delay),
                  !g &&
                    1 === u &&
                    h.delay &&
                    ((o._delay = m = h.delay), (o._start += m), (h.delay = 0)),
                  s.to(c, h, d ? d(a, c, S) : 0),
                  (s._ease = vu.none);
              s.duration() ? (f = m = 0) : (o.timeline = 0);
            } else if (b) {
              vh(fh(s.vars.defaults, { ease: "none" })),
                (s._ease = Su(b.ease || i.ease || "none"));
              var E,
                C,
                M,
                P = 0;
              if (Oa(b))
                b.forEach(function (t) {
                  return s.to(S, t, ">");
                }),
                  s.duration();
              else {
                for (l in ((h = {}), b))
                  "ease" === l ||
                    "easeEach" === l ||
                    Uu(l, b[l], h, b.easeEach);
                for (l in h)
                  for (
                    E = h[l].sort(function (t, e) {
                      return t.t - e.t;
                    }),
                      P = 0,
                      a = 0;
                    a < E.length;
                    a++
                  )
                    ((M = {
                      ease: (C = E[a]).e,
                      duration: ((C.t - (a ? E[a - 1].t : 0)) / 100) * f,
                    })[l] = C.v),
                      s.to(S, M, P),
                      (P += M.duration);
                s.duration() < f && s.to({}, { duration: f - s.duration() });
              }
            }
            f || o.duration((f = s.duration()));
          } else o.timeline = 0;
          return (
            !0 !== v || ea || ((Iu = Qs(o)), na.killTweensOf(S), (Iu = 0)),
            Rh(A, Qs(o), r),
            i.reversed && o.reverse(),
            i.paused && o.paused(!0),
            (y ||
              (!f &&
                !b &&
                o._start === hh(A._time) &&
                Ca(y) &&
                Sh(Qs(o)) &&
                "nested" !== A.data)) &&
              ((o._tTime = -1e-8), o.render(Math.max(0, -m) || 0)),
            w && Ih(Qs(o), w),
            o
          );
        }
        ta(e, t);
        var i = e.prototype;
        return (
          (i.render = function (t, e, i) {
            var r,
              n,
              o,
              s,
              a,
              h,
              u,
              l,
              c,
              d = this._time,
              p = this._tDur,
              _ = this._dur,
              f = t < 0,
              m = t > p - fa && !f ? p : t < fa ? 0 : t;
            if (_) {
              if (
                m !== this._tTime ||
                !t ||
                i ||
                (!this._initted && this._tTime) ||
                (this._startAt && this._zTime < 0 !== f)
              ) {
                if (((r = m), (l = this.timeline), this._repeat)) {
                  if (((s = _ + this._rDelay), this._repeat < -1 && f))
                    return this.totalTime(100 * s + t, e, i);
                  if (
                    ((r = hh(m % s)),
                    m === p
                      ? ((o = this._repeat), (r = _))
                      : ((o = ~~(m / s)) && o === hh(m / s) && ((r = _), o--),
                        r > _ && (r = _)),
                    (h = this._yoyo && 1 & o) &&
                      ((c = this._yEase), (r = _ - r)),
                    (a = Ch(this._tTime, s)),
                    r === d && !i && this._initted && o === a)
                  )
                    return (this._tTime = m), this;
                  o !== a &&
                    (l && this._yEase && Au(l, h),
                    this.vars.repeatRefresh &&
                      !h &&
                      !this._lock &&
                      this._time !== s &&
                      this._initted &&
                      ((this._lock = i = 1),
                      (this.render(hh(s * o), !0).invalidate()._lock = 0)));
                }
                if (!this._initted) {
                  if (kh(this, f ? t : r, i, e, m))
                    return (this._tTime = 0), this;
                  if (
                    !(
                      d === this._time ||
                      (i && this.vars.repeatRefresh && o !== a)
                    )
                  )
                    return this;
                  if (_ !== this._dur) return this.render(t, e, i);
                }
                if (
                  ((this._tTime = m),
                  (this._time = r),
                  !this._act && this._ts && ((this._act = 1), (this._lazy = 0)),
                  (this.ratio = u = (c || this._ease)(r / _)),
                  this._from && (this.ratio = u = 1 - u),
                  r &&
                    !d &&
                    !e &&
                    !o &&
                    (nu(this, "onStart"), this._tTime !== m))
                )
                  return this;
                for (n = this._pt; n; ) n.r(u, n.d), (n = n._next);
                (l &&
                  l.render(
                    t < 0 ? t : l._dur * l._ease(r / this._dur),
                    e,
                    i
                  )) ||
                  (this._startAt && (this._zTime = t)),
                  this._onUpdate &&
                    !e &&
                    (f && Ah(this, t, 0, i), nu(this, "onUpdate")),
                  this._repeat &&
                    o !== a &&
                    this.vars.onRepeat &&
                    !e &&
                    this.parent &&
                    nu(this, "onRepeat"),
                  (m !== this._tDur && m) ||
                    this._tTime !== m ||
                    (f && !this._onUpdate && Ah(this, t, 0, !0),
                    (t || !_) &&
                      ((m === this._tDur && this._ts > 0) ||
                        (!m && this._ts < 0)) &&
                      wh(this, 1),
                    e ||
                      (f && !d) ||
                      !(m || d || h) ||
                      (nu(
                        this,
                        m === p ? "onComplete" : "onReverseComplete",
                        !0
                      ),
                      this._prom &&
                        !(m < p && this.timeScale() > 0) &&
                        this._prom()));
              }
            } else
              !(function (t, e, i, r) {
                var n,
                  o,
                  s,
                  a = t.ratio,
                  h =
                    e < 0 ||
                    (!e &&
                      ((!t._start && Fh(t) && (t._initted || !Dh(t))) ||
                        ((t._ts < 0 || t._dp._ts < 0) && !Dh(t))))
                      ? 0
                      : 1,
                  u = t._rDelay,
                  l = 0;
                if (
                  (u &&
                    t._repeat &&
                    ((l = zh(0, t._tDur, e)),
                    (o = Ch(l, u)),
                    t._yoyo && 1 & o && (h = 1 - h),
                    o !== Ch(t._tTime, u) &&
                      ((a = 1 - h),
                      t.vars.repeatRefresh && t._initted && t.invalidate())),
                  h !== a || ia || r || t._zTime === fa || (!e && t._zTime))
                ) {
                  if (!t._initted && kh(t, e, r, i, l)) return;
                  for (
                    s = t._zTime,
                      t._zTime = e || (i ? fa : 0),
                      i || (i = e && !s),
                      t.ratio = h,
                      t._from && (h = 1 - h),
                      t._time = 0,
                      t._tTime = l,
                      n = t._pt;
                    n;

                  )
                    n.r(h, n.d), (n = n._next);
                  e < 0 && Ah(t, e, 0, !0),
                    t._onUpdate && !i && nu(t, "onUpdate"),
                    l && t._repeat && !i && t.parent && nu(t, "onRepeat"),
                    (e >= t._tDur || e < 0) &&
                      t.ratio === h &&
                      (h && wh(t, 1),
                      i ||
                        ia ||
                        (nu(t, h ? "onComplete" : "onReverseComplete", !0),
                        t._prom && t._prom()));
                } else t._zTime || (t._zTime = e);
              })(this, t, e, i);
            return this;
          }),
          (i.targets = function () {
            return this._targets;
          }),
          (i.invalidate = function (e) {
            return (
              (!e || !this.vars.runBackwards) && (this._startAt = 0),
              (this._pt =
                this._op =
                this._onUpdate =
                this._lazy =
                this.ratio =
                  0),
              (this._ptLookup = []),
              this.timeline && this.timeline.invalidate(e),
              t.prototype.invalidate.call(this, e)
            );
          }),
          (i.resetTo = function (t, e, i, r, n) {
            ca || yu.wake(), this._ts || this.play();
            var o = Math.min(
              this._dur,
              (this._dp._time - this._start) * this._ts
            );
            return (
              this._initted || Lu(this, o),
              (function (t, e, i, r, n, o, s, a) {
                var h,
                  u,
                  l,
                  c,
                  d = ((t._pt && t._ptCache) || (t._ptCache = {}))[e];
                if (!d)
                  for (
                    d = t._ptCache[e] = [],
                      l = t._ptLookup,
                      c = t._targets.length;
                    c--;

                  ) {
                    if ((h = l[c][e]) && h.d && h.d._pt)
                      for (h = h.d._pt; h && h.p !== e && h.fp !== e; )
                        h = h._next;
                    if (!h)
                      return (
                        (ku = 1),
                        (t.vars[e] = "+=0"),
                        Lu(t, s),
                        (ku = 0),
                        a ? za(e + " not eligible for reset") : 1
                      );
                    d.push(h);
                  }
                for (c = d.length; c--; )
                  ((h = (u = d[c])._pt || u).s =
                    (!r && 0 !== r) || n ? h.s + (r || 0) + o * h.c : r),
                    (h.c = i - h.s),
                    u.e && (u.e = ah(i) + Xh(u.e)),
                    u.b && (u.b = h.s + Xh(u.b));
              })(this, t, e, i, r, this._ease(o / this._dur), o, n)
                ? this.resetTo(t, e, i, r, 1)
                : (Bh(this, 0),
                  this.parent ||
                    bh(
                      this._dp,
                      this,
                      "_first",
                      "_last",
                      this._dp._sort ? "_start" : 0
                    ),
                  this.render(0))
            );
          }),
          (i.kill = function (t, e) {
            if ((void 0 === e && (e = "all"), !(t || (e && "all" !== e))))
              return (this._lazy = this._pt = 0), this.parent ? ou(this) : this;
            if (this.timeline) {
              var i = this.timeline.totalDuration();
              return (
                this.timeline.killTweensOf(t, e, Iu && !0 !== Iu.vars.overwrite)
                  ._first || ou(this),
                this.parent &&
                  i !== this.timeline.totalDuration() &&
                  Nh(this, (this._dur * this.timeline._tDur) / i, 0, 1),
                this
              );
            }
            var r,
              n,
              o,
              s,
              a,
              h,
              u,
              l = this._targets,
              c = t ? Wh(t) : l,
              d = this._ptLookup,
              p = this._pt;
            if (
              (!e || "all" === e) &&
              (function (t, e) {
                for (
                  var i = t.length, r = i === e.length;
                  r && i-- && t[i] === e[i];

                );
                return i < 0;
              })(l, c)
            )
              return "all" === e && (this._pt = 0), ou(this);
            for (
              r = this._op = this._op || [],
                "all" !== e &&
                  (wa(e) &&
                    ((a = {}),
                    sh(e, function (t) {
                      return (a[t] = 1);
                    }),
                    (e = a)),
                  (e = (function (t, e) {
                    var i,
                      r,
                      n,
                      o,
                      s = t[0] ? nh(t[0]).harness : 0,
                      a = s && s.aliases;
                    if (!a) return e;
                    for (r in ((i = mh({}, e)), a))
                      if ((r in i))
                        for (n = (o = a[r].split(",")).length; n--; )
                          i[o[n]] = i[r];
                    return i;
                  })(l, e))),
                u = l.length;
              u--;

            )
              if (~c.indexOf(l[u]))
                for (a in ((n = d[u]),
                "all" === e
                  ? ((r[u] = e), (s = n), (o = {}))
                  : ((o = r[u] = r[u] || {}), (s = e)),
                s))
                  (h = n && n[a]) &&
                    (("kill" in h.d && !0 !== h.d.kill(a)) ||
                      xh(this, h, "_pt"),
                    delete n[a]),
                    "all" !== o && (o[a] = 1);
            return this._initted && !this._pt && p && ou(this), this;
          }),
          (e.to = function (t, i) {
            return new e(t, i, arguments[2]);
          }),
          (e.from = function (t, e) {
            return Vh(1, arguments);
          }),
          (e.delayedCall = function (t, i, r, n) {
            return new e(i, 0, {
              immediateRender: !1,
              lazy: !1,
              overwrite: !1,
              delay: t,
              onComplete: i,
              onReverseComplete: i,
              onCompleteParams: r,
              onReverseCompleteParams: r,
              callbackScope: n,
            });
          }),
          (e.fromTo = function (t, e, i) {
            return Vh(2, arguments);
          }),
          (e.set = function (t, i) {
            return (
              (i.duration = 0), i.repeatDelay || (i.repeat = 0), new e(t, i)
            );
          }),
          (e.killTweensOf = function (t, e, i) {
            return na.killTweensOf(t, e, i);
          }),
          e
        );
      })(Ou);
      fh(zu.prototype, {
        _targets: [],
        _lazy: 0,
        _startAt: 0,
        _op: 0,
        _onInit: 0,
      }),
        sh("staggerTo,staggerFrom,staggerFromTo", function (t) {
          zu[t] = function () {
            var e = new Ru(),
              i = Hh.call(arguments, 0);
            return (
              i.splice("staggerFromTo" === t ? 5 : 4, 0, 0), e[t].apply(e, i)
            );
          };
        });
      var Xu = function (t, e, i) {
          return (t[e] = i);
        },
        Hu = function (t, e, i) {
          return t[e](i);
        },
        Yu = function (t, e, i, r) {
          return t[e](r.fp, i);
        },
        Wu = function (t, e, i) {
          return t.setAttribute(e, i);
        },
        qu = function (t, e) {
          return Ta(t[e]) ? Hu : Sa(t[e]) && t.setAttribute ? Wu : Xu;
        },
        $u = function (t, e) {
          return e.set(e.t, e.p, Math.round(1e6 * (e.s + e.c * t)) / 1e6, e);
        },
        Ku = function (t, e) {
          return e.set(e.t, e.p, !!(e.s + e.c * t), e);
        },
        Ju = function (t, e) {
          var i = e._pt,
            r = "";
          if (!t && e.b) r = e.b;
          else if (1 === t && e.e) r = e.e;
          else {
            for (; i; )
              (r =
                i.p +
                (i.m
                  ? i.m(i.s + i.c * t)
                  : Math.round(1e4 * (i.s + i.c * t)) / 1e4) +
                r),
                (i = i._next);
            r += e.c;
          }
          e.set(e.t, e.p, r, e);
        },
        Zu = function (t, e) {
          for (var i = e._pt; i; ) i.r(t, i.d), (i = i._next);
        },
        Qu = function (t, e, i, r) {
          for (var n, o = this._pt; o; )
            (n = o._next), o.p === r && o.modifier(t, e, i), (o = n);
        },
        tl = function (t) {
          for (var e, i, r = this._pt; r; )
            (i = r._next),
              (r.p === t && !r.op) || r.op === t
                ? xh(this, r, "_pt")
                : r.dep || (e = 1),
              (r = i);
          return !e;
        },
        el = function (t, e, i, r) {
          r.mSet(t, e, r.m.call(r.tween, i, r.mt), r);
        },
        il = function (t) {
          for (var e, i, r, n, o = t._pt; o; ) {
            for (e = o._next, i = r; i && i.pr > o.pr; ) i = i._next;
            (o._prev = i ? i._prev : n) ? (o._prev._next = o) : (r = o),
              (o._next = i) ? (i._prev = o) : (n = o),
              (o = e);
          }
          t._pt = r;
        },
        rl = (function () {
          function t(t, e, i, r, n, o, s, a, h) {
            (this.t = e),
              (this.s = r),
              (this.c = n),
              (this.p = i),
              (this.r = o || $u),
              (this.d = s || this),
              (this.set = a || Xu),
              (this.pr = h || 0),
              (this._next = t),
              t && (t._prev = this);
          }
          return (
            (t.prototype.modifier = function (t, e, i) {
              (this.mSet = this.mSet || this.set),
                (this.set = el),
                (this.m = t),
                (this.mt = i),
                (this.tween = e);
            }),
            t
          );
        })();
      sh(
        ih +
          "parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",
        function (t) {
          return ($a[t] = 1);
        }
      ),
        (Ua.TweenMax = Ua.TweenLite = zu),
        (Ua.TimelineLite = Ua.TimelineMax = Ru),
        (na = new Ru({
          sortChildren: !1,
          defaults: pa,
          autoRemoveChildren: !0,
          id: "root",
          smoothChildTiming: !0,
        })),
        (da.stringFilter = mu);
      var nl = [],
        ol = {},
        sl = [],
        al = 0,
        hl = 0,
        ul = function (t) {
          return (ol[t] || sl).map(function (t) {
            return t();
          });
        },
        ll = function () {
          var t = Date.now(),
            e = [];
          t - al > 2 &&
            (ul("matchMediaInit"),
            nl.forEach(function (t) {
              var i,
                r,
                n,
                o,
                s = t.queries,
                a = t.conditions;
              for (r in s)
                (i = oa.matchMedia(s[r]).matches) && (n = 1),
                  i !== a[r] && ((a[r] = i), (o = 1));
              o && (t.revert(), n && e.push(t));
            }),
            ul("matchMediaRevert"),
            e.forEach(function (t) {
              return t.onMatch(t, function (e) {
                return t.add(null, e);
              });
            }),
            (al = t),
            ul("matchMedia"));
        },
        cl = (function () {
          function t(t, e) {
            (this.selector = e && qh(e)),
              (this.data = []),
              (this._r = []),
              (this.isReverted = !1),
              (this.id = hl++),
              t && this.add(t);
          }
          var e = t.prototype;
          return (
            (e.add = function (t, e, i) {
              Ta(t) && ((i = e), (e = t), (t = Ta));
              var r = this,
                n = function () {
                  var t,
                    n = ra,
                    o = r.selector;
                  return (
                    n && n !== r && n.data.push(r),
                    i && (r.selector = qh(i)),
                    (ra = r),
                    (t = e.apply(r, arguments)),
                    Ta(t) && r._r.push(t),
                    (ra = n),
                    (r.selector = o),
                    (r.isReverted = !1),
                    t
                  );
                };
              return (
                (r.last = n),
                t === Ta
                  ? n(r, function (t) {
                      return r.add(null, t);
                    })
                  : t
                  ? (r[t] = n)
                  : n
              );
            }),
            (e.ignore = function (t) {
              var e = ra;
              (ra = null), t(this), (ra = e);
            }),
            (e.getTweens = function () {
              var e = [];
              return (
                this.data.forEach(function (i) {
                  return i instanceof t
                    ? e.push.apply(e, i.getTweens())
                    : i instanceof zu &&
                        !(i.parent && "nested" === i.parent.data) &&
                        e.push(i);
                }),
                e
              );
            }),
            (e.clear = function () {
              this._r.length = this.data.length = 0;
            }),
            (e.kill = function (t, e) {
              var i = this;
              if (
                (t
                  ? (function () {
                      for (var e, r = i.getTweens(), n = i.data.length; n--; )
                        "isFlip" === (e = i.data[n]).data &&
                          (e.revert(),
                          e.getChildren(!0, !0, !1).forEach(function (t) {
                            return r.splice(r.indexOf(t), 1);
                          }));
                      for (
                        r
                          .map(function (t) {
                            return {
                              g:
                                t._dur ||
                                t._delay ||
                                (t._sat && !t._sat.vars.immediateRender)
                                  ? t.globalTime(0)
                                  : -1 / 0,
                              t,
                            };
                          })
                          .sort(function (t, e) {
                            return e.g - t.g || -1 / 0;
                          })
                          .forEach(function (e) {
                            return e.t.revert(t);
                          }),
                          n = i.data.length;
                        n--;

                      )
                        (e = i.data[n]) instanceof Ru
                          ? "nested" !== e.data &&
                            (e.scrollTrigger && e.scrollTrigger.revert(),
                            e.kill())
                          : !(e instanceof zu) && e.revert && e.revert(t);
                      i._r.forEach(function (e) {
                        return e(t, i);
                      }),
                        (i.isReverted = !0);
                    })()
                  : this.data.forEach(function (t) {
                      return t.kill && t.kill();
                    }),
                this.clear(),
                e)
              )
                for (var r = nl.length; r--; )
                  nl[r].id === this.id && nl.splice(r, 1);
            }),
            (e.revert = function (t) {
              this.kill(t || {});
            }),
            t
          );
        })(),
        dl = (function () {
          function t(t) {
            (this.contexts = []), (this.scope = t), ra && ra.data.push(this);
          }
          var e = t.prototype;
          return (
            (e.add = function (t, e, i) {
              Ea(t) || (t = { matches: t });
              var r,
                n,
                o,
                s = new cl(0, i || this.scope),
                a = (s.conditions = {});
              for (n in (ra && !s.selector && (s.selector = ra.selector),
              this.contexts.push(s),
              (e = s.add("onMatch", e)),
              (s.queries = t),
              t))
                "all" === n
                  ? (o = 1)
                  : (r = oa.matchMedia(t[n])) &&
                    (nl.indexOf(s) < 0 && nl.push(s),
                    (a[n] = r.matches) && (o = 1),
                    r.addListener
                      ? r.addListener(ll)
                      : r.addEventListener("change", ll));
              return (
                o &&
                  e(s, function (t) {
                    return s.add(null, t);
                  }),
                this
              );
            }),
            (e.revert = function (t) {
              this.kill(t || {});
            }),
            (e.kill = function (t) {
              this.contexts.forEach(function (e) {
                return e.kill(t, !0);
              });
            }),
            t
          );
        })(),
        pl = {
          registerPlugin: function () {
            for (var t = arguments.length, e = new Array(t), i = 0; i < t; i++)
              e[i] = arguments[i];
            e.forEach(function (t) {
              return au(t);
            });
          },
          timeline: function (t) {
            return new Ru(t);
          },
          getTweensOf: function (t, e) {
            return na.getTweensOf(t, e);
          },
          getProperty: function (t, e, i, r) {
            wa(t) && (t = Wh(t)[0]);
            var n = nh(t || {}).get,
              o = i ? _h : ph;
            return (
              "native" === i && (i = ""),
              t
                ? e
                  ? o(((Za[e] && Za[e].get) || n)(t, e, i, r))
                  : function (e, i, r) {
                      return o(((Za[e] && Za[e].get) || n)(t, e, i, r));
                    }
                : t
            );
          },
          quickSetter: function (t, e, i) {
            if ((t = Wh(t)).length > 1) {
              var r = t.map(function (t) {
                  return ml.quickSetter(t, e, i);
                }),
                n = r.length;
              return function (t) {
                for (var e = n; e--; ) r[e](t);
              };
            }
            t = t[0] || {};
            var o = Za[e],
              s = nh(t),
              a = (s.harness && (s.harness.aliases || {})[e]) || e,
              h = o
                ? function (e) {
                    var r = new o();
                    (la._pt = 0),
                      r.init(t, i ? e + i : e, la, 0, [t]),
                      r.render(1, r),
                      la._pt && Zu(1, la);
                  }
                : s.set(t, a);
            return o
              ? h
              : function (e) {
                  return h(t, a, i ? e + i : e, s, 1);
                };
          },
          quickTo: function (t, e, i) {
            var r,
              n = ml.to(
                t,
                mh((((r = {})[e] = "+=0.1"), (r.paused = !0), r), i || {})
              ),
              o = function (t, i, r) {
                return n.resetTo(e, t, i, r);
              };
            return (o.tween = n), o;
          },
          isTweening: function (t) {
            return na.getTweensOf(t, !0).length > 0;
          },
          defaults: function (t) {
            return (
              t && t.ease && (t.ease = Su(t.ease, pa.ease)), yh(pa, t || {})
            );
          },
          config: function (t) {
            return yh(da, t || {});
          },
          registerEffect: function (t) {
            var e = t.name,
              i = t.effect,
              r = t.plugins,
              n = t.defaults,
              o = t.extendTimeline;
            (r || "").split(",").forEach(function (t) {
              return (
                t &&
                !Za[t] &&
                !Ua[t] &&
                za(e + " effect requires " + t + " plugin.")
              );
            }),
              (Qa[e] = function (t, e, r) {
                return i(Wh(t), fh(e || {}, n), r);
              }),
              o &&
                (Ru.prototype[e] = function (t, i, r) {
                  return this.add(Qa[e](t, Ea(i) ? i : (r = i) && {}, this), r);
                });
          },
          registerEase: function (t, e) {
            vu[t] = Su(e);
          },
          parseEase: function (t, e) {
            return arguments.length ? Su(t, e) : vu;
          },
          getById: function (t) {
            return na.getById(t);
          },
          exportRoot: function (t, e) {
            void 0 === t && (t = {});
            var i,
              r,
              n = new Ru(t);
            for (
              n.smoothChildTiming = Ca(t.smoothChildTiming),
                na.remove(n),
                n._dp = 0,
                n._time = n._tTime = na._time,
                i = na._first;
              i;

            )
              (r = i._next),
                (!e &&
                  !i._dur &&
                  i instanceof zu &&
                  i.vars.onComplete === i._targets[0]) ||
                  Rh(n, i, i._start - i._delay),
                (i = r);
            return Rh(na, n, 0), n;
          },
          context: function (t, e) {
            return t ? new cl(t, e) : ra;
          },
          matchMedia: function (t) {
            return new dl(t);
          },
          matchMediaRefresh: function () {
            return (
              nl.forEach(function (t) {
                var e,
                  i,
                  r = t.conditions;
                for (i in r) r[i] && ((r[i] = !1), (e = 1));
                e && t.revert();
              }) || ll()
            );
          },
          addEventListener: function (t, e) {
            var i = ol[t] || (ol[t] = []);
            ~i.indexOf(e) || i.push(e);
          },
          removeEventListener: function (t, e) {
            var i = ol[t],
              r = i && i.indexOf(e);
            r >= 0 && i.splice(r, 1);
          },
          utils: {
            wrap: function t(e, i, r) {
              var n = i - e;
              return Oa(e)
                ? tu(e, t(0, e.length), i)
                : jh(r, function (t) {
                    return ((n + ((t - e) % n)) % n) + e;
                  });
            },
            wrapYoyo: function t(e, i, r) {
              var n = i - e,
                o = 2 * n;
              return Oa(e)
                ? tu(e, t(0, e.length - 1), i)
                : jh(r, function (t) {
                    return (
                      e + ((t = (o + ((t - e) % o)) % o || 0) > n ? o - t : t)
                    );
                  });
            },
            distribute: Kh,
            random: Qh,
            snap: Zh,
            normalize: function (t, e, i) {
              return iu(t, e, 0, 1, i);
            },
            getUnit: Xh,
            clamp: function (t, e, i) {
              return jh(i, function (i) {
                return zh(t, e, i);
              });
            },
            splitColor: cu,
            toArray: Wh,
            selector: qh,
            mapRange: iu,
            pipe: function () {
              for (
                var t = arguments.length, e = new Array(t), i = 0;
                i < t;
                i++
              )
                e[i] = arguments[i];
              return function (t) {
                return e.reduce(function (t, e) {
                  return e(t);
                }, t);
              };
            },
            unitize: function (t, e) {
              return function (i) {
                return t(parseFloat(i)) + (e || Xh(i));
              };
            },
            interpolate: function t(e, i, r, n) {
              var o = isNaN(e + i)
                ? 0
                : function (t) {
                    return (1 - t) * e + t * i;
                  };
              if (!o) {
                var s,
                  a,
                  h,
                  u,
                  l,
                  c = wa(e),
                  d = {};
                if ((!0 === r && (n = 1) && (r = null), c))
                  (e = { p: e }), (i = { p: i });
                else if (Oa(e) && !Oa(i)) {
                  for (h = [], u = e.length, l = u - 2, a = 1; a < u; a++)
                    h.push(t(e[a - 1], e[a]));
                  u--,
                    (o = function (t) {
                      t *= u;
                      var e = Math.min(l, ~~t);
                      return h[e](t - e);
                    }),
                    (r = i);
                } else n || (e = mh(Oa(e) ? [] : {}, e));
                if (!h) {
                  for (s in i) Du.call(d, e, s, "get", i[s]);
                  o = function (t) {
                    return Zu(t, d) || (c ? e.p : e);
                  };
                }
              }
              return jh(r, o);
            },
            shuffle: $h,
          },
          install: Va,
          effects: Qa,
          ticker: yu,
          updateRoot: Ru.updateRoot,
          plugins: Za,
          globalTimeline: na,
          core: {
            PropTween: rl,
            globals: Xa,
            Tween: zu,
            Timeline: Ru,
            Animation: Ou,
            getCache: nh,
            _removeLinkedListItem: xh,
            reverting: function () {
              return ia;
            },
            context: function (t) {
              return t && ra && (ra.data.push(t), (t._ctx = ra)), ra;
            },
            suppressOverwrites: function (t) {
              return (ea = t);
            },
          },
        };
      sh("to,from,fromTo,delayedCall,set,killTweensOf", function (t) {
        return (pl[t] = zu[t]);
      }),
        yu.add(Ru.updateRoot),
        (la = pl.to({}, { duration: 0 }));
      var _l = function (t, e) {
          for (var i = t._pt; i && i.p !== e && i.op !== e && i.fp !== e; )
            i = i._next;
          return i;
        },
        fl = function (t, e) {
          return {
            name: t,
            rawVars: 1,
            init: function (t, i, r) {
              r._onInit = function (t) {
                var r, n;
                if (
                  (wa(i) &&
                    ((r = {}),
                    sh(i, function (t) {
                      return (r[t] = 1);
                    }),
                    (i = r)),
                  e)
                ) {
                  for (n in ((r = {}), i)) r[n] = e(i[n]);
                  i = r;
                }
                !(function (t, e) {
                  var i,
                    r,
                    n,
                    o = t._targets;
                  for (i in e)
                    for (r = o.length; r--; )
                      (n = t._ptLookup[r][i]) &&
                        (n = n.d) &&
                        (n._pt && (n = _l(n, i)),
                        n && n.modifier && n.modifier(e[i], t, o[r], i));
                })(t, i);
              };
            },
          };
        },
        ml =
          pl.registerPlugin(
            {
              name: "attr",
              init: function (t, e, i, r, n) {
                var o, s, a;
                for (o in ((this.tween = i), e))
                  (a = t.getAttribute(o) || ""),
                    ((s = this.add(
                      t,
                      "setAttribute",
                      (a || 0) + "",
                      e[o],
                      r,
                      n,
                      0,
                      0,
                      o
                    )).op = o),
                    (s.b = a),
                    this._props.push(o);
              },
              render: function (t, e) {
                for (var i = e._pt; i; )
                  ia ? i.set(i.t, i.p, i.b, i) : i.r(t, i.d), (i = i._next);
              },
            },
            {
              name: "endArray",
              init: function (t, e) {
                for (var i = e.length; i--; )
                  this.add(t, i, t[i] || 0, e[i], 0, 0, 0, 0, 0, 1);
              },
            },
            fl("roundProps", Jh),
            fl("modifiers"),
            fl("snap", Zh)
          ) || pl;
      (zu.version = Ru.version = ml.version = "3.12.5"),
        (ha = 1),
        Ma() && gu(),
        vu.Power0,
        vu.Power1,
        vu.Power2,
        vu.Power3,
        vu.Power4,
        vu.Linear,
        vu.Quad,
        vu.Cubic,
        vu.Quart,
        vu.Quint,
        vu.Strong,
        vu.Elastic,
        vu.Back,
        vu.SteppedEase,
        vu.Bounce,
        vu.Sine,
        vu.Expo,
        vu.Circ;
      var yl,
        gl,
        vl,
        bl,
        xl,
        wl,
        Tl,
        Al,
        Sl = {},
        El = 180 / Math.PI,
        Cl = Math.PI / 180,
        Ml = Math.atan2,
        Pl = /([A-Z])/g,
        Bl = /(left|right|width|margin|padding|x)/i,
        Ol = /[\s,\(]\S/,
        Rl = {
          autoAlpha: "opacity,visibility",
          scale: "scaleX,scaleY",
          alpha: "opacity",
        },
        Il = function (t, e) {
          return e.set(
            e.t,
            e.p,
            Math.round(1e4 * (e.s + e.c * t)) / 1e4 + e.u,
            e
          );
        },
        kl = function (t, e) {
          return e.set(
            e.t,
            e.p,
            1 === t ? e.e : Math.round(1e4 * (e.s + e.c * t)) / 1e4 + e.u,
            e
          );
        },
        Fl = function (t, e) {
          return e.set(
            e.t,
            e.p,
            t ? Math.round(1e4 * (e.s + e.c * t)) / 1e4 + e.u : e.b,
            e
          );
        },
        Dl = function (t, e) {
          var i = e.s + e.c * t;
          e.set(e.t, e.p, ~~(i + (i < 0 ? -0.5 : 0.5)) + e.u, e);
        },
        Nl = function (t, e) {
          return e.set(e.t, e.p, t ? e.e : e.b, e);
        },
        Ll = function (t, e) {
          return e.set(e.t, e.p, 1 !== t ? e.b : e.e, e);
        },
        Ul = function (t, e, i) {
          return (t.style[e] = i);
        },
        Gl = function (t, e, i) {
          return t.style.setProperty(e, i);
        },
        Vl = function (t, e, i) {
          return (t._gsap[e] = i);
        },
        jl = function (t, e, i) {
          return (t._gsap.scaleX = t._gsap.scaleY = i);
        },
        zl = function (t, e, i, r, n) {
          var o = t._gsap;
          (o.scaleX = o.scaleY = i), o.renderTransform(n, o);
        },
        Xl = function (t, e, i, r, n) {
          var o = t._gsap;
          (o[e] = i), o.renderTransform(n, o);
        },
        Hl = "transform",
        Yl = Hl + "Origin",
        Wl = function t(e, i) {
          var r = this,
            n = this.target,
            o = n.style,
            s = n._gsap;
          if (e in Sl && o) {
            if (((this.tfm = this.tfm || {}), "transform" === e))
              return Rl.transform.split(",").forEach(function (e) {
                return t.call(r, e, i);
              });
            if (
              (~(e = Rl[e] || e).indexOf(",")
                ? e.split(",").forEach(function (t) {
                    return (r.tfm[t] = cc(n, t));
                  })
                : (this.tfm[e] = s.x ? s[e] : cc(n, e)),
              e === Yl && (this.tfm.zOrigin = s.zOrigin),
              this.props.indexOf(Hl) >= 0)
            )
              return;
            s.svg &&
              ((this.svgo = n.getAttribute("data-svg-origin")),
              this.props.push(Yl, i, "")),
              (e = Hl);
          }
          (o || i) && this.props.push(e, i, o[e]);
        },
        ql = function (t) {
          t.translate &&
            (t.removeProperty("translate"),
            t.removeProperty("scale"),
            t.removeProperty("rotate"));
        },
        $l = function () {
          var t,
            e,
            i = this.props,
            r = this.target,
            n = r.style,
            o = r._gsap;
          for (t = 0; t < i.length; t += 3)
            i[t + 1]
              ? (r[i[t]] = i[t + 2])
              : i[t + 2]
              ? (n[i[t]] = i[t + 2])
              : n.removeProperty(
                  "--" === i[t].substr(0, 2)
                    ? i[t]
                    : i[t].replace(Pl, "-$1").toLowerCase()
                );
          if (this.tfm) {
            for (e in this.tfm) o[e] = this.tfm[e];
            o.svg &&
              (o.renderTransform(),
              r.setAttribute("data-svg-origin", this.svgo || "")),
              ((t = Tl()) && t.isStart) ||
                n[Hl] ||
                (ql(n),
                o.zOrigin &&
                  n[Yl] &&
                  ((n[Yl] += " " + o.zOrigin + "px"),
                  (o.zOrigin = 0),
                  o.renderTransform()),
                (o.uncache = 1));
          }
        },
        Kl = function (t, e) {
          var i = { target: t, props: [], revert: $l, save: Wl };
          return (
            t._gsap || ml.core.getCache(t),
            e &&
              e.split(",").forEach(function (t) {
                return i.save(t);
              }),
            i
          );
        },
        Jl = function (t, e) {
          var i = gl.createElementNS
            ? gl.createElementNS(
                (e || "http://www.w3.org/1999/xhtml").replace(/^https/, "http"),
                t
              )
            : gl.createElement(t);
          return i && i.style ? i : gl.createElement(t);
        },
        Zl = function t(e, i, r) {
          var n = getComputedStyle(e);
          return (
            n[i] ||
            n.getPropertyValue(i.replace(Pl, "-$1").toLowerCase()) ||
            n.getPropertyValue(i) ||
            (!r && t(e, tc(i) || i, 1)) ||
            ""
          );
        },
        Ql = "O,Moz,ms,Ms,Webkit".split(","),
        tc = function (t, e, i) {
          var r = (e || xl).style,
            n = 5;
          if (t in r && !i) return t;
          for (
            t = t.charAt(0).toUpperCase() + t.substr(1);
            n-- && !(Ql[n] + t in r);

          );
          return n < 0 ? null : (3 === n ? "ms" : n >= 0 ? Ql[n] : "") + t;
        },
        ec = function () {
          "undefined" != typeof window &&
            window.document &&
            ((yl = window),
            (gl = yl.document),
            (vl = gl.documentElement),
            (xl = Jl("div") || { style: {} }),
            Jl("div"),
            (Hl = tc(Hl)),
            (Yl = Hl + "Origin"),
            (xl.style.cssText =
              "border-width:0;line-height:0;position:absolute;padding:0"),
            (Al = !!tc("perspective")),
            (Tl = ml.core.reverting),
            (bl = 1));
        },
        ic = function t(e) {
          var i,
            r = Jl(
              "svg",
              (this.ownerSVGElement &&
                this.ownerSVGElement.getAttribute("xmlns")) ||
                "http://www.w3.org/2000/svg"
            ),
            n = this.parentNode,
            o = this.nextSibling,
            s = this.style.cssText;
          if (
            (vl.appendChild(r),
            r.appendChild(this),
            (this.style.display = "block"),
            e)
          )
            try {
              (i = this.getBBox()),
                (this._gsapBBox = this.getBBox),
                (this.getBBox = t);
            } catch (t) {}
          else this._gsapBBox && (i = this._gsapBBox());
          return (
            n && (o ? n.insertBefore(this, o) : n.appendChild(this)),
            vl.removeChild(r),
            (this.style.cssText = s),
            i
          );
        },
        rc = function (t, e) {
          for (var i = e.length; i--; )
            if (t.hasAttribute(e[i])) return t.getAttribute(e[i]);
        },
        nc = function (t) {
          var e;
          try {
            e = t.getBBox();
          } catch (i) {
            e = ic.call(t, !0);
          }
          return (
            (e && (e.width || e.height)) ||
              t.getBBox === ic ||
              (e = ic.call(t, !0)),
            !e || e.width || e.x || e.y
              ? e
              : {
                  x: +rc(t, ["x", "cx", "x1"]) || 0,
                  y: +rc(t, ["y", "cy", "y1"]) || 0,
                  width: 0,
                  height: 0,
                }
          );
        },
        oc = function (t) {
          return !(!t.getCTM || (t.parentNode && !t.ownerSVGElement) || !nc(t));
        },
        sc = function (t, e) {
          if (e) {
            var i,
              r = t.style;
            e in Sl && e !== Yl && (e = Hl),
              r.removeProperty
                ? (("ms" !== (i = e.substr(0, 2)) &&
                    "webkit" !== e.substr(0, 6)) ||
                    (e = "-" + e),
                  r.removeProperty(
                    "--" === i ? e : e.replace(Pl, "-$1").toLowerCase()
                  ))
                : r.removeAttribute(e);
          }
        },
        ac = function (t, e, i, r, n, o) {
          var s = new rl(t._pt, e, i, 0, 1, o ? Ll : Nl);
          return (t._pt = s), (s.b = r), (s.e = n), t._props.push(i), s;
        },
        hc = { deg: 1, rad: 1, turn: 1 },
        uc = { grid: 1, flex: 1 },
        lc = function t(e, i, r, n) {
          var o,
            s,
            a,
            h,
            u = parseFloat(r) || 0,
            l = (r + "").trim().substr((u + "").length) || "px",
            c = xl.style,
            d = Bl.test(i),
            p = "svg" === e.tagName.toLowerCase(),
            _ = (p ? "client" : "offset") + (d ? "Width" : "Height"),
            f = 100,
            m = "px" === n,
            y = "%" === n;
          if (n === l || !u || hc[n] || hc[l]) return u;
          if (
            ("px" !== l && !m && (u = t(e, i, r, "px")),
            (h = e.getCTM && oc(e)),
            (y || "%" === l) && (Sl[i] || ~i.indexOf("adius")))
          )
            return (
              (o = h ? e.getBBox()[d ? "width" : "height"] : e[_]),
              ah(y ? (u / o) * f : (u / 100) * o)
            );
          if (
            ((c[d ? "width" : "height"] = f + (m ? l : n)),
            (s =
              ~i.indexOf("adius") || ("em" === n && e.appendChild && !p)
                ? e
                : e.parentNode),
            h && (s = (e.ownerSVGElement || {}).parentNode),
            (s && s !== gl && s.appendChild) || (s = gl.body),
            (a = s._gsap) &&
              y &&
              a.width &&
              d &&
              a.time === yu.time &&
              !a.uncache)
          )
            return ah((u / a.width) * f);
          if (!y || ("height" !== i && "width" !== i))
            (y || "%" === l) &&
              !uc[Zl(s, "display")] &&
              (c.position = Zl(e, "position")),
              s === e && (c.position = "static"),
              s.appendChild(xl),
              (o = xl[_]),
              s.removeChild(xl),
              (c.position = "absolute");
          else {
            var g = e.style[i];
            (e.style[i] = f + n), (o = e[_]), g ? (e.style[i] = g) : sc(e, i);
          }
          return (
            d && y && (((a = nh(s)).time = yu.time), (a.width = s[_])),
            ah(m ? (o * u) / f : o && u ? (f / o) * u : 0)
          );
        },
        cc = function (t, e, i, r) {
          var n;
          return (
            bl || ec(),
            e in Rl &&
              "transform" !== e &&
              ~(e = Rl[e]).indexOf(",") &&
              (e = e.split(",")[0]),
            Sl[e] && "transform" !== e
              ? ((n = Tc(t, r)),
                (n =
                  "transformOrigin" !== e
                    ? n[e]
                    : n.svg
                    ? n.origin
                    : Ac(Zl(t, Yl)) + " " + n.zOrigin + "px"))
              : (!(n = t.style[e]) ||
                  "auto" === n ||
                  r ||
                  ~(n + "").indexOf("calc(")) &&
                (n =
                  (mc[e] && mc[e](t, e, i)) ||
                  Zl(t, e) ||
                  oh(t, e) ||
                  ("opacity" === e ? 1 : 0)),
            i && !~(n + "").trim().indexOf(" ") ? lc(t, e, n, i) + i : n
          );
        },
        dc = function (t, e, i, r) {
          if (!i || "none" === i) {
            var n = tc(e, t, 1),
              o = n && Zl(t, n, 1);
            o && o !== i
              ? ((e = n), (i = o))
              : "borderColor" === e && (i = Zl(t, "borderTopColor"));
          }
          var s,
            a,
            h,
            u,
            l,
            c,
            d,
            p,
            _,
            f,
            m,
            y = new rl(this._pt, t.style, e, 0, 1, Ju),
            g = 0,
            v = 0;
          if (
            ((y.b = i),
            (y.e = r),
            (i += ""),
            "auto" == (r += "") &&
              ((c = t.style[e]),
              (t.style[e] = r),
              (r = Zl(t, e) || r),
              c ? (t.style[e] = c) : sc(t, e)),
            mu((s = [i, r])),
            (r = s[1]),
            (h = (i = s[0]).match(ka) || []),
            (r.match(ka) || []).length)
          ) {
            for (; (a = ka.exec(r)); )
              (d = a[0]),
                (_ = r.substring(g, a.index)),
                l
                  ? (l = (l + 1) % 5)
                  : ("rgba(" !== _.substr(-5) && "hsla(" !== _.substr(-5)) ||
                    (l = 1),
                d !== (c = h[v++] || "") &&
                  ((u = parseFloat(c) || 0),
                  (m = c.substr((u + "").length)),
                  "=" === d.charAt(1) && (d = uh(u, d) + m),
                  (p = parseFloat(d)),
                  (f = d.substr((p + "").length)),
                  (g = ka.lastIndex - f.length),
                  f ||
                    ((f = f || da.units[e] || m),
                    g === r.length && ((r += f), (y.e += f))),
                  m !== f && (u = lc(t, e, c, f) || 0),
                  (y._pt = {
                    _next: y._pt,
                    p: _ || 1 === v ? _ : ",",
                    s: u,
                    c: p - u,
                    m: (l && l < 4) || "zIndex" === e ? Math.round : 0,
                  }));
            y.c = g < r.length ? r.substring(g, r.length) : "";
          } else y.r = "display" === e && "none" === r ? Ll : Nl;
          return Da.test(r) && (y.e = 0), (this._pt = y), y;
        },
        pc = {
          top: "0%",
          bottom: "100%",
          left: "0%",
          right: "100%",
          center: "50%",
        },
        _c = function (t) {
          var e = t.split(" "),
            i = e[0],
            r = e[1] || "50%";
          return (
            ("top" !== i && "bottom" !== i && "left" !== r && "right" !== r) ||
              ((t = i), (i = r), (r = t)),
            (e[0] = pc[i] || i),
            (e[1] = pc[r] || r),
            e.join(" ")
          );
        },
        fc = function (t, e) {
          if (e.tween && e.tween._time === e.tween._dur) {
            var i,
              r,
              n,
              o = e.t,
              s = o.style,
              a = e.u,
              h = o._gsap;
            if ("all" === a || !0 === a) (s.cssText = ""), (r = 1);
            else
              for (n = (a = a.split(",")).length; --n > -1; )
                (i = a[n]),
                  Sl[i] && ((r = 1), (i = "transformOrigin" === i ? Yl : Hl)),
                  sc(o, i);
            r &&
              (sc(o, Hl),
              h &&
                (h.svg && o.removeAttribute("transform"),
                Tc(o, 1),
                (h.uncache = 1),
                ql(s)));
          }
        },
        mc = {
          clearProps: function (t, e, i, r, n) {
            if ("isFromStart" !== n.data) {
              var o = (t._pt = new rl(t._pt, e, i, 0, 0, fc));
              return (
                (o.u = r), (o.pr = -10), (o.tween = n), t._props.push(i), 1
              );
            }
          },
        },
        yc = [1, 0, 0, 1, 0, 0],
        gc = {},
        vc = function (t) {
          return "matrix(1, 0, 0, 1, 0, 0)" === t || "none" === t || !t;
        },
        bc = function (t) {
          var e = Zl(t, Hl);
          return vc(e) ? yc : e.substr(7).match(Ia).map(ah);
        },
        xc = function (t, e) {
          var i,
            r,
            n,
            o,
            s = t._gsap || nh(t),
            a = t.style,
            h = bc(t);
          return s.svg && t.getAttribute("transform")
            ? "1,0,0,1,0,0" ===
              (h = [
                (n = t.transform.baseVal.consolidate().matrix).a,
                n.b,
                n.c,
                n.d,
                n.e,
                n.f,
              ]).join(",")
              ? yc
              : h
            : (h !== yc ||
                t.offsetParent ||
                t === vl ||
                s.svg ||
                ((n = a.display),
                (a.display = "block"),
                ((i = t.parentNode) && t.offsetParent) ||
                  ((o = 1), (r = t.nextElementSibling), vl.appendChild(t)),
                (h = bc(t)),
                n ? (a.display = n) : sc(t, "display"),
                o &&
                  (r
                    ? i.insertBefore(t, r)
                    : i
                    ? i.appendChild(t)
                    : vl.removeChild(t))),
              e && h.length > 6 ? [h[0], h[1], h[4], h[5], h[12], h[13]] : h);
        },
        wc = function (t, e, i, r, n, o) {
          var s,
            a,
            h,
            u = t._gsap,
            l = n || xc(t, !0),
            c = u.xOrigin || 0,
            d = u.yOrigin || 0,
            p = u.xOffset || 0,
            _ = u.yOffset || 0,
            f = l[0],
            m = l[1],
            y = l[2],
            g = l[3],
            v = l[4],
            b = l[5],
            x = e.split(" "),
            w = parseFloat(x[0]) || 0,
            T = parseFloat(x[1]) || 0;
          i
            ? l !== yc &&
              (a = f * g - m * y) &&
              ((h = w * (-m / a) + T * (f / a) - (f * b - m * v) / a),
              (w = w * (g / a) + T * (-y / a) + (y * b - g * v) / a),
              (T = h))
            : ((w =
                (s = nc(t)).x + (~x[0].indexOf("%") ? (w / 100) * s.width : w)),
              (T =
                s.y +
                (~(x[1] || x[0]).indexOf("%") ? (T / 100) * s.height : T))),
            r || (!1 !== r && u.smooth)
              ? ((v = w - c),
                (b = T - d),
                (u.xOffset = p + (v * f + b * y) - v),
                (u.yOffset = _ + (v * m + b * g) - b))
              : (u.xOffset = u.yOffset = 0),
            (u.xOrigin = w),
            (u.yOrigin = T),
            (u.smooth = !!r),
            (u.origin = e),
            (u.originIsAbsolute = !!i),
            (t.style[Yl] = "0px 0px"),
            o &&
              (ac(o, u, "xOrigin", c, w),
              ac(o, u, "yOrigin", d, T),
              ac(o, u, "xOffset", p, u.xOffset),
              ac(o, u, "yOffset", _, u.yOffset)),
            t.setAttribute("data-svg-origin", w + " " + T);
        },
        Tc = function (t, e) {
          var i = t._gsap || new Bu(t);
          if ("x" in i && !e && !i.uncache) return i;
          var r,
            n,
            o,
            s,
            a,
            h,
            u,
            l,
            c,
            d,
            p,
            _,
            f,
            m,
            y,
            g,
            v,
            b,
            x,
            w,
            T,
            A,
            S,
            E,
            C,
            M,
            P,
            B,
            O,
            R,
            I,
            k,
            F = t.style,
            D = i.scaleX < 0,
            N = "px",
            L = "deg",
            U = getComputedStyle(t),
            G = Zl(t, Yl) || "0";
          return (
            (r = n = o = h = u = l = c = d = p = 0),
            (s = a = 1),
            (i.svg = !(!t.getCTM || !oc(t))),
            U.translate &&
              (("none" === U.translate &&
                "none" === U.scale &&
                "none" === U.rotate) ||
                (F[Hl] =
                  ("none" !== U.translate
                    ? "translate3d(" +
                      (U.translate + " 0 0").split(" ").slice(0, 3).join(", ") +
                      ") "
                    : "") +
                  ("none" !== U.rotate ? "rotate(" + U.rotate + ") " : "") +
                  ("none" !== U.scale
                    ? "scale(" + U.scale.split(" ").join(",") + ") "
                    : "") +
                  ("none" !== U[Hl] ? U[Hl] : "")),
              (F.scale = F.rotate = F.translate = "none")),
            (m = xc(t, i.svg)),
            i.svg &&
              (i.uncache
                ? ((C = t.getBBox()),
                  (G = i.xOrigin - C.x + "px " + (i.yOrigin - C.y) + "px"),
                  (E = ""))
                : (E = !e && t.getAttribute("data-svg-origin")),
              wc(t, E || G, !!E || i.originIsAbsolute, !1 !== i.smooth, m)),
            (_ = i.xOrigin || 0),
            (f = i.yOrigin || 0),
            m !== yc &&
              ((b = m[0]),
              (x = m[1]),
              (w = m[2]),
              (T = m[3]),
              (r = A = m[4]),
              (n = S = m[5]),
              6 === m.length
                ? ((s = Math.sqrt(b * b + x * x)),
                  (a = Math.sqrt(T * T + w * w)),
                  (h = b || x ? Ml(x, b) * El : 0),
                  (c = w || T ? Ml(w, T) * El + h : 0) &&
                    (a *= Math.abs(Math.cos(c * Cl))),
                  i.svg &&
                    ((r -= _ - (_ * b + f * w)), (n -= f - (_ * x + f * T))))
                : ((k = m[6]),
                  (R = m[7]),
                  (P = m[8]),
                  (B = m[9]),
                  (O = m[10]),
                  (I = m[11]),
                  (r = m[12]),
                  (n = m[13]),
                  (o = m[14]),
                  (u = (y = Ml(k, O)) * El),
                  y &&
                    ((E = A * (g = Math.cos(-y)) + P * (v = Math.sin(-y))),
                    (C = S * g + B * v),
                    (M = k * g + O * v),
                    (P = A * -v + P * g),
                    (B = S * -v + B * g),
                    (O = k * -v + O * g),
                    (I = R * -v + I * g),
                    (A = E),
                    (S = C),
                    (k = M)),
                  (l = (y = Ml(-w, O)) * El),
                  y &&
                    ((g = Math.cos(-y)),
                    (I = T * (v = Math.sin(-y)) + I * g),
                    (b = E = b * g - P * v),
                    (x = C = x * g - B * v),
                    (w = M = w * g - O * v)),
                  (h = (y = Ml(x, b)) * El),
                  y &&
                    ((E = b * (g = Math.cos(y)) + x * (v = Math.sin(y))),
                    (C = A * g + S * v),
                    (x = x * g - b * v),
                    (S = S * g - A * v),
                    (b = E),
                    (A = C)),
                  u &&
                    Math.abs(u) + Math.abs(h) > 359.9 &&
                    ((u = h = 0), (l = 180 - l)),
                  (s = ah(Math.sqrt(b * b + x * x + w * w))),
                  (a = ah(Math.sqrt(S * S + k * k))),
                  (y = Ml(A, S)),
                  (c = Math.abs(y) > 2e-4 ? y * El : 0),
                  (p = I ? 1 / (I < 0 ? -I : I) : 0)),
              i.svg &&
                ((E = t.getAttribute("transform")),
                (i.forceCSS =
                  t.setAttribute("transform", "") || !vc(Zl(t, Hl))),
                E && t.setAttribute("transform", E))),
            Math.abs(c) > 90 &&
              Math.abs(c) < 270 &&
              (D
                ? ((s *= -1),
                  (c += h <= 0 ? 180 : -180),
                  (h += h <= 0 ? 180 : -180))
                : ((a *= -1), (c += c <= 0 ? 180 : -180))),
            (e = e || i.uncache),
            (i.x =
              r -
              ((i.xPercent =
                r &&
                ((!e && i.xPercent) ||
                  (Math.round(t.offsetWidth / 2) === Math.round(-r) ? -50 : 0)))
                ? (t.offsetWidth * i.xPercent) / 100
                : 0) +
              N),
            (i.y =
              n -
              ((i.yPercent =
                n &&
                ((!e && i.yPercent) ||
                  (Math.round(t.offsetHeight / 2) === Math.round(-n)
                    ? -50
                    : 0)))
                ? (t.offsetHeight * i.yPercent) / 100
                : 0) +
              N),
            (i.z = o + N),
            (i.scaleX = ah(s)),
            (i.scaleY = ah(a)),
            (i.rotation = ah(h) + L),
            (i.rotationX = ah(u) + L),
            (i.rotationY = ah(l) + L),
            (i.skewX = c + L),
            (i.skewY = d + L),
            (i.transformPerspective = p + N),
            (i.zOrigin =
              parseFloat(G.split(" ")[2]) || (!e && i.zOrigin) || 0) &&
              (F[Yl] = Ac(G)),
            (i.xOffset = i.yOffset = 0),
            (i.force3D = da.force3D),
            (i.renderTransform = i.svg ? Oc : Al ? Bc : Ec),
            (i.uncache = 0),
            i
          );
        },
        Ac = function (t) {
          return (t = t.split(" "))[0] + " " + t[1];
        },
        Sc = function (t, e, i) {
          var r = Xh(e);
          return ah(parseFloat(e) + parseFloat(lc(t, "x", i + "px", r))) + r;
        },
        Ec = function (t, e) {
          (e.z = "0px"),
            (e.rotationY = e.rotationX = "0deg"),
            (e.force3D = 0),
            Bc(t, e);
        },
        Cc = "0deg",
        Mc = "0px",
        Pc = ") ",
        Bc = function (t, e) {
          var i = e || this,
            r = i.xPercent,
            n = i.yPercent,
            o = i.x,
            s = i.y,
            a = i.z,
            h = i.rotation,
            u = i.rotationY,
            l = i.rotationX,
            c = i.skewX,
            d = i.skewY,
            p = i.scaleX,
            _ = i.scaleY,
            f = i.transformPerspective,
            m = i.force3D,
            y = i.target,
            g = i.zOrigin,
            v = "",
            b = ("auto" === m && t && 1 !== t) || !0 === m;
          if (g && (l !== Cc || u !== Cc)) {
            var x,
              w = parseFloat(u) * Cl,
              T = Math.sin(w),
              A = Math.cos(w);
            (w = parseFloat(l) * Cl),
              (x = Math.cos(w)),
              (o = Sc(y, o, T * x * -g)),
              (s = Sc(y, s, -Math.sin(w) * -g)),
              (a = Sc(y, a, A * x * -g + g));
          }
          f !== Mc && (v += "perspective(" + f + Pc),
            (r || n) && (v += "translate(" + r + "%, " + n + "%) "),
            (b || o !== Mc || s !== Mc || a !== Mc) &&
              (v +=
                a !== Mc || b
                  ? "translate3d(" + o + ", " + s + ", " + a + ") "
                  : "translate(" + o + ", " + s + Pc),
            h !== Cc && (v += "rotate(" + h + Pc),
            u !== Cc && (v += "rotateY(" + u + Pc),
            l !== Cc && (v += "rotateX(" + l + Pc),
            (c === Cc && d === Cc) || (v += "skew(" + c + ", " + d + Pc),
            (1 === p && 1 === _) || (v += "scale(" + p + ", " + _ + Pc),
            (y.style[Hl] = v || "translate(0, 0)");
        },
        Oc = function (t, e) {
          var i,
            r,
            n,
            o,
            s,
            a = e || this,
            h = a.xPercent,
            u = a.yPercent,
            l = a.x,
            c = a.y,
            d = a.rotation,
            p = a.skewX,
            _ = a.skewY,
            f = a.scaleX,
            m = a.scaleY,
            y = a.target,
            g = a.xOrigin,
            v = a.yOrigin,
            b = a.xOffset,
            x = a.yOffset,
            w = a.forceCSS,
            T = parseFloat(l),
            A = parseFloat(c);
          (d = parseFloat(d)),
            (p = parseFloat(p)),
            (_ = parseFloat(_)) && ((p += _ = parseFloat(_)), (d += _)),
            d || p
              ? ((d *= Cl),
                (p *= Cl),
                (i = Math.cos(d) * f),
                (r = Math.sin(d) * f),
                (n = Math.sin(d - p) * -m),
                (o = Math.cos(d - p) * m),
                p &&
                  ((_ *= Cl),
                  (s = Math.tan(p - _)),
                  (n *= s = Math.sqrt(1 + s * s)),
                  (o *= s),
                  _ &&
                    ((s = Math.tan(_)),
                    (i *= s = Math.sqrt(1 + s * s)),
                    (r *= s))),
                (i = ah(i)),
                (r = ah(r)),
                (n = ah(n)),
                (o = ah(o)))
              : ((i = f), (o = m), (r = n = 0)),
            ((T && !~(l + "").indexOf("px")) ||
              (A && !~(c + "").indexOf("px"))) &&
              ((T = lc(y, "x", l, "px")), (A = lc(y, "y", c, "px"))),
            (g || v || b || x) &&
              ((T = ah(T + g - (g * i + v * n) + b)),
              (A = ah(A + v - (g * r + v * o) + x))),
            (h || u) &&
              ((s = y.getBBox()),
              (T = ah(T + (h / 100) * s.width)),
              (A = ah(A + (u / 100) * s.height))),
            (s =
              "matrix(" +
              i +
              "," +
              r +
              "," +
              n +
              "," +
              o +
              "," +
              T +
              "," +
              A +
              ")"),
            y.setAttribute("transform", s),
            w && (y.style[Hl] = s);
        },
        Rc = function (t, e, i, r, n) {
          var o,
            s,
            a = 360,
            h = wa(n),
            u = parseFloat(n) * (h && ~n.indexOf("rad") ? El : 1) - r,
            l = r + u + "deg";
          return (
            h &&
              ("short" === (o = n.split("_")[1]) &&
                (u %= a) != u % 180 &&
                (u += u < 0 ? a : -360),
              "cw" === o && u < 0
                ? (u = ((u + 36e9) % a) - ~~(u / a) * a)
                : "ccw" === o &&
                  u > 0 &&
                  (u = ((u - 36e9) % a) - ~~(u / a) * a)),
            (t._pt = s = new rl(t._pt, e, i, r, u, kl)),
            (s.e = l),
            (s.u = "deg"),
            t._props.push(i),
            s
          );
        },
        Ic = function (t, e) {
          for (var i in e) t[i] = e[i];
          return t;
        },
        kc = function (t, e, i) {
          var r,
            n,
            o,
            s,
            a,
            h,
            u,
            l = Ic({}, i._gsap),
            c = i.style;
          for (n in (l.svg
            ? ((o = i.getAttribute("transform")),
              i.setAttribute("transform", ""),
              (c[Hl] = e),
              (r = Tc(i, 1)),
              sc(i, Hl),
              i.setAttribute("transform", o))
            : ((o = getComputedStyle(i)[Hl]),
              (c[Hl] = e),
              (r = Tc(i, 1)),
              (c[Hl] = o)),
          Sl))
            (o = l[n]) !== (s = r[n]) &&
              "perspective,force3D,transformOrigin,svgOrigin".indexOf(n) < 0 &&
              ((a = Xh(o) !== (u = Xh(s)) ? lc(i, n, o, u) : parseFloat(o)),
              (h = parseFloat(s)),
              (t._pt = new rl(t._pt, r, n, a, h - a, Il)),
              (t._pt.u = u || 0),
              t._props.push(n));
          Ic(r, l);
        };
      sh("padding,margin,Width,Radius", function (t, e) {
        var i = "Top",
          r = "Right",
          n = "Bottom",
          o = "Left",
          s = (e < 3 ? [i, r, n, o] : [i + o, i + r, n + r, n + o]).map(
            function (i) {
              return e < 2 ? t + i : "border" + i + t;
            }
          );
        mc[e > 1 ? "border" + t : t] = function (t, e, i, r, n) {
          var o, a;
          if (arguments.length < 4)
            return (
              (o = s.map(function (e) {
                return cc(t, e, i);
              })),
              5 === (a = o.join(" ")).split(o[0]).length ? o[0] : a
            );
          (o = (r + "").split(" ")),
            (a = {}),
            s.forEach(function (t, e) {
              return (a[t] = o[e] = o[e] || o[((e - 1) / 2) | 0]);
            }),
            t.init(e, a, n);
        };
      });
      var Fc,
        Dc,
        Nc,
        Lc = {
          name: "css",
          register: ec,
          targetTest: function (t) {
            return t.style && t.nodeType;
          },
          init: function (t, e, i, r, n) {
            var o,
              s,
              a,
              h,
              u,
              l,
              c,
              d,
              p,
              _,
              f,
              m,
              y,
              g,
              v,
              b,
              x = this._props,
              w = t.style,
              T = i.vars.startAt;
            for (c in (bl || ec(),
            (this.styles = this.styles || Kl(t)),
            (b = this.styles.props),
            (this.tween = i),
            e))
              if (
                "autoRound" !== c &&
                ((s = e[c]), !Za[c] || !Nu(c, e, i, r, t, n))
              )
                if (
                  ((u = typeof s),
                  (l = mc[c]),
                  "function" === u && (u = typeof (s = s.call(i, r, t, n))),
                  "string" === u && ~s.indexOf("random(") && (s = eu(s)),
                  l)
                )
                  l(this, t, c, s, i) && (v = 1);
                else if ("--" === c.substr(0, 2))
                  (o = (getComputedStyle(t).getPropertyValue(c) + "").trim()),
                    (s += ""),
                    (_u.lastIndex = 0),
                    _u.test(o) || ((d = Xh(o)), (p = Xh(s))),
                    p ? d !== p && (o = lc(t, c, o, p) + p) : d && (s += d),
                    this.add(w, "setProperty", o, s, r, n, 0, 0, c),
                    x.push(c),
                    b.push(c, 0, w[c]);
                else if ("undefined" !== u) {
                  if (
                    (T && c in T
                      ? ((o =
                          "function" == typeof T[c]
                            ? T[c].call(i, r, t, n)
                            : T[c]),
                        wa(o) && ~o.indexOf("random(") && (o = eu(o)),
                        Xh(o + "") ||
                          "auto" === o ||
                          (o += da.units[c] || Xh(cc(t, c)) || ""),
                        "=" === (o + "").charAt(1) && (o = cc(t, c)))
                      : (o = cc(t, c)),
                    (h = parseFloat(o)),
                    (_ =
                      "string" === u &&
                      "=" === s.charAt(1) &&
                      s.substr(0, 2)) && (s = s.substr(2)),
                    (a = parseFloat(s)),
                    c in Rl &&
                      ("autoAlpha" === c &&
                        (1 === h &&
                          "hidden" === cc(t, "visibility") &&
                          a &&
                          (h = 0),
                        b.push("visibility", 0, w.visibility),
                        ac(
                          this,
                          w,
                          "visibility",
                          h ? "inherit" : "hidden",
                          a ? "inherit" : "hidden",
                          !a
                        )),
                      "scale" !== c &&
                        "transform" !== c &&
                        ~(c = Rl[c]).indexOf(",") &&
                        (c = c.split(",")[0])),
                    (f = c in Sl))
                  )
                    if (
                      (this.styles.save(c),
                      m ||
                        (((y = t._gsap).renderTransform && !e.parseTransform) ||
                          Tc(t, e.parseTransform),
                        (g = !1 !== e.smoothOrigin && y.smooth),
                        ((m = this._pt =
                          new rl(
                            this._pt,
                            w,
                            Hl,
                            0,
                            1,
                            y.renderTransform,
                            y,
                            0,
                            -1
                          )).dep = 1)),
                      "scale" === c)
                    )
                      (this._pt = new rl(
                        this._pt,
                        y,
                        "scaleY",
                        y.scaleY,
                        (_ ? uh(y.scaleY, _ + a) : a) - y.scaleY || 0,
                        Il
                      )),
                        (this._pt.u = 0),
                        x.push("scaleY", c),
                        (c += "X");
                    else {
                      if ("transformOrigin" === c) {
                        b.push(Yl, 0, w[Yl]),
                          (s = _c(s)),
                          y.svg
                            ? wc(t, s, 0, g, 0, this)
                            : ((p = parseFloat(s.split(" ")[2]) || 0) !==
                                y.zOrigin &&
                                ac(this, y, "zOrigin", y.zOrigin, p),
                              ac(this, w, c, Ac(o), Ac(s)));
                        continue;
                      }
                      if ("svgOrigin" === c) {
                        wc(t, s, 1, g, 0, this);
                        continue;
                      }
                      if (c in gc) {
                        Rc(this, y, c, h, _ ? uh(h, _ + s) : s);
                        continue;
                      }
                      if ("smoothOrigin" === c) {
                        ac(this, y, "smooth", y.smooth, s);
                        continue;
                      }
                      if ("force3D" === c) {
                        y[c] = s;
                        continue;
                      }
                      if ("transform" === c) {
                        kc(this, s, t);
                        continue;
                      }
                    }
                  else c in w || (c = tc(c) || c);
                  if (
                    f ||
                    ((a || 0 === a) && (h || 0 === h) && !Ol.test(s) && c in w)
                  )
                    a || (a = 0),
                      (d = (o + "").substr((h + "").length)) !==
                        (p = Xh(s) || (c in da.units ? da.units[c] : d)) &&
                        (h = lc(t, c, o, p)),
                      (this._pt = new rl(
                        this._pt,
                        f ? y : w,
                        c,
                        h,
                        (_ ? uh(h, _ + a) : a) - h,
                        f ||
                        ("px" !== p && "zIndex" !== c) ||
                        !1 === e.autoRound
                          ? Il
                          : Dl
                      )),
                      (this._pt.u = p || 0),
                      d !== p &&
                        "%" !== p &&
                        ((this._pt.b = o), (this._pt.r = Fl));
                  else if (c in w) dc.call(this, t, c, o, _ ? _ + s : s);
                  else if (c in t)
                    this.add(t, c, o || t[c], _ ? _ + s : s, r, n);
                  else if ("parseTransform" !== c) {
                    ja(c, s);
                    continue;
                  }
                  f || (c in w ? b.push(c, 0, w[c]) : b.push(c, 1, o || t[c])),
                    x.push(c);
                }
            v && il(this);
          },
          render: function (t, e) {
            if (e.tween._time || !Tl())
              for (var i = e._pt; i; ) i.r(t, i.d), (i = i._next);
            else e.styles.revert();
          },
          get: cc,
          aliases: Rl,
          getSetter: function (t, e, i) {
            var r = Rl[e];
            return (
              r && r.indexOf(",") < 0 && (e = r),
              e in Sl && e !== Yl && (t._gsap.x || cc(t, "x"))
                ? i && wl === i
                  ? "scale" === e
                    ? jl
                    : Vl
                  : (wl = i || {}) && ("scale" === e ? zl : Xl)
                : t.style && !Sa(t.style[e])
                ? Ul
                : ~e.indexOf("-")
                ? Gl
                : qu(t, e)
            );
          },
          core: { _removeProperty: sc, _getMatrix: xc },
        };
      (ml.utils.checkPrefix = tc),
        (ml.core.getStyleSaver = Kl),
        (Nc = sh(
          (Fc = "x,y,z,scale,scaleX,scaleY,xPercent,yPercent") +
            "," +
            (Dc = "rotation,rotationX,rotationY,skewX,skewY") +
            ",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",
          function (t) {
            Sl[t] = 1;
          }
        )),
        sh(Dc, function (t) {
          (da.units[t] = "deg"), (gc[t] = 1);
        }),
        (Rl[Nc[13]] = Fc + "," + Dc),
        sh(
          "0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",
          function (t) {
            var e = t.split(":");
            Rl[e[1]] = Nc[e[0]];
          }
        ),
        sh(
          "x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",
          function (t) {
            da.units[t] = "px";
          }
        ),
        ml.registerPlugin(Lc);
      var Uc = ml.registerPlugin(Lc) || ml,
        Gc =
          (Uc.core.Tween,
          function () {
            return (
              (Gc =
                Object.assign ||
                function (t) {
                  for (var e, i = 1, r = arguments.length; i < r; i++)
                    for (var n in (e = arguments[i]))
                      Object.prototype.hasOwnProperty.call(e, n) &&
                        (t[n] = e[n]);
                  return t;
                }),
              Gc.apply(this, arguments)
            );
          }),
        Vc = function (t, e) {
          null == t && (t = {});
          var i = Gc({}, t);
          for (var r in e)
            e.hasOwnProperty(r) && void 0 === t[r] && (i[r] = e[r]);
          if ("function" == typeof Object.getOwnPropertySymbols)
            for (
              var n = Object.getOwnPropertySymbols(e), o = 0;
              o < n.length;
              o++
            ) {
              var s = n[o];
              e.propertyIsEnumerable(s) && void 0 === t[s] && (i[s] = e[s]);
            }
          return i;
        },
        jc = Math.random,
        zc = 1e-9,
        Xc = Number.isFinite;
      function Hc(t, e, i) {
        return (
          void 0 === e
            ? ((i = 1), (e = 0))
            : void 0 === i && ((i = e), (e = 0)),
          i > e
            ? (t = (t - e) % (i - e)) + (t < 0 ? i : e)
            : (t = (t - i) % (e - i)) + (t <= 0 ? e : i)
        );
      }
      function Yc(t, e, i) {
        return t < e ? e : t > i ? i : t;
      }
      var Wc = Object.create(Math);
      (Wc.EPSILON = zc),
        (Wc.isFinite = Xc),
        (Wc.nextPowerOfTwo = function (t) {
          return (
            (t |= t >> 1),
            (t |= t >> 2),
            (t |= t >> 4),
            (t |= t >> 8),
            1 + (t |= t >> 16)
          );
        }),
        (Wc.isPowerOfTwo = function (t) {
          return t > 0 && !(t & (t - 1));
        }),
        (Wc.mod = Hc),
        (Wc.clamp = Yc),
        (Wc.random = function (t, e) {
          return (
            void 0 === t
              ? ((e = 1), (t = 0))
              : void 0 === e && ((e = t), (t = 0)),
            t === e ? t : jc() * (e - t) + t
          );
        });
      var qc = "undefined" != typeof ASSERT && ASSERT,
        $c = "undefined" != typeof CONSTRUCTOR_FACTORY && CONSTRUCTOR_FACTORY,
        Kc = Math.abs,
        Jc = Math.sqrt,
        Zc = Math.max,
        Qc = Math.min,
        td = (function () {
          function t(e, i) {
            if ($c && !(this instanceof t)) return new t(e, i);
            void 0 === e
              ? ((this.x = 0), (this.y = 0))
              : "object" == typeof e
              ? ((this.x = e.x), (this.y = e.y))
              : ((this.x = e), (this.y = i)),
              qc && t.assert(this);
          }
          return (
            (t.prototype._serialize = function () {
              return { x: this.x, y: this.y };
            }),
            (t._deserialize = function (e) {
              var i = Object.create(t.prototype);
              return (i.x = e.x), (i.y = e.y), i;
            }),
            (t.zero = function () {
              var e = Object.create(t.prototype);
              return (e.x = 0), (e.y = 0), e;
            }),
            (t.neo = function (e, i) {
              var r = Object.create(t.prototype);
              return (r.x = e), (r.y = i), r;
            }),
            (t.clone = function (e) {
              return qc && t.assert(e), t.neo(e.x, e.y);
            }),
            (t.prototype.toString = function () {
              return JSON.stringify(this);
            }),
            (t.isValid = function (t) {
              return null != t && Number.isFinite(t.x) && Number.isFinite(t.y);
            }),
            (t.assert = function (e) {
              qc && console.assert(!t.isValid(e), "Invalid Vec2!", e);
            }),
            (t.prototype.clone = function () {
              return t.clone(this);
            }),
            (t.prototype.setZero = function () {
              return (this.x = 0), (this.y = 0), this;
            }),
            (t.prototype.set = function (e, i) {
              return (
                "object" == typeof e
                  ? (qc && t.assert(e), (this.x = e.x), (this.y = e.y))
                  : (qc && console.assert(Number.isFinite(e)),
                    qc && console.assert(Number.isFinite(i)),
                    (this.x = e),
                    (this.y = i)),
                this
              );
            }),
            (t.prototype.setNum = function (t, e) {
              return (
                qc && console.assert(Number.isFinite(t)),
                qc && console.assert(Number.isFinite(e)),
                (this.x = t),
                (this.y = e),
                this
              );
            }),
            (t.prototype.setVec2 = function (e) {
              return qc && t.assert(e), (this.x = e.x), (this.y = e.y), this;
            }),
            (t.prototype.wSet = function (t, e, i, r) {
              return void 0 !== i || void 0 !== r
                ? this.setCombine(t, e, i, r)
                : this.setMul(t, e);
            }),
            (t.prototype.setCombine = function (e, i, r, n) {
              qc && console.assert(Number.isFinite(e)),
                qc && t.assert(i),
                qc && console.assert(Number.isFinite(r)),
                qc && t.assert(n);
              var o = e * i.x + r * n.x,
                s = e * i.y + r * n.y;
              return (this.x = o), (this.y = s), this;
            }),
            (t.prototype.setMul = function (e, i) {
              qc && console.assert(Number.isFinite(e)), qc && t.assert(i);
              var r = e * i.x,
                n = e * i.y;
              return (this.x = r), (this.y = n), this;
            }),
            (t.prototype.add = function (e) {
              return qc && t.assert(e), (this.x += e.x), (this.y += e.y), this;
            }),
            (t.prototype.wAdd = function (t, e, i, r) {
              return void 0 !== i || void 0 !== r
                ? this.addCombine(t, e, i, r)
                : this.addMul(t, e);
            }),
            (t.prototype.addCombine = function (e, i, r, n) {
              qc && console.assert(Number.isFinite(e)),
                qc && t.assert(i),
                qc && console.assert(Number.isFinite(r)),
                qc && t.assert(n);
              var o = e * i.x + r * n.x,
                s = e * i.y + r * n.y;
              return (this.x += o), (this.y += s), this;
            }),
            (t.prototype.addMul = function (e, i) {
              qc && console.assert(Number.isFinite(e)), qc && t.assert(i);
              var r = e * i.x,
                n = e * i.y;
              return (this.x += r), (this.y += n), this;
            }),
            (t.prototype.wSub = function (t, e, i, r) {
              return void 0 !== i || void 0 !== r
                ? this.subCombine(t, e, i, r)
                : this.subMul(t, e);
            }),
            (t.prototype.subCombine = function (e, i, r, n) {
              qc && console.assert(Number.isFinite(e)),
                qc && t.assert(i),
                qc && console.assert(Number.isFinite(r)),
                qc && t.assert(n);
              var o = e * i.x + r * n.x,
                s = e * i.y + r * n.y;
              return (this.x -= o), (this.y -= s), this;
            }),
            (t.prototype.subMul = function (e, i) {
              qc && console.assert(Number.isFinite(e)), qc && t.assert(i);
              var r = e * i.x,
                n = e * i.y;
              return (this.x -= r), (this.y -= n), this;
            }),
            (t.prototype.sub = function (e) {
              return qc && t.assert(e), (this.x -= e.x), (this.y -= e.y), this;
            }),
            (t.prototype.mul = function (t) {
              return (
                qc && console.assert(Number.isFinite(t)),
                (this.x *= t),
                (this.y *= t),
                this
              );
            }),
            (t.prototype.length = function () {
              return t.lengthOf(this);
            }),
            (t.prototype.lengthSquared = function () {
              return t.lengthSquared(this);
            }),
            (t.prototype.normalize = function () {
              var t = this.length();
              if (t < zc) return 0;
              var e = 1 / t;
              return (this.x *= e), (this.y *= e), t;
            }),
            (t.normalize = function (e) {
              var i = t.lengthOf(e);
              if (i < zc) return t.zero();
              var r = 1 / i;
              return t.neo(e.x * r, e.y * r);
            }),
            (t.lengthOf = function (e) {
              return qc && t.assert(e), Jc(e.x * e.x + e.y * e.y);
            }),
            (t.lengthSquared = function (e) {
              return qc && t.assert(e), e.x * e.x + e.y * e.y;
            }),
            (t.distance = function (e, i) {
              qc && t.assert(e), qc && t.assert(i);
              var r = e.x - i.x,
                n = e.y - i.y;
              return Jc(r * r + n * n);
            }),
            (t.distanceSquared = function (e, i) {
              qc && t.assert(e), qc && t.assert(i);
              var r = e.x - i.x,
                n = e.y - i.y;
              return r * r + n * n;
            }),
            (t.areEqual = function (e, i) {
              return (
                qc && t.assert(e),
                qc && t.assert(i),
                e === i ||
                  ("object" == typeof i &&
                    null !== i &&
                    e.x === i.x &&
                    e.y === i.y)
              );
            }),
            (t.skew = function (e) {
              return qc && t.assert(e), t.neo(-e.y, e.x);
            }),
            (t.dot = function (e, i) {
              return (
                qc && t.assert(e), qc && t.assert(i), e.x * i.x + e.y * i.y
              );
            }),
            (t.cross = function (e, i) {
              return "number" == typeof i
                ? (qc && t.assert(e),
                  qc && console.assert(Number.isFinite(i)),
                  t.neo(i * e.y, -i * e.x))
                : "number" == typeof e
                ? (qc && console.assert(Number.isFinite(e)),
                  qc && t.assert(i),
                  t.neo(-e * i.y, e * i.x))
                : (qc && t.assert(e), qc && t.assert(i), e.x * i.y - e.y * i.x);
            }),
            (t.crossVec2Vec2 = function (e, i) {
              return (
                qc && t.assert(e), qc && t.assert(i), e.x * i.y - e.y * i.x
              );
            }),
            (t.crossVec2Num = function (e, i) {
              return (
                qc && t.assert(e),
                qc && console.assert(Number.isFinite(i)),
                t.neo(i * e.y, -i * e.x)
              );
            }),
            (t.crossNumVec2 = function (e, i) {
              return (
                qc && console.assert(Number.isFinite(e)),
                qc && t.assert(i),
                t.neo(-e * i.y, e * i.x)
              );
            }),
            (t.addCross = function (e, i, r) {
              return "number" == typeof r
                ? (qc && t.assert(i),
                  qc && console.assert(Number.isFinite(r)),
                  t.neo(r * i.y + e.x, -r * i.x + e.y))
                : "number" == typeof i
                ? (qc && console.assert(Number.isFinite(i)),
                  qc && t.assert(r),
                  t.neo(-i * r.y + e.x, i * r.x + e.y))
                : void (qc && console.assert(!1));
            }),
            (t.addCrossVec2Num = function (e, i, r) {
              return (
                qc && t.assert(i),
                qc && console.assert(Number.isFinite(r)),
                t.neo(r * i.y + e.x, -r * i.x + e.y)
              );
            }),
            (t.addCrossNumVec2 = function (e, i, r) {
              return (
                qc && console.assert(Number.isFinite(i)),
                qc && t.assert(r),
                t.neo(-i * r.y + e.x, i * r.x + e.y)
              );
            }),
            (t.add = function (e, i) {
              return (
                qc && t.assert(e),
                qc && t.assert(i),
                t.neo(e.x + i.x, e.y + i.y)
              );
            }),
            (t.wAdd = function (e, i, r, n) {
              return void 0 !== r || void 0 !== n
                ? t.combine(e, i, r, n)
                : t.mulNumVec2(e, i);
            }),
            (t.combine = function (e, i, r, n) {
              return t.zero().setCombine(e, i, r, n);
            }),
            (t.sub = function (e, i) {
              return (
                qc && t.assert(e),
                qc && t.assert(i),
                t.neo(e.x - i.x, e.y - i.y)
              );
            }),
            (t.mul = function (e, i) {
              return "object" == typeof e
                ? (qc && t.assert(e),
                  qc && console.assert(Number.isFinite(i)),
                  t.neo(e.x * i, e.y * i))
                : "object" == typeof i
                ? (qc && console.assert(Number.isFinite(e)),
                  qc && t.assert(i),
                  t.neo(e * i.x, e * i.y))
                : void 0;
            }),
            (t.mulVec2Num = function (e, i) {
              return (
                qc && t.assert(e),
                qc && console.assert(Number.isFinite(i)),
                t.neo(e.x * i, e.y * i)
              );
            }),
            (t.mulNumVec2 = function (e, i) {
              return (
                qc && console.assert(Number.isFinite(e)),
                qc && t.assert(i),
                t.neo(e * i.x, e * i.y)
              );
            }),
            (t.prototype.neg = function () {
              return (this.x = -this.x), (this.y = -this.y), this;
            }),
            (t.neg = function (e) {
              return qc && t.assert(e), t.neo(-e.x, -e.y);
            }),
            (t.abs = function (e) {
              return qc && t.assert(e), t.neo(Kc(e.x), Kc(e.y));
            }),
            (t.mid = function (e, i) {
              return (
                qc && t.assert(e),
                qc && t.assert(i),
                t.neo(0.5 * (e.x + i.x), 0.5 * (e.y + i.y))
              );
            }),
            (t.upper = function (e, i) {
              return (
                qc && t.assert(e),
                qc && t.assert(i),
                t.neo(Zc(e.x, i.x), Zc(e.y, i.y))
              );
            }),
            (t.lower = function (e, i) {
              return (
                qc && t.assert(e),
                qc && t.assert(i),
                t.neo(Qc(e.x, i.x), Qc(e.y, i.y))
              );
            }),
            (t.prototype.clamp = function (t) {
              var e = this.x * this.x + this.y * this.y;
              if (e > t * t) {
                var i = t / Jc(e);
                (this.x *= i), (this.y *= i);
              }
              return this;
            }),
            (t.clamp = function (e, i) {
              var r = t.neo(e.x, e.y);
              return r.clamp(i), r;
            }),
            (t.clampVec2 = function (t, e, i) {
              return {
                x: Yc(t.x, null == e ? void 0 : e.x, null == i ? void 0 : i.x),
                y: Yc(t.y, null == e ? void 0 : e.y, null == i ? void 0 : i.y),
              };
            }),
            (t.scaleFn = function (e, i) {
              return function (r) {
                return t.neo(r.x * e, r.y * i);
              };
            }),
            (t.translateFn = function (e, i) {
              return function (r) {
                return t.neo(r.x + e, r.y + i);
              };
            }),
            t
          );
        })(),
        ed = "undefined" != typeof ASSERT && ASSERT,
        id = "undefined" != typeof CONSTRUCTOR_FACTORY && CONSTRUCTOR_FACTORY,
        rd = Math.max,
        nd = Math.min,
        od = (function () {
          function t(e, i) {
            if (id && !(this instanceof t)) return new t(e, i);
            (this.lowerBound = td.zero()),
              (this.upperBound = td.zero()),
              "object" == typeof e && this.lowerBound.setVec2(e),
              "object" == typeof i
                ? this.upperBound.setVec2(i)
                : "object" == typeof e && this.upperBound.setVec2(e);
          }
          return (
            (t.prototype.isValid = function () {
              return t.isValid(this);
            }),
            (t.isValid = function (t) {
              return (
                null != t &&
                td.isValid(t.lowerBound) &&
                td.isValid(t.upperBound) &&
                td.sub(t.upperBound, t.lowerBound).lengthSquared() >= 0
              );
            }),
            (t.assert = function (e) {
              ed && console.assert(!t.isValid(e), "Invalid AABB!", e);
            }),
            (t.prototype.getCenter = function () {
              return td.neo(
                0.5 * (this.lowerBound.x + this.upperBound.x),
                0.5 * (this.lowerBound.y + this.upperBound.y)
              );
            }),
            (t.prototype.getExtents = function () {
              return td.neo(
                0.5 * (this.upperBound.x - this.lowerBound.x),
                0.5 * (this.upperBound.y - this.lowerBound.y)
              );
            }),
            (t.prototype.getPerimeter = function () {
              return (
                2 *
                (this.upperBound.x -
                  this.lowerBound.x +
                  this.upperBound.y -
                  this.lowerBound.y)
              );
            }),
            (t.prototype.combine = function (t, e) {
              e = e || this;
              var i = t.lowerBound,
                r = t.upperBound,
                n = e.lowerBound,
                o = e.upperBound,
                s = nd(i.x, n.x),
                a = nd(i.y, n.y),
                h = rd(o.x, r.x),
                u = rd(o.y, r.y);
              this.lowerBound.setNum(s, a), this.upperBound.setNum(h, u);
            }),
            (t.prototype.combinePoints = function (t, e) {
              this.lowerBound.setNum(nd(t.x, e.x), nd(t.y, e.y)),
                this.upperBound.setNum(rd(t.x, e.x), rd(t.y, e.y));
            }),
            (t.prototype.set = function (t) {
              this.lowerBound.setNum(t.lowerBound.x, t.lowerBound.y),
                this.upperBound.setNum(t.upperBound.x, t.upperBound.y);
            }),
            (t.prototype.contains = function (t) {
              var e = !0;
              return (
                (e =
                  (e =
                    (e = e && this.lowerBound.x <= t.lowerBound.x) &&
                    this.lowerBound.y <= t.lowerBound.y) &&
                  t.upperBound.x <= this.upperBound.x) &&
                t.upperBound.y <= this.upperBound.y
              );
            }),
            (t.prototype.extend = function (e) {
              return t.extend(this, e), this;
            }),
            (t.extend = function (t, e) {
              return (
                (t.lowerBound.x -= e),
                (t.lowerBound.y -= e),
                (t.upperBound.x += e),
                (t.upperBound.y += e),
                t
              );
            }),
            (t.testOverlap = function (t, e) {
              var i = e.lowerBound.x - t.upperBound.x,
                r = t.lowerBound.x - e.upperBound.x,
                n = e.lowerBound.y - t.upperBound.y,
                o = t.lowerBound.y - e.upperBound.y;
              return !(i > 0 || n > 0 || r > 0 || o > 0);
            }),
            (t.areEqual = function (t, e) {
              return (
                td.areEqual(t.lowerBound, e.lowerBound) &&
                td.areEqual(t.upperBound, e.upperBound)
              );
            }),
            (t.diff = function (t, e) {
              var i = rd(
                  0,
                  nd(t.upperBound.x, e.upperBound.x) -
                    rd(e.lowerBound.x, t.lowerBound.x)
                ),
                r = rd(
                  0,
                  nd(t.upperBound.y, e.upperBound.y) -
                    rd(e.lowerBound.y, t.lowerBound.y)
                );
              return (
                (t.upperBound.x - t.lowerBound.x) *
                  (t.upperBound.y - t.lowerBound.y) +
                (e.upperBound.x - e.lowerBound.x) *
                  (e.upperBound.y - e.lowerBound.y) -
                i * r
              );
            }),
            (t.prototype.rayCast = function (t, e) {
              for (
                var i = -1 / 0,
                  r = 1 / 0,
                  n = e.p1,
                  o = td.sub(e.p2, e.p1),
                  s = td.abs(o),
                  a = td.zero(),
                  h = "x";
                null !== h;
                h = "x" === h ? "y" : null
              )
                if (s.x < zc) {
                  if (n[h] < this.lowerBound[h] || this.upperBound[h] < n[h])
                    return !1;
                } else {
                  var u = 1 / o[h],
                    l = (this.lowerBound[h] - n[h]) * u,
                    c = (this.upperBound[h] - n[h]) * u,
                    d = -1;
                  if (l > c) {
                    var p = l;
                    (l = c), (c = p), (d = 1);
                  }
                  if (
                    (l > i && (a.setZero(), (a[h] = d), (i = l)),
                    i > (r = nd(r, c)))
                  )
                    return !1;
                }
              return !(
                i < 0 ||
                e.maxFraction < i ||
                ((t.fraction = i), (t.normal = a), 0)
              );
            }),
            (t.prototype.toString = function () {
              return JSON.stringify(this);
            }),
            (t.combinePoints = function (t, e, i) {
              return (
                (t.lowerBound.x = nd(e.x, i.x)),
                (t.lowerBound.y = nd(e.y, i.y)),
                (t.upperBound.x = rd(e.x, i.x)),
                (t.upperBound.y = rd(e.y, i.y)),
                t
              );
            }),
            (t.combinedPerimeter = function (t, e) {
              var i = nd(t.lowerBound.x, e.lowerBound.x),
                r = nd(t.lowerBound.y, e.lowerBound.y);
              return (
                2 *
                (rd(t.upperBound.x, e.upperBound.x) -
                  i +
                  rd(t.upperBound.y, e.upperBound.y) -
                  r)
              );
            }),
            t
          );
        })(),
        sd = Math.PI,
        ad = (function () {
          function t() {}
          return (
            Object.defineProperty(t, "polygonRadius", {
              get: function () {
                return 2 * t.linearSlop;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.lengthUnitsPerMeter = 1),
            (t.maxManifoldPoints = 2),
            (t.maxPolygonVertices = 12),
            (t.aabbExtension = 0.1),
            (t.aabbMultiplier = 2),
            (t.linearSlop = 0.005),
            (t.angularSlop = (2 / 180) * sd),
            (t.maxSubSteps = 8),
            (t.maxTOIContacts = 32),
            (t.maxTOIIterations = 20),
            (t.maxDistanceIterations = 20),
            (t.velocityThreshold = 1),
            (t.maxLinearCorrection = 0.2),
            (t.maxAngularCorrection = (8 / 180) * sd),
            (t.maxTranslation = 2),
            (t.maxRotation = 0.5 * sd),
            (t.baumgarte = 0.2),
            (t.toiBaugarte = 0.75),
            (t.timeToSleep = 0.5),
            (t.linearSleepTolerance = 0.01),
            (t.angularSleepTolerance = (2 / 180) * sd),
            t
          );
        })(),
        hd = (function () {
          function t() {}
          return (
            Object.defineProperty(t, "maxManifoldPoints", {
              get: function () {
                return ad.maxManifoldPoints;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "maxPolygonVertices", {
              get: function () {
                return ad.maxPolygonVertices;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "aabbExtension", {
              get: function () {
                return ad.aabbExtension * ad.lengthUnitsPerMeter;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "aabbMultiplier", {
              get: function () {
                return ad.aabbMultiplier;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "linearSlop", {
              get: function () {
                return ad.linearSlop * ad.lengthUnitsPerMeter;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "linearSlopSquared", {
              get: function () {
                return (
                  ad.linearSlop *
                  ad.lengthUnitsPerMeter *
                  ad.linearSlop *
                  ad.lengthUnitsPerMeter
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "angularSlop", {
              get: function () {
                return ad.angularSlop;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "polygonRadius", {
              get: function () {
                return 2 * ad.linearSlop;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "maxSubSteps", {
              get: function () {
                return ad.maxSubSteps;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "maxTOIContacts", {
              get: function () {
                return ad.maxTOIContacts;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "maxTOIIterations", {
              get: function () {
                return ad.maxTOIIterations;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "maxDistanceIterations", {
              get: function () {
                return ad.maxDistanceIterations;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "velocityThreshold", {
              get: function () {
                return ad.velocityThreshold * ad.lengthUnitsPerMeter;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "maxLinearCorrection", {
              get: function () {
                return ad.maxLinearCorrection * ad.lengthUnitsPerMeter;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "maxAngularCorrection", {
              get: function () {
                return ad.maxAngularCorrection;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "maxTranslation", {
              get: function () {
                return ad.maxTranslation * ad.lengthUnitsPerMeter;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "maxTranslationSquared", {
              get: function () {
                return (
                  ad.maxTranslation *
                  ad.lengthUnitsPerMeter *
                  ad.maxTranslation *
                  ad.lengthUnitsPerMeter
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "maxRotation", {
              get: function () {
                return ad.maxRotation;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "maxRotationSquared", {
              get: function () {
                return ad.maxRotation * ad.maxRotation;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "baumgarte", {
              get: function () {
                return ad.baumgarte;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "toiBaugarte", {
              get: function () {
                return ad.toiBaugarte;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "timeToSleep", {
              get: function () {
                return ad.timeToSleep;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "linearSleepTolerance", {
              get: function () {
                return ad.linearSleepTolerance * ad.lengthUnitsPerMeter;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "linearSleepToleranceSqr", {
              get: function () {
                return (
                  ad.linearSleepTolerance *
                  ad.lengthUnitsPerMeter *
                  ad.linearSleepTolerance *
                  ad.lengthUnitsPerMeter
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "angularSleepTolerance", {
              get: function () {
                return ad.angularSleepTolerance;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "angularSleepToleranceSqr", {
              get: function () {
                return ad.angularSleepTolerance * ad.angularSleepTolerance;
              },
              enumerable: !1,
              configurable: !0,
            }),
            t
          );
        })(),
        ud = (function () {
          function t(t) {
            (this._list = []),
              (this._max = 1 / 0),
              (this._hasCreateFn = !1),
              (this._createCount = 0),
              (this._hasAllocateFn = !1),
              (this._allocateCount = 0),
              (this._hasReleaseFn = !1),
              (this._releaseCount = 0),
              (this._hasDisposeFn = !1),
              (this._disposeCount = 0),
              (this._list = []),
              (this._max = t.max || this._max),
              (this._createFn = t.create),
              (this._hasCreateFn = "function" == typeof this._createFn),
              (this._allocateFn = t.allocate),
              (this._hasAllocateFn = "function" == typeof this._allocateFn),
              (this._releaseFn = t.release),
              (this._hasReleaseFn = "function" == typeof this._releaseFn),
              (this._disposeFn = t.dispose),
              (this._hasDisposeFn = "function" == typeof this._disposeFn);
          }
          return (
            (t.prototype.max = function (t) {
              return "number" == typeof t ? ((this._max = t), this) : this._max;
            }),
            (t.prototype.size = function () {
              return this._list.length;
            }),
            (t.prototype.allocate = function () {
              var t;
              return (
                this._list.length > 0
                  ? (t = this._list.shift())
                  : (this._createCount++,
                    (t = this._hasCreateFn ? this._createFn() : {})),
                this._allocateCount++,
                this._hasAllocateFn && this._allocateFn(t),
                t
              );
            }),
            (t.prototype.release = function (t) {
              this._list.length < this._max
                ? (this._releaseCount++,
                  this._hasReleaseFn && this._releaseFn(t),
                  this._list.push(t))
                : (this._disposeCount++,
                  this._hasDisposeFn && (t = this._disposeFn(t)));
            }),
            (t.prototype.toString = function () {
              return (
                " +" +
                this._createCount +
                " >" +
                this._allocateCount +
                " <" +
                this._releaseCount +
                " -" +
                this._disposeCount +
                " =" +
                this._list.length +
                "/" +
                this._max
              );
            }),
            t
          );
        })(),
        ld = "undefined" != typeof ASSERT && ASSERT,
        cd = Math.abs,
        dd = Math.max,
        pd = (function () {
          function t(t) {
            (this.aabb = new od()),
              (this.userData = null),
              (this.parent = null),
              (this.child1 = null),
              (this.child2 = null),
              (this.height = -1),
              (this.id = t);
          }
          return (
            (t.prototype.toString = function () {
              return this.id + ": " + this.userData;
            }),
            (t.prototype.isLeaf = function () {
              return null == this.child1;
            }),
            t
          );
        })(),
        _d = new ud({
          create: function () {
            return new pd();
          },
          release: function (t) {
            (t.userData = null),
              (t.parent = null),
              (t.child1 = null),
              (t.child2 = null),
              (t.height = -1),
              (t.id = void 0);
          },
        }),
        fd = (function () {
          function t() {
            (this.inputPool = new ud({
              create: function () {
                return {};
              },
              release: function (t) {},
            })),
              (this.stackPool = new ud({
                create: function () {
                  return [];
                },
                release: function (t) {
                  t.length = 0;
                },
              })),
              (this.iteratorPool = new ud({
                create: function () {
                  return new md();
                },
                release: function (t) {
                  t.close();
                },
              })),
              (this.m_root = null),
              (this.m_nodes = {}),
              (this.m_lastProxyId = 0);
          }
          return (
            (t.prototype.getUserData = function (t) {
              var e = this.m_nodes[t];
              return ld && console.assert(!!e), e.userData;
            }),
            (t.prototype.getFatAABB = function (t) {
              var e = this.m_nodes[t];
              return ld && console.assert(!!e), e.aabb;
            }),
            (t.prototype.allocateNode = function () {
              var t = _d.allocate();
              return (t.id = ++this.m_lastProxyId), (this.m_nodes[t.id] = t), t;
            }),
            (t.prototype.freeNode = function (t) {
              delete this.m_nodes[t.id], _d.release(t);
            }),
            (t.prototype.createProxy = function (t, e) {
              ld && console.assert(od.isValid(t));
              var i = this.allocateNode();
              return (
                i.aabb.set(t),
                od.extend(i.aabb, hd.aabbExtension),
                (i.userData = e),
                (i.height = 0),
                this.insertLeaf(i),
                i.id
              );
            }),
            (t.prototype.destroyProxy = function (t) {
              var e = this.m_nodes[t];
              ld && console.assert(!!e),
                ld && console.assert(e.isLeaf()),
                this.removeLeaf(e),
                this.freeNode(e);
            }),
            (t.prototype.moveProxy = function (t, e, i) {
              ld && console.assert(od.isValid(e)),
                ld && console.assert(!i || td.isValid(i));
              var r = this.m_nodes[t];
              return (
                ld && console.assert(!!r),
                ld && console.assert(r.isLeaf()),
                !r.aabb.contains(e) &&
                  (this.removeLeaf(r),
                  r.aabb.set(e),
                  (e = r.aabb),
                  od.extend(e, hd.aabbExtension),
                  i.x < 0
                    ? (e.lowerBound.x += i.x * hd.aabbMultiplier)
                    : (e.upperBound.x += i.x * hd.aabbMultiplier),
                  i.y < 0
                    ? (e.lowerBound.y += i.y * hd.aabbMultiplier)
                    : (e.upperBound.y += i.y * hd.aabbMultiplier),
                  this.insertLeaf(r),
                  !0)
              );
            }),
            (t.prototype.insertLeaf = function (t) {
              if (
                (ld && console.assert(od.isValid(t.aabb)), null == this.m_root)
              )
                return (this.m_root = t), void (this.m_root.parent = null);
              for (var e = t.aabb, i = this.m_root; !i.isLeaf(); ) {
                var r = i.child1,
                  n = i.child2,
                  o = i.aabb.getPerimeter(),
                  s = od.combinedPerimeter(i.aabb, e),
                  a = 2 * s,
                  h = 2 * (s - o),
                  u = od.combinedPerimeter(e, r.aabb) + h;
                r.isLeaf() || (u -= r.aabb.getPerimeter());
                var l = od.combinedPerimeter(e, n.aabb) + h;
                if (
                  (n.isLeaf() || (l -= n.aabb.getPerimeter()), a < u && a < l)
                )
                  break;
                i = u < l ? r : n;
              }
              var c = i,
                d = c.parent,
                p = this.allocateNode();
              for (
                p.parent = d,
                  p.userData = null,
                  p.aabb.combine(e, c.aabb),
                  p.height = c.height + 1,
                  null != d
                    ? (d.child1 === c ? (d.child1 = p) : (d.child2 = p),
                      (p.child1 = c),
                      (p.child2 = t),
                      (c.parent = p),
                      (t.parent = p))
                    : ((p.child1 = c),
                      (p.child2 = t),
                      (c.parent = p),
                      (t.parent = p),
                      (this.m_root = p)),
                  i = t.parent;
                null != i;

              )
                (r = (i = this.balance(i)).child1),
                  (n = i.child2),
                  ld && console.assert(null != r),
                  ld && console.assert(null != n),
                  (i.height = 1 + dd(r.height, n.height)),
                  i.aabb.combine(r.aabb, n.aabb),
                  (i = i.parent);
            }),
            (t.prototype.removeLeaf = function (t) {
              if (t !== this.m_root) {
                var e,
                  i = t.parent,
                  r = i.parent;
                if (((e = i.child1 === t ? i.child2 : i.child1), null != r)) {
                  r.child1 === i ? (r.child1 = e) : (r.child2 = e),
                    (e.parent = r),
                    this.freeNode(i);
                  for (var n = r; null != n; ) {
                    var o = (n = this.balance(n)).child1,
                      s = n.child2;
                    n.aabb.combine(o.aabb, s.aabb),
                      (n.height = 1 + dd(o.height, s.height)),
                      (n = n.parent);
                  }
                } else (this.m_root = e), (e.parent = null), this.freeNode(i);
              } else this.m_root = null;
            }),
            (t.prototype.balance = function (t) {
              ld && console.assert(null != t);
              var e = t;
              if (e.isLeaf() || e.height < 2) return t;
              var i = e.child1,
                r = e.child2,
                n = r.height - i.height;
              if (n > 1) {
                var o = r.child1,
                  s = r.child2;
                return (
                  (r.child1 = e),
                  (r.parent = e.parent),
                  (e.parent = r),
                  null != r.parent
                    ? r.parent.child1 === t
                      ? (r.parent.child1 = r)
                      : (r.parent.child2 = r)
                    : (this.m_root = r),
                  o.height > s.height
                    ? ((r.child2 = o),
                      (e.child2 = s),
                      (s.parent = e),
                      e.aabb.combine(i.aabb, s.aabb),
                      r.aabb.combine(e.aabb, o.aabb),
                      (e.height = 1 + dd(i.height, s.height)),
                      (r.height = 1 + dd(e.height, o.height)))
                    : ((r.child2 = s),
                      (e.child2 = o),
                      (o.parent = e),
                      e.aabb.combine(i.aabb, o.aabb),
                      r.aabb.combine(e.aabb, s.aabb),
                      (e.height = 1 + dd(i.height, o.height)),
                      (r.height = 1 + dd(e.height, s.height))),
                  r
                );
              }
              if (n < -1) {
                var a = i.child1,
                  h = i.child2;
                return (
                  (i.child1 = e),
                  (i.parent = e.parent),
                  (e.parent = i),
                  null != i.parent
                    ? i.parent.child1 === e
                      ? (i.parent.child1 = i)
                      : (i.parent.child2 = i)
                    : (this.m_root = i),
                  a.height > h.height
                    ? ((i.child2 = a),
                      (e.child1 = h),
                      (h.parent = e),
                      e.aabb.combine(r.aabb, h.aabb),
                      i.aabb.combine(e.aabb, a.aabb),
                      (e.height = 1 + dd(r.height, h.height)),
                      (i.height = 1 + dd(e.height, a.height)))
                    : ((i.child2 = h),
                      (e.child1 = a),
                      (a.parent = e),
                      e.aabb.combine(r.aabb, a.aabb),
                      i.aabb.combine(e.aabb, h.aabb),
                      (e.height = 1 + dd(r.height, a.height)),
                      (i.height = 1 + dd(e.height, h.height))),
                  i
                );
              }
              return e;
            }),
            (t.prototype.getHeight = function () {
              return null == this.m_root ? 0 : this.m_root.height;
            }),
            (t.prototype.getAreaRatio = function () {
              if (null == this.m_root) return 0;
              for (
                var t,
                  e = this.m_root.aabb.getPerimeter(),
                  i = 0,
                  r = this.iteratorPool.allocate().preorder(this.m_root);
                (t = r.next());

              )
                t.height < 0 || (i += t.aabb.getPerimeter());
              return this.iteratorPool.release(r), i / e;
            }),
            (t.prototype.computeHeight = function (t) {
              var e;
              if ((e = void 0 !== t ? this.m_nodes[t] : this.m_root).isLeaf())
                return 0;
              var i = this.computeHeight(e.child1.id),
                r = this.computeHeight(e.child2.id);
              return 1 + dd(i, r);
            }),
            (t.prototype.validateStructure = function (t) {
              if (null != t) {
                t === this.m_root && ld && console.assert(null == t.parent);
                var e = t.child1,
                  i = t.child2;
                if (t.isLeaf())
                  return (
                    ld && console.assert(null == e),
                    ld && console.assert(null == i),
                    void (ld && console.assert(0 === t.height))
                  );
                ld && console.assert(e.parent === t),
                  ld && console.assert(i.parent === t),
                  this.validateStructure(e),
                  this.validateStructure(i);
              }
            }),
            (t.prototype.validateMetrics = function (t) {
              if (null != t) {
                var e = t.child1,
                  i = t.child2;
                if (t.isLeaf())
                  return (
                    ld && console.assert(null == e),
                    ld && console.assert(null == i),
                    void (ld && console.assert(0 === t.height))
                  );
                var r = e.height,
                  n = i.height,
                  o = 1 + dd(r, n);
                ld && console.assert(t.height === o);
                var s = new od();
                s.combine(e.aabb, i.aabb),
                  ld && console.assert(od.areEqual(s, t.aabb)),
                  this.validateMetrics(e),
                  this.validateMetrics(i);
              }
            }),
            (t.prototype.validate = function () {
              ld &&
                (this.validateStructure(this.m_root),
                this.validateMetrics(this.m_root),
                console.assert(this.getHeight() === this.computeHeight()));
            }),
            (t.prototype.getMaxBalance = function () {
              for (
                var t,
                  e = 0,
                  i = this.iteratorPool.allocate().preorder(this.m_root);
                (t = i.next());

              )
                if (!(t.height <= 1)) {
                  ld && console.assert(!t.isLeaf());
                  var r = cd(t.child2.height - t.child1.height);
                  e = dd(e, r);
                }
              return this.iteratorPool.release(i), e;
            }),
            (t.prototype.rebuildBottomUp = function () {
              for (
                var t,
                  e = [],
                  i = 0,
                  r = this.iteratorPool.allocate().preorder(this.m_root);
                (t = r.next());

              )
                t.height < 0 ||
                  (t.isLeaf()
                    ? ((t.parent = null), (e[i] = t), ++i)
                    : this.freeNode(t));
              for (this.iteratorPool.release(r); i > 1; ) {
                for (var n = 1 / 0, o = -1, s = -1, a = 0; a < i; ++a)
                  for (var h = e[a].aabb, u = a + 1; u < i; ++u) {
                    var l = e[u].aabb,
                      c = od.combinedPerimeter(h, l);
                    c < n && ((o = a), (s = u), (n = c));
                  }
                var d = e[o],
                  p = e[s],
                  _ = this.allocateNode();
                (_.child1 = d),
                  (_.child2 = p),
                  (_.height = 1 + dd(d.height, p.height)),
                  _.aabb.combine(d.aabb, p.aabb),
                  (_.parent = null),
                  (d.parent = _),
                  (p.parent = _),
                  (e[s] = e[i - 1]),
                  (e[o] = _),
                  --i;
              }
              (this.m_root = e[0]), ld && this.validate();
            }),
            (t.prototype.shiftOrigin = function (t) {
              for (
                var e, i = this.iteratorPool.allocate().preorder(this.m_root);
                (e = i.next());

              ) {
                var r = e.aabb;
                (r.lowerBound.x -= t.x),
                  (r.lowerBound.y -= t.y),
                  (r.upperBound.x -= t.x),
                  (r.upperBound.y -= t.y);
              }
              this.iteratorPool.release(i);
            }),
            (t.prototype.query = function (t, e) {
              ld && console.assert("function" == typeof e);
              var i = this.stackPool.allocate();
              for (i.push(this.m_root); i.length > 0; ) {
                var r = i.pop();
                if (null != r && od.testOverlap(r.aabb, t))
                  if (r.isLeaf()) {
                    if (!1 === e(r.id)) return;
                  } else i.push(r.child1), i.push(r.child2);
              }
              this.stackPool.release(i);
            }),
            (t.prototype.rayCast = function (t, e) {
              ld && console.assert("function" == typeof e);
              var i = t.p1,
                r = t.p2,
                n = td.sub(r, i);
              ld && console.assert(n.lengthSquared() > 0), n.normalize();
              var o = td.crossNumVec2(1, n),
                s = td.abs(o),
                a = t.maxFraction,
                h = new od(),
                u = td.combine(1 - a, i, a, r);
              h.combinePoints(i, u);
              var l = this.stackPool.allocate(),
                c = this.inputPool.allocate();
              for (l.push(this.m_root); l.length > 0; ) {
                var d = l.pop();
                if (null != d && !1 !== od.testOverlap(d.aabb, h)) {
                  var p = d.aabb.getCenter(),
                    _ = d.aabb.getExtents();
                  if (!(cd(td.dot(o, td.sub(i, p))) - td.dot(s, _) > 0))
                    if (d.isLeaf()) {
                      (c.p1 = td.clone(t.p1)),
                        (c.p2 = td.clone(t.p2)),
                        (c.maxFraction = a);
                      var f = e(c, d.id);
                      if (0 === f) break;
                      f > 0 &&
                        ((a = f),
                        (u = td.combine(1 - a, i, a, r)),
                        h.combinePoints(i, u));
                    } else l.push(d.child1), l.push(d.child2);
                }
              }
              this.stackPool.release(l), this.inputPool.release(c);
            }),
            t
          );
        })(),
        md = (function () {
          function t() {
            (this.parents = []), (this.states = []);
          }
          return (
            (t.prototype.preorder = function (t) {
              return (
                (this.parents.length = 0),
                this.parents.push(t),
                (this.states.length = 0),
                this.states.push(0),
                this
              );
            }),
            (t.prototype.next = function () {
              for (; this.parents.length > 0; ) {
                var t = this.parents.length - 1,
                  e = this.parents[t];
                if (0 === this.states[t]) return (this.states[t] = 1), e;
                if (1 === this.states[t] && ((this.states[t] = 2), e.child1))
                  return (
                    this.parents.push(e.child1), this.states.push(1), e.child1
                  );
                if (2 === this.states[t] && ((this.states[t] = 3), e.child2))
                  return (
                    this.parents.push(e.child2), this.states.push(1), e.child2
                  );
                this.parents.pop(), this.states.pop();
              }
            }),
            (t.prototype.close = function () {
              this.parents.length = 0;
            }),
            t
          );
        })(),
        yd = "undefined" != typeof ASSERT && ASSERT,
        gd = Math.max,
        vd = Math.min,
        bd = (function () {
          function t() {
            var t = this;
            (this.m_tree = new fd()),
              (this.m_moveBuffer = []),
              (this.query = function (e, i) {
                t.m_tree.query(e, i);
              }),
              (this.queryCallback = function (e) {
                if (e === t.m_queryProxyId) return !0;
                var i = vd(e, t.m_queryProxyId),
                  r = gd(e, t.m_queryProxyId),
                  n = t.m_tree.getUserData(i),
                  o = t.m_tree.getUserData(r);
                return t.m_callback(n, o), !0;
              });
          }
          return (
            (t.prototype.getUserData = function (t) {
              return this.m_tree.getUserData(t);
            }),
            (t.prototype.testOverlap = function (t, e) {
              var i = this.m_tree.getFatAABB(t),
                r = this.m_tree.getFatAABB(e);
              return od.testOverlap(i, r);
            }),
            (t.prototype.getFatAABB = function (t) {
              return this.m_tree.getFatAABB(t);
            }),
            (t.prototype.getProxyCount = function () {
              return this.m_moveBuffer.length;
            }),
            (t.prototype.getTreeHeight = function () {
              return this.m_tree.getHeight();
            }),
            (t.prototype.getTreeBalance = function () {
              return this.m_tree.getMaxBalance();
            }),
            (t.prototype.getTreeQuality = function () {
              return this.m_tree.getAreaRatio();
            }),
            (t.prototype.rayCast = function (t, e) {
              this.m_tree.rayCast(t, e);
            }),
            (t.prototype.shiftOrigin = function (t) {
              this.m_tree.shiftOrigin(t);
            }),
            (t.prototype.createProxy = function (t, e) {
              yd && console.assert(od.isValid(t));
              var i = this.m_tree.createProxy(t, e);
              return this.bufferMove(i), i;
            }),
            (t.prototype.destroyProxy = function (t) {
              this.unbufferMove(t), this.m_tree.destroyProxy(t);
            }),
            (t.prototype.moveProxy = function (t, e, i) {
              yd && console.assert(od.isValid(e)),
                this.m_tree.moveProxy(t, e, i) && this.bufferMove(t);
            }),
            (t.prototype.touchProxy = function (t) {
              this.bufferMove(t);
            }),
            (t.prototype.bufferMove = function (t) {
              this.m_moveBuffer.push(t);
            }),
            (t.prototype.unbufferMove = function (t) {
              for (var e = 0; e < this.m_moveBuffer.length; ++e)
                this.m_moveBuffer[e] === t && (this.m_moveBuffer[e] = null);
            }),
            (t.prototype.updatePairs = function (t) {
              for (
                yd && console.assert("function" == typeof t),
                  this.m_callback = t;
                this.m_moveBuffer.length > 0;

              )
                if (
                  ((this.m_queryProxyId = this.m_moveBuffer.pop()),
                  null !== this.m_queryProxyId)
                ) {
                  var e = this.m_tree.getFatAABB(this.m_queryProxyId);
                  this.m_tree.query(e, this.queryCallback);
                }
            }),
            t
          );
        })(),
        xd = Math.sin,
        wd = Math.cos,
        Td = Math.sqrt;
      function Ad(t, e) {
        return { x: t, y: e };
      }
      function Sd(t, e, i) {
        return (t.x = e), (t.y = i), t;
      }
      function Ed(t, e) {
        return (t.x = e.x), (t.y = e.y), t;
      }
      function Cd(t) {
        return (t.x = 0), (t.y = 0), t;
      }
      function Md(t) {
        return (t.x = -t.x), (t.y = -t.y), t;
      }
      function Pd(t, e) {
        return (t.x += e.x), (t.y += e.y), t;
      }
      function Bd(t, e) {
        return (t.x -= e.x), (t.y -= e.y), t;
      }
      function Od(t, e, i) {
        return (t.x = e.x - i.x), (t.y = e.y - i.y), t;
      }
      function Rd(t, e) {
        return (t.x *= e), (t.y *= e), t;
      }
      function Id(t, e, i) {
        return (t.x = e * i.x), (t.y = e * i.y), t;
      }
      function kd(t, e, i) {
        return (t.x += e * i.x), (t.y += e * i.y), t;
      }
      function Fd(t, e, i) {
        return (t.x += e.x * i.x), (t.y += e.y * i.y), t;
      }
      function Dd(t, e, i) {
        return (t.x -= e * i.x), (t.y -= e * i.y), t;
      }
      function Nd(t, e, i, r, n) {
        return (t.x = e * i.x + r * n.x), (t.y = e * i.y + r * n.y), t;
      }
      function Ld(t, e, i, r, n, o, s) {
        return (
          (t.x = e * i.x + r * n.x + o * s.x),
          (t.y = e * i.y + r * n.y + o * s.y),
          t
        );
      }
      function Ud(t) {
        var e = Td(t.x * t.x + t.y * t.y);
        if (e > 0) {
          var i = 1 / e;
          (t.x *= i), (t.y *= i);
        }
        return t;
      }
      function Gd(t, e, i) {
        var r = i * e.y,
          n = -i * e.x;
        return (t.x = r), (t.y = n), t;
      }
      function Vd(t, e, i) {
        var r = -e * i.y,
          n = e * i.x;
        return (t.x = r), (t.y = n), t;
      }
      function jd(t, e) {
        return t.x * e.y - t.y * e.x;
      }
      function zd(t, e) {
        return t.x * e.x + t.y * e.y;
      }
      function Xd(t) {
        return t.x * t.x + t.y * t.y;
      }
      function Hd(t, e) {
        var i = t.x - e.x,
          r = t.y - e.y;
        return Td(i * i + r * r);
      }
      function Yd(t, e) {
        var i = t.x - e.x,
          r = t.y - e.y;
        return i * i + r * r;
      }
      function Wd(t, e, i) {
        return (t.x = e.c * i.x - e.s * i.y), (t.y = e.s * i.x + e.c * i.y), t;
      }
      function qd(t, e, i) {
        var r = e.c * i.x + e.s * i.y,
          n = -e.s * i.x + e.c * i.y;
        return (t.x = r), (t.y = n), t;
      }
      function $d(t, e, i) {
        return { p: Ad(t, e), q: ((r = i), { s: xd(r), c: wd(r) }) };
        var r;
      }
      function Kd(t, e) {
        return (
          (t.p.x = e.p.x), (t.p.y = e.p.y), (t.q.s = e.q.s), (t.q.c = e.q.c), t
        );
      }
      function Jd(t, e, i) {
        var r = e.q.c * i.x - e.q.s * i.y + e.p.x,
          n = e.q.s * i.x + e.q.c * i.y + e.p.y;
        return (t.x = r), (t.y = n), t;
      }
      function Zd(t, e, i) {
        var r = i.x - e.p.x,
          n = i.y - e.p.y,
          o = e.q.c * r + e.q.s * n,
          s = -e.q.s * r + e.q.c * n;
        return (t.x = o), (t.y = s), t;
      }
      function Qd(t, e, i, r) {
        var n = e.q.c * r.x - e.q.s * r.y + e.p.x,
          o = e.q.s * r.x + e.q.c * r.y + e.p.y,
          s = n - i.p.x,
          a = o - i.p.y,
          h = i.q.c * s + i.q.s * a,
          u = -i.q.s * s + i.q.c * a;
        return (t.x = h), (t.y = u), t;
      }
      function tp(t, e, i) {
        var r = e.q.c * i.q.c + e.q.s * i.q.s,
          n = e.q.c * i.q.s - e.q.s * i.q.c,
          o = e.q.c * (i.p.x - e.p.x) + e.q.s * (i.p.y - e.p.y),
          s = -e.q.s * (i.p.x - e.p.x) + e.q.c * (i.p.y - e.p.y);
        return (t.q.c = r), (t.q.s = n), (t.p.x = o), (t.p.y = s), t;
      }
      var ep = "undefined" != typeof ASSERT && ASSERT,
        ip = "undefined" != typeof CONSTRUCTOR_FACTORY && CONSTRUCTOR_FACTORY,
        rp = Math.sin,
        np = Math.cos,
        op = Math.atan2,
        sp = (function () {
          function t(e) {
            if (ip && !(this instanceof t)) return new t(e);
            "number" == typeof e
              ? this.setAngle(e)
              : "object" == typeof e
              ? this.setRot(e)
              : this.setIdentity();
          }
          return (
            (t.neo = function (e) {
              var i = Object.create(t.prototype);
              return i.setAngle(e), i;
            }),
            (t.clone = function (e) {
              ep && t.assert(e);
              var i = Object.create(t.prototype);
              return (i.s = e.s), (i.c = e.c), i;
            }),
            (t.identity = function () {
              var e = Object.create(t.prototype);
              return (e.s = 0), (e.c = 1), e;
            }),
            (t.isValid = function (t) {
              return null != t && Number.isFinite(t.s) && Number.isFinite(t.c);
            }),
            (t.assert = function (e) {
              ep && console.assert(!t.isValid(e), "Invalid Rot!", e);
            }),
            (t.prototype.setIdentity = function () {
              (this.s = 0), (this.c = 1);
            }),
            (t.prototype.set = function (e) {
              "object" == typeof e
                ? (ep && t.assert(e), (this.s = e.s), (this.c = e.c))
                : (ep && console.assert(Number.isFinite(e)),
                  (this.s = rp(e)),
                  (this.c = np(e)));
            }),
            (t.prototype.setRot = function (e) {
              ep && t.assert(e), (this.s = e.s), (this.c = e.c);
            }),
            (t.prototype.setAngle = function (t) {
              ep && console.assert(Number.isFinite(t)),
                (this.s = rp(t)),
                (this.c = np(t));
            }),
            (t.prototype.getAngle = function () {
              return op(this.s, this.c);
            }),
            (t.prototype.getXAxis = function () {
              return td.neo(this.c, this.s);
            }),
            (t.prototype.getYAxis = function () {
              return td.neo(-this.s, this.c);
            }),
            (t.mul = function (e, i) {
              if ((ep && t.assert(e), "c" in i && "s" in i)) {
                ep && t.assert(i);
                var r = t.identity();
                return (
                  (r.s = e.s * i.c + e.c * i.s),
                  (r.c = e.c * i.c - e.s * i.s),
                  r
                );
              }
              if ("x" in i && "y" in i)
                return (
                  ep && td.assert(i),
                  td.neo(e.c * i.x - e.s * i.y, e.s * i.x + e.c * i.y)
                );
            }),
            (t.mulRot = function (e, i) {
              ep && t.assert(e), ep && t.assert(i);
              var r = t.identity();
              return (
                (r.s = e.s * i.c + e.c * i.s), (r.c = e.c * i.c - e.s * i.s), r
              );
            }),
            (t.mulVec2 = function (e, i) {
              return (
                ep && t.assert(e),
                ep && td.assert(i),
                td.neo(e.c * i.x - e.s * i.y, e.s * i.x + e.c * i.y)
              );
            }),
            (t.mulSub = function (t, e, i) {
              var r = t.c * (e.x - i.x) - t.s * (e.y - i.y),
                n = t.s * (e.x - i.x) + t.c * (e.y - i.y);
              return td.neo(r, n);
            }),
            (t.mulT = function (e, i) {
              if ("c" in i && "s" in i) {
                ep && t.assert(i);
                var r = t.identity();
                return (
                  (r.s = e.c * i.s - e.s * i.c),
                  (r.c = e.c * i.c + e.s * i.s),
                  r
                );
              }
              if ("x" in i && "y" in i)
                return (
                  ep && td.assert(i),
                  td.neo(e.c * i.x + e.s * i.y, -e.s * i.x + e.c * i.y)
                );
            }),
            (t.mulTRot = function (e, i) {
              ep && t.assert(i);
              var r = t.identity();
              return (
                (r.s = e.c * i.s - e.s * i.c), (r.c = e.c * i.c + e.s * i.s), r
              );
            }),
            (t.mulTVec2 = function (t, e) {
              return (
                ep && td.assert(e),
                td.neo(t.c * e.x + t.s * e.y, -t.s * e.x + t.c * e.y)
              );
            }),
            t
          );
        })(),
        ap = "undefined" != typeof ASSERT && ASSERT,
        hp = Math.atan2,
        up = Math.PI,
        lp = Ad(0, 0),
        cp = (function () {
          function t() {
            (this.localCenter = td.zero()),
              (this.c = td.zero()),
              (this.a = 0),
              (this.alpha0 = 0),
              (this.c0 = td.zero()),
              (this.a0 = 0);
          }
          return (
            (t.prototype.recycle = function () {
              Cd(this.localCenter),
                Cd(this.c),
                (this.a = 0),
                (this.alpha0 = 0),
                Cd(this.c0),
                (this.a0 = 0);
            }),
            (t.prototype.setTransform = function (t) {
              Jd(lp, t, this.localCenter),
                Ed(this.c, lp),
                Ed(this.c0, lp),
                (this.a = this.a0 = hp(t.q.s, t.q.c));
            }),
            (t.prototype.setLocalCenter = function (t, e) {
              Ed(this.localCenter, t),
                Jd(lp, e, this.localCenter),
                Ed(this.c, lp),
                Ed(this.c0, lp);
            }),
            (t.prototype.getTransform = function (t, e) {
              void 0 === e && (e = 0),
                (function (t, e) {
                  (t.c = wd(e)), (t.s = xd(e));
                })(t.q, (1 - e) * this.a0 + e * this.a),
                Nd(t.p, 1 - e, this.c0, e, this.c),
                Bd(t.p, Wd(lp, t.q, this.localCenter));
            }),
            (t.prototype.advance = function (t) {
              ap && console.assert(this.alpha0 < 1);
              var e = (t - this.alpha0) / (1 - this.alpha0);
              Nd(this.c0, e, this.c, 1 - e, this.c0),
                (this.a0 = e * this.a + (1 - e) * this.a0),
                (this.alpha0 = t);
            }),
            (t.prototype.forward = function () {
              (this.a0 = this.a), Ed(this.c0, this.c);
            }),
            (t.prototype.normalize = function () {
              var t = Hc(this.a0, -up, +up);
              (this.a -= this.a0 - t), (this.a0 = t);
            }),
            (t.prototype.set = function (t) {
              Ed(this.localCenter, t.localCenter),
                Ed(this.c, t.c),
                (this.a = t.a),
                (this.alpha0 = t.alpha0),
                Ed(this.c0, t.c0),
                (this.a0 = t.a0);
            }),
            t
          );
        })(),
        dp = "undefined" != typeof ASSERT && ASSERT,
        pp = "undefined" != typeof CONSTRUCTOR_FACTORY && CONSTRUCTOR_FACTORY,
        _p = (function () {
          function t(e, i) {
            if (pp && !(this instanceof t)) return new t(e, i);
            (this.p = td.zero()),
              (this.q = sp.identity()),
              void 0 !== e && this.p.setVec2(e),
              void 0 !== i && this.q.setAngle(i);
          }
          return (
            (t.clone = function (e) {
              var i = Object.create(t.prototype);
              return (i.p = td.clone(e.p)), (i.q = sp.clone(e.q)), i;
            }),
            (t.neo = function (e, i) {
              var r = Object.create(t.prototype);
              return (r.p = td.clone(e)), (r.q = sp.clone(i)), r;
            }),
            (t.identity = function () {
              var e = Object.create(t.prototype);
              return (e.p = td.zero()), (e.q = sp.identity()), e;
            }),
            (t.prototype.setIdentity = function () {
              this.p.setZero(), this.q.setIdentity();
            }),
            (t.prototype.set = function (t, e) {
              void 0 === e
                ? (this.p.set(t.p), this.q.set(t.q))
                : (this.p.set(t), this.q.set(e));
            }),
            (t.prototype.setNum = function (t, e) {
              this.p.setVec2(t), this.q.setAngle(e);
            }),
            (t.prototype.setTransform = function (t) {
              this.p.setVec2(t.p), this.q.setRot(t.q);
            }),
            (t.isValid = function (t) {
              return null != t && td.isValid(t.p) && sp.isValid(t.q);
            }),
            (t.assert = function (e) {
              dp && console.assert(!t.isValid(e), "Invalid Transform!", e);
            }),
            (t.mul = function (e, i) {
              if (Array.isArray(i)) {
                dp && t.assert(e);
                for (var r = [], n = 0; n < i.length; n++)
                  r[n] = t.mul(e, i[n]);
                return r;
              }
              return "x" in i && "y" in i
                ? t.mulVec2(e, i)
                : "p" in i && "q" in i
                ? t.mulXf(e, i)
                : void 0;
            }),
            (t.mulAll = function (e, i) {
              dp && t.assert(e);
              for (var r = [], n = 0; n < i.length; n++) r[n] = t.mul(e, i[n]);
              return r;
            }),
            (t.mulFn = function (e) {
              return (
                dp && t.assert(e),
                function (i) {
                  return t.mul(e, i);
                }
              );
            }),
            (t.mulVec2 = function (e, i) {
              dp && t.assert(e), dp && td.assert(i);
              var r = e.q.c * i.x - e.q.s * i.y + e.p.x,
                n = e.q.s * i.x + e.q.c * i.y + e.p.y;
              return td.neo(r, n);
            }),
            (t.mulXf = function (e, i) {
              dp && t.assert(e), dp && t.assert(i);
              var r = t.identity();
              return (
                (r.q = sp.mulRot(e.q, i.q)),
                (r.p = td.add(sp.mulVec2(e.q, i.p), e.p)),
                r
              );
            }),
            (t.mulT = function (e, i) {
              return "x" in i && "y" in i
                ? t.mulTVec2(e, i)
                : "p" in i && "q" in i
                ? t.mulTXf(e, i)
                : void 0;
            }),
            (t.mulTVec2 = function (e, i) {
              dp && t.assert(e), dp && td.assert(i);
              var r = i.x - e.p.x,
                n = i.y - e.p.y,
                o = e.q.c * r + e.q.s * n,
                s = -e.q.s * r + e.q.c * n;
              return td.neo(o, s);
            }),
            (t.mulTXf = function (e, i) {
              dp && t.assert(e), dp && t.assert(i);
              var r = t.identity();
              return (
                r.q.setRot(sp.mulTRot(e.q, i.q)),
                r.p.setVec2(sp.mulTVec2(e.q, td.sub(i.p, e.p))),
                r
              );
            }),
            t
          );
        })(),
        fp = function () {
          (this.v = td.zero()), (this.w = 0);
        },
        mp = Math.sin,
        yp = Math.cos,
        gp = (function () {
          function t() {
            (this.c = td.zero()), (this.a = 0);
          }
          return (
            (t.prototype.getTransform = function (t, e) {
              return (
                (t.q.c = yp(this.a)),
                (t.q.s = mp(this.a)),
                (t.p.x = this.c.x - (t.q.c * e.x - t.q.s * e.y)),
                (t.p.y = this.c.y - (t.q.s * e.x + t.q.c * e.y)),
                t
              );
            }),
            t
          );
        })();
      function vp(t, e, i, r) {
        return (
          (t.q.c = yp(r)),
          (t.q.s = mp(r)),
          (t.p.x = i.x - (t.q.c * e.x - t.q.s * e.y)),
          (t.p.y = i.y - (t.q.s * e.x + t.q.c * e.y)),
          t
        );
      }
      var bp = (function () {
          function t() {
            (this.style = {}), (this.appData = {});
          }
          return (
            (t.isValid = function (t) {
              return (
                null != t &&
                "string" == typeof t.m_type &&
                "number" == typeof t.m_radius
              );
            }),
            t
          );
        })(),
        xp = "undefined" != typeof ASSERT && ASSERT,
        wp = new od(),
        Tp = new od(),
        Ap = Ad(0, 0),
        Sp = {
          userData: null,
          friction: 0.2,
          restitution: 0,
          density: 0,
          isSensor: !1,
          filterGroupIndex: 0,
          filterCategoryBits: 1,
          filterMaskBits: 65535,
        },
        Ep = function (t, e) {
          (this.aabb = new od()), (this.fixture = t), (this.childIndex = e);
        },
        Cp = (function () {
          function t(t, e, i) {
            (this.style = {}),
              (this.appData = {}),
              e.shape
                ? ((i = e), (e = e.shape))
                : "number" == typeof i && (i = { density: i }),
              (i = Vc(i, Sp)),
              (this.m_body = t),
              (this.m_friction = i.friction),
              (this.m_restitution = i.restitution),
              (this.m_density = i.density),
              (this.m_isSensor = i.isSensor),
              (this.m_filterGroupIndex = i.filterGroupIndex),
              (this.m_filterCategoryBits = i.filterCategoryBits),
              (this.m_filterMaskBits = i.filterMaskBits),
              (this.m_shape = e),
              (this.m_next = null),
              (this.m_proxies = []),
              (this.m_proxyCount = 0);
            for (var r = this.m_shape.getChildCount(), n = 0; n < r; ++n)
              this.m_proxies[n] = new Ep(this, n);
            (this.m_userData = i.userData),
              "object" == typeof i.style &&
                null !== i.style &&
                (this.style = i.style);
          }
          return (
            (t.prototype._reset = function () {
              var t = this.getBody(),
                e = t.m_world.m_broadPhase;
              this.destroyProxies(e),
                this.m_shape._reset && this.m_shape._reset();
              for (var i = this.m_shape.getChildCount(), r = 0; r < i; ++r)
                this.m_proxies[r] = new Ep(this, r);
              this.createProxies(e, t.m_xf), t.resetMassData();
            }),
            (t.prototype._serialize = function () {
              return {
                friction: this.m_friction,
                restitution: this.m_restitution,
                density: this.m_density,
                isSensor: this.m_isSensor,
                filterGroupIndex: this.m_filterGroupIndex,
                filterCategoryBits: this.m_filterCategoryBits,
                filterMaskBits: this.m_filterMaskBits,
                shape: this.m_shape,
              };
            }),
            (t._deserialize = function (e, i, r) {
              var n = r(bp, e.shape);
              return n && new t(i, n, e);
            }),
            (t.prototype.getType = function () {
              return this.m_shape.m_type;
            }),
            (t.prototype.getShape = function () {
              return this.m_shape;
            }),
            (t.prototype.isSensor = function () {
              return this.m_isSensor;
            }),
            (t.prototype.setSensor = function (t) {
              t != this.m_isSensor &&
                (this.m_body.setAwake(!0), (this.m_isSensor = t));
            }),
            (t.prototype.getUserData = function () {
              return this.m_userData;
            }),
            (t.prototype.setUserData = function (t) {
              this.m_userData = t;
            }),
            (t.prototype.getBody = function () {
              return this.m_body;
            }),
            (t.prototype.getNext = function () {
              return this.m_next;
            }),
            (t.prototype.getDensity = function () {
              return this.m_density;
            }),
            (t.prototype.setDensity = function (t) {
              xp && console.assert(Number.isFinite(t) && t >= 0),
                (this.m_density = t);
            }),
            (t.prototype.getFriction = function () {
              return this.m_friction;
            }),
            (t.prototype.setFriction = function (t) {
              this.m_friction = t;
            }),
            (t.prototype.getRestitution = function () {
              return this.m_restitution;
            }),
            (t.prototype.setRestitution = function (t) {
              this.m_restitution = t;
            }),
            (t.prototype.testPoint = function (t) {
              return this.m_shape.testPoint(this.m_body.getTransform(), t);
            }),
            (t.prototype.rayCast = function (t, e, i) {
              return this.m_shape.rayCast(t, e, this.m_body.getTransform(), i);
            }),
            (t.prototype.getMassData = function (t) {
              this.m_shape.computeMass(t, this.m_density);
            }),
            (t.prototype.getAABB = function (t) {
              return (
                xp && console.assert(0 <= t && t < this.m_proxies.length),
                this.m_proxies[t].aabb
              );
            }),
            (t.prototype.createProxies = function (t, e) {
              xp && console.assert(0 == this.m_proxyCount),
                (this.m_proxyCount = this.m_shape.getChildCount());
              for (var i = 0; i < this.m_proxyCount; ++i) {
                var r = this.m_proxies[i];
                this.m_shape.computeAABB(r.aabb, e, i),
                  (r.proxyId = t.createProxy(r.aabb, r));
              }
            }),
            (t.prototype.destroyProxies = function (t) {
              for (var e = 0; e < this.m_proxyCount; ++e) {
                var i = this.m_proxies[e];
                t.destroyProxy(i.proxyId), (i.proxyId = null);
              }
              this.m_proxyCount = 0;
            }),
            (t.prototype.synchronize = function (t, e, i) {
              for (var r = 0; r < this.m_proxyCount; ++r) {
                var n = this.m_proxies[r];
                this.m_shape.computeAABB(wp, e, n.childIndex),
                  this.m_shape.computeAABB(Tp, i, n.childIndex),
                  n.aabb.combine(wp, Tp),
                  Od(Ap, i.p, e.p),
                  t.moveProxy(n.proxyId, n.aabb, Ap);
              }
            }),
            (t.prototype.setFilterData = function (t) {
              (this.m_filterGroupIndex = t.groupIndex),
                (this.m_filterCategoryBits = t.categoryBits),
                (this.m_filterMaskBits = t.maskBits),
                this.refilter();
            }),
            (t.prototype.getFilterGroupIndex = function () {
              return this.m_filterGroupIndex;
            }),
            (t.prototype.setFilterGroupIndex = function (t) {
              (this.m_filterGroupIndex = t), this.refilter();
            }),
            (t.prototype.getFilterCategoryBits = function () {
              return this.m_filterCategoryBits;
            }),
            (t.prototype.setFilterCategoryBits = function (t) {
              (this.m_filterCategoryBits = t), this.refilter();
            }),
            (t.prototype.getFilterMaskBits = function () {
              return this.m_filterMaskBits;
            }),
            (t.prototype.setFilterMaskBits = function (t) {
              (this.m_filterMaskBits = t), this.refilter();
            }),
            (t.prototype.refilter = function () {
              if (null != this.m_body) {
                for (var t = this.m_body.getContactList(); t; ) {
                  var e = t.contact,
                    i = e.getFixtureA(),
                    r = e.getFixtureB();
                  (i != this && r != this) || e.flagForFiltering(),
                    (t = t.next);
                }
                var n = this.m_body.getWorld();
                if (null != n)
                  for (
                    var o = n.m_broadPhase, s = 0;
                    s < this.m_proxyCount;
                    ++s
                  )
                    o.touchProxy(this.m_proxies[s].proxyId);
              }
            }),
            (t.prototype.shouldCollide = function (t) {
              if (
                t.m_filterGroupIndex === this.m_filterGroupIndex &&
                0 !== t.m_filterGroupIndex
              )
                return t.m_filterGroupIndex > 0;
              var e = !!(t.m_filterMaskBits & this.m_filterCategoryBits),
                i = !!(t.m_filterCategoryBits & this.m_filterMaskBits);
              return e && i;
            }),
            t
          );
        })(),
        Mp = "undefined" != typeof ASSERT && ASSERT,
        Pp = "static",
        Bp = "kinematic",
        Op = "dynamic",
        Rp = Ad(0, 0),
        Ip = Ad(0, 0),
        kp = Ad(0, 0),
        Fp = Ad(0, 0),
        Dp = $d(0, 0, 0),
        Np = {
          type: Pp,
          position: td.zero(),
          angle: 0,
          linearVelocity: td.zero(),
          angularVelocity: 0,
          linearDamping: 0,
          angularDamping: 0,
          fixedRotation: !1,
          bullet: !1,
          gravityScale: new td(1, 1),
          allowSleep: !0,
          awake: !0,
          active: !0,
          userData: null,
        },
        Lp = (function () {
          function t(t, e) {
            (this.style = {}),
              (this.appData = {}),
              (e = Vc(e, Np)),
              Mp && console.assert(td.isValid(e.position)),
              Mp && console.assert(td.isValid(e.linearVelocity)),
              Mp && console.assert(Number.isFinite(e.angle)),
              Mp && console.assert(Number.isFinite(e.angularVelocity)),
              Mp &&
                console.assert(
                  Number.isFinite(e.angularDamping) && e.angularDamping >= 0
                ),
              Mp &&
                console.assert(
                  Number.isFinite(e.linearDamping) && e.linearDamping >= 0
                ),
              (this.m_world = t),
              (this.m_awakeFlag = e.awake),
              (this.m_autoSleepFlag = e.allowSleep),
              (this.m_bulletFlag = e.bullet),
              (this.m_fixedRotationFlag = e.fixedRotation),
              (this.m_activeFlag = e.active),
              (this.m_islandFlag = !1),
              (this.m_toiFlag = !1),
              (this.m_userData = e.userData),
              (this.m_type = e.type),
              this.m_type == Op
                ? ((this.m_mass = 1), (this.m_invMass = 1))
                : ((this.m_mass = 0), (this.m_invMass = 0)),
              (this.m_I = 0),
              (this.m_invI = 0),
              (this.m_xf = _p.identity()),
              this.m_xf.p.setVec2(e.position),
              this.m_xf.q.setAngle(e.angle),
              (this.m_sweep = new cp()),
              this.m_sweep.setTransform(this.m_xf),
              (this.c_velocity = new fp()),
              (this.c_position = new gp()),
              (this.m_force = td.zero()),
              (this.m_torque = 0),
              (this.m_linearVelocity = td.clone(e.linearVelocity)),
              (this.m_angularVelocity = e.angularVelocity),
              (this.m_linearDamping = e.linearDamping),
              (this.m_angularDamping = e.angularDamping),
              (this.m_gravityScale = e.gravityScale),
              (this.m_sleepTime = 0),
              (this.m_jointList = null),
              (this.m_contactList = null),
              (this.m_fixtureList = null),
              (this.m_prev = null),
              (this.m_next = null),
              (this.m_destroyed = !1),
              "object" == typeof e.style &&
                null !== e.style &&
                (this.style = e.style);
          }
          return (
            (t.prototype._serialize = function () {
              for (var t = [], e = this.m_fixtureList; e; e = e.m_next)
                t.push(e);
              return {
                type: this.m_type,
                bullet: this.m_bulletFlag,
                position: this.m_xf.p,
                angle: this.m_xf.q.getAngle(),
                linearVelocity: this.m_linearVelocity,
                angularVelocity: this.m_angularVelocity,
                fixtures: t,
              };
            }),
            (t._deserialize = function (e, i, r) {
              var n = new t(i, e);
              if (e.fixtures)
                for (var o = e.fixtures.length - 1; o >= 0; o--) {
                  var s = r(Cp, e.fixtures[o], n);
                  n._addFixture(s);
                }
              return n;
            }),
            (t.prototype.isWorldLocked = function () {
              return !(!this.m_world || !this.m_world.isLocked());
            }),
            (t.prototype.getWorld = function () {
              return this.m_world;
            }),
            (t.prototype.getNext = function () {
              return this.m_next;
            }),
            (t.prototype.setUserData = function (t) {
              this.m_userData = t;
            }),
            (t.prototype.getUserData = function () {
              return this.m_userData;
            }),
            (t.prototype.getFixtureList = function () {
              return this.m_fixtureList;
            }),
            (t.prototype.getJointList = function () {
              return this.m_jointList;
            }),
            (t.prototype.getContactList = function () {
              return this.m_contactList;
            }),
            (t.prototype.isStatic = function () {
              return this.m_type == Pp;
            }),
            (t.prototype.isDynamic = function () {
              return this.m_type == Op;
            }),
            (t.prototype.isKinematic = function () {
              return this.m_type == Bp;
            }),
            (t.prototype.setStatic = function () {
              return this.setType(Pp), this;
            }),
            (t.prototype.setDynamic = function () {
              return this.setType(Op), this;
            }),
            (t.prototype.setKinematic = function () {
              return this.setType(Bp), this;
            }),
            (t.prototype.getType = function () {
              return this.m_type;
            }),
            (t.prototype.setType = function (t) {
              if (
                (Mp && console.assert(t === Pp || t === Bp || t === Op),
                Mp && console.assert(0 == this.isWorldLocked()),
                1 != this.isWorldLocked() && this.m_type != t)
              ) {
                (this.m_type = t),
                  this.resetMassData(),
                  this.m_type == Pp &&
                    (this.m_linearVelocity.setZero(),
                    (this.m_angularVelocity = 0),
                    this.m_sweep.forward(),
                    this.synchronizeFixtures()),
                  this.setAwake(!0),
                  this.m_force.setZero(),
                  (this.m_torque = 0);
                for (var e = this.m_contactList; e; ) {
                  var i = e;
                  (e = e.next), this.m_world.destroyContact(i.contact);
                }
                this.m_contactList = null;
                for (
                  var r = this.m_world.m_broadPhase, n = this.m_fixtureList;
                  n;
                  n = n.m_next
                )
                  for (var o = 0; o < n.m_proxyCount; ++o)
                    r.touchProxy(n.m_proxies[o].proxyId);
              }
            }),
            (t.prototype.isBullet = function () {
              return this.m_bulletFlag;
            }),
            (t.prototype.setBullet = function (t) {
              this.m_bulletFlag = !!t;
            }),
            (t.prototype.isSleepingAllowed = function () {
              return this.m_autoSleepFlag;
            }),
            (t.prototype.setSleepingAllowed = function (t) {
              (this.m_autoSleepFlag = !!t),
                0 == this.m_autoSleepFlag && this.setAwake(!0);
            }),
            (t.prototype.isAwake = function () {
              return this.m_awakeFlag;
            }),
            (t.prototype.setAwake = function (t) {
              t
                ? ((this.m_awakeFlag = !0), (this.m_sleepTime = 0))
                : ((this.m_awakeFlag = !1),
                  (this.m_sleepTime = 0),
                  this.m_linearVelocity.setZero(),
                  (this.m_angularVelocity = 0),
                  this.m_force.setZero(),
                  (this.m_torque = 0));
            }),
            (t.prototype.isActive = function () {
              return this.m_activeFlag;
            }),
            (t.prototype.setActive = function (t) {
              if (
                (Mp && console.assert(0 == this.isWorldLocked()),
                t != this.m_activeFlag)
              )
                if (((this.m_activeFlag = !!t), this.m_activeFlag)) {
                  for (
                    var e = this.m_world.m_broadPhase, i = this.m_fixtureList;
                    i;
                    i = i.m_next
                  )
                    i.createProxies(e, this.m_xf);
                  this.m_world.m_newFixture = !0;
                } else {
                  for (
                    e = this.m_world.m_broadPhase, i = this.m_fixtureList;
                    i;
                    i = i.m_next
                  )
                    i.destroyProxies(e);
                  for (var r = this.m_contactList; r; ) {
                    var n = r;
                    (r = r.next), this.m_world.destroyContact(n.contact);
                  }
                  this.m_contactList = null;
                }
            }),
            (t.prototype.isFixedRotation = function () {
              return this.m_fixedRotationFlag;
            }),
            (t.prototype.setFixedRotation = function (t) {
              this.m_fixedRotationFlag != t &&
                ((this.m_fixedRotationFlag = !!t),
                (this.m_angularVelocity = 0),
                this.resetMassData());
            }),
            (t.prototype.getTransform = function () {
              return this.m_xf;
            }),
            (t.prototype.setTransform = function (t, e) {
              if (
                (Mp && console.assert(0 == this.isWorldLocked()),
                1 != this.isWorldLocked())
              ) {
                "number" == typeof e
                  ? this.m_xf.setNum(t, e)
                  : this.m_xf.setTransform(t),
                  this.m_sweep.setTransform(this.m_xf);
                for (
                  var i = this.m_world.m_broadPhase, r = this.m_fixtureList;
                  r;
                  r = r.m_next
                )
                  r.synchronize(i, this.m_xf, this.m_xf);
                this.setAwake(!0);
              }
            }),
            (t.prototype.synchronizeTransform = function () {
              this.m_sweep.getTransform(this.m_xf, 1);
            }),
            (t.prototype.synchronizeFixtures = function () {
              this.m_sweep.getTransform(Dp, 0);
              for (
                var t = this.m_world.m_broadPhase, e = this.m_fixtureList;
                e;
                e = e.m_next
              )
                e.synchronize(t, Dp, this.m_xf);
            }),
            (t.prototype.advance = function (t) {
              this.m_sweep.advance(t),
                Ed(this.m_sweep.c, this.m_sweep.c0),
                (this.m_sweep.a = this.m_sweep.a0),
                this.m_sweep.getTransform(this.m_xf, 1);
            }),
            (t.prototype.getPosition = function () {
              return this.m_xf.p;
            }),
            (t.prototype.setPosition = function (t) {
              this.setTransform(t, this.m_sweep.a);
            }),
            (t.prototype.getAngle = function () {
              return this.m_sweep.a;
            }),
            (t.prototype.setAngle = function (t) {
              this.setTransform(this.m_xf.p, t);
            }),
            (t.prototype.getWorldCenter = function () {
              return this.m_sweep.c;
            }),
            (t.prototype.getLocalCenter = function () {
              return this.m_sweep.localCenter;
            }),
            (t.prototype.getLinearVelocity = function () {
              return this.m_linearVelocity;
            }),
            (t.prototype.getLinearVelocityFromWorldPoint = function (t) {
              var e = td.sub(t, this.m_sweep.c);
              return td.add(
                this.m_linearVelocity,
                td.crossNumVec2(this.m_angularVelocity, e)
              );
            }),
            (t.prototype.getLinearVelocityFromLocalPoint = function (t) {
              return this.getLinearVelocityFromWorldPoint(
                this.getWorldPoint(t)
              );
            }),
            (t.prototype.setLinearVelocity = function (t) {
              this.m_type != Pp &&
                (td.dot(t, t) > 0 && this.setAwake(!0),
                this.m_linearVelocity.setVec2(t));
            }),
            (t.prototype.getAngularVelocity = function () {
              return this.m_angularVelocity;
            }),
            (t.prototype.setAngularVelocity = function (t) {
              this.m_type != Pp &&
                (t * t > 0 && this.setAwake(!0), (this.m_angularVelocity = t));
            }),
            (t.prototype.getLinearDamping = function () {
              return this.m_linearDamping;
            }),
            (t.prototype.setLinearDamping = function (t) {
              this.m_linearDamping = t;
            }),
            (t.prototype.getAngularDamping = function () {
              return this.m_angularDamping;
            }),
            (t.prototype.setAngularDamping = function (t) {
              this.m_angularDamping = t;
            }),
            (t.prototype.getGravityScale = function () {
              return this.m_gravityScale;
            }),
            (t.prototype.setGravityScale = function (t) {
              this.m_gravityScale = t;
            }),
            (t.prototype.getMass = function () {
              return this.m_mass;
            }),
            (t.prototype.getInertia = function () {
              return (
                this.m_I +
                this.m_mass *
                  td.dot(this.m_sweep.localCenter, this.m_sweep.localCenter)
              );
            }),
            (t.prototype.getMassData = function (t) {
              (t.mass = this.m_mass),
                (t.I = this.getInertia()),
                Ed(t.center, this.m_sweep.localCenter);
            }),
            (t.prototype.resetMassData = function () {
              if (
                ((this.m_mass = 0),
                (this.m_invMass = 0),
                (this.m_I = 0),
                (this.m_invI = 0),
                Cd(this.m_sweep.localCenter),
                this.isStatic() || this.isKinematic())
              )
                return (
                  Ed(this.m_sweep.c0, this.m_xf.p),
                  Ed(this.m_sweep.c, this.m_xf.p),
                  void (this.m_sweep.a0 = this.m_sweep.a)
                );
              Mp && console.assert(this.isDynamic()), Cd(Ip);
              for (var t = this.m_fixtureList; t; t = t.m_next)
                if (0 != t.m_density) {
                  var e = { mass: 0, center: Ad(0, 0), I: 0 };
                  t.getMassData(e),
                    (this.m_mass += e.mass),
                    kd(Ip, e.mass, e.center),
                    (this.m_I += e.I);
                }
              this.m_mass > 0
                ? ((this.m_invMass = 1 / this.m_mass),
                  Id(Ip, this.m_invMass, Ip))
                : ((this.m_mass = 1), (this.m_invMass = 1)),
                this.m_I > 0 && 0 == this.m_fixedRotationFlag
                  ? ((this.m_I -= this.m_mass * zd(Ip, Ip)),
                    Mp && console.assert(this.m_I > 0),
                    (this.m_invI = 1 / this.m_I))
                  : ((this.m_I = 0), (this.m_invI = 0)),
                Ed(Rp, this.m_sweep.c),
                this.m_sweep.setLocalCenter(Ip, this.m_xf),
                Od(kp, this.m_sweep.c, Rp),
                Vd(Fp, this.m_angularVelocity, kp),
                Pd(this.m_linearVelocity, Fp);
            }),
            (t.prototype.setMassData = function (t) {
              Mp && console.assert(0 == this.isWorldLocked()),
                1 != this.isWorldLocked() &&
                  this.m_type == Op &&
                  ((this.m_invMass = 0),
                  (this.m_I = 0),
                  (this.m_invI = 0),
                  (this.m_mass = t.mass),
                  this.m_mass <= 0 && (this.m_mass = 1),
                  (this.m_invMass = 1 / this.m_mass),
                  t.I > 0 &&
                    0 == this.m_fixedRotationFlag &&
                    ((this.m_I = t.I - this.m_mass * zd(t.center, t.center)),
                    Mp && console.assert(this.m_I > 0),
                    (this.m_invI = 1 / this.m_I)),
                  Ed(Rp, this.m_sweep.c),
                  this.m_sweep.setLocalCenter(t.center, this.m_xf),
                  Od(kp, this.m_sweep.c, Rp),
                  Vd(Fp, this.m_angularVelocity, kp),
                  Pd(this.m_linearVelocity, Fp));
            }),
            (t.prototype.applyForce = function (t, e, i) {
              void 0 === i && (i = !0),
                this.m_type == Op &&
                  (i && 0 == this.m_awakeFlag && this.setAwake(!0),
                  this.m_awakeFlag &&
                    (this.m_force.add(t),
                    (this.m_torque += td.crossVec2Vec2(
                      td.sub(e, this.m_sweep.c),
                      t
                    ))));
            }),
            (t.prototype.applyForceToCenter = function (t, e) {
              void 0 === e && (e = !0),
                this.m_type == Op &&
                  (e && 0 == this.m_awakeFlag && this.setAwake(!0),
                  this.m_awakeFlag && this.m_force.add(t));
            }),
            (t.prototype.applyTorque = function (t, e) {
              void 0 === e && (e = !0),
                this.m_type == Op &&
                  (e && 0 == this.m_awakeFlag && this.setAwake(!0),
                  this.m_awakeFlag && (this.m_torque += t));
            }),
            (t.prototype.applyLinearImpulse = function (t, e, i) {
              void 0 === i && (i = !0),
                this.m_type == Op &&
                  (i && 0 == this.m_awakeFlag && this.setAwake(!0),
                  this.m_awakeFlag &&
                    (this.m_linearVelocity.addMul(this.m_invMass, t),
                    (this.m_angularVelocity +=
                      this.m_invI *
                      td.crossVec2Vec2(td.sub(e, this.m_sweep.c), t))));
            }),
            (t.prototype.applyAngularImpulse = function (t, e) {
              void 0 === e && (e = !0),
                this.m_type == Op &&
                  (e && 0 == this.m_awakeFlag && this.setAwake(!0),
                  this.m_awakeFlag &&
                    (this.m_angularVelocity += this.m_invI * t));
            }),
            (t.prototype.shouldCollide = function (t) {
              if (this.m_type != Op && t.m_type != Op) return !1;
              for (var e = this.m_jointList; e; e = e.next)
                if (e.other == t && 0 == e.joint.m_collideConnected) return !1;
              return !0;
            }),
            (t.prototype._addFixture = function (t) {
              if (
                (Mp && console.assert(0 == this.isWorldLocked()),
                1 == this.isWorldLocked())
              )
                return null;
              if (this.m_activeFlag) {
                var e = this.m_world.m_broadPhase;
                t.createProxies(e, this.m_xf);
              }
              return (
                (t.m_next = this.m_fixtureList),
                (this.m_fixtureList = t),
                t.m_density > 0 && this.resetMassData(),
                (this.m_world.m_newFixture = !0),
                t
              );
            }),
            (t.prototype.createFixture = function (t, e) {
              if (
                (Mp && console.assert(0 == this.isWorldLocked()),
                1 == this.isWorldLocked())
              )
                return null;
              var i = new Cp(this, t, e);
              return this._addFixture(i), i;
            }),
            (t.prototype.destroyFixture = function (t) {
              if (
                (Mp && console.assert(0 == this.isWorldLocked()),
                1 != this.isWorldLocked())
              ) {
                Mp && console.assert(t.m_body == this);
                var e = !1;
                if (this.m_fixtureList === t)
                  (this.m_fixtureList = t.m_next), (e = !0);
                else
                  for (var i = this.m_fixtureList; null != i; ) {
                    if (i.m_next === t) {
                      (i.m_next = t.m_next), (e = !0);
                      break;
                    }
                    i = i.m_next;
                  }
                Mp && console.assert(e);
                for (var r = this.m_contactList; r; ) {
                  var n = r.contact;
                  r = r.next;
                  var o = n.getFixtureA(),
                    s = n.getFixtureB();
                  (t != o && t != s) || this.m_world.destroyContact(n);
                }
                if (this.m_activeFlag) {
                  var a = this.m_world.m_broadPhase;
                  t.destroyProxies(a);
                }
                (t.m_body = null),
                  (t.m_next = null),
                  this.m_world.publish("remove-fixture", t),
                  this.resetMassData();
              }
            }),
            (t.prototype.getWorldPoint = function (t) {
              return _p.mulVec2(this.m_xf, t);
            }),
            (t.prototype.getWorldVector = function (t) {
              return sp.mulVec2(this.m_xf.q, t);
            }),
            (t.prototype.getLocalPoint = function (t) {
              return _p.mulTVec2(this.m_xf, t);
            }),
            (t.prototype.getLocalVector = function (t) {
              return sp.mulTVec2(this.m_xf.q, t);
            }),
            (t.STATIC = "static"),
            (t.KINEMATIC = "kinematic"),
            (t.DYNAMIC = "dynamic"),
            t
          );
        })(),
        Up = "undefined" != typeof ASSERT && ASSERT,
        Gp = function () {
          (this.other = null),
            (this.joint = null),
            (this.prev = null),
            (this.next = null);
        },
        Vp = (function () {
          function t(t, e, i) {
            (this.m_type = "unknown-joint"),
              (this.m_prev = null),
              (this.m_next = null),
              (this.m_edgeA = new Gp()),
              (this.m_edgeB = new Gp()),
              (this.m_islandFlag = !1),
              (this.style = {}),
              (this.appData = {}),
              (e = "bodyA" in t ? t.bodyA : e),
              (i = "bodyB" in t ? t.bodyB : i),
              Up && console.assert(!!e),
              Up && console.assert(!!i),
              Up && console.assert(e != i),
              (this.m_bodyA = e),
              (this.m_bodyB = i),
              (this.m_collideConnected = !!t.collideConnected),
              (this.m_userData = t.userData),
              "object" == typeof t.style &&
                null !== t.style &&
                (this.style = t.style);
          }
          return (
            (t.prototype.isActive = function () {
              return this.m_bodyA.isActive() && this.m_bodyB.isActive();
            }),
            (t.prototype.getType = function () {
              return this.m_type;
            }),
            (t.prototype.getBodyA = function () {
              return this.m_bodyA;
            }),
            (t.prototype.getBodyB = function () {
              return this.m_bodyB;
            }),
            (t.prototype.getNext = function () {
              return this.m_next;
            }),
            (t.prototype.getUserData = function () {
              return this.m_userData;
            }),
            (t.prototype.setUserData = function (t) {
              this.m_userData = t;
            }),
            (t.prototype.getCollideConnected = function () {
              return this.m_collideConnected;
            }),
            (t.prototype.shiftOrigin = function (t) {}),
            (t.prototype._resetAnchors = function (t) {
              return this._reset(t);
            }),
            t
          );
        })(),
        jp = {
          gjkCalls: 0,
          gjkIters: 0,
          gjkMaxIters: 0,
          toiTime: 0,
          toiMaxTime: 0,
          toiCalls: 0,
          toiIters: 0,
          toiMaxIters: 0,
          toiRootIters: 0,
          toiMaxRootIters: 0,
          toString: function (t) {
            t = "string" == typeof t ? t : "\n";
            var e = "";
            for (var i in this)
              "function" != typeof this[i] &&
                "object" != typeof this[i] &&
                (e += i + ": " + this[i] + t);
            return e;
          },
        };
      var zp = "undefined" != typeof ASSERT && ASSERT,
        Xp = Math.max,
        Hp = Ad(0, 0),
        Yp = Ad(0, 0),
        Wp = Ad(0, 0),
        qp = Ad(0, 0),
        $p = Ad(0, 0),
        Kp = Ad(0, 0),
        Jp = Ad(0, 0);
      (jp.gjkCalls = 0), (jp.gjkIters = 0), (jp.gjkMaxIters = 0);
      var Zp = (function () {
          function t() {
            (this.proxyA = new i_()),
              (this.proxyB = new i_()),
              (this.transformA = _p.identity()),
              (this.transformB = _p.identity()),
              (this.useRadii = !1);
          }
          return (
            (t.prototype.recycle = function () {
              this.proxyA.recycle(),
                this.proxyB.recycle(),
                this.transformA.setIdentity(),
                this.transformB.setIdentity(),
                (this.useRadii = !1);
            }),
            t
          );
        })(),
        Qp = (function () {
          function t() {
            (this.pointA = Ad(0, 0)),
              (this.pointB = Ad(0, 0)),
              (this.distance = 0),
              (this.iterations = 0);
          }
          return (
            (t.prototype.recycle = function () {
              Cd(this.pointA),
                Cd(this.pointB),
                (this.distance = 0),
                (this.iterations = 0);
            }),
            t
          );
        })(),
        t_ = (function () {
          function t() {
            (this.metric = 0),
              (this.indexA = []),
              (this.indexB = []),
              (this.count = 0);
          }
          return (
            (t.prototype.recycle = function () {
              (this.metric = 0),
                (this.indexA.length = 0),
                (this.indexB.length = 0),
                (this.count = 0);
            }),
            t
          );
        })(),
        e_ = function (t, e, i) {
          ++jp.gjkCalls;
          var r = i.proxyA,
            n = i.proxyB,
            o = i.transformA,
            s = i.transformB;
          a_.recycle(), a_.readCache(e, r, o, n, s);
          for (
            var a = a_.m_v,
              h = hd.maxDistanceIterations,
              u = [],
              l = [],
              c = 0,
              d = 0;
            d < h;

          ) {
            c = a_.m_count;
            for (var p = 0; p < c; ++p)
              (u[p] = a[p].indexA), (l[p] = a[p].indexB);
            if ((a_.solve(), 3 === a_.m_count)) break;
            var _ = a_.getSearchDirection();
            if (Xd(_) < 1e-18) break;
            var f = a[a_.m_count];
            (f.indexA = r.getSupport(qd(Hp, o.q, Id(Hp, -1, _)))),
              Jd(f.wA, o, r.getVertex(f.indexA)),
              (f.indexB = n.getSupport(qd(Hp, s.q, _))),
              Jd(f.wB, s, n.getVertex(f.indexB)),
              Od(f.w, f.wB, f.wA),
              ++d,
              ++jp.gjkIters;
            var m = !1;
            for (p = 0; p < c; ++p)
              if (f.indexA === u[p] && f.indexB === l[p]) {
                m = !0;
                break;
              }
            if (m) break;
            ++a_.m_count;
          }
          if (
            ((jp.gjkMaxIters = Xp(jp.gjkMaxIters, d)),
            a_.getWitnessPoints(t.pointA, t.pointB),
            (t.distance = Hd(t.pointA, t.pointB)),
            (t.iterations = d),
            a_.writeCache(e),
            i.useRadii)
          ) {
            var y = r.m_radius,
              g = n.m_radius;
            if (t.distance > y + g && t.distance > zc)
              (t.distance -= y + g),
                Od(Yp, t.pointB, t.pointA),
                Ud(Yp),
                kd(t.pointA, y, Yp),
                Dd(t.pointB, g, Yp);
            else {
              var v = Od(Hp, t.pointA, t.pointB);
              Ed(t.pointA, v), Ed(t.pointB, v), (t.distance = 0);
            }
          }
        },
        i_ = (function () {
          function t() {
            (this.m_vertices = []), (this.m_count = 0), (this.m_radius = 0);
          }
          return (
            (t.prototype.recycle = function () {
              (this.m_vertices.length = 0),
                (this.m_count = 0),
                (this.m_radius = 0);
            }),
            (t.prototype.getVertexCount = function () {
              return this.m_count;
            }),
            (t.prototype.getVertex = function (t) {
              return (
                zp && console.assert(0 <= t && t < this.m_count),
                this.m_vertices[t]
              );
            }),
            (t.prototype.getSupport = function (t) {
              for (var e = -1, i = -1 / 0, r = 0; r < this.m_count; ++r) {
                var n = zd(this.m_vertices[r], t);
                n > i && ((e = r), (i = n));
              }
              return e;
            }),
            (t.prototype.getSupportVertex = function (t) {
              return this.m_vertices[this.getSupport(t)];
            }),
            (t.prototype.set = function (t, e) {
              zp && console.assert("function" == typeof t.computeDistanceProxy),
                t.computeDistanceProxy(this, e);
            }),
            (t.prototype.setVertices = function (t, e, i) {
              (this.m_vertices = t), (this.m_count = e), (this.m_radius = i);
            }),
            t
          );
        })(),
        r_ = (function () {
          function t() {
            (this.wA = Ad(0, 0)),
              (this.indexA = 0),
              (this.wB = Ad(0, 0)),
              (this.indexB = 0),
              (this.w = Ad(0, 0)),
              (this.a = 0);
          }
          return (
            (t.prototype.recycle = function () {
              (this.indexA = 0),
                (this.indexB = 0),
                Cd(this.wA),
                Cd(this.wB),
                Cd(this.w),
                (this.a = 0);
            }),
            (t.prototype.set = function (t) {
              (this.indexA = t.indexA),
                (this.indexB = t.indexB),
                Ed(this.wA, t.wA),
                Ed(this.wB, t.wB),
                Ed(this.w, t.w),
                (this.a = t.a);
            }),
            t
          );
        })(),
        n_ = Ad(0, 0),
        o_ = Ad(0, 0),
        s_ = (function () {
          function t() {
            (this.m_v1 = new r_()),
              (this.m_v2 = new r_()),
              (this.m_v3 = new r_()),
              (this.m_v = [this.m_v1, this.m_v2, this.m_v3]);
          }
          return (
            (t.prototype.recycle = function () {
              this.m_v1.recycle(),
                this.m_v2.recycle(),
                this.m_v3.recycle(),
                (this.m_count = 0);
            }),
            (t.prototype.toString = function () {
              return 3 === this.m_count
                ? [
                    "+" + this.m_count,
                    this.m_v1.a,
                    this.m_v1.wA.x,
                    this.m_v1.wA.y,
                    this.m_v1.wB.x,
                    this.m_v1.wB.y,
                    this.m_v2.a,
                    this.m_v2.wA.x,
                    this.m_v2.wA.y,
                    this.m_v2.wB.x,
                    this.m_v2.wB.y,
                    this.m_v3.a,
                    this.m_v3.wA.x,
                    this.m_v3.wA.y,
                    this.m_v3.wB.x,
                    this.m_v3.wB.y,
                  ].toString()
                : 2 === this.m_count
                ? [
                    "+" + this.m_count,
                    this.m_v1.a,
                    this.m_v1.wA.x,
                    this.m_v1.wA.y,
                    this.m_v1.wB.x,
                    this.m_v1.wB.y,
                    this.m_v2.a,
                    this.m_v2.wA.x,
                    this.m_v2.wA.y,
                    this.m_v2.wB.x,
                    this.m_v2.wB.y,
                  ].toString()
                : 1 === this.m_count
                ? [
                    "+" + this.m_count,
                    this.m_v1.a,
                    this.m_v1.wA.x,
                    this.m_v1.wA.y,
                    this.m_v1.wB.x,
                    this.m_v1.wB.y,
                  ].toString()
                : "+" + this.m_count;
            }),
            (t.prototype.readCache = function (t, e, i, r, n) {
              zp && console.assert(t.count <= 3), (this.m_count = t.count);
              for (var o = 0; o < this.m_count; ++o) {
                ((l = this.m_v[o]).indexA = t.indexA[o]),
                  (l.indexB = t.indexB[o]);
                var s = e.getVertex(l.indexA),
                  a = r.getVertex(l.indexB);
                Jd(l.wA, i, s), Jd(l.wB, n, a), Od(l.w, l.wB, l.wA), (l.a = 0);
              }
              if (this.m_count > 1) {
                var h = t.metric,
                  u = this.getMetric();
                (u < 0.5 * h || 2 * h < u || u < zc) && (this.m_count = 0);
              }
              var l;
              0 === this.m_count &&
                (((l = this.m_v[0]).indexA = 0),
                (l.indexB = 0),
                (s = e.getVertex(0)),
                (a = r.getVertex(0)),
                Jd(l.wA, i, s),
                Jd(l.wB, n, a),
                Od(l.w, l.wB, l.wA),
                (l.a = 1),
                (this.m_count = 1));
            }),
            (t.prototype.writeCache = function (t) {
              (t.metric = this.getMetric()), (t.count = this.m_count);
              for (var e = 0; e < this.m_count; ++e)
                (t.indexA[e] = this.m_v[e].indexA),
                  (t.indexB[e] = this.m_v[e].indexB);
            }),
            (t.prototype.getSearchDirection = function () {
              var t = this.m_v1,
                e = this.m_v2;
              switch ((this.m_v3, this.m_count)) {
                case 1:
                  return Sd(n_, -t.w.x, -t.w.y);
                case 2:
                  return (
                    Od(Wp, e.w, t.w),
                    -jd(Wp, t.w) > 0 ? Sd(n_, -Wp.y, Wp.x) : Sd(n_, Wp.y, -Wp.x)
                  );
                default:
                  return zp && console.assert(!1), Cd(n_);
              }
            }),
            (t.prototype.getClosestPoint = function () {
              var t = this.m_v1,
                e = this.m_v2;
              switch ((this.m_v3, this.m_count)) {
                case 0:
                default:
                  return zp && console.assert(!1), Cd(o_);
                case 1:
                  return Ed(o_, t.w);
                case 2:
                  return Nd(o_, t.a, t.w, e.a, e.w);
                case 3:
                  return Cd(o_);
              }
            }),
            (t.prototype.getWitnessPoints = function (t, e) {
              var i = this.m_v1,
                r = this.m_v2,
                n = this.m_v3;
              switch (this.m_count) {
                case 0:
                default:
                  zp && console.assert(!1);
                  break;
                case 1:
                  Ed(t, i.wA), Ed(e, i.wB);
                  break;
                case 2:
                  Nd(t, i.a, i.wA, r.a, r.wA), Nd(e, i.a, i.wB, r.a, r.wB);
                  break;
                case 3:
                  Ld(t, i.a, i.wA, r.a, r.wA, n.a, n.wA), Ed(e, t);
              }
            }),
            (t.prototype.getMetric = function () {
              switch (this.m_count) {
                case 0:
                default:
                  return zp && console.assert(!1), 0;
                case 1:
                  return 0;
                case 2:
                  return Hd(this.m_v1.w, this.m_v2.w);
                case 3:
                  return jd(
                    Od(Kp, this.m_v2.w, this.m_v1.w),
                    Od(Jp, this.m_v3.w, this.m_v1.w)
                  );
              }
            }),
            (t.prototype.solve = function () {
              switch (this.m_count) {
                case 1:
                  break;
                case 2:
                  this.solve2();
                  break;
                case 3:
                  this.solve3();
                  break;
                default:
                  zp && console.assert(!1);
              }
            }),
            (t.prototype.solve2 = function () {
              var t = this.m_v1.w,
                e = this.m_v2.w;
              Od(Wp, e, t);
              var i = -zd(t, Wp);
              if (i <= 0) return (this.m_v1.a = 1), void (this.m_count = 1);
              var r = zd(e, Wp);
              if (r <= 0)
                return (
                  (this.m_v2.a = 1),
                  (this.m_count = 1),
                  void this.m_v1.set(this.m_v2)
                );
              var n = 1 / (r + i);
              (this.m_v1.a = r * n), (this.m_v2.a = i * n), (this.m_count = 2);
            }),
            (t.prototype.solve3 = function () {
              var t = this.m_v1.w,
                e = this.m_v2.w,
                i = this.m_v3.w;
              Od(Wp, e, t);
              var r = zd(t, Wp),
                n = zd(e, Wp),
                o = -r;
              Od(qp, i, t);
              var s = zd(t, qp),
                a = zd(i, qp),
                h = -s;
              Od($p, i, e);
              var u = zd(e, $p),
                l = zd(i, $p),
                c = -u,
                d = jd(Wp, qp),
                p = d * jd(e, i),
                _ = d * jd(i, t),
                f = d * jd(t, e);
              if (o <= 0 && h <= 0)
                return (this.m_v1.a = 1), void (this.m_count = 1);
              if (n > 0 && o > 0 && f <= 0) {
                var m = 1 / (n + o);
                return (
                  (this.m_v1.a = n * m),
                  (this.m_v2.a = o * m),
                  void (this.m_count = 2)
                );
              }
              if (a > 0 && h > 0 && _ <= 0) {
                var y = 1 / (a + h);
                return (
                  (this.m_v1.a = a * y),
                  (this.m_v3.a = h * y),
                  (this.m_count = 2),
                  void this.m_v2.set(this.m_v3)
                );
              }
              if (n <= 0 && c <= 0)
                return (
                  (this.m_v2.a = 1),
                  (this.m_count = 1),
                  void this.m_v1.set(this.m_v2)
                );
              if (a <= 0 && l <= 0)
                return (
                  (this.m_v3.a = 1),
                  (this.m_count = 1),
                  void this.m_v1.set(this.m_v3)
                );
              if (l > 0 && c > 0 && p <= 0) {
                var g = 1 / (l + c);
                return (
                  (this.m_v2.a = l * g),
                  (this.m_v3.a = c * g),
                  (this.m_count = 2),
                  void this.m_v1.set(this.m_v3)
                );
              }
              var v = 1 / (p + _ + f);
              (this.m_v1.a = p * v),
                (this.m_v2.a = _ * v),
                (this.m_v3.a = f * v),
                (this.m_count = 3);
            }),
            t
          );
        })(),
        a_ = new s_(),
        h_ = new Zp(),
        u_ = new t_(),
        l_ = new Qp(),
        c_ = function (t, e, i, r, n, o) {
          return (
            h_.recycle(),
            h_.proxyA.set(t, e),
            h_.proxyB.set(i, r),
            Kd(h_.transformA, n),
            Kd(h_.transformB, o),
            (h_.useRadii = !0),
            l_.recycle(),
            u_.recycle(),
            e_(l_, u_, h_),
            l_.distance < 1e-8
          );
        };
      (e_.testOverlap = c_),
        (e_.Input = Zp),
        (e_.Output = Qp),
        (e_.Proxy = i_),
        (e_.Cache = t_);
      var d_,
        p_ = (function () {
          function t() {
            (this.proxyA = new i_()),
              (this.proxyB = new i_()),
              (this.transformA = _p.identity()),
              (this.transformB = _p.identity()),
              (this.translationB = td.zero());
          }
          return (
            (t.prototype.recycle = function () {
              this.proxyA.recycle(),
                this.proxyB.recycle(),
                this.transformA.setIdentity(),
                this.transformB.setIdentity(),
                Cd(this.translationB);
            }),
            t
          );
        })(),
        __ = function () {
          (this.point = td.zero()),
            (this.normal = td.zero()),
            (this.lambda = 1),
            (this.iterations = 0);
        },
        f_ = function (t, e) {
          (t.iterations = 0),
            (t.lambda = 1),
            t.normal.setZero(),
            t.point.setZero();
          var i = e.proxyA,
            r = e.proxyB,
            n = Xp(i.m_radius, hd.polygonRadius),
            o = n + Xp(r.m_radius, hd.polygonRadius),
            s = e.transformA,
            a = e.transformB,
            h = e.translationB,
            u = td.zero(),
            l = 0,
            c = new s_();
          c.m_count = 0;
          for (
            var d = c.m_v,
              p = i.getSupport(sp.mulTVec2(s.q, td.neg(h))),
              _ = _p.mulVec2(s, i.getVertex(p)),
              f = r.getSupport(sp.mulTVec2(a.q, h)),
              m = _p.mulVec2(a, r.getVertex(f)),
              y = td.sub(_, m),
              g = Xp(hd.polygonRadius, o - hd.polygonRadius),
              v = 0.5 * hd.linearSlop,
              b = 0;
            b < 20 && y.length() - g > v;

          ) {
            zp && console.assert(c.m_count < 3),
              (t.iterations += 1),
              (p = i.getSupport(sp.mulTVec2(s.q, td.neg(y)))),
              (_ = _p.mulVec2(s, i.getVertex(p))),
              (f = r.getSupport(sp.mulTVec2(a.q, y))),
              (m = _p.mulVec2(a, r.getVertex(f)));
            var x = td.sub(_, m);
            y.normalize();
            var w = td.dot(y, x),
              T = td.dot(y, h);
            if (w - g > l * T) {
              if (T <= 0) return !1;
              if ((l = (w - g) / T) > 1) return !1;
              u.setMul(-1, y), (c.m_count = 0);
            }
            var A = d[c.m_count];
            switch (
              ((A.indexA = f),
              (A.wA = td.combine(1, m, l, h)),
              (A.indexB = p),
              (A.wB = _),
              (A.w = td.sub(A.wB, A.wA)),
              (A.a = 1),
              (c.m_count += 1),
              c.m_count)
            ) {
              case 1:
                break;
              case 2:
                c.solve2();
                break;
              case 3:
                c.solve3();
                break;
              default:
                zp && console.assert(!1);
            }
            if (3 == c.m_count) return !1;
            y.setVec2(c.getClosestPoint()), ++b;
          }
          if (0 == b) return !1;
          var S = td.zero(),
            E = td.zero();
          return (
            c.getWitnessPoints(E, S),
            y.lengthSquared() > 0 && (u.setMul(-1, y), u.normalize()),
            (t.point = td.combine(1, S, n, u)),
            (t.normal = u),
            (t.lambda = l),
            (t.iterations = b),
            !0
          );
        },
        m_ = "undefined" != typeof ASSERT && ASSERT,
        y_ = Math.abs,
        g_ = Math.max,
        v_ = (function () {
          function t() {
            (this.proxyA = new i_()),
              (this.proxyB = new i_()),
              (this.sweepA = new cp()),
              (this.sweepB = new cp());
          }
          return (
            (t.prototype.recycle = function () {
              this.proxyA.recycle(),
                this.proxyB.recycle(),
                this.sweepA.recycle(),
                this.sweepB.recycle(),
                (this.tMax = -1);
            }),
            t
          );
        })();
      !(function (t) {
        (t[(t.e_unset = -1)] = "e_unset"),
          (t[(t.e_unknown = 0)] = "e_unknown"),
          (t[(t.e_failed = 1)] = "e_failed"),
          (t[(t.e_overlapped = 2)] = "e_overlapped"),
          (t[(t.e_touching = 3)] = "e_touching"),
          (t[(t.e_separated = 4)] = "e_separated");
      })(d_ || (d_ = {}));
      var b_ = (function () {
        function t() {
          (this.state = d_.e_unset), (this.t = -1);
        }
        return (
          (t.prototype.recycle = function () {
            (this.state = d_.e_unset), (this.t = -1);
          }),
          t
        );
      })();
      (jp.toiTime = 0),
        (jp.toiMaxTime = 0),
        (jp.toiCalls = 0),
        (jp.toiIters = 0),
        (jp.toiMaxIters = 0),
        (jp.toiRootIters = 0),
        (jp.toiMaxRootIters = 0);
      var x_,
        w_ = new Zp(),
        T_ = new Qp(),
        A_ = new t_(),
        S_ = $d(0, 0, 0),
        E_ = $d(0, 0, 0),
        C_ = Ad(0, 0),
        M_ = Ad(0, 0),
        P_ = Ad(0, 0),
        B_ = Ad(0, 0),
        O_ = Ad(0, 0),
        R_ = Ad(0, 0),
        I_ = Ad(0, 0),
        k_ = Ad(0, 0),
        F_ = function (t, e) {
          var i = Date.now();
          ++jp.toiCalls, (t.state = d_.e_unknown), (t.t = e.tMax);
          var r = e.proxyA,
            n = e.proxyB,
            o = e.sweepA,
            s = e.sweepB;
          o.normalize(), s.normalize();
          var a = e.tMax,
            h = r.m_radius + n.m_radius,
            u = g_(hd.linearSlop, h - 3 * hd.linearSlop),
            l = 0.25 * hd.linearSlop;
          m_ && console.assert(u > l);
          var c = 0,
            d = hd.maxTOIIterations,
            p = 0;
          for (
            A_.recycle(),
              w_.proxyA.setVertices(r.m_vertices, r.m_count, r.m_radius),
              w_.proxyB.setVertices(n.m_vertices, n.m_count, n.m_radius),
              w_.useRadii = !1;
            ;

          ) {
            if (
              (o.getTransform(S_, c),
              s.getTransform(E_, c),
              Kd(w_.transformA, S_),
              Kd(w_.transformB, E_),
              e_(T_, A_, w_),
              T_.distance <= 0)
            ) {
              (t.state = d_.e_overlapped), (t.t = 0);
              break;
            }
            if (T_.distance < u + l) {
              (t.state = d_.e_touching), (t.t = c);
              break;
            }
            N_.initialize(A_, r, o, n, s, c);
            for (var _ = !1, f = a, m = 0; ; ) {
              var y = N_.findMinSeparation(f);
              if (y > u + l) {
                (t.state = d_.e_separated), (t.t = a), (_ = !0);
                break;
              }
              if (y > u - l) {
                c = f;
                break;
              }
              var g = N_.evaluate(c);
              if (g < u - l) {
                (t.state = d_.e_failed), (t.t = c), (_ = !0);
                break;
              }
              if (g <= u + l) {
                (t.state = d_.e_touching), (t.t = c), (_ = !0);
                break;
              }
              for (var v = 0, b = c, x = f; ; ) {
                var w;
                (w = 1 & v ? b + ((u - g) * (x - b)) / (y - g) : 0.5 * (b + x)),
                  ++v,
                  ++jp.toiRootIters;
                var T = N_.evaluate(w);
                if (y_(T - u) < l) {
                  f = w;
                  break;
                }
                if ((T > u ? ((b = w), (g = T)) : ((x = w), (y = T)), 50 === v))
                  break;
              }
              if (
                ((jp.toiMaxRootIters = g_(jp.toiMaxRootIters, v)),
                ++m === hd.maxPolygonVertices)
              )
                break;
            }
            if ((++p, ++jp.toiIters, _)) break;
            if (p === d) {
              (t.state = d_.e_failed), (t.t = c);
              break;
            }
          }
          jp.toiMaxIters = g_(jp.toiMaxIters, p);
          var A = (function (t) {
            return Date.now() - t;
          })(i);
          (jp.toiMaxTime = g_(jp.toiMaxTime, A)),
            (jp.toiTime += A),
            N_.recycle();
        };
      !(function (t) {
        (t[(t.e_unset = -1)] = "e_unset"),
          (t[(t.e_points = 1)] = "e_points"),
          (t[(t.e_faceA = 2)] = "e_faceA"),
          (t[(t.e_faceB = 3)] = "e_faceB");
      })(x_ || (x_ = {}));
      var D_ = (function () {
          function t() {
            (this.m_proxyA = null),
              (this.m_proxyB = null),
              (this.m_sweepA = null),
              (this.m_sweepB = null),
              (this.m_type = x_.e_unset),
              (this.m_localPoint = Ad(0, 0)),
              (this.m_axis = Ad(0, 0)),
              (this.indexA = -1),
              (this.indexB = -1);
          }
          return (
            (t.prototype.recycle = function () {
              (this.m_proxyA = null),
                (this.m_proxyB = null),
                (this.m_sweepA = null),
                (this.m_sweepB = null),
                (this.m_type = x_.e_unset),
                Cd(this.m_localPoint),
                Cd(this.m_axis),
                (this.indexA = -1),
                (this.indexB = -1);
            }),
            (t.prototype.initialize = function (t, e, i, r, n, o) {
              var s = t.count;
              if (
                (m_ && console.assert(0 < s && s < 3),
                (this.m_proxyA = e),
                (this.m_proxyB = r),
                (this.m_sweepA = i),
                (this.m_sweepB = n),
                this.m_sweepA.getTransform(S_, o),
                this.m_sweepB.getTransform(E_, o),
                1 === s)
              ) {
                this.m_type = x_.e_points;
                var a = this.m_proxyA.getVertex(t.indexA[0]),
                  h = this.m_proxyB.getVertex(t.indexB[0]);
                return (
                  Jd(M_, S_, a),
                  Jd(P_, E_, h),
                  Od(this.m_axis, P_, M_),
                  (function (t) {
                    var e = Td(t.x * t.x + t.y * t.y);
                    if (0 !== e) {
                      var i = 1 / e;
                      (t.x *= i), (t.y *= i);
                    }
                    return e;
                  })(this.m_axis)
                );
              }
              if (t.indexA[0] === t.indexA[1]) {
                this.m_type = x_.e_faceB;
                var u = r.getVertex(t.indexB[0]),
                  l = r.getVertex(t.indexB[1]);
                Gd(this.m_axis, Od(C_, l, u), 1),
                  Ud(this.m_axis),
                  Wd(B_, E_.q, this.m_axis),
                  Nd(this.m_localPoint, 0.5, u, 0.5, l),
                  Jd(P_, E_, this.m_localPoint);
                var c = e.getVertex(t.indexA[0]);
                return (
                  (_ = zd(_p.mulVec2(S_, c), B_) - zd(P_, B_)) < 0 &&
                    (Md(this.m_axis), (_ = -_)),
                  _
                );
              }
              this.m_type = x_.e_faceA;
              var d = this.m_proxyA.getVertex(t.indexA[0]),
                p = this.m_proxyA.getVertex(t.indexA[1]);
              Gd(this.m_axis, Od(C_, p, d), 1),
                Ud(this.m_axis),
                Wd(B_, S_.q, this.m_axis),
                Nd(this.m_localPoint, 0.5, d, 0.5, p),
                Jd(M_, S_, this.m_localPoint);
              var _,
                f = this.m_proxyB.getVertex(t.indexB[0]);
              return (
                Jd(P_, E_, f),
                (_ = zd(P_, B_) - zd(M_, B_)) < 0 &&
                  (Md(this.m_axis), (_ = -_)),
                _
              );
            }),
            (t.prototype.compute = function (t, e) {
              switch (
                (this.m_sweepA.getTransform(S_, e),
                this.m_sweepB.getTransform(E_, e),
                this.m_type)
              ) {
                case x_.e_points:
                  return (
                    t &&
                      (qd(O_, S_.q, this.m_axis),
                      qd(R_, E_.q, Id(C_, -1, this.m_axis)),
                      (this.indexA = this.m_proxyA.getSupport(O_)),
                      (this.indexB = this.m_proxyB.getSupport(R_))),
                    Ed(I_, this.m_proxyA.getVertex(this.indexA)),
                    Ed(k_, this.m_proxyB.getVertex(this.indexB)),
                    Jd(M_, S_, I_),
                    Jd(P_, E_, k_),
                    zd(P_, this.m_axis) - zd(M_, this.m_axis)
                  );
                case x_.e_faceA:
                  return (
                    Wd(B_, S_.q, this.m_axis),
                    Jd(M_, S_, this.m_localPoint),
                    t &&
                      (qd(R_, E_.q, Id(C_, -1, B_)),
                      (this.indexA = -1),
                      (this.indexB = this.m_proxyB.getSupport(R_))),
                    Ed(k_, this.m_proxyB.getVertex(this.indexB)),
                    Jd(P_, E_, k_),
                    zd(P_, B_) - zd(M_, B_)
                  );
                case x_.e_faceB:
                  return (
                    Wd(B_, E_.q, this.m_axis),
                    Jd(P_, E_, this.m_localPoint),
                    t &&
                      (qd(O_, S_.q, Id(C_, -1, B_)),
                      (this.indexB = -1),
                      (this.indexA = this.m_proxyA.getSupport(O_))),
                    Ed(I_, this.m_proxyA.getVertex(this.indexA)),
                    Jd(M_, S_, I_),
                    zd(M_, B_) - zd(P_, B_)
                  );
                default:
                  return (
                    m_ && console.assert(!1),
                    t && ((this.indexA = -1), (this.indexB = -1)),
                    0
                  );
              }
            }),
            (t.prototype.findMinSeparation = function (t) {
              return this.compute(!0, t);
            }),
            (t.prototype.evaluate = function (t) {
              return this.compute(!1, t);
            }),
            t
          );
        })(),
        N_ = new D_();
      (F_.Input = v_), (F_.Output = b_);
      var L_ = "undefined" != typeof ASSERT && ASSERT,
        U_ = Math.abs,
        G_ = Math.sqrt,
        V_ = Math.min,
        j_ = (function () {
          function t() {
            (this.dt = 0),
              (this.inv_dt = 0),
              (this.velocityIterations = 0),
              (this.positionIterations = 0),
              (this.warmStarting = !1),
              (this.blockSolve = !0),
              (this.inv_dt0 = 0),
              (this.dtRatio = 1);
          }
          return (
            (t.prototype.reset = function (t) {
              this.dt > 0 && (this.inv_dt0 = this.inv_dt),
                (this.dt = t),
                (this.inv_dt = 0 == t ? 0 : 1 / t),
                (this.dtRatio = t * this.inv_dt0);
            }),
            t
          );
        })(),
        z_ = new j_(),
        X_ = Ad(0, 0),
        H_ = Ad(0, 0),
        Y_ = Ad(0, 0),
        W_ = new v_(),
        q_ = new b_(),
        $_ = new cp(),
        K_ = new cp(),
        J_ = new cp(),
        Z_ = (function () {
          function t(t) {
            (this.contact = t), (this.normals = []), (this.tangents = []);
          }
          return (
            (t.prototype.recycle = function () {
              (this.normals.length = 0), (this.tangents.length = 0);
            }),
            Object.defineProperty(t.prototype, "normalImpulses", {
              get: function () {
                var t = this.contact,
                  e = this.normals;
                e.length = 0;
                for (var i = 0; i < t.v_points.length; ++i)
                  e.push(t.v_points[i].normalImpulse);
                return e;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "tangentImpulses", {
              get: function () {
                var t = this.contact,
                  e = this.tangents;
                e.length = 0;
                for (var i = 0; i < t.v_points.length; ++i)
                  e.push(t.v_points[i].tangentImpulse);
                return e;
              },
              enumerable: !1,
              configurable: !0,
            }),
            t
          );
        })(),
        Q_ = (function () {
          function t(t) {
            (this.m_world = t),
              (this.m_stack = []),
              (this.m_bodies = []),
              (this.m_contacts = []),
              (this.m_joints = []);
          }
          return (
            (t.prototype.clear = function () {
              (this.m_stack.length = 0),
                (this.m_bodies.length = 0),
                (this.m_contacts.length = 0),
                (this.m_joints.length = 0);
            }),
            (t.prototype.addBody = function (t) {
              L_ && console.assert(t instanceof Lp, "Not a Body!", t),
                this.m_bodies.push(t);
            }),
            (t.prototype.addContact = function (t) {
              this.m_contacts.push(t);
            }),
            (t.prototype.addJoint = function (t) {
              L_ && console.assert(t instanceof Vp, "Not a Joint!", t),
                this.m_joints.push(t);
            }),
            (t.prototype.solveWorld = function (t) {
              for (var e = this.m_world, i = e.m_bodyList; i; i = i.m_next)
                i.m_islandFlag = !1;
              for (var r = e.m_contactList; r; r = r.m_next)
                r.m_islandFlag = !1;
              for (var n = e.m_jointList; n; n = n.m_next) n.m_islandFlag = !1;
              for (var o = this.m_stack, s = e.m_bodyList; s; s = s.m_next)
                if (
                  !s.m_islandFlag &&
                  0 != s.isAwake() &&
                  0 != s.isActive() &&
                  !s.isStatic()
                ) {
                  for (
                    this.clear(), o.push(s), s.m_islandFlag = !0;
                    o.length > 0;

                  )
                    if (
                      ((i = o.pop()),
                      L_ && console.assert(1 == i.isActive()),
                      this.addBody(i),
                      (i.m_awakeFlag = !0),
                      !i.isStatic())
                    ) {
                      for (var a = i.m_contactList; a; a = a.next) {
                        var h = a.contact;
                        if (
                          !h.m_islandFlag &&
                          0 != h.isEnabled() &&
                          0 != h.isTouching()
                        ) {
                          var u = h.m_fixtureA.m_isSensor,
                            l = h.m_fixtureB.m_isSensor;
                          u ||
                            l ||
                            (this.addContact(h),
                            (h.m_islandFlag = !0),
                            (d = a.other).m_islandFlag ||
                              (o.push(d), (d.m_islandFlag = !0)));
                        }
                      }
                      for (var c = i.m_jointList; c; c = c.next) {
                        var d;
                        1 != c.joint.m_islandFlag &&
                          0 != (d = c.other).isActive() &&
                          (this.addJoint(c.joint),
                          (c.joint.m_islandFlag = !0),
                          d.m_islandFlag || (o.push(d), (d.m_islandFlag = !0)));
                      }
                    }
                  this.solveIsland(t);
                  for (var p = 0; p < this.m_bodies.length; ++p)
                    (i = this.m_bodies[p]).isStatic() && (i.m_islandFlag = !1);
                }
            }),
            (t.prototype.solveIsland = function (t) {
              for (
                var e = this.m_world,
                  i = e.m_gravity,
                  r = e.m_allowSleep,
                  n = t.dt,
                  o = 0;
                o < this.m_bodies.length;
                ++o
              ) {
                var s = this.m_bodies[o];
                Ed(X_, s.m_sweep.c);
                var a = s.m_sweep.a;
                Ed(H_, s.m_linearVelocity);
                var h = s.m_angularVelocity;
                Ed(s.m_sweep.c0, s.m_sweep.c),
                  (s.m_sweep.a0 = s.m_sweep.a),
                  s.isDynamic() &&
                    (Fd(
                      H_,
                      Ad(n * s.m_gravityScale.x, n * s.m_gravityScale.y),
                      i
                    ),
                    kd(H_, n * s.m_invMass, s.m_force),
                    (h += n * s.m_invI * s.m_torque),
                    Id(H_, 1 / (1 + n * s.m_linearDamping), H_),
                    (h *= 1 / (1 + n * s.m_angularDamping))),
                  Ed(s.c_position.c, X_),
                  (s.c_position.a = a),
                  Ed(s.c_velocity.v, H_),
                  (s.c_velocity.w = h);
              }
              for (o = 0; o < this.m_contacts.length; ++o)
                this.m_contacts[o].initConstraint(t);
              for (o = 0; o < this.m_contacts.length; ++o)
                this.m_contacts[o].initVelocityConstraint(t);
              if (t.warmStarting)
                for (o = 0; o < this.m_contacts.length; ++o)
                  this.m_contacts[o].warmStartConstraint(t);
              for (o = 0; o < this.m_joints.length; ++o)
                this.m_joints[o].initVelocityConstraints(t);
              for (o = 0; o < t.velocityIterations; ++o) {
                for (var u = 0; u < this.m_joints.length; ++u)
                  this.m_joints[u].solveVelocityConstraints(t);
                for (u = 0; u < this.m_contacts.length; ++u)
                  this.m_contacts[u].solveVelocityConstraint(t);
              }
              for (o = 0; o < this.m_contacts.length; ++o)
                this.m_contacts[o].storeConstraintImpulses(t);
              for (o = 0; o < this.m_bodies.length; ++o) {
                (s = this.m_bodies[o]),
                  Ed(X_, s.c_position.c),
                  (a = s.c_position.a),
                  Ed(H_, s.c_velocity.v),
                  (h = s.c_velocity.w),
                  Id(Y_, n, H_);
                var l = Xd(Y_);
                if (l > hd.maxTranslationSquared) {
                  var c = hd.maxTranslation / G_(l);
                  Rd(H_, c);
                }
                var d = n * h;
                d * d > hd.maxRotationSquared &&
                  (h *= c = hd.maxRotation / U_(d)),
                  kd(X_, n, H_),
                  (a += n * h),
                  Ed(s.c_position.c, X_),
                  (s.c_position.a = a),
                  Ed(s.c_velocity.v, H_),
                  (s.c_velocity.w = h);
              }
              var p = !1;
              for (o = 0; o < t.positionIterations; ++o) {
                var _ = 0;
                for (u = 0; u < this.m_contacts.length; ++u) {
                  var f = this.m_contacts[u].solvePositionConstraint(t);
                  _ = V_(_, f);
                }
                var m = _ >= -3 * hd.linearSlop,
                  y = !0;
                for (u = 0; u < this.m_joints.length; ++u) {
                  var g = this.m_joints[u].solvePositionConstraints(t);
                  y = y && g;
                }
                if (m && y) {
                  p = !0;
                  break;
                }
              }
              for (o = 0; o < this.m_bodies.length; ++o)
                Ed((s = this.m_bodies[o]).m_sweep.c, s.c_position.c),
                  (s.m_sweep.a = s.c_position.a),
                  Ed(s.m_linearVelocity, s.c_velocity.v),
                  (s.m_angularVelocity = s.c_velocity.w),
                  s.synchronizeTransform();
              if ((this.postSolveIsland(), r)) {
                var v = 1 / 0,
                  b = hd.linearSleepToleranceSqr,
                  x = hd.angularSleepToleranceSqr;
                for (o = 0; o < this.m_bodies.length; ++o)
                  (s = this.m_bodies[o]).isStatic() ||
                    (0 == s.m_autoSleepFlag ||
                    s.m_angularVelocity * s.m_angularVelocity > x ||
                    Xd(s.m_linearVelocity) > b
                      ? ((s.m_sleepTime = 0), (v = 0))
                      : ((s.m_sleepTime += n), (v = V_(v, s.m_sleepTime))));
                if (v >= hd.timeToSleep && p)
                  for (o = 0; o < this.m_bodies.length; ++o)
                    (s = this.m_bodies[o]).setAwake(!1);
              }
            }),
            (t.prototype.solveWorldTOI = function (t) {
              var e = this.m_world;
              if (e.m_stepComplete) {
                for (var i = e.m_bodyList; i; i = i.m_next)
                  (i.m_islandFlag = !1), (i.m_sweep.alpha0 = 0);
                for (var r = e.m_contactList; r; r = r.m_next)
                  (r.m_toiFlag = !1),
                    (r.m_islandFlag = !1),
                    (r.m_toiCount = 0),
                    (r.m_toi = 1);
              }
              for (;;) {
                for (var n = null, o = 1, s = e.m_contactList; s; s = s.m_next)
                  if (0 != s.isEnabled() && !(s.m_toiCount > hd.maxSubSteps)) {
                    var a = 1;
                    if (s.m_toiFlag) a = s.m_toi;
                    else {
                      var h = s.getFixtureA(),
                        u = s.getFixtureB();
                      if (h.isSensor() || u.isSensor()) continue;
                      var l = h.getBody(),
                        c = u.getBody();
                      L_ && console.assert(l.isDynamic() || c.isDynamic());
                      var d = l.isAwake() && !l.isStatic(),
                        p = c.isAwake() && !c.isStatic();
                      if (0 == d && 0 == p) continue;
                      var _ = l.isBullet() || !l.isDynamic(),
                        f = c.isBullet() || !c.isDynamic();
                      if (0 == _ && 0 == f) continue;
                      var m = l.m_sweep.alpha0;
                      l.m_sweep.alpha0 < c.m_sweep.alpha0
                        ? ((m = c.m_sweep.alpha0), l.m_sweep.advance(m))
                        : c.m_sweep.alpha0 < l.m_sweep.alpha0 &&
                          ((m = l.m_sweep.alpha0), c.m_sweep.advance(m)),
                        L_ && console.assert(m < 1);
                      var y = s.getChildIndexA(),
                        g = s.getChildIndexB();
                      l.m_sweep,
                        c.m_sweep,
                        W_.proxyA.set(h.getShape(), y),
                        W_.proxyB.set(u.getShape(), g),
                        W_.sweepA.set(l.m_sweep),
                        W_.sweepB.set(c.m_sweep),
                        (W_.tMax = 1),
                        F_(q_, W_);
                      var v = q_.t;
                      (a =
                        q_.state == d_.e_touching ? V_(m + (1 - m) * v, 1) : 1),
                        (s.m_toi = a),
                        (s.m_toiFlag = !0);
                    }
                    a < o && ((n = s), (o = a));
                  }
                if (null == n || 1 - 1e-8 < o) {
                  e.m_stepComplete = !0;
                  break;
                }
                var b = n.getFixtureA(),
                  x = n.getFixtureB(),
                  w = b.getBody(),
                  T = x.getBody();
                if (
                  (K_.set(w.m_sweep),
                  J_.set(T.m_sweep),
                  w.advance(o),
                  T.advance(o),
                  n.update(e),
                  (n.m_toiFlag = !1),
                  ++n.m_toiCount,
                  0 != n.isEnabled() && 0 != n.isTouching())
                ) {
                  w.setAwake(!0),
                    T.setAwake(!0),
                    this.clear(),
                    this.addBody(w),
                    this.addBody(T),
                    this.addContact(n),
                    (w.m_islandFlag = !0),
                    (T.m_islandFlag = !0),
                    (n.m_islandFlag = !0);
                  for (var A = [w, T], S = 0; S < A.length; ++S)
                    if ((O = A[S]).isDynamic())
                      for (var E = O.m_contactList; E; E = E.next) {
                        var C = E.contact;
                        if (!C.m_islandFlag) {
                          var M = E.other;
                          if (!M.isDynamic() || O.isBullet() || M.isBullet()) {
                            var P = C.m_fixtureA.m_isSensor,
                              B = C.m_fixtureB.m_isSensor;
                            P ||
                              B ||
                              ($_.set(M.m_sweep),
                              0 == M.m_islandFlag && M.advance(o),
                              C.update(e),
                              0 != C.isEnabled() && 0 != C.isTouching()
                                ? ((C.m_islandFlag = !0),
                                  this.addContact(C),
                                  M.m_islandFlag ||
                                    ((M.m_islandFlag = !0),
                                    M.isStatic() || M.setAwake(!0),
                                    this.addBody(M)))
                                : (M.m_sweep.set($_),
                                  M.synchronizeTransform()));
                          }
                        }
                      }
                  for (
                    z_.reset((1 - o) * t.dt),
                      z_.dtRatio = 1,
                      z_.positionIterations = 20,
                      z_.velocityIterations = t.velocityIterations,
                      z_.warmStarting = !1,
                      this.solveIslandTOI(z_, w, T),
                      S = 0;
                    S < this.m_bodies.length;
                    ++S
                  ) {
                    var O;
                    if (
                      (((O = this.m_bodies[S]).m_islandFlag = !1),
                      O.isDynamic())
                    )
                      for (
                        O.synchronizeFixtures(), E = O.m_contactList;
                        E;
                        E = E.next
                      )
                        (E.contact.m_toiFlag = !1),
                          (E.contact.m_islandFlag = !1);
                  }
                  if ((e.findNewContacts(), e.m_subStepping)) {
                    e.m_stepComplete = !1;
                    break;
                  }
                } else
                  n.setEnabled(!1),
                    w.m_sweep.set(K_),
                    T.m_sweep.set(J_),
                    w.synchronizeTransform(),
                    T.synchronizeTransform();
              }
            }),
            (t.prototype.solveIslandTOI = function (t, e, i) {
              for (var r = 0; r < this.m_bodies.length; ++r)
                Ed((h = this.m_bodies[r]).c_position.c, h.m_sweep.c),
                  (h.c_position.a = h.m_sweep.a),
                  Ed(h.c_velocity.v, h.m_linearVelocity),
                  (h.c_velocity.w = h.m_angularVelocity);
              for (r = 0; r < this.m_contacts.length; ++r)
                this.m_contacts[r].initConstraint(t);
              for (r = 0; r < t.positionIterations; ++r) {
                for (var n = 0, o = 0; o < this.m_contacts.length; ++o) {
                  var s = this.m_contacts[o].solvePositionConstraintTOI(
                    t,
                    e,
                    i
                  );
                  n = V_(n, s);
                }
                if (n >= -1.5 * hd.linearSlop) break;
              }
              for (
                Ed(e.m_sweep.c0, e.c_position.c),
                  e.m_sweep.a0 = e.c_position.a,
                  Ed(i.m_sweep.c0, i.c_position.c),
                  i.m_sweep.a0 = i.c_position.a,
                  r = 0;
                r < this.m_contacts.length;
                ++r
              )
                this.m_contacts[r].initVelocityConstraint(t);
              for (r = 0; r < t.velocityIterations; ++r)
                for (o = 0; o < this.m_contacts.length; ++o)
                  this.m_contacts[o].solveVelocityConstraint(t);
              var a = t.dt;
              for (r = 0; r < this.m_bodies.length; ++r) {
                var h = this.m_bodies[r];
                Ed(X_, h.c_position.c);
                var u = h.c_position.a;
                Ed(H_, h.c_velocity.v);
                var l = h.c_velocity.w;
                Id(Y_, a, H_);
                var c = Xd(Y_);
                if (c > hd.maxTranslationSquared) {
                  var d = hd.maxTranslation / G_(c);
                  Rd(H_, d);
                }
                var p = a * l;
                p * p > hd.maxRotationSquared &&
                  (l *= d = hd.maxRotation / U_(p)),
                  kd(X_, a, H_),
                  (u += a * l),
                  Ed(h.c_position.c, X_),
                  (h.c_position.a = u),
                  Ed(h.c_velocity.v, H_),
                  (h.c_velocity.w = l),
                  Ed(h.m_sweep.c, X_),
                  (h.m_sweep.a = u),
                  Ed(h.m_linearVelocity, H_),
                  (h.m_angularVelocity = l),
                  h.synchronizeTransform();
              }
              this.postSolveIsland();
            }),
            (t.prototype.postSolveIsland = function () {
              for (var t = 0; t < this.m_contacts.length; ++t) {
                var e = this.m_contacts[t];
                this.m_world.postSolve(e, e.m_impulse);
              }
            }),
            t
          );
        })();
      Q_.TimeStep = j_;
      var tf,
        ef,
        rf,
        nf = "undefined" != typeof ASSERT && ASSERT,
        of = (function () {
          function t(t, e, i, r) {
            "object" == typeof t && null !== t
              ? ((this.ex = td.clone(t)), (this.ey = td.clone(e)))
              : "number" == typeof t
              ? ((this.ex = td.neo(t, i)), (this.ey = td.neo(e, r)))
              : ((this.ex = td.zero()), (this.ey = td.zero()));
          }
          return (
            (t.prototype.toString = function () {
              return JSON.stringify(this);
            }),
            (t.isValid = function (t) {
              return null != t && td.isValid(t.ex) && td.isValid(t.ey);
            }),
            (t.assert = function (e) {
              nf && console.assert(!t.isValid(e), "Invalid Mat22!", e);
            }),
            (t.prototype.set = function (e, i, r, n) {
              "number" == typeof e &&
              "number" == typeof i &&
              "number" == typeof r &&
              "number" == typeof n
                ? (this.ex.setNum(e, r), this.ey.setNum(i, n))
                : "object" == typeof e && "object" == typeof i
                ? (this.ex.setVec2(e), this.ey.setVec2(i))
                : "object" == typeof e
                ? (nf && t.assert(e),
                  this.ex.setVec2(e.ex),
                  this.ey.setVec2(e.ey))
                : nf && console.assert(!1);
            }),
            (t.prototype.setIdentity = function () {
              (this.ex.x = 1),
                (this.ey.x = 0),
                (this.ex.y = 0),
                (this.ey.y = 1);
            }),
            (t.prototype.setZero = function () {
              (this.ex.x = 0),
                (this.ey.x = 0),
                (this.ex.y = 0),
                (this.ey.y = 0);
            }),
            (t.prototype.getInverse = function () {
              var e = this.ex.x,
                i = this.ey.x,
                r = this.ex.y,
                n = this.ey.y,
                o = e * n - i * r;
              0 !== o && (o = 1 / o);
              var s = new t();
              return (
                (s.ex.x = o * n),
                (s.ey.x = -o * i),
                (s.ex.y = -o * r),
                (s.ey.y = o * e),
                s
              );
            }),
            (t.prototype.solve = function (t) {
              nf && td.assert(t);
              var e = this.ex.x,
                i = this.ey.x,
                r = this.ex.y,
                n = this.ey.y,
                o = e * n - i * r;
              0 !== o && (o = 1 / o);
              var s = td.zero();
              return (
                (s.x = o * (n * t.x - i * t.y)),
                (s.y = o * (e * t.y - r * t.x)),
                s
              );
            }),
            (t.mul = function (e, i) {
              if (i && "x" in i && "y" in i) {
                nf && td.assert(i);
                var r = e.ex.x * i.x + e.ey.x * i.y,
                  n = e.ex.y * i.x + e.ey.y * i.y;
                return td.neo(r, n);
              }
              if (i && "ex" in i && "ey" in i)
                return (
                  nf && t.assert(i),
                  new t(
                    e.ex.x * i.ex.x + e.ey.x * i.ex.y,
                    e.ex.x * i.ey.x + e.ey.x * i.ey.y,
                    e.ex.y * i.ex.x + e.ey.y * i.ex.y,
                    e.ex.y * i.ey.x + e.ey.y * i.ey.y
                  )
                );
              nf && console.assert(!1);
            }),
            (t.mulVec2 = function (t, e) {
              nf && td.assert(e);
              var i = t.ex.x * e.x + t.ey.x * e.y,
                r = t.ex.y * e.x + t.ey.y * e.y;
              return td.neo(i, r);
            }),
            (t.mulMat22 = function (e, i) {
              return (
                nf && t.assert(i),
                new t(
                  e.ex.x * i.ex.x + e.ey.x * i.ex.y,
                  e.ex.x * i.ey.x + e.ey.x * i.ey.y,
                  e.ex.y * i.ex.x + e.ey.y * i.ex.y,
                  e.ex.y * i.ey.x + e.ey.y * i.ey.y
                )
              );
            }),
            (t.mulT = function (e, i) {
              return i && "x" in i && "y" in i
                ? (nf && td.assert(i), td.neo(td.dot(i, e.ex), td.dot(i, e.ey)))
                : i && "ex" in i && "ey" in i
                ? (nf && t.assert(i),
                  new t(
                    td.neo(td.dot(e.ex, i.ex), td.dot(e.ey, i.ex)),
                    td.neo(td.dot(e.ex, i.ey), td.dot(e.ey, i.ey))
                  ))
                : void (nf && console.assert(!1));
            }),
            (t.mulTVec2 = function (e, i) {
              return (
                nf && t.assert(e),
                nf && td.assert(i),
                td.neo(td.dot(i, e.ex), td.dot(i, e.ey))
              );
            }),
            (t.mulTMat22 = function (e, i) {
              return (
                nf && t.assert(e),
                nf && t.assert(i),
                new t(
                  td.neo(td.dot(e.ex, i.ex), td.dot(e.ey, i.ex)),
                  td.neo(td.dot(e.ex, i.ey), td.dot(e.ey, i.ey))
                )
              );
            }),
            (t.abs = function (e) {
              return nf && t.assert(e), new t(td.abs(e.ex), td.abs(e.ey));
            }),
            (t.add = function (e, i) {
              return (
                nf && t.assert(e),
                nf && t.assert(i),
                new t(td.add(e.ex, i.ex), td.add(e.ey, i.ey))
              );
            }),
            t
          );
        })(),
        sf = Math.sqrt,
        af = Ad(0, 0),
        hf = Ad(0, 0),
        uf = Ad(0, 0),
        lf = Ad(0, 0),
        cf = Ad(0, 0),
        df = Ad(0, 0),
        pf = Ad(0, 0),
        _f = Ad(0, 0);
      !(function (t) {
        (t[(t.e_unset = -1)] = "e_unset"),
          (t[(t.e_circles = 0)] = "e_circles"),
          (t[(t.e_faceA = 1)] = "e_faceA"),
          (t[(t.e_faceB = 2)] = "e_faceB");
      })(tf || (tf = {})),
        (function (t) {
          (t[(t.e_unset = -1)] = "e_unset"),
            (t[(t.e_vertex = 0)] = "e_vertex"),
            (t[(t.e_face = 1)] = "e_face");
        })(ef || (ef = {})),
        (function (t) {
          (t[(t.nullState = 0)] = "nullState"),
            (t[(t.addState = 1)] = "addState"),
            (t[(t.persistState = 2)] = "persistState"),
            (t[(t.removeState = 3)] = "removeState");
        })(rf || (rf = {}));
      var ff = (function () {
          function t() {
            (this.v = Ad(0, 0)), (this.id = new gf());
          }
          return (
            (t.prototype.set = function (t) {
              Ed(this.v, t.v), this.id.set(t.id);
            }),
            (t.prototype.recycle = function () {
              Cd(this.v), this.id.recycle();
            }),
            t
          );
        })(),
        mf = (function () {
          function t() {
            (this.localNormal = Ad(0, 0)),
              (this.localPoint = Ad(0, 0)),
              (this.points = [new yf(), new yf()]),
              (this.pointCount = 0);
          }
          return (
            (t.prototype.set = function (t) {
              (this.type = t.type),
                Ed(this.localNormal, t.localNormal),
                Ed(this.localPoint, t.localPoint),
                (this.pointCount = t.pointCount),
                this.points[0].set(t.points[0]),
                this.points[1].set(t.points[1]);
            }),
            (t.prototype.recycle = function () {
              (this.type = tf.e_unset),
                Cd(this.localNormal),
                Cd(this.localPoint),
                (this.pointCount = 0),
                this.points[0].recycle(),
                this.points[1].recycle();
            }),
            (t.prototype.getWorldManifold = function (t, e, i, r, n) {
              if (0 == this.pointCount) return t;
              (t = t || new vf()).pointCount = this.pointCount;
              var o = t.normal,
                s = t.points,
                a = t.separations;
              switch (this.type) {
                case tf.e_circles:
                  Sd(o, 1, 0);
                  var h = this.points[0];
                  Jd(af, e, this.localPoint),
                    Jd(hf, r, h.localPoint),
                    Od(df, hf, af);
                  var u = Xd(df);
                  u > 1e-18 && Id(o, 1 / sf(u), df),
                    Nd(lf, 1, af, i, o),
                    Nd(cf, 1, hf, -n, o),
                    Nd(s[0], 0.5, lf, 0.5, cf),
                    (a[0] = zd(Od(uf, cf, lf), o));
                  break;
                case tf.e_faceA:
                  Wd(o, e.q, this.localNormal), Jd(pf, e, this.localPoint);
                  for (var l = 0; l < this.pointCount; ++l)
                    (h = this.points[l]),
                      Jd(_f, r, h.localPoint),
                      Nd(lf, 1, _f, i - zd(Od(uf, _f, pf), o), o),
                      Nd(cf, 1, _f, -n, o),
                      Nd(s[l], 0.5, lf, 0.5, cf),
                      (a[l] = zd(Od(uf, cf, lf), o));
                  break;
                case tf.e_faceB:
                  for (
                    Wd(o, r.q, this.localNormal),
                      Jd(pf, r, this.localPoint),
                      l = 0;
                    l < this.pointCount;
                    ++l
                  )
                    (h = this.points[l]),
                      Jd(_f, e, h.localPoint),
                      Nd(cf, 1, _f, n - zd(Od(uf, _f, pf), o), o),
                      Nd(lf, 1, _f, -i, o),
                      Nd(s[l], 0.5, lf, 0.5, cf),
                      (a[l] = zd(Od(uf, lf, cf), o));
                  Md(o);
              }
              return t;
            }),
            (t.clipSegmentToLine = xf),
            (t.ClipVertex = ff),
            (t.getPointStates = bf),
            (t.PointState = rf),
            t
          );
        })(),
        yf = (function () {
          function t() {
            (this.localPoint = Ad(0, 0)),
              (this.normalImpulse = 0),
              (this.tangentImpulse = 0),
              (this.id = new gf());
          }
          return (
            (t.prototype.set = function (t) {
              Ed(this.localPoint, t.localPoint),
                (this.normalImpulse = t.normalImpulse),
                (this.tangentImpulse = t.tangentImpulse),
                this.id.set(t.id);
            }),
            (t.prototype.recycle = function () {
              Cd(this.localPoint),
                (this.normalImpulse = 0),
                (this.tangentImpulse = 0),
                this.id.recycle();
            }),
            t
          );
        })(),
        gf = (function () {
          function t() {
            (this.key = -1),
              (this.indexA = -1),
              (this.indexB = -1),
              (this.typeA = ef.e_unset),
              (this.typeB = ef.e_unset);
          }
          return (
            (t.prototype.setFeatures = function (t, e, i, r) {
              (this.indexA = t),
                (this.indexB = i),
                (this.typeA = e),
                (this.typeB = r),
                (this.key =
                  this.indexA +
                  4 * this.indexB +
                  16 * this.typeA +
                  64 * this.typeB);
            }),
            (t.prototype.set = function (t) {
              (this.indexA = t.indexA),
                (this.indexB = t.indexB),
                (this.typeA = t.typeA),
                (this.typeB = t.typeB),
                (this.key =
                  this.indexA +
                  4 * this.indexB +
                  16 * this.typeA +
                  64 * this.typeB);
            }),
            (t.prototype.swapFeatures = function () {
              var t = this.indexA,
                e = this.indexB,
                i = this.typeA,
                r = this.typeB;
              (this.indexA = e),
                (this.indexB = t),
                (this.typeA = r),
                (this.typeB = i),
                (this.key =
                  this.indexA +
                  4 * this.indexB +
                  16 * this.typeA +
                  64 * this.typeB);
            }),
            (t.prototype.recycle = function () {
              (this.indexA = 0),
                (this.indexB = 0),
                (this.typeA = ef.e_unset),
                (this.typeB = ef.e_unset),
                (this.key = -1);
            }),
            t
          );
        })(),
        vf = (function () {
          function t() {
            (this.normal = Ad(0, 0)),
              (this.points = [Ad(0, 0), Ad(0, 0)]),
              (this.separations = [0, 0]),
              (this.pointCount = 0);
          }
          return (
            (t.prototype.recycle = function () {
              Cd(this.normal),
                Cd(this.points[0]),
                Cd(this.points[1]),
                (this.separations[0] = 0),
                (this.separations[1] = 0),
                (this.pointCount = 0);
            }),
            t
          );
        })();
      function bf(t, e, i, r) {
        for (var n = 0; n < i.pointCount; ++n) {
          var o = i.points[n].id;
          t[n] = rf.removeState;
          for (var s = 0; s < r.pointCount; ++s)
            if (r.points[s].id.key === o.key) {
              t[n] = rf.persistState;
              break;
            }
        }
        for (n = 0; n < r.pointCount; ++n)
          for (
            o = r.points[n].id, e[n] = rf.addState, s = 0;
            s < i.pointCount;
            ++s
          )
            if (i.points[s].id.key === o.key) {
              e[n] = rf.persistState;
              break;
            }
      }
      function xf(t, e, i, r, n) {
        var o = 0,
          s = zd(i, e[0].v) - r,
          a = zd(i, e[1].v) - r;
        if (
          (s <= 0 && t[o++].set(e[0]), a <= 0 && t[o++].set(e[1]), s * a < 0)
        ) {
          var h = s / (s - a);
          Nd(t[o].v, 1 - h, e[0].v, h, e[1].v),
            t[o].id.setFeatures(n, ef.e_vertex, e[0].id.indexB, ef.e_face),
            ++o;
        }
        return o;
      }
      var wf = function (t) {
          var e = "function" == typeof Symbol && Symbol.iterator,
            i = e && t[e],
            r = 0;
          if (i) return i.call(t);
          if (t && "number" == typeof t.length)
            return {
              next: function () {
                return (
                  t && r >= t.length && (t = void 0),
                  { value: t && t[r++], done: !t }
                );
              },
            };
          throw new TypeError(
            e ? "Object is not iterable." : "Symbol.iterator is not defined."
          );
        },
        Tf = "undefined" != typeof ASSERT && ASSERT,
        Af = (Math.abs, Math.sqrt),
        Sf = Math.max,
        Ef = Math.min,
        Cf = new ud({
          create: function () {
            return new hm();
          },
          release: function (t) {
            t.recycle();
          },
        }),
        Mf = new mf(),
        Pf = new vf(),
        Bf = (function () {
          function t(t) {
            (this.prev = null),
              (this.next = null),
              (this.other = null),
              (this.contact = t);
          }
          return (
            (t.prototype.recycle = function () {
              (this.prev = null), (this.next = null), (this.other = null);
            }),
            t
          );
        })();
      function Of(t, e) {
        return Af(t * e);
      }
      function Rf(t, e) {
        return t > e ? t : e;
      }
      var If,
        kf = [],
        Ff = (function () {
          function t() {
            (this.rA = Ad(0, 0)),
              (this.rB = Ad(0, 0)),
              (this.normalImpulse = 0),
              (this.tangentImpulse = 0),
              (this.normalMass = 0),
              (this.tangentMass = 0),
              (this.velocityBias = 0);
          }
          return (
            (t.prototype.recycle = function () {
              Cd(this.rA),
                Cd(this.rB),
                (this.normalImpulse = 0),
                (this.tangentImpulse = 0),
                (this.normalMass = 0),
                (this.tangentMass = 0),
                (this.velocityBias = 0);
            }),
            t
          );
        })(),
        Df = Ad(0, 0),
        Nf = Ad(0, 0),
        Lf = Ad(0, 0),
        Uf = Ad(0, 0),
        Gf = Ad(0, 0),
        Vf = $d(0, 0, 0),
        jf = $d(0, 0, 0),
        zf = Ad(0, 0),
        Xf = Ad(0, 0),
        Hf = Ad(0, 0),
        Yf = Ad(0, 0),
        Wf = Ad(0, 0),
        qf = Ad(0, 0),
        $f = Ad(0, 0),
        Kf = Ad(0, 0),
        Jf = Ad(0, 0),
        Zf = Ad(0, 0),
        Qf = Ad(0, 0),
        tm = Ad(0, 0),
        em = Ad(0, 0),
        im = Ad(0, 0),
        rm = Ad(0, 0),
        nm = Ad(0, 0),
        om = Ad(0, 0),
        sm = Ad(0, 0),
        am = Ad(0, 0),
        hm = (function () {
          function t() {
            (this.m_nodeA = new Bf(this)),
              (this.m_nodeB = new Bf(this)),
              (this.m_fixtureA = null),
              (this.m_fixtureB = null),
              (this.m_indexA = -1),
              (this.m_indexB = -1),
              (this.m_evaluateFcn = null),
              (this.m_manifold = new mf()),
              (this.m_prev = null),
              (this.m_next = null),
              (this.m_toi = 1),
              (this.m_toiCount = 0),
              (this.m_toiFlag = !1),
              (this.m_friction = 0),
              (this.m_restitution = 0),
              (this.m_tangentSpeed = 0),
              (this.m_enabledFlag = !0),
              (this.m_islandFlag = !1),
              (this.m_touchingFlag = !1),
              (this.m_filterFlag = !1),
              (this.m_bulletHitFlag = !1),
              (this.m_impulse = new Z_(this)),
              (this.v_points = [new Ff(), new Ff()]),
              (this.v_normal = Ad(0, 0)),
              (this.v_normalMass = new of()),
              (this.v_K = new of()),
              (this.v_pointCount = 0),
              (this.v_tangentSpeed = 0),
              (this.v_friction = 0),
              (this.v_restitution = 0),
              (this.v_invMassA = 0),
              (this.v_invMassB = 0),
              (this.v_invIA = 0),
              (this.v_invIB = 0),
              (this.p_localPoints = [Ad(0, 0), Ad(0, 0)]),
              (this.p_localNormal = Ad(0, 0)),
              (this.p_localPoint = Ad(0, 0)),
              (this.p_localCenterA = Ad(0, 0)),
              (this.p_localCenterB = Ad(0, 0)),
              (this.p_type = tf.e_unset),
              (this.p_radiusA = 0),
              (this.p_radiusB = 0),
              (this.p_pointCount = 0),
              (this.p_invMassA = 0),
              (this.p_invMassB = 0),
              (this.p_invIA = 0),
              (this.p_invIB = 0);
          }
          return (
            (t.prototype.initialize = function (t, e, i, r, n) {
              (this.m_fixtureA = t),
                (this.m_fixtureB = i),
                (this.m_indexA = e),
                (this.m_indexB = r),
                (this.m_evaluateFcn = n),
                (this.m_friction = Of(
                  this.m_fixtureA.m_friction,
                  this.m_fixtureB.m_friction
                )),
                (this.m_restitution = Rf(
                  this.m_fixtureA.m_restitution,
                  this.m_fixtureB.m_restitution
                ));
            }),
            (t.prototype.recycle = function () {
              var t, e, i, r;
              this.m_nodeA.recycle(),
                this.m_nodeB.recycle(),
                (this.m_fixtureA = null),
                (this.m_fixtureB = null),
                (this.m_indexA = -1),
                (this.m_indexB = -1),
                (this.m_evaluateFcn = null),
                this.m_manifold.recycle(),
                (this.m_prev = null),
                (this.m_next = null),
                (this.m_toi = 1),
                (this.m_toiCount = 0),
                (this.m_toiFlag = !1),
                (this.m_friction = 0),
                (this.m_restitution = 0),
                (this.m_tangentSpeed = 0),
                (this.m_enabledFlag = !0),
                (this.m_islandFlag = !1),
                (this.m_touchingFlag = !1),
                (this.m_filterFlag = !1),
                (this.m_bulletHitFlag = !1),
                this.m_impulse.recycle();
              try {
                for (
                  var n = wf(this.v_points), o = n.next();
                  !o.done;
                  o = n.next()
                )
                  o.value.recycle();
              } catch (e) {
                t = { error: e };
              } finally {
                try {
                  o && !o.done && (e = n.return) && e.call(n);
                } finally {
                  if (t) throw t.error;
                }
              }
              Cd(this.v_normal),
                this.v_normalMass.setZero(),
                this.v_K.setZero(),
                (this.v_pointCount = 0),
                (this.v_tangentSpeed = 0),
                (this.v_friction = 0),
                (this.v_restitution = 0),
                (this.v_invMassA = 0),
                (this.v_invMassB = 0),
                (this.v_invIA = 0),
                (this.v_invIB = 0);
              try {
                for (
                  var s = wf(this.p_localPoints), a = s.next();
                  !a.done;
                  a = s.next()
                )
                  Cd(a.value);
              } catch (t) {
                i = { error: t };
              } finally {
                try {
                  a && !a.done && (r = s.return) && r.call(s);
                } finally {
                  if (i) throw i.error;
                }
              }
              Cd(this.p_localNormal),
                Cd(this.p_localPoint),
                Cd(this.p_localCenterA),
                Cd(this.p_localCenterB),
                (this.p_type = tf.e_unset),
                (this.p_radiusA = 0),
                (this.p_radiusB = 0),
                (this.p_pointCount = 0),
                (this.p_invMassA = 0),
                (this.p_invMassB = 0),
                (this.p_invIA = 0),
                (this.p_invIB = 0);
            }),
            (t.prototype.initConstraint = function (t) {
              var e = this.m_fixtureA,
                i = this.m_fixtureB;
              if (null !== e && null !== i) {
                var r = e.m_body,
                  n = i.m_body;
                if (null !== r && null !== n) {
                  var o = e.m_shape,
                    s = i.m_shape;
                  if (null !== o && null !== s) {
                    var a = this.m_manifold,
                      h = a.pointCount;
                    Tf && console.assert(h > 0),
                      (this.v_invMassA = r.m_invMass),
                      (this.v_invMassB = n.m_invMass),
                      (this.v_invIA = r.m_invI),
                      (this.v_invIB = n.m_invI),
                      (this.v_friction = this.m_friction),
                      (this.v_restitution = this.m_restitution),
                      (this.v_tangentSpeed = this.m_tangentSpeed),
                      (this.v_pointCount = h),
                      this.v_K.setZero(),
                      this.v_normalMass.setZero(),
                      (this.p_invMassA = r.m_invMass),
                      (this.p_invMassB = n.m_invMass),
                      (this.p_invIA = r.m_invI),
                      (this.p_invIB = n.m_invI),
                      Ed(this.p_localCenterA, r.m_sweep.localCenter),
                      Ed(this.p_localCenterB, n.m_sweep.localCenter),
                      (this.p_radiusA = o.m_radius),
                      (this.p_radiusB = s.m_radius),
                      (this.p_type = a.type),
                      Ed(this.p_localNormal, a.localNormal),
                      Ed(this.p_localPoint, a.localPoint),
                      (this.p_pointCount = h);
                    for (var u = 0; u < hd.maxManifoldPoints; ++u)
                      this.v_points[u].recycle(), Cd(this.p_localPoints[u]);
                    for (u = 0; u < h; ++u) {
                      var l = a.points[u],
                        c = this.v_points[u];
                      t.warmStarting &&
                        ((c.normalImpulse = t.dtRatio * l.normalImpulse),
                        (c.tangentImpulse = t.dtRatio * l.tangentImpulse)),
                        Ed(this.p_localPoints[u], l.localPoint);
                    }
                  }
                }
              }
            }),
            (t.prototype.getManifold = function () {
              return this.m_manifold;
            }),
            (t.prototype.getWorldManifold = function (t) {
              var e = this.m_fixtureA,
                i = this.m_fixtureB;
              if (null !== e && null !== i) {
                var r = e.m_body,
                  n = i.m_body;
                if (null !== r && null !== n) {
                  var o = e.m_shape,
                    s = i.m_shape;
                  if (null !== o && null !== s)
                    return this.m_manifold.getWorldManifold(
                      t,
                      r.getTransform(),
                      o.m_radius,
                      n.getTransform(),
                      s.m_radius
                    );
                }
              }
            }),
            (t.prototype.setEnabled = function (t) {
              this.m_enabledFlag = !!t;
            }),
            (t.prototype.isEnabled = function () {
              return this.m_enabledFlag;
            }),
            (t.prototype.isTouching = function () {
              return this.m_touchingFlag;
            }),
            (t.prototype.getNext = function () {
              return this.m_next;
            }),
            (t.prototype.getFixtureA = function () {
              return this.m_fixtureA;
            }),
            (t.prototype.getFixtureB = function () {
              return this.m_fixtureB;
            }),
            (t.prototype.getChildIndexA = function () {
              return this.m_indexA;
            }),
            (t.prototype.getChildIndexB = function () {
              return this.m_indexB;
            }),
            (t.prototype.flagForFiltering = function () {
              this.m_filterFlag = !0;
            }),
            (t.prototype.setFriction = function (t) {
              this.m_friction = t;
            }),
            (t.prototype.getFriction = function () {
              return this.m_friction;
            }),
            (t.prototype.resetFriction = function () {
              var t = this.m_fixtureA,
                e = this.m_fixtureB;
              null !== t &&
                null !== e &&
                (this.m_friction = Of(t.m_friction, e.m_friction));
            }),
            (t.prototype.setRestitution = function (t) {
              this.m_restitution = t;
            }),
            (t.prototype.getRestitution = function () {
              return this.m_restitution;
            }),
            (t.prototype.resetRestitution = function () {
              var t = this.m_fixtureA,
                e = this.m_fixtureB;
              null !== t &&
                null !== e &&
                (this.m_restitution = Rf(t.m_restitution, e.m_restitution));
            }),
            (t.prototype.setTangentSpeed = function (t) {
              this.m_tangentSpeed = t;
            }),
            (t.prototype.getTangentSpeed = function () {
              return this.m_tangentSpeed;
            }),
            (t.prototype.evaluate = function (t, e, i) {
              var r = this.m_fixtureA,
                n = this.m_fixtureB;
              null !== r &&
                null !== n &&
                this.m_evaluateFcn(t, e, r, this.m_indexA, i, n, this.m_indexB);
            }),
            (t.prototype.update = function (t) {
              var e = this.m_fixtureA,
                i = this.m_fixtureB;
              if (null !== e && null !== i) {
                var r = e.m_body,
                  n = i.m_body;
                if (null !== r && null !== n) {
                  var o = e.m_shape,
                    s = i.m_shape;
                  if (null !== o && null !== s) {
                    this.m_enabledFlag = !0;
                    var a = !1,
                      h = this.m_touchingFlag,
                      u = e.m_isSensor,
                      l = i.m_isSensor,
                      c = u || l,
                      d = r.m_xf,
                      p = n.m_xf;
                    if (c)
                      (a = c_(o, this.m_indexA, s, this.m_indexB, d, p)),
                        (this.m_manifold.pointCount = 0);
                    else {
                      Mf.recycle(),
                        Mf.set(this.m_manifold),
                        this.m_manifold.recycle(),
                        this.evaluate(this.m_manifold, d, p),
                        (a = this.m_manifold.pointCount > 0);
                      for (var _ = 0; _ < this.m_manifold.pointCount; ++_) {
                        var f = this.m_manifold.points[_];
                        (f.normalImpulse = 0), (f.tangentImpulse = 0);
                        for (var m = 0; m < Mf.pointCount; ++m) {
                          var y = Mf.points[m];
                          if (y.id.key === f.id.key) {
                            (f.normalImpulse = y.normalImpulse),
                              (f.tangentImpulse = y.tangentImpulse);
                            break;
                          }
                        }
                      }
                      a !== h && (r.setAwake(!0), n.setAwake(!0));
                    }
                    this.m_touchingFlag = a;
                    var g = "object" == typeof t && null !== t;
                    !h && a && g && t.beginContact(this),
                      h && !a && g && t.endContact(this),
                      !c && a && g && Mf && t.preSolve(this, Mf);
                  }
                }
              }
            }),
            (t.prototype.solvePositionConstraint = function (t) {
              return this._solvePositionConstraint(t, null, null);
            }),
            (t.prototype.solvePositionConstraintTOI = function (t, e, i) {
              return this._solvePositionConstraint(t, e, i);
            }),
            (t.prototype._solvePositionConstraint = function (t, e, i) {
              var r = null !== e && null !== i,
                n = 0,
                o = this.m_fixtureA,
                s = this.m_fixtureB;
              if (null === o || null === s) return n;
              var a = o.m_body,
                h = s.m_body;
              if (null === a || null === h) return n;
              a.c_velocity, h.c_velocity;
              var u = a.c_position,
                l = h.c_position,
                c = this.p_localCenterA,
                d = this.p_localCenterB,
                p = 0,
                _ = 0;
              (r && a !== e && a !== i) ||
                ((p = this.p_invMassA), (_ = this.p_invIA));
              var f = 0,
                m = 0;
              (r && h !== e && h !== i) ||
                ((f = this.p_invMassB), (m = this.p_invIB)),
                Ed(Df, u.c);
              var y = u.a;
              Ed(Lf, l.c);
              for (var g = l.a, v = 0; v < this.p_pointCount; ++v) {
                vp(Vf, c, Df, y), vp(jf, d, Lf, g);
                var b = void 0;
                switch (this.p_type) {
                  case tf.e_circles:
                    Jd(zf, Vf, this.p_localPoint),
                      Jd(Xf, jf, this.p_localPoints[0]),
                      Od(Kf, Xf, zf),
                      Ud(Kf),
                      Nd(Jf, 0.5, zf, 0.5, Xf),
                      (b =
                        zd(Xf, Kf) -
                        zd(zf, Kf) -
                        this.p_radiusA -
                        this.p_radiusB);
                    break;
                  case tf.e_faceA:
                    Wd(Kf, Vf.q, this.p_localNormal),
                      Jd(Yf, Vf, this.p_localPoint),
                      Jd(Hf, jf, this.p_localPoints[v]),
                      (b =
                        zd(Hf, Kf) -
                        zd(Yf, Kf) -
                        this.p_radiusA -
                        this.p_radiusB),
                      Ed(Jf, Hf);
                    break;
                  case tf.e_faceB:
                    Wd(Kf, jf.q, this.p_localNormal),
                      Jd(Yf, jf, this.p_localPoint),
                      Jd(Hf, Vf, this.p_localPoints[v]),
                      (b =
                        zd(Hf, Kf) -
                        zd(Yf, Kf) -
                        this.p_radiusA -
                        this.p_radiusB),
                      Ed(Jf, Hf),
                      Md(Kf);
                    break;
                  default:
                    return n;
                }
                Od(Wf, Jf, Df), Od(qf, Jf, Lf), (n = Ef(n, b));
                var x = Yc(
                    (r ? hd.toiBaugarte : hd.baumgarte) * (b + hd.linearSlop),
                    -hd.maxLinearCorrection,
                    0
                  ),
                  w = jd(Wf, Kf),
                  T = jd(qf, Kf),
                  A = p + f + _ * w * w + m * T * T;
                Id($f, A > 0 ? -x / A : 0, Kf),
                  Dd(Df, p, $f),
                  (y -= _ * jd(Wf, $f)),
                  kd(Lf, f, $f),
                  (g += m * jd(qf, $f));
              }
              return Ed(u.c, Df), (u.a = y), Ed(l.c, Lf), (l.a = g), n;
            }),
            (t.prototype.initVelocityConstraint = function (t) {
              var e = this.m_fixtureA,
                i = this.m_fixtureB;
              if (null !== e && null !== i) {
                var r = e.m_body,
                  n = i.m_body;
                if (null !== r && null !== n) {
                  var o = r.c_velocity,
                    s = n.c_velocity,
                    a = r.c_position,
                    h = n.c_position,
                    u = this.p_radiusA,
                    l = this.p_radiusB,
                    c = this.m_manifold,
                    d = this.v_invMassA,
                    p = this.v_invMassB,
                    _ = this.v_invIA,
                    f = this.v_invIB,
                    m = this.p_localCenterA,
                    y = this.p_localCenterB;
                  Ed(Df, a.c);
                  var g = a.a;
                  Ed(Nf, o.v);
                  var v = o.w;
                  Ed(Lf, h.c);
                  var b = h.a;
                  Ed(Uf, s.v);
                  var x = s.w;
                  Tf && console.assert(c.pointCount > 0),
                    vp(Vf, m, Df, g),
                    vp(jf, y, Lf, b),
                    Pf.recycle(),
                    c.getWorldManifold(Pf, Vf, u, jf, l),
                    Ed(this.v_normal, Pf.normal);
                  for (var w = 0; w < this.v_pointCount; ++w) {
                    var T = this.v_points[w],
                      A = Pf.points[w];
                    Od(T.rA, A, Df), Od(T.rB, A, Lf);
                    var S = jd(T.rA, this.v_normal),
                      E = jd(T.rB, this.v_normal),
                      C = d + p + _ * S * S + f * E * E;
                    (T.normalMass = C > 0 ? 1 / C : 0),
                      Gd(Gf, this.v_normal, 1);
                    var M = jd(T.rA, Gf),
                      P = jd(T.rB, Gf),
                      B = d + p + _ * M * M + f * P * P;
                    (T.tangentMass = B > 0 ? 1 / B : 0), (T.velocityBias = 0);
                    var O = 0;
                    (O += zd(this.v_normal, Uf)),
                      (O += zd(this.v_normal, Vd(am, x, T.rB))),
                      (O -= zd(this.v_normal, Nf)),
                      (O -= zd(this.v_normal, Vd(am, v, T.rA))) <
                        -hd.velocityThreshold &&
                        (T.velocityBias = -this.v_restitution * O);
                  }
                  if (2 == this.v_pointCount && t.blockSolve) {
                    var R = this.v_points[0],
                      I = this.v_points[1],
                      k = jd(R.rA, this.v_normal),
                      F = jd(R.rB, this.v_normal),
                      D = jd(I.rA, this.v_normal),
                      N = jd(I.rB, this.v_normal),
                      L = d + p + _ * k * k + f * F * F,
                      U = d + p + _ * D * D + f * N * N,
                      G = d + p + _ * k * D + f * F * N;
                    if (L * L < 1e3 * (L * U - G * G)) {
                      this.v_K.ex.setNum(L, G), this.v_K.ey.setNum(G, U);
                      var V = this.v_K.ex.x,
                        j = this.v_K.ey.x,
                        z = this.v_K.ex.y,
                        X = this.v_K.ey.y,
                        H = V * X - j * z;
                      0 !== H && (H = 1 / H),
                        (this.v_normalMass.ex.x = H * X),
                        (this.v_normalMass.ey.x = -H * j),
                        (this.v_normalMass.ex.y = -H * z),
                        (this.v_normalMass.ey.y = H * V);
                    } else this.v_pointCount = 1;
                  }
                  Ed(a.c, Df),
                    (a.a = g),
                    Ed(o.v, Nf),
                    (o.w = v),
                    Ed(h.c, Lf),
                    (h.a = b),
                    Ed(s.v, Uf),
                    (s.w = x);
                }
              }
            }),
            (t.prototype.warmStartConstraint = function (t) {
              var e = this.m_fixtureA,
                i = this.m_fixtureB;
              if (null !== e && null !== i) {
                var r = e.m_body,
                  n = i.m_body;
                if (null !== r && null !== n) {
                  var o = r.c_velocity,
                    s = n.c_velocity,
                    a = (r.c_position, n.c_position, this.v_invMassA),
                    h = this.v_invIA,
                    u = this.v_invMassB,
                    l = this.v_invIB;
                  Ed(Nf, o.v);
                  var c = o.w;
                  Ed(Uf, s.v);
                  var d = s.w;
                  Ed(Kf, this.v_normal), Gd(Gf, Kf, 1);
                  for (var p = 0; p < this.v_pointCount; ++p) {
                    var _ = this.v_points[p];
                    Nd($f, _.normalImpulse, Kf, _.tangentImpulse, Gf),
                      (c -= h * jd(_.rA, $f)),
                      Dd(Nf, a, $f),
                      (d += l * jd(_.rB, $f)),
                      kd(Uf, u, $f);
                  }
                  Ed(o.v, Nf), (o.w = c), Ed(s.v, Uf), (s.w = d);
                }
              }
            }),
            (t.prototype.storeConstraintImpulses = function (t) {
              for (var e = this.m_manifold, i = 0; i < this.v_pointCount; ++i)
                (e.points[i].normalImpulse = this.v_points[i].normalImpulse),
                  (e.points[i].tangentImpulse =
                    this.v_points[i].tangentImpulse);
            }),
            (t.prototype.solveVelocityConstraint = function (t) {
              var e = this.m_fixtureA,
                i = this.m_fixtureB;
              if (null !== e && null !== i) {
                var r = e.m_body,
                  n = i.m_body;
                if (null !== r && null !== n) {
                  var o = r.c_velocity,
                    s = (r.c_position, n.c_velocity),
                    a = (n.c_position, this.v_invMassA),
                    h = this.v_invIA,
                    u = this.v_invMassB,
                    l = this.v_invIB;
                  Ed(Nf, o.v);
                  var c = o.w;
                  Ed(Uf, s.v);
                  var d = s.w;
                  Ed(Kf, this.v_normal), Gd(Gf, Kf, 1);
                  var p = this.v_friction;
                  Tf &&
                    console.assert(
                      1 == this.v_pointCount || 2 == this.v_pointCount
                    );
                  for (var _ = 0; _ < this.v_pointCount; ++_) {
                    var f = this.v_points[_];
                    Cd(Zf),
                      Pd(Zf, Uf),
                      Pd(Zf, Vd(am, d, f.rB)),
                      Bd(Zf, Nf),
                      Bd(Zf, Vd(am, c, f.rA));
                    var m = zd(Zf, Gf) - this.v_tangentSpeed,
                      y = f.tangentMass * -m,
                      g = p * f.normalImpulse;
                    (y =
                      (b = Yc(f.tangentImpulse + y, -g, g)) - f.tangentImpulse),
                      (f.tangentImpulse = b),
                      Id($f, y, Gf),
                      Dd(Nf, a, $f),
                      (c -= h * jd(f.rA, $f)),
                      kd(Uf, u, $f),
                      (d += l * jd(f.rB, $f));
                  }
                  if (1 == this.v_pointCount || 0 == t.blockSolve)
                    for (var v = 0; v < this.v_pointCount; ++v) {
                      (f = this.v_points[v]),
                        Cd(Zf),
                        Pd(Zf, Uf),
                        Pd(Zf, Vd(am, d, f.rB)),
                        Bd(Zf, Nf),
                        Bd(Zf, Vd(am, c, f.rA));
                      var b,
                        x = zd(Zf, Kf);
                      (y = -f.normalMass * (x - f.velocityBias)),
                        (y =
                          (b = Sf(f.normalImpulse + y, 0)) - f.normalImpulse),
                        (f.normalImpulse = b),
                        Id($f, y, Kf),
                        Dd(Nf, a, $f),
                        (c -= h * jd(f.rA, $f)),
                        kd(Uf, u, $f),
                        (d += l * jd(f.rB, $f));
                    }
                  else {
                    var w = this.v_points[0],
                      T = this.v_points[1];
                    Sd(im, w.normalImpulse, T.normalImpulse),
                      Tf && console.assert(im.x >= 0 && im.y >= 0),
                      Cd(Qf),
                      Pd(Qf, Uf),
                      Pd(Qf, Vd(am, d, w.rB)),
                      Bd(Qf, Nf),
                      Bd(Qf, Vd(am, c, w.rA)),
                      Cd(tm),
                      Pd(tm, Uf),
                      Pd(tm, Vd(am, d, T.rB)),
                      Bd(tm, Nf),
                      Bd(tm, Vd(am, c, T.rA));
                    var A = zd(Qf, Kf),
                      S = zd(tm, Kf);
                    for (
                      Sd(em, A - w.velocityBias, S - T.velocityBias),
                        em.x -= this.v_K.ex.x * im.x + this.v_K.ey.x * im.y,
                        em.y -= this.v_K.ex.y * im.x + this.v_K.ey.y * im.y;
                      ;

                    ) {
                      if (
                        (Cd(rm),
                        (rm.x = -(
                          this.v_normalMass.ex.x * em.x +
                          this.v_normalMass.ey.x * em.y
                        )),
                        (rm.y = -(
                          this.v_normalMass.ex.y * em.x +
                          this.v_normalMass.ey.y * em.y
                        )),
                        rm.x >= 0 && rm.y >= 0)
                      ) {
                        Od(nm, rm, im),
                          Id(om, nm.x, Kf),
                          Id(sm, nm.y, Kf),
                          Ld(Nf, -a, om, -a, sm, 1, Nf),
                          (c -= h * (jd(w.rA, om) + jd(T.rA, sm))),
                          Ld(Uf, u, om, u, sm, 1, Uf),
                          (d += l * (jd(w.rB, om) + jd(T.rB, sm))),
                          (w.normalImpulse = rm.x),
                          (T.normalImpulse = rm.y);
                        break;
                      }
                      if (
                        ((rm.x = -w.normalMass * em.x),
                        (rm.y = 0),
                        (A = 0),
                        (S = this.v_K.ex.y * rm.x + em.y),
                        rm.x >= 0 && S >= 0)
                      ) {
                        Od(nm, rm, im),
                          Id(om, nm.x, Kf),
                          Id(sm, nm.y, Kf),
                          Ld(Nf, -a, om, -a, sm, 1, Nf),
                          (c -= h * (jd(w.rA, om) + jd(T.rA, sm))),
                          Ld(Uf, u, om, u, sm, 1, Uf),
                          (d += l * (jd(w.rB, om) + jd(T.rB, sm))),
                          (w.normalImpulse = rm.x),
                          (T.normalImpulse = rm.y);
                        break;
                      }
                      if (
                        ((rm.x = 0),
                        (rm.y = -T.normalMass * em.y),
                        (A = this.v_K.ey.x * rm.y + em.x),
                        (S = 0),
                        rm.y >= 0 && A >= 0)
                      ) {
                        Od(nm, rm, im),
                          Id(om, nm.x, Kf),
                          Id(sm, nm.y, Kf),
                          Ld(Nf, -a, om, -a, sm, 1, Nf),
                          (c -= h * (jd(w.rA, om) + jd(T.rA, sm))),
                          Ld(Uf, u, om, u, sm, 1, Uf),
                          (d += l * (jd(w.rB, om) + jd(T.rB, sm))),
                          (w.normalImpulse = rm.x),
                          (T.normalImpulse = rm.y);
                        break;
                      }
                      if (
                        ((rm.x = 0),
                        (rm.y = 0),
                        (A = em.x),
                        (S = em.y),
                        A >= 0 && S >= 0)
                      ) {
                        Od(nm, rm, im),
                          Id(om, nm.x, Kf),
                          Id(sm, nm.y, Kf),
                          Ld(Nf, -a, om, -a, sm, 1, Nf),
                          (c -= h * (jd(w.rA, om) + jd(T.rA, sm))),
                          Ld(Uf, u, om, u, sm, 1, Uf),
                          (d += l * (jd(w.rB, om) + jd(T.rB, sm))),
                          (w.normalImpulse = rm.x),
                          (T.normalImpulse = rm.y);
                        break;
                      }
                      break;
                    }
                  }
                  Ed(o.v, Nf), (o.w = c), Ed(s.v, Uf), (s.w = d);
                }
              }
            }),
            (t.addType = function (t, e, i) {
              (kf[t] = kf[t] || {}), (kf[t][e] = i);
            }),
            (t.create = function (t, e, i, r) {
              var n,
                o = t.m_shape.m_type,
                s = i.m_shape.m_type,
                a = Cf.allocate();
              if ((n = kf[o] && kf[o][s])) a.initialize(t, e, i, r, n);
              else {
                if (!(n = kf[s] && kf[s][o])) return null;
                a.initialize(i, r, t, e, n);
              }
              (t = a.m_fixtureA),
                (i = a.m_fixtureB),
                (e = a.getChildIndexA()),
                (r = a.getChildIndexB());
              var h = t.m_body,
                u = i.m_body;
              return (
                (a.m_nodeA.contact = a),
                (a.m_nodeA.other = u),
                (a.m_nodeA.prev = null),
                (a.m_nodeA.next = h.m_contactList),
                null != h.m_contactList && (h.m_contactList.prev = a.m_nodeA),
                (h.m_contactList = a.m_nodeA),
                (a.m_nodeB.contact = a),
                (a.m_nodeB.other = h),
                (a.m_nodeB.prev = null),
                (a.m_nodeB.next = u.m_contactList),
                null != u.m_contactList && (u.m_contactList.prev = a.m_nodeB),
                (u.m_contactList = a.m_nodeB),
                0 == t.isSensor() &&
                  0 == i.isSensor() &&
                  (h.setAwake(!0), u.setAwake(!0)),
                a
              );
            }),
            (t.destroy = function (t, e) {
              var i = t.m_fixtureA,
                r = t.m_fixtureB;
              if (null !== i && null !== r) {
                var n = i.m_body,
                  o = r.m_body;
                null !== n &&
                  null !== o &&
                  (t.isTouching() && e.endContact(t),
                  t.m_nodeA.prev && (t.m_nodeA.prev.next = t.m_nodeA.next),
                  t.m_nodeA.next && (t.m_nodeA.next.prev = t.m_nodeA.prev),
                  t.m_nodeA == n.m_contactList &&
                    (n.m_contactList = t.m_nodeA.next),
                  t.m_nodeB.prev && (t.m_nodeB.prev.next = t.m_nodeB.next),
                  t.m_nodeB.next && (t.m_nodeB.next.prev = t.m_nodeB.prev),
                  t.m_nodeB == o.m_contactList &&
                    (o.m_contactList = t.m_nodeB.next),
                  t.m_manifold.pointCount > 0 &&
                    !i.m_isSensor &&
                    !r.m_isSensor &&
                    (n.setAwake(!0), o.setAwake(!0)),
                  Cf.release(t));
              }
            }),
            t
          );
        })(),
        um = "undefined" != typeof ASSERT && ASSERT,
        lm = "undefined" != typeof CONSTRUCTOR_FACTORY && CONSTRUCTOR_FACTORY,
        cm = {
          gravity: td.zero(),
          allowSleep: !0,
          warmStarting: !0,
          continuousPhysics: !0,
          subStepping: !1,
          blockSolve: !0,
          velocityIterations: 8,
          positionIterations: 3,
        },
        dm = (function () {
          function t(e) {
            if (lm && !(this instanceof t)) return new t(e);
            (this.s_step = new j_()),
              e ? td.isValid(e) && (e = { gravity: e }) : (e = {}),
              (e = Vc(e, cm)),
              (this.m_solver = new Q_(this)),
              (this.m_broadPhase = new bd()),
              (this.m_contactList = null),
              (this.m_contactCount = 0),
              (this.m_bodyList = null),
              (this.m_bodyCount = 0),
              (this.m_jointList = null),
              (this.m_jointCount = 0),
              (this.m_stepComplete = !0),
              (this.m_allowSleep = e.allowSleep),
              (this.m_gravity = td.clone(e.gravity)),
              (this.m_clearForces = !0),
              (this.m_newFixture = !1),
              (this.m_locked = !1),
              (this.m_warmStarting = e.warmStarting),
              (this.m_continuousPhysics = e.continuousPhysics),
              (this.m_subStepping = e.subStepping),
              (this.m_blockSolve = e.blockSolve),
              (this.m_velocityIterations = e.velocityIterations),
              (this.m_positionIterations = e.positionIterations),
              (this.m_t = 0),
              (this.m_step_callback = []);
          }
          return (
            (t.prototype._serialize = function () {
              for (
                var t = [], e = [], i = this.getBodyList();
                i;
                i = i.getNext()
              )
                t.push(i);
              for (var r = this.getJointList(); r; r = r.getNext())
                "function" == typeof r._serialize && e.push(r);
              return { gravity: this.m_gravity, bodies: t, joints: e };
            }),
            (t._deserialize = function (e, i, r) {
              if (!e) return new t();
              var n = new t(e.gravity);
              if (e.bodies)
                for (var o = e.bodies.length - 1; o >= 0; o -= 1)
                  n._addBody(r(Lp, e.bodies[o], n));
              if (e.joints)
                for (o = e.joints.length - 1; o >= 0; o--)
                  n.createJoint(r(Vp, e.joints[o], n));
              return n;
            }),
            (t.prototype.getBodyList = function () {
              return this.m_bodyList;
            }),
            (t.prototype.getJointList = function () {
              return this.m_jointList;
            }),
            (t.prototype.getContactList = function () {
              return this.m_contactList;
            }),
            (t.prototype.getBodyCount = function () {
              return this.m_bodyCount;
            }),
            (t.prototype.getJointCount = function () {
              return this.m_jointCount;
            }),
            (t.prototype.getContactCount = function () {
              return this.m_contactCount;
            }),
            (t.prototype.setGravity = function (t) {
              this.m_gravity.set(t);
            }),
            (t.prototype.getGravity = function () {
              return this.m_gravity;
            }),
            (t.prototype.isLocked = function () {
              return this.m_locked;
            }),
            (t.prototype.setAllowSleeping = function (t) {
              if (
                t != this.m_allowSleep &&
                ((this.m_allowSleep = t), 0 == this.m_allowSleep)
              )
                for (var e = this.m_bodyList; e; e = e.m_next) e.setAwake(!0);
            }),
            (t.prototype.getAllowSleeping = function () {
              return this.m_allowSleep;
            }),
            (t.prototype.setWarmStarting = function (t) {
              this.m_warmStarting = t;
            }),
            (t.prototype.getWarmStarting = function () {
              return this.m_warmStarting;
            }),
            (t.prototype.setContinuousPhysics = function (t) {
              this.m_continuousPhysics = t;
            }),
            (t.prototype.getContinuousPhysics = function () {
              return this.m_continuousPhysics;
            }),
            (t.prototype.setSubStepping = function (t) {
              this.m_subStepping = t;
            }),
            (t.prototype.getSubStepping = function () {
              return this.m_subStepping;
            }),
            (t.prototype.setAutoClearForces = function (t) {
              this.m_clearForces = t;
            }),
            (t.prototype.getAutoClearForces = function () {
              return this.m_clearForces;
            }),
            (t.prototype.clearForces = function () {
              for (var t = this.m_bodyList; t; t = t.getNext())
                t.m_force.setZero(), (t.m_torque = 0);
            }),
            (t.prototype.queryAABB = function (t, e) {
              um && console.assert("function" == typeof e);
              var i = this.m_broadPhase;
              this.m_broadPhase.query(t, function (t) {
                var r = i.getUserData(t);
                return e(r.fixture);
              });
            }),
            (t.prototype.rayCast = function (t, e, i) {
              um && console.assert("function" == typeof i);
              var r = this.m_broadPhase;
              this.m_broadPhase.rayCast(
                { maxFraction: 1, p1: t, p2: e },
                function (t, e) {
                  var n = r.getUserData(e),
                    o = n.fixture,
                    s = n.childIndex,
                    a = {};
                  if (o.rayCast(a, t, s)) {
                    var h = a.fraction,
                      u = td.add(
                        td.mulNumVec2(1 - h, t.p1),
                        td.mulNumVec2(h, t.p2)
                      );
                    return i(o, u, a.normal, h);
                  }
                  return t.maxFraction;
                }
              );
            }),
            (t.prototype.getProxyCount = function () {
              return this.m_broadPhase.getProxyCount();
            }),
            (t.prototype.getTreeHeight = function () {
              return this.m_broadPhase.getTreeHeight();
            }),
            (t.prototype.getTreeBalance = function () {
              return this.m_broadPhase.getTreeBalance();
            }),
            (t.prototype.getTreeQuality = function () {
              return this.m_broadPhase.getTreeQuality();
            }),
            (t.prototype.shiftOrigin = function (t) {
              if (
                (um && console.assert(0 == this.isLocked()), !this.isLocked())
              ) {
                for (var e = this.m_bodyList; e; e = e.m_next)
                  e.m_xf.p.sub(t), e.m_sweep.c0.sub(t), e.m_sweep.c.sub(t);
                for (var i = this.m_jointList; i; i = i.m_next)
                  i.shiftOrigin(t);
                this.m_broadPhase.shiftOrigin(t);
              }
            }),
            (t.prototype._addBody = function (t) {
              um && console.assert(!1 === this.isLocked()),
                this.isLocked() ||
                  ((t.m_prev = null),
                  (t.m_next = this.m_bodyList),
                  this.m_bodyList && (this.m_bodyList.m_prev = t),
                  (this.m_bodyList = t),
                  ++this.m_bodyCount);
            }),
            (t.prototype.createBody = function (t, e) {
              if ((um && console.assert(0 == this.isLocked()), this.isLocked()))
                return null;
              var i = {};
              t &&
                (td.isValid(t)
                  ? (i = { position: t, angle: e })
                  : "object" == typeof t && (i = t));
              var r = new Lp(this, i);
              return this._addBody(r), r;
            }),
            (t.prototype.createDynamicBody = function (t, e) {
              var i = {};
              return (
                t &&
                  (td.isValid(t)
                    ? (i = { position: t, angle: e })
                    : "object" == typeof t && (i = t)),
                (i.type = "dynamic"),
                this.createBody(i)
              );
            }),
            (t.prototype.createKinematicBody = function (t, e) {
              var i = {};
              return (
                t &&
                  (td.isValid(t)
                    ? (i = { position: t, angle: e })
                    : "object" == typeof t && (i = t)),
                (i.type = "kinematic"),
                this.createBody(i)
              );
            }),
            (t.prototype.destroyBody = function (t) {
              if (
                (um && console.assert(this.m_bodyCount > 0),
                um && console.assert(0 == this.isLocked()),
                !this.isLocked())
              ) {
                if (t.m_destroyed) return !1;
                for (var e = t.m_jointList; e; ) {
                  var i = e;
                  (e = e.next),
                    this.publish("remove-joint", i.joint),
                    this.destroyJoint(i.joint),
                    (t.m_jointList = e);
                }
                t.m_jointList = null;
                for (var r = t.m_contactList; r; ) {
                  var n = r;
                  (r = r.next),
                    this.destroyContact(n.contact),
                    (t.m_contactList = r);
                }
                t.m_contactList = null;
                for (var o = t.m_fixtureList; o; ) {
                  var s = o;
                  (o = o.m_next),
                    this.publish("remove-fixture", s),
                    s.destroyProxies(this.m_broadPhase),
                    (t.m_fixtureList = o);
                }
                return (
                  (t.m_fixtureList = null),
                  t.m_prev && (t.m_prev.m_next = t.m_next),
                  t.m_next && (t.m_next.m_prev = t.m_prev),
                  t == this.m_bodyList && (this.m_bodyList = t.m_next),
                  (t.m_destroyed = !0),
                  --this.m_bodyCount,
                  this.publish("remove-body", t),
                  !0
                );
              }
            }),
            (t.prototype.createJoint = function (t) {
              if (
                (um && console.assert(!!t.m_bodyA),
                um && console.assert(!!t.m_bodyB),
                um && console.assert(0 == this.isLocked()),
                this.isLocked())
              )
                return null;
              if (
                ((t.m_prev = null),
                (t.m_next = this.m_jointList),
                this.m_jointList && (this.m_jointList.m_prev = t),
                (this.m_jointList = t),
                ++this.m_jointCount,
                (t.m_edgeA.joint = t),
                (t.m_edgeA.other = t.m_bodyB),
                (t.m_edgeA.prev = null),
                (t.m_edgeA.next = t.m_bodyA.m_jointList),
                t.m_bodyA.m_jointList &&
                  (t.m_bodyA.m_jointList.prev = t.m_edgeA),
                (t.m_bodyA.m_jointList = t.m_edgeA),
                (t.m_edgeB.joint = t),
                (t.m_edgeB.other = t.m_bodyA),
                (t.m_edgeB.prev = null),
                (t.m_edgeB.next = t.m_bodyB.m_jointList),
                t.m_bodyB.m_jointList &&
                  (t.m_bodyB.m_jointList.prev = t.m_edgeB),
                (t.m_bodyB.m_jointList = t.m_edgeB),
                0 == t.m_collideConnected)
              )
                for (var e = t.m_bodyB.getContactList(); e; e = e.next)
                  e.other == t.m_bodyA && e.contact.flagForFiltering();
              return t;
            }),
            (t.prototype.destroyJoint = function (t) {
              if (
                (um && console.assert(0 == this.isLocked()), !this.isLocked())
              ) {
                t.m_prev && (t.m_prev.m_next = t.m_next),
                  t.m_next && (t.m_next.m_prev = t.m_prev),
                  t == this.m_jointList && (this.m_jointList = t.m_next);
                var e = t.m_bodyA,
                  i = t.m_bodyB;
                if (
                  (e.setAwake(!0),
                  i.setAwake(!0),
                  t.m_edgeA.prev && (t.m_edgeA.prev.next = t.m_edgeA.next),
                  t.m_edgeA.next && (t.m_edgeA.next.prev = t.m_edgeA.prev),
                  t.m_edgeA == e.m_jointList &&
                    (e.m_jointList = t.m_edgeA.next),
                  (t.m_edgeA.prev = null),
                  (t.m_edgeA.next = null),
                  t.m_edgeB.prev && (t.m_edgeB.prev.next = t.m_edgeB.next),
                  t.m_edgeB.next && (t.m_edgeB.next.prev = t.m_edgeB.prev),
                  t.m_edgeB == i.m_jointList &&
                    (i.m_jointList = t.m_edgeB.next),
                  (t.m_edgeB.prev = null),
                  (t.m_edgeB.next = null),
                  um && console.assert(this.m_jointCount > 0),
                  --this.m_jointCount,
                  0 == t.m_collideConnected)
                )
                  for (var r = i.getContactList(); r; )
                    r.other == e && r.contact.flagForFiltering(), (r = r.next);
                this.publish("remove-joint", t);
              }
            }),
            (t.prototype.step = function (t, e, i) {
              if (
                (this.publish("pre-step", t),
                (0 | e) !== e && (e = 0),
                (e = e || this.m_velocityIterations),
                (i = i || this.m_positionIterations),
                this.m_newFixture &&
                  (this.findNewContacts(), (this.m_newFixture = !1)),
                (this.m_locked = !0),
                this.s_step.reset(t),
                (this.s_step.velocityIterations = e),
                (this.s_step.positionIterations = i),
                (this.s_step.warmStarting = this.m_warmStarting),
                (this.s_step.blockSolve = this.m_blockSolve),
                this.updateContacts(),
                this.m_stepComplete && t > 0)
              ) {
                this.m_solver.solveWorld(this.s_step);
                for (var r = this.m_bodyList; r; r = r.getNext())
                  0 != r.m_islandFlag &&
                    (r.isStatic() || r.synchronizeFixtures());
                this.findNewContacts();
              }
              var n;
              for (
                this.m_continuousPhysics &&
                  t > 0 &&
                  this.m_solver.solveWorldTOI(this.s_step),
                  this.m_clearForces && this.clearForces(),
                  this.m_locked = !1;
                (n = this.m_step_callback.shift());

              )
                n(this);
              this.publish("post-step", t);
            }),
            (t.prototype.queueUpdate = function (t) {
              this.isLocked() ? this.m_step_callback.push(t) : t(this);
            }),
            (t.prototype.findNewContacts = function () {
              var t = this;
              this.m_broadPhase.updatePairs(function (e, i) {
                return t.createContact(e, i);
              });
            }),
            (t.prototype.createContact = function (t, e) {
              var i = t.fixture,
                r = e.fixture,
                n = t.childIndex,
                o = e.childIndex,
                s = i.getBody(),
                a = r.getBody();
              if (s != a) {
                for (var h = a.getContactList(); h; ) {
                  if (h.other == s) {
                    var u = h.contact.getFixtureA(),
                      l = h.contact.getFixtureB(),
                      c = h.contact.getChildIndexA(),
                      d = h.contact.getChildIndexB();
                    if (u == i && l == r && c == n && d == o) return;
                    if (u == r && l == i && c == o && d == n) return;
                  }
                  h = h.next;
                }
                if (0 != a.shouldCollide(s) && 0 != r.shouldCollide(i)) {
                  var p = hm.create(i, n, r, o);
                  null != p &&
                    ((p.m_prev = null),
                    null != this.m_contactList &&
                      ((p.m_next = this.m_contactList),
                      (this.m_contactList.m_prev = p)),
                    (this.m_contactList = p),
                    ++this.m_contactCount);
                }
              }
            }),
            (t.prototype.updateContacts = function () {
              for (var t, e = this.m_contactList; (t = e); ) {
                e = t.getNext();
                var i = t.getFixtureA(),
                  r = t.getFixtureB(),
                  n = t.getChildIndexA(),
                  o = t.getChildIndexB(),
                  s = i.getBody(),
                  a = r.getBody();
                if (t.m_filterFlag) {
                  if (0 == a.shouldCollide(s)) {
                    this.destroyContact(t);
                    continue;
                  }
                  if (0 == r.shouldCollide(i)) {
                    this.destroyContact(t);
                    continue;
                  }
                  t.m_filterFlag = !1;
                }
                var h = s.isAwake() && !s.isStatic(),
                  u = a.isAwake() && !a.isStatic();
                if (0 != h || 0 != u) {
                  var l = i.m_proxies[n].proxyId,
                    c = r.m_proxies[o].proxyId;
                  0 != this.m_broadPhase.testOverlap(l, c)
                    ? t.update(this)
                    : this.destroyContact(t);
                }
              }
            }),
            (t.prototype.destroyContact = function (t) {
              t.m_prev && (t.m_prev.m_next = t.m_next),
                t.m_next && (t.m_next.m_prev = t.m_prev),
                t == this.m_contactList && (this.m_contactList = t.m_next),
                hm.destroy(t, this),
                --this.m_contactCount;
            }),
            (t.prototype.on = function (t, e) {
              return (
                "string" != typeof t ||
                  "function" != typeof e ||
                  (this._listeners || (this._listeners = {}),
                  this._listeners[t] || (this._listeners[t] = []),
                  this._listeners[t].push(e)),
                this
              );
            }),
            (t.prototype.off = function (t, e) {
              if ("string" != typeof t || "function" != typeof e) return this;
              var i = this._listeners && this._listeners[t];
              if (!i || !i.length) return this;
              var r = i.indexOf(e);
              return r >= 0 && i.splice(r, 1), this;
            }),
            (t.prototype.publish = function (t, e, i, r) {
              var n = this._listeners && this._listeners[t];
              if (!n || !n.length) return 0;
              for (var o = 0; o < n.length; o++) n[o].call(this, e, i, r);
              return n.length;
            }),
            (t.prototype.beginContact = function (t) {
              this.publish("begin-contact", t);
            }),
            (t.prototype.endContact = function (t) {
              this.publish("end-contact", t);
            }),
            (t.prototype.preSolve = function (t, e) {
              this.publish("pre-solve", t, e);
            }),
            (t.prototype.postSolve = function (t, e) {
              this.publish("post-solve", t, e);
            }),
            t
          );
        })(),
        pm = "undefined" != typeof ASSERT && ASSERT,
        _m = "undefined" != typeof CONSTRUCTOR_FACTORY && CONSTRUCTOR_FACTORY,
        fm = (function () {
          function t(e, i, r) {
            if (_m && !(this instanceof t)) return new t(e, i, r);
            void 0 === e
              ? ((this.x = 0), (this.y = 0), (this.z = 0))
              : "object" == typeof e
              ? ((this.x = e.x), (this.y = e.y), (this.z = e.z))
              : ((this.x = e), (this.y = i), (this.z = r)),
              pm && t.assert(this);
          }
          return (
            (t.prototype._serialize = function () {
              return { x: this.x, y: this.y, z: this.z };
            }),
            (t._deserialize = function (e) {
              var i = Object.create(t.prototype);
              return (i.x = e.x), (i.y = e.y), (i.z = e.z), i;
            }),
            (t.neo = function (e, i, r) {
              var n = Object.create(t.prototype);
              return (n.x = e), (n.y = i), (n.z = r), n;
            }),
            (t.zero = function () {
              var e = Object.create(t.prototype);
              return (e.x = 0), (e.y = 0), (e.z = 0), e;
            }),
            (t.clone = function (e) {
              return pm && t.assert(e), t.neo(e.x, e.y, e.z);
            }),
            (t.prototype.toString = function () {
              return JSON.stringify(this);
            }),
            (t.isValid = function (t) {
              return (
                null != t &&
                Number.isFinite(t.x) &&
                Number.isFinite(t.y) &&
                Number.isFinite(t.z)
              );
            }),
            (t.assert = function (e) {
              pm && console.assert(!t.isValid(e), "Invalid Vec3!", e);
            }),
            (t.prototype.setZero = function () {
              return (this.x = 0), (this.y = 0), (this.z = 0), this;
            }),
            (t.prototype.set = function (t, e, i) {
              return (this.x = t), (this.y = e), (this.z = i), this;
            }),
            (t.prototype.add = function (t) {
              return (this.x += t.x), (this.y += t.y), (this.z += t.z), this;
            }),
            (t.prototype.sub = function (t) {
              return (this.x -= t.x), (this.y -= t.y), (this.z -= t.z), this;
            }),
            (t.prototype.mul = function (t) {
              return (this.x *= t), (this.y *= t), (this.z *= t), this;
            }),
            (t.areEqual = function (e, i) {
              return (
                pm && t.assert(e),
                pm && t.assert(i),
                e === i ||
                  ("object" == typeof e &&
                    null !== e &&
                    "object" == typeof i &&
                    null !== i &&
                    e.x === i.x &&
                    e.y === i.y &&
                    e.z === i.z)
              );
            }),
            (t.dot = function (t, e) {
              return t.x * e.x + t.y * e.y + t.z * e.z;
            }),
            (t.cross = function (e, i) {
              return new t(
                e.y * i.z - e.z * i.y,
                e.z * i.x - e.x * i.z,
                e.x * i.y - e.y * i.x
              );
            }),
            (t.add = function (e, i) {
              return new t(e.x + i.x, e.y + i.y, e.z + i.z);
            }),
            (t.sub = function (e, i) {
              return new t(e.x - i.x, e.y - i.y, e.z - i.z);
            }),
            (t.mul = function (e, i) {
              return new t(i * e.x, i * e.y, i * e.z);
            }),
            (t.prototype.neg = function () {
              return (
                (this.x = -this.x), (this.y = -this.y), (this.z = -this.z), this
              );
            }),
            (t.neg = function (e) {
              return new t(-e.x, -e.y, -e.z);
            }),
            t
          );
        })(),
        mm = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        ym = "undefined" != typeof CONSTRUCTOR_FACTORY && CONSTRUCTOR_FACTORY,
        gm = Ad(0, 0),
        vm = Ad(0, 0),
        bm = (function (t) {
          function e(i, r) {
            var n = this;
            return !ym || n instanceof e
              ? (((n = t.call(this) || this).m_type = e.TYPE),
                (n.m_radius = hd.polygonRadius),
                (n.m_vertex1 = i ? td.clone(i) : td.zero()),
                (n.m_vertex2 = r ? td.clone(r) : td.zero()),
                (n.m_vertex0 = td.zero()),
                (n.m_vertex3 = td.zero()),
                (n.m_hasVertex0 = !1),
                (n.m_hasVertex3 = !1),
                n)
              : new e(i, r);
          }
          return (
            mm(e, t),
            (e.prototype._serialize = function () {
              return {
                type: this.m_type,
                vertex1: this.m_vertex1,
                vertex2: this.m_vertex2,
                vertex0: this.m_vertex0,
                vertex3: this.m_vertex3,
                hasVertex0: this.m_hasVertex0,
                hasVertex3: this.m_hasVertex3,
              };
            }),
            (e._deserialize = function (t) {
              var i = new e(t.vertex1, t.vertex2);
              return (
                i.m_hasVertex0 && i.setPrevVertex(t.vertex0),
                i.m_hasVertex3 && i.setNextVertex(t.vertex3),
                i
              );
            }),
            (e.prototype._reset = function () {}),
            (e.prototype.getRadius = function () {
              return this.m_radius;
            }),
            (e.prototype.getType = function () {
              return this.m_type;
            }),
            (e.prototype.setNext = function (t) {
              return this.setNextVertex(t);
            }),
            (e.prototype.setNextVertex = function (t) {
              return (
                t
                  ? (this.m_vertex3.setVec2(t), (this.m_hasVertex3 = !0))
                  : (this.m_vertex3.setZero(), (this.m_hasVertex3 = !1)),
                this
              );
            }),
            (e.prototype.getNextVertex = function () {
              return this.m_vertex3;
            }),
            (e.prototype.setPrev = function (t) {
              return this.setPrevVertex(t);
            }),
            (e.prototype.setPrevVertex = function (t) {
              return (
                t
                  ? (this.m_vertex0.setVec2(t), (this.m_hasVertex0 = !0))
                  : (this.m_vertex0.setZero(), (this.m_hasVertex0 = !1)),
                this
              );
            }),
            (e.prototype.getPrevVertex = function () {
              return this.m_vertex0;
            }),
            (e.prototype._set = function (t, e) {
              return (
                this.m_vertex1.setVec2(t),
                this.m_vertex2.setVec2(e),
                (this.m_hasVertex0 = !1),
                (this.m_hasVertex3 = !1),
                this
              );
            }),
            (e.prototype._clone = function () {
              var t = new e();
              return (
                (t.m_type = this.m_type),
                (t.m_radius = this.m_radius),
                t.m_vertex1.setVec2(this.m_vertex1),
                t.m_vertex2.setVec2(this.m_vertex2),
                t.m_vertex0.setVec2(this.m_vertex0),
                t.m_vertex3.setVec2(this.m_vertex3),
                (t.m_hasVertex0 = this.m_hasVertex0),
                (t.m_hasVertex3 = this.m_hasVertex3),
                t
              );
            }),
            (e.prototype.getChildCount = function () {
              return 1;
            }),
            (e.prototype.testPoint = function (t, e) {
              return !1;
            }),
            (e.prototype.rayCast = function (t, e, i, r) {
              var n = sp.mulTVec2(i.q, td.sub(e.p1, i.p)),
                o = sp.mulTVec2(i.q, td.sub(e.p2, i.p)),
                s = td.sub(o, n),
                a = this.m_vertex1,
                h = this.m_vertex2,
                u = td.sub(h, a),
                l = td.neo(u.y, -u.x);
              l.normalize();
              var c = td.dot(l, td.sub(a, n)),
                d = td.dot(l, s);
              if (0 == d) return !1;
              var p = c / d;
              if (p < 0 || e.maxFraction < p) return !1;
              var _ = td.add(n, td.mulNumVec2(p, s)),
                f = td.sub(h, a),
                m = td.dot(f, f);
              if (0 == m) return !1;
              var y = td.dot(td.sub(_, a), f) / m;
              return !(
                y < 0 ||
                1 < y ||
                ((t.fraction = p),
                (t.normal =
                  c > 0 ? sp.mulVec2(i.q, l).neg() : sp.mulVec2(i.q, l)),
                0)
              );
            }),
            (e.prototype.computeAABB = function (t, e, i) {
              Jd(gm, e, this.m_vertex1),
                Jd(vm, e, this.m_vertex2),
                od.combinePoints(t, gm, vm),
                od.extend(t, this.m_radius);
            }),
            (e.prototype.computeMass = function (t, e) {
              (t.mass = 0),
                Nd(t.center, 0.5, this.m_vertex1, 0.5, this.m_vertex2),
                (t.I = 0);
            }),
            (e.prototype.computeDistanceProxy = function (t) {
              (t.m_vertices[0] = this.m_vertex1),
                (t.m_vertices[1] = this.m_vertex2),
                (t.m_vertices.length = 2),
                (t.m_count = 2),
                (t.m_radius = this.m_radius);
            }),
            (e.TYPE = "edge"),
            e
          );
        })(bp),
        xm = bm,
        wm = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        Tm = "undefined" != typeof ASSERT && ASSERT,
        Am = "undefined" != typeof CONSTRUCTOR_FACTORY && CONSTRUCTOR_FACTORY,
        Sm = Ad(0, 0),
        Em = Ad(0, 0),
        Cm = (function (t) {
          function e(i, r) {
            var n = this;
            return !Am || n instanceof e
              ? (((n = t.call(this) || this).m_type = e.TYPE),
                (n.m_radius = hd.polygonRadius),
                (n.m_vertices = []),
                (n.m_count = 0),
                (n.m_prevVertex = null),
                (n.m_nextVertex = null),
                (n.m_hasPrevVertex = !1),
                (n.m_hasNextVertex = !1),
                (n.m_isLoop = !!r),
                i && i.length && (r ? n._createLoop(i) : n._createChain(i)),
                n)
              : new e(i, r);
          }
          return (
            wm(e, t),
            (e.prototype._serialize = function () {
              var t = {
                type: this.m_type,
                vertices: this.m_isLoop
                  ? this.m_vertices.slice(0, this.m_vertices.length - 1)
                  : this.m_vertices,
                isLoop: this.m_isLoop,
                hasPrevVertex: this.m_hasPrevVertex,
                hasNextVertex: this.m_hasNextVertex,
                prevVertex: null,
                nextVertex: null,
              };
              return (
                this.m_prevVertex && (t.prevVertex = this.m_prevVertex),
                this.m_nextVertex && (t.nextVertex = this.m_nextVertex),
                t
              );
            }),
            (e._deserialize = function (t, i, r) {
              var n = [];
              if (t.vertices)
                for (var o = 0; o < t.vertices.length; o++)
                  n.push(r(td, t.vertices[o]));
              var s = new e(n, t.isLoop);
              return (
                t.prevVertex && s.setPrevVertex(t.prevVertex),
                t.nextVertex && s.setNextVertex(t.nextVertex),
                s
              );
            }),
            (e.prototype.getType = function () {
              return this.m_type;
            }),
            (e.prototype.getRadius = function () {
              return this.m_radius;
            }),
            (e.prototype._createLoop = function (t) {
              if (
                (Tm &&
                  console.assert(
                    0 == this.m_vertices.length && 0 == this.m_count
                  ),
                Tm && console.assert(t.length >= 3),
                !(t.length < 3))
              ) {
                for (var e = 1; e < t.length; ++e) {
                  var i = t[e - 1],
                    r = t[e];
                  Tm &&
                    console.assert(
                      td.distanceSquared(i, r) > hd.linearSlopSquared
                    );
                }
                for (
                  this.m_vertices = [], this.m_count = t.length + 1, e = 0;
                  e < t.length;
                  ++e
                )
                  this.m_vertices[e] = td.clone(t[e]);
                return (
                  (this.m_vertices[t.length] = td.clone(t[0])),
                  (this.m_prevVertex = this.m_vertices[this.m_count - 2]),
                  (this.m_nextVertex = this.m_vertices[1]),
                  (this.m_hasPrevVertex = !0),
                  (this.m_hasNextVertex = !0),
                  this
                );
              }
            }),
            (e.prototype._createChain = function (t) {
              Tm &&
                console.assert(
                  0 == this.m_vertices.length && 0 == this.m_count
                ),
                Tm && console.assert(t.length >= 2);
              for (var e = 1; e < t.length; ++e) {
                var i = t[e - 1],
                  r = t[e];
                Tm &&
                  console.assert(
                    td.distanceSquared(i, r) > hd.linearSlopSquared
                  );
              }
              for (
                this.m_vertices = [], this.m_count = t.length, e = 0;
                e < t.length;
                ++e
              )
                this.m_vertices[e] = td.clone(t[e]);
              return (
                (this.m_prevVertex = null),
                (this.m_nextVertex = null),
                (this.m_hasPrevVertex = !1),
                (this.m_hasNextVertex = !1),
                this
              );
            }),
            (e.prototype._reset = function () {
              this.m_isLoop
                ? this._createLoop(
                    this.m_vertices.slice(0, this.m_vertices.length - 1)
                  )
                : this._createChain(this.m_vertices);
            }),
            (e.prototype.setPrevVertex = function (t) {
              (this.m_prevVertex = t), (this.m_hasPrevVertex = !0);
            }),
            (e.prototype.getPrevVertex = function () {
              return this.m_prevVertex;
            }),
            (e.prototype.setNextVertex = function (t) {
              (this.m_nextVertex = t), (this.m_hasNextVertex = !0);
            }),
            (e.prototype.getNextVertex = function () {
              return this.m_nextVertex;
            }),
            (e.prototype._clone = function () {
              var t = new e();
              return (
                t._createChain(this.m_vertices),
                (t.m_type = this.m_type),
                (t.m_radius = this.m_radius),
                (t.m_prevVertex = this.m_prevVertex),
                (t.m_nextVertex = this.m_nextVertex),
                (t.m_hasPrevVertex = this.m_hasPrevVertex),
                (t.m_hasNextVertex = this.m_hasNextVertex),
                t
              );
            }),
            (e.prototype.getChildCount = function () {
              return this.m_count - 1;
            }),
            (e.prototype.getChildEdge = function (t, e) {
              Tm && console.assert(0 <= e && e < this.m_count - 1),
                (t.m_type = bm.TYPE),
                (t.m_radius = this.m_radius),
                (t.m_vertex1 = this.m_vertices[e]),
                (t.m_vertex2 = this.m_vertices[e + 1]),
                e > 0
                  ? ((t.m_vertex0 = this.m_vertices[e - 1]),
                    (t.m_hasVertex0 = !0))
                  : ((t.m_vertex0 = this.m_prevVertex),
                    (t.m_hasVertex0 = this.m_hasPrevVertex)),
                e < this.m_count - 2
                  ? ((t.m_vertex3 = this.m_vertices[e + 2]),
                    (t.m_hasVertex3 = !0))
                  : ((t.m_vertex3 = this.m_nextVertex),
                    (t.m_hasVertex3 = this.m_hasNextVertex));
            }),
            (e.prototype.getVertex = function (t) {
              return (
                Tm && console.assert(0 <= t && t <= this.m_count),
                t < this.m_count ? this.m_vertices[t] : this.m_vertices[0]
              );
            }),
            (e.prototype.isLoop = function () {
              return this.m_isLoop;
            }),
            (e.prototype.testPoint = function (t, e) {
              return !1;
            }),
            (e.prototype.rayCast = function (t, e, i, r) {
              return (
                Tm && console.assert(0 <= r && r < this.m_count),
                new bm(this.getVertex(r), this.getVertex(r + 1)).rayCast(
                  t,
                  e,
                  i,
                  0
                )
              );
            }),
            (e.prototype.computeAABB = function (t, e, i) {
              Tm && console.assert(0 <= i && i < this.m_count),
                Jd(Sm, e, this.getVertex(i)),
                Jd(Em, e, this.getVertex(i + 1)),
                od.combinePoints(t, Sm, Em);
            }),
            (e.prototype.computeMass = function (t, e) {
              (t.mass = 0), Cd(t.center), (t.I = 0);
            }),
            (e.prototype.computeDistanceProxy = function (t, e) {
              Tm && console.assert(0 <= e && e < this.m_count),
                (t.m_vertices[0] = this.getVertex(e)),
                (t.m_vertices[1] = this.getVertex(e + 1)),
                (t.m_count = 2),
                (t.m_radius = this.m_radius);
            }),
            (e.TYPE = "chain"),
            e
          );
        })(bp),
        Mm = Cm,
        Pm = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        Bm = "undefined" != typeof ASSERT && ASSERT,
        Om = "undefined" != typeof CONSTRUCTOR_FACTORY && CONSTRUCTOR_FACTORY,
        Rm = Math.max,
        Im = Math.min,
        km = Ad(0, 0),
        Fm = Ad(0, 0),
        Dm = Ad(0, 0),
        Nm = Ad(0, 0),
        Lm = Ad(0, 0),
        Um = Ad(0, 0),
        Gm = (function (t) {
          function e(i) {
            var r = this;
            return !Om || r instanceof e
              ? (((r = t.call(this) || this).m_type = e.TYPE),
                (r.m_radius = hd.polygonRadius),
                (r.m_centroid = td.zero()),
                (r.m_vertices = []),
                (r.m_normals = []),
                (r.m_count = 0),
                i && i.length && r._set(i),
                r)
              : new e(i);
          }
          return (
            Pm(e, t),
            (e.prototype._serialize = function () {
              return { type: this.m_type, vertices: this.m_vertices };
            }),
            (e._deserialize = function (t, i, r) {
              var n = [];
              if (t.vertices)
                for (var o = 0; o < t.vertices.length; o++)
                  n.push(r(td, t.vertices[o]));
              return new e(n);
            }),
            (e.prototype.getType = function () {
              return this.m_type;
            }),
            (e.prototype.getRadius = function () {
              return this.m_radius;
            }),
            (e.prototype._clone = function () {
              var t = new e();
              (t.m_type = this.m_type),
                (t.m_radius = this.m_radius),
                (t.m_count = this.m_count),
                t.m_centroid.setVec2(this.m_centroid);
              for (var i = 0; i < this.m_count; i++)
                t.m_vertices.push(this.m_vertices[i].clone());
              for (i = 0; i < this.m_normals.length; i++)
                t.m_normals.push(this.m_normals[i].clone());
              return t;
            }),
            (e.prototype.getChildCount = function () {
              return 1;
            }),
            (e.prototype._reset = function () {
              this._set(this.m_vertices);
            }),
            (e.prototype._set = function (t) {
              if (
                (Bm &&
                  console.assert(
                    3 <= t.length && t.length <= hd.maxPolygonVertices
                  ),
                t.length < 3)
              )
                this._setAsBox(1, 1);
              else {
                for (
                  var e = Im(t.length, hd.maxPolygonVertices), i = [], r = 0;
                  r < e;
                  ++r
                ) {
                  for (var n = t[r], o = !0, s = 0; s < i.length; ++s)
                    if (
                      td.distanceSquared(n, i[s]) <
                      0.25 * hd.linearSlopSquared
                    ) {
                      o = !1;
                      break;
                    }
                  o && i.push(td.clone(n));
                }
                if ((e = i.length) < 3)
                  return Bm && console.assert(!1), void this._setAsBox(1, 1);
                var a = 0,
                  h = i[0].x;
                for (r = 1; r < e; ++r) {
                  var u = i[r].x;
                  (u > h || (u === h && i[r].y < i[a].y)) && ((a = r), (h = u));
                }
                for (var l = [], c = 0, d = a; ; ) {
                  Bm && console.assert(c < hd.maxPolygonVertices), (l[c] = d);
                  var p = 0;
                  for (s = 1; s < e; ++s)
                    if (p !== d) {
                      var _ = td.sub(i[p], i[l[c]]),
                        f =
                          ((n = td.sub(i[s], i[l[c]])), td.crossVec2Vec2(_, n));
                      f < 0 && (p = s),
                        0 === f &&
                          n.lengthSquared() > _.lengthSquared() &&
                          (p = s);
                    } else p = s;
                  if ((++c, (d = p), p === a)) break;
                }
                if (c < 3)
                  return Bm && console.assert(!1), void this._setAsBox(1, 1);
                for (this.m_count = c, this.m_vertices = [], r = 0; r < c; ++r)
                  this.m_vertices[r] = i[l[r]];
                for (r = 0; r < c; ++r) {
                  var m = r,
                    y = r + 1 < c ? r + 1 : 0,
                    g = td.sub(this.m_vertices[y], this.m_vertices[m]);
                  Bm && console.assert(g.lengthSquared() > 1e-18),
                    (this.m_normals[r] = td.crossVec2Num(g, 1)),
                    this.m_normals[r].normalize();
                }
                this.m_centroid = (function (t, e) {
                  Bm && console.assert(e >= 3);
                  for (
                    var i = td.zero(), r = 0, n = td.zero(), o = 1 / 3, s = 0;
                    s < e;
                    ++s
                  ) {
                    var a = n,
                      h = t[s],
                      u = s + 1 < e ? t[s + 1] : t[0],
                      l = td.sub(h, a),
                      c = td.sub(u, a),
                      d = 0.5 * td.crossVec2Vec2(l, c);
                    (r += d), Ld(km, 1, a, 1, h, 1, u), kd(i, d * o, km);
                  }
                  return Bm && console.assert(r > zc), i.mul(1 / r), i;
                })(this.m_vertices, c);
              }
            }),
            (e.prototype._setAsBox = function (t, e, i, r) {
              if (
                ((this.m_vertices[0] = td.neo(t, -e)),
                (this.m_vertices[1] = td.neo(t, e)),
                (this.m_vertices[2] = td.neo(-t, e)),
                (this.m_vertices[3] = td.neo(-t, -e)),
                (this.m_normals[0] = td.neo(1, 0)),
                (this.m_normals[1] = td.neo(0, 1)),
                (this.m_normals[2] = td.neo(-1, 0)),
                (this.m_normals[3] = td.neo(0, -1)),
                (this.m_count = 4),
                i && td.isValid(i))
              ) {
                (r = r || 0), Ed(this.m_centroid, i);
                var n = _p.identity();
                n.p.setVec2(i), n.q.setAngle(r);
                for (var o = 0; o < this.m_count; ++o)
                  (this.m_vertices[o] = _p.mulVec2(n, this.m_vertices[o])),
                    (this.m_normals[o] = sp.mulVec2(n.q, this.m_normals[o]));
              }
            }),
            (e.prototype.testPoint = function (t, e) {
              for (var i = Zd(km, t, e), r = 0; r < this.m_count; ++r)
                if (
                  zd(this.m_normals[r], i) -
                    zd(this.m_normals[r], this.m_vertices[r]) >
                  0
                )
                  return !1;
              return !0;
            }),
            (e.prototype.rayCast = function (t, e, i, r) {
              for (
                var n = sp.mulTVec2(i.q, td.sub(e.p1, i.p)),
                  o = sp.mulTVec2(i.q, td.sub(e.p2, i.p)),
                  s = td.sub(o, n),
                  a = 0,
                  h = e.maxFraction,
                  u = -1,
                  l = 0;
                l < this.m_count;
                ++l
              ) {
                var c = td.dot(
                    this.m_normals[l],
                    td.sub(this.m_vertices[l], n)
                  ),
                  d = td.dot(this.m_normals[l], s);
                if (0 == d) {
                  if (c < 0) return !1;
                } else
                  d < 0 && c < a * d
                    ? ((a = c / d), (u = l))
                    : d > 0 && c < h * d && (h = c / d);
                if (h < a) return !1;
              }
              return (
                Bm && console.assert(0 <= a && a <= e.maxFraction),
                u >= 0 &&
                  ((t.fraction = a),
                  (t.normal = sp.mulVec2(i.q, this.m_normals[u])),
                  !0)
              );
            }),
            (e.prototype.computeAABB = function (t, e, i) {
              for (
                var r = 1 / 0, n = 1 / 0, o = -1 / 0, s = -1 / 0, a = 0;
                a < this.m_count;
                ++a
              ) {
                var h = Jd(km, e, this.m_vertices[a]);
                (r = Im(r, h.x)),
                  (o = Rm(o, h.x)),
                  (n = Im(n, h.y)),
                  (s = Rm(s, h.y));
              }
              Sd(t.lowerBound, r - this.m_radius, n - this.m_radius),
                Sd(t.upperBound, o + this.m_radius, s + this.m_radius);
            }),
            (e.prototype.computeMass = function (t, e) {
              Bm && console.assert(this.m_count >= 3), Cd(Lm);
              var i = 0,
                r = 0;
              Cd(Um);
              for (var n = 0; n < this.m_count; ++n) Pd(Um, this.m_vertices[n]);
              Id(Um, 1 / this.m_count, Um);
              var o = 1 / 3;
              for (n = 0; n < this.m_count; ++n) {
                Od(Dm, this.m_vertices[n], Um),
                  n + 1 < this.m_count
                    ? Od(Nm, this.m_vertices[n + 1], Um)
                    : Od(Nm, this.m_vertices[0], Um);
                var s = jd(Dm, Nm),
                  a = 0.5 * s;
                (i += a), Nd(km, a * o, Dm, a * o, Nm), Pd(Lm, km);
                var h = Dm.x,
                  u = Dm.y,
                  l = Nm.x,
                  c = Nm.y;
                r +=
                  0.25 *
                  o *
                  s *
                  (h * h + l * h + l * l + (u * u + c * u + c * c));
              }
              (t.mass = e * i),
                Bm && console.assert(i > zc),
                Id(Lm, 1 / i, Lm),
                (function (t, e, i) {
                  (t.x = e.x + i.x), (t.y = e.x + i.y);
                })(t.center, Lm, Um),
                (t.I = e * r),
                (t.I += t.mass * (zd(t.center, t.center) - zd(Lm, Lm)));
            }),
            (e.prototype.validate = function () {
              for (var t = 0; t < this.m_count; ++t) {
                var e = t,
                  i = t < this.m_count - 1 ? e + 1 : 0,
                  r = this.m_vertices[e];
                Od(Fm, this.m_vertices[i], r);
                for (var n = 0; n < this.m_count; ++n)
                  if (
                    n != e &&
                    n != i &&
                    jd(Fm, Od(km, this.m_vertices[n], r)) < 0
                  )
                    return !1;
              }
              return !0;
            }),
            (e.prototype.computeDistanceProxy = function (t) {
              for (var e = 0; e < this.m_count; ++e)
                t.m_vertices[e] = this.m_vertices[e];
              (t.m_vertices.length = this.m_count),
                (t.m_count = this.m_count),
                (t.m_radius = this.m_radius);
            }),
            (e.TYPE = "polygon"),
            e
          );
        })(bp),
        Vm = Gm,
        jm = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        zm = "undefined" != typeof CONSTRUCTOR_FACTORY && CONSTRUCTOR_FACTORY,
        Xm = Math.sqrt,
        Hm = Math.PI,
        Ym = Ad(0, 0),
        Wm = (function (t) {
          function e(i, r) {
            var n = this;
            return !zm || n instanceof e
              ? (((n = t.call(this) || this).m_type = e.TYPE),
                (n.m_p = td.zero()),
                (n.m_radius = 1),
                "object" == typeof i && td.isValid(i)
                  ? (n.m_p.setVec2(i), "number" == typeof r && (n.m_radius = r))
                  : "number" == typeof i && (n.m_radius = i),
                n)
              : new e(i, r);
          }
          return (
            jm(e, t),
            (e.prototype._serialize = function () {
              return { type: this.m_type, p: this.m_p, radius: this.m_radius };
            }),
            (e._deserialize = function (t) {
              return new e(t.p, t.radius);
            }),
            (e.prototype._reset = function () {}),
            (e.prototype.getType = function () {
              return this.m_type;
            }),
            (e.prototype.getRadius = function () {
              return this.m_radius;
            }),
            (e.prototype.getCenter = function () {
              return this.m_p;
            }),
            (e.prototype._clone = function () {
              var t = new e();
              return (
                (t.m_type = this.m_type),
                (t.m_radius = this.m_radius),
                (t.m_p = this.m_p.clone()),
                t
              );
            }),
            (e.prototype.getChildCount = function () {
              return 1;
            }),
            (e.prototype.testPoint = function (t, e) {
              return (
                Yd(e, Jd(Ym, t, this.m_p)) <= this.m_radius * this.m_radius
              );
            }),
            (e.prototype.rayCast = function (t, e, i, r) {
              var n = td.add(i.p, sp.mulVec2(i.q, this.m_p)),
                o = td.sub(e.p1, n),
                s = td.dot(o, o) - this.m_radius * this.m_radius,
                a = td.sub(e.p2, e.p1),
                h = td.dot(o, a),
                u = td.dot(a, a),
                l = h * h - u * s;
              if (l < 0 || u < zc) return !1;
              var c = -(h + Xm(l));
              return (
                0 <= c &&
                c <= e.maxFraction * u &&
                ((c /= u),
                (t.fraction = c),
                (t.normal = td.add(o, td.mulNumVec2(c, a))),
                t.normal.normalize(),
                !0)
              );
            }),
            (e.prototype.computeAABB = function (t, e, i) {
              var r = Jd(Ym, e, this.m_p);
              Sd(t.lowerBound, r.x - this.m_radius, r.y - this.m_radius),
                Sd(t.upperBound, r.x + this.m_radius, r.y + this.m_radius);
            }),
            (e.prototype.computeMass = function (t, e) {
              (t.mass = e * Hm * this.m_radius * this.m_radius),
                Ed(t.center, this.m_p),
                (t.I =
                  t.mass *
                  (0.5 * this.m_radius * this.m_radius + Xd(this.m_p)));
            }),
            (e.prototype.computeDistanceProxy = function (t) {
              (t.m_vertices[0] = this.m_p),
                (t.m_vertices.length = 1),
                (t.m_count = 1),
                (t.m_radius = this.m_radius);
            }),
            (e.TYPE = "circle"),
            e
          );
        })(bp),
        qm = Wm,
        $m = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        Km = function () {
          return (
            (Km =
              Object.assign ||
              function (t) {
                for (var e, i = 1, r = arguments.length; i < r; i++)
                  for (var n in (e = arguments[i]))
                    Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
                return t;
              }),
            Km.apply(this, arguments)
          );
        },
        Jm = "undefined" != typeof CONSTRUCTOR_FACTORY && CONSTRUCTOR_FACTORY,
        Zm = Math.abs,
        Qm = Math.PI,
        ty = { frequencyHz: 0, dampingRatio: 0 },
        ey = (function (t) {
          function e(i, r, n, o, s) {
            var a = this;
            if (Jm && !(a instanceof e)) return new e(i, r, n, o, s);
            if (n && o && "m_type" in o && "x" in n && "y" in n) {
              var h = n;
              (n = o), (o = h);
            }
            return (
              (i = Vc(i, ty)),
              (r = (a = t.call(this, i, r, n) || this).m_bodyA),
              (n = a.m_bodyB),
              (a.m_type = e.TYPE),
              (a.m_localAnchorA = td.clone(
                o ? r.getLocalPoint(o) : i.localAnchorA || td.zero()
              )),
              (a.m_localAnchorB = td.clone(
                s ? n.getLocalPoint(s) : i.localAnchorB || td.zero()
              )),
              (a.m_length = Number.isFinite(i.length)
                ? i.length
                : td.distance(
                    r.getWorldPoint(a.m_localAnchorA),
                    n.getWorldPoint(a.m_localAnchorB)
                  )),
              (a.m_frequencyHz = i.frequencyHz),
              (a.m_dampingRatio = i.dampingRatio),
              (a.m_impulse = 0),
              (a.m_gamma = 0),
              (a.m_bias = 0),
              a
            );
          }
          return (
            $m(e, t),
            (e.prototype._serialize = function () {
              return {
                type: this.m_type,
                bodyA: this.m_bodyA,
                bodyB: this.m_bodyB,
                collideConnected: this.m_collideConnected,
                frequencyHz: this.m_frequencyHz,
                dampingRatio: this.m_dampingRatio,
                localAnchorA: this.m_localAnchorA,
                localAnchorB: this.m_localAnchorB,
                length: this.m_length,
                impulse: this.m_impulse,
                gamma: this.m_gamma,
                bias: this.m_bias,
              };
            }),
            (e._deserialize = function (t, i, r) {
              return (
                ((t = Km({}, t)).bodyA = r(Lp, t.bodyA, i)),
                (t.bodyB = r(Lp, t.bodyB, i)),
                new e(t)
              );
            }),
            (e.prototype._reset = function (t) {
              t.anchorA
                ? this.m_localAnchorA.setVec2(
                    this.m_bodyA.getLocalPoint(t.anchorA)
                  )
                : t.localAnchorA && this.m_localAnchorA.setVec2(t.localAnchorA),
                t.anchorB
                  ? this.m_localAnchorB.setVec2(
                      this.m_bodyB.getLocalPoint(t.anchorB)
                    )
                  : t.localAnchorB &&
                    this.m_localAnchorB.setVec2(t.localAnchorB),
                t.length > 0
                  ? (this.m_length = +t.length)
                  : t.length < 0 ||
                    ((t.anchorA || t.anchorA || t.anchorA || t.anchorA) &&
                      (this.m_length = td.distance(
                        this.m_bodyA.getWorldPoint(this.m_localAnchorA),
                        this.m_bodyB.getWorldPoint(this.m_localAnchorB)
                      ))),
                Number.isFinite(t.frequencyHz) &&
                  (this.m_frequencyHz = t.frequencyHz),
                Number.isFinite(t.dampingRatio) &&
                  (this.m_dampingRatio = t.dampingRatio);
            }),
            (e.prototype.getLocalAnchorA = function () {
              return this.m_localAnchorA;
            }),
            (e.prototype.getLocalAnchorB = function () {
              return this.m_localAnchorB;
            }),
            (e.prototype.setLength = function (t) {
              this.m_length = t;
            }),
            (e.prototype.getLength = function () {
              return this.m_length;
            }),
            (e.prototype.setFrequency = function (t) {
              this.m_frequencyHz = t;
            }),
            (e.prototype.getFrequency = function () {
              return this.m_frequencyHz;
            }),
            (e.prototype.setDampingRatio = function (t) {
              this.m_dampingRatio = t;
            }),
            (e.prototype.getDampingRatio = function () {
              return this.m_dampingRatio;
            }),
            (e.prototype.getAnchorA = function () {
              return this.m_bodyA.getWorldPoint(this.m_localAnchorA);
            }),
            (e.prototype.getAnchorB = function () {
              return this.m_bodyB.getWorldPoint(this.m_localAnchorB);
            }),
            (e.prototype.getReactionForce = function (t) {
              return td.mulNumVec2(this.m_impulse, this.m_u).mul(t);
            }),
            (e.prototype.getReactionTorque = function (t) {
              return 0;
            }),
            (e.prototype.initVelocityConstraints = function (t) {
              (this.m_localCenterA = this.m_bodyA.m_sweep.localCenter),
                (this.m_localCenterB = this.m_bodyB.m_sweep.localCenter),
                (this.m_invMassA = this.m_bodyA.m_invMass),
                (this.m_invMassB = this.m_bodyB.m_invMass),
                (this.m_invIA = this.m_bodyA.m_invI),
                (this.m_invIB = this.m_bodyB.m_invI);
              var e = this.m_bodyA.c_position.c,
                i = this.m_bodyA.c_position.a,
                r = this.m_bodyA.c_velocity.v,
                n = this.m_bodyA.c_velocity.w,
                o = this.m_bodyB.c_position.c,
                s = this.m_bodyB.c_position.a,
                a = this.m_bodyB.c_velocity.v,
                h = this.m_bodyB.c_velocity.w,
                u = sp.neo(i),
                l = sp.neo(s);
              (this.m_rA = sp.mulVec2(
                u,
                td.sub(this.m_localAnchorA, this.m_localCenterA)
              )),
                (this.m_rB = sp.mulVec2(
                  l,
                  td.sub(this.m_localAnchorB, this.m_localCenterB)
                )),
                (this.m_u = td.sub(td.add(o, this.m_rB), td.add(e, this.m_rA)));
              var c = this.m_u.length();
              c > hd.linearSlop ? this.m_u.mul(1 / c) : this.m_u.setNum(0, 0);
              var d = td.crossVec2Vec2(this.m_rA, this.m_u),
                p = td.crossVec2Vec2(this.m_rB, this.m_u),
                _ =
                  this.m_invMassA +
                  this.m_invIA * d * d +
                  this.m_invMassB +
                  this.m_invIB * p * p;
              if (
                ((this.m_mass = 0 != _ ? 1 / _ : 0), this.m_frequencyHz > 0)
              ) {
                var f = c - this.m_length,
                  m = 2 * Qm * this.m_frequencyHz,
                  y = 2 * this.m_mass * this.m_dampingRatio * m,
                  g = this.m_mass * m * m,
                  v = t.dt;
                (this.m_gamma = v * (y + v * g)),
                  (this.m_gamma = 0 != this.m_gamma ? 1 / this.m_gamma : 0),
                  (this.m_bias = f * v * g * this.m_gamma),
                  (_ += this.m_gamma),
                  (this.m_mass = 0 != _ ? 1 / _ : 0);
              } else (this.m_gamma = 0), (this.m_bias = 0);
              if (t.warmStarting) {
                this.m_impulse *= t.dtRatio;
                var b = td.mulNumVec2(this.m_impulse, this.m_u);
                r.subMul(this.m_invMassA, b),
                  (n -= this.m_invIA * td.crossVec2Vec2(this.m_rA, b)),
                  a.addMul(this.m_invMassB, b),
                  (h += this.m_invIB * td.crossVec2Vec2(this.m_rB, b));
              } else this.m_impulse = 0;
              this.m_bodyA.c_velocity.v.setVec2(r),
                (this.m_bodyA.c_velocity.w = n),
                this.m_bodyB.c_velocity.v.setVec2(a),
                (this.m_bodyB.c_velocity.w = h);
            }),
            (e.prototype.solveVelocityConstraints = function (t) {
              var e = this.m_bodyA.c_velocity.v,
                i = this.m_bodyA.c_velocity.w,
                r = this.m_bodyB.c_velocity.v,
                n = this.m_bodyB.c_velocity.w,
                o = td.add(e, td.crossNumVec2(i, this.m_rA)),
                s = td.add(r, td.crossNumVec2(n, this.m_rB)),
                a = td.dot(this.m_u, s) - td.dot(this.m_u, o),
                h =
                  -this.m_mass *
                  (a + this.m_bias + this.m_gamma * this.m_impulse);
              this.m_impulse += h;
              var u = td.mulNumVec2(h, this.m_u);
              e.subMul(this.m_invMassA, u),
                (i -= this.m_invIA * td.crossVec2Vec2(this.m_rA, u)),
                r.addMul(this.m_invMassB, u),
                (n += this.m_invIB * td.crossVec2Vec2(this.m_rB, u)),
                this.m_bodyA.c_velocity.v.setVec2(e),
                (this.m_bodyA.c_velocity.w = i),
                this.m_bodyB.c_velocity.v.setVec2(r),
                (this.m_bodyB.c_velocity.w = n);
            }),
            (e.prototype.solvePositionConstraints = function (t) {
              if (this.m_frequencyHz > 0) return !0;
              var e = this.m_bodyA.c_position.c,
                i = this.m_bodyA.c_position.a,
                r = this.m_bodyB.c_position.c,
                n = this.m_bodyB.c_position.a,
                o = sp.neo(i),
                s = sp.neo(n),
                a = sp.mulSub(o, this.m_localAnchorA, this.m_localCenterA),
                h = sp.mulSub(s, this.m_localAnchorB, this.m_localCenterB),
                u = td.sub(td.add(r, h), td.add(e, a)),
                l = Yc(
                  u.normalize() - this.m_length,
                  -hd.maxLinearCorrection,
                  hd.maxLinearCorrection
                ),
                c = -this.m_mass * l,
                d = td.mulNumVec2(c, u);
              return (
                e.subMul(this.m_invMassA, d),
                (i -= this.m_invIA * td.crossVec2Vec2(a, d)),
                r.addMul(this.m_invMassB, d),
                (n += this.m_invIB * td.crossVec2Vec2(h, d)),
                this.m_bodyA.c_position.c.setVec2(e),
                (this.m_bodyA.c_position.a = i),
                this.m_bodyB.c_position.c.setVec2(r),
                (this.m_bodyB.c_position.a = n),
                Zm(l) < hd.linearSlop
              );
            }),
            (e.TYPE = "distance-joint"),
            e
          );
        })(Vp),
        iy = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        ry = function () {
          return (
            (ry =
              Object.assign ||
              function (t) {
                for (var e, i = 1, r = arguments.length; i < r; i++)
                  for (var n in (e = arguments[i]))
                    Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
                return t;
              }),
            ry.apply(this, arguments)
          );
        },
        ny = "undefined" != typeof ASSERT && ASSERT,
        oy = "undefined" != typeof CONSTRUCTOR_FACTORY && CONSTRUCTOR_FACTORY,
        sy = { maxForce: 0, maxTorque: 0 },
        ay = (function (t) {
          function e(i, r, n, o) {
            var s = this;
            return !oy || s instanceof e
              ? ((i = Vc(i, sy)),
                (r = (s = t.call(this, i, r, n) || this).m_bodyA),
                (n = s.m_bodyB),
                (s.m_type = e.TYPE),
                (s.m_localAnchorA = td.clone(
                  o ? r.getLocalPoint(o) : i.localAnchorA || td.zero()
                )),
                (s.m_localAnchorB = td.clone(
                  o ? n.getLocalPoint(o) : i.localAnchorB || td.zero()
                )),
                (s.m_linearImpulse = td.zero()),
                (s.m_angularImpulse = 0),
                (s.m_maxForce = i.maxForce),
                (s.m_maxTorque = i.maxTorque),
                s)
              : new e(i, r, n, o);
          }
          return (
            iy(e, t),
            (e.prototype._serialize = function () {
              return {
                type: this.m_type,
                bodyA: this.m_bodyA,
                bodyB: this.m_bodyB,
                collideConnected: this.m_collideConnected,
                maxForce: this.m_maxForce,
                maxTorque: this.m_maxTorque,
                localAnchorA: this.m_localAnchorA,
                localAnchorB: this.m_localAnchorB,
              };
            }),
            (e._deserialize = function (t, i, r) {
              return (
                ((t = ry({}, t)).bodyA = r(Lp, t.bodyA, i)),
                (t.bodyB = r(Lp, t.bodyB, i)),
                new e(t)
              );
            }),
            (e.prototype._reset = function (t) {
              t.anchorA
                ? this.m_localAnchorA.setVec2(
                    this.m_bodyA.getLocalPoint(t.anchorA)
                  )
                : t.localAnchorA && this.m_localAnchorA.setVec2(t.localAnchorA),
                t.anchorB
                  ? this.m_localAnchorB.setVec2(
                      this.m_bodyB.getLocalPoint(t.anchorB)
                    )
                  : t.localAnchorB &&
                    this.m_localAnchorB.setVec2(t.localAnchorB),
                Number.isFinite(t.maxForce) && (this.m_maxForce = t.maxForce),
                Number.isFinite(t.maxTorque) &&
                  (this.m_maxTorque = t.maxTorque);
            }),
            (e.prototype.getLocalAnchorA = function () {
              return this.m_localAnchorA;
            }),
            (e.prototype.getLocalAnchorB = function () {
              return this.m_localAnchorB;
            }),
            (e.prototype.setMaxForce = function (t) {
              ny && console.assert(Number.isFinite(t) && t >= 0),
                (this.m_maxForce = t);
            }),
            (e.prototype.getMaxForce = function () {
              return this.m_maxForce;
            }),
            (e.prototype.setMaxTorque = function (t) {
              ny && console.assert(Number.isFinite(t) && t >= 0),
                (this.m_maxTorque = t);
            }),
            (e.prototype.getMaxTorque = function () {
              return this.m_maxTorque;
            }),
            (e.prototype.getAnchorA = function () {
              return this.m_bodyA.getWorldPoint(this.m_localAnchorA);
            }),
            (e.prototype.getAnchorB = function () {
              return this.m_bodyB.getWorldPoint(this.m_localAnchorB);
            }),
            (e.prototype.getReactionForce = function (t) {
              return td.mulNumVec2(t, this.m_linearImpulse);
            }),
            (e.prototype.getReactionTorque = function (t) {
              return t * this.m_angularImpulse;
            }),
            (e.prototype.initVelocityConstraints = function (t) {
              (this.m_localCenterA = this.m_bodyA.m_sweep.localCenter),
                (this.m_localCenterB = this.m_bodyB.m_sweep.localCenter),
                (this.m_invMassA = this.m_bodyA.m_invMass),
                (this.m_invMassB = this.m_bodyB.m_invMass),
                (this.m_invIA = this.m_bodyA.m_invI),
                (this.m_invIB = this.m_bodyB.m_invI);
              var e = this.m_bodyA.c_position.a,
                i = this.m_bodyA.c_velocity.v,
                r = this.m_bodyA.c_velocity.w,
                n = this.m_bodyB.c_position.a,
                o = this.m_bodyB.c_velocity.v,
                s = this.m_bodyB.c_velocity.w,
                a = sp.neo(e),
                h = sp.neo(n);
              (this.m_rA = sp.mulVec2(
                a,
                td.sub(this.m_localAnchorA, this.m_localCenterA)
              )),
                (this.m_rB = sp.mulVec2(
                  h,
                  td.sub(this.m_localAnchorB, this.m_localCenterB)
                ));
              var u = this.m_invMassA,
                l = this.m_invMassB,
                c = this.m_invIA,
                d = this.m_invIB,
                p = new of();
              if (
                ((p.ex.x =
                  u +
                  l +
                  c * this.m_rA.y * this.m_rA.y +
                  d * this.m_rB.y * this.m_rB.y),
                (p.ex.y =
                  -c * this.m_rA.x * this.m_rA.y -
                  d * this.m_rB.x * this.m_rB.y),
                (p.ey.x = p.ex.y),
                (p.ey.y =
                  u +
                  l +
                  c * this.m_rA.x * this.m_rA.x +
                  d * this.m_rB.x * this.m_rB.x),
                (this.m_linearMass = p.getInverse()),
                (this.m_angularMass = c + d),
                this.m_angularMass > 0 &&
                  (this.m_angularMass = 1 / this.m_angularMass),
                t.warmStarting)
              ) {
                this.m_linearImpulse.mul(t.dtRatio),
                  (this.m_angularImpulse *= t.dtRatio);
                var _ = td.neo(this.m_linearImpulse.x, this.m_linearImpulse.y);
                i.subMul(u, _),
                  (r -=
                    c *
                    (td.crossVec2Vec2(this.m_rA, _) + this.m_angularImpulse)),
                  o.addMul(l, _),
                  (s +=
                    d *
                    (td.crossVec2Vec2(this.m_rB, _) + this.m_angularImpulse));
              } else
                this.m_linearImpulse.setZero(), (this.m_angularImpulse = 0);
              (this.m_bodyA.c_velocity.v = i),
                (this.m_bodyA.c_velocity.w = r),
                (this.m_bodyB.c_velocity.v = o),
                (this.m_bodyB.c_velocity.w = s);
            }),
            (e.prototype.solveVelocityConstraints = function (t) {
              var e = this.m_bodyA.c_velocity.v,
                i = this.m_bodyA.c_velocity.w,
                r = this.m_bodyB.c_velocity.v,
                n = this.m_bodyB.c_velocity.w,
                o = this.m_invMassA,
                s = this.m_invMassB,
                a = this.m_invIA,
                h = this.m_invIB,
                u = t.dt,
                l = n - i,
                c = -this.m_angularMass * l,
                d = this.m_angularImpulse,
                p = u * this.m_maxTorque;
              (this.m_angularImpulse = Yc(this.m_angularImpulse + c, -p, p)),
                (i -= a * (c = this.m_angularImpulse - d)),
                (n += h * c),
                (l = td.sub(
                  td.add(r, td.crossNumVec2(n, this.m_rB)),
                  td.add(e, td.crossNumVec2(i, this.m_rA))
                )),
                (c = td.neg(of.mulVec2(this.m_linearMass, l))),
                (d = this.m_linearImpulse),
                this.m_linearImpulse.add(c),
                (p = u * this.m_maxForce),
                this.m_linearImpulse.lengthSquared() > p * p &&
                  (this.m_linearImpulse.normalize(),
                  this.m_linearImpulse.mul(p)),
                (c = td.sub(this.m_linearImpulse, d)),
                e.subMul(o, c),
                (i -= a * td.crossVec2Vec2(this.m_rA, c)),
                r.addMul(s, c),
                (n += h * td.crossVec2Vec2(this.m_rB, c)),
                (this.m_bodyA.c_velocity.v = e),
                (this.m_bodyA.c_velocity.w = i),
                (this.m_bodyB.c_velocity.v = r),
                (this.m_bodyB.c_velocity.w = n);
            }),
            (e.prototype.solvePositionConstraints = function (t) {
              return !0;
            }),
            (e.TYPE = "friction-joint"),
            e
          );
        })(Vp),
        hy = "undefined" != typeof ASSERT && ASSERT,
        uy = (function () {
          function t(t, e, i) {
            "object" == typeof t && null !== t
              ? ((this.ex = fm.clone(t)),
                (this.ey = fm.clone(e)),
                (this.ez = fm.clone(i)))
              : ((this.ex = fm.zero()),
                (this.ey = fm.zero()),
                (this.ez = fm.zero()));
          }
          return (
            (t.prototype.toString = function () {
              return JSON.stringify(this);
            }),
            (t.isValid = function (t) {
              return (
                null != t &&
                fm.isValid(t.ex) &&
                fm.isValid(t.ey) &&
                fm.isValid(t.ez)
              );
            }),
            (t.assert = function (e) {
              hy && console.assert(!t.isValid(e), "Invalid Mat33!", e);
            }),
            (t.prototype.setZero = function () {
              return (
                this.ex.setZero(), this.ey.setZero(), this.ez.setZero(), this
              );
            }),
            (t.prototype.solve33 = function (t) {
              var e = this.ey.y * this.ez.z - this.ey.z * this.ez.y,
                i = this.ey.z * this.ez.x - this.ey.x * this.ez.z,
                r = this.ey.x * this.ez.y - this.ey.y * this.ez.x,
                n = this.ex.x * e + this.ex.y * i + this.ex.z * r;
              0 !== n && (n = 1 / n);
              var o = new fm();
              return (
                (e = this.ey.y * this.ez.z - this.ey.z * this.ez.y),
                (i = this.ey.z * this.ez.x - this.ey.x * this.ez.z),
                (r = this.ey.x * this.ez.y - this.ey.y * this.ez.x),
                (o.x = n * (t.x * e + t.y * i + t.z * r)),
                (e = t.y * this.ez.z - t.z * this.ez.y),
                (i = t.z * this.ez.x - t.x * this.ez.z),
                (r = t.x * this.ez.y - t.y * this.ez.x),
                (o.y = n * (this.ex.x * e + this.ex.y * i + this.ex.z * r)),
                (e = this.ey.y * t.z - this.ey.z * t.y),
                (i = this.ey.z * t.x - this.ey.x * t.z),
                (r = this.ey.x * t.y - this.ey.y * t.x),
                (o.z = n * (this.ex.x * e + this.ex.y * i + this.ex.z * r)),
                o
              );
            }),
            (t.prototype.solve22 = function (t) {
              var e = this.ex.x,
                i = this.ey.x,
                r = this.ex.y,
                n = this.ey.y,
                o = e * n - i * r;
              0 !== o && (o = 1 / o);
              var s = td.zero();
              return (
                (s.x = o * (n * t.x - i * t.y)),
                (s.y = o * (e * t.y - r * t.x)),
                s
              );
            }),
            (t.prototype.getInverse22 = function (t) {
              var e = this.ex.x,
                i = this.ey.x,
                r = this.ex.y,
                n = this.ey.y,
                o = e * n - i * r;
              0 !== o && (o = 1 / o),
                (t.ex.x = o * n),
                (t.ey.x = -o * i),
                (t.ex.z = 0),
                (t.ex.y = -o * r),
                (t.ey.y = o * e),
                (t.ey.z = 0),
                (t.ez.x = 0),
                (t.ez.y = 0),
                (t.ez.z = 0);
            }),
            (t.prototype.getSymInverse33 = function (t) {
              var e = fm.dot(this.ex, fm.cross(this.ey, this.ez));
              0 !== e && (e = 1 / e);
              var i = this.ex.x,
                r = this.ey.x,
                n = this.ez.x,
                o = this.ey.y,
                s = this.ez.y,
                a = this.ez.z;
              (t.ex.x = e * (o * a - s * s)),
                (t.ex.y = e * (n * s - r * a)),
                (t.ex.z = e * (r * s - n * o)),
                (t.ey.x = t.ex.y),
                (t.ey.y = e * (i * a - n * n)),
                (t.ey.z = e * (n * r - i * s)),
                (t.ez.x = t.ex.z),
                (t.ez.y = t.ey.z),
                (t.ez.z = e * (i * o - r * r));
            }),
            (t.mul = function (e, i) {
              if ((hy && t.assert(e), i && "z" in i && "y" in i && "x" in i)) {
                hy && fm.assert(i);
                var r = e.ex.x * i.x + e.ey.x * i.y + e.ez.x * i.z,
                  n = e.ex.y * i.x + e.ey.y * i.y + e.ez.y * i.z,
                  o = e.ex.z * i.x + e.ey.z * i.y + e.ez.z * i.z;
                return new fm(r, n, o);
              }
              if (i && "y" in i && "x" in i)
                return (
                  hy && td.assert(i),
                  (r = e.ex.x * i.x + e.ey.x * i.y),
                  (n = e.ex.y * i.x + e.ey.y * i.y),
                  td.neo(r, n)
                );
              hy && console.assert(!1);
            }),
            (t.mulVec3 = function (e, i) {
              hy && t.assert(e), hy && fm.assert(i);
              var r = e.ex.x * i.x + e.ey.x * i.y + e.ez.x * i.z,
                n = e.ex.y * i.x + e.ey.y * i.y + e.ez.y * i.z,
                o = e.ex.z * i.x + e.ey.z * i.y + e.ez.z * i.z;
              return new fm(r, n, o);
            }),
            (t.mulVec2 = function (e, i) {
              hy && t.assert(e), hy && td.assert(i);
              var r = e.ex.x * i.x + e.ey.x * i.y,
                n = e.ex.y * i.x + e.ey.y * i.y;
              return td.neo(r, n);
            }),
            (t.add = function (e, i) {
              return (
                hy && t.assert(e),
                hy && t.assert(i),
                new t(
                  fm.add(e.ex, i.ex),
                  fm.add(e.ey, i.ey),
                  fm.add(e.ez, i.ez)
                )
              );
            }),
            t
          );
        })(),
        ly = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        cy = function () {
          return (
            (cy =
              Object.assign ||
              function (t) {
                for (var e, i = 1, r = arguments.length; i < r; i++)
                  for (var n in (e = arguments[i]))
                    Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
                return t;
              }),
            cy.apply(this, arguments)
          );
        },
        dy = "undefined" != typeof ASSERT && ASSERT,
        py = "undefined" != typeof CONSTRUCTOR_FACTORY && CONSTRUCTOR_FACTORY,
        _y = Math.abs;
      !(function (t) {
        (t[(t.inactiveLimit = 0)] = "inactiveLimit"),
          (t[(t.atLowerLimit = 1)] = "atLowerLimit"),
          (t[(t.atUpperLimit = 2)] = "atUpperLimit"),
          (t[(t.equalLimits = 3)] = "equalLimits");
      })(If || (If = {}));
      var fy,
        my = (function (t) {
          function e(i, r, n, o) {
            var s,
              a,
              h,
              u,
              l,
              c,
              d = this;
            return !py || d instanceof e
              ? ((i = null != i ? i : {}),
                (r = (d = t.call(this, i, r, n) || this).m_bodyA),
                (n = d.m_bodyB),
                (d.m_mass = new uy()),
                (d.m_limitState = If.inactiveLimit),
                (d.m_type = e.TYPE),
                td.isValid(o)
                  ? (d.m_localAnchorA = r.getLocalPoint(o))
                  : td.isValid(i.localAnchorA)
                  ? (d.m_localAnchorA = td.clone(i.localAnchorA))
                  : (d.m_localAnchorA = td.zero()),
                td.isValid(o)
                  ? (d.m_localAnchorB = n.getLocalPoint(o))
                  : td.isValid(i.localAnchorB)
                  ? (d.m_localAnchorB = td.clone(i.localAnchorB))
                  : (d.m_localAnchorB = td.zero()),
                Number.isFinite(i.referenceAngle)
                  ? (d.m_referenceAngle = i.referenceAngle)
                  : (d.m_referenceAngle = n.getAngle() - r.getAngle()),
                (d.m_impulse = new fm()),
                (d.m_motorImpulse = 0),
                (d.m_lowerAngle =
                  null !== (s = i.lowerAngle) && void 0 !== s ? s : 0),
                (d.m_upperAngle =
                  null !== (a = i.upperAngle) && void 0 !== a ? a : 0),
                (d.m_maxMotorTorque =
                  null !== (h = i.maxMotorTorque) && void 0 !== h ? h : 0),
                (d.m_motorSpeed =
                  null !== (u = i.motorSpeed) && void 0 !== u ? u : 0),
                (d.m_enableLimit =
                  null !== (l = i.enableLimit) && void 0 !== l && l),
                (d.m_enableMotor =
                  null !== (c = i.enableMotor) && void 0 !== c && c),
                d)
              : new e(i, r, n, o);
          }
          return (
            ly(e, t),
            (e.prototype._serialize = function () {
              return {
                type: this.m_type,
                bodyA: this.m_bodyA,
                bodyB: this.m_bodyB,
                collideConnected: this.m_collideConnected,
                lowerAngle: this.m_lowerAngle,
                upperAngle: this.m_upperAngle,
                maxMotorTorque: this.m_maxMotorTorque,
                motorSpeed: this.m_motorSpeed,
                enableLimit: this.m_enableLimit,
                enableMotor: this.m_enableMotor,
                localAnchorA: this.m_localAnchorA,
                localAnchorB: this.m_localAnchorB,
                referenceAngle: this.m_referenceAngle,
              };
            }),
            (e._deserialize = function (t, i, r) {
              return (
                ((t = cy({}, t)).bodyA = r(Lp, t.bodyA, i)),
                (t.bodyB = r(Lp, t.bodyB, i)),
                new e(t)
              );
            }),
            (e.prototype._reset = function (t) {
              t.anchorA
                ? this.m_localAnchorA.setVec2(
                    this.m_bodyA.getLocalPoint(t.anchorA)
                  )
                : t.localAnchorA && this.m_localAnchorA.setVec2(t.localAnchorA),
                t.anchorB
                  ? this.m_localAnchorB.setVec2(
                      this.m_bodyB.getLocalPoint(t.anchorB)
                    )
                  : t.localAnchorB &&
                    this.m_localAnchorB.setVec2(t.localAnchorB),
                Number.isFinite(t.referenceAngle) &&
                  (this.m_referenceAngle = t.referenceAngle),
                void 0 !== t.enableLimit &&
                  (this.m_enableLimit = t.enableLimit),
                Number.isFinite(t.lowerAngle) &&
                  (this.m_lowerAngle = t.lowerAngle),
                Number.isFinite(t.upperAngle) &&
                  (this.m_upperAngle = t.upperAngle),
                Number.isFinite(t.maxMotorTorque) &&
                  (this.m_maxMotorTorque = t.maxMotorTorque),
                Number.isFinite(t.motorSpeed) &&
                  (this.m_motorSpeed = t.motorSpeed),
                void 0 !== t.enableMotor &&
                  (this.m_enableMotor = t.enableMotor);
            }),
            (e.prototype.getLocalAnchorA = function () {
              return this.m_localAnchorA;
            }),
            (e.prototype.getLocalAnchorB = function () {
              return this.m_localAnchorB;
            }),
            (e.prototype.getReferenceAngle = function () {
              return this.m_referenceAngle;
            }),
            (e.prototype.getJointAngle = function () {
              var t = this.m_bodyA;
              return (
                this.m_bodyB.m_sweep.a - t.m_sweep.a - this.m_referenceAngle
              );
            }),
            (e.prototype.getJointSpeed = function () {
              var t = this.m_bodyA;
              return this.m_bodyB.m_angularVelocity - t.m_angularVelocity;
            }),
            (e.prototype.isMotorEnabled = function () {
              return this.m_enableMotor;
            }),
            (e.prototype.enableMotor = function (t) {
              t != this.m_enableMotor &&
                (this.m_bodyA.setAwake(!0),
                this.m_bodyB.setAwake(!0),
                (this.m_enableMotor = t));
            }),
            (e.prototype.getMotorTorque = function (t) {
              return t * this.m_motorImpulse;
            }),
            (e.prototype.setMotorSpeed = function (t) {
              t != this.m_motorSpeed &&
                (this.m_bodyA.setAwake(!0),
                this.m_bodyB.setAwake(!0),
                (this.m_motorSpeed = t));
            }),
            (e.prototype.getMotorSpeed = function () {
              return this.m_motorSpeed;
            }),
            (e.prototype.setMaxMotorTorque = function (t) {
              t != this.m_maxMotorTorque &&
                (this.m_bodyA.setAwake(!0),
                this.m_bodyB.setAwake(!0),
                (this.m_maxMotorTorque = t));
            }),
            (e.prototype.getMaxMotorTorque = function () {
              return this.m_maxMotorTorque;
            }),
            (e.prototype.isLimitEnabled = function () {
              return this.m_enableLimit;
            }),
            (e.prototype.enableLimit = function (t) {
              t != this.m_enableLimit &&
                (this.m_bodyA.setAwake(!0),
                this.m_bodyB.setAwake(!0),
                (this.m_enableLimit = t),
                (this.m_impulse.z = 0));
            }),
            (e.prototype.getLowerLimit = function () {
              return this.m_lowerAngle;
            }),
            (e.prototype.getUpperLimit = function () {
              return this.m_upperAngle;
            }),
            (e.prototype.setLimits = function (t, e) {
              dy && console.assert(t <= e),
                (t == this.m_lowerAngle && e == this.m_upperAngle) ||
                  (this.m_bodyA.setAwake(!0),
                  this.m_bodyB.setAwake(!0),
                  (this.m_impulse.z = 0),
                  (this.m_lowerAngle = t),
                  (this.m_upperAngle = e));
            }),
            (e.prototype.getAnchorA = function () {
              return this.m_bodyA.getWorldPoint(this.m_localAnchorA);
            }),
            (e.prototype.getAnchorB = function () {
              return this.m_bodyB.getWorldPoint(this.m_localAnchorB);
            }),
            (e.prototype.getReactionForce = function (t) {
              return td.neo(this.m_impulse.x, this.m_impulse.y).mul(t);
            }),
            (e.prototype.getReactionTorque = function (t) {
              return t * this.m_impulse.z;
            }),
            (e.prototype.initVelocityConstraints = function (t) {
              (this.m_localCenterA = this.m_bodyA.m_sweep.localCenter),
                (this.m_localCenterB = this.m_bodyB.m_sweep.localCenter),
                (this.m_invMassA = this.m_bodyA.m_invMass),
                (this.m_invMassB = this.m_bodyB.m_invMass),
                (this.m_invIA = this.m_bodyA.m_invI),
                (this.m_invIB = this.m_bodyB.m_invI);
              var e = this.m_bodyA.c_position.a,
                i = this.m_bodyA.c_velocity.v,
                r = this.m_bodyA.c_velocity.w,
                n = this.m_bodyB.c_position.a,
                o = this.m_bodyB.c_velocity.v,
                s = this.m_bodyB.c_velocity.w,
                a = sp.neo(e),
                h = sp.neo(n);
              (this.m_rA = sp.mulVec2(
                a,
                td.sub(this.m_localAnchorA, this.m_localCenterA)
              )),
                (this.m_rB = sp.mulVec2(
                  h,
                  td.sub(this.m_localAnchorB, this.m_localCenterB)
                ));
              var u = this.m_invMassA,
                l = this.m_invMassB,
                c = this.m_invIA,
                d = this.m_invIB,
                p = c + d === 0;
              if (
                ((this.m_mass.ex.x =
                  u +
                  l +
                  this.m_rA.y * this.m_rA.y * c +
                  this.m_rB.y * this.m_rB.y * d),
                (this.m_mass.ey.x =
                  -this.m_rA.y * this.m_rA.x * c -
                  this.m_rB.y * this.m_rB.x * d),
                (this.m_mass.ez.x = -this.m_rA.y * c - this.m_rB.y * d),
                (this.m_mass.ex.y = this.m_mass.ey.x),
                (this.m_mass.ey.y =
                  u +
                  l +
                  this.m_rA.x * this.m_rA.x * c +
                  this.m_rB.x * this.m_rB.x * d),
                (this.m_mass.ez.y = this.m_rA.x * c + this.m_rB.x * d),
                (this.m_mass.ex.z = this.m_mass.ez.x),
                (this.m_mass.ey.z = this.m_mass.ez.y),
                (this.m_mass.ez.z = c + d),
                (this.m_motorMass = c + d),
                this.m_motorMass > 0 &&
                  (this.m_motorMass = 1 / this.m_motorMass),
                (0 == this.m_enableMotor || p) && (this.m_motorImpulse = 0),
                this.m_enableLimit && 0 == p)
              ) {
                var _ = n - e - this.m_referenceAngle;
                _y(this.m_upperAngle - this.m_lowerAngle) < 2 * hd.angularSlop
                  ? (this.m_limitState = If.equalLimits)
                  : _ <= this.m_lowerAngle
                  ? (this.m_limitState != If.atLowerLimit &&
                      (this.m_impulse.z = 0),
                    (this.m_limitState = If.atLowerLimit))
                  : _ >= this.m_upperAngle
                  ? (this.m_limitState != If.atUpperLimit &&
                      (this.m_impulse.z = 0),
                    (this.m_limitState = If.atUpperLimit))
                  : ((this.m_limitState = If.inactiveLimit),
                    (this.m_impulse.z = 0));
              } else this.m_limitState = If.inactiveLimit;
              if (t.warmStarting) {
                this.m_impulse.mul(t.dtRatio),
                  (this.m_motorImpulse *= t.dtRatio);
                var f = td.neo(this.m_impulse.x, this.m_impulse.y);
                i.subMul(u, f),
                  (r -=
                    c *
                    (td.crossVec2Vec2(this.m_rA, f) +
                      this.m_motorImpulse +
                      this.m_impulse.z)),
                  o.addMul(l, f),
                  (s +=
                    d *
                    (td.crossVec2Vec2(this.m_rB, f) +
                      this.m_motorImpulse +
                      this.m_impulse.z));
              } else this.m_impulse.setZero(), (this.m_motorImpulse = 0);
              (this.m_bodyA.c_velocity.v = i),
                (this.m_bodyA.c_velocity.w = r),
                (this.m_bodyB.c_velocity.v = o),
                (this.m_bodyB.c_velocity.w = s);
            }),
            (e.prototype.solveVelocityConstraints = function (t) {
              var e = this.m_bodyA.c_velocity.v,
                i = this.m_bodyA.c_velocity.w,
                r = this.m_bodyB.c_velocity.v,
                n = this.m_bodyB.c_velocity.w,
                o = this.m_invMassA,
                s = this.m_invMassB,
                a = this.m_invIA,
                h = this.m_invIB,
                u = a + h === 0;
              if (
                this.m_enableMotor &&
                this.m_limitState != If.equalLimits &&
                0 == u
              ) {
                var l = n - i - this.m_motorSpeed,
                  c = -this.m_motorMass * l,
                  d = this.m_motorImpulse,
                  p = t.dt * this.m_maxMotorTorque;
                (this.m_motorImpulse = Yc(this.m_motorImpulse + c, -p, p)),
                  (i -= a * (c = this.m_motorImpulse - d)),
                  (n += h * c);
              }
              if (
                this.m_enableLimit &&
                this.m_limitState != If.inactiveLimit &&
                0 == u
              ) {
                var _ = td.zero();
                _.addCombine(1, r, 1, td.crossNumVec2(n, this.m_rB)),
                  _.subCombine(1, e, 1, td.crossNumVec2(i, this.m_rA));
                var f = n - i;
                if (
                  ((l = new fm(_.x, _.y, f)),
                  (c = fm.neg(this.m_mass.solve33(l))),
                  this.m_limitState == If.equalLimits)
                )
                  this.m_impulse.add(c);
                else if (this.m_limitState == If.atLowerLimit)
                  if (this.m_impulse.z + c.z < 0) {
                    var m = td.combine(
                        -1,
                        _,
                        this.m_impulse.z,
                        td.neo(this.m_mass.ez.x, this.m_mass.ez.y)
                      ),
                      y = this.m_mass.solve22(m);
                    (c.x = y.x),
                      (c.y = y.y),
                      (c.z = -this.m_impulse.z),
                      (this.m_impulse.x += y.x),
                      (this.m_impulse.y += y.y),
                      (this.m_impulse.z = 0);
                  } else this.m_impulse.add(c);
                else
                  this.m_limitState == If.atUpperLimit &&
                    (this.m_impulse.z + c.z > 0
                      ? ((m = td.combine(
                          -1,
                          _,
                          this.m_impulse.z,
                          td.neo(this.m_mass.ez.x, this.m_mass.ez.y)
                        )),
                        (y = this.m_mass.solve22(m)),
                        (c.x = y.x),
                        (c.y = y.y),
                        (c.z = -this.m_impulse.z),
                        (this.m_impulse.x += y.x),
                        (this.m_impulse.y += y.y),
                        (this.m_impulse.z = 0))
                      : this.m_impulse.add(c));
                var g = td.neo(c.x, c.y);
                e.subMul(o, g),
                  (i -= a * (td.crossVec2Vec2(this.m_rA, g) + c.z)),
                  r.addMul(s, g),
                  (n += h * (td.crossVec2Vec2(this.m_rB, g) + c.z));
              } else
                (l = td.zero()).addCombine(
                  1,
                  r,
                  1,
                  td.crossNumVec2(n, this.m_rB)
                ),
                  l.subCombine(1, e, 1, td.crossNumVec2(i, this.m_rA)),
                  (c = this.m_mass.solve22(td.neg(l))),
                  (this.m_impulse.x += c.x),
                  (this.m_impulse.y += c.y),
                  e.subMul(o, c),
                  (i -= a * td.crossVec2Vec2(this.m_rA, c)),
                  r.addMul(s, c),
                  (n += h * td.crossVec2Vec2(this.m_rB, c));
              (this.m_bodyA.c_velocity.v = e),
                (this.m_bodyA.c_velocity.w = i),
                (this.m_bodyB.c_velocity.v = r),
                (this.m_bodyB.c_velocity.w = n);
            }),
            (e.prototype.solvePositionConstraints = function (t) {
              var e,
                i = this.m_bodyA.c_position.c,
                r = this.m_bodyA.c_position.a,
                n = this.m_bodyB.c_position.c,
                o = this.m_bodyB.c_position.a,
                s = sp.neo(r),
                a = sp.neo(o),
                h = 0,
                u = this.m_invIA + this.m_invIB == 0;
              if (
                this.m_enableLimit &&
                this.m_limitState != If.inactiveLimit &&
                0 == u
              ) {
                var l = o - r - this.m_referenceAngle,
                  c = 0;
                if (this.m_limitState == If.equalLimits) {
                  var d = Yc(
                    l - this.m_lowerAngle,
                    -hd.maxAngularCorrection,
                    hd.maxAngularCorrection
                  );
                  (c = -this.m_motorMass * d), (h = _y(d));
                } else
                  this.m_limitState == If.atLowerLimit
                    ? ((h = -(d = l - this.m_lowerAngle)),
                      (d = Yc(d + hd.angularSlop, -hd.maxAngularCorrection, 0)),
                      (c = -this.m_motorMass * d))
                    : this.m_limitState == If.atUpperLimit &&
                      ((h = d = l - this.m_upperAngle),
                      (d = Yc(d - hd.angularSlop, 0, hd.maxAngularCorrection)),
                      (c = -this.m_motorMass * d));
                (r -= this.m_invIA * c), (o += this.m_invIB * c);
              }
              s.setAngle(r), a.setAngle(o);
              var p = sp.mulVec2(
                  s,
                  td.sub(this.m_localAnchorA, this.m_localCenterA)
                ),
                _ = sp.mulVec2(
                  a,
                  td.sub(this.m_localAnchorB, this.m_localCenterB)
                );
              (d = td.zero()).addCombine(1, n, 1, _),
                d.subCombine(1, i, 1, p),
                (e = d.length());
              var f = this.m_invMassA,
                m = this.m_invMassB,
                y = this.m_invIA,
                g = this.m_invIB,
                v = new of();
              (v.ex.x = f + m + y * p.y * p.y + g * _.y * _.y),
                (v.ex.y = -y * p.x * p.y - g * _.x * _.y),
                (v.ey.x = v.ex.y),
                (v.ey.y = f + m + y * p.x * p.x + g * _.x * _.x);
              var b = td.neg(v.solve(d));
              return (
                i.subMul(f, b),
                (r -= y * td.crossVec2Vec2(p, b)),
                n.addMul(m, b),
                (o += g * td.crossVec2Vec2(_, b)),
                this.m_bodyA.c_position.c.setVec2(i),
                (this.m_bodyA.c_position.a = r),
                this.m_bodyB.c_position.c.setVec2(n),
                (this.m_bodyB.c_position.a = o),
                e <= hd.linearSlop && h <= hd.angularSlop
              );
            }),
            (e.TYPE = "revolute-joint"),
            e
          );
        })(Vp),
        yy = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        gy = function () {
          return (
            (gy =
              Object.assign ||
              function (t) {
                for (var e, i = 1, r = arguments.length; i < r; i++)
                  for (var n in (e = arguments[i]))
                    Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
                return t;
              }),
            gy.apply(this, arguments)
          );
        },
        vy = "undefined" != typeof ASSERT && ASSERT,
        by = "undefined" != typeof CONSTRUCTOR_FACTORY && CONSTRUCTOR_FACTORY,
        xy = Math.abs,
        wy = Math.max,
        Ty = Math.min;
      !(function (t) {
        (t[(t.inactiveLimit = 0)] = "inactiveLimit"),
          (t[(t.atLowerLimit = 1)] = "atLowerLimit"),
          (t[(t.atUpperLimit = 2)] = "atUpperLimit"),
          (t[(t.equalLimits = 3)] = "equalLimits");
      })(fy || (fy = {}));
      var Ay,
        Sy = {
          enableLimit: !1,
          lowerTranslation: 0,
          upperTranslation: 0,
          enableMotor: !1,
          maxMotorForce: 0,
          motorSpeed: 0,
        },
        Ey = (function (t) {
          function e(i, r, n, o, s) {
            var a = this;
            return !by || a instanceof e
              ? ((i = Vc(i, Sy)),
                (r = (a = t.call(this, i, r, n) || this).m_bodyA),
                (n = a.m_bodyB),
                (a.m_type = e.TYPE),
                (a.m_localAnchorA = td.clone(
                  o ? r.getLocalPoint(o) : i.localAnchorA || td.zero()
                )),
                (a.m_localAnchorB = td.clone(
                  o ? n.getLocalPoint(o) : i.localAnchorB || td.zero()
                )),
                (a.m_localXAxisA = td.clone(
                  s ? r.getLocalVector(s) : i.localAxisA || td.neo(1, 0)
                )),
                a.m_localXAxisA.normalize(),
                (a.m_localYAxisA = td.crossNumVec2(1, a.m_localXAxisA)),
                (a.m_referenceAngle = Number.isFinite(i.referenceAngle)
                  ? i.referenceAngle
                  : n.getAngle() - r.getAngle()),
                (a.m_impulse = new fm()),
                (a.m_motorMass = 0),
                (a.m_motorImpulse = 0),
                (a.m_lowerTranslation = i.lowerTranslation),
                (a.m_upperTranslation = i.upperTranslation),
                (a.m_maxMotorForce = i.maxMotorForce),
                (a.m_motorSpeed = i.motorSpeed),
                (a.m_enableLimit = i.enableLimit),
                (a.m_enableMotor = i.enableMotor),
                (a.m_limitState = fy.inactiveLimit),
                (a.m_axis = td.zero()),
                (a.m_perp = td.zero()),
                (a.m_K = new uy()),
                a)
              : new e(i, r, n, o, s);
          }
          return (
            yy(e, t),
            (e.prototype._serialize = function () {
              return {
                type: this.m_type,
                bodyA: this.m_bodyA,
                bodyB: this.m_bodyB,
                collideConnected: this.m_collideConnected,
                lowerTranslation: this.m_lowerTranslation,
                upperTranslation: this.m_upperTranslation,
                maxMotorForce: this.m_maxMotorForce,
                motorSpeed: this.m_motorSpeed,
                enableLimit: this.m_enableLimit,
                enableMotor: this.m_enableMotor,
                localAnchorA: this.m_localAnchorA,
                localAnchorB: this.m_localAnchorB,
                localAxisA: this.m_localXAxisA,
                referenceAngle: this.m_referenceAngle,
              };
            }),
            (e._deserialize = function (t, i, r) {
              return (
                ((t = gy({}, t)).bodyA = r(Lp, t.bodyA, i)),
                (t.bodyB = r(Lp, t.bodyB, i)),
                (t.localAxisA = td.clone(t.localAxisA)),
                new e(t)
              );
            }),
            (e.prototype._reset = function (t) {
              t.anchorA
                ? this.m_localAnchorA.setVec2(
                    this.m_bodyA.getLocalPoint(t.anchorA)
                  )
                : t.localAnchorA && this.m_localAnchorA.setVec2(t.localAnchorA),
                t.anchorB
                  ? this.m_localAnchorB.setVec2(
                      this.m_bodyB.getLocalPoint(t.anchorB)
                    )
                  : t.localAnchorB &&
                    this.m_localAnchorB.setVec2(t.localAnchorB),
                t.localAxisA &&
                  (this.m_localXAxisA.setVec2(t.localAxisA),
                  this.m_localYAxisA.setVec2(td.crossNumVec2(1, t.localAxisA))),
                Number.isFinite(t.referenceAngle) &&
                  (this.m_referenceAngle = t.referenceAngle),
                void 0 !== t.enableLimit &&
                  (this.m_enableLimit = !!t.enableLimit),
                Number.isFinite(t.lowerTranslation) &&
                  (this.m_lowerTranslation = t.lowerTranslation),
                Number.isFinite(t.upperTranslation) &&
                  (this.m_upperTranslation = t.upperTranslation),
                void 0 !== t.enableMotor &&
                  (this.m_enableMotor = !!t.enableMotor),
                Number.isFinite(t.maxMotorForce) &&
                  (this.m_maxMotorForce = t.maxMotorForce),
                Number.isFinite(t.motorSpeed) &&
                  (this.m_motorSpeed = t.motorSpeed);
            }),
            (e.prototype.getLocalAnchorA = function () {
              return this.m_localAnchorA;
            }),
            (e.prototype.getLocalAnchorB = function () {
              return this.m_localAnchorB;
            }),
            (e.prototype.getLocalAxisA = function () {
              return this.m_localXAxisA;
            }),
            (e.prototype.getReferenceAngle = function () {
              return this.m_referenceAngle;
            }),
            (e.prototype.getJointTranslation = function () {
              var t = this.m_bodyA.getWorldPoint(this.m_localAnchorA),
                e = this.m_bodyB.getWorldPoint(this.m_localAnchorB),
                i = td.sub(e, t),
                r = this.m_bodyA.getWorldVector(this.m_localXAxisA);
              return td.dot(i, r);
            }),
            (e.prototype.getJointSpeed = function () {
              var t = this.m_bodyA,
                e = this.m_bodyB,
                i = sp.mulVec2(
                  t.m_xf.q,
                  td.sub(this.m_localAnchorA, t.m_sweep.localCenter)
                ),
                r = sp.mulVec2(
                  e.m_xf.q,
                  td.sub(this.m_localAnchorB, e.m_sweep.localCenter)
                ),
                n = td.add(t.m_sweep.c, i),
                o = td.add(e.m_sweep.c, r),
                s = td.sub(o, n),
                a = sp.mulVec2(t.m_xf.q, this.m_localXAxisA),
                h = t.m_linearVelocity,
                u = e.m_linearVelocity,
                l = t.m_angularVelocity,
                c = e.m_angularVelocity;
              return (
                td.dot(s, td.crossNumVec2(l, a)) +
                td.dot(
                  a,
                  td.sub(
                    td.addCrossNumVec2(u, c, r),
                    td.addCrossNumVec2(h, l, i)
                  )
                )
              );
            }),
            (e.prototype.isLimitEnabled = function () {
              return this.m_enableLimit;
            }),
            (e.prototype.enableLimit = function (t) {
              t != this.m_enableLimit &&
                (this.m_bodyA.setAwake(!0),
                this.m_bodyB.setAwake(!0),
                (this.m_enableLimit = t),
                (this.m_impulse.z = 0));
            }),
            (e.prototype.getLowerLimit = function () {
              return this.m_lowerTranslation;
            }),
            (e.prototype.getUpperLimit = function () {
              return this.m_upperTranslation;
            }),
            (e.prototype.setLimits = function (t, e) {
              vy && console.assert(t <= e),
                (t == this.m_lowerTranslation &&
                  e == this.m_upperTranslation) ||
                  (this.m_bodyA.setAwake(!0),
                  this.m_bodyB.setAwake(!0),
                  (this.m_lowerTranslation = t),
                  (this.m_upperTranslation = e),
                  (this.m_impulse.z = 0));
            }),
            (e.prototype.isMotorEnabled = function () {
              return this.m_enableMotor;
            }),
            (e.prototype.enableMotor = function (t) {
              t != this.m_enableMotor &&
                (this.m_bodyA.setAwake(!0),
                this.m_bodyB.setAwake(!0),
                (this.m_enableMotor = t));
            }),
            (e.prototype.setMotorSpeed = function (t) {
              t != this.m_motorSpeed &&
                (this.m_bodyA.setAwake(!0),
                this.m_bodyB.setAwake(!0),
                (this.m_motorSpeed = t));
            }),
            (e.prototype.setMaxMotorForce = function (t) {
              t != this.m_maxMotorForce &&
                (this.m_bodyA.setAwake(!0),
                this.m_bodyB.setAwake(!0),
                (this.m_maxMotorForce = t));
            }),
            (e.prototype.getMaxMotorForce = function () {
              return this.m_maxMotorForce;
            }),
            (e.prototype.getMotorSpeed = function () {
              return this.m_motorSpeed;
            }),
            (e.prototype.getMotorForce = function (t) {
              return t * this.m_motorImpulse;
            }),
            (e.prototype.getAnchorA = function () {
              return this.m_bodyA.getWorldPoint(this.m_localAnchorA);
            }),
            (e.prototype.getAnchorB = function () {
              return this.m_bodyB.getWorldPoint(this.m_localAnchorB);
            }),
            (e.prototype.getReactionForce = function (t) {
              return td
                .combine(
                  this.m_impulse.x,
                  this.m_perp,
                  this.m_motorImpulse + this.m_impulse.z,
                  this.m_axis
                )
                .mul(t);
            }),
            (e.prototype.getReactionTorque = function (t) {
              return t * this.m_impulse.y;
            }),
            (e.prototype.initVelocityConstraints = function (t) {
              (this.m_localCenterA = this.m_bodyA.m_sweep.localCenter),
                (this.m_localCenterB = this.m_bodyB.m_sweep.localCenter),
                (this.m_invMassA = this.m_bodyA.m_invMass),
                (this.m_invMassB = this.m_bodyB.m_invMass),
                (this.m_invIA = this.m_bodyA.m_invI),
                (this.m_invIB = this.m_bodyB.m_invI);
              var e = this.m_bodyA.c_position.c,
                i = this.m_bodyA.c_position.a,
                r = this.m_bodyA.c_velocity.v,
                n = this.m_bodyA.c_velocity.w,
                o = this.m_bodyB.c_position.c,
                s = this.m_bodyB.c_position.a,
                a = this.m_bodyB.c_velocity.v,
                h = this.m_bodyB.c_velocity.w,
                u = sp.neo(i),
                l = sp.neo(s),
                c = sp.mulVec2(
                  u,
                  td.sub(this.m_localAnchorA, this.m_localCenterA)
                ),
                d = sp.mulVec2(
                  l,
                  td.sub(this.m_localAnchorB, this.m_localCenterB)
                ),
                p = td.zero();
              p.addCombine(1, o, 1, d), p.subCombine(1, e, 1, c);
              var _ = this.m_invMassA,
                f = this.m_invMassB,
                m = this.m_invIA,
                y = this.m_invIB;
              (this.m_axis = sp.mulVec2(u, this.m_localXAxisA)),
                (this.m_a1 = td.crossVec2Vec2(td.add(p, c), this.m_axis)),
                (this.m_a2 = td.crossVec2Vec2(d, this.m_axis)),
                (this.m_motorMass =
                  _ +
                  f +
                  m * this.m_a1 * this.m_a1 +
                  y * this.m_a2 * this.m_a2),
                this.m_motorMass > 0 &&
                  (this.m_motorMass = 1 / this.m_motorMass),
                (this.m_perp = sp.mulVec2(u, this.m_localYAxisA)),
                (this.m_s1 = td.crossVec2Vec2(td.add(p, c), this.m_perp)),
                (this.m_s2 = td.crossVec2Vec2(d, this.m_perp)),
                td.crossVec2Vec2(c, this.m_perp);
              var g =
                  _ + f + m * this.m_s1 * this.m_s1 + y * this.m_s2 * this.m_s2,
                v = m * this.m_s1 + y * this.m_s2,
                b = m * this.m_s1 * this.m_a1 + y * this.m_s2 * this.m_a2,
                x = m + y;
              0 == x && (x = 1);
              var w = m * this.m_a1 + y * this.m_a2,
                T =
                  _ + f + m * this.m_a1 * this.m_a1 + y * this.m_a2 * this.m_a2;
              if (
                (this.m_K.ex.set(g, v, b),
                this.m_K.ey.set(v, x, w),
                this.m_K.ez.set(b, w, T),
                this.m_enableLimit)
              ) {
                var A = td.dot(this.m_axis, p);
                xy(this.m_upperTranslation - this.m_lowerTranslation) <
                2 * hd.linearSlop
                  ? (this.m_limitState = fy.equalLimits)
                  : A <= this.m_lowerTranslation
                  ? this.m_limitState != fy.atLowerLimit &&
                    ((this.m_limitState = fy.atLowerLimit),
                    (this.m_impulse.z = 0))
                  : A >= this.m_upperTranslation
                  ? this.m_limitState != fy.atUpperLimit &&
                    ((this.m_limitState = fy.atUpperLimit),
                    (this.m_impulse.z = 0))
                  : ((this.m_limitState = fy.inactiveLimit),
                    (this.m_impulse.z = 0));
              } else
                (this.m_limitState = fy.inactiveLimit), (this.m_impulse.z = 0);
              if (
                (0 == this.m_enableMotor && (this.m_motorImpulse = 0),
                t.warmStarting)
              ) {
                this.m_impulse.mul(t.dtRatio),
                  (this.m_motorImpulse *= t.dtRatio);
                var S = td.combine(
                    this.m_impulse.x,
                    this.m_perp,
                    this.m_motorImpulse + this.m_impulse.z,
                    this.m_axis
                  ),
                  E =
                    this.m_impulse.x * this.m_s1 +
                    this.m_impulse.y +
                    (this.m_motorImpulse + this.m_impulse.z) * this.m_a1,
                  C =
                    this.m_impulse.x * this.m_s2 +
                    this.m_impulse.y +
                    (this.m_motorImpulse + this.m_impulse.z) * this.m_a2;
                r.subMul(_, S), (n -= m * E), a.addMul(f, S), (h += y * C);
              } else this.m_impulse.setZero(), (this.m_motorImpulse = 0);
              this.m_bodyA.c_velocity.v.setVec2(r),
                (this.m_bodyA.c_velocity.w = n),
                this.m_bodyB.c_velocity.v.setVec2(a),
                (this.m_bodyB.c_velocity.w = h);
            }),
            (e.prototype.solveVelocityConstraints = function (t) {
              var e = this.m_bodyA.c_velocity.v,
                i = this.m_bodyA.c_velocity.w,
                r = this.m_bodyB.c_velocity.v,
                n = this.m_bodyB.c_velocity.w,
                o = this.m_invMassA,
                s = this.m_invMassB,
                a = this.m_invIA,
                h = this.m_invIB;
              if (this.m_enableMotor && this.m_limitState != fy.equalLimits) {
                var u =
                    td.dot(this.m_axis, td.sub(r, e)) +
                    this.m_a2 * n -
                    this.m_a1 * i,
                  l = this.m_motorMass * (this.m_motorSpeed - u),
                  c = this.m_motorImpulse,
                  d = t.dt * this.m_maxMotorForce;
                (this.m_motorImpulse = Yc(this.m_motorImpulse + l, -d, d)),
                  (l = this.m_motorImpulse - c);
                var p = td.mulNumVec2(l, this.m_axis),
                  _ = l * this.m_a1,
                  f = l * this.m_a2;
                e.subMul(o, p), (i -= a * _), r.addMul(s, p), (n += h * f);
              }
              var m = td.zero();
              if (
                ((m.x += td.dot(this.m_perp, r) + this.m_s2 * n),
                (m.x -= td.dot(this.m_perp, e) + this.m_s1 * i),
                (m.y = n - i),
                this.m_enableLimit && this.m_limitState != fy.inactiveLimit)
              ) {
                var y = 0;
                (y += td.dot(this.m_axis, r) + this.m_a2 * n),
                  (y -= td.dot(this.m_axis, e) + this.m_a1 * i),
                  (u = new fm(m.x, m.y, y));
                var g = fm.clone(this.m_impulse),
                  v = this.m_K.solve33(fm.neg(u));
                this.m_impulse.add(v),
                  this.m_limitState == fy.atLowerLimit
                    ? (this.m_impulse.z = wy(this.m_impulse.z, 0))
                    : this.m_limitState == fy.atUpperLimit &&
                      (this.m_impulse.z = Ty(this.m_impulse.z, 0));
                var b = td.combine(
                    -1,
                    m,
                    -(this.m_impulse.z - g.z),
                    td.neo(this.m_K.ez.x, this.m_K.ez.y)
                  ),
                  x = td.add(this.m_K.solve22(b), td.neo(g.x, g.y));
                (this.m_impulse.x = x.x),
                  (this.m_impulse.y = x.y),
                  (v = fm.sub(this.m_impulse, g)),
                  (p = td.combine(v.x, this.m_perp, v.z, this.m_axis)),
                  (_ = v.x * this.m_s1 + v.y + v.z * this.m_a1),
                  (f = v.x * this.m_s2 + v.y + v.z * this.m_a2),
                  e.subMul(o, p),
                  (i -= a * _),
                  r.addMul(s, p),
                  (n += h * f);
              } else
                (v = this.m_K.solve22(td.neg(m))),
                  (this.m_impulse.x += v.x),
                  (this.m_impulse.y += v.y),
                  (p = td.mulNumVec2(v.x, this.m_perp)),
                  (_ = v.x * this.m_s1 + v.y),
                  (f = v.x * this.m_s2 + v.y),
                  e.subMul(o, p),
                  (i -= a * _),
                  r.addMul(s, p),
                  (n += h * f);
              (this.m_bodyA.c_velocity.v = e),
                (this.m_bodyA.c_velocity.w = i),
                (this.m_bodyB.c_velocity.v = r),
                (this.m_bodyB.c_velocity.w = n);
            }),
            (e.prototype.solvePositionConstraints = function (t) {
              var e = this.m_bodyA.c_position.c,
                i = this.m_bodyA.c_position.a,
                r = this.m_bodyB.c_position.c,
                n = this.m_bodyB.c_position.a,
                o = sp.neo(i),
                s = sp.neo(n),
                a = this.m_invMassA,
                h = this.m_invMassB,
                u = this.m_invIA,
                l = this.m_invIB,
                c = sp.mulVec2(
                  o,
                  td.sub(this.m_localAnchorA, this.m_localCenterA)
                ),
                d = sp.mulVec2(
                  s,
                  td.sub(this.m_localAnchorB, this.m_localCenterB)
                ),
                p = td.sub(td.add(r, d), td.add(e, c)),
                _ = sp.mulVec2(o, this.m_localXAxisA),
                f = td.crossVec2Vec2(td.add(p, c), _),
                m = td.crossVec2Vec2(d, _),
                y = sp.mulVec2(o, this.m_localYAxisA),
                g = td.crossVec2Vec2(td.add(p, c), y),
                v = td.crossVec2Vec2(d, y),
                b = new fm(),
                x = td.zero();
              (x.x = td.dot(y, p)), (x.y = n - i - this.m_referenceAngle);
              var w = xy(x.x),
                T = xy(x.y),
                A = hd.linearSlop,
                S = hd.maxLinearCorrection,
                E = !1,
                C = 0;
              if (this.m_enableLimit) {
                var M = td.dot(_, p);
                xy(this.m_upperTranslation - this.m_lowerTranslation) < 2 * A
                  ? ((C = Yc(M, -S, S)), (w = wy(w, xy(M))), (E = !0))
                  : M <= this.m_lowerTranslation
                  ? ((C = Yc(M - this.m_lowerTranslation + A, -S, 0)),
                    (w = Math.max(w, this.m_lowerTranslation - M)),
                    (E = !0))
                  : M >= this.m_upperTranslation &&
                    ((C = Yc(M - this.m_upperTranslation - A, 0, S)),
                    (w = Math.max(w, M - this.m_upperTranslation)),
                    (E = !0));
              }
              if (E) {
                var P = a + h + u * g * g + l * v * v,
                  B = u * g + l * v,
                  O = u * g * f + l * v * m;
                0 == (F = u + l) && (F = 1);
                var R = u * f + l * m,
                  I = a + h + u * f * f + l * m * m;
                (D = new uy()).ex.set(P, B, O),
                  D.ey.set(B, F, R),
                  D.ez.set(O, R, I);
                var k = new fm();
                (k.x = x.x), (k.y = x.y), (k.z = C), (b = D.solve33(fm.neg(k)));
              } else {
                var F, D;
                (P = a + h + u * g * g + l * v * v),
                  (B = u * g + l * v),
                  0 == (F = u + l) && (F = 1),
                  (D = new of()).ex.setNum(P, B),
                  D.ey.setNum(B, F);
                var N = D.solve(td.neg(x));
                (b.x = N.x), (b.y = N.y), (b.z = 0);
              }
              var L = td.combine(b.x, y, b.z, _),
                U = b.x * g + b.y + b.z * f,
                G = b.x * v + b.y + b.z * m;
              return (
                e.subMul(a, L),
                (i -= u * U),
                r.addMul(h, L),
                (n += l * G),
                (this.m_bodyA.c_position.c = e),
                (this.m_bodyA.c_position.a = i),
                (this.m_bodyB.c_position.c = r),
                (this.m_bodyB.c_position.a = n),
                w <= hd.linearSlop && T <= hd.angularSlop
              );
            }),
            (e.TYPE = "prismatic-joint"),
            e
          );
        })(Vp),
        Cy = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        My = function () {
          return (
            (My =
              Object.assign ||
              function (t) {
                for (var e, i = 1, r = arguments.length; i < r; i++)
                  for (var n in (e = arguments[i]))
                    Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
                return t;
              }),
            My.apply(this, arguments)
          );
        },
        Py = "undefined" != typeof ASSERT && ASSERT,
        By = "undefined" != typeof CONSTRUCTOR_FACTORY && CONSTRUCTOR_FACTORY,
        Oy = { ratio: 1 },
        Ry = (function (t) {
          function e(i, r, n, o, s, a) {
            var h,
              u,
              l = this;
            if (By && !(l instanceof e)) return new e(i, r, n, o, s, a);
            (i = Vc(i, Oy)),
              (r = (l = t.call(this, i, r, n) || this).m_bodyA),
              (n = l.m_bodyB),
              (l.m_type = e.TYPE),
              Py &&
                console.assert(o.m_type === my.TYPE || o.m_type === Ey.TYPE),
              Py &&
                console.assert(s.m_type === my.TYPE || s.m_type === Ey.TYPE),
              (l.m_joint1 = o || i.joint1),
              (l.m_joint2 = s || i.joint2),
              (l.m_ratio = Number.isFinite(a) ? a : i.ratio),
              (l.m_type1 = l.m_joint1.getType()),
              (l.m_type2 = l.m_joint2.getType()),
              (l.m_bodyC = l.m_joint1.getBodyA()),
              (l.m_bodyA = l.m_joint1.getBodyB());
            var c = l.m_bodyA.m_xf,
              d = l.m_bodyA.m_sweep.a,
              p = l.m_bodyC.m_xf,
              _ = l.m_bodyC.m_sweep.a;
            if (l.m_type1 === my.TYPE) {
              var f = l.m_joint1;
              (l.m_localAnchorC = f.m_localAnchorA),
                (l.m_localAnchorA = f.m_localAnchorB),
                (l.m_referenceAngleA = f.m_referenceAngle),
                (l.m_localAxisC = td.zero()),
                (h = d - _ - l.m_referenceAngleA);
            } else {
              var m = l.m_joint1;
              (l.m_localAnchorC = m.m_localAnchorA),
                (l.m_localAnchorA = m.m_localAnchorB),
                (l.m_referenceAngleA = m.m_referenceAngle),
                (l.m_localAxisC = m.m_localXAxisA);
              var y = l.m_localAnchorC,
                g = sp.mulTVec2(
                  p.q,
                  td.add(sp.mulVec2(c.q, l.m_localAnchorA), td.sub(c.p, p.p))
                );
              h = td.dot(g, l.m_localAxisC) - td.dot(y, l.m_localAxisC);
            }
            (l.m_bodyD = l.m_joint2.getBodyA()),
              (l.m_bodyB = l.m_joint2.getBodyB());
            var v = l.m_bodyB.m_xf,
              b = l.m_bodyB.m_sweep.a,
              x = l.m_bodyD.m_xf,
              w = l.m_bodyD.m_sweep.a;
            if (l.m_type2 === my.TYPE)
              (f = l.m_joint2),
                (l.m_localAnchorD = f.m_localAnchorA),
                (l.m_localAnchorB = f.m_localAnchorB),
                (l.m_referenceAngleB = f.m_referenceAngle),
                (l.m_localAxisD = td.zero()),
                (u = b - w - l.m_referenceAngleB);
            else {
              (m = l.m_joint2),
                (l.m_localAnchorD = m.m_localAnchorA),
                (l.m_localAnchorB = m.m_localAnchorB),
                (l.m_referenceAngleB = m.m_referenceAngle),
                (l.m_localAxisD = m.m_localXAxisA);
              var T = l.m_localAnchorD,
                A = sp.mulTVec2(
                  x.q,
                  td.add(sp.mulVec2(v.q, l.m_localAnchorB), td.sub(v.p, x.p))
                );
              u = td.dot(A, l.m_localAxisD) - td.dot(T, l.m_localAxisD);
            }
            return (l.m_constant = h + l.m_ratio * u), (l.m_impulse = 0), l;
          }
          return (
            Cy(e, t),
            (e.prototype._serialize = function () {
              return {
                type: this.m_type,
                bodyA: this.m_bodyA,
                bodyB: this.m_bodyB,
                collideConnected: this.m_collideConnected,
                joint1: this.m_joint1,
                joint2: this.m_joint2,
                ratio: this.m_ratio,
              };
            }),
            (e._deserialize = function (t, i, r) {
              return (
                ((t = My({}, t)).bodyA = r(Lp, t.bodyA, i)),
                (t.bodyB = r(Lp, t.bodyB, i)),
                (t.joint1 = r(Vp, t.joint1, i)),
                (t.joint2 = r(Vp, t.joint2, i)),
                new e(t)
              );
            }),
            (e.prototype._reset = function (t) {
              Number.isFinite(t.ratio) && (this.m_ratio = t.ratio);
            }),
            (e.prototype.getJoint1 = function () {
              return this.m_joint1;
            }),
            (e.prototype.getJoint2 = function () {
              return this.m_joint2;
            }),
            (e.prototype.setRatio = function (t) {
              Py && console.assert(Number.isFinite(t)), (this.m_ratio = t);
            }),
            (e.prototype.getRatio = function () {
              return this.m_ratio;
            }),
            (e.prototype.getAnchorA = function () {
              return this.m_bodyA.getWorldPoint(this.m_localAnchorA);
            }),
            (e.prototype.getAnchorB = function () {
              return this.m_bodyB.getWorldPoint(this.m_localAnchorB);
            }),
            (e.prototype.getReactionForce = function (t) {
              return td.mulNumVec2(this.m_impulse, this.m_JvAC).mul(t);
            }),
            (e.prototype.getReactionTorque = function (t) {
              return t * (this.m_impulse * this.m_JwA);
            }),
            (e.prototype.initVelocityConstraints = function (t) {
              (this.m_lcA = this.m_bodyA.m_sweep.localCenter),
                (this.m_lcB = this.m_bodyB.m_sweep.localCenter),
                (this.m_lcC = this.m_bodyC.m_sweep.localCenter),
                (this.m_lcD = this.m_bodyD.m_sweep.localCenter),
                (this.m_mA = this.m_bodyA.m_invMass),
                (this.m_mB = this.m_bodyB.m_invMass),
                (this.m_mC = this.m_bodyC.m_invMass),
                (this.m_mD = this.m_bodyD.m_invMass),
                (this.m_iA = this.m_bodyA.m_invI),
                (this.m_iB = this.m_bodyB.m_invI),
                (this.m_iC = this.m_bodyC.m_invI),
                (this.m_iD = this.m_bodyD.m_invI);
              var e = this.m_bodyA.c_position.a,
                i = this.m_bodyA.c_velocity.v,
                r = this.m_bodyA.c_velocity.w,
                n = this.m_bodyB.c_position.a,
                o = this.m_bodyB.c_velocity.v,
                s = this.m_bodyB.c_velocity.w,
                a = this.m_bodyC.c_position.a,
                h = this.m_bodyC.c_velocity.v,
                u = this.m_bodyC.c_velocity.w,
                l = this.m_bodyD.c_position.a,
                c = this.m_bodyD.c_velocity.v,
                d = this.m_bodyD.c_velocity.w,
                p = sp.neo(e),
                _ = sp.neo(n),
                f = sp.neo(a),
                m = sp.neo(l);
              if (((this.m_mass = 0), this.m_type1 == my.TYPE))
                (this.m_JvAC = td.zero()),
                  (this.m_JwA = 1),
                  (this.m_JwC = 1),
                  (this.m_mass += this.m_iA + this.m_iC);
              else {
                var y = sp.mulVec2(f, this.m_localAxisC),
                  g = sp.mulSub(f, this.m_localAnchorC, this.m_lcC),
                  v = sp.mulSub(p, this.m_localAnchorA, this.m_lcA);
                (this.m_JvAC = y),
                  (this.m_JwC = td.crossVec2Vec2(g, y)),
                  (this.m_JwA = td.crossVec2Vec2(v, y)),
                  (this.m_mass +=
                    this.m_mC +
                    this.m_mA +
                    this.m_iC * this.m_JwC * this.m_JwC +
                    this.m_iA * this.m_JwA * this.m_JwA);
              }
              if (this.m_type2 == my.TYPE)
                (this.m_JvBD = td.zero()),
                  (this.m_JwB = this.m_ratio),
                  (this.m_JwD = this.m_ratio),
                  (this.m_mass +=
                    this.m_ratio * this.m_ratio * (this.m_iB + this.m_iD));
              else {
                y = sp.mulVec2(m, this.m_localAxisD);
                var b = sp.mulSub(m, this.m_localAnchorD, this.m_lcD),
                  x = sp.mulSub(_, this.m_localAnchorB, this.m_lcB);
                (this.m_JvBD = td.mulNumVec2(this.m_ratio, y)),
                  (this.m_JwD = this.m_ratio * td.crossVec2Vec2(b, y)),
                  (this.m_JwB = this.m_ratio * td.crossVec2Vec2(x, y)),
                  (this.m_mass +=
                    this.m_ratio * this.m_ratio * (this.m_mD + this.m_mB) +
                    this.m_iD * this.m_JwD * this.m_JwD +
                    this.m_iB * this.m_JwB * this.m_JwB);
              }
              (this.m_mass = this.m_mass > 0 ? 1 / this.m_mass : 0),
                t.warmStarting
                  ? (i.addMul(this.m_mA * this.m_impulse, this.m_JvAC),
                    (r += this.m_iA * this.m_impulse * this.m_JwA),
                    o.addMul(this.m_mB * this.m_impulse, this.m_JvBD),
                    (s += this.m_iB * this.m_impulse * this.m_JwB),
                    h.subMul(this.m_mC * this.m_impulse, this.m_JvAC),
                    (u -= this.m_iC * this.m_impulse * this.m_JwC),
                    c.subMul(this.m_mD * this.m_impulse, this.m_JvBD),
                    (d -= this.m_iD * this.m_impulse * this.m_JwD))
                  : (this.m_impulse = 0),
                this.m_bodyA.c_velocity.v.setVec2(i),
                (this.m_bodyA.c_velocity.w = r),
                this.m_bodyB.c_velocity.v.setVec2(o),
                (this.m_bodyB.c_velocity.w = s),
                this.m_bodyC.c_velocity.v.setVec2(h),
                (this.m_bodyC.c_velocity.w = u),
                this.m_bodyD.c_velocity.v.setVec2(c),
                (this.m_bodyD.c_velocity.w = d);
            }),
            (e.prototype.solveVelocityConstraints = function (t) {
              var e = this.m_bodyA.c_velocity.v,
                i = this.m_bodyA.c_velocity.w,
                r = this.m_bodyB.c_velocity.v,
                n = this.m_bodyB.c_velocity.w,
                o = this.m_bodyC.c_velocity.v,
                s = this.m_bodyC.c_velocity.w,
                a = this.m_bodyD.c_velocity.v,
                h = this.m_bodyD.c_velocity.w,
                u =
                  td.dot(this.m_JvAC, e) -
                  td.dot(this.m_JvAC, o) +
                  td.dot(this.m_JvBD, r) -
                  td.dot(this.m_JvBD, a);
              u +=
                this.m_JwA * i -
                this.m_JwC * s +
                (this.m_JwB * n - this.m_JwD * h);
              var l = -this.m_mass * u;
              (this.m_impulse += l),
                e.addMul(this.m_mA * l, this.m_JvAC),
                (i += this.m_iA * l * this.m_JwA),
                r.addMul(this.m_mB * l, this.m_JvBD),
                (n += this.m_iB * l * this.m_JwB),
                o.subMul(this.m_mC * l, this.m_JvAC),
                (s -= this.m_iC * l * this.m_JwC),
                a.subMul(this.m_mD * l, this.m_JvBD),
                (h -= this.m_iD * l * this.m_JwD),
                this.m_bodyA.c_velocity.v.setVec2(e),
                (this.m_bodyA.c_velocity.w = i),
                this.m_bodyB.c_velocity.v.setVec2(r),
                (this.m_bodyB.c_velocity.w = n),
                this.m_bodyC.c_velocity.v.setVec2(o),
                (this.m_bodyC.c_velocity.w = s),
                this.m_bodyD.c_velocity.v.setVec2(a),
                (this.m_bodyD.c_velocity.w = h);
            }),
            (e.prototype.solvePositionConstraints = function (t) {
              var e,
                i,
                r,
                n,
                o,
                s,
                a,
                h,
                u = this.m_bodyA.c_position.c,
                l = this.m_bodyA.c_position.a,
                c = this.m_bodyB.c_position.c,
                d = this.m_bodyB.c_position.a,
                p = this.m_bodyC.c_position.c,
                _ = this.m_bodyC.c_position.a,
                f = this.m_bodyD.c_position.c,
                m = this.m_bodyD.c_position.a,
                y = sp.neo(l),
                g = sp.neo(d),
                v = sp.neo(_),
                b = sp.neo(m),
                x = 0;
              if (this.m_type1 == my.TYPE)
                (r = td.zero()),
                  (o = 1),
                  (a = 1),
                  (x += this.m_iA + this.m_iC),
                  (e = l - _ - this.m_referenceAngleA);
              else {
                var w = sp.mulVec2(v, this.m_localAxisC),
                  T = sp.mulSub(v, this.m_localAnchorC, this.m_lcC),
                  A = sp.mulSub(y, this.m_localAnchorA, this.m_lcA);
                (r = w),
                  (a = td.crossVec2Vec2(T, w)),
                  (o = td.crossVec2Vec2(A, w)),
                  (x +=
                    this.m_mC +
                    this.m_mA +
                    this.m_iC * a * a +
                    this.m_iA * o * o);
                var S = td.sub(this.m_localAnchorC, this.m_lcC),
                  E = sp.mulTVec2(v, td.add(A, td.sub(u, p)));
                e = td.dot(td.sub(E, S), this.m_localAxisC);
              }
              if (this.m_type2 == my.TYPE)
                (n = td.zero()),
                  (s = this.m_ratio),
                  (h = this.m_ratio),
                  (x += this.m_ratio * this.m_ratio * (this.m_iB + this.m_iD)),
                  (i = d - m - this.m_referenceAngleB);
              else {
                w = sp.mulVec2(b, this.m_localAxisD);
                var C = sp.mulSub(b, this.m_localAnchorD, this.m_lcD),
                  M = sp.mulSub(g, this.m_localAnchorB, this.m_lcB);
                (n = td.mulNumVec2(this.m_ratio, w)),
                  (h = this.m_ratio * td.crossVec2Vec2(C, w)),
                  (s = this.m_ratio * td.crossVec2Vec2(M, w)),
                  (x +=
                    this.m_ratio * this.m_ratio * (this.m_mD + this.m_mB) +
                    this.m_iD * h * h +
                    this.m_iB * s * s);
                var P = td.sub(this.m_localAnchorD, this.m_lcD),
                  B = sp.mulTVec2(b, td.add(M, td.sub(c, f)));
                i = td.dot(B, this.m_localAxisD) - td.dot(P, this.m_localAxisD);
              }
              var O = e + this.m_ratio * i - this.m_constant,
                R = 0;
              return (
                x > 0 && (R = -O / x),
                u.addMul(this.m_mA * R, r),
                (l += this.m_iA * R * o),
                c.addMul(this.m_mB * R, n),
                (d += this.m_iB * R * s),
                p.subMul(this.m_mC * R, r),
                (_ -= this.m_iC * R * a),
                f.subMul(this.m_mD * R, n),
                (m -= this.m_iD * R * h),
                this.m_bodyA.c_position.c.setVec2(u),
                (this.m_bodyA.c_position.a = l),
                this.m_bodyB.c_position.c.setVec2(c),
                (this.m_bodyB.c_position.a = d),
                this.m_bodyC.c_position.c.setVec2(p),
                (this.m_bodyC.c_position.a = _),
                this.m_bodyD.c_position.c.setVec2(f),
                (this.m_bodyD.c_position.a = m),
                0 < hd.linearSlop
              );
            }),
            (e.TYPE = "gear-joint"),
            e
          );
        })(Vp),
        Iy = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        ky = function () {
          return (
            (ky =
              Object.assign ||
              function (t) {
                for (var e, i = 1, r = arguments.length; i < r; i++)
                  for (var n in (e = arguments[i]))
                    Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
                return t;
              }),
            ky.apply(this, arguments)
          );
        },
        Fy = "undefined" != typeof ASSERT && ASSERT,
        Dy = "undefined" != typeof CONSTRUCTOR_FACTORY && CONSTRUCTOR_FACTORY,
        Ny = { maxForce: 1, maxTorque: 1, correctionFactor: 0.3 },
        Ly = (function (t) {
          function e(i, r, n) {
            var o = this;
            return !Dy || o instanceof e
              ? ((i = Vc(i, Ny)),
                (r = (o = t.call(this, i, r, n) || this).m_bodyA),
                (n = o.m_bodyB),
                (o.m_type = e.TYPE),
                (o.m_linearOffset = td.isValid(i.linearOffset)
                  ? td.clone(i.linearOffset)
                  : r.getLocalPoint(n.getPosition())),
                (o.m_angularOffset = Number.isFinite(i.angularOffset)
                  ? i.angularOffset
                  : n.getAngle() - r.getAngle()),
                (o.m_linearImpulse = td.zero()),
                (o.m_angularImpulse = 0),
                (o.m_maxForce = i.maxForce),
                (o.m_maxTorque = i.maxTorque),
                (o.m_correctionFactor = i.correctionFactor),
                o)
              : new e(i, r, n);
          }
          return (
            Iy(e, t),
            (e.prototype._serialize = function () {
              return {
                type: this.m_type,
                bodyA: this.m_bodyA,
                bodyB: this.m_bodyB,
                collideConnected: this.m_collideConnected,
                maxForce: this.m_maxForce,
                maxTorque: this.m_maxTorque,
                correctionFactor: this.m_correctionFactor,
                linearOffset: this.m_linearOffset,
                angularOffset: this.m_angularOffset,
              };
            }),
            (e._deserialize = function (t, i, r) {
              return (
                ((t = ky({}, t)).bodyA = r(Lp, t.bodyA, i)),
                (t.bodyB = r(Lp, t.bodyB, i)),
                new e(t)
              );
            }),
            (e.prototype._reset = function (t) {
              Number.isFinite(t.angularOffset) &&
                (this.m_angularOffset = t.angularOffset),
                Number.isFinite(t.maxForce) && (this.m_maxForce = t.maxForce),
                Number.isFinite(t.maxTorque) &&
                  (this.m_maxTorque = t.maxTorque),
                Number.isFinite(t.correctionFactor) &&
                  (this.m_correctionFactor = t.correctionFactor),
                td.isValid(t.linearOffset) &&
                  this.m_linearOffset.set(t.linearOffset);
            }),
            (e.prototype.setMaxForce = function (t) {
              Fy && console.assert(Number.isFinite(t) && t >= 0),
                (this.m_maxForce = t);
            }),
            (e.prototype.getMaxForce = function () {
              return this.m_maxForce;
            }),
            (e.prototype.setMaxTorque = function (t) {
              Fy && console.assert(Number.isFinite(t) && t >= 0),
                (this.m_maxTorque = t);
            }),
            (e.prototype.getMaxTorque = function () {
              return this.m_maxTorque;
            }),
            (e.prototype.setCorrectionFactor = function (t) {
              Fy && console.assert(Number.isFinite(t) && 0 <= t && t <= 1),
                (this.m_correctionFactor = t);
            }),
            (e.prototype.getCorrectionFactor = function () {
              return this.m_correctionFactor;
            }),
            (e.prototype.setLinearOffset = function (t) {
              (t.x == this.m_linearOffset.x && t.y == this.m_linearOffset.y) ||
                (this.m_bodyA.setAwake(!0),
                this.m_bodyB.setAwake(!0),
                this.m_linearOffset.set(t));
            }),
            (e.prototype.getLinearOffset = function () {
              return this.m_linearOffset;
            }),
            (e.prototype.setAngularOffset = function (t) {
              t != this.m_angularOffset &&
                (this.m_bodyA.setAwake(!0),
                this.m_bodyB.setAwake(!0),
                (this.m_angularOffset = t));
            }),
            (e.prototype.getAngularOffset = function () {
              return this.m_angularOffset;
            }),
            (e.prototype.getAnchorA = function () {
              return this.m_bodyA.getPosition();
            }),
            (e.prototype.getAnchorB = function () {
              return this.m_bodyB.getPosition();
            }),
            (e.prototype.getReactionForce = function (t) {
              return td.mulNumVec2(t, this.m_linearImpulse);
            }),
            (e.prototype.getReactionTorque = function (t) {
              return t * this.m_angularImpulse;
            }),
            (e.prototype.initVelocityConstraints = function (t) {
              (this.m_localCenterA = this.m_bodyA.m_sweep.localCenter),
                (this.m_localCenterB = this.m_bodyB.m_sweep.localCenter),
                (this.m_invMassA = this.m_bodyA.m_invMass),
                (this.m_invMassB = this.m_bodyB.m_invMass),
                (this.m_invIA = this.m_bodyA.m_invI),
                (this.m_invIB = this.m_bodyB.m_invI);
              var e = this.m_bodyA.c_position.c,
                i = this.m_bodyA.c_position.a,
                r = this.m_bodyA.c_velocity.v,
                n = this.m_bodyA.c_velocity.w,
                o = this.m_bodyB.c_position.c,
                s = this.m_bodyB.c_position.a,
                a = this.m_bodyB.c_velocity.v,
                h = this.m_bodyB.c_velocity.w,
                u = sp.neo(i),
                l = sp.neo(s);
              (this.m_rA = sp.mulVec2(
                u,
                td.sub(this.m_linearOffset, this.m_localCenterA)
              )),
                (this.m_rB = sp.mulVec2(l, td.neg(this.m_localCenterB)));
              var c = this.m_invMassA,
                d = this.m_invMassB,
                p = this.m_invIA,
                _ = this.m_invIB,
                f = new of();
              if (
                ((f.ex.x =
                  c +
                  d +
                  p * this.m_rA.y * this.m_rA.y +
                  _ * this.m_rB.y * this.m_rB.y),
                (f.ex.y =
                  -p * this.m_rA.x * this.m_rA.y -
                  _ * this.m_rB.x * this.m_rB.y),
                (f.ey.x = f.ex.y),
                (f.ey.y =
                  c +
                  d +
                  p * this.m_rA.x * this.m_rA.x +
                  _ * this.m_rB.x * this.m_rB.x),
                (this.m_linearMass = f.getInverse()),
                (this.m_angularMass = p + _),
                this.m_angularMass > 0 &&
                  (this.m_angularMass = 1 / this.m_angularMass),
                (this.m_linearError = td.zero()),
                this.m_linearError.addCombine(1, o, 1, this.m_rB),
                this.m_linearError.subCombine(1, e, 1, this.m_rA),
                (this.m_angularError = s - i - this.m_angularOffset),
                t.warmStarting)
              ) {
                this.m_linearImpulse.mul(t.dtRatio),
                  (this.m_angularImpulse *= t.dtRatio);
                var m = td.neo(this.m_linearImpulse.x, this.m_linearImpulse.y);
                r.subMul(c, m),
                  (n -=
                    p *
                    (td.crossVec2Vec2(this.m_rA, m) + this.m_angularImpulse)),
                  a.addMul(d, m),
                  (h +=
                    _ *
                    (td.crossVec2Vec2(this.m_rB, m) + this.m_angularImpulse));
              } else
                this.m_linearImpulse.setZero(), (this.m_angularImpulse = 0);
              (this.m_bodyA.c_velocity.v = r),
                (this.m_bodyA.c_velocity.w = n),
                (this.m_bodyB.c_velocity.v = a),
                (this.m_bodyB.c_velocity.w = h);
            }),
            (e.prototype.solveVelocityConstraints = function (t) {
              var e = this.m_bodyA.c_velocity.v,
                i = this.m_bodyA.c_velocity.w,
                r = this.m_bodyB.c_velocity.v,
                n = this.m_bodyB.c_velocity.w,
                o = this.m_invMassA,
                s = this.m_invMassB,
                a = this.m_invIA,
                h = this.m_invIB,
                u = t.dt,
                l = t.inv_dt,
                c = n - i + l * this.m_correctionFactor * this.m_angularError,
                d = -this.m_angularMass * c,
                p = this.m_angularImpulse,
                _ = u * this.m_maxTorque;
              (this.m_angularImpulse = Yc(this.m_angularImpulse + d, -_, _)),
                (i -= a * (d = this.m_angularImpulse - p)),
                (n += h * d),
                (c = td.zero()).addCombine(
                  1,
                  r,
                  1,
                  td.crossNumVec2(n, this.m_rB)
                ),
                c.subCombine(1, e, 1, td.crossNumVec2(i, this.m_rA)),
                c.addMul(l * this.m_correctionFactor, this.m_linearError),
                (d = td.neg(of.mulVec2(this.m_linearMass, c))),
                (p = td.clone(this.m_linearImpulse)),
                this.m_linearImpulse.add(d),
                (_ = u * this.m_maxForce),
                this.m_linearImpulse.clamp(_),
                (d = td.sub(this.m_linearImpulse, p)),
                e.subMul(o, d),
                (i -= a * td.crossVec2Vec2(this.m_rA, d)),
                r.addMul(s, d),
                (n += h * td.crossVec2Vec2(this.m_rB, d)),
                (this.m_bodyA.c_velocity.v = e),
                (this.m_bodyA.c_velocity.w = i),
                (this.m_bodyB.c_velocity.v = r),
                (this.m_bodyB.c_velocity.w = n);
            }),
            (e.prototype.solvePositionConstraints = function (t) {
              return !0;
            }),
            (e.TYPE = "motor-joint"),
            e
          );
        })(Vp),
        Uy = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        Gy = function () {
          return (
            (Gy =
              Object.assign ||
              function (t) {
                for (var e, i = 1, r = arguments.length; i < r; i++)
                  for (var n in (e = arguments[i]))
                    Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
                return t;
              }),
            Gy.apply(this, arguments)
          );
        },
        Vy = "undefined" != typeof ASSERT && ASSERT,
        jy = "undefined" != typeof CONSTRUCTOR_FACTORY && CONSTRUCTOR_FACTORY,
        zy = Math.PI,
        Xy = { maxForce: 0, frequencyHz: 5, dampingRatio: 0.7 },
        Hy = (function (t) {
          function e(i, r, n, o) {
            var s = this;
            return !jy || s instanceof e
              ? ((i = Vc(i, Xy)),
                (r = (s = t.call(this, i, r, n) || this).m_bodyA),
                (n = s.m_bodyB),
                (s.m_type = e.TYPE),
                Vy &&
                  console.assert(
                    Number.isFinite(i.maxForce) && i.maxForce >= 0
                  ),
                Vy &&
                  console.assert(
                    Number.isFinite(i.frequencyHz) && i.frequencyHz >= 0
                  ),
                Vy &&
                  console.assert(
                    Number.isFinite(i.dampingRatio) && i.dampingRatio >= 0
                  ),
                td.isValid(o)
                  ? (s.m_targetA = td.clone(o))
                  : td.isValid(i.target)
                  ? (s.m_targetA = td.clone(i.target))
                  : (s.m_targetA = td.zero()),
                (s.m_localAnchorB = _p.mulTVec2(n.getTransform(), s.m_targetA)),
                (s.m_maxForce = i.maxForce),
                (s.m_impulse = td.zero()),
                (s.m_frequencyHz = i.frequencyHz),
                (s.m_dampingRatio = i.dampingRatio),
                (s.m_beta = 0),
                (s.m_gamma = 0),
                (s.m_rB = td.zero()),
                (s.m_localCenterB = td.zero()),
                (s.m_invMassB = 0),
                (s.m_invIB = 0),
                (s.m_mass = new of()),
                (s.m_C = td.zero()),
                s)
              : new e(i, r, n, o);
          }
          return (
            Uy(e, t),
            (e.prototype._serialize = function () {
              return {
                type: this.m_type,
                bodyA: this.m_bodyA,
                bodyB: this.m_bodyB,
                collideConnected: this.m_collideConnected,
                target: this.m_targetA,
                maxForce: this.m_maxForce,
                frequencyHz: this.m_frequencyHz,
                dampingRatio: this.m_dampingRatio,
                _localAnchorB: this.m_localAnchorB,
              };
            }),
            (e._deserialize = function (t, i, r) {
              ((t = Gy({}, t)).bodyA = r(Lp, t.bodyA, i)),
                (t.bodyB = r(Lp, t.bodyB, i)),
                (t.target = td.clone(t.target));
              var n = new e(t);
              return t._localAnchorB && (n.m_localAnchorB = t._localAnchorB), n;
            }),
            (e.prototype._reset = function (t) {
              Number.isFinite(t.maxForce) && (this.m_maxForce = t.maxForce),
                Number.isFinite(t.frequencyHz) &&
                  (this.m_frequencyHz = t.frequencyHz),
                Number.isFinite(t.dampingRatio) &&
                  (this.m_dampingRatio = t.dampingRatio);
            }),
            (e.prototype.setTarget = function (t) {
              td.areEqual(t, this.m_targetA) ||
                (this.m_bodyB.setAwake(!0), this.m_targetA.set(t));
            }),
            (e.prototype.getTarget = function () {
              return this.m_targetA;
            }),
            (e.prototype.setMaxForce = function (t) {
              this.m_maxForce = t;
            }),
            (e.prototype.getMaxForce = function () {
              return this.m_maxForce;
            }),
            (e.prototype.setFrequency = function (t) {
              this.m_frequencyHz = t;
            }),
            (e.prototype.getFrequency = function () {
              return this.m_frequencyHz;
            }),
            (e.prototype.setDampingRatio = function (t) {
              this.m_dampingRatio = t;
            }),
            (e.prototype.getDampingRatio = function () {
              return this.m_dampingRatio;
            }),
            (e.prototype.getAnchorA = function () {
              return td.clone(this.m_targetA);
            }),
            (e.prototype.getAnchorB = function () {
              return this.m_bodyB.getWorldPoint(this.m_localAnchorB);
            }),
            (e.prototype.getReactionForce = function (t) {
              return td.mulNumVec2(t, this.m_impulse);
            }),
            (e.prototype.getReactionTorque = function (t) {
              return 0 * t;
            }),
            (e.prototype.shiftOrigin = function (t) {
              this.m_targetA.sub(t);
            }),
            (e.prototype.initVelocityConstraints = function (t) {
              (this.m_localCenterB = this.m_bodyB.m_sweep.localCenter),
                (this.m_invMassB = this.m_bodyB.m_invMass),
                (this.m_invIB = this.m_bodyB.m_invI);
              var e = this.m_bodyB.c_position,
                i = this.m_bodyB.c_velocity,
                r = e.c,
                n = e.a,
                o = i.v,
                s = i.w,
                a = sp.neo(n),
                h = this.m_bodyB.getMass(),
                u = 2 * zy * this.m_frequencyHz,
                l = 2 * h * this.m_dampingRatio * u,
                c = h * (u * u),
                d = t.dt;
              Vy && console.assert(l + d * c > zc),
                (this.m_gamma = d * (l + d * c)),
                0 != this.m_gamma && (this.m_gamma = 1 / this.m_gamma),
                (this.m_beta = d * c * this.m_gamma),
                (this.m_rB = sp.mulVec2(
                  a,
                  td.sub(this.m_localAnchorB, this.m_localCenterB)
                ));
              var p = new of();
              (p.ex.x =
                this.m_invMassB +
                this.m_invIB * this.m_rB.y * this.m_rB.y +
                this.m_gamma),
                (p.ex.y = -this.m_invIB * this.m_rB.x * this.m_rB.y),
                (p.ey.x = p.ex.y),
                (p.ey.y =
                  this.m_invMassB +
                  this.m_invIB * this.m_rB.x * this.m_rB.x +
                  this.m_gamma),
                (this.m_mass = p.getInverse()),
                this.m_C.setVec2(r),
                this.m_C.addCombine(1, this.m_rB, -1, this.m_targetA),
                this.m_C.mul(this.m_beta),
                (s *= 0.98),
                t.warmStarting
                  ? (this.m_impulse.mul(t.dtRatio),
                    o.addMul(this.m_invMassB, this.m_impulse),
                    (s +=
                      this.m_invIB *
                      td.crossVec2Vec2(this.m_rB, this.m_impulse)))
                  : this.m_impulse.setZero(),
                i.v.setVec2(o),
                (i.w = s);
            }),
            (e.prototype.solveVelocityConstraints = function (t) {
              var e = this.m_bodyB.c_velocity,
                i = td.clone(e.v),
                r = e.w,
                n = td.crossNumVec2(r, this.m_rB);
              n.add(i),
                n.addCombine(1, this.m_C, this.m_gamma, this.m_impulse),
                n.neg();
              var o = of.mulVec2(this.m_mass, n),
                s = td.clone(this.m_impulse);
              this.m_impulse.add(o);
              var a = t.dt * this.m_maxForce;
              this.m_impulse.clamp(a),
                (o = td.sub(this.m_impulse, s)),
                i.addMul(this.m_invMassB, o),
                (r += this.m_invIB * td.crossVec2Vec2(this.m_rB, o)),
                e.v.setVec2(i),
                (e.w = r);
            }),
            (e.prototype.solvePositionConstraints = function (t) {
              return !0;
            }),
            (e.TYPE = "mouse-joint"),
            e
          );
        })(Vp),
        Yy = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        Wy = function () {
          return (
            (Wy =
              Object.assign ||
              function (t) {
                for (var e, i = 1, r = arguments.length; i < r; i++)
                  for (var n in (e = arguments[i]))
                    Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
                return t;
              }),
            Wy.apply(this, arguments)
          );
        },
        qy = "undefined" != typeof ASSERT && ASSERT,
        $y = "undefined" != typeof CONSTRUCTOR_FACTORY && CONSTRUCTOR_FACTORY,
        Ky = Math.abs,
        Jy = { collideConnected: !0 },
        Zy = (function (t) {
          function e(i, r, n, o, s, a, h, u) {
            var l = this;
            return !$y || l instanceof e
              ? ((i = Vc(i, Jy)),
                (r = (l = t.call(this, i, r, n) || this).m_bodyA),
                (n = l.m_bodyB),
                (l.m_type = e.TYPE),
                (l.m_groundAnchorA = td.clone(
                  o || i.groundAnchorA || td.neo(-1, 1)
                )),
                (l.m_groundAnchorB = td.clone(
                  s || i.groundAnchorB || td.neo(1, 1)
                )),
                (l.m_localAnchorA = td.clone(
                  a ? r.getLocalPoint(a) : i.localAnchorA || td.neo(-1, 0)
                )),
                (l.m_localAnchorB = td.clone(
                  h ? n.getLocalPoint(h) : i.localAnchorB || td.neo(1, 0)
                )),
                (l.m_lengthA = Number.isFinite(i.lengthA)
                  ? i.lengthA
                  : td.distance(a, o)),
                (l.m_lengthB = Number.isFinite(i.lengthB)
                  ? i.lengthB
                  : td.distance(h, s)),
                (l.m_ratio = Number.isFinite(u) ? u : i.ratio),
                qy && console.assert(u > zc),
                (l.m_constant = l.m_lengthA + l.m_ratio * l.m_lengthB),
                (l.m_impulse = 0),
                l)
              : new e(i, r, n, o, s, a, h, u);
          }
          return (
            Yy(e, t),
            (e.prototype._serialize = function () {
              return {
                type: this.m_type,
                bodyA: this.m_bodyA,
                bodyB: this.m_bodyB,
                collideConnected: this.m_collideConnected,
                groundAnchorA: this.m_groundAnchorA,
                groundAnchorB: this.m_groundAnchorB,
                localAnchorA: this.m_localAnchorA,
                localAnchorB: this.m_localAnchorB,
                lengthA: this.m_lengthA,
                lengthB: this.m_lengthB,
                ratio: this.m_ratio,
              };
            }),
            (e._deserialize = function (t, i, r) {
              return (
                ((t = Wy({}, t)).bodyA = r(Lp, t.bodyA, i)),
                (t.bodyB = r(Lp, t.bodyB, i)),
                new e(t)
              );
            }),
            (e.prototype._reset = function (t) {
              td.isValid(t.groundAnchorA) &&
                this.m_groundAnchorA.set(t.groundAnchorA),
                td.isValid(t.groundAnchorB) &&
                  this.m_groundAnchorB.set(t.groundAnchorB),
                td.isValid(t.localAnchorA)
                  ? this.m_localAnchorA.set(t.localAnchorA)
                  : td.isValid(t.anchorA) &&
                    this.m_localAnchorA.set(
                      this.m_bodyA.getLocalPoint(t.anchorA)
                    ),
                td.isValid(t.localAnchorB)
                  ? this.m_localAnchorB.set(t.localAnchorB)
                  : td.isValid(t.anchorB) &&
                    this.m_localAnchorB.set(
                      this.m_bodyB.getLocalPoint(t.anchorB)
                    ),
                Number.isFinite(t.lengthA) && (this.m_lengthA = t.lengthA),
                Number.isFinite(t.lengthB) && (this.m_lengthB = t.lengthB),
                Number.isFinite(t.ratio) && (this.m_ratio = t.ratio);
            }),
            (e.prototype.getGroundAnchorA = function () {
              return this.m_groundAnchorA;
            }),
            (e.prototype.getGroundAnchorB = function () {
              return this.m_groundAnchorB;
            }),
            (e.prototype.getLengthA = function () {
              return this.m_lengthA;
            }),
            (e.prototype.getLengthB = function () {
              return this.m_lengthB;
            }),
            (e.prototype.getRatio = function () {
              return this.m_ratio;
            }),
            (e.prototype.getCurrentLengthA = function () {
              var t = this.m_bodyA.getWorldPoint(this.m_localAnchorA),
                e = this.m_groundAnchorA;
              return td.distance(t, e);
            }),
            (e.prototype.getCurrentLengthB = function () {
              var t = this.m_bodyB.getWorldPoint(this.m_localAnchorB),
                e = this.m_groundAnchorB;
              return td.distance(t, e);
            }),
            (e.prototype.shiftOrigin = function (t) {
              this.m_groundAnchorA.sub(t), this.m_groundAnchorB.sub(t);
            }),
            (e.prototype.getAnchorA = function () {
              return this.m_bodyA.getWorldPoint(this.m_localAnchorA);
            }),
            (e.prototype.getAnchorB = function () {
              return this.m_bodyB.getWorldPoint(this.m_localAnchorB);
            }),
            (e.prototype.getReactionForce = function (t) {
              return td.mulNumVec2(this.m_impulse, this.m_uB).mul(t);
            }),
            (e.prototype.getReactionTorque = function (t) {
              return 0;
            }),
            (e.prototype.initVelocityConstraints = function (t) {
              (this.m_localCenterA = this.m_bodyA.m_sweep.localCenter),
                (this.m_localCenterB = this.m_bodyB.m_sweep.localCenter),
                (this.m_invMassA = this.m_bodyA.m_invMass),
                (this.m_invMassB = this.m_bodyB.m_invMass),
                (this.m_invIA = this.m_bodyA.m_invI),
                (this.m_invIB = this.m_bodyB.m_invI);
              var e = this.m_bodyA.c_position.c,
                i = this.m_bodyA.c_position.a,
                r = this.m_bodyA.c_velocity.v,
                n = this.m_bodyA.c_velocity.w,
                o = this.m_bodyB.c_position.c,
                s = this.m_bodyB.c_position.a,
                a = this.m_bodyB.c_velocity.v,
                h = this.m_bodyB.c_velocity.w,
                u = sp.neo(i),
                l = sp.neo(s);
              (this.m_rA = sp.mulVec2(
                u,
                td.sub(this.m_localAnchorA, this.m_localCenterA)
              )),
                (this.m_rB = sp.mulVec2(
                  l,
                  td.sub(this.m_localAnchorB, this.m_localCenterB)
                )),
                (this.m_uA = td.sub(
                  td.add(e, this.m_rA),
                  this.m_groundAnchorA
                )),
                (this.m_uB = td.sub(
                  td.add(o, this.m_rB),
                  this.m_groundAnchorB
                ));
              var c = this.m_uA.length(),
                d = this.m_uB.length();
              c > 10 * hd.linearSlop
                ? this.m_uA.mul(1 / c)
                : this.m_uA.setZero(),
                d > 10 * hd.linearSlop
                  ? this.m_uB.mul(1 / d)
                  : this.m_uB.setZero();
              var p = td.crossVec2Vec2(this.m_rA, this.m_uA),
                _ = td.crossVec2Vec2(this.m_rB, this.m_uB),
                f = this.m_invMassA + this.m_invIA * p * p,
                m = this.m_invMassB + this.m_invIB * _ * _;
              if (
                ((this.m_mass = f + this.m_ratio * this.m_ratio * m),
                this.m_mass > 0 && (this.m_mass = 1 / this.m_mass),
                t.warmStarting)
              ) {
                this.m_impulse *= t.dtRatio;
                var y = td.mulNumVec2(-this.m_impulse, this.m_uA),
                  g = td.mulNumVec2(-this.m_ratio * this.m_impulse, this.m_uB);
                r.addMul(this.m_invMassA, y),
                  (n += this.m_invIA * td.crossVec2Vec2(this.m_rA, y)),
                  a.addMul(this.m_invMassB, g),
                  (h += this.m_invIB * td.crossVec2Vec2(this.m_rB, g));
              } else this.m_impulse = 0;
              (this.m_bodyA.c_velocity.v = r),
                (this.m_bodyA.c_velocity.w = n),
                (this.m_bodyB.c_velocity.v = a),
                (this.m_bodyB.c_velocity.w = h);
            }),
            (e.prototype.solveVelocityConstraints = function (t) {
              var e = this.m_bodyA.c_velocity.v,
                i = this.m_bodyA.c_velocity.w,
                r = this.m_bodyB.c_velocity.v,
                n = this.m_bodyB.c_velocity.w,
                o = td.add(e, td.crossNumVec2(i, this.m_rA)),
                s = td.add(r, td.crossNumVec2(n, this.m_rB)),
                a = -td.dot(this.m_uA, o) - this.m_ratio * td.dot(this.m_uB, s),
                h = -this.m_mass * a;
              this.m_impulse += h;
              var u = td.mulNumVec2(-h, this.m_uA),
                l = td.mulNumVec2(-this.m_ratio * h, this.m_uB);
              e.addMul(this.m_invMassA, u),
                (i += this.m_invIA * td.crossVec2Vec2(this.m_rA, u)),
                r.addMul(this.m_invMassB, l),
                (n += this.m_invIB * td.crossVec2Vec2(this.m_rB, l)),
                (this.m_bodyA.c_velocity.v = e),
                (this.m_bodyA.c_velocity.w = i),
                (this.m_bodyB.c_velocity.v = r),
                (this.m_bodyB.c_velocity.w = n);
            }),
            (e.prototype.solvePositionConstraints = function (t) {
              var e = this.m_bodyA.c_position.c,
                i = this.m_bodyA.c_position.a,
                r = this.m_bodyB.c_position.c,
                n = this.m_bodyB.c_position.a,
                o = sp.neo(i),
                s = sp.neo(n),
                a = sp.mulVec2(
                  o,
                  td.sub(this.m_localAnchorA, this.m_localCenterA)
                ),
                h = sp.mulVec2(
                  s,
                  td.sub(this.m_localAnchorB, this.m_localCenterB)
                ),
                u = td.sub(td.add(e, this.m_rA), this.m_groundAnchorA),
                l = td.sub(td.add(r, this.m_rB), this.m_groundAnchorB),
                c = u.length(),
                d = l.length();
              c > 10 * hd.linearSlop ? u.mul(1 / c) : u.setZero(),
                d > 10 * hd.linearSlop ? l.mul(1 / d) : l.setZero();
              var p = td.crossVec2Vec2(a, u),
                _ = td.crossVec2Vec2(h, l),
                f = this.m_invMassA + this.m_invIA * p * p,
                m = this.m_invMassB + this.m_invIB * _ * _,
                y = f + this.m_ratio * this.m_ratio * m;
              y > 0 && (y = 1 / y);
              var g = this.m_constant - c - this.m_ratio * d,
                v = Ky(g),
                b = -y * g,
                x = td.mulNumVec2(-b, u),
                w = td.mulNumVec2(-this.m_ratio * b, l);
              return (
                e.addMul(this.m_invMassA, x),
                (i += this.m_invIA * td.crossVec2Vec2(a, x)),
                r.addMul(this.m_invMassB, w),
                (n += this.m_invIB * td.crossVec2Vec2(h, w)),
                (this.m_bodyA.c_position.c = e),
                (this.m_bodyA.c_position.a = i),
                (this.m_bodyB.c_position.c = r),
                (this.m_bodyB.c_position.a = n),
                v < hd.linearSlop
              );
            }),
            (e.TYPE = "pulley-joint"),
            e
          );
        })(Vp),
        Qy = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        tg = function () {
          return (
            (tg =
              Object.assign ||
              function (t) {
                for (var e, i = 1, r = arguments.length; i < r; i++)
                  for (var n in (e = arguments[i]))
                    Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
                return t;
              }),
            tg.apply(this, arguments)
          );
        },
        eg = "undefined" != typeof CONSTRUCTOR_FACTORY && CONSTRUCTOR_FACTORY,
        ig = Math.min;
      !(function (t) {
        (t[(t.inactiveLimit = 0)] = "inactiveLimit"),
          (t[(t.atLowerLimit = 1)] = "atLowerLimit"),
          (t[(t.atUpperLimit = 2)] = "atUpperLimit"),
          (t[(t.equalLimits = 3)] = "equalLimits");
      })(Ay || (Ay = {}));
      var rg,
        ng = { maxLength: 0 },
        og = (function (t) {
          function e(i, r, n, o) {
            var s = this;
            return !eg || s instanceof e
              ? ((i = Vc(i, ng)),
                (r = (s = t.call(this, i, r, n) || this).m_bodyA),
                (n = s.m_bodyB),
                (s.m_type = e.TYPE),
                (s.m_localAnchorA = td.clone(
                  o ? r.getLocalPoint(o) : i.localAnchorA || td.neo(-1, 0)
                )),
                (s.m_localAnchorB = td.clone(
                  o ? n.getLocalPoint(o) : i.localAnchorB || td.neo(1, 0)
                )),
                (s.m_maxLength = i.maxLength),
                (s.m_mass = 0),
                (s.m_impulse = 0),
                (s.m_length = 0),
                (s.m_state = Ay.inactiveLimit),
                s)
              : new e(i, r, n, o);
          }
          return (
            Qy(e, t),
            (e.prototype._serialize = function () {
              return {
                type: this.m_type,
                bodyA: this.m_bodyA,
                bodyB: this.m_bodyB,
                collideConnected: this.m_collideConnected,
                localAnchorA: this.m_localAnchorA,
                localAnchorB: this.m_localAnchorB,
                maxLength: this.m_maxLength,
              };
            }),
            (e._deserialize = function (t, i, r) {
              return (
                ((t = tg({}, t)).bodyA = r(Lp, t.bodyA, i)),
                (t.bodyB = r(Lp, t.bodyB, i)),
                new e(t)
              );
            }),
            (e.prototype._reset = function (t) {
              Number.isFinite(t.maxLength) && (this.m_maxLength = t.maxLength);
            }),
            (e.prototype.getLocalAnchorA = function () {
              return this.m_localAnchorA;
            }),
            (e.prototype.getLocalAnchorB = function () {
              return this.m_localAnchorB;
            }),
            (e.prototype.setMaxLength = function (t) {
              this.m_maxLength = t;
            }),
            (e.prototype.getMaxLength = function () {
              return this.m_maxLength;
            }),
            (e.prototype.getLimitState = function () {
              return this.m_state;
            }),
            (e.prototype.getAnchorA = function () {
              return this.m_bodyA.getWorldPoint(this.m_localAnchorA);
            }),
            (e.prototype.getAnchorB = function () {
              return this.m_bodyB.getWorldPoint(this.m_localAnchorB);
            }),
            (e.prototype.getReactionForce = function (t) {
              return td.mulNumVec2(this.m_impulse, this.m_u).mul(t);
            }),
            (e.prototype.getReactionTorque = function (t) {
              return 0;
            }),
            (e.prototype.initVelocityConstraints = function (t) {
              (this.m_localCenterA = this.m_bodyA.m_sweep.localCenter),
                (this.m_localCenterB = this.m_bodyB.m_sweep.localCenter),
                (this.m_invMassA = this.m_bodyA.m_invMass),
                (this.m_invMassB = this.m_bodyB.m_invMass),
                (this.m_invIA = this.m_bodyA.m_invI),
                (this.m_invIB = this.m_bodyB.m_invI);
              var e = this.m_bodyA.c_position.c,
                i = this.m_bodyA.c_position.a,
                r = this.m_bodyA.c_velocity.v,
                n = this.m_bodyA.c_velocity.w,
                o = this.m_bodyB.c_position.c,
                s = this.m_bodyB.c_position.a,
                a = this.m_bodyB.c_velocity.v,
                h = this.m_bodyB.c_velocity.w,
                u = sp.neo(i),
                l = sp.neo(s);
              (this.m_rA = sp.mulSub(
                u,
                this.m_localAnchorA,
                this.m_localCenterA
              )),
                (this.m_rB = sp.mulSub(
                  l,
                  this.m_localAnchorB,
                  this.m_localCenterB
                )),
                (this.m_u = td.zero()),
                this.m_u.addCombine(1, o, 1, this.m_rB),
                this.m_u.subCombine(1, e, 1, this.m_rA),
                (this.m_length = this.m_u.length());
              var c = this.m_length - this.m_maxLength;
              if (
                ((this.m_state = c > 0 ? Ay.atUpperLimit : Ay.inactiveLimit),
                !(this.m_length > hd.linearSlop))
              )
                return (
                  this.m_u.setZero(),
                  (this.m_mass = 0),
                  void (this.m_impulse = 0)
                );
              this.m_u.mul(1 / this.m_length);
              var d = td.crossVec2Vec2(this.m_rA, this.m_u),
                p = td.crossVec2Vec2(this.m_rB, this.m_u),
                _ =
                  this.m_invMassA +
                  this.m_invIA * d * d +
                  this.m_invMassB +
                  this.m_invIB * p * p;
              if (((this.m_mass = 0 != _ ? 1 / _ : 0), t.warmStarting)) {
                this.m_impulse *= t.dtRatio;
                var f = td.mulNumVec2(this.m_impulse, this.m_u);
                r.subMul(this.m_invMassA, f),
                  (n -= this.m_invIA * td.crossVec2Vec2(this.m_rA, f)),
                  a.addMul(this.m_invMassB, f),
                  (h += this.m_invIB * td.crossVec2Vec2(this.m_rB, f));
              } else this.m_impulse = 0;
              this.m_bodyA.c_velocity.v.setVec2(r),
                (this.m_bodyA.c_velocity.w = n),
                this.m_bodyB.c_velocity.v.setVec2(a),
                (this.m_bodyB.c_velocity.w = h);
            }),
            (e.prototype.solveVelocityConstraints = function (t) {
              var e = this.m_bodyA.c_velocity.v,
                i = this.m_bodyA.c_velocity.w,
                r = this.m_bodyB.c_velocity.v,
                n = this.m_bodyB.c_velocity.w,
                o = td.addCrossNumVec2(e, i, this.m_rA),
                s = td.addCrossNumVec2(r, n, this.m_rB),
                a = this.m_length - this.m_maxLength,
                h = td.dot(this.m_u, td.sub(s, o));
              a < 0 && (h += t.inv_dt * a);
              var u = -this.m_mass * h,
                l = this.m_impulse;
              (this.m_impulse = ig(0, this.m_impulse + u)),
                (u = this.m_impulse - l);
              var c = td.mulNumVec2(u, this.m_u);
              e.subMul(this.m_invMassA, c),
                (i -= this.m_invIA * td.crossVec2Vec2(this.m_rA, c)),
                r.addMul(this.m_invMassB, c),
                (n += this.m_invIB * td.crossVec2Vec2(this.m_rB, c)),
                (this.m_bodyA.c_velocity.v = e),
                (this.m_bodyA.c_velocity.w = i),
                (this.m_bodyB.c_velocity.v = r),
                (this.m_bodyB.c_velocity.w = n);
            }),
            (e.prototype.solvePositionConstraints = function (t) {
              var e = this.m_bodyA.c_position.c,
                i = this.m_bodyA.c_position.a,
                r = this.m_bodyB.c_position.c,
                n = this.m_bodyB.c_position.a,
                o = sp.neo(i),
                s = sp.neo(n),
                a = sp.mulSub(o, this.m_localAnchorA, this.m_localCenterA),
                h = sp.mulSub(s, this.m_localAnchorB, this.m_localCenterB),
                u = td.zero();
              u.addCombine(1, r, 1, h), u.subCombine(1, e, 1, a);
              var l = u.normalize(),
                c = l - this.m_maxLength;
              c = Yc(c, 0, hd.maxLinearCorrection);
              var d = -this.m_mass * c,
                p = td.mulNumVec2(d, u);
              return (
                e.subMul(this.m_invMassA, p),
                (i -= this.m_invIA * td.crossVec2Vec2(a, p)),
                r.addMul(this.m_invMassB, p),
                (n += this.m_invIB * td.crossVec2Vec2(h, p)),
                this.m_bodyA.c_position.c.setVec2(e),
                (this.m_bodyA.c_position.a = i),
                this.m_bodyB.c_position.c.setVec2(r),
                (this.m_bodyB.c_position.a = n),
                l - this.m_maxLength < hd.linearSlop
              );
            }),
            (e.TYPE = "rope-joint"),
            e
          );
        })(Vp),
        sg = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        ag = function () {
          return (
            (ag =
              Object.assign ||
              function (t) {
                for (var e, i = 1, r = arguments.length; i < r; i++)
                  for (var n in (e = arguments[i]))
                    Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
                return t;
              }),
            ag.apply(this, arguments)
          );
        },
        hg = "undefined" != typeof CONSTRUCTOR_FACTORY && CONSTRUCTOR_FACTORY,
        ug = Math.abs,
        lg = Math.PI,
        cg = { frequencyHz: 0, dampingRatio: 0 },
        dg = (function (t) {
          function e(i, r, n, o) {
            var s = this;
            return !hg || s instanceof e
              ? ((i = Vc(i, cg)),
                (r = (s = t.call(this, i, r, n) || this).m_bodyA),
                (n = s.m_bodyB),
                (s.m_type = e.TYPE),
                (s.m_localAnchorA = td.clone(
                  o ? r.getLocalPoint(o) : i.localAnchorA || td.zero()
                )),
                (s.m_localAnchorB = td.clone(
                  o ? n.getLocalPoint(o) : i.localAnchorB || td.zero()
                )),
                (s.m_referenceAngle = Number.isFinite(i.referenceAngle)
                  ? i.referenceAngle
                  : n.getAngle() - r.getAngle()),
                (s.m_frequencyHz = i.frequencyHz),
                (s.m_dampingRatio = i.dampingRatio),
                (s.m_impulse = new fm()),
                (s.m_bias = 0),
                (s.m_gamma = 0),
                (s.m_mass = new uy()),
                s)
              : new e(i, r, n, o);
          }
          return (
            sg(e, t),
            (e.prototype._serialize = function () {
              return {
                type: this.m_type,
                bodyA: this.m_bodyA,
                bodyB: this.m_bodyB,
                collideConnected: this.m_collideConnected,
                frequencyHz: this.m_frequencyHz,
                dampingRatio: this.m_dampingRatio,
                localAnchorA: this.m_localAnchorA,
                localAnchorB: this.m_localAnchorB,
                referenceAngle: this.m_referenceAngle,
              };
            }),
            (e._deserialize = function (t, i, r) {
              return (
                ((t = ag({}, t)).bodyA = r(Lp, t.bodyA, i)),
                (t.bodyB = r(Lp, t.bodyB, i)),
                new e(t)
              );
            }),
            (e.prototype._reset = function (t) {
              t.anchorA
                ? this.m_localAnchorA.setVec2(
                    this.m_bodyA.getLocalPoint(t.anchorA)
                  )
                : t.localAnchorA && this.m_localAnchorA.setVec2(t.localAnchorA),
                t.anchorB
                  ? this.m_localAnchorB.setVec2(
                      this.m_bodyB.getLocalPoint(t.anchorB)
                    )
                  : t.localAnchorB &&
                    this.m_localAnchorB.setVec2(t.localAnchorB),
                Number.isFinite(t.frequencyHz) &&
                  (this.m_frequencyHz = t.frequencyHz),
                Number.isFinite(t.dampingRatio) &&
                  (this.m_dampingRatio = t.dampingRatio);
            }),
            (e.prototype.getLocalAnchorA = function () {
              return this.m_localAnchorA;
            }),
            (e.prototype.getLocalAnchorB = function () {
              return this.m_localAnchorB;
            }),
            (e.prototype.getReferenceAngle = function () {
              return this.m_referenceAngle;
            }),
            (e.prototype.setFrequency = function (t) {
              this.m_frequencyHz = t;
            }),
            (e.prototype.getFrequency = function () {
              return this.m_frequencyHz;
            }),
            (e.prototype.setDampingRatio = function (t) {
              this.m_dampingRatio = t;
            }),
            (e.prototype.getDampingRatio = function () {
              return this.m_dampingRatio;
            }),
            (e.prototype.getAnchorA = function () {
              return this.m_bodyA.getWorldPoint(this.m_localAnchorA);
            }),
            (e.prototype.getAnchorB = function () {
              return this.m_bodyB.getWorldPoint(this.m_localAnchorB);
            }),
            (e.prototype.getReactionForce = function (t) {
              return td.neo(this.m_impulse.x, this.m_impulse.y).mul(t);
            }),
            (e.prototype.getReactionTorque = function (t) {
              return t * this.m_impulse.z;
            }),
            (e.prototype.initVelocityConstraints = function (t) {
              (this.m_localCenterA = this.m_bodyA.m_sweep.localCenter),
                (this.m_localCenterB = this.m_bodyB.m_sweep.localCenter),
                (this.m_invMassA = this.m_bodyA.m_invMass),
                (this.m_invMassB = this.m_bodyB.m_invMass),
                (this.m_invIA = this.m_bodyA.m_invI),
                (this.m_invIB = this.m_bodyB.m_invI);
              var e = this.m_bodyA.c_position.a,
                i = this.m_bodyA.c_velocity.v,
                r = this.m_bodyA.c_velocity.w,
                n = this.m_bodyB.c_position.a,
                o = this.m_bodyB.c_velocity.v,
                s = this.m_bodyB.c_velocity.w,
                a = sp.neo(e),
                h = sp.neo(n);
              (this.m_rA = sp.mulVec2(
                a,
                td.sub(this.m_localAnchorA, this.m_localCenterA)
              )),
                (this.m_rB = sp.mulVec2(
                  h,
                  td.sub(this.m_localAnchorB, this.m_localCenterB)
                ));
              var u = this.m_invMassA,
                l = this.m_invMassB,
                c = this.m_invIA,
                d = this.m_invIB,
                p = new uy();
              if (
                ((p.ex.x =
                  u +
                  l +
                  this.m_rA.y * this.m_rA.y * c +
                  this.m_rB.y * this.m_rB.y * d),
                (p.ey.x =
                  -this.m_rA.y * this.m_rA.x * c -
                  this.m_rB.y * this.m_rB.x * d),
                (p.ez.x = -this.m_rA.y * c - this.m_rB.y * d),
                (p.ex.y = p.ey.x),
                (p.ey.y =
                  u +
                  l +
                  this.m_rA.x * this.m_rA.x * c +
                  this.m_rB.x * this.m_rB.x * d),
                (p.ez.y = this.m_rA.x * c + this.m_rB.x * d),
                (p.ex.z = p.ez.x),
                (p.ey.z = p.ez.y),
                (p.ez.z = c + d),
                this.m_frequencyHz > 0)
              ) {
                p.getInverse22(this.m_mass);
                var _ = c + d,
                  f = _ > 0 ? 1 / _ : 0,
                  m = n - e - this.m_referenceAngle,
                  y = 2 * lg * this.m_frequencyHz,
                  g = 2 * f * this.m_dampingRatio * y,
                  v = f * y * y,
                  b = t.dt;
                (this.m_gamma = b * (g + b * v)),
                  (this.m_gamma = 0 != this.m_gamma ? 1 / this.m_gamma : 0),
                  (this.m_bias = m * b * v * this.m_gamma),
                  (_ += this.m_gamma),
                  (this.m_mass.ez.z = 0 != _ ? 1 / _ : 0);
              } else
                0 == p.ez.z
                  ? (p.getInverse22(this.m_mass),
                    (this.m_gamma = 0),
                    (this.m_bias = 0))
                  : (p.getSymInverse33(this.m_mass),
                    (this.m_gamma = 0),
                    (this.m_bias = 0));
              if (t.warmStarting) {
                this.m_impulse.mul(t.dtRatio);
                var x = td.neo(this.m_impulse.x, this.m_impulse.y);
                i.subMul(u, x),
                  (r -=
                    c * (td.crossVec2Vec2(this.m_rA, x) + this.m_impulse.z)),
                  o.addMul(l, x),
                  (s +=
                    d * (td.crossVec2Vec2(this.m_rB, x) + this.m_impulse.z));
              } else this.m_impulse.setZero();
              (this.m_bodyA.c_velocity.v = i),
                (this.m_bodyA.c_velocity.w = r),
                (this.m_bodyB.c_velocity.v = o),
                (this.m_bodyB.c_velocity.w = s);
            }),
            (e.prototype.solveVelocityConstraints = function (t) {
              var e = this.m_bodyA.c_velocity.v,
                i = this.m_bodyA.c_velocity.w,
                r = this.m_bodyB.c_velocity.v,
                n = this.m_bodyB.c_velocity.w,
                o = this.m_invMassA,
                s = this.m_invMassB,
                a = this.m_invIA,
                h = this.m_invIB;
              if (this.m_frequencyHz > 0) {
                var u = n - i,
                  l =
                    -this.m_mass.ez.z *
                    (u + this.m_bias + this.m_gamma * this.m_impulse.z);
                (this.m_impulse.z += l),
                  (i -= a * l),
                  (n += h * l),
                  (p = td.zero()).addCombine(
                    1,
                    r,
                    1,
                    td.crossNumVec2(n, this.m_rB)
                  ),
                  p.subCombine(1, e, 1, td.crossNumVec2(i, this.m_rA));
                var c = td.neg(uy.mulVec2(this.m_mass, p));
                (this.m_impulse.x += c.x), (this.m_impulse.y += c.y);
                var d = td.clone(c);
                e.subMul(o, d),
                  (i -= a * td.crossVec2Vec2(this.m_rA, d)),
                  r.addMul(s, d),
                  (n += h * td.crossVec2Vec2(this.m_rB, d));
              } else {
                var p;
                (p = td.zero()).addCombine(
                  1,
                  r,
                  1,
                  td.crossNumVec2(n, this.m_rB)
                ),
                  p.subCombine(1, e, 1, td.crossNumVec2(i, this.m_rA)),
                  (u = n - i);
                var _ = new fm(p.x, p.y, u),
                  f = fm.neg(uy.mulVec3(this.m_mass, _));
                this.m_impulse.add(f),
                  (d = td.neo(f.x, f.y)),
                  e.subMul(o, d),
                  (i -= a * (td.crossVec2Vec2(this.m_rA, d) + f.z)),
                  r.addMul(s, d),
                  (n += h * (td.crossVec2Vec2(this.m_rB, d) + f.z));
              }
              (this.m_bodyA.c_velocity.v = e),
                (this.m_bodyA.c_velocity.w = i),
                (this.m_bodyB.c_velocity.v = r),
                (this.m_bodyB.c_velocity.w = n);
            }),
            (e.prototype.solvePositionConstraints = function (t) {
              var e,
                i,
                r = this.m_bodyA.c_position.c,
                n = this.m_bodyA.c_position.a,
                o = this.m_bodyB.c_position.c,
                s = this.m_bodyB.c_position.a,
                a = sp.neo(n),
                h = sp.neo(s),
                u = this.m_invMassA,
                l = this.m_invMassB,
                c = this.m_invIA,
                d = this.m_invIB,
                p = sp.mulVec2(
                  a,
                  td.sub(this.m_localAnchorA, this.m_localCenterA)
                ),
                _ = sp.mulVec2(
                  h,
                  td.sub(this.m_localAnchorB, this.m_localCenterB)
                ),
                f = new uy();
              if (
                ((f.ex.x = u + l + p.y * p.y * c + _.y * _.y * d),
                (f.ey.x = -p.y * p.x * c - _.y * _.x * d),
                (f.ez.x = -p.y * c - _.y * d),
                (f.ex.y = f.ey.x),
                (f.ey.y = u + l + p.x * p.x * c + _.x * _.x * d),
                (f.ez.y = p.x * c + _.x * d),
                (f.ex.z = f.ez.x),
                (f.ey.z = f.ez.y),
                (f.ez.z = c + d),
                this.m_frequencyHz > 0)
              ) {
                (y = td.zero()).addCombine(1, o, 1, _),
                  y.subCombine(1, r, 1, p),
                  (e = y.length()),
                  (i = 0);
                var m = td.neg(f.solve22(y));
                r.subMul(u, m),
                  (n -= c * td.crossVec2Vec2(p, m)),
                  o.addMul(l, m),
                  (s += d * td.crossVec2Vec2(_, m));
              } else {
                var y;
                (y = td.zero()).addCombine(1, o, 1, _),
                  y.subCombine(1, r, 1, p);
                var g = s - n - this.m_referenceAngle;
                (e = y.length()), (i = ug(g));
                var v = new fm(y.x, y.y, g),
                  b = new fm();
                if (f.ez.z > 0) b = fm.neg(f.solve33(v));
                else {
                  var x = td.neg(f.solve22(y));
                  b.set(x.x, x.y, 0);
                }
                (m = td.neo(b.x, b.y)),
                  r.subMul(u, m),
                  (n -= c * (td.crossVec2Vec2(p, m) + b.z)),
                  o.addMul(l, m),
                  (s += d * (td.crossVec2Vec2(_, m) + b.z));
              }
              return (
                (this.m_bodyA.c_position.c = r),
                (this.m_bodyA.c_position.a = n),
                (this.m_bodyB.c_position.c = o),
                (this.m_bodyB.c_position.a = s),
                e <= hd.linearSlop && i <= hd.angularSlop
              );
            }),
            (e.TYPE = "weld-joint"),
            e
          );
        })(Vp),
        pg = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        _g = function () {
          return (
            (_g =
              Object.assign ||
              function (t) {
                for (var e, i = 1, r = arguments.length; i < r; i++)
                  for (var n in (e = arguments[i]))
                    Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
                return t;
              }),
            _g.apply(this, arguments)
          );
        },
        fg = "undefined" != typeof CONSTRUCTOR_FACTORY && CONSTRUCTOR_FACTORY,
        mg = Math.abs,
        yg = Math.PI,
        gg = {
          enableMotor: !1,
          maxMotorTorque: 0,
          motorSpeed: 0,
          frequencyHz: 2,
          dampingRatio: 0.7,
        },
        vg = (function (t) {
          function e(i, r, n, o, s) {
            var a = this;
            return !fg || a instanceof e
              ? ((i = Vc(i, gg)),
                (r = (a = t.call(this, i, r, n) || this).m_bodyA),
                (n = a.m_bodyB),
                (a.m_ax = td.zero()),
                (a.m_ay = td.zero()),
                (a.m_type = e.TYPE),
                (a.m_localAnchorA = td.clone(
                  o ? r.getLocalPoint(o) : i.localAnchorA || td.zero()
                )),
                (a.m_localAnchorB = td.clone(
                  o ? n.getLocalPoint(o) : i.localAnchorB || td.zero()
                )),
                td.isValid(s)
                  ? (a.m_localXAxisA = r.getLocalVector(s))
                  : td.isValid(i.localAxisA)
                  ? (a.m_localXAxisA = td.clone(i.localAxisA))
                  : td.isValid(i.localAxis)
                  ? (a.m_localXAxisA = td.clone(i.localAxis))
                  : (a.m_localXAxisA = td.neo(1, 0)),
                (a.m_localYAxisA = td.crossNumVec2(1, a.m_localXAxisA)),
                (a.m_mass = 0),
                (a.m_impulse = 0),
                (a.m_motorMass = 0),
                (a.m_motorImpulse = 0),
                (a.m_springMass = 0),
                (a.m_springImpulse = 0),
                (a.m_maxMotorTorque = i.maxMotorTorque),
                (a.m_motorSpeed = i.motorSpeed),
                (a.m_enableMotor = i.enableMotor),
                (a.m_frequencyHz = i.frequencyHz),
                (a.m_dampingRatio = i.dampingRatio),
                (a.m_bias = 0),
                (a.m_gamma = 0),
                a)
              : new e(i, r, n, o, s);
          }
          return (
            pg(e, t),
            (e.prototype._serialize = function () {
              return {
                type: this.m_type,
                bodyA: this.m_bodyA,
                bodyB: this.m_bodyB,
                collideConnected: this.m_collideConnected,
                enableMotor: this.m_enableMotor,
                maxMotorTorque: this.m_maxMotorTorque,
                motorSpeed: this.m_motorSpeed,
                frequencyHz: this.m_frequencyHz,
                dampingRatio: this.m_dampingRatio,
                localAnchorA: this.m_localAnchorA,
                localAnchorB: this.m_localAnchorB,
                localAxisA: this.m_localXAxisA,
              };
            }),
            (e._deserialize = function (t, i, r) {
              return (
                ((t = _g({}, t)).bodyA = r(Lp, t.bodyA, i)),
                (t.bodyB = r(Lp, t.bodyB, i)),
                new e(t)
              );
            }),
            (e.prototype._reset = function (t) {
              t.anchorA
                ? this.m_localAnchorA.setVec2(
                    this.m_bodyA.getLocalPoint(t.anchorA)
                  )
                : t.localAnchorA && this.m_localAnchorA.setVec2(t.localAnchorA),
                t.anchorB
                  ? this.m_localAnchorB.setVec2(
                      this.m_bodyB.getLocalPoint(t.anchorB)
                    )
                  : t.localAnchorB &&
                    this.m_localAnchorB.setVec2(t.localAnchorB),
                t.localAxisA &&
                  (this.m_localXAxisA.setVec2(t.localAxisA),
                  this.m_localYAxisA.setVec2(td.crossNumVec2(1, t.localAxisA))),
                void 0 !== t.enableMotor &&
                  (this.m_enableMotor = t.enableMotor),
                Number.isFinite(t.maxMotorTorque) &&
                  (this.m_maxMotorTorque = t.maxMotorTorque),
                Number.isFinite(t.motorSpeed) &&
                  (this.m_motorSpeed = t.motorSpeed),
                Number.isFinite(t.frequencyHz) &&
                  (this.m_frequencyHz = t.frequencyHz),
                Number.isFinite(t.dampingRatio) &&
                  (this.m_dampingRatio = t.dampingRatio);
            }),
            (e.prototype.getLocalAnchorA = function () {
              return this.m_localAnchorA;
            }),
            (e.prototype.getLocalAnchorB = function () {
              return this.m_localAnchorB;
            }),
            (e.prototype.getLocalAxisA = function () {
              return this.m_localXAxisA;
            }),
            (e.prototype.getJointTranslation = function () {
              var t = this.m_bodyA,
                e = this.m_bodyB,
                i = t.getWorldPoint(this.m_localAnchorA),
                r = e.getWorldPoint(this.m_localAnchorB),
                n = td.sub(r, i),
                o = t.getWorldVector(this.m_localXAxisA);
              return td.dot(n, o);
            }),
            (e.prototype.getJointSpeed = function () {
              var t = this.m_bodyA.m_angularVelocity;
              return this.m_bodyB.m_angularVelocity - t;
            }),
            (e.prototype.isMotorEnabled = function () {
              return this.m_enableMotor;
            }),
            (e.prototype.enableMotor = function (t) {
              t != this.m_enableMotor &&
                (this.m_bodyA.setAwake(!0),
                this.m_bodyB.setAwake(!0),
                (this.m_enableMotor = t));
            }),
            (e.prototype.setMotorSpeed = function (t) {
              t != this.m_motorSpeed &&
                (this.m_bodyA.setAwake(!0),
                this.m_bodyB.setAwake(!0),
                (this.m_motorSpeed = t));
            }),
            (e.prototype.getMotorSpeed = function () {
              return this.m_motorSpeed;
            }),
            (e.prototype.setMaxMotorTorque = function (t) {
              t != this.m_maxMotorTorque &&
                (this.m_bodyA.setAwake(!0),
                this.m_bodyB.setAwake(!0),
                (this.m_maxMotorTorque = t));
            }),
            (e.prototype.getMaxMotorTorque = function () {
              return this.m_maxMotorTorque;
            }),
            (e.prototype.getMotorTorque = function (t) {
              return t * this.m_motorImpulse;
            }),
            (e.prototype.setSpringFrequencyHz = function (t) {
              this.m_frequencyHz = t;
            }),
            (e.prototype.getSpringFrequencyHz = function () {
              return this.m_frequencyHz;
            }),
            (e.prototype.setSpringDampingRatio = function (t) {
              this.m_dampingRatio = t;
            }),
            (e.prototype.getSpringDampingRatio = function () {
              return this.m_dampingRatio;
            }),
            (e.prototype.getAnchorA = function () {
              return this.m_bodyA.getWorldPoint(this.m_localAnchorA);
            }),
            (e.prototype.getAnchorB = function () {
              return this.m_bodyB.getWorldPoint(this.m_localAnchorB);
            }),
            (e.prototype.getReactionForce = function (t) {
              return td
                .combine(
                  this.m_impulse,
                  this.m_ay,
                  this.m_springImpulse,
                  this.m_ax
                )
                .mul(t);
            }),
            (e.prototype.getReactionTorque = function (t) {
              return t * this.m_motorImpulse;
            }),
            (e.prototype.initVelocityConstraints = function (t) {
              (this.m_localCenterA = this.m_bodyA.m_sweep.localCenter),
                (this.m_localCenterB = this.m_bodyB.m_sweep.localCenter),
                (this.m_invMassA = this.m_bodyA.m_invMass),
                (this.m_invMassB = this.m_bodyB.m_invMass),
                (this.m_invIA = this.m_bodyA.m_invI),
                (this.m_invIB = this.m_bodyB.m_invI);
              var e = this.m_invMassA,
                i = this.m_invMassB,
                r = this.m_invIA,
                n = this.m_invIB,
                o = this.m_bodyA.c_position.c,
                s = this.m_bodyA.c_position.a,
                a = this.m_bodyA.c_velocity.v,
                h = this.m_bodyA.c_velocity.w,
                u = this.m_bodyB.c_position.c,
                l = this.m_bodyB.c_position.a,
                c = this.m_bodyB.c_velocity.v,
                d = this.m_bodyB.c_velocity.w,
                p = sp.neo(s),
                _ = sp.neo(l),
                f = sp.mulVec2(
                  p,
                  td.sub(this.m_localAnchorA, this.m_localCenterA)
                ),
                m = sp.mulVec2(
                  _,
                  td.sub(this.m_localAnchorB, this.m_localCenterB)
                ),
                y = td.zero();
              if (
                (y.addCombine(1, u, 1, m),
                y.subCombine(1, o, 1, f),
                (this.m_ay = sp.mulVec2(p, this.m_localYAxisA)),
                (this.m_sAy = td.crossVec2Vec2(td.add(y, f), this.m_ay)),
                (this.m_sBy = td.crossVec2Vec2(m, this.m_ay)),
                (this.m_mass =
                  e +
                  i +
                  r * this.m_sAy * this.m_sAy +
                  n * this.m_sBy * this.m_sBy),
                this.m_mass > 0 && (this.m_mass = 1 / this.m_mass),
                (this.m_springMass = 0),
                (this.m_bias = 0),
                (this.m_gamma = 0),
                this.m_frequencyHz > 0)
              ) {
                (this.m_ax = sp.mulVec2(p, this.m_localXAxisA)),
                  (this.m_sAx = td.crossVec2Vec2(td.add(y, f), this.m_ax)),
                  (this.m_sBx = td.crossVec2Vec2(m, this.m_ax));
                var g =
                  e +
                  i +
                  r * this.m_sAx * this.m_sAx +
                  n * this.m_sBx * this.m_sBx;
                if (g > 0) {
                  this.m_springMass = 1 / g;
                  var v = td.dot(y, this.m_ax),
                    b = 2 * yg * this.m_frequencyHz,
                    x = 2 * this.m_springMass * this.m_dampingRatio * b,
                    w = this.m_springMass * b * b,
                    T = t.dt;
                  (this.m_gamma = T * (x + T * w)),
                    this.m_gamma > 0 && (this.m_gamma = 1 / this.m_gamma),
                    (this.m_bias = v * T * w * this.m_gamma),
                    (this.m_springMass = g + this.m_gamma),
                    this.m_springMass > 0 &&
                      (this.m_springMass = 1 / this.m_springMass);
                }
              } else this.m_springImpulse = 0;
              if (
                (this.m_enableMotor
                  ? ((this.m_motorMass = r + n),
                    this.m_motorMass > 0 &&
                      (this.m_motorMass = 1 / this.m_motorMass))
                  : ((this.m_motorMass = 0), (this.m_motorImpulse = 0)),
                t.warmStarting)
              ) {
                (this.m_impulse *= t.dtRatio),
                  (this.m_springImpulse *= t.dtRatio),
                  (this.m_motorImpulse *= t.dtRatio);
                var A = td.combine(
                    this.m_impulse,
                    this.m_ay,
                    this.m_springImpulse,
                    this.m_ax
                  ),
                  S =
                    this.m_impulse * this.m_sAy +
                    this.m_springImpulse * this.m_sAx +
                    this.m_motorImpulse,
                  E =
                    this.m_impulse * this.m_sBy +
                    this.m_springImpulse * this.m_sBx +
                    this.m_motorImpulse;
                a.subMul(this.m_invMassA, A),
                  (h -= this.m_invIA * S),
                  c.addMul(this.m_invMassB, A),
                  (d += this.m_invIB * E);
              } else
                (this.m_impulse = 0),
                  (this.m_springImpulse = 0),
                  (this.m_motorImpulse = 0);
              this.m_bodyA.c_velocity.v.setVec2(a),
                (this.m_bodyA.c_velocity.w = h),
                this.m_bodyB.c_velocity.v.setVec2(c),
                (this.m_bodyB.c_velocity.w = d);
            }),
            (e.prototype.solveVelocityConstraints = function (t) {
              var e = this.m_invMassA,
                i = this.m_invMassB,
                r = this.m_invIA,
                n = this.m_invIB,
                o = this.m_bodyA.c_velocity.v,
                s = this.m_bodyA.c_velocity.w,
                a = this.m_bodyB.c_velocity.v,
                h = this.m_bodyB.c_velocity.w,
                u =
                  td.dot(this.m_ax, a) -
                  td.dot(this.m_ax, o) +
                  this.m_sBx * h -
                  this.m_sAx * s,
                l =
                  -this.m_springMass *
                  (u + this.m_bias + this.m_gamma * this.m_springImpulse);
              this.m_springImpulse += l;
              var c = td.mulNumVec2(l, this.m_ax),
                d = l * this.m_sAx,
                p = l * this.m_sBx;
              o.subMul(e, c),
                (s -= r * d),
                a.addMul(i, c),
                (u = (h += n * p) - s - this.m_motorSpeed),
                (l = -this.m_motorMass * u);
              var _ = this.m_motorImpulse,
                f = t.dt * this.m_maxMotorTorque;
              (this.m_motorImpulse = Yc(this.m_motorImpulse + l, -f, f)),
                (s -= r * (l = this.m_motorImpulse - _)),
                (h += n * l),
                (u =
                  td.dot(this.m_ay, a) -
                  td.dot(this.m_ay, o) +
                  this.m_sBy * h -
                  this.m_sAy * s),
                (l = -this.m_mass * u),
                (this.m_impulse += l),
                (c = td.mulNumVec2(l, this.m_ay)),
                (d = l * this.m_sAy),
                (p = l * this.m_sBy),
                o.subMul(e, c),
                (s -= r * d),
                a.addMul(i, c),
                (h += n * p),
                this.m_bodyA.c_velocity.v.setVec2(o),
                (this.m_bodyA.c_velocity.w = s),
                this.m_bodyB.c_velocity.v.setVec2(a),
                (this.m_bodyB.c_velocity.w = h);
            }),
            (e.prototype.solvePositionConstraints = function (t) {
              var e = this.m_bodyA.c_position.c,
                i = this.m_bodyA.c_position.a,
                r = this.m_bodyB.c_position.c,
                n = this.m_bodyB.c_position.a,
                o = sp.neo(i),
                s = sp.neo(n),
                a = sp.mulVec2(
                  o,
                  td.sub(this.m_localAnchorA, this.m_localCenterA)
                ),
                h = sp.mulVec2(
                  s,
                  td.sub(this.m_localAnchorB, this.m_localCenterB)
                ),
                u = td.zero();
              u.addCombine(1, r, 1, h), u.subCombine(1, e, 1, a);
              var l = sp.mulVec2(o, this.m_localYAxisA),
                c = td.crossVec2Vec2(td.add(u, a), l),
                d = td.crossVec2Vec2(h, l),
                p = td.dot(u, l),
                _ =
                  this.m_invMassA +
                  this.m_invMassB +
                  this.m_invIA * this.m_sAy * this.m_sAy +
                  this.m_invIB * this.m_sBy * this.m_sBy,
                f = 0 != _ ? -p / _ : 0,
                m = td.mulNumVec2(f, l),
                y = f * c,
                g = f * d;
              return (
                e.subMul(this.m_invMassA, m),
                (i -= this.m_invIA * y),
                r.addMul(this.m_invMassB, m),
                (n += this.m_invIB * g),
                this.m_bodyA.c_position.c.setVec2(e),
                (this.m_bodyA.c_position.a = i),
                this.m_bodyB.c_position.c.setVec2(r),
                (this.m_bodyB.c_position.a = n),
                mg(p) <= hd.linearSlop
              );
            }),
            (e.TYPE = "wheel-joint"),
            e
          );
        })(Vp),
        bg = function () {
          return (
            (bg =
              Object.assign ||
              function (t) {
                for (var e, i = 1, r = arguments.length; i < r; i++)
                  for (var n in (e = arguments[i]))
                    Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
                return t;
              }),
            bg.apply(this, arguments)
          );
        },
        xg = 0,
        wg = { World: dm, Body: Lp, Joint: Vp, Fixture: Cp, Shape: bp },
        Tg = {
          Vec2: td,
          Vec3: fm,
          World: dm,
          Body: Lp,
          Joint: Vp,
          Fixture: Cp,
          Shape: bp,
        },
        Ag =
          (((rg = {})[Lp.STATIC] = Lp),
          (rg[Lp.DYNAMIC] = Lp),
          (rg[Lp.KINEMATIC] = Lp),
          (rg[Cm.TYPE] = Cm),
          (rg[Gm.TYPE] = Gm),
          (rg[bm.TYPE] = bm),
          (rg[Wm.TYPE] = Wm),
          (rg[ey.TYPE] = ey),
          (rg[ay.TYPE] = ay),
          (rg[Ry.TYPE] = Ry),
          (rg[Ly.TYPE] = Ly),
          (rg[Hy.TYPE] = Hy),
          (rg[Ey.TYPE] = Ey),
          (rg[Zy.TYPE] = Zy),
          (rg[my.TYPE] = my),
          (rg[og.TYPE] = og),
          (rg[dg.TYPE] = dg),
          (rg[vg.TYPE] = vg),
          rg),
        Sg = {
          rootClass: dm,
          preSerialize: function (t) {
            return t;
          },
          postSerialize: function (t, e) {
            return t;
          },
          preDeserialize: function (t) {
            return t;
          },
          postDeserialize: function (t, e) {
            return t;
          },
        },
        Eg = function (t) {
          var e = this;
          (this.toJson = function (t) {
            var i = e.options.preSerialize,
              r = e.options.postSerialize,
              n = [],
              o = [t],
              s = {};
            function a(t, e) {
              if (((t.__sid = t.__sid || ++xg), !s[t.__sid])) {
                o.push(t);
                var i = { refIndex: n.length + o.length, refType: e };
                s[t.__sid] = i;
              }
              return s[t.__sid];
            }
            function h(t, e) {
              if (
                (void 0 === e && (e = !1), "object" != typeof t || null === t)
              )
                return t;
              if ("function" == typeof t._serialize) {
                if (!e)
                  for (var n in wg) if (t instanceof wg[n]) return a(t, n);
                (s = (o = i((o = t)))._serialize()), (t = r(s, o));
              }
              var o, s;
              if (Array.isArray(t)) {
                for (var u = [], l = 0; l < t.length; l++) u[l] = h(t[l]);
                t = u;
              } else {
                for (var l in ((u = {}), t))
                  t.hasOwnProperty(l) && (u[l] = h(t[l]));
                t = u;
              }
              return t;
            }
            for (; o.length; ) {
              var u = h(o.shift(), !0);
              n.push(u);
            }
            return n;
          }),
            (this.fromJson = function (t) {
              var i = e.options.preDeserialize,
                r = e.options.postDeserialize,
                n = e.options.rootClass,
                o = {};
              function s(t, e, n) {
                if (
                  ((t && t._deserialize) || (t = Ag[e.type]),
                  t && t._deserialize)
                ) {
                  e = i(e);
                  var o = (0, t._deserialize)(e, n, a);
                  return r(o, e);
                }
              }
              function a(e, i, r) {
                if (!i.refIndex || !i.refType) return s(e, i, r);
                var n = i;
                Tg[n.refType] && (e = Tg[n.refType]);
                var a = n.refIndex;
                if (!o[a]) {
                  var h = s(e, t[a], r);
                  o[a] = h;
                }
                return o[a];
              }
              return s(n, t[0], null);
            }),
            (this.options = bg(bg({}, Sg), t));
        },
        Cg = new Eg({ rootClass: dm });
      (Eg.fromJson = Cg.fromJson), (Eg.toJson = Cg.toJson);
      var Mg = (function () {
        function t() {
          (this.width = 80),
            (this.height = 60),
            (this.x = 0),
            (this.y = -10),
            (this.scaleY = -1),
            (this.hz = 60),
            (this.speed = 1),
            (this.background = "#222222"),
            (this.activeKeys = {}),
            (this.step = function (t, e) {}),
            (this.keydown = function (t, e) {}),
            (this.keyup = function (t, e) {});
        }
        return (
          (t.mount = function (t) {
            throw new Error("Not implemented");
          }),
          (t.start = function (e) {
            var i = t.mount();
            return i.start(e), i;
          }),
          (t.prototype.color = function (t, e, i) {
            return (
              "rgb(" +
              (t = (256 * t) | 0) +
              ", " +
              (e = (256 * e) | 0) +
              ", " +
              (i = (256 * i) | 0) +
              ")"
            );
          }),
          t
        );
      })();
      function Pg(t, e) {
        var i, r;
        "function" == typeof t
          ? ((i = t), (r = e))
          : "function" == typeof e
          ? ((i = e), (r = t))
          : (r = null != t ? t : e);
        var n = Mg.mount(r);
        if (!i) return n;
        var o = i(n) || n.world;
        n.start(o);
      }
      var Bg = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        Og = "undefined" != typeof CONSTRUCTOR_FACTORY && CONSTRUCTOR_FACTORY,
        Rg = (function (t) {
          function e(i, r, n, o) {
            var s = this;
            return !Og || s instanceof e
              ? ((s = t.call(this) || this)._setAsBox(i, r, n, o), s)
              : new e(i, r, n, o);
          }
          return Bg(e, t), (e.TYPE = "polygon"), e;
        })(Gm),
        Ig = Rg,
        kg = "undefined" != typeof ASSERT && ASSERT;
      hm.addType(Wm.TYPE, Wm.TYPE, function (t, e, i, r, n, o, s) {
        kg && console.assert(i.getType() == Wm.TYPE),
          kg && console.assert(o.getType() == Wm.TYPE),
          Ng(t, i.getShape(), e, o.getShape(), n);
      });
      var Fg = Ad(0, 0),
        Dg = Ad(0, 0),
        Ng = function (t, e, i, r, n) {
          (t.pointCount = 0), Jd(Fg, i, e.m_p), Jd(Dg, n, r.m_p);
          var o = Yd(Dg, Fg),
            s = e.m_radius + r.m_radius;
          o > s * s ||
            ((t.type = tf.e_circles),
            Ed(t.localPoint, e.m_p),
            Cd(t.localNormal),
            (t.pointCount = 1),
            Ed(t.points[0].localPoint, r.m_p),
            t.points[0].id.setFeatures(0, ef.e_vertex, 0, ef.e_vertex));
        },
        Lg = "undefined" != typeof ASSERT && ASSERT;
      hm.addType(bm.TYPE, Wm.TYPE, function (t, e, i, r, n, o, s) {
        Lg && console.assert(i.getType() == bm.TYPE),
          Lg && console.assert(o.getType() == Wm.TYPE);
        var a = i.getShape(),
          h = o.getShape();
        Hg(t, a, e, h, n);
      }),
        hm.addType(Cm.TYPE, Wm.TYPE, function (t, e, i, r, n, o, s) {
          Lg && console.assert(i.getType() == Cm.TYPE),
            Lg && console.assert(o.getType() == Wm.TYPE);
          var a = i.getShape(),
            h = new bm();
          a.getChildEdge(h, r);
          var u = h,
            l = o.getShape();
          Hg(t, u, e, l, n);
        });
      var Ug = Ad(0, 0),
        Gg = (Ad(0, 0), Ad(0, 0)),
        Vg = Ad(0, 0),
        jg = Ad(0, 0),
        zg = Ad(0, 0),
        Xg = Ad(0, 0),
        Hg = function (t, e, i, r, n) {
          (t.pointCount = 0), Qd(jg, n, i, r.m_p);
          var o = e.m_vertex1,
            s = e.m_vertex2;
          Od(Ug, s, o);
          var a = zd(Ug, s) - zd(Ug, jg),
            h = zd(Ug, jg) - zd(Ug, o),
            u = e.m_radius + r.m_radius;
          if (h <= 0) {
            if ((Ed(zg, o), Yd(jg, o) > u * u)) return;
            if (e.m_hasVertex0) {
              var l = e.m_vertex0,
                c = o;
              if ((Od(Gg, c, l), zd(Gg, c) - zd(Gg, jg) > 0)) return;
            }
            return (
              (t.type = tf.e_circles),
              Cd(t.localNormal),
              Ed(t.localPoint, zg),
              (t.pointCount = 1),
              Ed(t.points[0].localPoint, r.m_p),
              void t.points[0].id.setFeatures(0, ef.e_vertex, 0, ef.e_vertex)
            );
          }
          if (a <= 0) {
            if ((Ed(zg, s), Yd(jg, zg) > u * u)) return;
            if (e.m_hasVertex3) {
              var d = e.m_vertex3,
                p = s;
              if ((Od(Vg, d, p), zd(Vg, jg) - zd(Vg, p) > 0)) return;
            }
            return (
              (t.type = tf.e_circles),
              Cd(t.localNormal),
              Ed(t.localPoint, zg),
              (t.pointCount = 1),
              Ed(t.points[0].localPoint, r.m_p),
              void t.points[0].id.setFeatures(1, ef.e_vertex, 0, ef.e_vertex)
            );
          }
          var _ = Xd(Ug);
          Lg && console.assert(_ > 0),
            Nd(zg, a / _, o, h / _, s),
            Yd(jg, zg) > u * u ||
              (Vd(Xg, 1, Ug),
              zd(Xg, jg) - zd(Xg, o) < 0 && Md(Xg),
              Ud(Xg),
              (t.type = tf.e_faceA),
              Ed(t.localNormal, Xg),
              Ed(t.localPoint, o),
              (t.pointCount = 1),
              Ed(t.points[0].localPoint, r.m_p),
              t.points[0].id.setFeatures(0, ef.e_face, 0, ef.e_vertex));
        },
        Yg = "undefined" != typeof ASSERT && ASSERT,
        Wg = [new ff(), new ff()],
        qg = [new ff(), new ff()],
        $g = [new ff(), new ff()],
        Kg = Ad(0, 0),
        Jg = Ad(0, 0),
        Zg = Ad(0, 0),
        Qg = $d(0, 0, 0),
        tv = (Ad(0, 0), Ad(0, 0)),
        ev = Ad(0, 0),
        iv = Ad(0, 0),
        rv = Ad(0, 0),
        nv = Ad(0, 0),
        ov = Ad(0, 0),
        sv = Ad(0, 0),
        av = Ad(0, 0);
      function hv(t, e, i, r, n) {
        var o = t.m_count,
          s = i.m_count,
          a = t.m_normals,
          h = t.m_vertices,
          u = i.m_vertices;
        tp(Qg, r, e);
        for (var l = 0, c = -1 / 0, d = 0; d < o; ++d) {
          Wd(Zg, Qg.q, a[d]), Jd(Jg, Qg, h[d]);
          for (var p = 1 / 0, _ = 0; _ < s; ++_) {
            var f = zd(Zg, u[_]) - zd(Zg, Jg);
            f < p && (p = f);
          }
          p > c && ((c = p), (l = d));
        }
        (n.maxSeparation = c), (n.bestIndex = l);
      }
      hm.addType(Gm.TYPE, Gm.TYPE, function (t, e, i, r, n, o, s) {
        Yg && console.assert(i.getType() == Gm.TYPE),
          Yg && console.assert(o.getType() == Gm.TYPE),
          lv(t, i.getShape(), e, o.getShape(), n);
      });
      var uv = { maxSeparation: 0, bestIndex: 0 },
        lv = function (t, e, i, r, n) {
          t.pointCount = 0;
          var o = e.m_radius + r.m_radius;
          hv(e, i, r, n, uv);
          var s = uv.bestIndex,
            a = uv.maxSeparation;
          if (!(a > o)) {
            hv(r, n, e, i, uv);
            var h = uv.bestIndex,
              u = uv.maxSeparation;
            if (!(u > o)) {
              var l, c, d, p, _, f;
              u > a + 0.1 * hd.linearSlop
                ? ((l = r),
                  (c = e),
                  (d = n),
                  (p = i),
                  (_ = h),
                  (t.type = tf.e_faceB),
                  (f = !0))
                : ((l = e),
                  (c = r),
                  (d = i),
                  (p = n),
                  (_ = s),
                  (t.type = tf.e_faceA),
                  (f = !1)),
                Wg[0].recycle(),
                Wg[1].recycle(),
                (function (t, e, i, r, n, o) {
                  var s = e.m_normals,
                    a = n.m_count,
                    h = n.m_vertices,
                    u = n.m_normals;
                  Yg && console.assert(0 <= r && r < e.m_count),
                    (function (t, e, i, r) {
                      var n = e.c * r.x + e.s * r.y,
                        o = -e.s * r.x + e.c * r.y,
                        s = i.c * n - i.s * o,
                        a = i.s * n + i.c * o;
                      (t.x = s), (t.y = a);
                    })(av, o.q, i.q, s[r]);
                  for (var l = 0, c = 1 / 0, d = 0; d < a; ++d) {
                    var p = zd(av, u[d]);
                    p < c && ((c = p), (l = d));
                  }
                  var _ = l,
                    f = _ + 1 < a ? _ + 1 : 0;
                  Jd(t[0].v, o, h[_]),
                    t[0].id.setFeatures(r, ef.e_face, _, ef.e_vertex),
                    Jd(t[1].v, o, h[f]),
                    t[1].id.setFeatures(r, ef.e_face, f, ef.e_vertex);
                })(Wg, l, d, _, c, p);
              var m = l.m_count,
                y = l.m_vertices,
                g = _,
                v = _ + 1 < m ? _ + 1 : 0;
              Ed(tv, y[g]),
                Ed(ev, y[v]),
                Od(iv, ev, tv),
                Ud(iv),
                Gd(rv, iv, 1),
                Nd(nv, 0.5, tv, 0.5, ev),
                Wd(ov, d.q, iv),
                Gd(sv, ov, 1),
                Jd(tv, d, tv),
                Jd(ev, d, ev);
              var b = zd(sv, tv),
                x = -zd(ov, tv) + o,
                w = zd(ov, ev) + o;
              if (
                !(qg[0].recycle(),
                qg[1].recycle(),
                $g[0].recycle(),
                $g[1].recycle(),
                Sd(Kg, -ov.x, -ov.y),
                xf(qg, Wg, Kg, x, g) < 2 ||
                  (Sd(Kg, ov.x, ov.y), xf($g, qg, Kg, w, v) < 2))
              ) {
                Ed(t.localNormal, rv), Ed(t.localPoint, nv);
                for (var T = 0, A = 0; A < $g.length; ++A)
                  if (zd(sv, $g[A].v) - b <= o) {
                    var S = t.points[T];
                    Zd(S.localPoint, p, $g[A].v),
                      S.id.set($g[A].id),
                      f && S.id.swapFeatures(),
                      ++T;
                  }
                t.pointCount = T;
              }
            }
          }
        },
        cv = "undefined" != typeof ASSERT && ASSERT;
      hm.addType(Gm.TYPE, Wm.TYPE, function (t, e, i, r, n, o, s) {
        cv && console.assert(i.getType() == Gm.TYPE),
          cv && console.assert(o.getType() == Wm.TYPE),
          _v(t, i.getShape(), e, o.getShape(), n);
      });
      var dv = Ad(0, 0),
        pv = Ad(0, 0),
        _v = function (t, e, i, r, n) {
          (t.pointCount = 0), Qd(dv, n, i, r.m_p);
          for (
            var o = 0,
              s = -1 / 0,
              a = e.m_radius + r.m_radius,
              h = e.m_count,
              u = e.m_vertices,
              l = e.m_normals,
              c = 0;
            c < h;
            ++c
          ) {
            var d = zd(l[c], dv) - zd(l[c], u[c]);
            if (d > a) return;
            d > s && ((s = d), (o = c));
          }
          var p = o,
            _ = p + 1 < h ? p + 1 : 0,
            f = u[p],
            m = u[_];
          if (s < zc)
            return (
              (t.pointCount = 1),
              (t.type = tf.e_faceA),
              Ed(t.localNormal, l[o]),
              Nd(t.localPoint, 0.5, f, 0.5, m),
              Ed(t.points[0].localPoint, r.m_p),
              void t.points[0].id.setFeatures(0, ef.e_vertex, 0, ef.e_vertex)
            );
          var y = zd(dv, m) - zd(dv, f) - zd(f, m) + zd(f, f),
            g = zd(dv, f) - zd(dv, m) - zd(m, f) + zd(m, m);
          if (y <= 0) {
            if (Yd(dv, f) > a * a) return;
            (t.pointCount = 1),
              (t.type = tf.e_faceA),
              Od(t.localNormal, dv, f),
              Ud(t.localNormal),
              Ed(t.localPoint, f),
              Ed(t.points[0].localPoint, r.m_p),
              t.points[0].id.setFeatures(0, ef.e_vertex, 0, ef.e_vertex);
          } else if (g <= 0) {
            if (Yd(dv, m) > a * a) return;
            (t.pointCount = 1),
              (t.type = tf.e_faceA),
              Od(t.localNormal, dv, m),
              Ud(t.localNormal),
              Ed(t.localPoint, m),
              Ed(t.points[0].localPoint, r.m_p),
              t.points[0].id.setFeatures(0, ef.e_vertex, 0, ef.e_vertex);
          } else {
            if ((Nd(pv, 0.5, f, 0.5, m), zd(dv, l[p]) - zd(pv, l[p]) > a))
              return;
            (t.pointCount = 1),
              (t.type = tf.e_faceA),
              Ed(t.localNormal, l[p]),
              Ed(t.localPoint, pv),
              Ed(t.points[0].localPoint, r.m_p),
              t.points[0].id.setFeatures(0, ef.e_vertex, 0, ef.e_vertex);
          }
        },
        fv = "undefined" != typeof ASSERT && ASSERT,
        mv = Math.min;
      hm.addType(bm.TYPE, Gm.TYPE, function (t, e, i, r, n, o, s) {
        fv && console.assert(i.getType() == bm.TYPE),
          fv && console.assert(o.getType() == Gm.TYPE),
          jv(t, i.getShape(), e, o.getShape(), n);
      }),
        hm.addType(Cm.TYPE, Gm.TYPE, function (t, e, i, r, n, o, s) {
          fv && console.assert(i.getType() == Cm.TYPE),
            fv && console.assert(o.getType() == Gm.TYPE),
            i.getShape().getChildEdge(vv, r),
            jv(t, vv, e, o.getShape(), n);
        });
      var yv,
        gv,
        vv = new bm();
      !(function (t) {
        (t[(t.e_unknown = -1)] = "e_unknown"),
          (t[(t.e_edgeA = 1)] = "e_edgeA"),
          (t[(t.e_edgeB = 2)] = "e_edgeB");
      })(yv || (yv = {})),
        (function (t) {
          (t[(t.e_isolated = 0)] = "e_isolated"),
            (t[(t.e_concave = 1)] = "e_concave"),
            (t[(t.e_convex = 2)] = "e_convex");
        })(gv || (gv = {}));
      var bv = function () {},
        xv = (function () {
          function t() {
            (this.v1 = Ad(0, 0)),
              (this.v2 = Ad(0, 0)),
              (this.normal = Ad(0, 0)),
              (this.sideNormal1 = Ad(0, 0)),
              (this.sideNormal2 = Ad(0, 0));
          }
          return (
            (t.prototype.recycle = function () {
              Cd(this.v1),
                Cd(this.v2),
                Cd(this.normal),
                Cd(this.sideNormal1),
                Cd(this.sideNormal2);
            }),
            t
          );
        })(),
        wv = [new ff(), new ff()],
        Tv = [new ff(), new ff()],
        Av = [new ff(), new ff()],
        Sv = new bv(),
        Ev = new bv(),
        Cv = new (function () {
          (this.vertices = []), (this.normals = []), (this.count = 0);
          for (var t = 0; t < hd.maxPolygonVertices; t++)
            this.vertices.push(Ad(0, 0)), this.normals.push(Ad(0, 0));
        })(),
        Mv = new xv(),
        Pv = Ad(0, 0),
        Bv = Ad(0, 0),
        Ov = Ad(0, 0),
        Rv = Ad(0, 0),
        Iv = $d(0, 0, 0),
        kv = Ad(0, 0),
        Fv = Ad(0, 0),
        Dv = Ad(0, 0),
        Nv = Ad(0, 0),
        Lv = Ad(0, 0),
        Uv = Ad(0, 0),
        Gv = Ad(0, 0),
        Vv = Ad(0, 0),
        jv = function (t, e, i, r, n) {
          tp(Iv, i, n), Jd(Pv, Iv, r.m_centroid);
          var o = e.m_vertex0,
            s = e.m_vertex1,
            a = e.m_vertex2,
            h = e.m_vertex3,
            u = e.m_hasVertex0,
            l = e.m_hasVertex3;
          Od(Ov, a, s), Ud(Ov), Sd(Dv, Ov.y, -Ov.x);
          var c,
            d = zd(Dv, Pv) - zd(Dv, s),
            p = 0,
            _ = 0,
            f = !1,
            m = !1;
          Cd(Fv),
            Cd(Nv),
            u &&
              (Od(Bv, s, o),
              Ud(Bv),
              Sd(Fv, Bv.y, -Bv.x),
              (f = jd(Bv, Ov) >= 0),
              (p = td.dot(Fv, Pv) - td.dot(Fv, o))),
            l &&
              (Od(Rv, h, a),
              Ud(Rv),
              Sd(Nv, Rv.y, -Rv.x),
              (m = td.crossVec2Vec2(Ov, Rv) > 0),
              (_ = td.dot(Nv, Pv) - td.dot(Nv, a))),
            Cd(kv),
            Cd(Lv),
            Cd(Uv),
            u && l
              ? f && m
                ? (c = p >= 0 || d >= 0 || _ >= 0)
                  ? (Ed(kv, Dv), Ed(Lv, Fv), Ed(Uv, Nv))
                  : (Id(kv, -1, Dv), Id(Lv, -1, Dv), Id(Uv, -1, Dv))
                : f
                ? (c = p >= 0 || (d >= 0 && _ >= 0))
                  ? (Ed(kv, Dv), Ed(Lv, Fv), Ed(Uv, Dv))
                  : (Id(kv, -1, Dv), Id(Lv, -1, Nv), Id(Uv, -1, Dv))
                : m
                ? (c = _ >= 0 || (p >= 0 && d >= 0))
                  ? (Ed(kv, Dv), Ed(Lv, Dv), Ed(Uv, Nv))
                  : (Id(kv, -1, Dv), Id(Lv, -1, Dv), Id(Uv, -1, Fv))
                : (c = p >= 0 && d >= 0 && _ >= 0)
                ? (Ed(kv, Dv), Ed(Lv, Dv), Ed(Uv, Dv))
                : (Id(kv, -1, Dv), Id(Lv, -1, Nv), Id(Uv, -1, Fv))
              : u
              ? f
                ? (c = p >= 0 || d >= 0)
                  ? (Ed(kv, Dv), Ed(Lv, Fv), Id(Uv, -1, Dv))
                  : (Id(kv, -1, Dv), Ed(Lv, Dv), Id(Uv, -1, Dv))
                : (c = p >= 0 && d >= 0)
                ? (Ed(kv, Dv), Ed(Lv, Dv), Id(Uv, -1, Dv))
                : (Id(kv, -1, Dv), Ed(Lv, Dv), Id(Uv, -1, Fv))
              : l
              ? m
                ? (c = d >= 0 || _ >= 0)
                  ? (Ed(kv, Dv), Id(Lv, -1, Dv), Ed(Uv, Nv))
                  : (Id(kv, -1, Dv), Id(Lv, -1, Dv), Ed(Uv, Dv))
                : (c = d >= 0 && _ >= 0)
                ? (Ed(kv, Dv), Id(Lv, -1, Dv), Ed(Uv, Dv))
                : (Id(kv, -1, Dv), Id(Lv, -1, Nv), Ed(Uv, Dv))
              : (c = d >= 0)
              ? (Ed(kv, Dv), Id(Lv, -1, Dv), Id(Uv, -1, Dv))
              : (Id(kv, -1, Dv), Ed(Lv, Dv), Ed(Uv, Dv)),
            (Cv.count = r.m_count);
          for (var y = 0; y < r.m_count; ++y)
            Jd(Cv.vertices[y], Iv, r.m_vertices[y]),
              Wd(Cv.normals[y], Iv.q, r.m_normals[y]);
          var g = r.m_radius + e.m_radius;
          for (
            t.pointCount = 0,
              Sv.type = yv.e_edgeA,
              Sv.index = c ? 0 : 1,
              Sv.separation = 1 / 0,
              y = 0;
            y < Cv.count;
            ++y
          ) {
            var v = Cv.vertices[y];
            (b = zd(kv, v) - zd(kv, s)) < Sv.separation && (Sv.separation = b);
          }
          if (Sv.type != yv.e_unknown && !(Sv.separation > g)) {
            for (
              Ev.type = yv.e_unknown,
                Ev.index = -1,
                Ev.separation = -1 / 0,
                Sd(Gv, -kv.y, kv.x),
                y = 0;
              y < Cv.count;
              ++y
            ) {
              Id(Vv, -1, Cv.normals[y]);
              var b,
                x = zd(Vv, Cv.vertices[y]) - zd(Vv, s),
                w = zd(Vv, Cv.vertices[y]) - zd(Vv, a);
              if ((b = mv(x, w)) > g) {
                (Ev.type = yv.e_edgeB), (Ev.index = y), (Ev.separation = b);
                break;
              }
              if (zd(Vv, Gv) >= 0) {
                if (zd(Vv, kv) - zd(Uv, kv) < -hd.angularSlop) continue;
              } else if (zd(Vv, kv) - zd(Lv, kv) < -hd.angularSlop) continue;
              b > Ev.separation &&
                ((Ev.type = yv.e_edgeB), (Ev.index = y), (Ev.separation = b));
            }
            if (!(Ev.type != yv.e_unknown && Ev.separation > g)) {
              var T;
              if (
                ((T =
                  Ev.type == yv.e_unknown
                    ? Sv
                    : Ev.separation > 0.98 * Sv.separation + 0.001
                    ? Ev
                    : Sv),
                Av[0].recycle(),
                Av[1].recycle(),
                T.type == yv.e_edgeA)
              ) {
                t.type = tf.e_faceA;
                var A = 0,
                  S = zd(kv, Cv.normals[0]);
                for (y = 1; y < Cv.count; ++y) {
                  var E = zd(kv, Cv.normals[y]);
                  E < S && ((S = E), (A = y));
                }
                var C = A,
                  M = C + 1 < Cv.count ? C + 1 : 0;
                Ed(Av[0].v, Cv.vertices[C]),
                  Av[0].id.setFeatures(0, ef.e_face, C, ef.e_vertex),
                  Ed(Av[1].v, Cv.vertices[M]),
                  Av[1].id.setFeatures(0, ef.e_face, M, ef.e_vertex),
                  c
                    ? ((Mv.i1 = 0),
                      (Mv.i2 = 1),
                      Ed(Mv.v1, s),
                      Ed(Mv.v2, a),
                      Ed(Mv.normal, Dv))
                    : ((Mv.i1 = 1),
                      (Mv.i2 = 0),
                      Ed(Mv.v1, a),
                      Ed(Mv.v2, s),
                      Id(Mv.normal, -1, Dv));
              } else
                (t.type = tf.e_faceB),
                  Ed(Av[0].v, s),
                  Av[0].id.setFeatures(0, ef.e_vertex, T.index, ef.e_face),
                  Ed(Av[1].v, a),
                  Av[1].id.setFeatures(0, ef.e_vertex, T.index, ef.e_face),
                  (Mv.i1 = T.index),
                  (Mv.i2 = Mv.i1 + 1 < Cv.count ? Mv.i1 + 1 : 0),
                  Ed(Mv.v1, Cv.vertices[Mv.i1]),
                  Ed(Mv.v2, Cv.vertices[Mv.i2]),
                  Ed(Mv.normal, Cv.normals[Mv.i1]);
              if (
                !(Sd(Mv.sideNormal1, Mv.normal.y, -Mv.normal.x),
                Sd(Mv.sideNormal2, -Mv.sideNormal1.x, -Mv.sideNormal1.y),
                (Mv.sideOffset1 = zd(Mv.sideNormal1, Mv.v1)),
                (Mv.sideOffset2 = zd(Mv.sideNormal2, Mv.v2)),
                wv[0].recycle(),
                wv[1].recycle(),
                Tv[0].recycle(),
                Tv[1].recycle(),
                xf(wv, Av, Mv.sideNormal1, Mv.sideOffset1, Mv.i1) <
                  hd.maxManifoldPoints ||
                  xf(Tv, wv, Mv.sideNormal2, Mv.sideOffset2, Mv.i2) <
                    hd.maxManifoldPoints)
              ) {
                T.type == yv.e_edgeA
                  ? (Ed(t.localNormal, Mv.normal), Ed(t.localPoint, Mv.v1))
                  : (Ed(t.localNormal, r.m_normals[Mv.i1]),
                    Ed(t.localPoint, r.m_vertices[Mv.i1]));
                var P = 0;
                for (y = 0; y < hd.maxManifoldPoints; ++y)
                  if (zd(Mv.normal, Tv[y].v) - zd(Mv.normal, Mv.v1) <= g) {
                    var B = t.points[P];
                    T.type == yv.e_edgeA
                      ? (Zd(B.localPoint, Iv, Tv[y].v), B.id.set(Tv[y].id))
                      : (Ed(B.localPoint, Tv[y].v),
                        B.id.set(Tv[y].id),
                        B.id.swapFeatures()),
                      ++P;
                  }
                t.pointCount = P;
              }
            }
          }
        },
        zv = {
          CollidePolygons: lv,
          Settings: ad,
          Sweep: cp,
          Manifold: mf,
          Distance: e_,
          TimeOfImpact: F_,
          DynamicTree: fd,
          stats: jp,
        },
        Xv = (function () {
          function t(t, e) {
            (this._refMap = {}),
              (this._map = {}),
              (this._xmap = {}),
              (this._data = []),
              (this._entered = []),
              (this._exited = []),
              (this._key = t),
              (this._listener = e);
          }
          return (
            (t.prototype.update = function (t) {
              if (!Array.isArray(t)) throw "Invalid data: " + t;
              (this._entered.length = 0),
                (this._exited.length = 0),
                (this._data.length = t.length);
              for (var e = 0; e < t.length; e++)
                if ("object" == typeof t[e] && null !== t[e]) {
                  var i = t[e],
                    r = this._key(i);
                  this._map[r] ? delete this._map[r] : this._entered.push(i),
                    (this._data[e] = i),
                    (this._xmap[r] = i);
                }
              for (var r in this._map)
                this._exited.push(this._map[r]), delete this._map[r];
              var n = this._map;
              for (
                this._map = this._xmap, this._xmap = n, e = 0;
                e < this._exited.length;
                e++
              ) {
                i = this._exited[e];
                var o = this._key(i),
                  s = this._refMap[o];
                this._listener.exit(i, s), delete this._refMap[o];
              }
              for (e = 0; e < this._entered.length; e++)
                (i = this._entered[e]),
                  (o = this._key(i)),
                  (s = this._listener.enter(i)) && (this._refMap[o] = s);
              for (e = 0; e < this._data.length; e++)
                "object" == typeof t[e] &&
                  null !== t[e] &&
                  ((i = this._data[e]),
                  (o = this._key(i)),
                  (s = this._refMap[o]),
                  this._listener.update(i, s));
              (this._entered.length = 0),
                (this._exited.length = 0),
                (this._data.length = 0);
            }),
            (t.prototype.ref = function (t) {
              return this._refMap[this._key(t)];
            }),
            t
          );
        })();
      const Hv = t,
        Yv = (function () {
          function t() {
            (this._renderer = null),
              (this._stage = null),
              (this._mainDiv = null),
              (this._root = null),
              (this._safeArea = null),
              (this._mask = null),
              (this._fpsText = null),
              (this._dummyGamezy24Game = null),
              (this._bfOnWindowResized = null),
              (this._kSafeAreaHeight = 1390),
              (this._kSafeAreaWidth = 854),
              (this._kHeight = 1136),
              (this._kWidth = 640),
              (this._kSafeAreaMarginX =
                0.5 * (this._kSafeAreaWidth - this._kWidth)),
              (this._kSafeAreaMarginY =
                0.5 * (this._kSafeAreaHeight - this._kHeight));
          }
          return (
            Object.defineProperty(t.prototype, "renderer", {
              get: function () {
                return this._renderer;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "stage", {
              get: function () {
                return this._stage;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "root", {
              get: function () {
                return this._root;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "safeArea", {
              get: function () {
                return this._safeArea;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "width", {
              get: function () {
                return this._kWidth;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "height", {
              get: function () {
                return this._kHeight;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "safeAreaWidth", {
              get: function () {
                return this._kSafeAreaWidth;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "safeAreaHeight", {
              get: function () {
                return this._kSafeAreaHeight;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "safeAreaMarginX", {
              get: function () {
                return this._kSafeAreaMarginX;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "safeAreaMarginY", {
              get: function () {
                return this._kSafeAreaMarginY;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.init = function () {
              (document.body.style.margin = "0px"),
                (document.body.style.overflow = "hidden"),
                (document.body.style.backgroundColor = "black"),
                document.addEventListener("contextmenu", function (t) {
                  t.preventDefault();
                }),
                (this._renderer = new xr({
                  width:
                    (document.documentElement.clientHeight *
                      this._kSafeAreaWidth) /
                    this._kSafeAreaHeight,
                  height: document.documentElement.clientHeight,
                  backgroundAlpha: 1,
                  autoDensity: !0,
                  antialias: !0,
                  preserveDrawingBuffer: !1,
                  resolution: Math.min(window.devicePixelRatio, 2),
                  backgroundColor: 0,
                  clearBeforeRender: !0,
                })),
                (this._mainDiv = document.createElement("div")),
                (this._mainDiv.style.display = "flex"),
                (this._mainDiv.style.justifyContent = "center"),
                (this._mainDiv.style.backgroundImage =
                  'url("resources/img/tiled_background.png")'),
                (this._mainDiv.style.backgroundRepeat = "repeat-x"),
                (this._mainDiv.style.backgroundSize = "auto 100%"),
                document.body.appendChild(this._mainDiv),
                this._mainDiv.appendChild(this._renderer.view),
                (this._stage = new ce()),
                (this._stage.interactive = !0),
                (this._safeArea = new ce()),
                this._stage.addChild(this._safeArea),
                (this._mask = new To()),
                this._mask.beginFill(16777215),
                this._mask.drawRect(
                  0.5 * -this._kSafeAreaWidth,
                  0.5 * -this._kSafeAreaHeight,
                  this._kSafeAreaWidth,
                  this._kSafeAreaHeight
                ),
                this._mask.endFill(),
                (this._mask.isMask = !0),
                this._stage.addChild(this._mask),
                (this._root = new ce()),
                (this._root.mask = this._mask),
                this._stage.addChild(this._root),
                this.onWindow_Resized(),
                (this._bfOnWindowResized = this.onWindow_Resized.bind(this)),
                window.addEventListener("resize", this._bfOnWindowResized);
            }),
            (t.prototype.end = function () {
              window.removeEventListener("resize", this._bfOnWindowResized),
                (this._bfOnWindowResized = null),
                (this._root = null),
                this._stage.destroy({
                  children: !0,
                  texture: !0,
                  baseTexture: !0,
                }),
                (this._stage = null),
                this._renderer.destroy(!0),
                (this._renderer = null);
            }),
            (t.prototype.render = function () {
              this._renderer.render(this._stage);
            }),
            (t.prototype.printFPS = function (t) {
              this._fpsText ||
                ((this._fpsText = new Lo("", {
                  fill: "white",
                  stroke: "black",
                  strokeThickness: 4,
                })),
                this._fpsText.position.set(5),
                this._stage.addChild(this._fpsText)),
                (this._fpsText.text = Math.round(t).toString() + "fps");
            }),
            (t.prototype.onWindow_Resized = function () {
              var t = document.documentElement.clientHeight,
                e = (t * this._kSafeAreaWidth) / this._kHeight;
              e > document.documentElement.clientWidth &&
                (e = document.documentElement.clientWidth),
                this._renderer.resize(e, t),
                this.resizeGame(e, t);
            }),
            (t.prototype.resizeGame = function (t, e) {
              var i = t / this._kWidth;
              this._kHeight * i > e && (i = e / this._kHeight),
                this._root.scale.set(i),
                (this._root.x = 0.5 * (t - this._kWidth * i)),
                (this._root.y = 0.5 * (e - this._kHeight * i)),
                this._dummyGamezy24Game &&
                  (this._dummyGamezy24Game.scale.set(i),
                  this._dummyGamezy24Game.position.copyFrom(
                    this._root.position
                  )),
                this._safeArea.position.set(0.5 * t, 0.5 * e),
                this._safeArea.scale.set(i),
                this._mask.position.set(0.5 * t, 0.5 * e),
                this._mask.scale.set(i);
            }),
            (t.prototype.onDummyGamezy24Game = function (t) {
              (this._dummyGamezy24Game = t),
                (this._dummyGamezy24Game.mask = this._mask),
                this._dummyGamezy24Game.scale.set(this._root.scale.x),
                this._dummyGamezy24Game.position.copyFrom(this._root.position),
                this._stage.addChild(this._dummyGamezy24Game);
            }),
            t
          );
        })();
      var Wv = i(196),
        qv = function (t) {
          var e = "function" == typeof Symbol && Symbol.iterator,
            i = e && t[e],
            r = 0;
          if (i) return i.call(t);
          if (t && "number" == typeof t.length)
            return {
              next: function () {
                return (
                  t && r >= t.length && (t = void 0),
                  { value: t && t[r++], done: !t }
                );
              },
            };
          throw new TypeError(
            e ? "Object is not iterable." : "Symbol.iterator is not defined."
          );
        },
        $v = (function () {
          function t() {
            (this._arrVolume = [1, 0.6, 0.4]),
              (this._arrMute = [!1, !1, !1]),
              (this._arrSoundCollection = [new Map(), new Map(), new Map()]),
              (this._arrStackPausedHowl = [
                new Array(),
                new Array(),
                new Array(),
              ]),
              (this._curMusicName = null),
              (this._isGlobalMute = !1),
              (this._lastHowlId = null);
          }
          return (
            Object.defineProperty(t.prototype, "isMuteSfx", {
              get: function () {
                return this._arrMute[0];
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "isMuteMusic", {
              get: function () {
                return this._arrMute[1];
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "isMuteAmbient", {
              get: function () {
                return this._arrMute[2];
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "lastHowlId", {
              get: function () {
                return this._lastHowlId;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.load = function (t) {
              var e, i, r, n, o, s;
              try {
                for (var a = qv(t), h = a.next(); !h.done; h = a.next()) {
                  var u = h.value;
                  try {
                    for (
                      var l = ((r = void 0), qv(u.arrName)), c = l.next();
                      !c.done;
                      c = l.next()
                    ) {
                      var d = c.value,
                        p = this._arrSoundCollection[u.trackId];
                      if (!p.has(d)) {
                        var _ = u.basePath + d,
                          f = new Array();
                        try {
                          for (
                            var m = ((o = void 0), qv(u.arrExtension)),
                              y = m.next();
                            !y.done;
                            y = m.next()
                          ) {
                            var g = y.value;
                            f.push(_ + "." + g);
                          }
                        } catch (t) {
                          o = { error: t };
                        } finally {
                          try {
                            y && !y.done && (s = m.return) && s.call(m);
                          } finally {
                            if (o) throw o.error;
                          }
                        }
                        var v = new Wv.Howl({
                          src: f,
                          autoplay: !1,
                          onloaderror: function (t, e) {
                            this._kIsDebugMode &&
                              console.warn(
                                "[AudioManager] Error loading sound:" +
                                  t +
                                  ", with error: " +
                                  e
                              );
                          },
                        });
                        p.set(d, v);
                      }
                    }
                  } catch (t) {
                    r = { error: t };
                  } finally {
                    try {
                      c && !c.done && (n = l.return) && n.call(l);
                    } finally {
                      if (r) throw r.error;
                    }
                  }
                }
              } catch (t) {
                e = { error: t };
              } finally {
                try {
                  h && !h.done && (i = a.return) && i.call(a);
                } finally {
                  if (e) throw e.error;
                }
              }
            }),
            (t.prototype.removeSounds = function (t, e) {
              var i,
                r,
                n = this._arrSoundCollection[e];
              try {
                for (var o = qv(t), s = o.next(); !s.done; s = o.next()) {
                  var a = s.value,
                    h = n.get(a);
                  null != h &&
                    (h.playing() && h.stop(),
                    h.unload(),
                    (h = null),
                    n.delete(a));
                }
              } catch (t) {
                i = { error: t };
              } finally {
                try {
                  s && !s.done && (r = o.return) && r.call(o);
                } finally {
                  if (i) throw i.error;
                }
              }
            }),
            (t.prototype.hasSound = function (t, e) {
              return this._arrSoundCollection[e].has(t);
            }),
            (t.prototype.isPlayingSound = function (t, e) {
              return null != this.findPlayingSound(t, e);
            }),
            (t.prototype.playSfx = function (t, e) {
              void 0 === e && (e = null);
              var i = null;
              return (
                this.hasSound(t, 0)
                  ? (i = this.findPlayingSound(t, 0)) &&
                    e &&
                    e.restrictRepetition
                    ? i.duration() * i.seek() > 1 && i.play()
                    : (i = this.play(t, e, 0))
                  : console.warn(
                      "AudioManager.ts :: playSfx() :: cannot find Howl for name: " +
                        t
                    ),
                i
              );
            }),
            (t.prototype.playMusic = function (t, e) {
              void 0 === e && (e = null);
              var i = null;
              return (
                (i = this.findPlayingSound(t, 1)) ||
                  this._isGlobalMute ||
                  ((i = this.play(t, e, 1)),
                  this.updateSoundMuteStatus(this._arrMute[1], 1),
                  (this._curMusicName = t)),
                i
              );
            }),
            (t.prototype.playAmbient = function (t, e) {
              var i = null;
              return (
                (i = this.findPlayingSound(t, 2)) || (i = this.play(t, e, 2)), i
              );
            }),
            (t.prototype.changeVolume = function (t, e) {
              this._arrVolume[e] = t;
              for (
                var i = this._arrSoundCollection[e].entries(), r = i.next();
                !r.done;
                r = i.next()
              ) {
                var n = r.value[1];
                n.playing() && n.volume(t);
              }
            }),
            (t.prototype.mute = function (t, e) {
              (this._arrMute[e] = t),
                this.updateSoundMuteStatus(t || this._isGlobalMute, e);
            }),
            (t.prototype.muteGlobal = function (t) {
              this._isGlobalMute = t;
              for (var e = 0; e <= 2; ++e)
                this.updateSoundMuteStatus(this._arrMute[e] || t, e);
            }),
            (t.prototype.stopSfx = function (t) {
              if ((void 0 === t && (t = null), t)) {
                var e = this.findPlayingSound(t, 0);
                null != e && e.stop();
              } else
                this._arrSoundCollection[0].forEach(function (t, e) {
                  t.stop();
                });
            }),
            (t.prototype.stopAmbient = function (t) {
              if ((void 0 === t && (t = null), t)) {
                var e = this.findPlayingSound(t, 2);
                null != e && e.stop();
              } else
                this._arrSoundCollection[2].forEach(function (t, e) {
                  t.stop();
                });
            }),
            (t.prototype.stopMusic = function () {
              if (null != this._curMusicName) {
                var t = this._arrSoundCollection[1].get(this._curMusicName);
                t && t.stop(), (this._curMusicName = null);
              }
            }),
            (t.prototype.pause = function (t) {
              var e = [];
              this._arrSoundCollection[t].forEach(function (t, i) {
                t.playing() && (t.pause(), e.push(t));
              }),
                this._arrStackPausedHowl[t].push(e);
            }),
            (t.prototype.resume = function (t) {
              var e, i;
              if (this._arrStackPausedHowl[t].length > 0) {
                var r = this._arrStackPausedHowl[t].pop();
                try {
                  for (var n = qv(r), o = n.next(); !o.done; o = n.next())
                    o.value.play();
                } catch (t) {
                  e = { error: t };
                } finally {
                  try {
                    o && !o.done && (i = n.return) && i.call(n);
                  } finally {
                    if (e) throw e.error;
                  }
                }
              }
            }),
            (t.prototype.stopPaused = function (t) {
              var e, i;
              if (this._arrStackPausedHowl[t].length > 0) {
                var r = this._arrStackPausedHowl[t].pop();
                try {
                  for (var n = qv(r), o = n.next(); !o.done; o = n.next())
                    o.value.stop();
                } catch (t) {
                  e = { error: t };
                } finally {
                  try {
                    o && !o.done && (i = n.return) && i.call(n);
                  } finally {
                    if (e) throw e.error;
                  }
                }
              }
            }),
            (t.prototype.play = function (t, e, i) {
              var r = null;
              return (
                ((e = e || {}).randomStart =
                  null != e.randomStart && e.randomStart),
                (e.loop = null != e.loop && e.loop),
                (e.volumeRatio = null != e.volumeRatio ? e.volumeRatio : 1),
                (e.onComplete = e.onComplete || null),
                (e.onCompleteScope = e.onCompleteScope || window),
                (r = this._arrSoundCollection[i].get(t)) &&
                  (r.volume(this._arrVolume[i] * e.volumeRatio),
                  r.mute(this._arrMute[i] || this._isGlobalMute),
                  e.randomStart && r.seek(r.duration() * Math.random()),
                  r.loop(e.loop),
                  r.on(
                    "end",
                    function () {
                      e.onComplete && e.onComplete.call(e.onCompleteScope);
                    }.bind(this)
                  ),
                  (this._lastHowlId = r.play())),
                r
              );
            }),
            (t.prototype.updateSoundMuteStatus = function (t, e) {
              for (
                var i = this._arrSoundCollection[e].entries(), r = i.next();
                !r.done;
                r = i.next()
              )
                r.value[1].mute(t);
            }),
            (t.prototype.findPlayingSound = function (t, e) {
              var i = null,
                r = this._arrSoundCollection[e];
              if (r.has(t)) {
                var n = r.get(t);
                n.playing() && (i = n);
              }
              return i;
            }),
            t
          );
        })();
      const Kv = $v,
        Jv = (function () {
          function t() {}
          return (
            Object.defineProperty(t, "app", {
              get: function () {
                return this._gApp;
              },
              set: function (t) {
                this._gApp || (this._gApp = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "audio", {
              get: function () {
                return this._gAudioManager;
              },
              set: function (t) {
                this._gAudioManager || (this._gAudioManager = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "game", {
              get: function () {
                return this._gGameState;
              },
              set: function (t) {
                this._gGameState || (this._gGameState = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "main", {
              get: function () {
                return this._gMain;
              },
              set: function (t) {
                this._gMain || (this._gMain = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "resources", {
              get: function () {
                return this._gResources;
              },
              set: function (t) {
                this._gResources || (this._gResources = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t, "saved", {
              get: function () {
                return this._gSavedData;
              },
              set: function (t) {
                this._gSavedData || (this._gSavedData = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t._gApp = null),
            (t._gAudioManager = null),
            (t._gGameState = null),
            (t._gMain = null),
            (t._gResources = null),
            (t._gSavedData = null),
            t
          );
        })();
      var Zv = (function () {
        function t() {}
        return (
          (t.prototype.init = function () {}),
          (t.prototype.end = function () {}),
          (t.prototype.onEnter = function (t) {
            void 0 === t && (t = null);
          }),
          (t.prototype.onLeave = function () {}),
          (t.prototype.onUpdate = function (t) {}),
          t
        );
      })();
      const Qv = Zv;
      var tb = i(66),
        eb = i.n(tb);
      const ib = (function () {
        function t() {
          (this._root = null), (this._onCompleted = null);
        }
        return (
          Object.defineProperty(t.prototype, "onCompleted", {
            get: function () {
              return this._onCompleted;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (t.prototype.onEnter = function (t) {
            void 0 === t && (t = null),
              (this._onCompleted = new tb.Signal()),
              (this._root = new ce()),
              Jv.app.root.addChild(this._root);
          }),
          (t.prototype.onPaused = function () {}),
          (t.prototype.onLeave = function () {
            this._onCompleted.dispose(),
              (this._onCompleted = null),
              Jv.app.root.removeChild(this._root),
              this._root.destroy({ children: !0 }),
              (this._root = null);
          }),
          (t.prototype.onUpdate = function (t) {}),
          (t.prototype.createTitle = function (t) {
            var e = new Lo(t, {
              fontSize: 92,
              fill: "white",
              stroke: "black",
              strokeThickness: 10,
              fontStyle: "italic",
            });
            return (
              e.anchor.set(0.5, 0), e.position.set(0.5 * Jv.app.width, 20), e
            );
          }),
          t
        );
      })();
      var rb = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const nb = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (e._world = null), (e._body = null), (e._debug = null), e;
        }
        return (
          rb(e, t),
          Object.defineProperty(e.prototype, "world", {
            set: function (t) {
              this._world = t;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(e.prototype, "worldBodyType", {
            get: function () {
              return 1;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(e.prototype, "body", {
            get: function () {
              return this._body;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (e.prototype.init = function () {
            console.assert(
              null != this._world,
              "Ground.ts :: init() :: this._world cannot be null."
            );
            var t = new Co(Jv.resources.ground.texture);
            t.anchor.set(0.5),
              this.addChild(t),
              this.position.set(
                0.5 * Jv.app.width,
                Jv.app.height + Jv.app.safeAreaMarginY - 0.5 * t.texture.height
              ),
              (this._body = this._world.createBody({
                type: Hv.Body.STATIC,
                position: EE.i.world.toPlVec(this.position),
                userData: this,
              }));
            var e = {
              shape: new Hv.BoxShape(
                (0.5 * t.texture.width) / EE.i.world.kPTM,
                (0.5 * t.texture.height) / EE.i.world.kPTM,
                new Hv.Vec2(0, 0)
              ),
              friction: 1,
              restitution: 0,
            };
            this._body.createFixture(e, 0);
          }),
          (e.prototype.end = function () {
            this._world.destroyBody(this._body),
              (this._body = null),
              (this._world = null);
          }),
          (e.prototype.update = function (t) {
            (this.position = EE.i.world.toPixiPoint(this._body.getPosition())),
              (this.rotation = this._body.getAngle());
          }),
          e
        );
      })(ce);
      var ob = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        sb = (function (t) {
          function e() {
            var e = t.call(this) || this;
            return (
              (e._type = null),
              (e._world = null),
              (e._badModifierType = null),
              (e._goodModifierType = null),
              (e._state = null),
              (e._sprite = null),
              (e._bindVfx = null),
              (e._body = null),
              (e._baseSpriteId = null),
              (e._rotationStep = null),
              (e._speedMult = null),
              (e._positionStep = null),
              (e._arrBoundToBlock = null),
              (e._isGrounded = null),
              (e._isExpanded = null),
              (e._kBlockW = 32),
              (e._kBlockMargin = 4),
              (e._kSensorMargin = 4),
              (e._kFriction = 0.75),
              (e._kDensityPerPixelArea = 625e-7),
              (e._kMoveDistance = 0.5 * e._kBlockW),
              (e._debug = null),
              (e._onMoved = null),
              (e._onHit = null),
              (e._onOut = null),
              (e._badModifierType = 0),
              (e._goodModifierType = 0),
              e
            );
          }
          return (
            ob(e, t),
            Object.defineProperty(e.prototype, "world", {
              set: function (t) {
                this._world = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "badModifierType", {
              get: function () {
                return this._badModifierType;
              },
              set: function (t) {
                this._badModifierType = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "goodModifierType", {
              get: function () {
                return this._goodModifierType;
              },
              set: function (t) {
                this._goodModifierType = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "type", {
              get: function () {
                return this._type;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "worldBodyType", {
              get: function () {
                return 0;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "sprite", {
              get: function () {
                return this._sprite;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "bindVfx", {
              get: function () {
                return this._bindVfx;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "body", {
              get: function () {
                return this._body;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "baseSpriteId", {
              get: function () {
                return this._baseSpriteId;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "isExpanded", {
              get: function () {
                return this._isExpanded;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "onMoved", {
              get: function () {
                return this._onMoved;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "onHit", {
              get: function () {
                return this._onHit;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "onOut", {
              get: function () {
                return this._onOut;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.init = function () {
              console.assert(
                null !== this._type,
                "Block.ts :: init() :: this._type cannot be null."
              ),
                console.assert(
                  null != this._world,
                  "Block.ts :: init() :: this._world cannot be null."
                ),
                (this._onMoved = new tb.Signal()),
                (this._onHit = new tb.Signal()),
                (this._onOut = new tb.Signal()),
                (this._state = 0),
                (this._arrBoundToBlock = []),
                (this._isGrounded = !1),
                (this._isExpanded = !1),
                (this._baseSpriteId = this.findBaseSpriteId()),
                (this._rotationStep = 0),
                (this._speedMult = 1),
                4 == this._badModifierType
                  ? (this._speedMult = 2)
                  : 3 == this._badModifierType
                  ? (this._speedMult = 0.6)
                  : 2 == this._badModifierType && (this._kFriction = 0.1),
                (this._positionStep = 0),
                this.position.set(
                  0.5 * Jv.app.width,
                  100 - EE.i.layers.actor.y
                ),
                (this._body = this._world.createBody({
                  type: Hv.Body.DYNAMIC,
                  position: EE.i.world.toPlVec(this.position),
                  gravityScale: new Hv.Vec2(0, 0),
                  bullet: !0,
                  userData: this,
                }));
            }),
            (e.prototype.end = function () {
              this._onMoved.dispose(),
                (this._onMoved = null),
                this._onOut.dispose(),
                (this._onOut = null),
                this._onHit.dispose(),
                (this._onHit = null),
                this._bindVfx &&
                  (this._bindVfx.parent.removeChild(this._bindVfx),
                  this._bindVfx.destroy(),
                  (this._bindVfx = null)),
                this._world.destroyBody(this._body),
                (this._body = null),
                (this._world = null);
            }),
            (e.prototype.update = function (t) {
              1 == this._state &&
                ((this.position = EE.i.world.toPixiPoint(
                  this._body.getPosition()
                )),
                (this.rotation = this._body.getAngle()),
                this._bindVfx &&
                  (this._bindVfx.position.copyFrom(this.position),
                  (this._bindVfx.rotation = this.rotation)),
                this.y >
                  Jv.app.height +
                    Jv.app.safeAreaMarginY +
                    Jv.resources.I_2x.texture.height &&
                  this._onOut.dispatch(this));
            }),
            (e.prototype.fall = function () {
              this._body.setLinearVelocity(
                new Hv.Vec2(0, 0.5 * this._speedMult)
              ),
                (this._state = 1);
            }),
            (e.prototype.moveLeft = function () {
              if (!(this._positionStep < -15)) {
                this._positionStep -= 1;
                var t = this._body.getPosition();
                (t.x -= this._kMoveDistance / EE.i.world.kPTM),
                  this._body.setPosition(t),
                  this.update(0),
                  this._onMoved.dispatch(this),
                  Jv.audio.playSfx("posunuti_bloku");
              }
            }),
            (e.prototype.moveRight = function () {
              if (!(this._positionStep > 15)) {
                this._positionStep += 1;
                var t = this._body.getPosition();
                (t.x += this._kMoveDistance / EE.i.world.kPTM),
                  this._body.setPosition(t),
                  this.update(0),
                  this._onMoved.dispatch(this),
                  Jv.audio.playSfx("posunuti_bloku");
              }
            }),
            (e.prototype.rotate = function () {
              1 != this._badModifierType &&
                ((this._rotationStep += 1),
                this._rotationStep > 3 && (this._rotationStep = 0),
                this._updateFixture(this._kBlockMargin, this._kSensorMargin),
                this._body.setAngle(0.5 * Math.PI * this._rotationStep),
                this.update(0),
                this._onMoved.dispatch(this));
            }),
            (e.prototype._updateFixture = function (t, e) {}),
            (e.prototype.expand = function () {
              this._isExpanded ||
                (this._updateFixture(0, 0), (this._isExpanded = !0));
            }),
            (e.prototype.isBoundToBlock = function (t) {
              var e,
                i,
                r = !1;
              try {
                for (
                  var n = (function (t) {
                      var e = "function" == typeof Symbol && Symbol.iterator,
                        i = e && t[e],
                        r = 0;
                      if (i) return i.call(t);
                      if (t && "number" == typeof t.length)
                        return {
                          next: function () {
                            return (
                              t && r >= t.length && (t = void 0),
                              { value: t && t[r++], done: !t }
                            );
                          },
                        };
                      throw new TypeError(
                        e
                          ? "Object is not iterable."
                          : "Symbol.iterator is not defined."
                      );
                    })(this._arrBoundToBlock),
                    o = n.next();
                  !o.done;
                  o = n.next()
                )
                  if (o.value == t) {
                    r = !0;
                    break;
                  }
              } catch (t) {
                e = { error: t };
              } finally {
                try {
                  o && !o.done && (i = n.return) && i.call(n);
                } finally {
                  if (e) throw e.error;
                }
              }
              return r;
            }),
            (e.prototype._findSpriteId = function () {
              var t = this.findBaseSpriteId();
              if (2 == this._goodModifierType) t += "_petrified";
              else if (0 != this._badModifierType)
                switch (this._badModifierType) {
                  case 2:
                    t += "_ice";
                    break;
                  case 4:
                    t += "_speed_up";
                    break;
                  case 1:
                    t += "_no_rotation";
                }
              return t;
            }),
            (e.prototype.findBaseSpriteId = function () {
              var t = null;
              switch (this._type) {
                case 0:
                  t = "I";
                  break;
                case 5:
                  t = "J";
                  break;
                case 6:
                  t = "L";
                  break;
                case 1:
                  t = "O";
                  break;
                case 2:
                  t = "T";
                  break;
                case 3:
                  t = "S";
                  break;
                case 4:
                  t = "Z";
                  break;
                case 8:
                  t = "I_2x";
                  break;
                case 13:
                  t = "J_2x";
                  break;
                case 14:
                  t = "L_2x";
                  break;
                case 9:
                  t = "O_2x";
                  break;
                case 10:
                  t = "T_2x";
                  break;
                case 11:
                  t = "S_2x";
                  break;
                case 12:
                  t = "Z_2x";
              }
              return t;
            }),
            (e.prototype.onContact = function () {
              this._body.setLinearVelocity(new Hv.Vec2(0, 0)),
                this._body.setGravityScale(new Hv.Vec2(0, 1)),
                3 != this._badModifierType && Jv.audio.playSfx("land"),
                this._onHit.dispatch(this);
            }),
            (e.prototype.onGrounded = function () {
              this._isGrounded || (this._isGrounded = !0);
            }),
            (e.prototype.onFreeFall = function () {
              this._body.setLinearVelocity(
                new Hv.Vec2(0, 10 * this._speedMult)
              );
            }),
            (e.prototype.onPetrify = function () {
              (this._goodModifierType = 2),
                (this._sprite.texture =
                  Jv.resources[this._findSpriteId()].texture);
            }),
            (e.prototype.onBind = function () {
              (this._goodModifierType = 1),
                (this._bindVfx = this._createBindVfx());
            }),
            (e.prototype._createBindVfx = function () {
              var t,
                e = ["I", "O", "T", "S", "S", "J", "J"];
              t =
                5 == this._badModifierType
                  ? e[this._type - 7 - 1] + "_bind_2x"
                  : e[this._type] + "_bind";
              var i = new Co(Jv.resources[t].texture);
              return (
                i.anchor.set(0.5),
                (i.angle = this.angle),
                (12 != this._type &&
                  14 != this._type &&
                  4 != this._type &&
                  6 != this._type) ||
                  (i.scale.x = -1),
                i.position.copyFrom(this.position),
                EE.i.layers.actor.children[4].addChild(i),
                i
              );
            }),
            (e.prototype.onBound = function (t) {
              this._bindVfx || (this._bindVfx = this._createBindVfx()),
                this._arrBoundToBlock.includes(t) ||
                  this._arrBoundToBlock.push(t);
            }),
            e
          );
        })(ce);
      const ab = sb,
        hb = (function () {
          function t() {}
          return (
            (t.prototype.createI = function (t, e, i, r, n, o, s) {
              for (; t.getFixtureList(); ) t.destroyFixture(t.getFixtureList());
              var a = e,
                h = 4 * e;
              0 == s || 2 == s ? (a -= 2 * i) : (h -= 2 * i);
              var u = {
                shape: new Hv.BoxShape(
                  (0.5 * a) / EE.i.world.kPTM,
                  (0.5 * h) / EE.i.world.kPTM,
                  new Hv.Vec2(0, 0)
                ),
                density: a * h * n,
                friction: o,
                restitution: 0,
              };
              if ((t.createFixture(u), r > 0)) {
                0 == s || 2 == s ? (a -= 2 * r) : (h -= 2 * r);
                var l = {
                  shape: new Hv.BoxShape(
                    (0.5 * a) / EE.i.world.kPTM,
                    (0.5 * h) / EE.i.world.kPTM,
                    new Hv.Vec2(0, 0)
                  ),
                  isSensor: !0,
                };
                t.createFixture(l);
              }
            }),
            (t.prototype.createJ = function (t, e, i, r, n, o, s) {
              for (; t.getFixtureList(); ) t.destroyFixture(t.getFixtureList());
              if (0 == s || 2 == s) {
                var a = e - 2 * i,
                  h = 2 * e,
                  u = {
                    shape: new Hv.BoxShape(
                      (0.5 * a) / EE.i.world.kPTM,
                      (0.5 * h) / EE.i.world.kPTM,
                      new Hv.Vec2(
                        (0.5 * e) / EE.i.world.kPTM,
                        (0.5 * -e) / EE.i.world.kPTM
                      )
                    ),
                    density: a * h * n,
                    friction: o,
                    restitution: 0,
                  };
                t.createFixture(u);
                var l = 2 * e - 2 * i,
                  c = e,
                  d = {
                    shape: new Hv.BoxShape(
                      (0.5 * l) / EE.i.world.kPTM,
                      (0.5 * c) / EE.i.world.kPTM,
                      new Hv.Vec2(0, e / EE.i.world.kPTM)
                    ),
                    density: l * c * n,
                    friction: o,
                    restitution: 0,
                  };
                if ((t.createFixture(d), r > 0))
                  if (0 == s) {
                    var p = l - 2 * r,
                      _ = {
                        shape: new Hv.BoxShape(
                          (0.5 * p) / EE.i.world.kPTM,
                          (0.5 * c) / EE.i.world.kPTM,
                          new Hv.Vec2(0, e / EE.i.world.kPTM)
                        ),
                        isSensor: !0,
                      };
                    t.createFixture(_);
                  } else if (2 == s) {
                    p = a - 2 * r;
                    var f = {
                      shape: new Hv.BoxShape(
                        (0.5 * p) / EE.i.world.kPTM,
                        (0.5 * h) / EE.i.world.kPTM,
                        new Hv.Vec2(
                          (0.5 * e) / EE.i.world.kPTM,
                          (0.5 * -e) / EE.i.world.kPTM
                        )
                      ),
                      isSensor: !0,
                    };
                    t.createFixture(f),
                      (p = l - 2 * r),
                      (_ = {
                        shape: new Hv.BoxShape(
                          (0.5 * p) / EE.i.world.kPTM,
                          (0.5 * c) / EE.i.world.kPTM,
                          new Hv.Vec2(0, e / EE.i.world.kPTM)
                        ),
                        isSensor: !0,
                      }),
                      t.createFixture(_);
                  }
              } else if (
                ((a = e),
                (h = 3 * e - 2 * i),
                (u = {
                  shape: new Hv.BoxShape(
                    (0.5 * a) / EE.i.world.kPTM,
                    (0.5 * h) / EE.i.world.kPTM,
                    new Hv.Vec2((0.5 * e) / EE.i.world.kPTM, 0)
                  ),
                  density: a * h * n,
                  friction: o,
                  restitution: 0,
                }),
                t.createFixture(u),
                (l = e),
                (c = e - 2 * i),
                (d = {
                  shape: new Hv.BoxShape(
                    (0.5 * l) / EE.i.world.kPTM,
                    (0.5 * c) / EE.i.world.kPTM,
                    new Hv.Vec2(
                      (0.5 * -e) / EE.i.world.kPTM,
                      e / EE.i.world.kPTM
                    )
                  ),
                  density: l * c * n,
                  friction: o,
                  restitution: 0,
                }),
                t.createFixture(d),
                r > 0)
              )
                if (1 == s) {
                  var m = c - 2 * r;
                  (_ = {
                    shape: new Hv.BoxShape(
                      (0.5 * l) / EE.i.world.kPTM,
                      (0.5 * m) / EE.i.world.kPTM,
                      new Hv.Vec2(
                        (0.5 * -e) / EE.i.world.kPTM,
                        e / EE.i.world.kPTM
                      )
                    ),
                    isSensor: !0,
                  }),
                    t.createFixture(_),
                    (m = h - 2 * r),
                    (f = {
                      shape: new Hv.BoxShape(
                        (0.5 * a) / EE.i.world.kPTM,
                        (0.5 * m) / EE.i.world.kPTM,
                        new Hv.Vec2((0.5 * e) / EE.i.world.kPTM, 0)
                      ),
                      isSensor: !0,
                    }),
                    t.createFixture(f);
                } else if (3 == s) {
                  m = h - 2 * r;
                  var y = {
                    shape: new Hv.BoxShape(
                      (0.5 * a) / EE.i.world.kPTM,
                      (0.5 * m) / EE.i.world.kPTM,
                      new Hv.Vec2((0.5 * e) / EE.i.world.kPTM, 0)
                    ),
                    isSensor: !0,
                  };
                  t.createFixture(y);
                }
            }),
            (t.prototype.createL = function (t, e, i, r, n, o, s) {
              for (; t.getFixtureList(); ) t.destroyFixture(t.getFixtureList());
              if (0 == s || 2 == s) {
                var a = e - 2 * i,
                  h = 2 * e,
                  u = {
                    shape: new Hv.BoxShape(
                      (0.5 * a) / EE.i.world.kPTM,
                      (0.5 * h) / EE.i.world.kPTM,
                      new Hv.Vec2(
                        (0.5 * -e) / EE.i.world.kPTM,
                        (0.5 * -e) / EE.i.world.kPTM
                      )
                    ),
                    density: a * h * n,
                    friction: o,
                    restitution: 0,
                  };
                t.createFixture(u);
                var l = 2 * e - 2 * i,
                  c = e,
                  d = {
                    shape: new Hv.BoxShape(
                      (0.5 * l) / EE.i.world.kPTM,
                      (0.5 * c) / EE.i.world.kPTM,
                      new Hv.Vec2(0, e / EE.i.world.kPTM)
                    ),
                    density: l * c * n,
                    friction: o,
                    restitution: 0,
                  };
                if ((t.createFixture(d), r > 0))
                  if (0 == s) {
                    var p = l - 2 * r,
                      _ = {
                        shape: new Hv.BoxShape(
                          (0.5 * p) / EE.i.world.kPTM,
                          (0.5 * c) / EE.i.world.kPTM,
                          new Hv.Vec2(0, e / EE.i.world.kPTM)
                        ),
                        isSensor: !0,
                      };
                    t.createFixture(_);
                  } else if (2 == s) {
                    p = a - 2 * r;
                    var f = {
                      shape: new Hv.BoxShape(
                        (0.5 * p) / EE.i.world.kPTM,
                        (0.5 * h) / EE.i.world.kPTM,
                        new Hv.Vec2(
                          (0.5 * -e) / EE.i.world.kPTM,
                          (0.5 * -e) / EE.i.world.kPTM
                        )
                      ),
                      isSensor: !0,
                    };
                    t.createFixture(f),
                      (p = l - 2 * r),
                      (_ = {
                        shape: new Hv.BoxShape(
                          (0.5 * p) / EE.i.world.kPTM,
                          (0.5 * c) / EE.i.world.kPTM,
                          new Hv.Vec2(0, e / EE.i.world.kPTM)
                        ),
                        isSensor: !0,
                      }),
                      t.createFixture(_);
                  }
              } else if (
                ((a = e),
                (h = 3 * e - 2 * i),
                (u = {
                  shape: new Hv.BoxShape(
                    (0.5 * a) / EE.i.world.kPTM,
                    (0.5 * h) / EE.i.world.kPTM,
                    new Hv.Vec2((0.5 * -e) / EE.i.world.kPTM, 0)
                  ),
                  density: a * h * n,
                  friction: o,
                  restitution: 0,
                }),
                t.createFixture(u),
                (l = e),
                (c = e - 2 * i),
                (d = {
                  shape: new Hv.BoxShape(
                    (0.5 * l) / EE.i.world.kPTM,
                    (0.5 * c) / EE.i.world.kPTM,
                    new Hv.Vec2(
                      (0.5 * e) / EE.i.world.kPTM,
                      e / EE.i.world.kPTM
                    )
                  ),
                  density: l * c * n,
                  friction: o,
                  restitution: 0,
                }),
                t.createFixture(d),
                r > 0)
              )
                if (1 == s) {
                  var m = c - 2 * r;
                  (_ = {
                    shape: new Hv.BoxShape(
                      (0.5 * l) / EE.i.world.kPTM,
                      (0.5 * m) / EE.i.world.kPTM,
                      new Hv.Vec2(
                        (0.5 * e) / EE.i.world.kPTM,
                        e / EE.i.world.kPTM
                      )
                    ),
                    isSensor: !0,
                  }),
                    t.createFixture(_),
                    (m = h - 2 * r),
                    (f = {
                      shape: new Hv.BoxShape(
                        (0.5 * a) / EE.i.world.kPTM,
                        (0.5 * m) / EE.i.world.kPTM,
                        new Hv.Vec2((0.5 * -e) / EE.i.world.kPTM, 0)
                      ),
                      isSensor: !0,
                    }),
                    t.createFixture(f);
                } else if (3 == s) {
                  m = h - 2 * r;
                  var y = {
                    shape: new Hv.BoxShape(
                      (0.5 * a) / EE.i.world.kPTM,
                      (0.5 * m) / EE.i.world.kPTM,
                      new Hv.Vec2((0.5 * -e) / EE.i.world.kPTM, 0)
                    ),
                    isSensor: !0,
                  };
                  t.createFixture(y);
                }
            }),
            (t.prototype.createO = function (t, e, i, r, n, o, s) {
              for (; t.getFixtureList(); ) t.destroyFixture(t.getFixtureList());
              var a = 2 * e,
                h = 2 * e;
              0 == s || 2 == s ? (a -= 2 * i) : (h -= 2 * i);
              var u = {
                shape: new Hv.BoxShape(
                  (0.5 * a) / EE.i.world.kPTM,
                  (0.5 * h) / EE.i.world.kPTM,
                  new Hv.Vec2(0, 0)
                ),
                density: a * h * n,
                friction: o,
                restitution: 0,
              };
              if ((t.createFixture(u), r > 0)) {
                0 == s || 2 == s ? (a -= 2 * r) : (h -= 2 * r);
                var l = {
                  shape: new Hv.BoxShape(
                    (0.5 * a) / EE.i.world.kPTM,
                    (0.5 * h) / EE.i.world.kPTM,
                    new Hv.Vec2(0, 0)
                  ),
                  isSensor: !0,
                };
                t.createFixture(l);
              }
            }),
            (t.prototype.createS = function (t, e, i, r, n, o, s) {
              for (; t.getFixtureList(); ) t.destroyFixture(t.getFixtureList());
              if (0 == s || 2 == s) {
                var a = 2 * e - 2 * i,
                  h = e,
                  u = {
                    shape: new Hv.BoxShape(
                      (0.5 * a) / EE.i.world.kPTM,
                      (0.5 * h) / EE.i.world.kPTM,
                      new Hv.Vec2(
                        (0.5 * e) / EE.i.world.kPTM,
                        (0.5 * -e) / EE.i.world.kPTM
                      )
                    ),
                    density: a * h * n,
                    friction: o,
                    restitution: 0,
                  };
                t.createFixture(u);
                var l = 2 * e - 2 * i,
                  c = e,
                  d = {
                    shape: new Hv.BoxShape(
                      (0.5 * l) / EE.i.world.kPTM,
                      (0.5 * c) / EE.i.world.kPTM,
                      new Hv.Vec2(
                        (0.5 * -e) / EE.i.world.kPTM,
                        (0.5 * e) / EE.i.world.kPTM
                      )
                    ),
                    density: l * c * n,
                    friction: o,
                    restitution: 0,
                  };
                if ((t.createFixture(d), r > 0)) {
                  var p = a - 2 * r,
                    _ = {
                      shape: new Hv.BoxShape(
                        (0.5 * p) / EE.i.world.kPTM,
                        (0.5 * h) / EE.i.world.kPTM,
                        new Hv.Vec2(
                          (0.5 * e) / EE.i.world.kPTM,
                          (0.5 * -e) / EE.i.world.kPTM
                        )
                      ),
                      isSensor: !0,
                    };
                  t.createFixture(_), (p = l - 2 * r);
                  var f = {
                    shape: new Hv.BoxShape(
                      (0.5 * p) / EE.i.world.kPTM,
                      (0.5 * c) / EE.i.world.kPTM,
                      new Hv.Vec2(
                        (0.5 * -e) / EE.i.world.kPTM,
                        (0.5 * e) / EE.i.world.kPTM
                      )
                    ),
                    isSensor: !0,
                  };
                  t.createFixture(f);
                }
              } else {
                var m = e,
                  y = e - 2 * i,
                  g = {
                    shape: new Hv.BoxShape(
                      (0.5 * m) / EE.i.world.kPTM,
                      (0.5 * y) / EE.i.world.kPTM,
                      new Hv.Vec2(
                        -e / EE.i.world.kPTM,
                        (0.5 * e) / EE.i.world.kPTM
                      )
                    ),
                    density: e * y * n,
                    friction: o,
                    restitution: 0,
                  };
                t.createFixture(g);
                var v = e,
                  b = 2 * e - 2 * i,
                  x = {
                    shape: new Hv.BoxShape(
                      (0.5 * v) / EE.i.world.kPTM,
                      (0.5 * b) / EE.i.world.kPTM,
                      new Hv.Vec2(0, 0)
                    ),
                    density: v * b * n,
                    friction: o,
                    restitution: 0,
                  };
                t.createFixture(x);
                var w = e,
                  T = e - 2 * i,
                  A = {
                    shape: new Hv.BoxShape(
                      (0.5 * w) / EE.i.world.kPTM,
                      (0.5 * T) / EE.i.world.kPTM,
                      new Hv.Vec2(
                        e / EE.i.world.kPTM,
                        (0.5 * -e) / EE.i.world.kPTM
                      )
                    ),
                    density: w * T * n,
                    friction: o,
                    restitution: 0,
                  };
                if ((t.createFixture(A), r > 0)) {
                  if (1 == s) {
                    var S = T - 2 * r,
                      E = {
                        shape: new Hv.BoxShape(
                          (0.5 * w) / EE.i.world.kPTM,
                          (0.5 * S) / EE.i.world.kPTM,
                          new Hv.Vec2(
                            e / EE.i.world.kPTM,
                            (0.5 * -e) / EE.i.world.kPTM
                          )
                        ),
                        isSensor: !0,
                      };
                    t.createFixture(E);
                  } else {
                    var C = y - 2 * r,
                      M = {
                        shape: new Hv.BoxShape(
                          (0.5 * m) / EE.i.world.kPTM,
                          (0.5 * C) / EE.i.world.kPTM,
                          new Hv.Vec2(
                            -e / EE.i.world.kPTM,
                            (0.5 * e) / EE.i.world.kPTM
                          )
                        ),
                        isSensor: !0,
                      };
                    t.createFixture(M);
                  }
                  var P = b - 2 * r,
                    B = {
                      shape: new Hv.BoxShape(
                        (0.5 * v) / EE.i.world.kPTM,
                        (0.5 * P) / EE.i.world.kPTM,
                        new Hv.Vec2(0, 0)
                      ),
                      isSensor: !0,
                    };
                  t.createFixture(B);
                }
              }
            }),
            (t.prototype.createT = function (t, e, i, r, n, o, s) {
              for (; t.getFixtureList(); ) t.destroyFixture(t.getFixtureList());
              if (0 == s || 2 == s) {
                var a = 3 * e - 2 * i,
                  h = e,
                  u = {
                    shape: new Hv.BoxShape(
                      (0.5 * a) / EE.i.world.kPTM,
                      (0.5 * h) / EE.i.world.kPTM,
                      new Hv.Vec2(0, (0.5 * e) / EE.i.world.kPTM)
                    ),
                    density: a * h * n,
                    friction: o,
                    restitution: 0,
                  };
                t.createFixture(u);
                var l = e - 2 * i,
                  c = e,
                  d = {
                    shape: new Hv.BoxShape(
                      (0.5 * l) / EE.i.world.kPTM,
                      (0.5 * c) / EE.i.world.kPTM,
                      new Hv.Vec2(0, (0.5 * -e) / EE.i.world.kPTM)
                    ),
                    density: l * c * n,
                    friction: o,
                    restitution: 0,
                  };
                if ((t.createFixture(d), r > 0))
                  if (0 == s) {
                    var p = a - 2 * r,
                      _ = {
                        shape: new Hv.BoxShape(
                          (0.5 * p) / EE.i.world.kPTM,
                          (0.5 * h) / EE.i.world.kPTM,
                          new Hv.Vec2(0, (0.5 * e) / EE.i.world.kPTM)
                        ),
                        isSensor: !0,
                      };
                    t.createFixture(_);
                  } else {
                    var f = a - 2 * r,
                      m = {
                        shape: new Hv.BoxShape(
                          (0.5 * f) / EE.i.world.kPTM,
                          (0.5 * h) / EE.i.world.kPTM,
                          new Hv.Vec2(0, (0.5 * e) / EE.i.world.kPTM)
                        ),
                        isSensor: !0,
                      };
                    t.createFixture(m), (f = l - 2 * r);
                    var y = {
                      shape: new Hv.BoxShape(
                        (0.5 * f) / EE.i.world.kPTM,
                        (0.5 * c) / EE.i.world.kPTM,
                        new Hv.Vec2(0, (0.5 * -e) / EE.i.world.kPTM)
                      ),
                      isSensor: !0,
                    };
                    t.createFixture(y);
                  }
              } else {
                var g = e,
                  v = 2 * e - 2 * i,
                  b = {
                    shape: new Hv.BoxShape(
                      (0.5 * g) / EE.i.world.kPTM,
                      (0.5 * v) / EE.i.world.kPTM,
                      new Hv.Vec2(0, 0)
                    ),
                    density: g * v * n,
                    friction: o,
                    restitution: 0,
                  };
                t.createFixture(b);
                var x = e,
                  w = e - 2 * i,
                  T = {
                    shape: new Hv.BoxShape(
                      (0.5 * x) / EE.i.world.kPTM,
                      (0.5 * w) / EE.i.world.kPTM,
                      new Hv.Vec2(
                        -e / EE.i.world.kPTM,
                        (0.5 * e) / EE.i.world.kPTM
                      )
                    ),
                    density: x * w * n,
                    friction: o,
                    restitution: 0,
                  };
                t.createFixture(T);
                var A = e,
                  S = e - 2 * i,
                  E = {
                    shape: new Hv.BoxShape(
                      (0.5 * A) / EE.i.world.kPTM,
                      (0.5 * S) / EE.i.world.kPTM,
                      new Hv.Vec2(
                        e / EE.i.world.kPTM,
                        (0.5 * e) / EE.i.world.kPTM
                      )
                    ),
                    density: A * S * n,
                    friction: o,
                    restitution: 0,
                  };
                if ((t.createFixture(E), 1 == s)) {
                  var C = S - 2 * r,
                    M = {
                      shape: new Hv.BoxShape(
                        (0.5 * A) / EE.i.world.kPTM,
                        (0.5 * C) / EE.i.world.kPTM,
                        new Hv.Vec2(
                          e / EE.i.world.kPTM,
                          (0.5 * e) / EE.i.world.kPTM
                        )
                      ),
                      isSensor: !0,
                    };
                  t.createFixture(M);
                } else {
                  var P = w - 2 * r,
                    B = {
                      shape: new Hv.BoxShape(
                        (0.5 * x) / EE.i.world.kPTM,
                        (0.5 * P) / EE.i.world.kPTM,
                        new Hv.Vec2(
                          -e / EE.i.world.kPTM,
                          (0.5 * e) / EE.i.world.kPTM
                        )
                      ),
                      isSensor: !0,
                    };
                  t.createFixture(B);
                }
                var O = v - 2 * r,
                  R = {
                    shape: new Hv.BoxShape(
                      (0.5 * g) / EE.i.world.kPTM,
                      (0.5 * O) / EE.i.world.kPTM,
                      new Hv.Vec2(0, 0)
                    ),
                    isSensor: !0,
                  };
                t.createFixture(R);
              }
            }),
            (t.prototype.createZ = function (t, e, i, r, n, o, s) {
              for (; t.getFixtureList(); ) t.destroyFixture(t.getFixtureList());
              if (0 == s || 2 == s) {
                var a = 2 * e - 2 * i,
                  h = e,
                  u = {
                    shape: new Hv.BoxShape(
                      (0.5 * a) / EE.i.world.kPTM,
                      (0.5 * h) / EE.i.world.kPTM,
                      new Hv.Vec2(
                        (0.5 * -e) / EE.i.world.kPTM,
                        (0.5 * -e) / EE.i.world.kPTM
                      )
                    ),
                    density: a * h * n,
                    friction: o,
                    restitution: 0,
                  };
                t.createFixture(u);
                var l = 2 * e - 2 * i,
                  c = e,
                  d = {
                    shape: new Hv.BoxShape(
                      (0.5 * l) / EE.i.world.kPTM,
                      (0.5 * c) / EE.i.world.kPTM,
                      new Hv.Vec2(
                        (0.5 * e) / EE.i.world.kPTM,
                        (0.5 * e) / EE.i.world.kPTM
                      )
                    ),
                    density: l * c * n,
                    friction: o,
                    restitution: 0,
                  };
                if ((t.createFixture(d), r > 0)) {
                  var p = a - 2 * r,
                    _ = {
                      shape: new Hv.BoxShape(
                        (0.5 * p) / EE.i.world.kPTM,
                        (0.5 * h) / EE.i.world.kPTM,
                        new Hv.Vec2(
                          (0.5 * -e) / EE.i.world.kPTM,
                          (0.5 * -e) / EE.i.world.kPTM
                        )
                      ),
                      isSensor: !0,
                    };
                  t.createFixture(_), (p = l - 2 * r);
                  var f = {
                    shape: new Hv.BoxShape(
                      (0.5 * p) / EE.i.world.kPTM,
                      (0.5 * c) / EE.i.world.kPTM,
                      new Hv.Vec2(
                        (0.5 * e) / EE.i.world.kPTM,
                        (0.5 * e) / EE.i.world.kPTM
                      )
                    ),
                    isSensor: !0,
                  };
                  t.createFixture(f);
                }
              } else {
                var m = e,
                  y = e - 2 * i,
                  g = {
                    shape: new Hv.BoxShape(
                      (0.5 * m) / EE.i.world.kPTM,
                      (0.5 * y) / EE.i.world.kPTM,
                      new Hv.Vec2(
                        -e / EE.i.world.kPTM,
                        (0.5 * -e) / EE.i.world.kPTM
                      )
                    ),
                    density: e * y * n,
                    friction: o,
                    restitution: 0,
                  };
                t.createFixture(g);
                var v = e,
                  b = 2 * e - 2 * i,
                  x = {
                    shape: new Hv.BoxShape(
                      (0.5 * v) / EE.i.world.kPTM,
                      (0.5 * b) / EE.i.world.kPTM,
                      new Hv.Vec2(0, 0)
                    ),
                    density: v * b * n,
                    friction: o,
                    restitution: 0,
                  };
                t.createFixture(x);
                var w = e,
                  T = e - 2 * i,
                  A = {
                    shape: new Hv.BoxShape(
                      (0.5 * w) / EE.i.world.kPTM,
                      (0.5 * T) / EE.i.world.kPTM,
                      new Hv.Vec2(
                        e / EE.i.world.kPTM,
                        (0.5 * e) / EE.i.world.kPTM
                      )
                    ),
                    density: w * T * n,
                    friction: o,
                    restitution: 0,
                  };
                if ((t.createFixture(A), r > 0)) {
                  if (1 == s) {
                    var S = T - 2 * r,
                      E = {
                        shape: new Hv.BoxShape(
                          (0.5 * w) / EE.i.world.kPTM,
                          (0.5 * S) / EE.i.world.kPTM,
                          new Hv.Vec2(
                            e / EE.i.world.kPTM,
                            (0.5 * e) / EE.i.world.kPTM
                          )
                        ),
                        isSensor: !0,
                      };
                    t.createFixture(E);
                  } else {
                    var C = y - 2 * r,
                      M = {
                        shape: new Hv.BoxShape(
                          (0.5 * m) / EE.i.world.kPTM,
                          (0.5 * C) / EE.i.world.kPTM,
                          new Hv.Vec2(
                            -e / EE.i.world.kPTM,
                            (0.5 * -e) / EE.i.world.kPTM
                          )
                        ),
                        isSensor: !0,
                      };
                    t.createFixture(M);
                  }
                  var P = b - 2 * r,
                    B = {
                      shape: new Hv.BoxShape(
                        (0.5 * v) / EE.i.world.kPTM,
                        (0.5 * P) / EE.i.world.kPTM,
                        new Hv.Vec2(0, 0)
                      ),
                      isSensor: !0,
                    };
                  t.createFixture(B);
                }
              }
            }),
            t
          );
        })();
      var ub = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const lb = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (e._type = 2), e;
        }
        return (
          ub(e, t),
          (e.prototype.init = function () {
            t.prototype.init.call(this),
              (this._sprite = new Co(
                Jv.resources[this._findSpriteId()].texture
              )),
              this._sprite.anchor.set(0.5),
              this.addChild(this._sprite),
              new hb().createT(
                this._body,
                this._kBlockW,
                this._kBlockMargin,
                this._kSensorMargin,
                this._kDensityPerPixelArea,
                this._kFriction,
                this._rotationStep
              );
          }),
          (e.prototype.end = function () {
            this._world.destroyBody(this._body),
              (this._body = null),
              (this._world = null);
          }),
          (e.prototype._updateFixture = function (t, e) {
            new hb().createT(
              this._body,
              this._kBlockW,
              t,
              e,
              this._kDensityPerPixelArea,
              this._kFriction,
              this._rotationStep
            );
          }),
          e
        );
      })(ab);
      var cb = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const db = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (e._type = 3), e;
        }
        return (
          cb(e, t),
          (e.prototype.init = function () {
            t.prototype.init.call(this),
              (this._sprite = new Co(
                Jv.resources[this._findSpriteId()].texture
              )),
              this._sprite.anchor.set(0.5),
              this.addChild(this._sprite),
              new hb().createS(
                this._body,
                this._kBlockW,
                this._kBlockMargin,
                this._kSensorMargin,
                this._kDensityPerPixelArea,
                this._kFriction,
                this._rotationStep
              );
          }),
          (e.prototype.end = function () {
            this._world.destroyBody(this._body),
              (this._body = null),
              (this._world = null);
          }),
          (e.prototype._updateFixture = function (t, e) {
            new hb().createS(
              this._body,
              this._kBlockW,
              t,
              e,
              this._kDensityPerPixelArea,
              this._kFriction,
              this._rotationStep
            );
          }),
          e
        );
      })(ab);
      var pb = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const _b = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (e._type = 1), e;
        }
        return (
          pb(e, t),
          (e.prototype.init = function () {
            t.prototype.init.call(this),
              (this._sprite = new Co(
                Jv.resources[this._findSpriteId()].texture
              )),
              this._sprite.anchor.set(0.5),
              this.addChild(this._sprite),
              new hb().createO(
                this._body,
                this._kBlockW,
                this._kBlockMargin,
                this._kSensorMargin,
                this._kDensityPerPixelArea,
                this._kFriction,
                this._rotationStep
              );
          }),
          (e.prototype.end = function () {
            this._world.destroyBody(this._body),
              (this._body = null),
              (this._world = null);
          }),
          (e.prototype._updateFixture = function (t, e) {
            new hb().createO(
              this._body,
              this._kBlockW,
              t,
              e,
              this._kDensityPerPixelArea,
              this._kFriction,
              this._rotationStep
            );
          }),
          e
        );
      })(ab);
      var fb = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const mb = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (e._type = 0), e;
        }
        return (
          fb(e, t),
          (e.prototype.init = function () {
            t.prototype.init.call(this),
              (this._sprite = new Co(
                Jv.resources[this._findSpriteId()].texture
              )),
              this._sprite.anchor.set(0.5),
              this.addChild(this._sprite),
              new hb().createI(
                this._body,
                this._kBlockW,
                this._kBlockMargin,
                this._kSensorMargin,
                this._kDensityPerPixelArea,
                this._kFriction,
                this._rotationStep
              );
          }),
          (e.prototype.end = function () {
            this._world.destroyBody(this._body),
              (this._body = null),
              (this._world = null);
          }),
          (e.prototype._updateFixture = function (t, e) {
            new hb().createI(
              this._body,
              this._kBlockW,
              t,
              e,
              this._kDensityPerPixelArea,
              this._kFriction,
              this._rotationStep
            );
          }),
          e
        );
      })(ab);
      var yb = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const gb = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (e._type = 6), e;
        }
        return (
          yb(e, t),
          (e.prototype.init = function () {
            t.prototype.init.call(this),
              (this._sprite = new Co(
                Jv.resources[this._findSpriteId()].texture
              )),
              this._sprite.anchor.set(0.5),
              this.addChild(this._sprite),
              new hb().createL(
                this._body,
                this._kBlockW,
                this._kBlockMargin,
                this._kSensorMargin,
                this._kDensityPerPixelArea,
                this._kFriction,
                this._rotationStep
              );
          }),
          (e.prototype.end = function () {
            this._world.destroyBody(this._body),
              (this._body = null),
              (this._world = null);
          }),
          (e.prototype._updateFixture = function (t, e) {
            new hb().createL(
              this._body,
              this._kBlockW,
              t,
              e,
              this._kDensityPerPixelArea,
              this._kFriction,
              this._rotationStep
            );
          }),
          e
        );
      })(ab);
      var vb = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const bb = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (e._type = 4), e;
        }
        return (
          vb(e, t),
          (e.prototype.init = function () {
            t.prototype.init.call(this),
              (this._sprite = new Co(
                Jv.resources[this._findSpriteId()].texture
              )),
              this._sprite.anchor.set(0.5),
              this.addChild(this._sprite),
              new hb().createZ(
                this._body,
                this._kBlockW,
                this._kBlockMargin,
                this._kSensorMargin,
                this._kDensityPerPixelArea,
                this._kFriction,
                this._rotationStep
              );
          }),
          (e.prototype.end = function () {
            this._world.destroyBody(this._body),
              (this._body = null),
              (this._world = null);
          }),
          (e.prototype._updateFixture = function (t, e) {
            new hb().createZ(
              this._body,
              this._kBlockW,
              t,
              e,
              this._kDensityPerPixelArea,
              this._kFriction,
              this._rotationStep
            );
          }),
          e
        );
      })(ab);
      var xb = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const wb = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (e._type = 5), e;
        }
        return (
          xb(e, t),
          (e.prototype.init = function () {
            t.prototype.init.call(this),
              (this._sprite = new Co(
                Jv.resources[this._findSpriteId()].texture
              )),
              this._sprite.anchor.set(0.5),
              this.addChild(this._sprite),
              new hb().createJ(
                this._body,
                this._kBlockW,
                this._kBlockMargin,
                this._kSensorMargin,
                this._kDensityPerPixelArea,
                this._kFriction,
                this._rotationStep
              );
          }),
          (e.prototype.end = function () {
            this._world.destroyBody(this._body),
              (this._body = null),
              (this._world = null);
          }),
          (e.prototype._updateFixture = function (t, e) {
            new hb().createJ(
              this._body,
              this._kBlockW,
              t,
              e,
              this._kDensityPerPixelArea,
              this._kFriction,
              this._rotationStep
            );
          }),
          e
        );
      })(ab);
      var Tb = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const Ab = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (e._type = 8), e;
        }
        return (
          Tb(e, t),
          (e.prototype.init = function () {
            t.prototype.init.call(this),
              (this._sprite = new Co(Jv.resources.I_2x.texture)),
              this._sprite.anchor.set(0.5),
              this.addChild(this._sprite),
              new hb().createI(
                this._body,
                2 * this._kBlockW,
                this._kBlockMargin,
                this._kSensorMargin,
                0.3 * this._kDensityPerPixelArea,
                this._kFriction,
                this._rotationStep
              );
          }),
          (e.prototype.end = function () {
            this._world.destroyBody(this._body),
              (this._body = null),
              (this._world = null);
          }),
          (e.prototype._updateFixture = function (t, e) {
            new hb().createI(
              this._body,
              2 * this._kBlockW,
              t,
              e,
              0.3 * this._kDensityPerPixelArea,
              this._kFriction,
              this._rotationStep
            );
          }),
          e
        );
      })(ab);
      var Sb = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const Eb = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (e._type = 9), e;
        }
        return (
          Sb(e, t),
          (e.prototype.init = function () {
            t.prototype.init.call(this),
              (this._sprite = new Co(Jv.resources.O_2x.texture)),
              this._sprite.anchor.set(0.5),
              this.addChild(this._sprite),
              new hb().createO(
                this._body,
                2 * this._kBlockW,
                this._kBlockMargin,
                this._kSensorMargin,
                0.3 * this._kDensityPerPixelArea,
                this._kFriction,
                this._rotationStep
              );
          }),
          (e.prototype.end = function () {
            this._world.destroyBody(this._body),
              (this._body = null),
              (this._world = null);
          }),
          (e.prototype._updateFixture = function (t, e) {
            new hb().createO(
              this._body,
              2 * this._kBlockW,
              t,
              e,
              0.3 * this._kDensityPerPixelArea,
              this._kFriction,
              this._rotationStep
            );
          }),
          e
        );
      })(ab);
      var Cb = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const Mb = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (e._type = 14), e;
        }
        return (
          Cb(e, t),
          (e.prototype.init = function () {
            t.prototype.init.call(this),
              (this._sprite = new Co(Jv.resources.L_2x.texture)),
              this._sprite.anchor.set(0.5),
              this.addChild(this._sprite),
              new hb().createL(
                this._body,
                2 * this._kBlockW,
                this._kBlockMargin,
                this._kSensorMargin,
                0.3 * this._kDensityPerPixelArea,
                this._kFriction,
                this._rotationStep
              );
          }),
          (e.prototype.end = function () {
            this._world.destroyBody(this._body),
              (this._body = null),
              (this._world = null);
          }),
          (e.prototype._updateFixture = function (t, e) {
            new hb().createL(
              this._body,
              2 * this._kBlockW,
              t,
              e,
              0.3 * this._kDensityPerPixelArea,
              this._kFriction,
              this._rotationStep
            );
          }),
          e
        );
      })(ab);
      var Pb = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const Bb = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (e._type = 13), e;
        }
        return (
          Pb(e, t),
          (e.prototype.init = function () {
            t.prototype.init.call(this),
              (this._sprite = new Co(Jv.resources.J_2x.texture)),
              this._sprite.anchor.set(0.5),
              this.addChild(this._sprite),
              new hb().createJ(
                this._body,
                2 * this._kBlockW,
                this._kBlockMargin,
                this._kSensorMargin,
                0.3 * this._kDensityPerPixelArea,
                this._kFriction,
                this._rotationStep
              );
          }),
          (e.prototype.end = function () {
            this._world.destroyBody(this._body),
              (this._body = null),
              (this._world = null);
          }),
          (e.prototype._updateFixture = function (t, e) {
            new hb().createJ(
              this._body,
              2 * this._kBlockW,
              t,
              e,
              0.3 * this._kDensityPerPixelArea,
              this._kFriction,
              this._rotationStep
            );
          }),
          e
        );
      })(ab);
      var Ob = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const Rb = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (e._type = 11), e;
        }
        return (
          Ob(e, t),
          (e.prototype.init = function () {
            t.prototype.init.call(this),
              (this._sprite = new Co(Jv.resources.S_2x.texture)),
              this._sprite.anchor.set(0.5),
              this.addChild(this._sprite),
              new hb().createS(
                this._body,
                2 * this._kBlockW,
                this._kBlockMargin,
                this._kSensorMargin,
                0.3 * this._kDensityPerPixelArea,
                this._kFriction,
                this._rotationStep
              );
          }),
          (e.prototype.end = function () {
            this._world.destroyBody(this._body),
              (this._body = null),
              (this._world = null);
          }),
          (e.prototype._updateFixture = function (t, e) {
            new hb().createS(
              this._body,
              2 * this._kBlockW,
              t,
              e,
              0.3 * this._kDensityPerPixelArea,
              this._kFriction,
              this._rotationStep
            );
          }),
          e
        );
      })(ab);
      var Ib = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const kb = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (e._type = 10), e;
        }
        return (
          Ib(e, t),
          (e.prototype.init = function () {
            t.prototype.init.call(this),
              (this._sprite = new Co(Jv.resources.T_2x.texture)),
              this._sprite.anchor.set(0.5),
              this.addChild(this._sprite),
              new hb().createT(
                this._body,
                2 * this._kBlockW,
                this._kBlockMargin,
                this._kSensorMargin,
                0.3 * this._kDensityPerPixelArea,
                this._kFriction,
                this._rotationStep
              );
          }),
          (e.prototype.end = function () {
            this._world.destroyBody(this._body),
              (this._body = null),
              (this._world = null);
          }),
          (e.prototype._updateFixture = function (t, e) {
            new hb().createT(
              this._body,
              2 * this._kBlockW,
              t,
              e,
              0.3 * this._kDensityPerPixelArea,
              this._kFriction,
              this._rotationStep
            );
          }),
          e
        );
      })(ab);
      var Fb = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const Db = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (e._type = 12), e;
        }
        return (
          Fb(e, t),
          (e.prototype.init = function () {
            t.prototype.init.call(this),
              (this._sprite = new Co(Jv.resources.Z_2x.texture)),
              this._sprite.anchor.set(0.5),
              this.addChild(this._sprite),
              new hb().createZ(
                this._body,
                2 * this._kBlockW,
                this._kBlockMargin,
                this._kSensorMargin,
                0.3 * this._kDensityPerPixelArea,
                this._kFriction,
                this._rotationStep
              );
          }),
          (e.prototype.end = function () {
            this._world.destroyBody(this._body),
              (this._body = null),
              (this._world = null);
          }),
          (e.prototype._updateFixture = function (t, e) {
            new hb().createZ(
              this._body,
              2 * this._kBlockW,
              t,
              e,
              0.3 * this._kDensityPerPixelArea,
              this._kFriction,
              this._rotationStep
            );
          }),
          e
        );
      })(ab);
      var Nb = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        Lb = function (t) {
          var e = "function" == typeof Symbol && Symbol.iterator,
            i = e && t[e],
            r = 0;
          if (i) return i.call(t);
          if (t && "number" == typeof t.length)
            return {
              next: function () {
                return (
                  t && r >= t.length && (t = void 0),
                  { value: t && t[r++], done: !t }
                );
              },
            };
          throw new TypeError(
            e ? "Object is not iterable." : "Symbol.iterator is not defined."
          );
        },
        Ub = (function (t) {
          function e() {
            var e = t.call(this) || this;
            return (
              (e._index = null),
              (e._targetPos = null),
              (e._world = null),
              (e._sprite = null),
              (e._body = null),
              (e._state = null),
              (e._checkingTl = null),
              (e._emptyTimer = null),
              (e._debug = null),
              e
            );
          }
          return (
            Nb(e, t),
            Object.defineProperty(e.prototype, "index", {
              set: function (t) {
                this._index = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "targetPos", {
              set: function (t) {
                this._targetPos = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "world", {
              set: function (t) {
                this._world = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "worldBodyType", {
              get: function () {
                return 2;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "body", {
              get: function () {
                return this._body;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.init = function () {
              console.assert(
                null !== this._index,
                "ExtraBlock.ts :: init() :: this._index cannot be null."
              ),
                console.assert(
                  null != this._targetPos,
                  "ExtraBlock.ts :: init() :: this._targetPos cannot be null."
                ),
                console.assert(
                  null != this._world,
                  "ExtraBlock.ts :: init() :: this._world cannot be null."
                ),
                (this._state = 0),
                (this._sprite = new Co(
                  Jv.resources["extra_block_" + this._index.toString()].texture
                )),
                this._sprite.anchor.set(0.5),
                this.addChild(this._sprite),
                this.position.copyFrom(this._targetPos);
              var t = EE.i.world.toPlVec(this.position);
              this._body = this._world.createBody({
                type: Hv.Body.STATIC,
                position: t,
                userData: this,
              });
              var e = {
                shape: new Hv.BoxShape(
                  (0.5 * this._sprite.texture.width) / EE.i.world.kPTM,
                  (0.5 * this._sprite.texture.height) / EE.i.world.kPTM,
                  Hv.Vec2(0, 0)
                ),
                density: 0,
                friction: 1,
                restitution: 0,
              };
              this._body.createFixture(e),
                (this._checkingTl = new Uc.core.Timeline()),
                this._checkingTl.to(this._sprite, {
                  alpha: 0.4,
                  duration: 0.5,
                  ease: "sine.inOut",
                }),
                this._checkingTl.to(this._sprite, {
                  alpha: 1,
                  duration: 0.5,
                  ease: "sine.inOut",
                }),
                this._checkingTl.to(this._sprite, {
                  alpha: 0.4,
                  duration: 0.5,
                  ease: "sine.inOut",
                }),
                this._checkingTl.to(this._sprite, {
                  alpha: 1,
                  duration: 0.5,
                  ease: "sine.inOut",
                }),
                this._checkingTl.pause(0),
                EE.i.tweenGroup.add(this._checkingTl);
            }),
            (e.prototype.end = function () {
              this._checkingTl.kill(),
                (this._checkingTl = null),
                this._world.destroyBody(this._body),
                (this._body = null),
                (this._world = null);
            }),
            (e.prototype.update = function (t) {
              var e, i, r, n;
              switch (this._state) {
                case 0:
                  for (var o = !1, s = this._body.getContactList(); s; ) {
                    for (var a = s.contact; a; ) {
                      if (s.contact.isTouching()) {
                        o = !0;
                        break;
                      }
                      a = a.getNext();
                    }
                    if (o) break;
                    s = s.next;
                  }
                  o && (this._checkingTl.play(0), (this._state = 1));
                  break;
                case 1:
                  if (this._checkingTl.isActive()) return;
                  if (this._checkConnected()) this._state = 2;
                  else {
                    this._body.getFixtureList().setFriction(0),
                      this._body.getFixtureList().setSensor(!0),
                      (this._sprite.alpha = 0.5),
                      (this._emptyTimer = 0);
                    var h = [];
                    for (s = this._body.getContactList(); s; ) {
                      for (a = s.contact; a; ) {
                        if (s.contact.isTouching()) {
                          h.push(s.other.getUserData());
                          break;
                        }
                        a = a.getNext();
                      }
                      s = s.next;
                    }
                    try {
                      for (var u = Lb(h), l = u.next(); !l.done; l = u.next())
                        (_ = l.value).body.setAwake(!0);
                    } catch (t) {
                      e = { error: t };
                    } finally {
                      try {
                        l && !l.done && (i = u.return) && i.call(u);
                      } finally {
                        if (e) throw e.error;
                      }
                    }
                    this._state = 3;
                  }
                  break;
                case 2:
                  this._checkConnected() ||
                    (this._checkingTl.play(0), (this._state = 1));
                  break;
                case 3:
                  if (this._emptyTimer < 1) this._emptyTimer += t;
                  else {
                    for (h = [], s = this._body.getContactList(); s; ) {
                      for (a = s.contact; a; ) {
                        if (s.contact.isTouching()) {
                          h.push(s.other.getUserData());
                          break;
                        }
                        a = a.getNext();
                      }
                      s = s.next;
                    }
                    var c = !1;
                    try {
                      for (var d = Lb(h), p = d.next(); !p.done; p = d.next()) {
                        var _ = p.value;
                        if (
                          (c = this._checkSpriteOverlap(this._sprite, _.sprite))
                        )
                          break;
                      }
                    } catch (t) {
                      r = { error: t };
                    } finally {
                      try {
                        p && !p.done && (n = d.return) && n.call(d);
                      } finally {
                        if (r) throw r.error;
                      }
                    }
                    c ||
                      (this._body.getFixtureList().setFriction(1),
                      this._body.getFixtureList().setSensor(!1),
                      (this._sprite.alpha = 1),
                      (this._state = 0));
                  }
              }
            }),
            (e.prototype._checkConnected = function () {
              for (
                var t, e, i = !1, r = [], n = this._body.getContactList();
                n;

              ) {
                for (var o = n.contact; o; )
                  n.contact.isTouching() && r.push(n.other), (o = o.getNext());
                n = n.next;
              }
              var s = [];
              try {
                for (var a = Lb(r), h = a.next(); !h.done; h = a.next()) {
                  var u = h.value;
                  if ((i = this._checkMainTowerBody(u, s, 0))) break;
                }
              } catch (e) {
                t = { error: e };
              } finally {
                try {
                  h && !h.done && (e = a.return) && e.call(a);
                } finally {
                  if (t) throw t.error;
                }
              }
              return i;
            }),
            (e.prototype._checkMainTowerBody = function (t, e, i) {
              var r,
                n,
                o = !1;
              if (5 == i) o = !0;
              else {
                var s = t.getUserData().sprite.getBounds();
                e.push(t);
                for (var a = t.getContactList(), h = []; a; ) {
                  for (var u = !1, l = a.contact; l; ) {
                    if (l.isTouching()) {
                      u = !0;
                      break;
                    }
                    l = l.getNext();
                  }
                  if (u) {
                    if (
                      1 == a.other.getUserData().worldBodyType ||
                      (a.other != this._body &&
                        2 == a.other.getUserData().worldBodyType)
                    ) {
                      o = !0;
                      break;
                    }
                    0 == a.other.getUserData().worldBodyType &&
                      (e.includes(a.other) ||
                        (i > 0
                          ? a.other.getUserData().sprite.getBounds().bottom >
                              s.bottom && h.push(a.other)
                          : h.push(a.other)));
                  }
                  a = a.next;
                }
                if (!o)
                  try {
                    for (var c = Lb(h), d = c.next(); !d.done; d = c.next()) {
                      var p = d.value;
                      if ((o = this._checkMainTowerBody(p, e, i + 1))) break;
                    }
                  } catch (t) {
                    r = { error: t };
                  } finally {
                    try {
                      d && !d.done && (n = c.return) && n.call(c);
                    } finally {
                      if (r) throw r.error;
                    }
                  }
              }
              return o;
            }),
            (e.prototype._checkSpriteOverlap = function (t, e) {
              var i = t.getBounds(),
                r = e.getBounds(),
                n = i.x < r.x + r.width && i.x + i.width > r.x,
                o = i.y < r.y + r.height && i.y + i.height > r.y;
              return n && o;
            }),
            e
          );
        })(ce);
      const Gb = Ub;
      var Vb = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const jb = (function (t) {
        function e(e) {
          var i = t.call(this) || this;
          return (
            (i._resPath = null),
            (i._isPressed = !1),
            (i._resPath = e),
            (i.buttonMode = !0),
            (i.interactive = !0),
            (i.texture = Jv.resources[e.on].texture),
            e.hover && i.on("pointerover", i.onPointer_Over, i),
            e.pressed &&
              (i.on("pointerdown", i.onPointer_Down, i),
              i.on("pointerup", i.onPointer_Up, i),
              i.on("pointerupoutside", i.onPointer_Up, i)),
            (e.hover || e.pressed) && i.on("pointerout", i.onPointer_Out, i),
            i.on("pointertap", i.onPointer_Tap, i),
            i
          );
        }
        return (
          Vb(e, t),
          Object.defineProperty(e.prototype, "isEnabled", {
            get: function () {
              return (this.interactive = !0);
            },
            enumerable: !1,
            configurable: !0,
          }),
          (e.prototype.reset = function () {
            (this.texture = Jv.resources[this._resPath.on].texture),
              (this._isPressed = !1);
          }),
          (e.prototype.onPointer_Over = function () {
            this._isPressed ||
              (this.texture = Jv.resources[this._resPath.hover].texture);
          }),
          (e.prototype.onPointer_Out = function () {
            this._isPressed ||
              (this.texture = Jv.resources[this._resPath.on].texture);
          }),
          (e.prototype.onPointer_Down = function () {
            (this.texture = Jv.resources[this._resPath.pressed].texture),
              (this._isPressed = !0);
          }),
          (e.prototype.onPointer_Up = function () {
            (this.texture = Jv.resources[this._resPath.on].texture),
              (this._isPressed = !1);
          }),
          (e.prototype.onPointer_Tap = function () {
            Jv.audio.playSfx("button_click");
          }),
          (e.prototype.setEnabled = function (t) {
            (this.buttonMode = t),
              (this.interactive = t),
              this._resPath.off
                ? (this.texture =
                    Jv.resources[
                      t ? this._resPath.on : this._resPath.off
                    ].texture)
                : (this.texture = Jv.resources[this._resPath.on].texture);
          }),
          (e.prototype.setTextures = function (t) {
            (this._resPath = t),
              this.interactive && this._resPath.off
                ? (this.texture = Jv.resources[this._resPath.off].texture)
                : (this.texture = Jv.resources[this._resPath.on].texture);
          }),
          e
        );
      })(Co);
      var zb = (function () {
        function t() {}
        return (
          (t.createButton = function (t) {
            var e = new jb({ on: "button_on", pressed: "button_pressed" });
            e.anchor.set(0.5);
            var i = new Lo(t, { fontSize: 22, fill: "white" });
            return (i.name = "title"), i.anchor.set(0.5), e.addChild(i), e;
          }),
          (t.isCircleIntersection = function (t, e) {
            return (
              (t.radius + e.radius) * (t.radius + e.radius) >=
              (t.x - e.x) * (t.x - e.x) + (t.y - e.y) * (t.y - e.y)
            );
          }),
          (t.isCircleInsideCircle = function (t, e) {
            return (
              (t.radius - e.radius) * (t.radius - e.radius) >=
              (t.x - e.x) * (t.x - e.x) + (t.y - e.y) * (t.y - e.y)
            );
          }),
          (t.isPointInsideCircle = function (t, e) {
            return (
              e.radius * e.radius >=
              (t.x - e.x) * (t.x - e.x) + (t.y - e.y) * (t.y - e.y)
            );
          }),
          (t.isCircleRectangleIntersection = function (t, e) {
            var i = Math.abs(t.x - e.x),
              r = Math.abs(t.y - e.y);
            return !(
              i > e.width / 2 + t.radius ||
              r > e.height / 2 + t.radius ||
              !(
                i <= e.width / 2 ||
                r <= e.height / 2 ||
                Math.pow(i - e.width / 2, 2) + Math.pow(r - e.height / 2, 2) <=
                  t.radius * t.radius
              )
            );
          }),
          (t.isLineSegToCircleIntersection = function (t, e, i, r) {
            var n = new Vt(r.x - i.x, r.y - i.y),
              o = new Vt(i.x - t.x, r.y - t.y),
              s = n.x * n.x + n.y * n.y,
              a = 2 * (o.x * n.x + o.y * n.y),
              h = a * a - 4 * s * (o.x * o.x + o.y * o.y - e * e);
            if (h < 0) return !1;
            var u = (-a - (h = Math.sqrt(h))) / (2 * s),
              l = (-a + h) / (2 * s);
            return (u >= 0 && u <= 1) || (l >= 0 && l <= 1);
          }),
          (t.randomBoolean = function () {
            return 1 == Math.floor(2 * Math.random());
          }),
          (t.interpolate = function (t, e, i) {
            return t + (e - t) * i;
          }),
          (t.createTexArray = function (t, e) {
            for (var i = [], r = 0; r < e; ++r)
              i.push(Jv.resources[t + r.toString()].texture);
            return i;
          }),
          t
        );
      })();
      const Xb = zb;
      var Hb = function (t) {
          var e = "function" == typeof Symbol && Symbol.iterator,
            i = e && t[e],
            r = 0;
          if (i) return i.call(t);
          if (t && "number" == typeof t.length)
            return {
              next: function () {
                return (
                  t && r >= t.length && (t = void 0),
                  { value: t && t[r++], done: !t }
                );
              },
            };
          throw new TypeError(
            e ? "Object is not iterable." : "Symbol.iterator is not defined."
          );
        },
        Yb = (function () {
          function t() {
            (this._physics = null),
              (this._ground = null),
              (this._elapsedTime = null),
              (this._arrBlock = null),
              (this._curBlock = null),
              (this._spawnBlockCount = null),
              (this._nextBadModifierBlockCount = null),
              (this._arrPlatform = null),
              (this._arrDustAnim = null),
              (this._scrollTween = null),
              (this._isScrollPaused = null),
              (this._debugCreationList = null),
              (this._bfOnBeginContact = null),
              (this._bfOnEndContact = null),
              (this._kPTM = 100),
              (this._kStepDuration = 1 / 60);
          }
          return (
            Object.defineProperty(t.prototype, "physics", {
              get: function () {
                return this._physics;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "ground", {
              get: function () {
                return this._ground;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "blocks", {
              get: function () {
                return this._arrBlock;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "curBlock", {
              get: function () {
                return this._curBlock;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "spawnBlockCount", {
              get: function () {
                return this._spawnBlockCount;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "kPTM", {
              get: function () {
                return this._kPTM;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.init = function () {
              (this._elapsedTime = 0),
                (this._arrBlock = []),
                (this._spawnBlockCount = 0),
                (this._nextBadModifierBlockCount =
                  5 + Math.floor(3 * Math.random())),
                (this._arrPlatform = []),
                (this._isScrollPaused = !1),
                (this._arrDustAnim = []);
              for (
                var t = function (t) {
                    var i = new Zs(
                      Xb.createTexArray(
                        "dust_" +
                          Math.floor(3 * Math.random()).toString() +
                          "_",
                        22
                      )
                    );
                    i.anchor.set(0.5),
                      (i.animationSpeed = 30),
                      (i.autoUpdate = !1),
                      (i.loop = !1),
                      (i.visible = !1),
                      (i.onComplete = function () {
                        i.visible = !1;
                      }),
                      e._arrDustAnim.push(i);
                  },
                  e = this,
                  i = 0;
                i < 10;
                ++i
              )
                t();
              (this._physics = new Hv.World({
                gravity: new Hv.Vec2(0, 10),
                allowSleep: !0,
                warmStarting: !0,
                continuousPhysics: !0,
                subStepping: !1,
                blockSolve: !0,
                velocityIterations: 40,
                positionIterations: 15,
              })),
                (this._ground = new nb()),
                (this._ground.world = this._physics),
                this._ground.init(),
                EE.i.layers.actor.addChild(this._ground),
                (this._bfOnBeginContact = this._onBeginContact.bind(this)),
                this._physics.on("begin-contact", this._bfOnBeginContact);
            }),
            (t.prototype._onBeginContact = function (t) {
              var e,
                i,
                r,
                n,
                o = t.getFixtureA().getBody().getUserData(),
                s = t.getFixtureB().getBody().getUserData(),
                a = null;
              if (
                (t.getFixtureA().isSensor() && 0 == o.worldBodyType
                  ? (a = o)
                  : t.getFixtureB().isSensor() &&
                    0 == s.worldBodyType &&
                    (a = s),
                a)
              )
                a.onGrounded();
              else {
                if (
                  (this._curBlock &&
                    t.isTouching() &&
                    2 == this._curBlock.goodModifierType &&
                    (o == this._curBlock || s == this._curBlock) &&
                    EE.i.petrify(this._curBlock),
                  this._curBlock &&
                    (0 == o.worldBodyType || 0 == s.worldBodyType))
                ) {
                  var h = !0;
                  if (
                    ((o != this._curBlock && s != this._curBlock) ||
                      (h = 3 != this._curBlock.badModifierType) ||
                      (this._curBlock.badModifierType = 0),
                    h)
                  ) {
                    var u = t.getWorldManifold(null);
                    if (u) {
                      var l = u.points;
                      try {
                        for (
                          var c = Hb(l), d = c.next();
                          !d.done;
                          d = c.next()
                        ) {
                          var p = d.value;
                          if (0 != p.x && 0 != p.y) {
                            var _ = p.y * this._kPTM;
                            if (_ - EE.i.layers.actor.y <= Jv.app.height) {
                              var f = null;
                              try {
                                for (
                                  var m = ((r = void 0), Hb(this._arrDustAnim)),
                                    y = m.next();
                                  !y.done;
                                  y = m.next()
                                ) {
                                  var g = y.value;
                                  if (0 == g.visible) {
                                    f = g;
                                    break;
                                  }
                                }
                              } catch (t) {
                                r = { error: t };
                              } finally {
                                try {
                                  y && !y.done && (n = m.return) && n.call(m);
                                } finally {
                                  if (r) throw r.error;
                                }
                              }
                              f &&
                                ((f.visible = !0),
                                f.position.set(p.x * this._kPTM, _),
                                EE.i.layers.actor.addChild(f),
                                f.gotoAndPlay(0),
                                EE.i.addAnim(f));
                            }
                          }
                        }
                      } catch (t) {
                        e = { error: t };
                      } finally {
                        try {
                          d && !d.done && (i = c.return) && i.call(c);
                        } finally {
                          if (e) throw e.error;
                        }
                      }
                    }
                  }
                }
                if (
                  (0 == o.worldBodyType &&
                    (1 == s.worldBodyType || 2 == s.worldBodyType)) ||
                  (0 == s.worldBodyType && 1 == o.worldBodyType) ||
                  2 == o.worldBodyType
                ) {
                  var v = 0 == o.worldBodyType ? o : s;
                  this._curBlock == v &&
                    (v.onContact(),
                    (this._curBlock = null),
                    (EE.i.input.curBlock = null),
                    EE.i.hud.setRotateButton());
                } else if (
                  (0 == o.worldBodyType && 0 == s.worldBodyType) ||
                  (0 == s.worldBodyType && 0 == o.worldBodyType)
                ) {
                  var b = null,
                    x = o;
                  if (this._curBlock == x) b = x;
                  else {
                    var w = s;
                    this._curBlock == w && (b = w);
                  }
                  if (b) {
                    var T = 100 - EE.i.layers.actor.y + 500;
                    b.y < T &&
                      ((this._scrollTween = Uc.to(EE.i.layers.actor, {
                        y: "+=" + (T - b.y),
                        duration: 1,
                        ease: "sine.out",
                      })),
                      EE.i.tweenGroup.add(this._scrollTween)),
                      b.onContact(),
                      (this._curBlock = null),
                      (EE.i.input.curBlock = null),
                      EE.i.hud.setRotateButton();
                  }
                }
              }
            }),
            (t.prototype.end = function () {
              var t, e, i, r;
              this._scrollTween &&
                (this._scrollTween.kill(), (this._scrollTween = null)),
                this._physics.off("begin-contact", this._bfOnBeginContact),
                (this._bfOnBeginContact = null),
                this._ground.end(),
                (this._ground = null);
              try {
                for (
                  var n = Hb(this._arrBlock), o = n.next();
                  !o.done;
                  o = n.next()
                )
                  o.value.end();
              } catch (e) {
                t = { error: e };
              } finally {
                try {
                  o && !o.done && (e = n.return) && e.call(n);
                } finally {
                  if (t) throw t.error;
                }
              }
              try {
                for (
                  var s = Hb(this._arrPlatform), a = s.next();
                  !a.done;
                  a = s.next()
                )
                  a.value.end();
              } catch (t) {
                i = { error: t };
              } finally {
                try {
                  a && !a.done && (r = s.return) && r.call(s);
                } finally {
                  if (i) throw i.error;
                }
              }
              this._physics = null;
            }),
            (t.prototype.update = function (t) {
              var e, i, r, n, o, s;
              for (
                this._elapsedTime += t;
                this._elapsedTime > this._kStepDuration;

              )
                this._physics.step(this._kStepDuration),
                  (this._elapsedTime -= this._kStepDuration);
              this._ground.update(t);
              try {
                for (
                  var a = Hb(this._arrPlatform), h = a.next();
                  !h.done;
                  h = a.next()
                )
                  h.value.update(t);
              } catch (t) {
                e = { error: t };
              } finally {
                try {
                  h && !h.done && (i = a.return) && i.call(a);
                } finally {
                  if (e) throw e.error;
                }
              }
              try {
                for (
                  var u = Hb(this._arrBlock), l = u.next();
                  !l.done;
                  l = u.next()
                )
                  (_ = l.value).update(t);
              } catch (t) {
                r = { error: t };
              } finally {
                try {
                  l && !l.done && (n = u.return) && n.call(u);
                } finally {
                  if (r) throw r.error;
                }
              }
              if (
                !(
                  this._isScrollPaused ||
                  (this._scrollTween && this._scrollTween.isActive())
                )
              ) {
                var c = null;
                try {
                  for (
                    var d = Hb(this._arrBlock), p = d.next();
                    !p.done;
                    p = d.next()
                  ) {
                    var _;
                    (_ = p.value) != this._curBlock &&
                      (null === c || _.y < c) &&
                      (c = _.y);
                  }
                } catch (t) {
                  o = { error: t };
                } finally {
                  try {
                    p && !p.done && (s = d.return) && s.call(d);
                  } finally {
                    if (o) throw o.error;
                  }
                }
                if (
                  null !== c &&
                  c + EE.i.layers.actor.y >= Jv.app.height - 300
                ) {
                  var f = c + EE.i.layers.actor.y - (Jv.app.height - 300);
                  EE.i.layers.actor.y - f < 0 && (f = EE.i.layers.actor.y),
                    (this._scrollTween = Uc.to(EE.i.layers.actor, {
                      y: "-=" + f,
                      duration: 1,
                      ease: "sine.out",
                    })),
                    EE.i.tweenGroup.add(this._scrollTween);
                }
              }
            }),
            (t.prototype.findTowerTop = function () {
              var t,
                e,
                i = this._ground.y - this._ground.height;
              try {
                for (
                  var r = Hb(this._arrBlock), n = r.next();
                  !n.done;
                  n = r.next()
                ) {
                  var o = n.value;
                  if (o != this._curBlock) {
                    var s = EE.i.layers.actor.toLocal(
                      new Vt(o.getBounds().x, o.getBounds().y)
                    );
                    s.y < i && (i = s.y);
                  }
                }
              } catch (e) {
                t = { error: e };
              } finally {
                try {
                  n && !n.done && (e = r.return) && e.call(r);
                } finally {
                  if (t) throw t.error;
                }
              }
              return i;
            }),
            (t.prototype.findPlatformTop = function () {
              var t,
                e,
                i = this._ground.y - this._ground.height;
              try {
                for (
                  var r = Hb(this._arrPlatform), n = r.next();
                  !n.done;
                  n = r.next()
                ) {
                  var o = n.value,
                    s = EE.i.layers.actor.toLocal(
                      new Vt(o.getBounds().x, o.getBounds().y)
                    );
                  s.y < i && (i = s.y);
                }
              } catch (e) {
                t = { error: e };
              } finally {
                try {
                  n && !n.done && (e = r.return) && e.call(r);
                } finally {
                  if (t) throw t.error;
                }
              }
              return i;
            }),
            (t.prototype.findTowerSideLimits = function (t, e) {
              var i,
                r,
                n = [0.5 * Jv.app.width, 0.5 * Jv.app.width];
              try {
                for (
                  var o = Hb(this._arrBlock), s = o.next();
                  !s.done;
                  s = o.next()
                ) {
                  var a = s.value;
                  if (a != this._curBlock) {
                    var h = a.getBounds(),
                      u = EE.i.layers.actor.toLocal(new Vt(h.x, h.y)),
                      l = EE.i.layers.actor.toLocal(
                        new Vt(h.x + h.width, h.y + h.height)
                      );
                    u.y > t &&
                      l.y < e &&
                      ((null === n[0] || u.x < n[0]) && (n[0] = u.x),
                      (null === n[1] || l.x > n[1]) && (n[1] = l.x));
                  }
                }
              } catch (t) {
                i = { error: t };
              } finally {
                try {
                  s && !s.done && (r = o.return) && r.call(o);
                } finally {
                  if (i) throw i.error;
                }
              }
              return n;
            }),
            (t.prototype.createBlock = function (t) {
              void 0 === t && (t = null), (this._spawnBlockCount += 1);
              var e = null;
              this._debugCreationList &&
                ((e = this._debugCreationList.shift()),
                0 == this._debugCreationList.length &&
                  (this._debugCreationList = null));
              var i = 0;
              this._spawnBlockCount >= this._nextBadModifierBlockCount &&
                ((this._spawnBlockCount = 0),
                (this._nextBadModifierBlockCount =
                  5 + Math.floor(3 * Math.random())),
                (i = 1 + Math.floor(5 * Math.random()))),
                e &&
                  (e.badModifierType
                    ? ((i = e.badModifierType), (t = null))
                    : (t = e.blockType));
              var r = null;
              if (null !== t)
                switch (t) {
                  case 0:
                    r = new mb();
                    break;
                  case 6:
                    r = new gb();
                    break;
                  case 5:
                    r = new wb();
                    break;
                  case 1:
                    r = new _b();
                    break;
                  case 3:
                    r = new db();
                    break;
                  case 2:
                    r = new lb();
                    break;
                  case 4:
                    r = new bb();
                }
              else if (5 != i)
                switch (Math.floor(7 * Math.random())) {
                  case 0:
                    r = new mb();
                    break;
                  case 6:
                    r = new gb();
                    break;
                  case 5:
                    r = new wb();
                    break;
                  case 1:
                    r = new _b();
                    break;
                  case 3:
                    r = new db();
                    break;
                  case 2:
                    r = new lb();
                    break;
                  case 4:
                    r = new bb();
                }
              else {
                var n = 8 + Math.floor(7 * Math.random());
                switch ((e && e.blockType && (n = e.blockType), n)) {
                  case 8:
                    r = new Ab();
                    break;
                  case 14:
                    r = new Mb();
                    break;
                  case 13:
                    r = new Bb();
                    break;
                  case 9:
                    r = new Eb();
                    break;
                  case 11:
                    r = new Rb();
                    break;
                  case 10:
                    r = new kb();
                    break;
                  case 12:
                    r = new Db();
                }
              }
              return (
                (r.world = this._physics),
                (r.badModifierType = i),
                r.init(),
                EE.i.layers.actor.children[3].addChild(r),
                this._arrBlock.push(r),
                (this._curBlock = r),
                r
              );
            }),
            (t.prototype.removeBlock = function (t) {
              t == this._curBlock && (this._curBlock = null);
              for (var e = 0; e < this._arrBlock.length; ++e)
                if (this._arrBlock[e] == t) {
                  this._arrBlock.splice(e, 1), t.parent.removeChild(t), t.end();
                  break;
                }
            }),
            (t.prototype.createExtraBlock = function (t, e) {
              var i = new Gb();
              return (
                (i.index = t),
                (i.targetPos = e),
                (i.world = this._physics),
                i.init(),
                EE.i.layers.actor.children[1].addChild(i),
                this._arrPlatform.push(i),
                i
              );
            }),
            (t.prototype.createJoint = function (t, e) {
              var i = t.body
                .getPosition()
                .clone()
                .add(e.body.getPosition())
                .mul(0.5);
              this._physics.createJoint(
                new Hv.WeldJoint({
                  bodyA: t.body,
                  localAnchorA: t.body.getLocalPoint(i),
                  bodyB: e.body,
                  localAnchorB: e.body.getLocalPoint(i),
                })
              );
            }),
            (t.prototype.setStatic = function (t) {
              t.body.setStatic();
            }),
            (t.prototype.calcTowerBlockCount = function () {
              var t,
                e,
                i = 0,
                r = this._ground.y - 0.5 * this._ground.height;
              try {
                for (
                  var n = Hb(this._arrBlock), o = n.next();
                  !o.done;
                  o = n.next()
                ) {
                  var s = o.value;
                  s != this._curBlock && s.y < r && (i += 1);
                }
              } catch (e) {
                t = { error: e };
              } finally {
                try {
                  o && !o.done && (e = n.return) && e.call(n);
                } finally {
                  if (t) throw t.error;
                }
              }
              return i;
            }),
            (t.prototype.calcTowerTop = function () {
              var t,
                e,
                i = this._ground.y - 0.5 * this._ground.height,
                r = i;
              try {
                for (
                  var n = Hb(this._arrBlock), o = n.next();
                  !o.done;
                  o = n.next()
                ) {
                  var s = o.value;
                  s != this._curBlock && s.y < r && (r = s.y);
                }
              } catch (e) {
                t = { error: e };
              } finally {
                try {
                  o && !o.done && (e = n.return) && e.call(n);
                } finally {
                  if (t) throw t.error;
                }
              }
              return i - r;
            }),
            (t.prototype.isTowerOverY = function (t) {
              var e,
                i,
                r = !1;
              try {
                for (
                  var n = Hb(this._arrBlock), o = n.next();
                  !o.done;
                  o = n.next()
                ) {
                  var s = o.value.getBounds();
                  if (EE.i.layers.actor.toLocal(new Vt(s.x, s.y)).y <= t) {
                    r = !0;
                    break;
                  }
                }
              } catch (t) {
                e = { error: t };
              } finally {
                try {
                  o && !o.done && (i = n.return) && i.call(n);
                } finally {
                  if (e) throw e.error;
                }
              }
              return r;
            }),
            (t.prototype.checkTowerStability = function () {
              var t,
                e,
                i = !0;
              try {
                for (
                  var r = Hb(this._arrBlock), n = r.next();
                  !n.done;
                  n = r.next()
                ) {
                  var o = n.value.body.getLinearVelocity();
                  (Math.abs(o.x) > 0.1 || Math.abs(o.y) > 0.1) && (i = !1);
                }
              } catch (e) {
                t = { error: e };
              } finally {
                try {
                  n && !n.done && (e = r.return) && e.call(r);
                } finally {
                  if (t) throw t.error;
                }
              }
              return i;
            }),
            (t.prototype.pauseScroll = function () {
              this._scrollTween && this._scrollTween.pause(),
                (this._isScrollPaused = !0);
            }),
            (t.prototype.resumeScroll = function () {
              this._scrollTween && this._scrollTween.resume(),
                (this._isScrollPaused = !1);
            }),
            (t.prototype.findPlacedBlockAt = function (t) {
              var e,
                i,
                r = null;
              try {
                for (
                  var n = Hb(this._arrBlock), o = n.next();
                  !o.done;
                  o = n.next()
                ) {
                  var s = o.value;
                  if (s != this._curBlock) {
                    for (var a = s.body.getFixtureList(); a; a = a.getNext())
                      if (a.testPoint(this.toPlVec(t))) {
                        r = s;
                        break;
                      }
                    if (r) break;
                  }
                }
              } catch (t) {
                e = { error: t };
              } finally {
                try {
                  o && !o.done && (i = n.return) && i.call(n);
                } finally {
                  if (e) throw e.error;
                }
              }
              return r;
            }),
            (t.prototype.toPixiPoint = function (t) {
              return new Vt(t.x * this._kPTM, t.y * this._kPTM);
            }),
            (t.prototype.toPlVec = function (t) {
              return new Hv.Vec2(t.x / this._kPTM, t.y / this._kPTM);
            }),
            (t.prototype.toPlVecXY = function (t, e) {
              return new Hv.Vec2(t / this._kPTM, e / this._kPTM);
            }),
            t
          );
        })();
      const Wb = Yb,
        qb = (function () {
          function t() {
            this._tl = null;
          }
          return (
            (t.prototype.init = function () {
              (this._tl = new Uc.core.Timeline()),
                (this._tl.smoothChildTiming = !0),
                (this._tl.autoRemoveChildren = !0);
            }),
            (t.prototype.end = function () {
              this._tl.kill(), (this._tl = null);
            }),
            (t.prototype.pause = function () {
              this._tl.pause();
            }),
            (t.prototype.resume = function () {
              this._tl.resume();
            }),
            (t.prototype.add = function (t) {
              this._tl.add(t, this._tl.time()), this._tl.play(this._tl.time());
            }),
            t
          );
        })(),
        $b = (function () {
          function t() {
            (this._curBlock = null),
              (this._pointerDownPos = null),
              (this._autoMoveTimer = null),
              (this._autoMoveDir = null),
              (this._state = null),
              (this._isEnabled = null),
              (this._isFallEnabled = null),
              (this._isMoveLeftEnabled = null),
              (this._isMoveRightEnabled = null),
              (this._keyDownListener = null),
              (this._keyUpListener = null),
              (this._curKeyDown = null),
              (this._curMoveBtnDir = null),
              (this._onMovedRight = null),
              (this._onMovedLeft = null),
              (this._onFall = null),
              (this._onArrowUp = null);
          }
          return (
            Object.defineProperty(t.prototype, "curBlock", {
              get: function () {
                return this._curBlock;
              },
              set: function (t) {
                this._curBlock = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "isFallEnabled", {
              set: function (t) {
                this._isFallEnabled = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "isMoveLeftEnabled", {
              set: function (t) {
                this._isMoveLeftEnabled = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "isMoveRightEnabled", {
              set: function (t) {
                this._isMoveRightEnabled = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "isEnabled", {
              get: function () {
                return this._isEnabled;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "onMovedRight", {
              get: function () {
                return this._onMovedRight;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "onMovedLeft", {
              get: function () {
                return this._onMovedLeft;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "onFall", {
              get: function () {
                return this._onFall;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "onArrowUp", {
              get: function () {
                return this._onArrowUp;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.init = function () {
              (this._onMovedRight = new (eb().Signal)()),
                (this._onMovedLeft = new (eb().Signal)()),
                (this._onFall = new (eb().Signal)()),
                (this._onArrowUp = new (eb().Signal)()),
                (this._pointerDownPos = null),
                (this._state = 0),
                (this._isEnabled = !0),
                (this._isFallEnabled = !0),
                (this._isMoveLeftEnabled = !0),
                (this._isMoveRightEnabled = !0),
                (this._curMoveBtnDir = 0),
                EE.i.layers.input.on("pointerdown", this._onPointerDown, this),
                EE.i.layers.input.on("pointerup", this._onPointerUp, this),
                EE.i.layers.input.on(
                  "pointerupoutside",
                  this._onPointerUp,
                  this
                ),
                EE.i.layers.input.on("pointermove", this._onPointerMove, this),
                (this._keyDownListener = this._onKeyDown.bind(this)),
                document.addEventListener("keydown", this._keyDownListener),
                (this._keyUpListener = this._onKeyUp.bind(this)),
                document.addEventListener("keyup", this._keyUpListener);
            }),
            (t.prototype._onPointerDown = function () {
              this._isEnabled &&
                this._curBlock &&
                ((this._autoMoveTimer = 0),
                (this._pointerDownPos = EE.i.toLocal(
                  Jv.app.renderer.plugins.interaction.eventData.data.global
                )),
                this._pointerDownPos.x < this._curBlock.x
                  ? (this._autoMoveDir = -1)
                  : (this._autoMoveDir = 1),
                (this._state = 1));
            }),
            (t.prototype._onPointerUp = function () {
              (this._pointerDownPos = null),
                this._isEnabled &&
                  this._curBlock &&
                  0 != this._state &&
                  (this._isMoveLeftEnabled || this._isMoveRightEnabled) &&
                  (2 == this._state
                    ? (this._state = 0)
                    : EE.i.toLocal(
                        Jv.app.renderer.plugins.interaction.eventData.data
                          .global
                      ).x < this._curBlock.x
                    ? this._isMoveLeftEnabled &&
                      (this._curBlock.moveLeft(), this._onMovedLeft.dispatch())
                    : this._isMoveRightEnabled &&
                      (this._curBlock.moveRight(),
                      this._onMovedRight.dispatch()));
            }),
            (t.prototype._onPointerMove = function () {
              if (
                this._isEnabled &&
                this._curBlock &&
                this._pointerDownPos &&
                1 == this._state
              ) {
                var t = EE.i.toLocal(
                  Jv.app.renderer.plugins.interaction.eventData.data.global
                );
                this._isFallEnabled && t.y - this._pointerDownPos.y > 100
                  ? (this._onFall.dispatch(),
                    Jv.audio.playSfx("swipe_down"),
                    this._curBlock.onFreeFall(),
                    (this._curBlock = null),
                    (this._state = 0))
                  : t.x - this._pointerDownPos.x > 100
                  ? (this._curBlock.moveRight(),
                    this._onMovedRight.dispatch(),
                    (this._state = 0))
                  : t.x - this._pointerDownPos.x < -100 &&
                    (this._curBlock.moveLeft(),
                    this._onMovedLeft.dispatch(),
                    (this._state = 0));
              }
            }),
            (t.prototype._onKeyDown = function (t) {
              if (
                this._isEnabled &&
                this._curBlock &&
                null == this._curKeyDown &&
                this._curKeyDown != t.key
              )
                switch (t.key) {
                  case "ArrowDown":
                    if (!this._isFallEnabled) return;
                    (this._curKeyDown = t.key),
                      this._onFall.dispatch(),
                      Jv.audio.playSfx("swipe_down"),
                      this._curBlock.onFreeFall(),
                      (this._curBlock = null),
                      (this._state = 0);
                    break;
                  case "ArrowUp":
                    EE.i.input.curBlock &&
                      ((this._curKeyDown = t.key),
                      EE.i.input.curBlock.rotate(),
                      Jv.audio.playSfx("rotace_bloku"),
                      this._onArrowUp.dispatch());
                    break;
                  case "ArrowLeft":
                    (this._curKeyDown = t.key),
                      this._isMoveLeftEnabled &&
                        (this._curBlock.moveLeft(),
                        this._onMovedLeft.dispatch()),
                      (this._state = 1);
                    break;
                  case "ArrowRight":
                    (this._curKeyDown = t.key),
                      this._isMoveRightEnabled &&
                        (this._curBlock.moveRight(),
                        this._onMovedRight.dispatch()),
                      (this._state = 1);
                }
            }),
            (t.prototype._onKeyUp = function (t) {
              this._curKeyDown == t.key &&
                ((this._curKeyDown = null),
                (this._autoMoveTimer = 0),
                (this._state = 0));
            }),
            (t.prototype.end = function () {
              document.removeEventListener("keydown", this._keyDownListener),
                (this._keyDownListener = null),
                document.removeEventListener("keyup", this._keyUpListener),
                (this._keyUpListener = null),
                this._onArrowUp.dispose(),
                (this._onArrowUp = null),
                this._onMovedRight.dispose(),
                (this._onMovedRight = null),
                this._onMovedLeft.dispose(),
                (this._onMovedLeft = null),
                this._onFall.dispose(),
                (this._onFall = null),
                (this._curKeyDown = null),
                (this._curMoveBtnDir = 0);
            }),
            (t.prototype.update = function (t) {
              this._isEnabled &&
                this._curBlock &&
                0 != this._state &&
                (null != this._pointerDownPos
                  ? ((this._autoMoveTimer += t),
                    this._autoMoveTimer > 0.4 &&
                      (1 == this._state && (this._state = 2),
                      this._autoMoveDir < 0
                        ? this._curBlock.moveLeft()
                        : this._curBlock.moveRight(),
                      (this._autoMoveTimer = 0)))
                  : "ArrowLeft" == this._curKeyDown ||
                    "ArrowRight" == this._curKeyDown
                  ? ((this._autoMoveTimer += t),
                    this._autoMoveTimer > 0.4 &&
                      ((this._state = 2),
                      "ArrowLeft" == this._curKeyDown
                        ? this._curBlock.moveLeft()
                        : this._curBlock.moveRight(),
                      (this._autoMoveTimer = 0)))
                  : 0 != this._curMoveBtnDir &&
                    ((this._autoMoveTimer += t),
                    this._autoMoveTimer > 0.4 &&
                      ((this._state = 2),
                      -1 == this._curMoveBtnDir
                        ? this._curBlock.moveLeft()
                        : this._curBlock.moveRight(),
                      (this._autoMoveTimer = 0))));
            }),
            (t.prototype.setEnabled = function (t) {
              this._isEnabled = t;
            }),
            (t.prototype.onMoveBtnDown = function (t) {
              this._isEnabled &&
                this._curBlock &&
                0 == this._curMoveBtnDir &&
                ((this._curMoveBtnDir = t),
                -1 == this._curMoveBtnDir
                  ? this._isMoveLeftEnabled &&
                    (this._curBlock.moveLeft(), this._onMovedLeft.dispatch())
                  : 1 == this._curMoveBtnDir &&
                    this._isMoveRightEnabled &&
                    (this._curBlock.moveRight(), this._onMovedRight.dispatch()),
                (this._state = 1));
            }),
            (t.prototype.onMoveBtnUp = function () {
              (this._curMoveBtnDir = 0),
                (this._autoMoveTimer = 0),
                (this._state = 0);
            }),
            t
          );
        })();
      var Kb = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const Jb = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (
            (e._powerupType = null),
            (e._countText = null),
            (e._count = null),
            (e._onTriggered = null),
            e
          );
        }
        return (
          Kb(e, t),
          Object.defineProperty(e.prototype, "powerupType", {
            get: function () {
              return this._powerupType;
            },
            set: function (t) {
              this._powerupType = t;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(e.prototype, "count", {
            get: function () {
              return this._count;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(e.prototype, "onTriggered", {
            get: function () {
              return this._onTriggered;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (e.prototype.init = function () {
            (this._onTriggered = new tb.Signal()), (this._count = 1);
            var t = new jb({
              on: "powerup_" + this._powerupType.toString(),
              pressed: "powerup_" + this._powerupType.toString() + "_pressed",
            });
            t.anchor.set(0.5),
              this.addChild(t),
              t.on("pointertap", this._onClick, this),
              (this._countText = new Lo("x1", {
                fontFamily: "tilt_warp_regular",
                fill: "#ffffff",
                fontSize: 30,
                strokeThickness: 4,
                lineJoin: "round",
              })),
              this._countText.anchor.set(1),
              this._countText.position.set(0.5 * t.width),
              this.addChild(this._countText);
          }),
          (e.prototype._onClick = function () {
            this._onTriggered.dispatch(this);
          }),
          (e.prototype.end = function () {
            this._onTriggered.dispose(), (this._onTriggered = null);
          }),
          (e.prototype.addOne = function () {
            (this._count += 1),
              (this._countText.text = "x" + this._count.toString());
          }),
          (e.prototype.removeOne = function () {
            (this._count -= 1),
              (this._countText.text = "x" + this._count.toString());
          }),
          e
        );
      })(ce);
      var Zb = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        Qb = function (t) {
          var e = "function" == typeof Symbol && Symbol.iterator,
            i = e && t[e],
            r = 0;
          if (i) return i.call(t);
          if (t && "number" == typeof t.length)
            return {
              next: function () {
                return (
                  t && r >= t.length && (t = void 0),
                  { value: t && t[r++], done: !t }
                );
              },
            };
          throw new TypeError(
            e ? "Object is not iterable." : "Symbol.iterator is not defined."
          );
        },
        tx = (function (t) {
          function e() {
            var e = t.call(this) || this;
            return (
              (e._arrPowerupSlot = null),
              (e._onPowerupTriggered = null),
              (e._kPowerupSlotMargin = 100),
              e
            );
          }
          return (
            Zb(e, t),
            Object.defineProperty(e.prototype, "onPowerupTriggered", {
              get: function () {
                return this._onPowerupTriggered;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.init = function () {
              (this._onPowerupTriggered = new tb.Signal()),
                (this._arrPowerupSlot = new Array());
            }),
            (e.prototype.end = function () {
              var t, e;
              this._onPowerupTriggered.dispose(),
                (this._onPowerupTriggered = null);
              try {
                for (
                  var i = Qb(this._arrPowerupSlot), r = i.next();
                  !r.done;
                  r = i.next()
                )
                  r.value.end();
              } catch (e) {
                t = { error: e };
              } finally {
                try {
                  r && !r.done && (e = i.return) && e.call(i);
                } finally {
                  if (t) throw t.error;
                }
              }
            }),
            (e.prototype.findTargetPos = function (t) {
              var e,
                i,
                r = null;
              try {
                for (
                  var n = Qb(this._arrPowerupSlot), o = n.next();
                  !o.done;
                  o = n.next()
                ) {
                  var s = o.value;
                  if (s.powerupType == t) {
                    r = EE.i.layers.hud.toLocal(s.getGlobalPosition());
                    break;
                  }
                }
              } catch (t) {
                e = { error: t };
              } finally {
                try {
                  o && !o.done && (i = n.return) && i.call(n);
                } finally {
                  if (e) throw e.error;
                }
              }
              return (
                r ||
                  ((r = EE.i.layers.hud.toLocal(this.getGlobalPosition())).y -=
                    this._arrPowerupSlot.length * this._kPowerupSlotMargin),
                r
              );
            }),
            (e.prototype.addPowerup = function (t) {
              var e,
                i,
                r = !1;
              try {
                for (
                  var n = Qb(this._arrPowerupSlot), o = n.next();
                  !o.done;
                  o = n.next()
                ) {
                  var s;
                  if ((s = o.value).powerupType == t) {
                    (r = !0), s.addOne();
                    break;
                  }
                }
              } catch (t) {
                e = { error: t };
              } finally {
                try {
                  o && !o.done && (i = n.return) && i.call(n);
                } finally {
                  if (e) throw e.error;
                }
              }
              r ||
                (((s = new Jb()).powerupType = t),
                s.init(),
                (s.y = -this._kPowerupSlotMargin * this._arrPowerupSlot.length),
                this.addChild(s),
                s.onTriggered.add(this._onPowerup_Triggered, this),
                this._arrPowerupSlot.push(s));
            }),
            (e.prototype._onPowerup_Triggered = function (t) {
              this._onPowerupTriggered.dispatch(t);
            }),
            (e.prototype.removePowerup = function (t) {
              var e,
                i,
                r = 0;
              try {
                for (
                  var n = Qb(this._arrPowerupSlot), o = n.next();
                  !o.done;
                  o = n.next()
                ) {
                  var s = o.value;
                  if (s.powerupType == t && (s.removeOne(), 0 == s.count)) {
                    s.end(),
                      s.parent.removeChild(s),
                      this._arrPowerupSlot.splice(r, 1);
                    break;
                  }
                  r += 1;
                }
              } catch (t) {
                e = { error: t };
              } finally {
                try {
                  o && !o.done && (i = n.return) && i.call(n);
                } finally {
                  if (e) throw e.error;
                }
              }
              for (var a = 0; a < this._arrPowerupSlot.length; ++a)
                this._arrPowerupSlot[a].y = -a * this._kPowerupSlotMargin;
            }),
            e
          );
        })(ce);
      const ex = tx;
      var ix = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const rx = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (
            (e._scoreTitleText = null),
            (e._scoreValueText = null),
            (e._wellDoneNotification = null),
            (e._powerupMenu = null),
            (e._moveLeftButton = null),
            (e._moveRightButton = null),
            (e._rotateButton = null),
            (e._scoreTween = null),
            (e._onFinalCountdownCompleted = null),
            (e._onRaceCountdownCompleted = null),
            e
          );
        }
        return (
          ix(e, t),
          Object.defineProperty(e.prototype, "powerupMenu", {
            get: function () {
              return this._powerupMenu;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(e.prototype, "rotateButton", {
            get: function () {
              return this._rotateButton;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(e.prototype, "onFinalCountdownCompleted", {
            get: function () {
              return this._onFinalCountdownCompleted;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(e.prototype, "onRaceCountdownCompleted", {
            get: function () {
              return this._onRaceCountdownCompleted;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (e.prototype.init = function () {
            (this._onFinalCountdownCompleted = new tb.Signal()),
              (this._onRaceCountdownCompleted = new tb.Signal()),
              (this._scoreTitleText = new Lo("Score", {
                fontFamily: "tilt_warp_regular",
                dropShadow: !0,
                dropShadowAngle: 0.7,
                dropShadowBlur: 2,
                dropShadowDistance: 4,
                fill: "#ffffff",
                fontSize: 25,
                strokeThickness: 4,
                lineJoin: "round",
              })),
              this._scoreTitleText.position.set(20),
              this.addChild(this._scoreTitleText),
              (this._scoreValueText = new Lo("0", {
                fontFamily: "tilt_warp_regular",
                dropShadow: !0,
                dropShadowAngle: 0.7,
                dropShadowBlur: 2,
                dropShadowDistance: 4,
                fill: "#ffffff",
                fontSize: 40,
                strokeThickness: 4,
                lineJoin: "round",
              })),
              this._scoreValueText.position.set(
                this._scoreTitleText.x,
                this._scoreTitleText.y + this._scoreTitleText.height - 10
              ),
              this.addChild(this._scoreValueText),
              (this._wellDoneNotification = new Co(
                Jv.resources.notification_well_done.texture
              )),
              this._wellDoneNotification.anchor.set(0.5),
              this._wellDoneNotification.position.set(
                0.5 * this._wellDoneNotification.texture.width + 50,
                Jv.app.height - 0.5 * this._wellDoneNotification.height - 100
              ),
              (this._wellDoneNotification.visible = !1),
              this.addChild(this._wellDoneNotification),
              (this._moveLeftButton = new jb({
                on: "button_move_left",
                pressed: "button_move_left_pressed",
              })),
              (this._moveLeftButton.alpha = 0.15),
              this._moveLeftButton.anchor.set(0.5),
              this._moveLeftButton.position.set(
                0.5 * this._moveLeftButton.width + 20,
                0.5 * Jv.app.height + 340
              ),
              this.addChild(this._moveLeftButton),
              this._moveLeftButton.on(
                "pointerdown",
                this._onMoveLeftBtn_Down,
                this
              ),
              this._moveLeftButton.on(
                "pointerup",
                this._onMoveLeftBtn_Up,
                this
              ),
              this._moveLeftButton.on(
                "pointerupoutside",
                this._onMoveLeftBtn_Up,
                this
              ),
              (this._moveRightButton = new jb({
                on: "button_move_right",
                pressed: "button_move_right_pressed",
              })),
              (this._moveRightButton.alpha = 0.15),
              this._moveRightButton.anchor.set(0.5),
              this._moveRightButton.position.set(
                Jv.app.width - 0.5 * this._moveRightButton.width - 20,
                this._moveLeftButton.y
              ),
              this.addChild(this._moveRightButton),
              this._moveRightButton.on(
                "pointerdown",
                this._onMoveRightBtn_Down,
                this
              ),
              this._moveRightButton.on(
                "pointerup",
                this._onMoveRightBtn_Up,
                this
              ),
              this._moveRightButton.on(
                "pointerupoutside",
                this._onMoveRightBtn_Up,
                this
              ),
              (this._rotateButton = new jb({
                on: "button_rotate",
                pressed: "button_rotate_pressed",
              })),
              this._rotateButton.anchor.set(0.5),
              this._rotateButton.position.set(
                Jv.app.width - 20 - 0.5 * this._rotateButton.texture.width,
                Jv.app.height - 0.5 * this._rotateButton.texture.height - 20
              ),
              this.addChild(this._rotateButton),
              this._rotateButton.on(
                "pointertap",
                this._onRotateBtn_Click,
                this
              ),
              (this._powerupMenu = new ex()),
              this._powerupMenu.init(),
              this._powerupMenu.position.set(
                Jv.app.width - 40 - 20,
                this._moveLeftButton.y -
                  0.5 * this._moveRightButton.height -
                  80 -
                  20
              ),
              this.addChild(this._powerupMenu);
          }),
          (e.prototype._onMoveLeftBtn_Down = function () {
            EE.i.input.onMoveBtnDown(-1);
          }),
          (e.prototype._onMoveLeftBtn_Up = function () {
            EE.i.input.onMoveBtnUp();
          }),
          (e.prototype._onMoveRightBtn_Down = function () {
            EE.i.input.onMoveBtnDown(1);
          }),
          (e.prototype._onMoveRightBtn_Up = function () {
            EE.i.input.onMoveBtnUp();
          }),
          (e.prototype._onRotateBtn_Click = function () {
            EE.i.input.curBlock &&
              (EE.i.input.curBlock.rotate(), Jv.audio.playSfx("rotace_bloku"));
          }),
          (e.prototype.end = function () {
            this._onFinalCountdownCompleted.dispose(),
              (this._onFinalCountdownCompleted = null),
              this._onRaceCountdownCompleted.dispose(),
              (this._onRaceCountdownCompleted = null),
              this._scoreTween &&
                (this._scoreTween.kill(), (this._scoreTween = null)),
              this._powerupMenu.end(),
              (this._powerupMenu = null);
          }),
          (e.prototype.isScoreActive = function () {
            return this._scoreTween && this._scoreTween.isActive();
          }),
          (e.prototype.onScoreUpdated = function (t, e) {
            if (t != e) {
              this._scoreTween && this._scoreTween.kill();
              var i = Uc.utils.interpolate(t, e);
              (this._scoreTween = Uc.to(
                {},
                {
                  duration: 1,
                  onUpdate: function (t) {
                    t.text = i(this.ratio).toLocaleString("en-US", {
                      maximumFractionDigits: 0,
                      minimumFractionDigits: 0,
                    });
                  },
                  onUpdateParams: [this._scoreValueText],
                  ease: "linear.inOut",
                }
              )),
                EE.i.tweenGroup.add(this._scoreTween);
            }
          }),
          (e.prototype.startFinalCountdown = function () {
            var t = this;
            Jv.audio.playSfx("final_countdown_sec");
            var e = new Lo("3", {
              fontFamily: "tilt_warp_regular",
              dropShadow: !0,
              dropShadowAngle: 0.7,
              dropShadowBlur: 2,
              dropShadowDistance: 8,
              fill: "#ffffff",
              fontSize: 200,
              strokeThickness: 8,
              lineJoin: "round",
            });
            e.anchor.set(0.5),
              e.position.set(0.5 * Jv.app.width, 140),
              this.addChild(e);
            var i = new Uc.core.Timeline();
            i.to(e.scale, { x: 0.5, y: 0.5, duration: 1, ease: "sine.out" }, 0),
              i.to(e, { alpha: 1, duration: 0.6, ease: "sine.out" }, 0),
              i.call(
                function () {
                  (e.alpha = 0),
                    (e.text = "2"),
                    e.scale.set(1),
                    Jv.audio.playSfx("final_countdown_sec");
                },
                null,
                1
              ),
              i.to(
                e.scale,
                { x: 0.5, y: 0.5, duration: 1, ease: "sine.out" },
                1
              ),
              i.to(e, { alpha: 1, duration: 0.6, ease: "sine.out" }, 1),
              i.call(
                function () {
                  (e.alpha = 0),
                    (e.text = "1"),
                    e.scale.set(1),
                    Jv.audio.playSfx("final_countdown_sec");
                },
                null,
                2
              ),
              i.to(
                e.scale,
                { x: 0.5, y: 0.5, duration: 1, ease: "sine.out" },
                2
              ),
              i.to(e, { alpha: 1, duration: 0.6, ease: "sine.out" }, 2),
              i.call(
                function () {
                  Jv.audio.playSfx("final_countdown_end"),
                    e.parent.removeChild(e),
                    t._onFinalCountdownCompleted.dispatch();
                },
                null,
                3
              ),
              EE.i.tweenGroup.add(i);
          }),
          (e.prototype.startRaceCountdown = function () {
            var t = this;
            Jv.audio.playSfx("countdown_sec");
            var e = new Lo("READY?", {
              fontFamily: "tilt_warp_regular",
              dropShadow: !0,
              dropShadowAngle: 0.7,
              dropShadowBlur: 2,
              dropShadowDistance: 8,
              fill: "#ffffff",
              fontSize: 200,
              strokeThickness: 8,
              lineJoin: "round",
            });
            e.anchor.set(0.5),
              e.position.set(0.5 * Jv.app.width, 0.5 * Jv.app.height),
              this.addChild(e),
              (EE.i.layers.actor.y = 400);
            var i = new Uc.core.Timeline();
            i.to(
              EE.i.layers.actor,
              { y: 0, ease: "sine.inOut", duration: 1 },
              1
            ),
              i.to(
                e.scale,
                { x: 0.5, y: 0.5, duration: 1, ease: "sine.out" },
                0
              ),
              i.to(e, { alpha: 1, duration: 1.4, ease: "sine.out" }, 0),
              i.call(
                function () {
                  (e.alpha = 0),
                    (e.text = "GO!"),
                    e.scale.set(1),
                    Jv.audio.playSfx("countdown_end"),
                    t._onRaceCountdownCompleted.dispatch();
                },
                null,
                2.4
              ),
              i.to(
                e.scale,
                { x: 0.5, y: 0.5, duration: 0.4, ease: "sine.out" },
                2.4
              ),
              i.to(e, { alpha: 1, duration: 0.6, ease: "sine.out" }, 2.4),
              i.call(
                function () {
                  e.parent.removeChild(e);
                },
                null,
                ">"
              ),
              EE.i.tweenGroup.add(i);
          }),
          (e.prototype.setNoRotateButton = function () {
            this._rotateButton.setTextures({
              on: "button_rotate_locked",
              pressed: "button_rotate_locked_pressed",
            });
          }),
          (e.prototype.setRotateButton = function () {
            this._rotateButton.setTextures({
              on: "button_rotate",
              pressed: "button_rotate_pressed",
            });
          }),
          (e.prototype.hideScore = function () {
            (this._scoreTitleText.visible = !1),
              (this._scoreValueText.visible = !1);
          }),
          (e.prototype.onWellDone = function () {
            var t = this;
            (this._wellDoneNotification.visible = !0),
              EE.i.tweenGroup.add(
                Uc.from(this._wellDoneNotification.scale, {
                  x: 0,
                  y: 0,
                  duration: 1.6,
                  ease: "elastic.out",
                  onComplete: function () {
                    t._wellDoneNotification.visible = !1;
                  },
                })
              );
          }),
          e
        );
      })(ce);
      var nx = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const ox = (function (t) {
          function e() {
            return t.call(this) || this;
          }
          return (
            nx(e, t),
            (e.prototype.update = function (t) {
              this.clear(),
                this.beginFill(16777215, 0.1),
                this.drawRect(
                  t.anim.x - 0.5 * t.anim.width,
                  -Jv.app.safeAreaMarginY,
                  t.anim.width,
                  Jv.app.safeAreaHeight
                ),
                this.endFill();
            }),
            e
          );
        })(To),
        sx = (function () {
          function t(t) {
            (this._type = null), (this._onCompleted = null), (this._type = t);
          }
          return (
            Object.defineProperty(t.prototype, "type", {
              get: function () {
                return this._type;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "onCompleted", {
              get: function () {
                return this._onCompleted;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.init = function () {
              this._onCompleted = new tb.Signal();
            }),
            (t.prototype.end = function () {
              this._onCompleted.dispose(), (this._onCompleted = null);
            }),
            t
          );
        })();
      var ax = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const hx = (function (t) {
        function e() {
          var e = t.call(this, 0) || this;
          return (e._spawnAnim = null), e;
        }
        return (
          ax(e, t),
          (e.prototype.init = function () {
            var e = this;
            t.prototype.init.call(this),
              (this._spawnAnim = new Zs(Xb.createTexArray("spawn_good_", 30))),
              this._spawnAnim.anchor.set(0.5),
              (this._spawnAnim.animationSpeed = 30),
              (this._spawnAnim.autoUpdate = !1),
              (this._spawnAnim.loop = !1),
              this._spawnAnim.position.copyFrom(EE.i.world.curBlock.position),
              EE.i.layers.actor.addChild(this._spawnAnim),
              this._spawnAnim.gotoAndPlay(0);
            var i = new Uc.core.Timeline();
            i.to(
              EE.i.world.curBlock.scale,
              { x: 0, y: 0, duration: 0.2, ease: "sine.in" },
              0
            ),
              i.call(
                function () {
                  EE.i.world.curBlock.onPetrify();
                },
                null,
                ">"
              ),
              i.to(
                EE.i.world.curBlock.scale,
                { x: 1, y: 1, duration: 0.2, ease: "sine.out" },
                "<"
              ),
              i.call(
                function () {
                  EE.i.addAnim(e._spawnAnim), e._onCompleted.dispatch(e);
                },
                null,
                ">"
              ),
              Jv.audio.playSfx("petrify");
          }),
          (e.prototype.update = function (t) {
            this._spawnAnim.update(t);
          }),
          e
        );
      })(sx);
      var ux = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const lx = (function (t) {
        function e() {
          var e = t.call(this, 1) || this;
          return (e._spawnAnim = null), e;
        }
        return (
          ux(e, t),
          (e.prototype.init = function () {
            var e = this;
            t.prototype.init.call(this),
              (this._spawnAnim = new Zs(Xb.createTexArray("spawn_good_", 30))),
              this._spawnAnim.anchor.set(0.5),
              (this._spawnAnim.animationSpeed = 30),
              (this._spawnAnim.autoUpdate = !1),
              (this._spawnAnim.loop = !1),
              this._spawnAnim.position.copyFrom(EE.i.world.curBlock.position),
              EE.i.layers.actor.addChild(this._spawnAnim),
              this._spawnAnim.gotoAndPlay(0);
            var i = new Uc.core.Timeline();
            i.to(
              EE.i.world.curBlock.scale,
              { x: 0, y: 0, duration: 0.2, ease: "sine.in" },
              0
            ),
              i.call(
                function () {
                  EE.i.world.curBlock.onBind();
                  var t = EE.i.world.curBlock.bindVfx.scale.clone();
                  EE.i.world.curBlock.bindVfx.scale.set(0),
                    i.to(
                      EE.i.world.curBlock.bindVfx.scale,
                      { x: t.x, y: t.y, duration: 0.2, ease: "sine.out" },
                      0.2
                    );
                },
                null,
                0.2
              ),
              i.to(
                EE.i.world.curBlock.scale,
                { x: 1, y: 1, duration: 0.2, ease: "sine.out" },
                0.2
              ),
              i.call(
                function () {
                  EE.i.addAnim(e._spawnAnim), e._onCompleted.dispatch(e);
                },
                null,
                ">"
              ),
              Jv.audio.playSfx("bind");
          }),
          (e.prototype.update = function (t) {
            this._spawnAnim.update(t);
          }),
          e
        );
      })(sx);
      var cx = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const dx = (function (t) {
        function e() {
          var e = t.call(this, 3) || this;
          return (
            (e._baseIndex = null),
            (e._base = null),
            (e._smokeAnim = null),
            (e._entrySide = null),
            (e._entryTimeline = null),
            e
          );
        }
        return (
          cx(e, t),
          (e.prototype.init = function () {
            var e = this;
            t.prototype.init.call(this),
              (this._baseIndex = Math.floor(3 * Math.random())),
              (this._entrySide = Math.random() > 0.5 ? 1 : -1),
              (this._base = new Co(
                Jv.resources[
                  "extra_block_" + this._baseIndex.toString()
                ].texture
              )),
              this._base.anchor.set(0.5);
            var i =
                32 *
                Math.ceil(
                  Math.min(
                    EE.i.world.findTowerTop(),
                    EE.i.world.findPlatformTop()
                  ) / 32
                ),
              r = 32 * Math.ceil((0.5 * this._base.height + 32) / 32),
              n = EE.i.world.findTowerSideLimits(i - 200, i + 200),
              o = [n[0], Jv.app.width - n[1]],
              s = [
                n[0] >= EE.i.world.ground.x - 0.5 * EE.i.world.ground.width,
                n[1] <= EE.i.world.ground.x + 0.5 * EE.i.world.ground.width,
              ];
            1 == this._entrySide && !s[0] && s[1]
              ? (this._entrySide = -1)
              : (-1 == this._entrySide && !s[1] && s[0]) || o[0] > o[1]
              ? (this._entrySide = 1)
              : o[0] < o[1] && (this._entrySide = -1),
              1 == this._entrySide
                ? this._base.position.set(
                    0.5 * -this._base.width - Jv.app.safeAreaMarginX,
                    i - r
                  )
                : this._base.position.set(
                    0.5 * this._base.width +
                      Jv.app.width +
                      Jv.app.safeAreaMarginX,
                    i - r
                  ),
              EE.i.layers.actor.addChild(this._base),
              (this._entryTimeline = new Uc.core.Timeline()),
              this._entryTimeline.to(
                this._base,
                {
                  x:
                    EE.i.world.ground.x +
                    (1 == this._entrySide
                      ? 0.5 * -EE.i.world.ground.width - 0.5 * this._base.width
                      : 0.5 * EE.i.world.ground.width + 0.5 * this._base.width),
                  duration: 1,
                  ease: "back.out",
                },
                0
              ),
              this._entryTimeline.call(
                function () {
                  e._smokeAnim.position.copyFrom(e._base.position),
                    (e._smokeAnim.visible = !0),
                    e._smokeAnim.gotoAndPlay(0);
                },
                null,
                0.24
              ),
              this._entryTimeline.call(
                function () {
                  e._checkCompleted();
                },
                null,
                1
              ),
              EE.i.tweenGroup.add(this._entryTimeline),
              (this._smokeAnim = new Zs(
                Xb.createTexArray("extra_block_smoke_", 15)
              )),
              1 == this._entrySide && (this._smokeAnim.scale.x = -1),
              this._smokeAnim.anchor.set(0, 0.5),
              (this._smokeAnim.visible = !1),
              (this._smokeAnim.animationSpeed = 30),
              (this._smokeAnim.autoUpdate = !1),
              (this._smokeAnim.loop = !1),
              EE.i.layers.actor.addChild(this._smokeAnim),
              (this._smokeAnim.onComplete = function () {
                (e._smokeAnim.visible = !1), e._checkCompleted();
              }),
              Jv.audio.playSfx("small_checkpoint");
          }),
          (e.prototype._checkCompleted = function () {
            this._smokeAnim.visible ||
              this._entryTimeline.isActive() ||
              (EE.i.world.createExtraBlock(
                this._baseIndex,
                this._base.position
              ),
              this._base.parent.removeChild(this._base),
              (this._base = null),
              this._onCompleted.dispatch(this));
          }),
          (e.prototype.end = function () {
            this._smokeAnim.parent.removeChild(this._smokeAnim),
              (this._smokeAnim = null),
              this._entryTimeline.kill(),
              (this._entryTimeline = null),
              t.prototype.end.call(this);
          }),
          (e.prototype.update = function (t) {
            this._smokeAnim.visible && this._smokeAnim.update(t);
          }),
          e
        );
      })(sx);
      var px = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        _x = function (t) {
          var e = "function" == typeof Symbol && Symbol.iterator,
            i = e && t[e],
            r = 0;
          if (i) return i.call(t);
          if (t && "number" == typeof t.length)
            return {
              next: function () {
                return (
                  t && r >= t.length && (t = void 0),
                  { value: t && t[r++], done: !t }
                );
              },
            };
          throw new TypeError(
            e ? "Object is not iterable." : "Symbol.iterator is not defined."
          );
        },
        fx = (function (t) {
          function e() {
            var e = t.call(this) || this;
            return (
              (e._base = null),
              (e._arrParallaxSprite = null),
              (e._arrParallaxY = null),
              (e._arrTopCloud = null),
              (e._pulley = null),
              (e._pulleyTween = null),
              (e._kTopCloudSpeed = 40),
              (e._kArrParallaxMult = [0.06, 0.18, 0.3, 0.42, 0.54, 0.6]),
              e
            );
          }
          return (
            px(e, t),
            (e.prototype.init = function () {
              var t,
                e,
                i = Math.min(EE.i.type, 1).toString();
              (this._base = new Co(Jv.resources["bg_" + i].texture)),
                this._base.position.set(
                  -Jv.app.safeAreaMarginX,
                  -Jv.app.safeAreaMarginY
                ),
                this.addChild(this._base),
                (this._arrParallaxSprite = []);
              var r = new Co(Jv.resources["bg_" + i + "_0"].texture);
              r.anchor.set(1),
                r.position.set(
                  Jv.app.width + Jv.app.safeAreaMarginX,
                  Jv.app.height + Jv.app.safeAreaMarginY
                ),
                this.addChild(r),
                this._arrParallaxSprite.push(r),
                (r = new Co(Jv.resources["bg_" + i + "_1"].texture)).anchor.set(
                  0.5,
                  1
                ),
                r.position.set(
                  0.5 * Jv.app.width,
                  Jv.app.height + Jv.app.safeAreaMarginY
                ),
                this.addChild(r),
                this._arrParallaxSprite.push(r),
                (r = new Co(Jv.resources["bg_" + i + "_2"].texture)).anchor.set(
                  1
                ),
                r.position.set(
                  Jv.app.width + Jv.app.safeAreaMarginX,
                  Jv.app.height + Jv.app.safeAreaMarginY
                ),
                this.addChild(r),
                this._arrParallaxSprite.push(r),
                (r = new Co(Jv.resources["bg_" + i + "_3"].texture)).anchor.set(
                  1
                ),
                r.position.set(Jv.app.width, 600),
                this.addChild(r),
                this._arrParallaxSprite.push(r),
                (r = new Co(Jv.resources["bg_" + i + "_4"].texture)).anchor.set(
                  0,
                  1
                ),
                r.position.set(
                  -Jv.app.safeAreaMarginX,
                  Jv.app.height + Jv.app.safeAreaMarginY
                ),
                this.addChild(r),
                this._arrParallaxSprite.push(r),
                (r = new Co(Jv.resources["bg_" + i + "_5"].texture)).anchor.set(
                  0.5,
                  1
                ),
                r.position.set(
                  0.5 * Jv.app.width,
                  Jv.app.height + Jv.app.safeAreaMarginY + 50
                ),
                this.addChild(r),
                this._arrParallaxSprite.push(r),
                (this._arrParallaxY = []);
              try {
                for (
                  var n = _x(this._arrParallaxSprite), o = n.next();
                  !o.done;
                  o = n.next()
                ) {
                  var s = o.value;
                  this._arrParallaxY.push(s.y);
                }
              } catch (e) {
                t = { error: e };
              } finally {
                try {
                  o && !o.done && (e = n.return) && e.call(n);
                } finally {
                  if (t) throw t.error;
                }
              }
              (this._arrTopCloud = [
                new Co(Jv.resources.bg_cloud_slice_0.texture),
                new Co(Jv.resources.bg_cloud_slice_1.texture),
              ]),
                this.addChild(this._arrTopCloud[0]),
                this.addChild(this._arrTopCloud[1]),
                this._arrTopCloud[0].position.set(
                  -Jv.app.safeAreaMarginX,
                  -Jv.app.safeAreaMarginY
                ),
                this._arrTopCloud[1].position.set(
                  this._arrTopCloud[0].x + this._arrTopCloud[0].texture.width,
                  -Jv.app.safeAreaMarginY
                ),
                (this._pulley = new Co(Jv.resources.pulley.texture)),
                this._pulley.anchor.set(
                  49 / this._pulley.texture.width,
                  16 / this._pulley.texture.height
                ),
                (this._pulley.angle = 20),
                this._pulley.position.set(
                  212,
                  -(this._arrParallaxSprite[4].texture.height - 312)
                ),
                this._arrParallaxSprite[4].addChild(this._pulley),
                (this._pulleyTween = Uc.to(this._pulley, {
                  angle: -this._pulley.angle,
                  duration: 4,
                  repeat: -1,
                  yoyo: !0,
                  ease: "sine.inOut",
                })),
                EE.i.tweenGroup.add(this._pulleyTween);
            }),
            (e.prototype.end = function () {
              this._pulleyTween.kill(), (this._pulleyTween = null);
            }),
            (e.prototype.update = function (t) {
              (this._arrTopCloud[0].x -= t * this._kTopCloudSpeed),
                (this._arrTopCloud[1].x -= t * this._kTopCloudSpeed),
                this._arrTopCloud[0].x < -this._arrTopCloud[0].texture.width &&
                  (this._arrTopCloud.push(this._arrTopCloud.shift()),
                  (this._arrTopCloud[1].x =
                    this._arrTopCloud[0].x +
                    this._arrTopCloud[0].texture.width));
              for (var e = 0; e < this._arrParallaxSprite.length; ++e)
                this._arrParallaxSprite[e].y =
                  this._arrParallaxY[e] +
                  EE.i.layers.actor.y * this._kArrParallaxMult[e];
            }),
            (e.prototype.tint = function (t) {
              var e, i;
              (this._base.tint = t),
                (this._pulley.tint = t),
                (this._arrTopCloud[0].tint = t),
                (this._arrTopCloud[1].tint = t);
              try {
                for (
                  var r = _x(this._arrParallaxSprite), n = r.next();
                  !n.done;
                  n = r.next()
                )
                  n.value.tint = t;
              } catch (t) {
                e = { error: t };
              } finally {
                try {
                  n && !n.done && (i = r.return) && i.call(r);
                } finally {
                  if (e) throw e.error;
                }
              }
            }),
            e
          );
        })(ce);
      const mx = fx;
      var yx = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const gx = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (
            (e._arrBottomCloud = null),
            (e._kBottomCloudSpeed = 60),
            (e._arrBottomCloud = [
              new Co(Jv.resources.fg_cloud_0.texture),
              new Co(Jv.resources.fg_cloud_0.texture),
            ]),
            e.addChild(e._arrBottomCloud[0]),
            e.addChild(e._arrBottomCloud[1]),
            (e._arrBottomCloud[1].x = e._arrBottomCloud[0].texture.width),
            e
          );
        }
        return (
          yx(e, t),
          (e.prototype.update = function (t) {
            (this._arrBottomCloud[0].x -= t * this._kBottomCloudSpeed),
              (this._arrBottomCloud[1].x -= t * this._kBottomCloudSpeed),
              this._arrBottomCloud[0].x <
                -this._arrBottomCloud[0].texture.width &&
                (this._arrBottomCloud.push(this._arrBottomCloud.shift()),
                (this._arrBottomCloud[1].x =
                  this._arrBottomCloud[0].x +
                  this._arrBottomCloud[0].texture.width));
          }),
          (e.prototype.tint = function (t) {
            (this._arrBottomCloud[0].tint = t),
              (this._arrBottomCloud[1].tint = t);
          }),
          e
        );
      })(ce);
      var vx = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const bx = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (
            (e._limitCount = null),
            (e._sprite = null),
            (e._anim = null),
            (e._powerupIcon = null),
            (e._rewardedPowerup = null),
            (e._isAnimating = null),
            (e._spawnCount = null),
            (e._nextCheckpointOffsetY = null),
            (e._onAnimationCompleted = null),
            e
          );
        }
        return (
          vx(e, t),
          Object.defineProperty(e.prototype, "limitCount", {
            set: function (t) {
              this._limitCount = t;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(e.prototype, "isAnimating", {
            get: function () {
              return this._isAnimating;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(e.prototype, "onAnimationCompleted", {
            get: function () {
              return this._onAnimationCompleted;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (e.prototype.init = function () {
            (this._onAnimationCompleted = new tb.Signal()),
              (this._isAnimating = !1),
              (this._spawnCount = 1),
              (this._sprite = new Co(Jv.resources.checkpoint.texture)),
              this._sprite.anchor.set(0.5, 1),
              this.addChild(this._sprite),
              (this._anim = new Zs(Xb.createTexArray("checkpoint_", 72))),
              this._anim.anchor.set(0.5, 1),
              (this._anim.visible = !1),
              (this._anim.animationSpeed = 30),
              (this._anim.autoUpdate = !1),
              (this._anim.loop = !1),
              this._anim.position.set(6, 84),
              this.addChild(this._anim);
          }),
          (e.prototype.end = function () {
            this._onAnimationCompleted.dispose(),
              (this._onAnimationCompleted = null);
          }),
          (e.prototype.update = function (t) {
            if (
              this._anim.visible &&
              (this._anim.update(t),
              this._anim.currentFrame >= 35 && !this._powerupIcon)
            ) {
              EE.i.tutorial
                ? (this._rewardedPowerup = 1)
                : (this._rewardedPowerup = Math.floor(3 * Math.random())),
                (this._powerupIcon = new Co(
                  Jv.resources[
                    "powerup_" + this._rewardedPowerup.toString()
                  ].texture
                )),
                this._powerupIcon.anchor.set(0.5),
                this._powerupIcon.position.set(
                  this._anim.x,
                  -112 + this._anim.y
                ),
                this.addChildAt(this._powerupIcon, 0),
                this._powerupIcon.scale.set(0),
                (this._powerupIcon.angle = -180);
              var e = new Uc.core.Timeline();
              e.to(
                this._powerupIcon,
                { angle: 0, duration: 1, ease: "sine.out" },
                0
              ),
                e.to(
                  this._powerupIcon.scale,
                  { x: 1, y: 1, duration: 1, ease: "sine.out" },
                  0
                ),
                e.call(
                  this._onPowerupSpawnAnim_Completed.bind(this),
                  null,
                  ">"
                ),
                EE.i.tweenGroup.add(e);
            }
          }),
          (e.prototype._onPowerupSpawnAnim_Completed = function () {
            (this._anim.visible = !1),
              this._powerupIcon.position.copyFrom(
                EE.i.layers.hud.toLocal(this._powerupIcon.getGlobalPosition())
              ),
              EE.i.layers.hud.addChild(this._powerupIcon);
            var t = EE.i.hud.powerupMenu.findTargetPos(this._rewardedPowerup),
              e = new Uc.core.Timeline();
            e.to(
              this._powerupIcon,
              { x: t.x, y: t.y, duration: 1, ease: "sine.Out" },
              0
            ),
              e.call(this._onPowerupMoveAnim_Completed.bind(this), null, ">"),
              EE.i.tweenGroup.add(e);
          }),
          (e.prototype._onPowerupMoveAnim_Completed = function () {
            this._powerupIcon.parent.removeChild(this._powerupIcon),
              (this._powerupIcon = null),
              EE.i.hud.powerupMenu.addPowerup(this._rewardedPowerup);
            var t = !0;
            null !== this._limitCount &&
              ((this._spawnCount += 1),
              (t = this._spawnCount <= this._limitCount)),
              t &&
                ((this._sprite.visible = !0),
                this._sprite.scale.set(0),
                (this.y -= this._nextCheckpointOffsetY),
                EE.i.tweenGroup.add(
                  Uc.to(this._sprite.scale, {
                    x: 1,
                    y: 1,
                    duration: 0.4,
                    ease: "sine.out",
                  })
                )),
              (this._isAnimating = !1),
              this._onAnimationCompleted.dispatch();
          }),
          (e.prototype.isVisible = function () {
            return this._sprite.visible;
          }),
          (e.prototype.onReached = function (t) {
            this._sprite.visible &&
              ((this._isAnimating = !0),
              (this._nextCheckpointOffsetY = t),
              EE.i.tweenGroup.add(
                Uc.to(this, {
                  y: "-=300",
                  duration: 0.4,
                  ease: "sine.out",
                  onComplete: this._onMoveUpAnim_Completed,
                  callbackScope: this,
                })
              ));
          }),
          (e.prototype._onMoveUpAnim_Completed = function () {
            (this._sprite.visible = !1),
              (this._anim.visible = !0),
              this._anim.gotoAndPlay(0);
          }),
          e
        );
      })(ce);
      var xx = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const wx = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (
            (e._block = null),
            (e._spawnAnim = null),
            (e._blockTimeline = null),
            (e._onBlockSpawned = null),
            e
          );
        }
        return (
          xx(e, t),
          Object.defineProperty(e.prototype, "onBlockSpawned", {
            get: function () {
              return this._onBlockSpawned;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (e.prototype.init = function () {
            var t = this;
            (this._onBlockSpawned = new tb.Signal()),
              (this._spawnAnim = new Zs(Xb.createTexArray("spawn_good_", 30))),
              this._spawnAnim.anchor.set(0.5),
              (this._spawnAnim.visible = !1),
              (this._spawnAnim.animationSpeed = 30),
              (this._spawnAnim.autoUpdate = !1),
              (this._spawnAnim.loop = !1),
              this.addChild(this._spawnAnim),
              (this._spawnAnim.onComplete = function () {
                t._spawnAnim.visible = !1;
              }),
              (this._blockTimeline = new Uc.core.Timeline()),
              EE.i.tweenGroup.add(this._blockTimeline);
          }),
          (e.prototype.end = function () {
            this._onBlockSpawned.dispose(),
              (this._onBlockSpawned = null),
              this._blockTimeline.kill(),
              (this._blockTimeline = null);
          }),
          (e.prototype.update = function (t) {
            this._spawnAnim.visible && this._spawnAnim.update(t);
          }),
          (e.prototype.spawn = function (t) {
            var e = this;
            (this._block = t),
              this._block.scale.set(0),
              (this._block.angle = 270),
              this._blockTimeline.clear(),
              this._blockTimeline.to(
                this._block.scale,
                { x: 1, y: 1, duration: 0.6, ease: "sine.out" },
                0
              ),
              this._blockTimeline.to(
                this._block,
                { angle: 0, duration: 0.6, ease: "sine.out" },
                0
              ),
              this._blockTimeline.call(
                function () {
                  e._onBlockSpawned.dispatch(e._block);
                },
                null,
                ">"
              ),
              this._blockTimeline.play(0),
              this._spawnAnim.position.copyFrom(t.position),
              (this._spawnAnim.visible = !0),
              this._spawnAnim.gotoAndPlay(0),
              EE.i.beam.onBlockSpawnStarted(t);
          }),
          e
        );
      })(ce);
      var Tx = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        Ax = (function (t) {
          function e() {
            var e = t.call(this) || this;
            return (
              (e._text = null),
              (e._lastCountdown = null),
              (e._text = new Lo("", {
                fontFamily: "tilt_warp_regular",
                dropShadow: !0,
                dropShadowAngle: 0.7,
                dropShadowBlur: 2,
                dropShadowDistance: 4,
                fill: ["#ff2e2e", "#ffd6d6", "#ff8888"],
                fillGradientStops: [0.2, 0.6],
                fontSize: 50,
                strokeThickness: 4,
                lineJoin: "round",
              })),
              e._text.anchor.set(0.5),
              e._text.position.set(
                0.5 * Jv.app.width,
                20 + 0.5 * e._text.height
              ),
              e.addChild(e._text),
              e
            );
          }
          return (
            Tx(e, t),
            Object.defineProperty(e.prototype, "text", {
              get: function () {
                return this._text;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.onRemainingTimeUpdated = function (t) {
              var e, i, r;
              (e = Math.floor(t / 60 / 60)),
                (i = Math.floor(60 * (t / 60 / 60 - e))),
                (r = Math.floor(60 * (60 * (t / 60 / 60 - e) - i))),
                0 == e &&
                  0 == i &&
                  r < 6 &&
                  (null === this._lastCountdown || r < this._lastCountdown) &&
                  ((this._lastCountdown = r),
                  Jv.audio.playSfx("countdown_sec")),
                (this._text.text =
                  ("0" + e.toString()).slice(-2) +
                  ":" +
                  ("0" + i.toString()).slice(-2) +
                  ":" +
                  ("0" + r.toString()).slice(-2));
            }),
            (e.prototype.onTimePenalty = function () {
              Jv.audio.playSfx("lost_life"),
                EE.i.tweenGroup.add(
                  Uc.to(
                    {},
                    {
                      duration: 0.5,
                      onUpdate: this._onRemainingTimeTextTint_Updated,
                      onUpdateParams: [this._text],
                    }
                  )
                );
            }),
            (e.prototype._onRemainingTimeTextTint_Updated = function (t) {
              t.tint = mt([
                1,
                1 * this.totalProgress(),
                1 * this.totalProgress(),
              ]);
            }),
            (e.prototype.onLastBlock = function () {
              (this._text.text = "Place final tile!"),
                Jv.audio.playSfx("countdown_end");
            }),
            (e.prototype.onExtraTime = function () {
              this._lastCountdown = null;
            }),
            (e.prototype.onCheckpointReached = function () {
              EE.i.tweenGroup.add(
                Uc.to(EE.i.remainingTime.text.scale, {
                  x: 1.4,
                  y: 1.4,
                  repeat: 1,
                  yoyo: !0,
                  duration: 0.2,
                  ease: "sine.out",
                })
              );
            }),
            (e.prototype.onExtraReward = function () {
              this._text.text = "";
            }),
            e
          );
        })(ce);
      const Sx = Ax;
      var Ex = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const Cx = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (
            (e._anim = null),
            (e._block = null),
            (e._template = null),
            (e._isSpawning = null),
            (e._isSpawning = !1),
            (e._anim = new Zs(Xb.createTexArray("beam_", 120))),
            (e._anim.visible = !1),
            (e._anim.loop = !0),
            (e._anim.autoUpdate = !1),
            (e._anim.animationSpeed = 30),
            (e._anim.anchor.x = 0.5),
            e.addChild(e._anim),
            (e._template = new Co()),
            e._template.anchor.set(0.5),
            e
          );
        }
        return (
          Ex(e, t),
          Object.defineProperty(e.prototype, "anim", {
            get: function () {
              return this._anim;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (e.prototype.update = function (t) {
            if (this._anim.visible) {
              if (this._block) {
                this._template.scale.set(this._block.scale.x),
                  (this._template.angle = this._block.sprite.angle);
                var e =
                  this._isSpawning ||
                  0 == this._block.rotation ||
                  this._block.rotation == Math.PI
                    ? this._template.width
                    : this._template.height;
                (this._anim.scale.x = e / this._anim.texture.width),
                  (this._anim.x = this._block.x);
              }
              this._anim.update(t);
            }
          }),
          (e.prototype.setBlock = function (t) {
            this._block = t;
          }),
          (e.prototype.hide = function () {
            (this._anim.visible = !1),
              this._anim.gotoAndStop(0),
              (this._block = null);
          }),
          (e.prototype.tint = function (t) {
            this._anim.tint = t;
          }),
          (e.prototype.onBlockSpawnStarted = function (t) {
            (this._isSpawning = !0),
              (this._anim.visible = !0),
              this._anim.gotoAndPlay(0),
              (this._block = t),
              this._block &&
                ((this._template.texture =
                  Jv.resources[this._block.baseSpriteId].texture),
                (this._template.angle = this._block.sprite.angle)),
              this.update(0);
          }),
          (e.prototype.onBlockSpawnEnded = function () {
            this._isSpawning = !1;
          }),
          e
        );
      })(ce);
      var Mx = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const Px = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (
            (e._block = null),
            (e._spawnAnim = null),
            (e._lightningAnim = null),
            (e._tl = null),
            (e._tintFactor = null),
            (e._onBlockSpawned = null),
            e
          );
        }
        return (
          Mx(e, t),
          Object.defineProperty(e.prototype, "onBlockSpawned", {
            get: function () {
              return this._onBlockSpawned;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (e.prototype.init = function () {
            var t = this;
            (this._onBlockSpawned = new tb.Signal()),
              (this._lightningAnim = new Zs(
                Xb.createTexArray("spawn_lightning_", 14)
              )),
              this._lightningAnim.anchor.set(0.5),
              (this._lightningAnim.visible = !1),
              (this._lightningAnim.animationSpeed = 30),
              (this._lightningAnim.autoUpdate = !1),
              (this._lightningAnim.loop = !1),
              this._lightningAnim.position.set(
                0.5 * Jv.app.width,
                0.5 * Jv.app.height
              ),
              EE.i.layers.bottom.addChild(this._lightningAnim),
              (this._lightningAnim.onComplete = function () {
                t._lightningAnim.visible = !1;
              }),
              (this._spawnAnim = new Zs(Xb.createTexArray("spawn_bad_", 9))),
              this._spawnAnim.anchor.set(0.5),
              (this._spawnAnim.visible = !1),
              (this._spawnAnim.animationSpeed = 30),
              (this._spawnAnim.autoUpdate = !1),
              (this._spawnAnim.loop = !1),
              this.addChild(this._spawnAnim),
              (this._spawnAnim.onComplete = function () {
                t._spawnAnim.visible = !1;
              }),
              (this._tl = new Uc.core.Timeline()),
              EE.i.tweenGroup.add(this._tl);
          }),
          (e.prototype.end = function () {
            this._onBlockSpawned.dispose(),
              (this._onBlockSpawned = null),
              this._tl.kill(),
              (this._tl = null),
              EE.i.layers.bottom.removeChild(this._lightningAnim),
              (this._lightningAnim = null);
          }),
          (e.prototype.update = function (t) {
            this._spawnAnim.visible && this._spawnAnim.update(t),
              this._lightningAnim.visible && this._lightningAnim.update(t);
          }),
          (e.prototype.spawn = function (t) {
            var e = this;
            switch (t.badModifierType) {
              case 1:
                Jv.audio.playSfx("no_rotate");
                break;
              case 2:
                Jv.audio.playSfx("ice_block");
                break;
              case 3:
                Jv.audio.playSfx("balloon");
                break;
              case 4:
                Jv.audio.playSfx("heavy_block");
                break;
              case 5:
                Jv.audio.playSfx("dosednuti_blok");
            }
            (this._block = t),
              this._block.scale.set(0),
              (this._block.angle = 270),
              (this._tintFactor = 0);
            var i = null;
            3 == t.badModifierType && (i = EE.i.createBubble(this._block)),
              this._tl.clear(),
              this._tl.to(
                this,
                {
                  _tintFactor: 100,
                  duration: 0.1,
                  repeat: 3,
                  yoyo: !0,
                  ease: "sine.inOut",
                  onUpdate: this._onTintAnimUpdated,
                  callbackScope: this,
                },
                0
              ),
              this._tl.addLabel("block_spawn", ">"),
              this._tl.to(
                this,
                {
                  _tintFactor: 100,
                  duration: 0.1,
                  ease: "sine.inOut",
                  onUpdate: this._onTintAnimUpdated,
                  callbackScope: this,
                },
                ">+0.2"
              ),
              this._tl.call(
                function () {
                  EE.i.beam.tint(14301765),
                    EE.i.beam.onBlockSpawnStarted(t),
                    (e._lightningAnim.visible = !0),
                    e._lightningAnim.gotoAndPlay(0),
                    (e._spawnAnim.visible = !0),
                    e._spawnAnim.position.copyFrom(e._block.position),
                    e._spawnAnim.gotoAndPlay(0);
                },
                null,
                "block_spawn"
              ),
              this._tl.to(
                this._block.scale,
                { x: 1, y: 1, duration: 0.6, ease: "sine.out" },
                "block_spawn"
              ),
              this._tl.to(
                this._block,
                { angle: 0, duration: 0.6, ease: "sine.out" },
                "block_spawn"
              ),
              3 == this._block.badModifierType &&
                (i.scale.set(0),
                this._tl.to(
                  i.scale,
                  { x: 1, y: 1, duration: 1, ease: "elastic.out" },
                  "block_spawn"
                )),
              this._tl.call(
                function () {
                  e._onBlockSpawned.dispatch(e._block);
                },
                null,
                ">"
              ),
              this._tl.play(0),
              Jv.audio.playSfx("bad_modifier");
          }),
          (e.prototype._onTintAnimUpdated = function () {
            var t = [
              (255 - (37 * this._tintFactor) / 100) / 255,
              (255 - (197 * this._tintFactor) / 100) / 255,
              (255 - (186 * this._tintFactor) / 100) / 255,
            ];
            EE.i.foreground.tint(mt(t)), EE.i.background.tint(mt(t));
          }),
          e
        );
      })(ce);
      var Bx = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const Ox = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (
            (e._block = null),
            (e._sprite = null),
            (e._popAnim = null),
            (e._onCompleted = null),
            e
          );
        }
        return (
          Bx(e, t),
          Object.defineProperty(e.prototype, "block", {
            set: function (t) {
              this._block = t;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(e.prototype, "onCompleted", {
            get: function () {
              return this._onCompleted;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (e.prototype.init = function () {
            var t = this;
            console.assert(
              null != this._block,
              "Bubble.ts :: init() :: this._block cannot be null."
            ),
              (this._onCompleted = new (eb().Signal)()),
              (this._sprite = new Co(Jv.resources.bubble.texture)),
              (this._sprite.alpha = 0.4),
              this._sprite.anchor.set(0.5),
              this.addChild(this._sprite),
              (this._popAnim = new Zs(Xb.createTexArray("bubble_pop_", 17))),
              this._popAnim.anchor.set(0.5),
              (this._popAnim.visible = !1),
              (this._popAnim.animationSpeed = 30),
              (this._popAnim.autoUpdate = !1),
              (this._popAnim.loop = !1),
              this.addChild(this._popAnim),
              (this._popAnim.onComplete = function () {
                t._onCompleted.dispatch();
              });
          }),
          (e.prototype.end = function () {
            this._onCompleted.dispose(), (this._onCompleted = null);
          }),
          (e.prototype.update = function (t) {
            this._popAnim.visible
              ? this._popAnim.update(t)
              : this.position.copyFrom(this._block.position);
          }),
          (e.prototype.onHit = function () {
            (this._sprite.visible = !1),
              (this._popAnim.visible = !0),
              this._popAnim.gotoAndPlay(0),
              Jv.audio.playSfx("bubble_burst");
          }),
          e
        );
      })(ce);
      var Rx = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const Ix = (function (t) {
        function e() {
          var e = t.call(this, 4) || this;
          return (
            (e._spawnAnim = null),
            (e._clockWrapper = null),
            (e._clockTimeline = null),
            e
          );
        }
        return (
          Rx(e, t),
          (e.prototype.init = function () {
            var e = this;
            t.prototype.init.call(this),
              (this._spawnAnim = new Zs(Xb.createTexArray("clock_spawn_", 16))),
              this._spawnAnim.anchor.set(0.5),
              (this._spawnAnim.animationSpeed = 30),
              (this._spawnAnim.autoUpdate = !1),
              (this._spawnAnim.loop = !1),
              this._spawnAnim.position.set(0.5 * Jv.app.width, 300),
              EE.i.layers.vfx.addChild(this._spawnAnim),
              (this._spawnAnim.onComplete = function () {
                e._spawnAnim.visible = !1;
              }),
              this._spawnAnim.gotoAndPlay(0),
              (this._clockWrapper = new ce()),
              this._clockWrapper.position.copyFrom(this._spawnAnim),
              EE.i.layers.vfx.addChild(this._clockWrapper);
            var i = new Co(Jv.resources.clock_button.texture);
            i.anchor.set(0.5, 0),
              i.position.set(0, 0.5 * -Jv.resources.clock_base.texture.height),
              this._clockWrapper.addChild(i);
            var r = new Co(Jv.resources.clock_base.texture);
            r.anchor.set(0.5), this._clockWrapper.addChild(r);
            var n = new Co(Jv.resources.clock_hand.texture);
            n.anchor.set(18 / n.texture.width, 4 / n.texture.height),
              this._clockWrapper.addChild(n);
            var o = new Lo("+25s", {
              fontFamily: "tilt_warp_regular",
              dropShadow: !0,
              dropShadowAngle: 0.7,
              dropShadowBlur: 2,
              dropShadowDistance: 4,
              fill: "#ffffff",
              fontSize: 40,
              strokeThickness: 4,
              lineJoin: "round",
            });
            o.anchor.set(0.5, 0),
              (o.y = 0.3 * r.texture.height),
              this._clockWrapper.addChild(o),
              (n.angle = 135),
              this._clockWrapper.scale.set(0),
              (o.alpha = 0),
              (this._clockTimeline = new Uc.core.Timeline()),
              this._clockTimeline.to(
                this._clockWrapper.scale,
                { x: 1, y: 1, duration: 0.6, ease: "sine.out" },
                0
              ),
              this._clockTimeline.to(
                i,
                {
                  y: "-=" + (i.texture.height - 4).toString(),
                  duration: 0.2,
                  ease: "sine.out",
                },
                ">"
              ),
              this._clockTimeline.to(
                n,
                { angle: 0, duration: 0.8, ease: "back.in" },
                ">"
              ),
              this._clockTimeline.to(
                o,
                { alpha: 1, duration: 0.8, ease: "sine.out" },
                "<"
              ),
              this._clockTimeline.to(
                this._clockWrapper.scale,
                { x: 0.2, y: 0.2, duration: 0.4, ease: "sine.out" },
                ">+0.4"
              ),
              this._clockTimeline.to(
                this._clockWrapper,
                { y: "-=246", duration: 0.4, ease: "sine.out" },
                "<"
              ),
              this._clockTimeline.to(
                this._clockWrapper,
                { alpha: 0, duration: 0.2, ease: "sine.out" },
                "<+0.2"
              ),
              this._clockTimeline.call(
                function () {
                  EE.i.onExtraTime(25);
                },
                null,
                ">"
              ),
              this._clockTimeline.to(
                EE.i.remainingTime.text.scale,
                {
                  x: 1.4,
                  y: 1.4,
                  repeat: 1,
                  yoyo: !0,
                  duration: 0.2,
                  ease: "sine.out",
                },
                "<"
              ),
              this._clockTimeline.call(
                function () {
                  e._onCompleted.dispatch(e);
                },
                null,
                ">"
              ),
              EE.i.tweenGroup.add(this._clockTimeline),
              Jv.audio.playSfx("extra_time");
          }),
          (e.prototype.end = function () {
            this._clockTimeline.kill(),
              (this._clockTimeline = null),
              EE.i.layers.vfx.removeChild(this._spawnAnim),
              EE.i.layers.vfx.removeChild(this._clockWrapper),
              t.prototype.end.call(this);
          }),
          (e.prototype.update = function (t) {
            this._spawnAnim.visible && this._spawnAnim.update(t);
          }),
          e
        );
      })(sx);
      var kx = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const Fx = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (
            (e._comicBox = null),
            (e._controls = null),
            (e._tutorialStep = null),
            (e._tl = null),
            (e._isActive = null),
            (e._keyDownListener = null),
            (e._onCompleted = null),
            e
          );
        }
        return (
          kx(e, t),
          Object.defineProperty(e.prototype, "step", {
            get: function () {
              return this._tutorialStep;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(e.prototype, "isActive", {
            get: function () {
              return this._isActive;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(e.prototype, "onCompleted", {
            get: function () {
              return this._onCompleted;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (e.prototype.init = function () {
            (this._onCompleted = new tb.Signal()),
              (this._isActive = !1),
              (this._comicBox = new Co()),
              (this._comicBox.visible = !1),
              this._comicBox.anchor.set(0.5),
              this._comicBox.position.set(
                -Jv.app.safeAreaMarginX,
                0.65 * Jv.app.height
              ),
              this.addChild(this._comicBox),
              (this._controls = new ce()),
              this.addChild(this._controls),
              (this._tl = new Uc.core.Timeline()),
              EE.i.tweenGroup.add(this._tl);
          }),
          (e.prototype.end = function () {
            this._onCompleted.dispose(),
              (this._onCompleted = null),
              this._tl.kill(),
              (this._tl = null),
              this._keyDownListener &&
                (document.removeEventListener("keydown", this._keyDownListener),
                (this._keyDownListener = null));
          }),
          (e.prototype.show = function (t) {
            if (
              ((this._isActive = !0),
              (this._tutorialStep = t),
              0 == t &&
                ((EE.i.hud.rotateButton.interactive = !1),
                (EE.i.input.isFallEnabled = !1),
                (EE.i.input.isMoveRightEnabled = !1)),
              (this._comicBox.visible =
                0 == this._tutorialStep ||
                1 == this._tutorialStep ||
                2 == this._tutorialStep ||
                5 == this._tutorialStep ||
                6 == this._tutorialStep ||
                7 == this._tutorialStep),
              this._comicBox.visible)
            ) {
              var e = null;
              switch (this._tutorialStep) {
                case 0:
                  e = 0;
                  break;
                case 2:
                  e = 1;
                  break;
                case 1:
                  e = 2;
                  break;
                case 5:
                  e = 3;
                  break;
                case 6:
                  e = 4;
                  break;
                case 7:
                  e = 5;
              }
              (this._comicBox.texture =
                Jv.resources["tut_comic_" + e.toString()].texture),
                (this._comicBox.x = 0.5 * -this._comicBox.texture.width),
                (5 != this._tutorialStep &&
                  6 != this._tutorialStep &&
                  7 != this._tutorialStep) ||
                  (this._comicBox.y = 0.5 * Jv.app.height);
            }
            switch (
              (this._tl.clear(),
              this._comicBox.visible &&
                this._tl.to(
                  this._comicBox,
                  { x: 0.5 * Jv.app.width, duration: 0.6, ease: "back.out" },
                  0
                ),
              t)
            ) {
              case 0:
                Jv.app.renderer.plugins.interaction.supportsTouchEvents
                  ? this._setupTapLeft()
                  : this._setupPressLeftArrow();
                break;
              case 3:
                Jv.app.renderer.plugins.interaction.supportsTouchEvents
                  ? this._setupTapRight()
                  : this._setupPressRightArrow();
                break;
              case 1:
              case 4:
                Jv.app.renderer.plugins.interaction.supportsTouchEvents
                  ? this._setupSwipeDown()
                  : this._setupPressDownArrow();
                break;
              case 2:
                Jv.app.renderer.plugins.interaction.supportsTouchEvents
                  ? this._setupRotate()
                  : this._setupPressUpArrow();
                break;
              case 5:
                this._setupObjective();
                break;
              case 6:
                this._setupCheckpoint();
                break;
              case 7:
                this._setupPowerup();
            }
            this._tl.play(0);
          }),
          (e.prototype._setupTapLeft = function () {
            var t = this;
            EE.i.input.onMovedLeft.addOnce(function () {
              (EE.i.input.isMoveLeftEnabled = !1),
                EE.i.input.setEnabled(!1),
                (t._isActive = !1),
                t._tl.clear(),
                t._controls.removeChildren(),
                t._comicBox.visible
                  ? EE.i.tweenGroup.add(
                      Uc.to(t._comicBox, {
                        x:
                          Jv.app.width +
                          Jv.app.safeAreaMarginX +
                          0.5 * t._comicBox.texture.width,
                        duration: 0.6,
                        ease: "back.in",
                        onComplete: t._onComicBox_Out,
                        callbackScope: t,
                      })
                    )
                  : t._onComicBox_Out();
            });
            var e = new Co(Jv.resources.tut_hand.texture);
            e.anchor.set(135 / e.texture.width, 17 / e.texture.height),
              e.position.set(0.5 * Jv.app.width - 140, 346),
              this._controls.addChild(e);
            var i = new Co(Jv.resources.tut_tap.texture);
            i.anchor.set(0.5),
              i.position.copyFrom(e.position),
              (i.y -= 50),
              this._controls.addChildAt(i, 0),
              i.scale.set(0),
              (e.visible = !1),
              this._tl.call(
                function () {
                  e.visible = !0;
                },
                null,
                ">"
              );
            var r = new Uc.core.Timeline();
            r.repeat(-1),
              r.repeatDelay(0.2),
              r.to(e, { y: "-=50", duration: 0.8, ease: "sine.out" }, 0),
              r.to(
                e.scale,
                { x: 0.8, y: 0.8, duration: 0.8, ease: "sine.out" },
                0
              ),
              r.to(
                i.scale,
                { x: 1, y: 1, duration: 0.6, ease: "sine.out" },
                ">"
              ),
              r.to(i, { alpha: 0, duration: 0.4, ease: "sine.out" }, "<+0.2"),
              this._tl.add(r, "<");
          }),
          (e.prototype._setupPressLeftArrow = function () {
            var t = this;
            EE.i.input.onMovedLeft.addOnce(function () {
              (EE.i.input.isMoveLeftEnabled = !1),
                EE.i.input.setEnabled(!1),
                (t._isActive = !1),
                t._tl.clear(),
                t._controls.removeChildren(),
                t._comicBox.visible
                  ? EE.i.tweenGroup.add(
                      Uc.to(t._comicBox, {
                        x:
                          Jv.app.width +
                          Jv.app.safeAreaMarginX +
                          0.5 * t._comicBox.texture.width,
                        duration: 0.6,
                        ease: "back.in",
                        onComplete: t._onComicBox_Out,
                        callbackScope: t,
                      })
                    )
                  : t._onComicBox_Out();
            });
            var e = new Co(Jv.resources.tut_key_left.texture);
            e.anchor.set(0.5),
              e.position.set(494, 396),
              this._controls.addChild(e);
            var i = new Co(Jv.resources.tut_key_left_pressed.texture);
            i.anchor.set(0.5),
              i.position.copyFrom(e),
              this._controls.addChild(i);
            var r = new Co(Jv.resources.tut_tap.texture);
            r.anchor.set(0.5),
              r.position.copyFrom(e.position),
              this._controls.addChildAt(r, 0),
              r.scale.set(0),
              (e.visible = !1),
              (i.visible = !1),
              this._tl.call(
                function () {
                  e.visible = !0;
                },
                null,
                ">"
              );
            var n = new Uc.core.Timeline();
            n.repeat(-1),
              n.repeatDelay(0.2),
              n.call(
                function () {
                  (e.visible = !e.visible), (i.visible = !i.visible);
                },
                null,
                0
              ),
              n.call(
                function () {
                  (e.visible = !e.visible), (i.visible = !i.visible);
                },
                null,
                0.2
              ),
              n.to(
                r.scale,
                { x: 1, y: 1, duration: 0.6, ease: "sine.out" },
                "<"
              ),
              n.to(r, { alpha: 0, duration: 0.4, ease: "sine.out" }, "<+0.2"),
              this._tl.add(n, "<");
          }),
          (e.prototype._setupTapRight = function () {
            var t = this;
            EE.i.input.setEnabled(!0),
              EE.i.input.onMovedRight.addOnce(function () {
                (EE.i.input.isMoveRightEnabled = !1),
                  EE.i.input.setEnabled(!1),
                  (t._isActive = !1),
                  t._tl.clear(),
                  t._controls.removeChildren(),
                  t._comicBox.visible
                    ? EE.i.tweenGroup.add(
                        Uc.to(t._comicBox, {
                          x:
                            Jv.app.width +
                            Jv.app.safeAreaMarginX +
                            0.5 * t._comicBox.texture.width,
                          duration: 0.6,
                          ease: "back.in",
                          onComplete: t._onComicBox_Out,
                          callbackScope: t,
                        })
                      )
                    : t._onComicBox_Out();
              });
            var e = new Co(Jv.resources.tut_hand.texture);
            e.anchor.set(135 / e.texture.width, 17 / e.texture.height),
              (e.scale.x = -1),
              e.position.set(494, 346),
              this._controls.addChild(e);
            var i = new Co(Jv.resources.tut_tap.texture);
            i.anchor.set(0.5),
              i.position.copyFrom(e.position),
              (i.y -= 50),
              this._controls.addChildAt(i, 0),
              i.scale.set(0),
              (e.visible = !1),
              this._tl.call(
                function () {
                  e.visible = !0;
                },
                null,
                ">"
              );
            var r = new Uc.core.Timeline();
            r.repeat(-1),
              r.repeatDelay(0.2),
              r.to(e, { y: "-=50", duration: 0.8, ease: "sine.out" }, 0),
              r.to(
                e.scale,
                { x: -0.8, y: 0.8, duration: 0.8, ease: "sine.out" },
                0
              ),
              r.to(
                i.scale,
                { x: 1, y: 1, duration: 0.6, ease: "sine.out" },
                ">"
              ),
              r.to(i, { alpha: 0, duration: 0.4, ease: "sine.out" }, "<+0.2"),
              this._tl.add(r, "<");
          }),
          (e.prototype._setupPressRightArrow = function () {
            var t = this;
            EE.i.input.setEnabled(!0),
              EE.i.input.onMovedRight.addOnce(function () {
                (EE.i.input.isMoveRightEnabled = !1),
                  EE.i.input.setEnabled(!1),
                  (t._isActive = !1),
                  t._tl.clear(),
                  t._controls.removeChildren(),
                  t._comicBox.visible
                    ? EE.i.tweenGroup.add(
                        Uc.to(t._comicBox, {
                          x:
                            Jv.app.width +
                            Jv.app.safeAreaMarginX +
                            0.5 * t._comicBox.texture.width,
                          duration: 0.6,
                          ease: "back.in",
                          onComplete: t._onComicBox_Out,
                          callbackScope: t,
                        })
                      )
                    : t._onComicBox_Out();
              });
            var e = new Co(Jv.resources.tut_key_right.texture);
            e.anchor.set(0.5),
              e.position.set(494, 396),
              this._controls.addChild(e);
            var i = new Co(Jv.resources.tut_key_right_pressed.texture);
            i.anchor.set(0.5),
              i.position.copyFrom(e),
              this._controls.addChild(i);
            var r = new Co(Jv.resources.tut_tap.texture);
            r.anchor.set(0.5),
              r.position.copyFrom(e.position),
              this._controls.addChildAt(r, 0),
              r.scale.set(0),
              (e.visible = !1),
              (i.visible = !1),
              this._tl.call(
                function () {
                  e.visible = !0;
                },
                null,
                ">"
              );
            var n = new Uc.core.Timeline();
            n.repeat(-1),
              n.repeatDelay(0.2),
              n.call(
                function () {
                  (e.visible = !e.visible), (i.visible = !i.visible);
                },
                null,
                0
              ),
              n.call(
                function () {
                  (e.visible = !e.visible), (i.visible = !i.visible);
                },
                null,
                0.2
              ),
              n.to(
                r.scale,
                { x: 1, y: 1, duration: 0.6, ease: "sine.out" },
                "<"
              ),
              n.to(r, { alpha: 0, duration: 0.4, ease: "sine.out" }, "<+0.2"),
              this._tl.add(n, "<");
          }),
          (e.prototype._setupRotate = function () {
            var t = this,
              e = new Co(Jv.resources.tut_hand.texture);
            e.anchor.set(135 / e.texture.width, 17 / e.texture.height),
              (e.scale.x = -1),
              e.position.copyFrom(EE.i.hud.rotateButton.position),
              (e.y += 50),
              this._controls.addChild(e),
              (e.visible = !1),
              this._tl.call(
                function () {
                  (EE.i.hud.rotateButton.interactive = !0),
                    EE.i.hud.rotateButton.once("pointertap", function () {
                      (EE.i.hud.rotateButton.interactive = !1),
                        (EE.i.input.isMoveRightEnabled = !0),
                        EE.i.input.setEnabled(!1),
                        (t._isActive = !1),
                        t._tl.clear(),
                        t._controls.removeChildren(),
                        t._comicBox.visible
                          ? EE.i.tweenGroup.add(
                              Uc.to(t._comicBox, {
                                x:
                                  Jv.app.width +
                                  Jv.app.safeAreaMarginX +
                                  0.5 * t._comicBox.texture.width,
                                duration: 0.6,
                                ease: "back.in",
                                onComplete: t._onComicBox_Out,
                                callbackScope: t,
                              })
                            )
                          : t._onComicBox_Out();
                    }),
                    (e.visible = !0);
                },
                null,
                ">"
              );
            var i = new Uc.core.Timeline();
            i.repeat(-1),
              i.repeatDelay(0.2),
              i.to(e, { y: "-=50", duration: 0.8, ease: "sine.out" }, 0),
              i.to(
                e.scale,
                { x: -0.8, y: 0.8, duration: 0.8, ease: "sine.out" },
                0
              ),
              this._tl.add(i, ">");
          }),
          (e.prototype._setupPressUpArrow = function () {
            var t = this;
            this._tl.call(
              function () {
                EE.i.input.setEnabled(!0),
                  EE.i.input.onArrowUp.addOnce(function () {
                    (EE.i.input.isMoveRightEnabled = !0),
                      EE.i.input.setEnabled(!1),
                      (t._isActive = !1),
                      t._tl.clear(),
                      t._controls.removeChildren(),
                      t._comicBox.visible
                        ? EE.i.tweenGroup.add(
                            Uc.to(t._comicBox, {
                              x:
                                Jv.app.width +
                                Jv.app.safeAreaMarginX +
                                0.5 * t._comicBox.texture.width,
                              duration: 0.6,
                              ease: "back.in",
                              onComplete: t._onComicBox_Out,
                              callbackScope: t,
                            })
                          )
                        : t._onComicBox_Out();
                  });
              },
              null,
              ">"
            );
            var e = new Co(Jv.resources.tut_key_up.texture);
            e.anchor.set(0.5),
              e.position.set(494, 396),
              this._controls.addChild(e);
            var i = new Co(Jv.resources.tut_key_up_pressed.texture);
            i.anchor.set(0.5),
              i.position.copyFrom(e),
              this._controls.addChild(i);
            var r = new Co(Jv.resources.tut_tap.texture);
            r.anchor.set(0.5),
              r.position.copyFrom(e.position),
              this._controls.addChildAt(r, 0),
              r.scale.set(0),
              (e.visible = !1),
              (i.visible = !1),
              this._tl.call(
                function () {
                  e.visible = !0;
                },
                null,
                ">"
              );
            var n = new Uc.core.Timeline();
            n.repeat(-1),
              n.repeatDelay(0.2),
              n.call(
                function () {
                  (e.visible = !e.visible), (i.visible = !i.visible);
                },
                null,
                0
              ),
              n.call(
                function () {
                  (e.visible = !e.visible), (i.visible = !i.visible);
                },
                null,
                0.2
              ),
              n.to(
                r.scale,
                { x: 1, y: 1, duration: 0.6, ease: "sine.out" },
                "<"
              ),
              n.to(r, { alpha: 0, duration: 0.4, ease: "sine.out" }, "<+0.2"),
              this._tl.add(n, ">");
          }),
          (e.prototype._setupSwipeDown = function () {
            var t = this;
            EE.i.input.setEnabled(!0),
              EE.i.input.onFall.addOnce(function () {
                4 == t._tutorialStep
                  ? ((EE.i.input.isMoveLeftEnabled = !0),
                    (EE.i.input.isMoveRightEnabled = !0),
                    (EE.i.hud.rotateButton.interactive = !0))
                  : (EE.i.input.isFallEnabled = !1),
                  (t._isActive = !1),
                  t._tl.clear(),
                  t._controls.removeChildren(),
                  t._comicBox.visible
                    ? EE.i.tweenGroup.add(
                        Uc.to(t._comicBox, {
                          x:
                            Jv.app.width +
                            Jv.app.safeAreaMarginX +
                            0.5 * t._comicBox.texture.width,
                          duration: 0.6,
                          ease: "back.in",
                          onComplete: t._onComicBox_Out,
                          callbackScope: t,
                        })
                      )
                    : t._onComicBox_Out();
              });
            var e = new Co(Jv.resources.tut_hand.texture);
            e.anchor.set(135 / e.texture.width, 17 / e.texture.height),
              e.position.set(0.5 * Jv.app.width, 376),
              this._controls.addChild(e);
            var i = new Co(Jv.resources.tut_tap.texture);
            i.anchor.set(0.5),
              i.position.copyFrom(e.position),
              (i.y -= 50),
              this._controls.addChildAt(i, 0),
              i.scale.set(0),
              (e.visible = !1),
              this._tl.call(
                function () {
                  (EE.i.input.isFallEnabled = !0), (e.visible = !0);
                },
                null,
                ">"
              );
            var r = new Uc.core.Timeline();
            r.repeat(-1),
              r.repeatDelay(0.2),
              r.to(e, { y: "-=50", duration: 0.8, ease: "sine.out" }, 0),
              r.to(
                e.scale,
                { x: 0.8, y: 0.8, duration: 0.8, ease: "sine.out" },
                0
              ),
              r.to(e, { y: "+=80", duration: 1.2, ease: "sine.out" }, ">"),
              r.to(
                i.scale,
                { x: 1, y: 1, duration: 0.6, ease: "sine.out" },
                0.8
              ),
              r.to(i, { alpha: 0, duration: 0.4, ease: "sine.out" }, "<+0.2"),
              this._tl.add(r, ">"),
              4 == this._tutorialStep &&
                EE.i.world.curBlock.onHit.addOnce(function () {
                  t.show(5);
                });
          }),
          (e.prototype._setupPressDownArrow = function () {
            var t = this;
            EE.i.input.setEnabled(!0),
              EE.i.input.onFall.addOnce(function () {
                4 == t._tutorialStep
                  ? ((EE.i.input.isMoveLeftEnabled = !0),
                    (EE.i.input.isMoveRightEnabled = !0),
                    (EE.i.hud.rotateButton.interactive = !0))
                  : (EE.i.input.isFallEnabled = !1),
                  EE.i.input.setEnabled(!1),
                  (t._isActive = !1),
                  t._tl.clear(),
                  t._controls.removeChildren(),
                  t._comicBox.visible
                    ? EE.i.tweenGroup.add(
                        Uc.to(t._comicBox, {
                          x:
                            Jv.app.width +
                            Jv.app.safeAreaMarginX +
                            0.5 * t._comicBox.texture.width,
                          duration: 0.6,
                          ease: "back.in",
                          onComplete: t._onComicBox_Out,
                          callbackScope: t,
                        })
                      )
                    : t._onComicBox_Out();
              });
            var e = new Co(Jv.resources.tut_key_down.texture);
            e.anchor.set(0.5),
              e.position.set(494, 396),
              this._controls.addChild(e);
            var i = new Co(Jv.resources.tut_key_down_pressed.texture);
            i.anchor.set(0.5),
              i.position.copyFrom(e),
              this._controls.addChild(i);
            var r = new Co(Jv.resources.tut_tap.texture);
            r.anchor.set(0.5),
              r.position.copyFrom(e.position),
              this._controls.addChildAt(r, 0),
              r.scale.set(0),
              (e.visible = !1),
              (i.visible = !1),
              this._tl.call(
                function () {
                  (EE.i.input.isFallEnabled = !0), (e.visible = !0);
                },
                null,
                ">"
              );
            var n = new Uc.core.Timeline();
            n.repeat(-1),
              n.repeatDelay(0.2),
              n.call(
                function () {
                  (e.visible = !e.visible), (i.visible = !i.visible);
                },
                null,
                0
              ),
              n.call(
                function () {
                  (e.visible = !e.visible), (i.visible = !i.visible);
                },
                null,
                0.2
              ),
              n.to(
                r.scale,
                { x: 1, y: 1, duration: 0.6, ease: "sine.out" },
                "<"
              ),
              n.to(r, { alpha: 0, duration: 0.4, ease: "sine.out" }, "<+0.2"),
              this._tl.add(n, ">"),
              4 == this._tutorialStep &&
                EE.i.world.curBlock.onHit.addOnce(function () {
                  t.show(5);
                });
          }),
          (e.prototype._setupObjective = function () {
            var t = this;
            EE.i.input.setEnabled(!1),
              (EE.i.layers.disabled.visible = !0),
              this._tl.call(
                function () {
                  EE.i.layers.disabled.children[0].once(
                    "pointertap",
                    function () {
                      t._onObjectiveKeyDown();
                    }
                  ),
                    (t._keyDownListener = t._onObjectiveKeyDown.bind(t)),
                    document.addEventListener("keydown", t._keyDownListener);
                },
                null,
                ">"
              );
          }),
          (e.prototype._onObjectiveKeyDown = function () {
            EE.i.input.setEnabled(!0),
              this._keyDownListener &&
                (document.removeEventListener("keydown", this._keyDownListener),
                (this._keyDownListener = null)),
              (EE.i.layers.disabled.visible = !1),
              this._tl.clear(),
              (this._isActive = !1),
              EE.i.tweenGroup.add(
                Uc.to(this._comicBox, {
                  x:
                    Jv.app.width +
                    Jv.app.safeAreaMarginX +
                    0.5 * this._comicBox.texture.width,
                  duration: 0.6,
                  ease: "back.in",
                  onComplete: this._onComicBox_Out,
                  callbackScope: this,
                })
              );
          }),
          (e.prototype._setupCheckpoint = function () {
            var t = this;
            (EE.i.layers.disabled.visible = !0),
              this._tl.call(
                function () {
                  EE.i.layers.disabled.children[0].once(
                    "pointertap",
                    function () {
                      t._onCheckpointKeyDown();
                    }
                  ),
                    (t._keyDownListener = t._onCheckpointKeyDown.bind(t)),
                    document.addEventListener("keydown", t._keyDownListener);
                },
                null,
                ">"
              );
          }),
          (e.prototype._onCheckpointKeyDown = function () {
            this._keyDownListener &&
              (document.removeEventListener("keydown", this._keyDownListener),
              (this._keyDownListener = null)),
              (EE.i.layers.disabled.visible = !1),
              this._tl.clear(),
              (this._isActive = !1),
              EE.i.tweenGroup.add(
                Uc.to(this._comicBox, {
                  x:
                    Jv.app.width +
                    Jv.app.safeAreaMarginX +
                    0.5 * this._comicBox.texture.width,
                  duration: 0.6,
                  ease: "back.in",
                  onComplete: this._onComicBox_Out,
                  callbackScope: this,
                })
              );
          }),
          (e.prototype._setupPowerup = function () {
            var t = this;
            EE.i.input.setEnabled(!1),
              (EE.i.layers.disabled.visible = !0),
              this._tl.call(
                function () {
                  EE.i.layers.disabled.children[0].once(
                    "pointertap",
                    function () {
                      t._onSetupKeyDown();
                    }
                  ),
                    (t._keyDownListener = t._onSetupKeyDown.bind(t)),
                    document.addEventListener("keydown", t._keyDownListener);
                },
                null,
                ">"
              );
          }),
          (e.prototype._onSetupKeyDown = function () {
            EE.i.input.setEnabled(!0),
              this._keyDownListener &&
                (document.removeEventListener("keydown", this._keyDownListener),
                (this._keyDownListener = null)),
              (EE.i.layers.disabled.visible = !1),
              this._tl.clear(),
              (this._isActive = !1),
              EE.i.tweenGroup.add(
                Uc.to(this._comicBox, {
                  x:
                    Jv.app.width +
                    Jv.app.safeAreaMarginX +
                    0.5 * this._comicBox.texture.width,
                  duration: 0.6,
                  ease: "back.in",
                  onComplete: this._onComicBox_Out,
                  callbackScope: this,
                })
              );
          }),
          (e.prototype._onComicBox_Out = function () {
            (this._comicBox.visible = !1),
              (this._tutorialStep += 1),
              this._tutorialStep > 5
                ? ((Jv.saved.data.tutorialStep = this._tutorialStep),
                  Jv.saved.save(),
                  this._tutorialStep > 7 && this._onCompleted.dispatch())
                : (1 != this._tutorialStep &&
                    3 != this._tutorialStep &&
                    4 != this._tutorialStep) ||
                  this.show(this._tutorialStep);
          }),
          e
        );
      })(ce);
      var Dx = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        Nx = (function (t) {
          function e() {
            var e = t.call(this) || this;
            return (
              (e._text = null),
              (e._text = new Lo("", {
                fontFamily: "tilt_warp_regular",
                dropShadow: !0,
                dropShadowAngle: 0.7,
                dropShadowBlur: 2,
                dropShadowDistance: 4,
                fill: ["#ff2e2e", "#ffd6d6", "#ff8888"],
                fillGradientStops: [0.2, 0.6],
                fontSize: 50,
                strokeThickness: 4,
                lineJoin: "round",
              })),
              e._text.anchor.set(0.5),
              e._text.position.set(
                0.5 * Jv.app.width,
                20 + 0.5 * e._text.height
              ),
              e.addChild(e._text),
              e
            );
          }
          return (
            Dx(e, t),
            Object.defineProperty(e.prototype, "text", {
              get: function () {
                return this._text;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.onTimeUpdated = function (t) {
              var e, i, r;
              (e = Math.floor(t / 60 / 60)),
                (i = Math.floor(60 * (t / 60 / 60 - e))),
                (r = Math.floor(60 * (60 * (t / 60 / 60 - e) - i))),
                (this._text.text =
                  ("0" + e.toString()).slice(-2) +
                  ":" +
                  ("0" + i.toString()).slice(-2) +
                  ":" +
                  ("0" + r.toString()).slice(-2));
            }),
            (e.prototype.onTimePenalty = function () {
              Jv.audio.playSfx("lost_life"),
                EE.i.tweenGroup.add(
                  Uc.to(
                    {},
                    {
                      duration: 0.5,
                      onUpdate: this._onRemainingTimeTextTint_Updated,
                      onUpdateParams: [this._text],
                    }
                  )
                );
            }),
            (e.prototype._onRemainingTimeTextTint_Updated = function (t) {
              t.tint = mt([
                1,
                1 * this.totalProgress(),
                1 * this.totalProgress(),
              ]);
            }),
            (e.prototype.onExtraReward = function () {
              this._text.text = "";
            }),
            e
          );
        })(ce);
      const Lx = Nx;
      var Ux = ((t) => (
          (t[(t.WEBGL_LEGACY = 0)] = "WEBGL_LEGACY"),
          (t[(t.WEBGL = 1)] = "WEBGL"),
          (t[(t.WEBGL2 = 2)] = "WEBGL2"),
          t
        ))(Ux || {}),
        Gx = ((t) => (
          (t[(t.UNKNOWN = 0)] = "UNKNOWN"),
          (t[(t.WEBGL = 1)] = "WEBGL"),
          (t[(t.CANVAS = 2)] = "CANVAS"),
          t
        ))(Gx || {}),
        Vx = ((t) => (
          (t[(t.COLOR = 16384)] = "COLOR"),
          (t[(t.DEPTH = 256)] = "DEPTH"),
          (t[(t.STENCIL = 1024)] = "STENCIL"),
          t
        ))(Vx || {}),
        jx = ((t) => (
          (t[(t.NORMAL = 0)] = "NORMAL"),
          (t[(t.ADD = 1)] = "ADD"),
          (t[(t.MULTIPLY = 2)] = "MULTIPLY"),
          (t[(t.SCREEN = 3)] = "SCREEN"),
          (t[(t.OVERLAY = 4)] = "OVERLAY"),
          (t[(t.DARKEN = 5)] = "DARKEN"),
          (t[(t.LIGHTEN = 6)] = "LIGHTEN"),
          (t[(t.COLOR_DODGE = 7)] = "COLOR_DODGE"),
          (t[(t.COLOR_BURN = 8)] = "COLOR_BURN"),
          (t[(t.HARD_LIGHT = 9)] = "HARD_LIGHT"),
          (t[(t.SOFT_LIGHT = 10)] = "SOFT_LIGHT"),
          (t[(t.DIFFERENCE = 11)] = "DIFFERENCE"),
          (t[(t.EXCLUSION = 12)] = "EXCLUSION"),
          (t[(t.HUE = 13)] = "HUE"),
          (t[(t.SATURATION = 14)] = "SATURATION"),
          (t[(t.COLOR = 15)] = "COLOR"),
          (t[(t.LUMINOSITY = 16)] = "LUMINOSITY"),
          (t[(t.NORMAL_NPM = 17)] = "NORMAL_NPM"),
          (t[(t.ADD_NPM = 18)] = "ADD_NPM"),
          (t[(t.SCREEN_NPM = 19)] = "SCREEN_NPM"),
          (t[(t.NONE = 20)] = "NONE"),
          (t[(t.SRC_OVER = 0)] = "SRC_OVER"),
          (t[(t.SRC_IN = 21)] = "SRC_IN"),
          (t[(t.SRC_OUT = 22)] = "SRC_OUT"),
          (t[(t.SRC_ATOP = 23)] = "SRC_ATOP"),
          (t[(t.DST_OVER = 24)] = "DST_OVER"),
          (t[(t.DST_IN = 25)] = "DST_IN"),
          (t[(t.DST_OUT = 26)] = "DST_OUT"),
          (t[(t.DST_ATOP = 27)] = "DST_ATOP"),
          (t[(t.ERASE = 26)] = "ERASE"),
          (t[(t.SUBTRACT = 28)] = "SUBTRACT"),
          (t[(t.XOR = 29)] = "XOR"),
          t
        ))(jx || {}),
        zx = ((t) => (
          (t[(t.POINTS = 0)] = "POINTS"),
          (t[(t.LINES = 1)] = "LINES"),
          (t[(t.LINE_LOOP = 2)] = "LINE_LOOP"),
          (t[(t.LINE_STRIP = 3)] = "LINE_STRIP"),
          (t[(t.TRIANGLES = 4)] = "TRIANGLES"),
          (t[(t.TRIANGLE_STRIP = 5)] = "TRIANGLE_STRIP"),
          (t[(t.TRIANGLE_FAN = 6)] = "TRIANGLE_FAN"),
          t
        ))(zx || {}),
        Xx = ((t) => (
          (t[(t.RGBA = 6408)] = "RGBA"),
          (t[(t.RGB = 6407)] = "RGB"),
          (t[(t.RG = 33319)] = "RG"),
          (t[(t.RED = 6403)] = "RED"),
          (t[(t.RGBA_INTEGER = 36249)] = "RGBA_INTEGER"),
          (t[(t.RGB_INTEGER = 36248)] = "RGB_INTEGER"),
          (t[(t.RG_INTEGER = 33320)] = "RG_INTEGER"),
          (t[(t.RED_INTEGER = 36244)] = "RED_INTEGER"),
          (t[(t.ALPHA = 6406)] = "ALPHA"),
          (t[(t.LUMINANCE = 6409)] = "LUMINANCE"),
          (t[(t.LUMINANCE_ALPHA = 6410)] = "LUMINANCE_ALPHA"),
          (t[(t.DEPTH_COMPONENT = 6402)] = "DEPTH_COMPONENT"),
          (t[(t.DEPTH_STENCIL = 34041)] = "DEPTH_STENCIL"),
          t
        ))(Xx || {}),
        Hx = ((t) => (
          (t[(t.TEXTURE_2D = 3553)] = "TEXTURE_2D"),
          (t[(t.TEXTURE_CUBE_MAP = 34067)] = "TEXTURE_CUBE_MAP"),
          (t[(t.TEXTURE_2D_ARRAY = 35866)] = "TEXTURE_2D_ARRAY"),
          (t[(t.TEXTURE_CUBE_MAP_POSITIVE_X = 34069)] =
            "TEXTURE_CUBE_MAP_POSITIVE_X"),
          (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070)] =
            "TEXTURE_CUBE_MAP_NEGATIVE_X"),
          (t[(t.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071)] =
            "TEXTURE_CUBE_MAP_POSITIVE_Y"),
          (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072)] =
            "TEXTURE_CUBE_MAP_NEGATIVE_Y"),
          (t[(t.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073)] =
            "TEXTURE_CUBE_MAP_POSITIVE_Z"),
          (t[(t.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074)] =
            "TEXTURE_CUBE_MAP_NEGATIVE_Z"),
          t
        ))(Hx || {}),
        Yx = ((t) => (
          (t[(t.UNSIGNED_BYTE = 5121)] = "UNSIGNED_BYTE"),
          (t[(t.UNSIGNED_SHORT = 5123)] = "UNSIGNED_SHORT"),
          (t[(t.UNSIGNED_SHORT_5_6_5 = 33635)] = "UNSIGNED_SHORT_5_6_5"),
          (t[(t.UNSIGNED_SHORT_4_4_4_4 = 32819)] = "UNSIGNED_SHORT_4_4_4_4"),
          (t[(t.UNSIGNED_SHORT_5_5_5_1 = 32820)] = "UNSIGNED_SHORT_5_5_5_1"),
          (t[(t.UNSIGNED_INT = 5125)] = "UNSIGNED_INT"),
          (t[(t.UNSIGNED_INT_10F_11F_11F_REV = 35899)] =
            "UNSIGNED_INT_10F_11F_11F_REV"),
          (t[(t.UNSIGNED_INT_2_10_10_10_REV = 33640)] =
            "UNSIGNED_INT_2_10_10_10_REV"),
          (t[(t.UNSIGNED_INT_24_8 = 34042)] = "UNSIGNED_INT_24_8"),
          (t[(t.UNSIGNED_INT_5_9_9_9_REV = 35902)] =
            "UNSIGNED_INT_5_9_9_9_REV"),
          (t[(t.BYTE = 5120)] = "BYTE"),
          (t[(t.SHORT = 5122)] = "SHORT"),
          (t[(t.INT = 5124)] = "INT"),
          (t[(t.FLOAT = 5126)] = "FLOAT"),
          (t[(t.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269)] =
            "FLOAT_32_UNSIGNED_INT_24_8_REV"),
          (t[(t.HALF_FLOAT = 36193)] = "HALF_FLOAT"),
          t
        ))(Yx || {}),
        Wx = ((t) => (
          (t[(t.FLOAT = 0)] = "FLOAT"),
          (t[(t.INT = 1)] = "INT"),
          (t[(t.UINT = 2)] = "UINT"),
          t
        ))(Wx || {}),
        qx = ((t) => (
          (t[(t.NEAREST = 0)] = "NEAREST"), (t[(t.LINEAR = 1)] = "LINEAR"), t
        ))(qx || {}),
        $x = ((t) => (
          (t[(t.CLAMP = 33071)] = "CLAMP"),
          (t[(t.REPEAT = 10497)] = "REPEAT"),
          (t[(t.MIRRORED_REPEAT = 33648)] = "MIRRORED_REPEAT"),
          t
        ))($x || {}),
        Kx = ((t) => (
          (t[(t.OFF = 0)] = "OFF"),
          (t[(t.POW2 = 1)] = "POW2"),
          (t[(t.ON = 2)] = "ON"),
          (t[(t.ON_MANUAL = 3)] = "ON_MANUAL"),
          t
        ))(Kx || {}),
        Jx = ((t) => (
          (t[(t.NPM = 0)] = "NPM"),
          (t[(t.UNPACK = 1)] = "UNPACK"),
          (t[(t.PMA = 2)] = "PMA"),
          (t[(t.NO_PREMULTIPLIED_ALPHA = 0)] = "NO_PREMULTIPLIED_ALPHA"),
          (t[(t.PREMULTIPLY_ON_UPLOAD = 1)] = "PREMULTIPLY_ON_UPLOAD"),
          (t[(t.PREMULTIPLIED_ALPHA = 2)] = "PREMULTIPLIED_ALPHA"),
          t
        ))(Jx || {}),
        Zx = ((t) => (
          (t[(t.NO = 0)] = "NO"),
          (t[(t.YES = 1)] = "YES"),
          (t[(t.AUTO = 2)] = "AUTO"),
          (t[(t.BLEND = 0)] = "BLEND"),
          (t[(t.CLEAR = 1)] = "CLEAR"),
          (t[(t.BLIT = 2)] = "BLIT"),
          t
        ))(Zx || {}),
        Qx = ((t) => (
          (t[(t.AUTO = 0)] = "AUTO"), (t[(t.MANUAL = 1)] = "MANUAL"), t
        ))(Qx || {}),
        tw = ((t) => (
          (t.LOW = "lowp"), (t.MEDIUM = "mediump"), (t.HIGH = "highp"), t
        ))(tw || {}),
        ew = ((t) => (
          (t[(t.NONE = 0)] = "NONE"),
          (t[(t.SCISSOR = 1)] = "SCISSOR"),
          (t[(t.STENCIL = 2)] = "STENCIL"),
          (t[(t.SPRITE = 3)] = "SPRITE"),
          (t[(t.COLOR = 4)] = "COLOR"),
          t
        ))(ew || {}),
        iw = ((t) => (
          (t[(t.NONE = 0)] = "NONE"),
          (t[(t.LOW = 2)] = "LOW"),
          (t[(t.MEDIUM = 4)] = "MEDIUM"),
          (t[(t.HIGH = 8)] = "HIGH"),
          t
        ))(iw || {}),
        rw = ((t) => (
          (t[(t.ELEMENT_ARRAY_BUFFER = 34963)] = "ELEMENT_ARRAY_BUFFER"),
          (t[(t.ARRAY_BUFFER = 34962)] = "ARRAY_BUFFER"),
          (t[(t.UNIFORM_BUFFER = 35345)] = "UNIFORM_BUFFER"),
          t
        ))(rw || {});
      const nw = {
          createCanvas: (t, e) => {
            const i = document.createElement("canvas");
            return (i.width = t), (i.height = e), i;
          },
          getCanvasRenderingContext2D: () => CanvasRenderingContext2D,
          getWebGLRenderingContext: () => WebGLRenderingContext,
          getNavigator: () => navigator,
          getBaseUrl: () => document.baseURI ?? window.location.href,
          getFontFaceSet: () => document.fonts,
          fetch: (t, e) => fetch(t, e),
          parseXML: (t) => new DOMParser().parseFromString(t, "text/xml"),
        },
        ow = {
          ADAPTER: nw,
          RESOLUTION: 1,
          CREATE_IMAGE_BITMAP: !1,
          ROUND_PIXELS: !1,
        };
      var sw = /iPhone/i,
        aw = /iPod/i,
        hw = /iPad/i,
        uw = /\biOS-universal(?:.+)Mac\b/i,
        lw = /\bAndroid(?:.+)Mobile\b/i,
        cw = /Android/i,
        dw = /(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,
        pw = /Silk/i,
        _w = /Windows Phone/i,
        fw = /\bWindows(?:.+)ARM\b/i,
        mw = /BlackBerry/i,
        yw = /BB10/i,
        gw = /Opera Mini/i,
        vw = /\b(CriOS|Chrome)(?:.+)Mobile/i,
        bw = /Mobile(?:.+)Firefox\b/i,
        xw = function (t) {
          return (
            void 0 !== t &&
            "MacIntel" === t.platform &&
            "number" == typeof t.maxTouchPoints &&
            t.maxTouchPoints > 1 &&
            "undefined" == typeof MSStream
          );
        };
      function ww(t) {
        var e = { userAgent: "", platform: "", maxTouchPoints: 0 };
        t || "undefined" == typeof navigator
          ? "string" == typeof t
            ? (e.userAgent = t)
            : t &&
              t.userAgent &&
              (e = {
                userAgent: t.userAgent,
                platform: t.platform,
                maxTouchPoints: t.maxTouchPoints || 0,
              })
          : (e = {
              userAgent: navigator.userAgent,
              platform: navigator.platform,
              maxTouchPoints: navigator.maxTouchPoints || 0,
            });
        var i = e.userAgent,
          r = i.split("[FBAN");
        void 0 !== r[1] && (i = r[0]),
          void 0 !== (r = i.split("Twitter"))[1] && (i = r[0]);
        var n = (function (t) {
            return function (e) {
              return e.test(t);
            };
          })(i),
          o = {
            apple: {
              phone: n(sw) && !n(_w),
              ipod: n(aw),
              tablet: !n(sw) && (n(hw) || xw(e)) && !n(_w),
              universal: n(uw),
              device: (n(sw) || n(aw) || n(hw) || n(uw) || xw(e)) && !n(_w),
            },
            amazon: {
              phone: n(dw),
              tablet: !n(dw) && n(pw),
              device: n(dw) || n(pw),
            },
            android: {
              phone: (!n(_w) && n(dw)) || (!n(_w) && n(lw)),
              tablet: !n(_w) && !n(dw) && !n(lw) && (n(pw) || n(cw)),
              device:
                (!n(_w) && (n(dw) || n(pw) || n(lw) || n(cw))) ||
                n(/\bokhttp\b/i),
            },
            windows: { phone: n(_w), tablet: n(fw), device: n(_w) || n(fw) },
            other: {
              blackberry: n(mw),
              blackberry10: n(yw),
              opera: n(gw),
              firefox: n(bw),
              chrome: n(vw),
              device: n(mw) || n(yw) || n(gw) || n(bw) || n(vw),
            },
            any: !1,
            phone: !1,
            tablet: !1,
          };
        return (
          (o.any =
            o.apple.device ||
            o.android.device ||
            o.windows.device ||
            o.other.device),
          (o.phone = o.apple.phone || o.android.phone || o.windows.phone),
          (o.tablet = o.apple.tablet || o.android.tablet || o.windows.tablet),
          o
        );
      }
      const Tw = (ww.default ?? ww)(globalThis.navigator);
      (ow.RETINA_PREFIX = /@([0-9\.]+)x/),
        (ow.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT = !1);
      var Aw = i(847);
      const Sw = {};
      function Ew(t, e, i = 3) {
        if (Sw[e]) return;
        let r = new Error().stack;
        typeof r > "u"
          ? console.warn(
              "PixiJS Deprecation Warning: ",
              `${e}\nDeprecated since v${t}`
            )
          : ((r = r.split("\n").splice(i).join("\n")),
            console.groupCollapsed
              ? (console.groupCollapsed(
                  "%cPixiJS Deprecation Warning: %c%s",
                  "color:#614108;background:#fffbe6",
                  "font-weight:normal;color:#614108;background:#fffbe6",
                  `${e}\nDeprecated since v${t}`
                ),
                console.warn(r),
                console.groupEnd())
              : (console.warn(
                  "PixiJS Deprecation Warning: ",
                  `${e}\nDeprecated since v${t}`
                ),
                console.warn(r))),
          (Sw[e] = !0);
      }
      let Cw;
      var Mw = { grad: 0.9, turn: 360, rad: 360 / (2 * Math.PI) },
        Pw = function (t) {
          return "string" == typeof t ? t.length > 0 : "number" == typeof t;
        },
        Bw = function (t, e, i) {
          return (
            void 0 === e && (e = 0),
            void 0 === i && (i = Math.pow(10, e)),
            Math.round(i * t) / i + 0
          );
        },
        Ow = function (t, e, i) {
          return (
            void 0 === e && (e = 0),
            void 0 === i && (i = 1),
            t > i ? i : t > e ? t : e
          );
        },
        Rw = function (t) {
          return (t = isFinite(t) ? t % 360 : 0) > 0 ? t : t + 360;
        },
        Iw = function (t) {
          return {
            r: Ow(t.r, 0, 255),
            g: Ow(t.g, 0, 255),
            b: Ow(t.b, 0, 255),
            a: Ow(t.a),
          };
        },
        kw = function (t) {
          return { r: Bw(t.r), g: Bw(t.g), b: Bw(t.b), a: Bw(t.a, 3) };
        },
        Fw = /^#([0-9a-f]{3,8})$/i,
        Dw = function (t) {
          var e = t.toString(16);
          return e.length < 2 ? "0" + e : e;
        },
        Nw = function (t) {
          var e = t.r,
            i = t.g,
            r = t.b,
            n = t.a,
            o = Math.max(e, i, r),
            s = o - Math.min(e, i, r),
            a = s
              ? o === e
                ? (i - r) / s
                : o === i
                ? 2 + (r - e) / s
                : 4 + (e - i) / s
              : 0;
          return {
            h: 60 * (a < 0 ? a + 6 : a),
            s: o ? (s / o) * 100 : 0,
            v: (o / 255) * 100,
            a: n,
          };
        },
        Lw = function (t) {
          var e = t.h,
            i = t.s,
            r = t.v,
            n = t.a;
          (e = (e / 360) * 6), (i /= 100), (r /= 100);
          var o = Math.floor(e),
            s = r * (1 - i),
            a = r * (1 - (e - o) * i),
            h = r * (1 - (1 - e + o) * i),
            u = o % 6;
          return {
            r: 255 * [r, a, s, s, h, r][u],
            g: 255 * [h, r, r, a, s, s][u],
            b: 255 * [s, s, h, r, r, a][u],
            a: n,
          };
        },
        Uw = function (t) {
          return {
            h: Rw(t.h),
            s: Ow(t.s, 0, 100),
            l: Ow(t.l, 0, 100),
            a: Ow(t.a),
          };
        },
        Gw = function (t) {
          return { h: Bw(t.h), s: Bw(t.s), l: Bw(t.l), a: Bw(t.a, 3) };
        },
        Vw = function (t) {
          return Lw(
            ((i = (e = t).s),
            {
              h: e.h,
              s:
                (i *= ((r = e.l) < 50 ? r : 100 - r) / 100) > 0
                  ? ((2 * i) / (r + i)) * 100
                  : 0,
              v: r + i,
              a: e.a,
            })
          );
          var e, i, r;
        },
        jw = function (t) {
          return {
            h: (e = Nw(t)).h,
            s:
              (n = ((200 - (i = e.s)) * (r = e.v)) / 100) > 0 && n < 200
                ? ((i * r) / 100 / (n <= 100 ? n : 200 - n)) * 100
                : 0,
            l: n / 2,
            a: e.a,
          };
          var e, i, r, n;
        },
        zw =
          /^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,
        Xw =
          /^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,
        Hw =
          /^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,
        Yw =
          /^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,
        Ww = {
          string: [
            [
              function (t) {
                var e = Fw.exec(t);
                return e
                  ? (t = e[1]).length <= 4
                    ? {
                        r: parseInt(t[0] + t[0], 16),
                        g: parseInt(t[1] + t[1], 16),
                        b: parseInt(t[2] + t[2], 16),
                        a:
                          4 === t.length
                            ? Bw(parseInt(t[3] + t[3], 16) / 255, 2)
                            : 1,
                      }
                    : 6 === t.length || 8 === t.length
                    ? {
                        r: parseInt(t.substr(0, 2), 16),
                        g: parseInt(t.substr(2, 2), 16),
                        b: parseInt(t.substr(4, 2), 16),
                        a:
                          8 === t.length
                            ? Bw(parseInt(t.substr(6, 2), 16) / 255, 2)
                            : 1,
                      }
                    : null
                  : null;
              },
              "hex",
            ],
            [
              function (t) {
                var e = Hw.exec(t) || Yw.exec(t);
                return e
                  ? e[2] !== e[4] || e[4] !== e[6]
                    ? null
                    : Iw({
                        r: Number(e[1]) / (e[2] ? 100 / 255 : 1),
                        g: Number(e[3]) / (e[4] ? 100 / 255 : 1),
                        b: Number(e[5]) / (e[6] ? 100 / 255 : 1),
                        a:
                          void 0 === e[7] ? 1 : Number(e[7]) / (e[8] ? 100 : 1),
                      })
                  : null;
              },
              "rgb",
            ],
            [
              function (t) {
                var e = zw.exec(t) || Xw.exec(t);
                if (!e) return null;
                var i,
                  r,
                  n = Uw({
                    h:
                      ((i = e[1]),
                      (r = e[2]),
                      void 0 === r && (r = "deg"),
                      Number(i) * (Mw[r] || 1)),
                    s: Number(e[3]),
                    l: Number(e[4]),
                    a: void 0 === e[5] ? 1 : Number(e[5]) / (e[6] ? 100 : 1),
                  });
                return Vw(n);
              },
              "hsl",
            ],
          ],
          object: [
            [
              function (t) {
                var e = t.r,
                  i = t.g,
                  r = t.b,
                  n = t.a,
                  o = void 0 === n ? 1 : n;
                return Pw(e) && Pw(i) && Pw(r)
                  ? Iw({
                      r: Number(e),
                      g: Number(i),
                      b: Number(r),
                      a: Number(o),
                    })
                  : null;
              },
              "rgb",
            ],
            [
              function (t) {
                var e = t.h,
                  i = t.s,
                  r = t.l,
                  n = t.a,
                  o = void 0 === n ? 1 : n;
                if (!Pw(e) || !Pw(i) || !Pw(r)) return null;
                var s = Uw({
                  h: Number(e),
                  s: Number(i),
                  l: Number(r),
                  a: Number(o),
                });
                return Vw(s);
              },
              "hsl",
            ],
            [
              function (t) {
                var e = t.h,
                  i = t.s,
                  r = t.v,
                  n = t.a,
                  o = void 0 === n ? 1 : n;
                if (!Pw(e) || !Pw(i) || !Pw(r)) return null;
                var s = (function (t) {
                  return {
                    h: Rw(t.h),
                    s: Ow(t.s, 0, 100),
                    v: Ow(t.v, 0, 100),
                    a: Ow(t.a),
                  };
                })({ h: Number(e), s: Number(i), v: Number(r), a: Number(o) });
                return Lw(s);
              },
              "hsv",
            ],
          ],
        },
        qw = function (t, e) {
          for (var i = 0; i < e.length; i++) {
            var r = e[i][0](t);
            if (r) return [r, e[i][1]];
          }
          return [null, void 0];
        },
        $w = function (t, e) {
          var i = jw(t);
          return { h: i.h, s: Ow(i.s + 100 * e, 0, 100), l: i.l, a: i.a };
        },
        Kw = function (t) {
          return (299 * t.r + 587 * t.g + 114 * t.b) / 1e3 / 255;
        },
        Jw = function (t, e) {
          var i = jw(t);
          return { h: i.h, s: i.s, l: Ow(i.l + 100 * e, 0, 100), a: i.a };
        },
        Zw = (function () {
          function t(t) {
            (this.parsed = (function (t) {
              return "string" == typeof t
                ? qw(t.trim(), Ww.string)
                : "object" == typeof t && null !== t
                ? qw(t, Ww.object)
                : [null, void 0];
            })(t)[0]),
              (this.rgba = this.parsed || { r: 0, g: 0, b: 0, a: 1 });
          }
          return (
            (t.prototype.isValid = function () {
              return null !== this.parsed;
            }),
            (t.prototype.brightness = function () {
              return Bw(Kw(this.rgba), 2);
            }),
            (t.prototype.isDark = function () {
              return Kw(this.rgba) < 0.5;
            }),
            (t.prototype.isLight = function () {
              return Kw(this.rgba) >= 0.5;
            }),
            (t.prototype.toHex = function () {
              return (
                (e = (t = kw(this.rgba)).r),
                (i = t.g),
                (r = t.b),
                (o = (n = t.a) < 1 ? Dw(Bw(255 * n)) : ""),
                "#" + Dw(e) + Dw(i) + Dw(r) + o
              );
              var t, e, i, r, n, o;
            }),
            (t.prototype.toRgb = function () {
              return kw(this.rgba);
            }),
            (t.prototype.toRgbString = function () {
              return (
                (e = (t = kw(this.rgba)).r),
                (i = t.g),
                (r = t.b),
                (n = t.a) < 1
                  ? "rgba(" + e + ", " + i + ", " + r + ", " + n + ")"
                  : "rgb(" + e + ", " + i + ", " + r + ")"
              );
              var t, e, i, r, n;
            }),
            (t.prototype.toHsl = function () {
              return Gw(jw(this.rgba));
            }),
            (t.prototype.toHslString = function () {
              return (
                (e = (t = Gw(jw(this.rgba))).h),
                (i = t.s),
                (r = t.l),
                (n = t.a) < 1
                  ? "hsla(" + e + ", " + i + "%, " + r + "%, " + n + ")"
                  : "hsl(" + e + ", " + i + "%, " + r + "%)"
              );
              var t, e, i, r, n;
            }),
            (t.prototype.toHsv = function () {
              return (
                (t = Nw(this.rgba)),
                { h: Bw(t.h), s: Bw(t.s), v: Bw(t.v), a: Bw(t.a, 3) }
              );
              var t;
            }),
            (t.prototype.invert = function () {
              return Qw({
                r: 255 - (t = this.rgba).r,
                g: 255 - t.g,
                b: 255 - t.b,
                a: t.a,
              });
              var t;
            }),
            (t.prototype.saturate = function (t) {
              return void 0 === t && (t = 0.1), Qw($w(this.rgba, t));
            }),
            (t.prototype.desaturate = function (t) {
              return void 0 === t && (t = 0.1), Qw($w(this.rgba, -t));
            }),
            (t.prototype.grayscale = function () {
              return Qw($w(this.rgba, -1));
            }),
            (t.prototype.lighten = function (t) {
              return void 0 === t && (t = 0.1), Qw(Jw(this.rgba, t));
            }),
            (t.prototype.darken = function (t) {
              return void 0 === t && (t = 0.1), Qw(Jw(this.rgba, -t));
            }),
            (t.prototype.rotate = function (t) {
              return void 0 === t && (t = 15), this.hue(this.hue() + t);
            }),
            (t.prototype.alpha = function (t) {
              return "number" == typeof t
                ? Qw({ r: (e = this.rgba).r, g: e.g, b: e.b, a: t })
                : Bw(this.rgba.a, 3);
              var e;
            }),
            (t.prototype.hue = function (t) {
              var e = jw(this.rgba);
              return "number" == typeof t
                ? Qw({ h: t, s: e.s, l: e.l, a: e.a })
                : Bw(e.h);
            }),
            (t.prototype.isEqual = function (t) {
              return this.toHex() === Qw(t).toHex();
            }),
            t
          );
        })(),
        Qw = function (t) {
          return t instanceof Zw ? t : new Zw(t);
        },
        tT = [];
      !(function (t) {
        t.forEach(function (t) {
          tT.indexOf(t) < 0 && (t(Zw, Ww), tT.push(t));
        });
      })([
        function (t, e) {
          var i = {
              white: "#ffffff",
              bisque: "#ffe4c4",
              blue: "#0000ff",
              cadetblue: "#5f9ea0",
              chartreuse: "#7fff00",
              chocolate: "#d2691e",
              coral: "#ff7f50",
              antiquewhite: "#faebd7",
              aqua: "#00ffff",
              azure: "#f0ffff",
              whitesmoke: "#f5f5f5",
              papayawhip: "#ffefd5",
              plum: "#dda0dd",
              blanchedalmond: "#ffebcd",
              black: "#000000",
              gold: "#ffd700",
              goldenrod: "#daa520",
              gainsboro: "#dcdcdc",
              cornsilk: "#fff8dc",
              cornflowerblue: "#6495ed",
              burlywood: "#deb887",
              aquamarine: "#7fffd4",
              beige: "#f5f5dc",
              crimson: "#dc143c",
              cyan: "#00ffff",
              darkblue: "#00008b",
              darkcyan: "#008b8b",
              darkgoldenrod: "#b8860b",
              darkkhaki: "#bdb76b",
              darkgray: "#a9a9a9",
              darkgreen: "#006400",
              darkgrey: "#a9a9a9",
              peachpuff: "#ffdab9",
              darkmagenta: "#8b008b",
              darkred: "#8b0000",
              darkorchid: "#9932cc",
              darkorange: "#ff8c00",
              darkslateblue: "#483d8b",
              gray: "#808080",
              darkslategray: "#2f4f4f",
              darkslategrey: "#2f4f4f",
              deeppink: "#ff1493",
              deepskyblue: "#00bfff",
              wheat: "#f5deb3",
              firebrick: "#b22222",
              floralwhite: "#fffaf0",
              ghostwhite: "#f8f8ff",
              darkviolet: "#9400d3",
              magenta: "#ff00ff",
              green: "#008000",
              dodgerblue: "#1e90ff",
              grey: "#808080",
              honeydew: "#f0fff0",
              hotpink: "#ff69b4",
              blueviolet: "#8a2be2",
              forestgreen: "#228b22",
              lawngreen: "#7cfc00",
              indianred: "#cd5c5c",
              indigo: "#4b0082",
              fuchsia: "#ff00ff",
              brown: "#a52a2a",
              maroon: "#800000",
              mediumblue: "#0000cd",
              lightcoral: "#f08080",
              darkturquoise: "#00ced1",
              lightcyan: "#e0ffff",
              ivory: "#fffff0",
              lightyellow: "#ffffe0",
              lightsalmon: "#ffa07a",
              lightseagreen: "#20b2aa",
              linen: "#faf0e6",
              mediumaquamarine: "#66cdaa",
              lemonchiffon: "#fffacd",
              lime: "#00ff00",
              khaki: "#f0e68c",
              mediumseagreen: "#3cb371",
              limegreen: "#32cd32",
              mediumspringgreen: "#00fa9a",
              lightskyblue: "#87cefa",
              lightblue: "#add8e6",
              midnightblue: "#191970",
              lightpink: "#ffb6c1",
              mistyrose: "#ffe4e1",
              moccasin: "#ffe4b5",
              mintcream: "#f5fffa",
              lightslategray: "#778899",
              lightslategrey: "#778899",
              navajowhite: "#ffdead",
              navy: "#000080",
              mediumvioletred: "#c71585",
              powderblue: "#b0e0e6",
              palegoldenrod: "#eee8aa",
              oldlace: "#fdf5e6",
              paleturquoise: "#afeeee",
              mediumturquoise: "#48d1cc",
              mediumorchid: "#ba55d3",
              rebeccapurple: "#663399",
              lightsteelblue: "#b0c4de",
              mediumslateblue: "#7b68ee",
              thistle: "#d8bfd8",
              tan: "#d2b48c",
              orchid: "#da70d6",
              mediumpurple: "#9370db",
              purple: "#800080",
              pink: "#ffc0cb",
              skyblue: "#87ceeb",
              springgreen: "#00ff7f",
              palegreen: "#98fb98",
              red: "#ff0000",
              yellow: "#ffff00",
              slateblue: "#6a5acd",
              lavenderblush: "#fff0f5",
              peru: "#cd853f",
              palevioletred: "#db7093",
              violet: "#ee82ee",
              teal: "#008080",
              slategray: "#708090",
              slategrey: "#708090",
              aliceblue: "#f0f8ff",
              darkseagreen: "#8fbc8f",
              darkolivegreen: "#556b2f",
              greenyellow: "#adff2f",
              seagreen: "#2e8b57",
              seashell: "#fff5ee",
              tomato: "#ff6347",
              silver: "#c0c0c0",
              sienna: "#a0522d",
              lavender: "#e6e6fa",
              lightgreen: "#90ee90",
              orange: "#ffa500",
              orangered: "#ff4500",
              steelblue: "#4682b4",
              royalblue: "#4169e1",
              turquoise: "#40e0d0",
              yellowgreen: "#9acd32",
              salmon: "#fa8072",
              saddlebrown: "#8b4513",
              sandybrown: "#f4a460",
              rosybrown: "#bc8f8f",
              darksalmon: "#e9967a",
              lightgoldenrodyellow: "#fafad2",
              snow: "#fffafa",
              lightgrey: "#d3d3d3",
              lightgray: "#d3d3d3",
              dimgray: "#696969",
              dimgrey: "#696969",
              olivedrab: "#6b8e23",
              olive: "#808000",
            },
            r = {};
          for (var n in i) r[i[n]] = n;
          var o = {};
          (t.prototype.toName = function (e) {
            if (!(this.rgba.a || this.rgba.r || this.rgba.g || this.rgba.b))
              return "transparent";
            var n,
              s,
              a = r[this.toHex()];
            if (a) return a;
            if (null == e ? void 0 : e.closest) {
              var h = this.toRgb(),
                u = 1 / 0,
                l = "black";
              if (!o.length) for (var c in i) o[c] = new t(i[c]).toRgb();
              for (var d in i) {
                var p =
                  ((n = h),
                  (s = o[d]),
                  Math.pow(n.r - s.r, 2) +
                    Math.pow(n.g - s.g, 2) +
                    Math.pow(n.b - s.b, 2));
                p < u && ((u = p), (l = d));
              }
              return l;
            }
          }),
            e.string.push([
              function (e) {
                var r = e.toLowerCase(),
                  n = "transparent" === r ? "#0000" : i[r];
                return n ? new t(n).toRgb() : null;
              },
              "name",
            ]);
        },
      ]);
      const eT = class t {
        constructor(t = 16777215) {
          (this._value = null),
            (this._components = new Float32Array(4)),
            this._components.fill(1),
            (this._int = 16777215),
            (this.value = t);
        }
        get red() {
          return this._components[0];
        }
        get green() {
          return this._components[1];
        }
        get blue() {
          return this._components[2];
        }
        get alpha() {
          return this._components[3];
        }
        setValue(t) {
          return (this.value = t), this;
        }
        set value(e) {
          if (e instanceof t)
            (this._value = this.cloneSource(e._value)),
              (this._int = e._int),
              this._components.set(e._components);
          else {
            if (null === e)
              throw new Error("Cannot set PIXI.Color#value to null");
            (null === this._value || !this.isSourceEqual(this._value, e)) &&
              (this.normalize(e), (this._value = this.cloneSource(e)));
          }
        }
        get value() {
          return this._value;
        }
        cloneSource(t) {
          return "string" == typeof t ||
            "number" == typeof t ||
            t instanceof Number ||
            null === t
            ? t
            : Array.isArray(t) || ArrayBuffer.isView(t)
            ? t.slice(0)
            : "object" == typeof t && null !== t
            ? { ...t }
            : t;
        }
        isSourceEqual(t, e) {
          const i = typeof t;
          if (i !== typeof e) return !1;
          if ("number" === i || "string" === i || t instanceof Number)
            return t === e;
          if (
            (Array.isArray(t) && Array.isArray(e)) ||
            (ArrayBuffer.isView(t) && ArrayBuffer.isView(e))
          )
            return t.length === e.length && t.every((t, i) => t === e[i]);
          if (null !== t && null !== e) {
            const i = Object.keys(t),
              r = Object.keys(e);
            return i.length === r.length && i.every((i) => t[i] === e[i]);
          }
          return t === e;
        }
        toRgba() {
          const [t, e, i, r] = this._components;
          return { r: t, g: e, b: i, a: r };
        }
        toRgb() {
          const [t, e, i] = this._components;
          return { r: t, g: e, b: i };
        }
        toRgbaString() {
          const [t, e, i] = this.toUint8RgbArray();
          return `rgba(${t},${e},${i},${this.alpha})`;
        }
        toUint8RgbArray(t) {
          const [e, i, r] = this._components;
          return (
            ((t = t ?? [])[0] = Math.round(255 * e)),
            (t[1] = Math.round(255 * i)),
            (t[2] = Math.round(255 * r)),
            t
          );
        }
        toRgbArray(t) {
          t = t ?? [];
          const [e, i, r] = this._components;
          return (t[0] = e), (t[1] = i), (t[2] = r), t;
        }
        toNumber() {
          return this._int;
        }
        toLittleEndianNumber() {
          const t = this._int;
          return (t >> 16) + (65280 & t) + ((255 & t) << 16);
        }
        multiply(e) {
          const [i, r, n, o] = t.temp.setValue(e)._components;
          return (
            (this._components[0] *= i),
            (this._components[1] *= r),
            (this._components[2] *= n),
            (this._components[3] *= o),
            this.refreshInt(),
            (this._value = null),
            this
          );
        }
        premultiply(t, e = !0) {
          return (
            e &&
              ((this._components[0] *= t),
              (this._components[1] *= t),
              (this._components[2] *= t)),
            (this._components[3] = t),
            this.refreshInt(),
            (this._value = null),
            this
          );
        }
        toPremultiplied(t, e = !0) {
          if (1 === t) return (255 << 24) + this._int;
          if (0 === t) return e ? 0 : this._int;
          let i = (this._int >> 16) & 255,
            r = (this._int >> 8) & 255,
            n = 255 & this._int;
          return (
            e &&
              ((i = (i * t + 0.5) | 0),
              (r = (r * t + 0.5) | 0),
              (n = (n * t + 0.5) | 0)),
            ((255 * t) << 24) + (i << 16) + (r << 8) + n
          );
        }
        toHex() {
          const t = this._int.toString(16);
          return `#${"000000".substring(0, 6 - t.length) + t}`;
        }
        toHexa() {
          const t = Math.round(255 * this._components[3]).toString(16);
          return this.toHex() + "00".substring(0, 2 - t.length) + t;
        }
        setAlpha(t) {
          return (this._components[3] = this._clamp(t)), this;
        }
        round(t) {
          const [e, i, r] = this._components;
          return (
            (this._components[0] = Math.round(e * t) / t),
            (this._components[1] = Math.round(i * t) / t),
            (this._components[2] = Math.round(r * t) / t),
            this.refreshInt(),
            (this._value = null),
            this
          );
        }
        toArray(t) {
          t = t ?? [];
          const [e, i, r, n] = this._components;
          return (t[0] = e), (t[1] = i), (t[2] = r), (t[3] = n), t;
        }
        normalize(e) {
          let i, r, n, o;
          if (
            ("number" == typeof e || e instanceof Number) &&
            e >= 0 &&
            e <= 16777215
          )
            (i = ((e >> 16) & 255) / 255),
              (r = ((e >> 8) & 255) / 255),
              (n = (255 & e) / 255),
              (o = 1);
          else if (
            (Array.isArray(e) || e instanceof Float32Array) &&
            e.length >= 3 &&
            e.length <= 4
          )
            (e = this._clamp(e)), ([i, r, n, o = 1] = e);
          else if (
            (e instanceof Uint8Array || e instanceof Uint8ClampedArray) &&
            e.length >= 3 &&
            e.length <= 4
          )
            (e = this._clamp(e, 0, 255)),
              ([i, r, n, o = 255] = e),
              (i /= 255),
              (r /= 255),
              (n /= 255),
              (o /= 255);
          else if ("string" == typeof e || "object" == typeof e) {
            if ("string" == typeof e) {
              const i = t.HEX_PATTERN.exec(e);
              i && (e = `#${i[2]}`);
            }
            const s = Qw(e);
            s.isValid() &&
              (({ r: i, g: r, b: n, a: o } = s.rgba),
              (i /= 255),
              (r /= 255),
              (n /= 255));
          }
          if (void 0 === i) throw new Error(`Unable to convert color ${e}`);
          (this._components[0] = i),
            (this._components[1] = r),
            (this._components[2] = n),
            (this._components[3] = o),
            this.refreshInt();
        }
        refreshInt() {
          this._clamp(this._components);
          const [t, e, i] = this._components;
          this._int = ((255 * t) << 16) + ((255 * e) << 8) + ((255 * i) | 0);
        }
        _clamp(t, e = 0, i = 1) {
          return "number" == typeof t
            ? Math.min(Math.max(t, e), i)
            : (t.forEach((r, n) => {
                t[n] = Math.min(Math.max(r, e), i);
              }),
              t);
        }
      };
      (eT.shared = new eT()),
        (eT.temp = new eT()),
        (eT.HEX_PATTERN = /^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i);
      let iT = eT;
      const rT = (function () {
        const t = [],
          e = [];
        for (let i = 0; i < 32; i++) (t[i] = i), (e[i] = i);
        (t[jx.NORMAL_NPM] = jx.NORMAL),
          (t[jx.ADD_NPM] = jx.ADD),
          (t[jx.SCREEN_NPM] = jx.SCREEN),
          (e[jx.NORMAL] = jx.NORMAL_NPM),
          (e[jx.ADD] = jx.ADD_NPM),
          (e[jx.SCREEN] = jx.SCREEN_NPM);
        const i = [];
        return i.push(e), i.push(t), i;
      })();
      function nT(t) {
        if (4 === t.BYTES_PER_ELEMENT)
          return t instanceof Float32Array
            ? "Float32Array"
            : t instanceof Uint32Array
            ? "Uint32Array"
            : "Int32Array";
        if (2 === t.BYTES_PER_ELEMENT) {
          if (t instanceof Uint16Array) return "Uint16Array";
        } else if (1 === t.BYTES_PER_ELEMENT && t instanceof Uint8Array)
          return "Uint8Array";
        return null;
      }
      function oT(t) {
        return (
          (t += 0 === t ? 1 : 0),
          --t,
          (t |= t >>> 1),
          (t |= t >>> 2),
          (t |= t >>> 4),
          (t |= t >>> 8),
          1 + (t |= t >>> 16)
        );
      }
      function sT(t) {
        return !(t & (t - 1) || !t);
      }
      function aT(t) {
        let e = (t > 65535 ? 1 : 0) << 4,
          i = ((t >>>= e) > 255 ? 1 : 0) << 3;
        return (
          (e |= i),
          (i = ((t >>>= i) > 15 ? 1 : 0) << 2),
          (e |= i),
          (i = ((t >>>= i) > 3 ? 1 : 0) << 1),
          (e |= i),
          e | ((t >>>= i) >> 1)
        );
      }
      Float32Array, Uint32Array, Int32Array, Uint8Array;
      let hT = 0;
      function uT() {
        return ++hT;
      }
      const lT = class {
        constructor(t, e, i, r) {
          (this.left = t), (this.top = e), (this.right = i), (this.bottom = r);
        }
        get width() {
          return this.right - this.left;
        }
        get height() {
          return this.bottom - this.top;
        }
        isEmpty() {
          return this.left === this.right || this.top === this.bottom;
        }
      };
      lT.EMPTY = new lT(0, 0, 0, 0);
      const cT = {},
        dT = Object.create(null),
        pT = Object.create(null);
      function _T(t, e = 1) {
        const i = ow.RETINA_PREFIX?.exec(t);
        return i ? parseFloat(i[1]) : e;
      }
      var fT = ((t) => (
        (t.Renderer = "renderer"),
        (t.Application = "application"),
        (t.RendererSystem = "renderer-webgl-system"),
        (t.RendererPlugin = "renderer-webgl-plugin"),
        (t.CanvasRendererSystem = "renderer-canvas-system"),
        (t.CanvasRendererPlugin = "renderer-canvas-plugin"),
        (t.Asset = "asset"),
        (t.LoadParser = "load-parser"),
        (t.ResolveParser = "resolve-parser"),
        (t.CacheParser = "cache-parser"),
        (t.DetectionParser = "detection-parser"),
        t
      ))(fT || {});
      const mT = (t) => {
          if ("function" == typeof t || ("object" == typeof t && t.extension)) {
            if (!t.extension)
              throw new Error("Extension class must have an extension object");
            t = {
              ...("object" != typeof t.extension
                ? { type: t.extension }
                : t.extension),
              ref: t,
            };
          }
          if ("object" != typeof t) throw new Error("Invalid extension type");
          return (
            "string" == typeof (t = { ...t }).type && (t.type = [t.type]), t
          );
        },
        yT = (t, e) => mT(t).priority ?? e,
        gT = {
          _addHandlers: {},
          _removeHandlers: {},
          _queue: {},
          remove(...t) {
            return (
              t.map(mT).forEach((t) => {
                t.type.forEach((e) => this._removeHandlers[e]?.(t));
              }),
              this
            );
          },
          add(...t) {
            return (
              t.map(mT).forEach((t) => {
                t.type.forEach((e) => {
                  const i = this._addHandlers,
                    r = this._queue;
                  i[e] ? i[e]?.(t) : ((r[e] = r[e] || []), r[e]?.push(t));
                });
              }),
              this
            );
          },
          handle(t, e, i) {
            const r = this._addHandlers,
              n = this._removeHandlers;
            if (r[t] || n[t])
              throw new Error(`Extension type ${t} already has a handler`);
            (r[t] = e), (n[t] = i);
            const o = this._queue;
            return o[t] && (o[t]?.forEach((t) => e(t)), delete o[t]), this;
          },
          handleByMap(t, e) {
            return this.handle(
              t,
              (t) => {
                t.name && (e[t.name] = t.ref);
              },
              (t) => {
                t.name && delete e[t.name];
              }
            );
          },
          handleByList(t, e, i = -1) {
            return this.handle(
              t,
              (t) => {
                e.includes(t.ref) ||
                  (e.push(t.ref), e.sort((t, e) => yT(e, i) - yT(t, i)));
              },
              (t) => {
                const i = e.indexOf(t.ref);
                -1 !== i && e.splice(i, 1);
              }
            );
          },
        };
      class vT {
        constructor(t) {
          "number" == typeof t
            ? (this.rawBinaryData = new ArrayBuffer(t))
            : t instanceof Uint8Array
            ? (this.rawBinaryData = t.buffer)
            : (this.rawBinaryData = t),
            (this.uint32View = new Uint32Array(this.rawBinaryData)),
            (this.float32View = new Float32Array(this.rawBinaryData));
        }
        get int8View() {
          return (
            this._int8View ||
              (this._int8View = new Int8Array(this.rawBinaryData)),
            this._int8View
          );
        }
        get uint8View() {
          return (
            this._uint8View ||
              (this._uint8View = new Uint8Array(this.rawBinaryData)),
            this._uint8View
          );
        }
        get int16View() {
          return (
            this._int16View ||
              (this._int16View = new Int16Array(this.rawBinaryData)),
            this._int16View
          );
        }
        get uint16View() {
          return (
            this._uint16View ||
              (this._uint16View = new Uint16Array(this.rawBinaryData)),
            this._uint16View
          );
        }
        get int32View() {
          return (
            this._int32View ||
              (this._int32View = new Int32Array(this.rawBinaryData)),
            this._int32View
          );
        }
        view(t) {
          return this[`${t}View`];
        }
        destroy() {
          (this.rawBinaryData = null),
            (this._int8View = null),
            (this._uint8View = null),
            (this._int16View = null),
            (this._uint16View = null),
            (this._int32View = null),
            (this.uint32View = null),
            (this.float32View = null);
        }
        static sizeOf(t) {
          switch (t) {
            case "int8":
            case "uint8":
              return 1;
            case "int16":
            case "uint16":
              return 2;
            case "int32":
            case "uint32":
            case "float32":
              return 4;
            default:
              throw new Error(`${t} isn't a valid view type`);
          }
        }
      }
      const bT = [
        "precision mediump float;",
        "void main(void){",
        "float test = 0.1;",
        "%forloop%",
        "gl_FragColor = vec4(0.0);",
        "}",
      ].join("\n");
      function xT(t) {
        let e = "";
        for (let i = 0; i < t; ++i)
          i > 0 && (e += "\nelse "), i < t - 1 && (e += `if(test == ${i}.0){}`);
        return e;
      }
      class wT {
        constructor() {
          (this.data = 0),
            (this.blendMode = jx.NORMAL),
            (this.polygonOffset = 0),
            (this.blend = !0),
            (this.depthMask = !0);
        }
        get blend() {
          return !!(1 & this.data);
        }
        set blend(t) {
          !!(1 & this.data) !== t && (this.data ^= 1);
        }
        get offsets() {
          return !!(2 & this.data);
        }
        set offsets(t) {
          !!(2 & this.data) !== t && (this.data ^= 2);
        }
        get culling() {
          return !!(4 & this.data);
        }
        set culling(t) {
          !!(4 & this.data) !== t && (this.data ^= 4);
        }
        get depthTest() {
          return !!(8 & this.data);
        }
        set depthTest(t) {
          !!(8 & this.data) !== t && (this.data ^= 8);
        }
        get depthMask() {
          return !!(32 & this.data);
        }
        set depthMask(t) {
          !!(32 & this.data) !== t && (this.data ^= 32);
        }
        get clockwiseFrontFace() {
          return !!(16 & this.data);
        }
        set clockwiseFrontFace(t) {
          !!(16 & this.data) !== t && (this.data ^= 16);
        }
        get blendMode() {
          return this._blendMode;
        }
        set blendMode(t) {
          (this.blend = t !== jx.NONE), (this._blendMode = t);
        }
        get polygonOffset() {
          return this._polygonOffset;
        }
        set polygonOffset(t) {
          (this.offsets = !!t), (this._polygonOffset = t);
        }
        static for2d() {
          const t = new wT();
          return (t.depthTest = !1), (t.blend = !0), t;
        }
      }
      wT.prototype.toString = function () {
        return `[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`;
      };
      const TT = [];
      function AT(t, e) {
        if (!t) return null;
        let i = "";
        if ("string" == typeof t) {
          const e = /\.(\w{3,4})(?:$|\?|#)/i.exec(t);
          e && (i = e[1].toLowerCase());
        }
        for (let r = TT.length - 1; r >= 0; --r) {
          const n = TT[r];
          if (n.test && n.test(t, i)) return new n(t, e);
        }
        throw new Error("Unrecognized source type to auto-detect Resource");
      }
      class ST {
        constructor(t) {
          (this.items = []), (this._name = t), (this._aliasCount = 0);
        }
        emit(t, e, i, r, n, o, s, a) {
          if (arguments.length > 8) throw new Error("max arguments reached");
          const { name: h, items: u } = this;
          this._aliasCount++;
          for (let l = 0, c = u.length; l < c; l++)
            u[l][h](t, e, i, r, n, o, s, a);
          return u === this.items && this._aliasCount--, this;
        }
        ensureNonAliasedItems() {
          this._aliasCount > 0 &&
            this.items.length > 1 &&
            ((this._aliasCount = 0), (this.items = this.items.slice(0)));
        }
        add(t) {
          return (
            t[this._name] &&
              (this.ensureNonAliasedItems(),
              this.remove(t),
              this.items.push(t)),
            this
          );
        }
        remove(t) {
          const e = this.items.indexOf(t);
          return (
            -1 !== e && (this.ensureNonAliasedItems(), this.items.splice(e, 1)),
            this
          );
        }
        contains(t) {
          return this.items.includes(t);
        }
        removeAll() {
          return this.ensureNonAliasedItems(), (this.items.length = 0), this;
        }
        destroy() {
          this.removeAll(), (this.items.length = 0), (this._name = "");
        }
        get empty() {
          return 0 === this.items.length;
        }
        get name() {
          return this._name;
        }
      }
      Object.defineProperties(ST.prototype, {
        dispatch: { value: ST.prototype.emit },
        run: { value: ST.prototype.emit },
      });
      class ET {
        constructor(t = 0, e = 0) {
          (this._width = t),
            (this._height = e),
            (this.destroyed = !1),
            (this.internal = !1),
            (this.onResize = new ST("setRealSize")),
            (this.onUpdate = new ST("update")),
            (this.onError = new ST("onError"));
        }
        bind(t) {
          this.onResize.add(t),
            this.onUpdate.add(t),
            this.onError.add(t),
            (this._width || this._height) &&
              this.onResize.emit(this._width, this._height);
        }
        unbind(t) {
          this.onResize.remove(t),
            this.onUpdate.remove(t),
            this.onError.remove(t);
        }
        resize(t, e) {
          (t !== this._width || e !== this._height) &&
            ((this._width = t), (this._height = e), this.onResize.emit(t, e));
        }
        get valid() {
          return !!this._width && !!this._height;
        }
        update() {
          this.destroyed || this.onUpdate.emit();
        }
        load() {
          return Promise.resolve(this);
        }
        get width() {
          return this._width;
        }
        get height() {
          return this._height;
        }
        style(t, e, i) {
          return !1;
        }
        dispose() {}
        destroy() {
          this.destroyed ||
            ((this.destroyed = !0),
            this.dispose(),
            this.onError.removeAll(),
            (this.onError = null),
            this.onResize.removeAll(),
            (this.onResize = null),
            this.onUpdate.removeAll(),
            (this.onUpdate = null));
        }
        static test(t, e) {
          return !1;
        }
      }
      class CT extends ET {
        constructor(t, e) {
          const { width: i, height: r } = e || {};
          if (!i || !r)
            throw new Error("BufferResource width or height invalid");
          super(i, r),
            (this.data = t),
            (this.unpackAlignment = e.unpackAlignment ?? 4);
        }
        upload(t, e, i) {
          const r = t.gl;
          r.pixelStorei(r.UNPACK_ALIGNMENT, this.unpackAlignment),
            r.pixelStorei(
              r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
              e.alphaMode === Jx.UNPACK
            );
          const n = e.realWidth,
            o = e.realHeight;
          return (
            i.width === n && i.height === o
              ? r.texSubImage2D(
                  e.target,
                  0,
                  0,
                  0,
                  n,
                  o,
                  e.format,
                  i.type,
                  this.data
                )
              : ((i.width = n),
                (i.height = o),
                r.texImage2D(
                  e.target,
                  0,
                  i.internalFormat,
                  n,
                  o,
                  0,
                  e.format,
                  i.type,
                  this.data
                )),
            !0
          );
        }
        dispose() {
          this.data = null;
        }
        static test(t) {
          return (
            null === t ||
            t instanceof Int8Array ||
            t instanceof Uint8Array ||
            t instanceof Uint8ClampedArray ||
            t instanceof Int16Array ||
            t instanceof Uint16Array ||
            t instanceof Int32Array ||
            t instanceof Uint32Array ||
            t instanceof Float32Array
          );
        }
      }
      const MT = { scaleMode: qx.NEAREST, alphaMode: Jx.NPM },
        PT = class t extends Aw {
          constructor(e = null, i = null) {
            super(), (i = Object.assign({}, t.defaultOptions, i));
            const {
              alphaMode: r,
              mipmap: n,
              anisotropicLevel: o,
              scaleMode: s,
              width: a,
              height: h,
              wrapMode: u,
              format: l,
              type: c,
              target: d,
              resolution: p,
              resourceOptions: _,
            } = i;
            e && !(e instanceof ET) && ((e = AT(e, _)).internal = !0),
              (this.resolution = p || ow.RESOLUTION),
              (this.width =
                Math.round((a || 0) * this.resolution) / this.resolution),
              (this.height =
                Math.round((h || 0) * this.resolution) / this.resolution),
              (this._mipmap = n),
              (this.anisotropicLevel = o),
              (this._wrapMode = u),
              (this._scaleMode = s),
              (this.format = l),
              (this.type = c),
              (this.target = d),
              (this.alphaMode = r),
              (this.uid = uT()),
              (this.touched = 0),
              (this.isPowerOfTwo = !1),
              this._refreshPOT(),
              (this._glTextures = {}),
              (this.dirtyId = 0),
              (this.dirtyStyleId = 0),
              (this.cacheId = null),
              (this.valid = a > 0 && h > 0),
              (this.textureCacheIds = []),
              (this.destroyed = !1),
              (this.resource = null),
              (this._batchEnabled = 0),
              (this._batchLocation = 0),
              (this.parentTextureArray = null),
              this.setResource(e);
          }
          get realWidth() {
            return Math.round(this.width * this.resolution);
          }
          get realHeight() {
            return Math.round(this.height * this.resolution);
          }
          get mipmap() {
            return this._mipmap;
          }
          set mipmap(t) {
            this._mipmap !== t && ((this._mipmap = t), this.dirtyStyleId++);
          }
          get scaleMode() {
            return this._scaleMode;
          }
          set scaleMode(t) {
            this._scaleMode !== t &&
              ((this._scaleMode = t), this.dirtyStyleId++);
          }
          get wrapMode() {
            return this._wrapMode;
          }
          set wrapMode(t) {
            this._wrapMode !== t && ((this._wrapMode = t), this.dirtyStyleId++);
          }
          setStyle(t, e) {
            let i;
            return (
              void 0 !== t &&
                t !== this.scaleMode &&
                ((this.scaleMode = t), (i = !0)),
              void 0 !== e &&
                e !== this.mipmap &&
                ((this.mipmap = e), (i = !0)),
              i && this.dirtyStyleId++,
              this
            );
          }
          setSize(t, e, i) {
            return (
              (i = i || this.resolution), this.setRealSize(t * i, e * i, i)
            );
          }
          setRealSize(t, e, i) {
            return (
              (this.resolution = i || this.resolution),
              (this.width = Math.round(t) / this.resolution),
              (this.height = Math.round(e) / this.resolution),
              this._refreshPOT(),
              this.update(),
              this
            );
          }
          _refreshPOT() {
            this.isPowerOfTwo = sT(this.realWidth) && sT(this.realHeight);
          }
          setResolution(t) {
            const e = this.resolution;
            return (
              e === t ||
                ((this.resolution = t),
                this.valid &&
                  ((this.width = Math.round(this.width * e) / t),
                  (this.height = Math.round(this.height * e) / t),
                  this.emit("update", this)),
                this._refreshPOT()),
              this
            );
          }
          setResource(t) {
            if (this.resource === t) return this;
            if (this.resource) throw new Error("Resource can be set only once");
            return t.bind(this), (this.resource = t), this;
          }
          update() {
            this.valid
              ? (this.dirtyId++, this.dirtyStyleId++, this.emit("update", this))
              : this.width > 0 &&
                this.height > 0 &&
                ((this.valid = !0),
                this.emit("loaded", this),
                this.emit("update", this));
          }
          onError(t) {
            this.emit("error", this, t);
          }
          destroy() {
            this.resource &&
              (this.resource.unbind(this),
              this.resource.internal && this.resource.destroy(),
              (this.resource = null)),
              this.cacheId &&
                (delete pT[this.cacheId],
                delete dT[this.cacheId],
                (this.cacheId = null)),
              (this.valid = !1),
              this.dispose(),
              t.removeFromCache(this),
              (this.textureCacheIds = null),
              (this.destroyed = !0),
              this.emit("destroyed", this),
              this.removeAllListeners();
          }
          dispose() {
            this.emit("dispose", this);
          }
          castToBaseTexture() {
            return this;
          }
          static from(e, i, r = ow.STRICT_TEXTURE_CACHE) {
            const n = "string" == typeof e;
            let o = null;
            if (n) o = e;
            else {
              if (!e._pixiId) {
                const t = i?.pixiIdPrefix || "pixiid";
                e._pixiId = `${t}_${uT()}`;
              }
              o = e._pixiId;
            }
            let s = pT[o];
            if (n && r && !s)
              throw new Error(
                `The cacheId "${o}" does not exist in BaseTextureCache.`
              );
            return (
              s || ((s = new t(e, i)), (s.cacheId = o), t.addToCache(s, o)), s
            );
          }
          static fromBuffer(e, i, r, n) {
            e = e || new Float32Array(i * r * 4);
            const o = new CT(e, { width: i, height: r, ...n?.resourceOptions });
            let s, a;
            return (
              e instanceof Float32Array
                ? ((s = Xx.RGBA), (a = Yx.FLOAT))
                : e instanceof Int32Array
                ? ((s = Xx.RGBA_INTEGER), (a = Yx.INT))
                : e instanceof Uint32Array
                ? ((s = Xx.RGBA_INTEGER), (a = Yx.UNSIGNED_INT))
                : e instanceof Int16Array
                ? ((s = Xx.RGBA_INTEGER), (a = Yx.SHORT))
                : e instanceof Uint16Array
                ? ((s = Xx.RGBA_INTEGER), (a = Yx.UNSIGNED_SHORT))
                : e instanceof Int8Array
                ? ((s = Xx.RGBA), (a = Yx.BYTE))
                : ((s = Xx.RGBA), (a = Yx.UNSIGNED_BYTE)),
              (o.internal = !0),
              new t(o, Object.assign({}, MT, { type: a, format: s }, n))
            );
          }
          static addToCache(t, e) {
            e &&
              (t.textureCacheIds.includes(e) || t.textureCacheIds.push(e),
              pT[e] &&
                pT[e] !== t &&
                console.warn(
                  `BaseTexture added to the cache with an id [${e}] that already had an entry`
                ),
              (pT[e] = t));
          }
          static removeFromCache(t) {
            if ("string" == typeof t) {
              const e = pT[t];
              if (e) {
                const i = e.textureCacheIds.indexOf(t);
                return (
                  i > -1 && e.textureCacheIds.splice(i, 1), delete pT[t], e
                );
              }
            } else if (t?.textureCacheIds) {
              for (let e = 0; e < t.textureCacheIds.length; ++e)
                delete pT[t.textureCacheIds[e]];
              return (t.textureCacheIds.length = 0), t;
            }
            return null;
          }
        };
      (PT.defaultOptions = {
        mipmap: Kx.POW2,
        anisotropicLevel: 0,
        scaleMode: qx.LINEAR,
        wrapMode: $x.CLAMP,
        alphaMode: Jx.UNPACK,
        target: Hx.TEXTURE_2D,
        format: Xx.RGBA,
        type: Yx.UNSIGNED_BYTE,
      }),
        (PT._globalBatch = 0);
      let BT = PT;
      class OT {
        constructor() {
          (this.texArray = null),
            (this.blend = 0),
            (this.type = zx.TRIANGLES),
            (this.start = 0),
            (this.size = 0),
            (this.data = null);
        }
      }
      let RT = 0;
      class IT {
        constructor(t, e = !0, i = !1) {
          (this.data = t || new Float32Array(1)),
            (this._glBuffers = {}),
            (this._updateID = 0),
            (this.index = i),
            (this.static = e),
            (this.id = RT++),
            (this.disposeRunner = new ST("disposeBuffer"));
        }
        update(t) {
          t instanceof Array && (t = new Float32Array(t)),
            (this.data = t || this.data),
            this._updateID++;
        }
        dispose() {
          this.disposeRunner.emit(this, !1);
        }
        destroy() {
          this.dispose(), (this.data = null);
        }
        set index(t) {
          this.type = t ? rw.ELEMENT_ARRAY_BUFFER : rw.ARRAY_BUFFER;
        }
        get index() {
          return this.type === rw.ELEMENT_ARRAY_BUFFER;
        }
        static from(t) {
          return t instanceof Array && (t = new Float32Array(t)), new IT(t);
        }
      }
      class kT {
        constructor(t, e = 0, i = !1, r = Yx.FLOAT, n, o, s, a = 1) {
          (this.buffer = t),
            (this.size = e),
            (this.normalized = i),
            (this.type = r),
            (this.stride = n),
            (this.start = o),
            (this.instance = s),
            (this.divisor = a);
        }
        destroy() {
          this.buffer = null;
        }
        static from(t, e, i, r, n) {
          return new kT(t, e, i, r, n);
        }
      }
      const FT = { Float32Array, Uint32Array, Int32Array, Uint8Array },
        DT = { 5126: 4, 5123: 2, 5121: 1 };
      let NT = 0;
      const LT = {
        Float32Array,
        Uint32Array,
        Int32Array,
        Uint8Array,
        Uint16Array,
      };
      class UT {
        constructor(t = [], e = {}) {
          (this.buffers = t),
            (this.indexBuffer = null),
            (this.attributes = e),
            (this.glVertexArrayObjects = {}),
            (this.id = NT++),
            (this.instanced = !1),
            (this.instanceCount = 1),
            (this.disposeRunner = new ST("disposeGeometry")),
            (this.refCount = 0);
        }
        addAttribute(t, e, i = 0, r = !1, n, o, s, a = !1) {
          if (!e)
            throw new Error(
              "You must pass a buffer when creating an attribute"
            );
          e instanceof IT ||
            (e instanceof Array && (e = new Float32Array(e)), (e = new IT(e)));
          const h = t.split("|");
          if (h.length > 1) {
            for (let t = 0; t < h.length; t++)
              this.addAttribute(h[t], e, i, r, n);
            return this;
          }
          let u = this.buffers.indexOf(e);
          return (
            -1 === u && (this.buffers.push(e), (u = this.buffers.length - 1)),
            (this.attributes[t] = new kT(u, i, r, n, o, s, a)),
            (this.instanced = this.instanced || a),
            this
          );
        }
        getAttribute(t) {
          return this.attributes[t];
        }
        getBuffer(t) {
          return this.buffers[this.getAttribute(t).buffer];
        }
        addIndex(t) {
          return (
            t instanceof IT ||
              (t instanceof Array && (t = new Uint16Array(t)), (t = new IT(t))),
            (t.type = rw.ELEMENT_ARRAY_BUFFER),
            (this.indexBuffer = t),
            this.buffers.includes(t) || this.buffers.push(t),
            this
          );
        }
        getIndex() {
          return this.indexBuffer;
        }
        interleave() {
          if (
            1 === this.buffers.length ||
            (2 === this.buffers.length && this.indexBuffer)
          )
            return this;
          const t = [],
            e = [],
            i = new IT();
          let r;
          for (r in this.attributes) {
            const i = this.attributes[r],
              n = this.buffers[i.buffer];
            t.push(n.data), e.push((i.size * DT[i.type]) / 4), (i.buffer = 0);
          }
          for (
            i.data = (function (t, e) {
              let i = 0,
                r = 0;
              const n = {};
              for (let n = 0; n < t.length; n++)
                (r += e[n]), (i += t[n].length);
              const o = new ArrayBuffer(4 * i);
              let s = null,
                a = 0;
              for (let i = 0; i < t.length; i++) {
                const h = e[i],
                  u = t[i],
                  l = nT(u);
                n[l] || (n[l] = new FT[l](o)), (s = n[l]);
                for (let t = 0; t < u.length; t++)
                  s[((t / h) | 0) * r + a + (t % h)] = u[t];
                a += h;
              }
              return new Float32Array(o);
            })(t, e),
              r = 0;
            r < this.buffers.length;
            r++
          )
            this.buffers[r] !== this.indexBuffer && this.buffers[r].destroy();
          return (
            (this.buffers = [i]),
            this.indexBuffer && this.buffers.push(this.indexBuffer),
            this
          );
        }
        getSize() {
          for (const t in this.attributes) {
            const e = this.attributes[t];
            return (
              this.buffers[e.buffer].data.length / (e.stride / 4 || e.size)
            );
          }
          return 0;
        }
        dispose() {
          this.disposeRunner.emit(this, !1);
        }
        destroy() {
          this.dispose(),
            (this.buffers = null),
            (this.indexBuffer = null),
            (this.attributes = null);
        }
        clone() {
          const t = new UT();
          for (let e = 0; e < this.buffers.length; e++)
            t.buffers[e] = new IT(this.buffers[e].data.slice(0));
          for (const e in this.attributes) {
            const i = this.attributes[e];
            t.attributes[e] = new kT(
              i.buffer,
              i.size,
              i.normalized,
              i.type,
              i.stride,
              i.start,
              i.instance
            );
          }
          return (
            this.indexBuffer &&
              ((t.indexBuffer =
                t.buffers[this.buffers.indexOf(this.indexBuffer)]),
              (t.indexBuffer.type = rw.ELEMENT_ARRAY_BUFFER)),
            t
          );
        }
        static merge(t) {
          const e = new UT(),
            i = [],
            r = [],
            n = [];
          let o;
          for (let e = 0; e < t.length; e++) {
            o = t[e];
            for (let t = 0; t < o.buffers.length; t++)
              (r[t] = r[t] || 0),
                (r[t] += o.buffers[t].data.length),
                (n[t] = 0);
          }
          for (let t = 0; t < o.buffers.length; t++)
            (i[t] = new LT[nT(o.buffers[t].data)](r[t])),
              (e.buffers[t] = new IT(i[t]));
          for (let e = 0; e < t.length; e++) {
            o = t[e];
            for (let t = 0; t < o.buffers.length; t++)
              i[t].set(o.buffers[t].data, n[t]),
                (n[t] += o.buffers[t].data.length);
          }
          if (((e.attributes = o.attributes), o.indexBuffer)) {
            (e.indexBuffer = e.buffers[o.buffers.indexOf(o.indexBuffer)]),
              (e.indexBuffer.type = rw.ELEMENT_ARRAY_BUFFER);
            let i = 0,
              r = 0,
              n = 0,
              s = 0;
            for (let t = 0; t < o.buffers.length; t++)
              if (o.buffers[t] !== o.indexBuffer) {
                s = t;
                break;
              }
            for (const t in o.attributes) {
              const e = o.attributes[t];
              (0 | e.buffer) === s && (r += (e.size * DT[e.type]) / 4);
            }
            for (let o = 0; o < t.length; o++) {
              const a = t[o].indexBuffer.data;
              for (let t = 0; t < a.length; t++) e.indexBuffer.data[t + n] += i;
              (i += t[o].buffers[s].data.length / r), (n += a.length);
            }
          }
          return e;
        }
      }
      class GT extends UT {
        constructor(t = !1) {
          super(),
            (this._buffer = new IT(null, t, !1)),
            (this._indexBuffer = new IT(null, t, !0)),
            this.addAttribute("aVertexPosition", this._buffer, 2, !1, Yx.FLOAT)
              .addAttribute("aTextureCoord", this._buffer, 2, !1, Yx.FLOAT)
              .addAttribute("aColor", this._buffer, 4, !0, Yx.UNSIGNED_BYTE)
              .addAttribute("aTextureId", this._buffer, 1, !0, Yx.FLOAT)
              .addIndex(this._indexBuffer);
        }
      }
      const VT = 2 * Math.PI;
      Math.PI, Math.PI;
      var jT = ((t) => (
        (t[(t.POLY = 0)] = "POLY"),
        (t[(t.RECT = 1)] = "RECT"),
        (t[(t.CIRC = 2)] = "CIRC"),
        (t[(t.ELIP = 3)] = "ELIP"),
        (t[(t.RREC = 4)] = "RREC"),
        t
      ))(jT || {});
      class zT {
        constructor(t = 0, e = 0) {
          (this.x = 0), (this.y = 0), (this.x = t), (this.y = e);
        }
        clone() {
          return new zT(this.x, this.y);
        }
        copyFrom(t) {
          return this.set(t.x, t.y), this;
        }
        copyTo(t) {
          return t.set(this.x, this.y), t;
        }
        equals(t) {
          return t.x === this.x && t.y === this.y;
        }
        set(t = 0, e = t) {
          return (this.x = t), (this.y = e), this;
        }
      }
      zT.prototype.toString = function () {
        return `[@pixi/math:Point x=${this.x} y=${this.y}]`;
      };
      const XT = [new zT(), new zT(), new zT(), new zT()];
      class HT {
        constructor(t = 0, e = 0, i = 0, r = 0) {
          (this.x = Number(t)),
            (this.y = Number(e)),
            (this.width = Number(i)),
            (this.height = Number(r)),
            (this.type = jT.RECT);
        }
        get left() {
          return this.x;
        }
        get right() {
          return this.x + this.width;
        }
        get top() {
          return this.y;
        }
        get bottom() {
          return this.y + this.height;
        }
        static get EMPTY() {
          return new HT(0, 0, 0, 0);
        }
        clone() {
          return new HT(this.x, this.y, this.width, this.height);
        }
        copyFrom(t) {
          return (
            (this.x = t.x),
            (this.y = t.y),
            (this.width = t.width),
            (this.height = t.height),
            this
          );
        }
        copyTo(t) {
          return (
            (t.x = this.x),
            (t.y = this.y),
            (t.width = this.width),
            (t.height = this.height),
            t
          );
        }
        contains(t, e) {
          return (
            !(this.width <= 0 || this.height <= 0) &&
            t >= this.x &&
            t < this.x + this.width &&
            e >= this.y &&
            e < this.y + this.height
          );
        }
        intersects(t, e) {
          if (!e) {
            const e = this.x < t.x ? t.x : this.x;
            if ((this.right > t.right ? t.right : this.right) <= e) return !1;
            const i = this.y < t.y ? t.y : this.y;
            return (this.bottom > t.bottom ? t.bottom : this.bottom) > i;
          }
          const i = this.left,
            r = this.right,
            n = this.top,
            o = this.bottom;
          if (r <= i || o <= n) return !1;
          const s = XT[0].set(t.left, t.top),
            a = XT[1].set(t.left, t.bottom),
            h = XT[2].set(t.right, t.top),
            u = XT[3].set(t.right, t.bottom);
          if (h.x <= s.x || a.y <= s.y) return !1;
          const l = Math.sign(e.a * e.d - e.b * e.c);
          if (
            0 === l ||
            (e.apply(s, s),
            e.apply(a, a),
            e.apply(h, h),
            e.apply(u, u),
            Math.max(s.x, a.x, h.x, u.x) <= i ||
              Math.min(s.x, a.x, h.x, u.x) >= r ||
              Math.max(s.y, a.y, h.y, u.y) <= n ||
              Math.min(s.y, a.y, h.y, u.y) >= o)
          )
            return !1;
          const c = l * (a.y - s.y),
            d = l * (s.x - a.x),
            p = c * i + d * n,
            _ = c * r + d * n,
            f = c * i + d * o,
            m = c * r + d * o;
          if (
            Math.max(p, _, f, m) <= c * s.x + d * s.y ||
            Math.min(p, _, f, m) >= c * u.x + d * u.y
          )
            return !1;
          const y = l * (s.y - h.y),
            g = l * (h.x - s.x),
            v = y * i + g * n,
            b = y * r + g * n,
            x = y * i + g * o,
            w = y * r + g * o;
          return !(
            Math.max(v, b, x, w) <= y * s.x + g * s.y ||
            Math.min(v, b, x, w) >= y * u.x + g * u.y
          );
        }
        pad(t = 0, e = t) {
          return (
            (this.x -= t),
            (this.y -= e),
            (this.width += 2 * t),
            (this.height += 2 * e),
            this
          );
        }
        fit(t) {
          const e = Math.max(this.x, t.x),
            i = Math.min(this.x + this.width, t.x + t.width),
            r = Math.max(this.y, t.y),
            n = Math.min(this.y + this.height, t.y + t.height);
          return (
            (this.x = e),
            (this.width = Math.max(i - e, 0)),
            (this.y = r),
            (this.height = Math.max(n - r, 0)),
            this
          );
        }
        ceil(t = 1, e = 0.001) {
          const i = Math.ceil((this.x + this.width - e) * t) / t,
            r = Math.ceil((this.y + this.height - e) * t) / t;
          return (
            (this.x = Math.floor((this.x + e) * t) / t),
            (this.y = Math.floor((this.y + e) * t) / t),
            (this.width = i - this.x),
            (this.height = r - this.y),
            this
          );
        }
        enlarge(t) {
          const e = Math.min(this.x, t.x),
            i = Math.max(this.x + this.width, t.x + t.width),
            r = Math.min(this.y, t.y),
            n = Math.max(this.y + this.height, t.y + t.height);
          return (
            (this.x = e),
            (this.width = i - e),
            (this.y = r),
            (this.height = n - r),
            this
          );
        }
      }
      HT.prototype.toString = function () {
        return `[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`;
      };
      class YT {
        constructor(t = 0, e = 0, i = 0) {
          (this.x = t), (this.y = e), (this.radius = i), (this.type = jT.CIRC);
        }
        clone() {
          return new YT(this.x, this.y, this.radius);
        }
        contains(t, e) {
          if (this.radius <= 0) return !1;
          const i = this.radius * this.radius;
          let r = this.x - t,
            n = this.y - e;
          return (r *= r), (n *= n), r + n <= i;
        }
        getBounds() {
          return new HT(
            this.x - this.radius,
            this.y - this.radius,
            2 * this.radius,
            2 * this.radius
          );
        }
      }
      YT.prototype.toString = function () {
        return `[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`;
      };
      class WT {
        constructor(t = 0, e = 0, i = 0, r = 0) {
          (this.x = t),
            (this.y = e),
            (this.width = i),
            (this.height = r),
            (this.type = jT.ELIP);
        }
        clone() {
          return new WT(this.x, this.y, this.width, this.height);
        }
        contains(t, e) {
          if (this.width <= 0 || this.height <= 0) return !1;
          let i = (t - this.x) / this.width,
            r = (e - this.y) / this.height;
          return (i *= i), (r *= r), i + r <= 1;
        }
        getBounds() {
          return new HT(
            this.x - this.width,
            this.y - this.height,
            this.width,
            this.height
          );
        }
      }
      WT.prototype.toString = function () {
        return `[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`;
      };
      class qT {
        constructor(...t) {
          let e = Array.isArray(t[0]) ? t[0] : t;
          if ("number" != typeof e[0]) {
            const t = [];
            for (let i = 0, r = e.length; i < r; i++) t.push(e[i].x, e[i].y);
            e = t;
          }
          (this.points = e), (this.type = jT.POLY), (this.closeStroke = !0);
        }
        clone() {
          const t = this.points.slice(),
            e = new qT(t);
          return (e.closeStroke = this.closeStroke), e;
        }
        contains(t, e) {
          let i = !1;
          const r = this.points.length / 2;
          for (let n = 0, o = r - 1; n < r; o = n++) {
            const r = this.points[2 * n],
              s = this.points[2 * n + 1],
              a = this.points[2 * o],
              h = this.points[2 * o + 1];
            s > e != h > e && t < ((e - s) / (h - s)) * (a - r) + r && (i = !i);
          }
          return i;
        }
      }
      qT.prototype.toString = function () {
        return `[@pixi/math:PolygoncloseStroke=${
          this.closeStroke
        }points=${this.points.reduce((t, e) => `${t}, ${e}`, "")}]`;
      };
      class $T {
        constructor(t = 0, e = 0, i = 0, r = 0, n = 20) {
          (this.x = t),
            (this.y = e),
            (this.width = i),
            (this.height = r),
            (this.radius = n),
            (this.type = jT.RREC);
        }
        clone() {
          return new $T(this.x, this.y, this.width, this.height, this.radius);
        }
        contains(t, e) {
          if (this.width <= 0 || this.height <= 0) return !1;
          if (
            t >= this.x &&
            t <= this.x + this.width &&
            e >= this.y &&
            e <= this.y + this.height
          ) {
            const i = Math.max(
              0,
              Math.min(this.radius, Math.min(this.width, this.height) / 2)
            );
            if (
              (e >= this.y + i && e <= this.y + this.height - i) ||
              (t >= this.x + i && t <= this.x + this.width - i)
            )
              return !0;
            let r = t - (this.x + i),
              n = e - (this.y + i);
            const o = i * i;
            if (
              r * r + n * n <= o ||
              ((r = t - (this.x + this.width - i)), r * r + n * n <= o) ||
              ((n = e - (this.y + this.height - i)), r * r + n * n <= o) ||
              ((r = t - (this.x + i)), r * r + n * n <= o)
            )
              return !0;
          }
          return !1;
        }
      }
      $T.prototype.toString = function () {
        return `[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`;
      };
      class KT {
        constructor(t = 1, e = 0, i = 0, r = 1, n = 0, o = 0) {
          (this.array = null),
            (this.a = t),
            (this.b = e),
            (this.c = i),
            (this.d = r),
            (this.tx = n),
            (this.ty = o);
        }
        fromArray(t) {
          (this.a = t[0]),
            (this.b = t[1]),
            (this.c = t[3]),
            (this.d = t[4]),
            (this.tx = t[2]),
            (this.ty = t[5]);
        }
        set(t, e, i, r, n, o) {
          return (
            (this.a = t),
            (this.b = e),
            (this.c = i),
            (this.d = r),
            (this.tx = n),
            (this.ty = o),
            this
          );
        }
        toArray(t, e) {
          this.array || (this.array = new Float32Array(9));
          const i = e || this.array;
          return (
            t
              ? ((i[0] = this.a),
                (i[1] = this.b),
                (i[2] = 0),
                (i[3] = this.c),
                (i[4] = this.d),
                (i[5] = 0),
                (i[6] = this.tx),
                (i[7] = this.ty),
                (i[8] = 1))
              : ((i[0] = this.a),
                (i[1] = this.c),
                (i[2] = this.tx),
                (i[3] = this.b),
                (i[4] = this.d),
                (i[5] = this.ty),
                (i[6] = 0),
                (i[7] = 0),
                (i[8] = 1)),
            i
          );
        }
        apply(t, e) {
          e = e || new zT();
          const i = t.x,
            r = t.y;
          return (
            (e.x = this.a * i + this.c * r + this.tx),
            (e.y = this.b * i + this.d * r + this.ty),
            e
          );
        }
        applyInverse(t, e) {
          e = e || new zT();
          const i = 1 / (this.a * this.d + this.c * -this.b),
            r = t.x,
            n = t.y;
          return (
            (e.x =
              this.d * i * r +
              -this.c * i * n +
              (this.ty * this.c - this.tx * this.d) * i),
            (e.y =
              this.a * i * n +
              -this.b * i * r +
              (-this.ty * this.a + this.tx * this.b) * i),
            e
          );
        }
        translate(t, e) {
          return (this.tx += t), (this.ty += e), this;
        }
        scale(t, e) {
          return (
            (this.a *= t),
            (this.d *= e),
            (this.c *= t),
            (this.b *= e),
            (this.tx *= t),
            (this.ty *= e),
            this
          );
        }
        rotate(t) {
          const e = Math.cos(t),
            i = Math.sin(t),
            r = this.a,
            n = this.c,
            o = this.tx;
          return (
            (this.a = r * e - this.b * i),
            (this.b = r * i + this.b * e),
            (this.c = n * e - this.d * i),
            (this.d = n * i + this.d * e),
            (this.tx = o * e - this.ty * i),
            (this.ty = o * i + this.ty * e),
            this
          );
        }
        append(t) {
          const e = this.a,
            i = this.b,
            r = this.c,
            n = this.d;
          return (
            (this.a = t.a * e + t.b * r),
            (this.b = t.a * i + t.b * n),
            (this.c = t.c * e + t.d * r),
            (this.d = t.c * i + t.d * n),
            (this.tx = t.tx * e + t.ty * r + this.tx),
            (this.ty = t.tx * i + t.ty * n + this.ty),
            this
          );
        }
        setTransform(t, e, i, r, n, o, s, a, h) {
          return (
            (this.a = Math.cos(s + h) * n),
            (this.b = Math.sin(s + h) * n),
            (this.c = -Math.sin(s - a) * o),
            (this.d = Math.cos(s - a) * o),
            (this.tx = t - (i * this.a + r * this.c)),
            (this.ty = e - (i * this.b + r * this.d)),
            this
          );
        }
        prepend(t) {
          const e = this.tx;
          if (1 !== t.a || 0 !== t.b || 0 !== t.c || 1 !== t.d) {
            const e = this.a,
              i = this.c;
            (this.a = e * t.a + this.b * t.c),
              (this.b = e * t.b + this.b * t.d),
              (this.c = i * t.a + this.d * t.c),
              (this.d = i * t.b + this.d * t.d);
          }
          return (
            (this.tx = e * t.a + this.ty * t.c + t.tx),
            (this.ty = e * t.b + this.ty * t.d + t.ty),
            this
          );
        }
        decompose(t) {
          const e = this.a,
            i = this.b,
            r = this.c,
            n = this.d,
            o = t.pivot,
            s = -Math.atan2(-r, n),
            a = Math.atan2(i, e),
            h = Math.abs(s + a);
          return (
            h < 1e-5 || Math.abs(VT - h) < 1e-5
              ? ((t.rotation = a), (t.skew.x = t.skew.y = 0))
              : ((t.rotation = 0), (t.skew.x = s), (t.skew.y = a)),
            (t.scale.x = Math.sqrt(e * e + i * i)),
            (t.scale.y = Math.sqrt(r * r + n * n)),
            (t.position.x = this.tx + (o.x * e + o.y * r)),
            (t.position.y = this.ty + (o.x * i + o.y * n)),
            t
          );
        }
        invert() {
          const t = this.a,
            e = this.b,
            i = this.c,
            r = this.d,
            n = this.tx,
            o = t * r - e * i;
          return (
            (this.a = r / o),
            (this.b = -e / o),
            (this.c = -i / o),
            (this.d = t / o),
            (this.tx = (i * this.ty - r * n) / o),
            (this.ty = -(t * this.ty - e * n) / o),
            this
          );
        }
        identity() {
          return (
            (this.a = 1),
            (this.b = 0),
            (this.c = 0),
            (this.d = 1),
            (this.tx = 0),
            (this.ty = 0),
            this
          );
        }
        clone() {
          const t = new KT();
          return (
            (t.a = this.a),
            (t.b = this.b),
            (t.c = this.c),
            (t.d = this.d),
            (t.tx = this.tx),
            (t.ty = this.ty),
            t
          );
        }
        copyTo(t) {
          return (
            (t.a = this.a),
            (t.b = this.b),
            (t.c = this.c),
            (t.d = this.d),
            (t.tx = this.tx),
            (t.ty = this.ty),
            t
          );
        }
        copyFrom(t) {
          return (
            (this.a = t.a),
            (this.b = t.b),
            (this.c = t.c),
            (this.d = t.d),
            (this.tx = t.tx),
            (this.ty = t.ty),
            this
          );
        }
        static get IDENTITY() {
          return new KT();
        }
        static get TEMP_MATRIX() {
          return new KT();
        }
      }
      KT.prototype.toString = function () {
        return `[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`;
      };
      const JT = [1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1, 0, 1],
        ZT = [0, 1, 1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1],
        QT = [0, -1, -1, -1, 0, 1, 1, 1, 0, 1, 1, 1, 0, -1, -1, -1],
        tA = [1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, 1, 1, 1, 0, -1],
        eA = [],
        iA = [],
        rA = Math.sign;
      !(function () {
        for (let t = 0; t < 16; t++) {
          const e = [];
          eA.push(e);
          for (let i = 0; i < 16; i++) {
            const r = rA(JT[t] * JT[i] + QT[t] * ZT[i]),
              n = rA(ZT[t] * JT[i] + tA[t] * ZT[i]),
              o = rA(JT[t] * QT[i] + QT[t] * tA[i]),
              s = rA(ZT[t] * QT[i] + tA[t] * tA[i]);
            for (let t = 0; t < 16; t++)
              if (JT[t] === r && ZT[t] === n && QT[t] === o && tA[t] === s) {
                e.push(t);
                break;
              }
          }
        }
        for (let t = 0; t < 16; t++) {
          const e = new KT();
          e.set(JT[t], ZT[t], QT[t], tA[t], 0, 0), iA.push(e);
        }
      })();
      const nA = {
        E: 0,
        SE: 1,
        S: 2,
        SW: 3,
        W: 4,
        NW: 5,
        N: 6,
        NE: 7,
        MIRROR_VERTICAL: 8,
        MAIN_DIAGONAL: 10,
        MIRROR_HORIZONTAL: 12,
        REVERSE_DIAGONAL: 14,
        uX: (t) => JT[t],
        uY: (t) => ZT[t],
        vX: (t) => QT[t],
        vY: (t) => tA[t],
        inv: (t) => (8 & t ? 15 & t : 7 & -t),
        add: (t, e) => eA[t][e],
        sub: (t, e) => eA[t][nA.inv(e)],
        rotate180: (t) => 4 ^ t,
        isVertical: (t) => 2 == (3 & t),
        byDirection: (t, e) =>
          2 * Math.abs(t) <= Math.abs(e)
            ? e >= 0
              ? nA.S
              : nA.N
            : 2 * Math.abs(e) <= Math.abs(t)
            ? t > 0
              ? nA.E
              : nA.W
            : e > 0
            ? t > 0
              ? nA.SE
              : nA.SW
            : t > 0
            ? nA.NE
            : nA.NW,
        matrixAppendRotationInv: (t, e, i = 0, r = 0) => {
          const n = iA[nA.inv(e)];
          (n.tx = i), (n.ty = r), t.append(n);
        },
      };
      class oA {
        constructor(t, e, i = 0, r = 0) {
          (this._x = i), (this._y = r), (this.cb = t), (this.scope = e);
        }
        clone(t = this.cb, e = this.scope) {
          return new oA(t, e, this._x, this._y);
        }
        set(t = 0, e = t) {
          return (
            (this._x !== t || this._y !== e) &&
              ((this._x = t), (this._y = e), this.cb.call(this.scope)),
            this
          );
        }
        copyFrom(t) {
          return (
            (this._x !== t.x || this._y !== t.y) &&
              ((this._x = t.x), (this._y = t.y), this.cb.call(this.scope)),
            this
          );
        }
        copyTo(t) {
          return t.set(this._x, this._y), t;
        }
        equals(t) {
          return t.x === this._x && t.y === this._y;
        }
        get x() {
          return this._x;
        }
        set x(t) {
          this._x !== t && ((this._x = t), this.cb.call(this.scope));
        }
        get y() {
          return this._y;
        }
        set y(t) {
          this._y !== t && ((this._y = t), this.cb.call(this.scope));
        }
      }
      oA.prototype.toString = function () {
        return `[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`;
      };
      const sA = class {
        constructor() {
          (this.worldTransform = new KT()),
            (this.localTransform = new KT()),
            (this.position = new oA(this.onChange, this, 0, 0)),
            (this.scale = new oA(this.onChange, this, 1, 1)),
            (this.pivot = new oA(this.onChange, this, 0, 0)),
            (this.skew = new oA(this.updateSkew, this, 0, 0)),
            (this._rotation = 0),
            (this._cx = 1),
            (this._sx = 0),
            (this._cy = 0),
            (this._sy = 1),
            (this._localID = 0),
            (this._currentLocalID = 0),
            (this._worldID = 0),
            (this._parentID = 0);
        }
        onChange() {
          this._localID++;
        }
        updateSkew() {
          (this._cx = Math.cos(this._rotation + this.skew.y)),
            (this._sx = Math.sin(this._rotation + this.skew.y)),
            (this._cy = -Math.sin(this._rotation - this.skew.x)),
            (this._sy = Math.cos(this._rotation - this.skew.x)),
            this._localID++;
        }
        updateLocalTransform() {
          const t = this.localTransform;
          this._localID !== this._currentLocalID &&
            ((t.a = this._cx * this.scale.x),
            (t.b = this._sx * this.scale.x),
            (t.c = this._cy * this.scale.y),
            (t.d = this._sy * this.scale.y),
            (t.tx =
              this.position.x - (this.pivot.x * t.a + this.pivot.y * t.c)),
            (t.ty =
              this.position.y - (this.pivot.x * t.b + this.pivot.y * t.d)),
            (this._currentLocalID = this._localID),
            (this._parentID = -1));
        }
        updateTransform(t) {
          const e = this.localTransform;
          if (
            (this._localID !== this._currentLocalID &&
              ((e.a = this._cx * this.scale.x),
              (e.b = this._sx * this.scale.x),
              (e.c = this._cy * this.scale.y),
              (e.d = this._sy * this.scale.y),
              (e.tx =
                this.position.x - (this.pivot.x * e.a + this.pivot.y * e.c)),
              (e.ty =
                this.position.y - (this.pivot.x * e.b + this.pivot.y * e.d)),
              (this._currentLocalID = this._localID),
              (this._parentID = -1)),
            this._parentID !== t._worldID)
          ) {
            const i = t.worldTransform,
              r = this.worldTransform;
            (r.a = e.a * i.a + e.b * i.c),
              (r.b = e.a * i.b + e.b * i.d),
              (r.c = e.c * i.a + e.d * i.c),
              (r.d = e.c * i.b + e.d * i.d),
              (r.tx = e.tx * i.a + e.ty * i.c + i.tx),
              (r.ty = e.tx * i.b + e.ty * i.d + i.ty),
              (this._parentID = t._worldID),
              this._worldID++;
          }
        }
        setFromMatrix(t) {
          t.decompose(this), this._localID++;
        }
        get rotation() {
          return this._rotation;
        }
        set rotation(t) {
          this._rotation !== t && ((this._rotation = t), this.updateSkew());
        }
      };
      sA.IDENTITY = new sA();
      let aA = sA;
      aA.prototype.toString = function () {
        return `[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`;
      };
      const hA = [
          {
            test: (t) => "float" === t.type && 1 === t.size && !t.isArray,
            code: (t) =>
              `\n            if(uv["${t}"] !== ud["${t}"].value)\n            {\n                ud["${t}"].value = uv["${t}"]\n                gl.uniform1f(ud["${t}"].location, uv["${t}"])\n            }\n            `,
          },
          {
            test: (t, e) =>
              !(
                ("sampler2D" !== t.type &&
                  "samplerCube" !== t.type &&
                  "sampler2DArray" !== t.type) ||
                1 !== t.size ||
                t.isArray ||
                (null != e && void 0 === e.castToBaseTexture)
              ),
            code: (t) =>
              `t = syncData.textureCount++;\n\n            renderer.texture.bind(uv["${t}"], t);\n\n            if(ud["${t}"].value !== t)\n            {\n                ud["${t}"].value = t;\n                gl.uniform1i(ud["${t}"].location, t);\n; // eslint-disable-line max-len\n            }`,
          },
          {
            test: (t, e) =>
              "mat3" === t.type && 1 === t.size && !t.isArray && void 0 !== e.a,
            code: (t) =>
              `\n            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));\n            `,
            codeUbo: (t) =>
              `\n                var ${t}_matrix = uv.${t}.toArray(true);\n\n                data[offset] = ${t}_matrix[0];\n                data[offset+1] = ${t}_matrix[1];\n                data[offset+2] = ${t}_matrix[2];\n        \n                data[offset + 4] = ${t}_matrix[3];\n                data[offset + 5] = ${t}_matrix[4];\n                data[offset + 6] = ${t}_matrix[5];\n        \n                data[offset + 8] = ${t}_matrix[6];\n                data[offset + 9] = ${t}_matrix[7];\n                data[offset + 10] = ${t}_matrix[8];\n            `,
          },
          {
            test: (t, e) =>
              "vec2" === t.type && 1 === t.size && !t.isArray && void 0 !== e.x,
            code: (t) =>
              `\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["${t}"].location, v.x, v.y);\n                }`,
            codeUbo: (t) =>
              `\n                v = uv.${t};\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            `,
          },
          {
            test: (t) => "vec2" === t.type && 1 === t.size && !t.isArray,
            code: (t) =>
              `\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);\n                }\n            `,
          },
          {
            test: (t, e) =>
              "vec4" === t.type &&
              1 === t.size &&
              !t.isArray &&
              void 0 !== e.width,
            code: (t) =>
              `\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)\n                }`,
            codeUbo: (t) =>
              `\n                    v = uv.${t};\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                `,
          },
          {
            test: (t, e) =>
              "vec4" === t.type &&
              1 === t.size &&
              !t.isArray &&
              void 0 !== e.red,
            code: (t) =>
              `\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)\n                {\n                    cv[0] = v.red;\n                    cv[1] = v.green;\n                    cv[2] = v.blue;\n                    cv[3] = v.alpha;\n                    gl.uniform4f(ud["${t}"].location, v.red, v.green, v.blue, v.alpha)\n                }`,
            codeUbo: (t) =>
              `\n                    v = uv.${t};\n\n                    data[offset] = v.red;\n                    data[offset+1] = v.green;\n                    data[offset+2] = v.blue;\n                    data[offset+3] = v.alpha;\n                `,
          },
          {
            test: (t, e) =>
              "vec3" === t.type &&
              1 === t.size &&
              !t.isArray &&
              void 0 !== e.red,
            code: (t) =>
              `\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)\n                {\n                    cv[0] = v.red;\n                    cv[1] = v.green;\n                    cv[2] = v.blue;\n    \n                    gl.uniform3f(ud["${t}"].location, v.red, v.green, v.blue)\n                }`,
            codeUbo: (t) =>
              `\n                    v = uv.${t};\n\n                    data[offset] = v.red;\n                    data[offset+1] = v.green;\n                    data[offset+2] = v.blue;\n                `,
          },
          {
            test: (t) => "vec4" === t.type && 1 === t.size && !t.isArray,
            code: (t) =>
              `\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])\n                }`,
          },
        ],
        uA = {
          float:
            "\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",
          vec2: "\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",
          vec3: "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",
          vec4: "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",
          int: "\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",
          ivec2:
            "\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",
          ivec3:
            "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",
          ivec4:
            "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",
          uint: "\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",
          uvec2:
            "\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",
          uvec3:
            "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",
          uvec4:
            "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",
          bool: "\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",
          bvec2:
            "\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",
          bvec3:
            "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",
          bvec4:
            "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",
          mat2: "gl.uniformMatrix2fv(location, false, v)",
          mat3: "gl.uniformMatrix3fv(location, false, v)",
          mat4: "gl.uniformMatrix4fv(location, false, v)",
          sampler2D:
            "\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",
          samplerCube:
            "\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",
          sampler2DArray:
            "\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",
        },
        lA = {
          float: "gl.uniform1fv(location, v)",
          vec2: "gl.uniform2fv(location, v)",
          vec3: "gl.uniform3fv(location, v)",
          vec4: "gl.uniform4fv(location, v)",
          mat4: "gl.uniformMatrix4fv(location, false, v)",
          mat3: "gl.uniformMatrix3fv(location, false, v)",
          mat2: "gl.uniformMatrix2fv(location, false, v)",
          int: "gl.uniform1iv(location, v)",
          ivec2: "gl.uniform2iv(location, v)",
          ivec3: "gl.uniform3iv(location, v)",
          ivec4: "gl.uniform4iv(location, v)",
          uint: "gl.uniform1uiv(location, v)",
          uvec2: "gl.uniform2uiv(location, v)",
          uvec3: "gl.uniform3uiv(location, v)",
          uvec4: "gl.uniform4uiv(location, v)",
          bool: "gl.uniform1iv(location, v)",
          bvec2: "gl.uniform2iv(location, v)",
          bvec3: "gl.uniform3iv(location, v)",
          bvec4: "gl.uniform4iv(location, v)",
          sampler2D: "gl.uniform1iv(location, v)",
          samplerCube: "gl.uniform1iv(location, v)",
          sampler2DArray: "gl.uniform1iv(location, v)",
        },
        cA = {};
      let dA,
        pA = cA;
      const _A = {
        float: 1,
        vec2: 2,
        vec3: 3,
        vec4: 4,
        int: 1,
        ivec2: 2,
        ivec3: 3,
        ivec4: 4,
        uint: 1,
        uvec2: 2,
        uvec3: 3,
        uvec4: 4,
        bool: 1,
        bvec2: 2,
        bvec3: 3,
        bvec4: 4,
        mat2: 4,
        mat3: 9,
        mat4: 16,
        sampler2D: 1,
      };
      function fA(t) {
        return _A[t];
      }
      let mA = null;
      const yA = {
        FLOAT: "float",
        FLOAT_VEC2: "vec2",
        FLOAT_VEC3: "vec3",
        FLOAT_VEC4: "vec4",
        INT: "int",
        INT_VEC2: "ivec2",
        INT_VEC3: "ivec3",
        INT_VEC4: "ivec4",
        UNSIGNED_INT: "uint",
        UNSIGNED_INT_VEC2: "uvec2",
        UNSIGNED_INT_VEC3: "uvec3",
        UNSIGNED_INT_VEC4: "uvec4",
        BOOL: "bool",
        BOOL_VEC2: "bvec2",
        BOOL_VEC3: "bvec3",
        BOOL_VEC4: "bvec4",
        FLOAT_MAT2: "mat2",
        FLOAT_MAT3: "mat3",
        FLOAT_MAT4: "mat4",
        SAMPLER_2D: "sampler2D",
        INT_SAMPLER_2D: "sampler2D",
        UNSIGNED_INT_SAMPLER_2D: "sampler2D",
        SAMPLER_CUBE: "samplerCube",
        INT_SAMPLER_CUBE: "samplerCube",
        UNSIGNED_INT_SAMPLER_CUBE: "samplerCube",
        SAMPLER_2D_ARRAY: "sampler2DArray",
        INT_SAMPLER_2D_ARRAY: "sampler2DArray",
        UNSIGNED_INT_SAMPLER_2D_ARRAY: "sampler2DArray",
      };
      function gA(t, e) {
        if (!mA) {
          const e = Object.keys(yA);
          mA = {};
          for (let i = 0; i < e.length; ++i) {
            const r = e[i];
            mA[t[r]] = yA[r];
          }
        }
        return mA[e];
      }
      function vA(t, e, i) {
        if ("precision" !== t.substring(0, 9)) {
          let r = e;
          return (
            e === tw.HIGH && i !== tw.HIGH && (r = tw.MEDIUM),
            `precision ${r} float;\n${t}`
          );
        }
        return i !== tw.HIGH && "precision highp" === t.substring(0, 15)
          ? t.replace("precision highp", "precision mediump")
          : t;
      }
      let bA = 0;
      const xA = {},
        wA = class t {
          constructor(e, i, r = "pixi-shader", n = {}) {
            (this.extra = {}),
              (this.id = bA++),
              (this.vertexSrc = e || t.defaultVertexSrc),
              (this.fragmentSrc = i || t.defaultFragmentSrc),
              (this.vertexSrc = this.vertexSrc.trim()),
              (this.fragmentSrc = this.fragmentSrc.trim()),
              (this.extra = n),
              "#version" !== this.vertexSrc.substring(0, 8) &&
                ((r = r.replace(/\s+/g, "-")),
                xA[r] ? (xA[r]++, (r += `-${xA[r]}`)) : (xA[r] = 1),
                (this.vertexSrc = `#define SHADER_NAME ${r}\n${this.vertexSrc}`),
                (this.fragmentSrc = `#define SHADER_NAME ${r}\n${this.fragmentSrc}`),
                (this.vertexSrc = vA(
                  this.vertexSrc,
                  t.defaultVertexPrecision,
                  tw.HIGH
                )),
                (this.fragmentSrc = vA(
                  this.fragmentSrc,
                  t.defaultFragmentPrecision,
                  (function () {
                    if (!dA) {
                      dA = tw.MEDIUM;
                      const t = (function () {
                        if (pA === cA || pA?.isContextLost()) {
                          const t = ow.ADAPTER.createCanvas();
                          let e;
                          ow.PREFER_ENV >= Ux.WEBGL2 &&
                            (e = t.getContext("webgl2", {})),
                            e ||
                              ((e =
                                t.getContext("webgl", {}) ||
                                t.getContext("experimental-webgl", {})),
                              e
                                ? e.getExtension("WEBGL_draw_buffers")
                                : (e = null)),
                            (pA = e);
                        }
                        return pA;
                      })();
                      if (t && t.getShaderPrecisionFormat) {
                        const e = t.getShaderPrecisionFormat(
                          t.FRAGMENT_SHADER,
                          t.HIGH_FLOAT
                        );
                        e && (dA = e.precision ? tw.HIGH : tw.MEDIUM);
                      }
                    }
                    return dA;
                  })()
                ))),
              (this.glPrograms = {}),
              (this.syncUniforms = null);
          }
          static get defaultVertexSrc() {
            return "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n";
          }
          static get defaultFragmentSrc() {
            return "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}";
          }
          static from(e, i, r) {
            const n = e + i;
            let o = cT[n];
            return o || (cT[n] = o = new t(e, i, r)), o;
          }
        };
      (wA.defaultVertexPrecision = tw.HIGH),
        (wA.defaultFragmentPrecision = Tw.apple.device ? tw.HIGH : tw.MEDIUM);
      let TA = wA,
        AA = 0;
      class SA {
        constructor(t, e, i) {
          (this.group = !0),
            (this.syncUniforms = {}),
            (this.dirtyId = 0),
            (this.id = AA++),
            (this.static = !!e),
            (this.ubo = !!i),
            t instanceof IT
              ? ((this.buffer = t),
                (this.buffer.type = rw.UNIFORM_BUFFER),
                (this.autoManage = !1),
                (this.ubo = !0))
              : ((this.uniforms = t),
                this.ubo &&
                  ((this.buffer = new IT(new Float32Array(1))),
                  (this.buffer.type = rw.UNIFORM_BUFFER),
                  (this.autoManage = !0)));
        }
        update() {
          this.dirtyId++,
            !this.autoManage && this.buffer && this.buffer.update();
        }
        add(t, e, i) {
          if (this.ubo)
            throw new Error(
              "[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them"
            );
          this.uniforms[t] = new SA(e, i);
        }
        static from(t, e, i) {
          return new SA(t, e, i);
        }
        static uboFrom(t, e) {
          return new SA(t, e ?? !0, !0);
        }
      }
      class EA {
        constructor(t, e) {
          (this.uniformBindCount = 0),
            (this.program = t),
            (this.uniformGroup = e
              ? e instanceof SA
                ? e
                : new SA(e)
              : new SA({})),
            (this.disposeRunner = new ST("disposeShader"));
        }
        checkUniformExists(t, e) {
          if (e.uniforms[t]) return !0;
          for (const i in e.uniforms) {
            const r = e.uniforms[i];
            if (!0 === r.group && this.checkUniformExists(t, r)) return !0;
          }
          return !1;
        }
        destroy() {
          (this.uniformGroup = null),
            this.disposeRunner.emit(this),
            this.disposeRunner.destroy();
        }
        get uniforms() {
          return this.uniformGroup.uniforms;
        }
        static from(t, e, i) {
          const r = TA.from(t, e);
          return new EA(r, i);
        }
      }
      class CA {
        constructor(t, e) {
          if (
            ((this.vertexSrc = t),
            (this.fragTemplate = e),
            (this.programCache = {}),
            (this.defaultGroupCache = {}),
            !e.includes("%count%"))
          )
            throw new Error('Fragment template must contain "%count%".');
          if (!e.includes("%forloop%"))
            throw new Error('Fragment template must contain "%forloop%".');
        }
        generateShader(t) {
          if (!this.programCache[t]) {
            const e = new Int32Array(t);
            for (let i = 0; i < t; i++) e[i] = i;
            this.defaultGroupCache[t] = SA.from({ uSamplers: e }, !0);
            let i = this.fragTemplate;
            (i = i.replace(/%count%/gi, `${t}`)),
              (i = i.replace(/%forloop%/gi, this.generateSampleSrc(t))),
              (this.programCache[t] = new TA(this.vertexSrc, i));
          }
          const e = {
            tint: new Float32Array([1, 1, 1, 1]),
            translationMatrix: new KT(),
            default: this.defaultGroupCache[t],
          };
          return new EA(this.programCache[t], e);
        }
        generateSampleSrc(t) {
          let e = "";
          (e += "\n"), (e += "\n");
          for (let i = 0; i < t; i++)
            i > 0 && (e += "\nelse "),
              i < t - 1 && (e += `if(vTextureId < ${i}.5)`),
              (e += "\n{"),
              (e += `\n\tcolor = texture2D(uSamplers[${i}], vTextureCoord);`),
              (e += "\n}");
          return (e += "\n"), (e += "\n"), e;
        }
      }
      class MA {
        constructor() {
          (this.elements = []), (this.ids = []), (this.count = 0);
        }
        clear() {
          for (let t = 0; t < this.count; t++) this.elements[t] = null;
          this.count = 0;
        }
      }
      class PA {
        constructor(t) {
          this.renderer = t;
        }
        flush() {}
        destroy() {
          this.renderer = null;
        }
        start() {}
        stop() {
          this.flush();
        }
        render(t) {}
      }
      const BA = class t extends PA {
        constructor(e) {
          super(e),
            this.setShaderGenerator(),
            (this.geometryClass = GT),
            (this.vertexSize = 6),
            (this.state = wT.for2d()),
            (this.size = 4 * t.defaultBatchSize),
            (this._vertexCount = 0),
            (this._indexCount = 0),
            (this._bufferedElements = []),
            (this._bufferedTextures = []),
            (this._bufferSize = 0),
            (this._shader = null),
            (this._packedGeometries = []),
            (this._packedGeometryPoolSize = 2),
            (this._flushId = 0),
            (this._aBuffers = {}),
            (this._iBuffers = {}),
            (this.maxTextures = 1),
            this.renderer.on("prerender", this.onPrerender, this),
            e.runners.contextChange.add(this),
            (this._dcIndex = 0),
            (this._aIndex = 0),
            (this._iIndex = 0),
            (this._attributeBuffer = null),
            (this._indexBuffer = null),
            (this._tempBoundTextures = []);
        }
        static get defaultMaxTextures() {
          return (
            (this._defaultMaxTextures =
              this._defaultMaxTextures ??
              (function () {
                let t = !0;
                const e = ow.ADAPTER.getNavigator();
                if (Tw.tablet || Tw.phone) {
                  if (Tw.apple.device) {
                    const i = e.userAgent.match(/OS (\d+)_(\d+)?/);
                    i && parseInt(i[1], 10) < 11 && (t = !1);
                  }
                  if (Tw.android.device) {
                    const i = e.userAgent.match(/Android\s([0-9.]*)/);
                    i && parseInt(i[1], 10) < 7 && (t = !1);
                  }
                }
                return t ? 32 : 4;
              })()),
            this._defaultMaxTextures
          );
        }
        static set defaultMaxTextures(t) {
          this._defaultMaxTextures = t;
        }
        static get canUploadSameBuffer() {
          return (
            (this._canUploadSameBuffer =
              this._canUploadSameBuffer ?? !Tw.apple.device),
            this._canUploadSameBuffer
          );
        }
        static set canUploadSameBuffer(t) {
          this._canUploadSameBuffer = t;
        }
        get MAX_TEXTURES() {
          return (
            Ew(
              "7.1.0",
              "BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"
            ),
            this.maxTextures
          );
        }
        static get defaultVertexSrc() {
          return "precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n";
        }
        static get defaultFragmentTemplate() {
          return "varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";
        }
        setShaderGenerator({
          vertex: e = t.defaultVertexSrc,
          fragment: i = t.defaultFragmentTemplate,
        } = {}) {
          this.shaderGenerator = new CA(e, i);
        }
        contextChange() {
          const e = this.renderer.gl;
          ow.PREFER_ENV === Ux.WEBGL_LEGACY
            ? (this.maxTextures = 1)
            : ((this.maxTextures = Math.min(
                e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),
                t.defaultMaxTextures
              )),
              (this.maxTextures = (function (t, e) {
                if (0 === t)
                  throw new Error(
                    "Invalid value of `0` passed to `checkMaxIfStatementsInShader`"
                  );
                const i = e.createShader(e.FRAGMENT_SHADER);
                for (;;) {
                  const r = bT.replace(/%forloop%/gi, xT(t));
                  if (
                    (e.shaderSource(i, r),
                    e.compileShader(i),
                    e.getShaderParameter(i, e.COMPILE_STATUS))
                  )
                    break;
                  t = (t / 2) | 0;
                }
                return t;
              })(this.maxTextures, e))),
            (this._shader = this.shaderGenerator.generateShader(
              this.maxTextures
            ));
          for (let t = 0; t < this._packedGeometryPoolSize; t++)
            this._packedGeometries[t] = new this.geometryClass();
          this.initFlushBuffers();
        }
        initFlushBuffers() {
          const { _drawCallPool: e, _textureArrayPool: i } = t,
            r = this.size / 4,
            n = Math.floor(r / this.maxTextures) + 1;
          for (; e.length < r; ) e.push(new OT());
          for (; i.length < n; ) i.push(new MA());
          for (let t = 0; t < this.maxTextures; t++)
            this._tempBoundTextures[t] = null;
        }
        onPrerender() {
          this._flushId = 0;
        }
        render(t) {
          t._texture.valid &&
            (this._vertexCount + t.vertexData.length / 2 > this.size &&
              this.flush(),
            (this._vertexCount += t.vertexData.length / 2),
            (this._indexCount += t.indices.length),
            (this._bufferedTextures[this._bufferSize] = t._texture.baseTexture),
            (this._bufferedElements[this._bufferSize++] = t));
        }
        buildTexturesAndDrawCalls() {
          const { _bufferedTextures: e, maxTextures: i } = this,
            r = t._textureArrayPool,
            n = this.renderer.batch,
            o = this._tempBoundTextures,
            s = this.renderer.textureGC.count;
          let a = ++BT._globalBatch,
            h = 0,
            u = r[0],
            l = 0;
          n.copyBoundTextures(o, i);
          for (let t = 0; t < this._bufferSize; ++t) {
            const c = e[t];
            (e[t] = null),
              c._batchEnabled !== a &&
                (u.count >= i &&
                  (n.boundArray(u, o, a, i),
                  this.buildDrawCalls(u, l, t),
                  (l = t),
                  (u = r[++h]),
                  ++a),
                (c._batchEnabled = a),
                (c.touched = s),
                (u.elements[u.count++] = c));
          }
          u.count > 0 &&
            (n.boundArray(u, o, a, i),
            this.buildDrawCalls(u, l, this._bufferSize),
            ++h,
            ++a);
          for (let t = 0; t < o.length; t++) o[t] = null;
          BT._globalBatch = a;
        }
        buildDrawCalls(e, i, r) {
          const {
              _bufferedElements: n,
              _attributeBuffer: o,
              _indexBuffer: s,
              vertexSize: a,
            } = this,
            h = t._drawCallPool;
          let u = this._dcIndex,
            l = this._aIndex,
            c = this._iIndex,
            d = h[u];
          (d.start = this._iIndex), (d.texArray = e);
          for (let t = i; t < r; ++t) {
            const r = n[t],
              p = r._texture.baseTexture,
              _ = rT[p.alphaMode ? 1 : 0][r.blendMode];
            (n[t] = null),
              i < t &&
                d.blend !== _ &&
                ((d.size = c - d.start),
                (i = t),
                (d = h[++u]),
                (d.texArray = e),
                (d.start = c)),
              this.packInterleavedGeometry(r, o, s, l, c),
              (l += (r.vertexData.length / 2) * a),
              (c += r.indices.length),
              (d.blend = _);
          }
          i < r && ((d.size = c - d.start), ++u),
            (this._dcIndex = u),
            (this._aIndex = l),
            (this._iIndex = c);
        }
        bindAndClearTexArray(t) {
          const e = this.renderer.texture;
          for (let i = 0; i < t.count; i++)
            e.bind(t.elements[i], t.ids[i]), (t.elements[i] = null);
          t.count = 0;
        }
        updateGeometry() {
          const {
            _packedGeometries: e,
            _attributeBuffer: i,
            _indexBuffer: r,
          } = this;
          t.canUploadSameBuffer
            ? (e[this._flushId]._buffer.update(i.rawBinaryData),
              e[this._flushId]._indexBuffer.update(r),
              this.renderer.geometry.updateBuffers())
            : (this._packedGeometryPoolSize <= this._flushId &&
                (this._packedGeometryPoolSize++,
                (e[this._flushId] = new this.geometryClass())),
              e[this._flushId]._buffer.update(i.rawBinaryData),
              e[this._flushId]._indexBuffer.update(r),
              this.renderer.geometry.bind(e[this._flushId]),
              this.renderer.geometry.updateBuffers(),
              this._flushId++);
        }
        drawBatches() {
          const e = this._dcIndex,
            { gl: i, state: r } = this.renderer,
            n = t._drawCallPool;
          let o = null;
          for (let t = 0; t < e; t++) {
            const { texArray: e, type: s, size: a, start: h, blend: u } = n[t];
            o !== e && ((o = e), this.bindAndClearTexArray(e)),
              (this.state.blendMode = u),
              r.set(this.state),
              i.drawElements(s, a, i.UNSIGNED_SHORT, 2 * h);
          }
        }
        flush() {
          0 !== this._vertexCount &&
            ((this._attributeBuffer = this.getAttributeBuffer(
              this._vertexCount
            )),
            (this._indexBuffer = this.getIndexBuffer(this._indexCount)),
            (this._aIndex = 0),
            (this._iIndex = 0),
            (this._dcIndex = 0),
            this.buildTexturesAndDrawCalls(),
            this.updateGeometry(),
            this.drawBatches(),
            (this._bufferSize = 0),
            (this._vertexCount = 0),
            (this._indexCount = 0));
        }
        start() {
          this.renderer.state.set(this.state),
            this.renderer.texture.ensureSamplerType(this.maxTextures),
            this.renderer.shader.bind(this._shader),
            t.canUploadSameBuffer &&
              this.renderer.geometry.bind(
                this._packedGeometries[this._flushId]
              );
        }
        stop() {
          this.flush();
        }
        destroy() {
          for (let t = 0; t < this._packedGeometryPoolSize; t++)
            this._packedGeometries[t] && this._packedGeometries[t].destroy();
          this.renderer.off("prerender", this.onPrerender, this),
            (this._aBuffers = null),
            (this._iBuffers = null),
            (this._packedGeometries = null),
            (this._attributeBuffer = null),
            (this._indexBuffer = null),
            this._shader && (this._shader.destroy(), (this._shader = null)),
            super.destroy();
        }
        getAttributeBuffer(t) {
          const e = oT(Math.ceil(t / 8)),
            i = aT(e),
            r = 8 * e;
          this._aBuffers.length <= i && (this._iBuffers.length = i + 1);
          let n = this._aBuffers[r];
          return (
            n || (this._aBuffers[r] = n = new vT(r * this.vertexSize * 4)), n
          );
        }
        getIndexBuffer(t) {
          const e = oT(Math.ceil(t / 12)),
            i = aT(e),
            r = 12 * e;
          this._iBuffers.length <= i && (this._iBuffers.length = i + 1);
          let n = this._iBuffers[i];
          return n || (this._iBuffers[i] = n = new Uint16Array(r)), n;
        }
        packInterleavedGeometry(t, e, i, r, n) {
          const { uint32View: o, float32View: s } = e,
            a = r / this.vertexSize,
            h = t.uvs,
            u = t.indices,
            l = t.vertexData,
            c = t._texture.baseTexture._batchLocation,
            d = Math.min(t.worldAlpha, 1),
            p = iT.shared
              .setValue(t._tintRGB)
              .toPremultiplied(d, t._texture.baseTexture.alphaMode > 0);
          for (let t = 0; t < l.length; t += 2)
            (s[r++] = l[t]),
              (s[r++] = l[t + 1]),
              (s[r++] = h[t]),
              (s[r++] = h[t + 1]),
              (o[r++] = p),
              (s[r++] = c);
          for (let t = 0; t < u.length; t++) i[n++] = a + u[t];
        }
      };
      (BA.defaultBatchSize = 4096),
        (BA.extension = { name: "batch", type: fT.RendererPlugin }),
        (BA._drawCallPool = []),
        (BA._textureArrayPool = []);
      let OA = BA;
      gT.add(OA);
      const RA = class t extends EA {
        constructor(e, i, r) {
          super(TA.from(e || t.defaultVertexSrc, i || t.defaultFragmentSrc), r),
            (this.padding = 0),
            (this.resolution = t.defaultResolution),
            (this.multisample = t.defaultMultisample),
            (this.enabled = !0),
            (this.autoFit = !0),
            (this.state = new wT());
        }
        apply(t, e, i, r, n) {
          t.applyFilter(this, e, i, r);
        }
        get blendMode() {
          return this.state.blendMode;
        }
        set blendMode(t) {
          this.state.blendMode = t;
        }
        get resolution() {
          return this._resolution;
        }
        set resolution(t) {
          this._resolution = t;
        }
        static get defaultVertexSrc() {
          return "attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n";
        }
        static get defaultFragmentSrc() {
          return "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n";
        }
      };
      (RA.defaultResolution = 1), (RA.defaultMultisample = iw.NONE);
      let IA = RA;
      class kA {
        constructor() {
          (this.clearBeforeRender = !0),
            (this._backgroundColor = new iT(0)),
            (this.alpha = 1);
        }
        init(t) {
          this.clearBeforeRender = t.clearBeforeRender;
          const { backgroundColor: e, background: i, backgroundAlpha: r } = t,
            n = i ?? e;
          void 0 !== n && (this.color = n), (this.alpha = r);
        }
        get color() {
          return this._backgroundColor.value;
        }
        set color(t) {
          this._backgroundColor.setValue(t);
        }
        get alpha() {
          return this._backgroundColor.alpha;
        }
        set alpha(t) {
          this._backgroundColor.setAlpha(t);
        }
        get backgroundColor() {
          return this._backgroundColor;
        }
        destroy() {}
      }
      (kA.defaultOptions = {
        backgroundAlpha: 1,
        backgroundColor: 0,
        clearBeforeRender: !0,
      }),
        (kA.extension = {
          type: [fT.RendererSystem, fT.CanvasRendererSystem],
          name: "background",
        }),
        gT.add(kA);
      class FA {
        constructor(t) {
          (this.renderer = t),
            (this.emptyRenderer = new PA(t)),
            (this.currentRenderer = this.emptyRenderer);
        }
        setObjectRenderer(t) {
          this.currentRenderer !== t &&
            (this.currentRenderer.stop(),
            (this.currentRenderer = t),
            this.currentRenderer.start());
        }
        flush() {
          this.setObjectRenderer(this.emptyRenderer);
        }
        reset() {
          this.setObjectRenderer(this.emptyRenderer);
        }
        copyBoundTextures(t, e) {
          const { boundTextures: i } = this.renderer.texture;
          for (let r = e - 1; r >= 0; --r)
            (t[r] = i[r] || null), t[r] && (t[r]._batchLocation = r);
        }
        boundArray(t, e, i, r) {
          const { elements: n, ids: o, count: s } = t;
          let a = 0;
          for (let t = 0; t < s; t++) {
            const s = n[t],
              h = s._batchLocation;
            if (h >= 0 && h < r && e[h] === s) o[t] = h;
            else
              for (; a < r; ) {
                const r = e[a];
                if (!r || r._batchEnabled !== i || r._batchLocation !== a) {
                  (o[t] = a), (s._batchLocation = a), (e[a] = s);
                  break;
                }
                a++;
              }
          }
        }
        destroy() {
          this.renderer = null;
        }
      }
      (FA.extension = { type: fT.RendererSystem, name: "batch" }), gT.add(FA);
      let DA = 0;
      class NA {
        constructor(t) {
          (this.renderer = t),
            (this.webGLVersion = 1),
            (this.extensions = {}),
            (this.supports = { uint32Indices: !1 }),
            (this.handleContextLost = this.handleContextLost.bind(this)),
            (this.handleContextRestored =
              this.handleContextRestored.bind(this));
        }
        get isLost() {
          return !this.gl || this.gl.isContextLost();
        }
        contextChange(t) {
          (this.gl = t),
            (this.renderer.gl = t),
            (this.renderer.CONTEXT_UID = DA++);
        }
        init(t) {
          if (t.context) this.initFromContext(t.context);
          else {
            const e = this.renderer.background.alpha < 1,
              i = t.premultipliedAlpha;
            (this.preserveDrawingBuffer = t.preserveDrawingBuffer),
              (this.useContextAlpha = t.useContextAlpha),
              (this.powerPreference = t.powerPreference),
              this.initFromOptions({
                alpha: e,
                premultipliedAlpha: i,
                antialias: t.antialias,
                stencil: !0,
                preserveDrawingBuffer: t.preserveDrawingBuffer,
                powerPreference: t.powerPreference,
              });
          }
        }
        initFromContext(t) {
          (this.gl = t),
            this.validateContext(t),
            (this.renderer.gl = t),
            (this.renderer.CONTEXT_UID = DA++),
            this.renderer.runners.contextChange.emit(t);
          const e = this.renderer.view;
          void 0 !== e.addEventListener &&
            (e.addEventListener("webglcontextlost", this.handleContextLost, !1),
            e.addEventListener(
              "webglcontextrestored",
              this.handleContextRestored,
              !1
            ));
        }
        initFromOptions(t) {
          const e = this.createContext(this.renderer.view, t);
          this.initFromContext(e);
        }
        createContext(t, e) {
          let i;
          if (
            (ow.PREFER_ENV >= Ux.WEBGL2 && (i = t.getContext("webgl2", e)), i)
          )
            this.webGLVersion = 2;
          else if (
            ((this.webGLVersion = 1),
            (i =
              t.getContext("webgl", e) ||
              t.getContext("experimental-webgl", e)),
            !i)
          )
            throw new Error(
              "This browser does not support WebGL. Try using the canvas renderer"
            );
          return (this.gl = i), this.getExtensions(), this.gl;
        }
        getExtensions() {
          const { gl: t } = this,
            e = {
              loseContext: t.getExtension("WEBGL_lose_context"),
              anisotropicFiltering: t.getExtension(
                "EXT_texture_filter_anisotropic"
              ),
              floatTextureLinear: t.getExtension("OES_texture_float_linear"),
              s3tc: t.getExtension("WEBGL_compressed_texture_s3tc"),
              s3tc_sRGB: t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),
              etc: t.getExtension("WEBGL_compressed_texture_etc"),
              etc1: t.getExtension("WEBGL_compressed_texture_etc1"),
              pvrtc:
                t.getExtension("WEBGL_compressed_texture_pvrtc") ||
                t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),
              atc: t.getExtension("WEBGL_compressed_texture_atc"),
              astc: t.getExtension("WEBGL_compressed_texture_astc"),
              bptc: t.getExtension("EXT_texture_compression_bptc"),
            };
          1 === this.webGLVersion
            ? Object.assign(this.extensions, e, {
                drawBuffers: t.getExtension("WEBGL_draw_buffers"),
                depthTexture: t.getExtension("WEBGL_depth_texture"),
                vertexArrayObject:
                  t.getExtension("OES_vertex_array_object") ||
                  t.getExtension("MOZ_OES_vertex_array_object") ||
                  t.getExtension("WEBKIT_OES_vertex_array_object"),
                uint32ElementIndex: t.getExtension("OES_element_index_uint"),
                floatTexture: t.getExtension("OES_texture_float"),
                floatTextureLinear: t.getExtension("OES_texture_float_linear"),
                textureHalfFloat: t.getExtension("OES_texture_half_float"),
                textureHalfFloatLinear: t.getExtension(
                  "OES_texture_half_float_linear"
                ),
              })
            : 2 === this.webGLVersion &&
              Object.assign(this.extensions, e, {
                colorBufferFloat: t.getExtension("EXT_color_buffer_float"),
              });
        }
        handleContextLost(t) {
          t.preventDefault(),
            setTimeout(() => {
              this.gl.isContextLost() &&
                this.extensions.loseContext &&
                this.extensions.loseContext.restoreContext();
            }, 0);
        }
        handleContextRestored() {
          this.renderer.runners.contextChange.emit(this.gl);
        }
        destroy() {
          const t = this.renderer.view;
          (this.renderer = null),
            void 0 !== t.removeEventListener &&
              (t.removeEventListener(
                "webglcontextlost",
                this.handleContextLost
              ),
              t.removeEventListener(
                "webglcontextrestored",
                this.handleContextRestored
              )),
            this.gl.useProgram(null),
            this.extensions.loseContext &&
              this.extensions.loseContext.loseContext();
        }
        postrender() {
          this.renderer.objectRenderer.renderingToScreen && this.gl.flush();
        }
        validateContext(t) {
          const e = t.getContextAttributes(),
            i =
              "WebGL2RenderingContext" in globalThis &&
              t instanceof globalThis.WebGL2RenderingContext;
          i && (this.webGLVersion = 2),
            e &&
              !e.stencil &&
              console.warn(
                "Provided WebGL context does not have a stencil buffer, masks may not render correctly"
              );
          const r = i || !!t.getExtension("OES_element_index_uint");
          (this.supports.uint32Indices = r),
            r ||
              console.warn(
                "Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly"
              );
        }
      }
      (NA.defaultOptions = {
        context: null,
        antialias: !1,
        premultipliedAlpha: !0,
        preserveDrawingBuffer: !1,
        powerPreference: "default",
      }),
        (NA.extension = { type: fT.RendererSystem, name: "context" }),
        gT.add(NA);
      class LA {
        constructor(t, e) {
          if (
            ((this.width = Math.round(t)),
            (this.height = Math.round(e)),
            !this.width || !this.height)
          )
            throw new Error("Framebuffer width or height is zero");
          (this.stencil = !1),
            (this.depth = !1),
            (this.dirtyId = 0),
            (this.dirtyFormat = 0),
            (this.dirtySize = 0),
            (this.depthTexture = null),
            (this.colorTextures = []),
            (this.glFramebuffers = {}),
            (this.disposeRunner = new ST("disposeFramebuffer")),
            (this.multisample = iw.NONE);
        }
        get colorTexture() {
          return this.colorTextures[0];
        }
        addColorTexture(t = 0, e) {
          return (
            (this.colorTextures[t] =
              e ||
              new BT(null, {
                scaleMode: qx.NEAREST,
                resolution: 1,
                mipmap: Kx.OFF,
                width: this.width,
                height: this.height,
              })),
            this.dirtyId++,
            this.dirtyFormat++,
            this
          );
        }
        addDepthTexture(t) {
          return (
            (this.depthTexture =
              t ||
              new BT(null, {
                scaleMode: qx.NEAREST,
                resolution: 1,
                width: this.width,
                height: this.height,
                mipmap: Kx.OFF,
                format: Xx.DEPTH_COMPONENT,
                type: Yx.UNSIGNED_SHORT,
              })),
            this.dirtyId++,
            this.dirtyFormat++,
            this
          );
        }
        enableDepth() {
          return (this.depth = !0), this.dirtyId++, this.dirtyFormat++, this;
        }
        enableStencil() {
          return (this.stencil = !0), this.dirtyId++, this.dirtyFormat++, this;
        }
        resize(t, e) {
          if (((t = Math.round(t)), (e = Math.round(e)), !t || !e))
            throw new Error("Framebuffer width and height must not be zero");
          if (t !== this.width || e !== this.height) {
            (this.width = t),
              (this.height = e),
              this.dirtyId++,
              this.dirtySize++;
            for (let i = 0; i < this.colorTextures.length; i++) {
              const r = this.colorTextures[i],
                n = r.resolution;
              r.setSize(t / n, e / n);
            }
            if (this.depthTexture) {
              const i = this.depthTexture.resolution;
              this.depthTexture.setSize(t / i, e / i);
            }
          }
        }
        dispose() {
          this.disposeRunner.emit(this, !1);
        }
        destroyDepthTexture() {
          this.depthTexture &&
            (this.depthTexture.destroy(),
            (this.depthTexture = null),
            ++this.dirtyId,
            ++this.dirtyFormat);
        }
      }
      class UA extends BT {
        constructor(t = {}) {
          "number" == typeof t &&
            (t = {
              width: arguments[0],
              height: arguments[1],
              scaleMode: arguments[2],
              resolution: arguments[3],
            }),
            (t.width = t.width ?? 100),
            (t.height = t.height ?? 100),
            t.multisample ?? (t.multisample = iw.NONE),
            super(null, t),
            (this.mipmap = Kx.OFF),
            (this.valid = !0),
            (this._clear = new iT([0, 0, 0, 0])),
            (this.framebuffer = new LA(
              this.realWidth,
              this.realHeight
            ).addColorTexture(0, this)),
            (this.framebuffer.multisample = t.multisample),
            (this.maskStack = []),
            (this.filterStack = [{}]);
        }
        set clearColor(t) {
          this._clear.setValue(t);
        }
        get clearColor() {
          return this._clear.value;
        }
        get clear() {
          return this._clear;
        }
        get multisample() {
          return this.framebuffer.multisample;
        }
        set multisample(t) {
          this.framebuffer.multisample = t;
        }
        resize(t, e) {
          this.framebuffer.resize(t * this.resolution, e * this.resolution),
            this.setRealSize(this.framebuffer.width, this.framebuffer.height);
        }
        dispose() {
          this.framebuffer.dispose(), super.dispose();
        }
        destroy() {
          super.destroy(),
            this.framebuffer.destroyDepthTexture(),
            (this.framebuffer = null);
        }
      }
      class GA extends ET {
        constructor(t) {
          const e = t;
          super(
            e.naturalWidth || e.videoWidth || e.displayWidth || e.width,
            e.naturalHeight || e.videoHeight || e.displayHeight || e.height
          ),
            (this.source = t),
            (this.noSubImage = !1);
        }
        static crossOrigin(t, e, i) {
          void 0 !== i || e.startsWith("data:")
            ? !1 !== i &&
              (t.crossOrigin = "string" == typeof i ? i : "anonymous")
            : (t.crossOrigin = (function (t, e = globalThis.location) {
                if (t.startsWith("data:")) return "";
                e = e || globalThis.location;
                const i = new URL(t, document.baseURI);
                return i.hostname !== e.hostname ||
                  i.port !== e.port ||
                  i.protocol !== e.protocol
                  ? "anonymous"
                  : "";
              })(e));
        }
        upload(t, e, i, r) {
          const n = t.gl,
            o = e.realWidth,
            s = e.realHeight;
          if (
            ((r = r || this.source),
            typeof HTMLImageElement < "u" && r instanceof HTMLImageElement)
          ) {
            if (!r.complete || 0 === r.naturalWidth) return !1;
          } else if (
            typeof HTMLVideoElement < "u" &&
            r instanceof HTMLVideoElement &&
            r.readyState <= 1
          )
            return !1;
          return (
            n.pixelStorei(
              n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
              e.alphaMode === Jx.UNPACK
            ),
            this.noSubImage ||
            e.target !== n.TEXTURE_2D ||
            i.width !== o ||
            i.height !== s
              ? ((i.width = o),
                (i.height = s),
                n.texImage2D(
                  e.target,
                  0,
                  i.internalFormat,
                  e.format,
                  i.type,
                  r
                ))
              : n.texSubImage2D(n.TEXTURE_2D, 0, 0, 0, e.format, i.type, r),
            !0
          );
        }
        update() {
          if (this.destroyed) return;
          const t = this.source,
            e = t.naturalWidth || t.videoWidth || t.width,
            i = t.naturalHeight || t.videoHeight || t.height;
          this.resize(e, i), super.update();
        }
        dispose() {
          this.source = null;
        }
      }
      class VA extends GA {
        constructor(t, e) {
          if (((e = e || {}), "string" == typeof t)) {
            const i = new Image();
            GA.crossOrigin(i, t, e.crossorigin), (i.src = t), (t = i);
          }
          super(t),
            !t.complete &&
              this._width &&
              this._height &&
              ((this._width = 0), (this._height = 0)),
            (this.url = t.src),
            (this._process = null),
            (this.preserveBitmap = !1),
            (this.createBitmap =
              (e.createBitmap ?? ow.CREATE_IMAGE_BITMAP) &&
              !!globalThis.createImageBitmap),
            (this.alphaMode =
              "number" == typeof e.alphaMode ? e.alphaMode : null),
            (this.bitmap = null),
            (this._load = null),
            !1 !== e.autoLoad && this.load();
        }
        load(t) {
          return (
            this._load ||
              (void 0 !== t && (this.createBitmap = t),
              (this._load = new Promise((t, e) => {
                const i = this.source;
                this.url = i.src;
                const r = () => {
                  this.destroyed ||
                    ((i.onload = null),
                    (i.onerror = null),
                    this.update(),
                    (this._load = null),
                    this.createBitmap ? t(this.process()) : t(this));
                };
                i.complete && i.src
                  ? r()
                  : ((i.onload = r),
                    (i.onerror = (t) => {
                      e(t), this.onError.emit(t);
                    }));
              }))),
            this._load
          );
        }
        process() {
          const t = this.source;
          if (null !== this._process) return this._process;
          if (null !== this.bitmap || !globalThis.createImageBitmap)
            return Promise.resolve(this);
          const e = globalThis.createImageBitmap,
            i = !t.crossOrigin || "anonymous" === t.crossOrigin;
          return (
            (this._process = fetch(t.src, { mode: i ? "cors" : "no-cors" })
              .then((t) => t.blob())
              .then((i) =>
                e(i, 0, 0, t.width, t.height, {
                  premultiplyAlpha:
                    null === this.alphaMode || this.alphaMode === Jx.UNPACK
                      ? "premultiply"
                      : "none",
                })
              )
              .then((t) =>
                this.destroyed
                  ? Promise.reject()
                  : ((this.bitmap = t),
                    this.update(),
                    (this._process = null),
                    Promise.resolve(this))
              )),
            this._process
          );
        }
        upload(t, e, i) {
          if (
            ("number" == typeof this.alphaMode &&
              (e.alphaMode = this.alphaMode),
            !this.createBitmap)
          )
            return super.upload(t, e, i);
          if (!this.bitmap && (this.process(), !this.bitmap)) return !1;
          if ((super.upload(t, e, i, this.bitmap), !this.preserveBitmap)) {
            let t = !0;
            const r = e._glTextures;
            for (const n in r) {
              const o = r[n];
              if (o !== i && o.dirtyId !== e.dirtyId) {
                t = !1;
                break;
              }
            }
            t &&
              (this.bitmap.close && this.bitmap.close(), (this.bitmap = null));
          }
          return !0;
        }
        dispose() {
          (this.source.onload = null),
            (this.source.onerror = null),
            super.dispose(),
            this.bitmap && (this.bitmap.close(), (this.bitmap = null)),
            (this._process = null),
            (this._load = null);
        }
        static test(t) {
          return (
            typeof HTMLImageElement < "u" &&
            ("string" == typeof t || t instanceof HTMLImageElement)
          );
        }
      }
      class jA {
        constructor() {
          (this.x0 = 0),
            (this.y0 = 0),
            (this.x1 = 1),
            (this.y1 = 0),
            (this.x2 = 1),
            (this.y2 = 1),
            (this.x3 = 0),
            (this.y3 = 1),
            (this.uvsFloat32 = new Float32Array(8));
        }
        set(t, e, i) {
          const r = e.width,
            n = e.height;
          if (i) {
            const e = t.width / 2 / r,
              o = t.height / 2 / n,
              s = t.x / r + e,
              a = t.y / n + o;
            (i = nA.add(i, nA.NW)),
              (this.x0 = s + e * nA.uX(i)),
              (this.y0 = a + o * nA.uY(i)),
              (i = nA.add(i, 2)),
              (this.x1 = s + e * nA.uX(i)),
              (this.y1 = a + o * nA.uY(i)),
              (i = nA.add(i, 2)),
              (this.x2 = s + e * nA.uX(i)),
              (this.y2 = a + o * nA.uY(i)),
              (i = nA.add(i, 2)),
              (this.x3 = s + e * nA.uX(i)),
              (this.y3 = a + o * nA.uY(i));
          } else
            (this.x0 = t.x / r),
              (this.y0 = t.y / n),
              (this.x1 = (t.x + t.width) / r),
              (this.y1 = t.y / n),
              (this.x2 = (t.x + t.width) / r),
              (this.y2 = (t.y + t.height) / n),
              (this.x3 = t.x / r),
              (this.y3 = (t.y + t.height) / n);
          (this.uvsFloat32[0] = this.x0),
            (this.uvsFloat32[1] = this.y0),
            (this.uvsFloat32[2] = this.x1),
            (this.uvsFloat32[3] = this.y1),
            (this.uvsFloat32[4] = this.x2),
            (this.uvsFloat32[5] = this.y2),
            (this.uvsFloat32[6] = this.x3),
            (this.uvsFloat32[7] = this.y3);
        }
      }
      jA.prototype.toString = function () {
        return `[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`;
      };
      const zA = new jA();
      function XA(t) {
        (t.destroy = function () {}),
          (t.on = function () {}),
          (t.once = function () {}),
          (t.emit = function () {});
      }
      class HA extends Aw {
        constructor(t, e, i, r, n, o, s) {
          if (
            (super(),
            (this.noFrame = !1),
            e || ((this.noFrame = !0), (e = new HT(0, 0, 1, 1))),
            t instanceof HA && (t = t.baseTexture),
            (this.baseTexture = t),
            (this._frame = e),
            (this.trim = r),
            (this.valid = !1),
            (this.destroyed = !1),
            (this._uvs = zA),
            (this.uvMatrix = null),
            (this.orig = i || e),
            (this._rotate = Number(n || 0)),
            !0 === n)
          )
            this._rotate = 2;
          else if (this._rotate % 2 != 0)
            throw new Error(
              "attempt to use diamond-shaped UVs. If you are sure, set rotation manually"
            );
          (this.defaultAnchor = o ? new zT(o.x, o.y) : new zT(0, 0)),
            (this.defaultBorders = s),
            (this._updateID = 0),
            (this.textureCacheIds = []),
            t.valid
              ? this.noFrame
                ? t.valid && this.onBaseTextureUpdated(t)
                : (this.frame = e)
              : t.once("loaded", this.onBaseTextureUpdated, this),
            this.noFrame && t.on("update", this.onBaseTextureUpdated, this);
        }
        update() {
          this.baseTexture.resource && this.baseTexture.resource.update();
        }
        onBaseTextureUpdated(t) {
          if (this.noFrame) {
            if (!this.baseTexture.valid) return;
            (this._frame.width = t.width),
              (this._frame.height = t.height),
              (this.valid = !0),
              this.updateUvs();
          } else this.frame = this._frame;
          this.emit("update", this);
        }
        destroy(t) {
          if (this.baseTexture) {
            if (t) {
              const { resource: t } = this.baseTexture;
              t?.url && dT[t.url] && HA.removeFromCache(t.url),
                this.baseTexture.destroy();
            }
            this.baseTexture.off("loaded", this.onBaseTextureUpdated, this),
              this.baseTexture.off("update", this.onBaseTextureUpdated, this),
              (this.baseTexture = null);
          }
          (this._frame = null),
            (this._uvs = null),
            (this.trim = null),
            (this.orig = null),
            (this.valid = !1),
            HA.removeFromCache(this),
            (this.textureCacheIds = null),
            (this.destroyed = !0),
            this.emit("destroyed", this),
            this.removeAllListeners();
        }
        clone() {
          const t = this._frame.clone(),
            e = this._frame === this.orig ? t : this.orig.clone(),
            i = new HA(
              this.baseTexture,
              !this.noFrame && t,
              e,
              this.trim?.clone(),
              this.rotate,
              this.defaultAnchor,
              this.defaultBorders
            );
          return this.noFrame && (i._frame = t), i;
        }
        updateUvs() {
          this._uvs === zA && (this._uvs = new jA()),
            this._uvs.set(this._frame, this.baseTexture, this.rotate),
            this._updateID++;
        }
        static from(t, e = {}, i = ow.STRICT_TEXTURE_CACHE) {
          const r = "string" == typeof t;
          let n = null;
          if (r) n = t;
          else if (t instanceof BT) {
            if (!t.cacheId) {
              const i = e?.pixiIdPrefix || "pixiid";
              (t.cacheId = `${i}-${uT()}`), BT.addToCache(t, t.cacheId);
            }
            n = t.cacheId;
          } else {
            if (!t._pixiId) {
              const i = e?.pixiIdPrefix || "pixiid";
              t._pixiId = `${i}_${uT()}`;
            }
            n = t._pixiId;
          }
          let o = dT[n];
          if (r && i && !o)
            throw new Error(
              `The cacheId "${n}" does not exist in TextureCache.`
            );
          return (
            o || t instanceof BT
              ? !o && t instanceof BT && ((o = new HA(t)), HA.addToCache(o, n))
              : (e.resolution || (e.resolution = _T(t)),
                (o = new HA(new BT(t, e))),
                (o.baseTexture.cacheId = n),
                BT.addToCache(o.baseTexture, n),
                HA.addToCache(o, n)),
            o
          );
        }
        static fromURL(t, e) {
          const i = Object.assign({ autoLoad: !1 }, e?.resourceOptions),
            r = HA.from(t, Object.assign({ resourceOptions: i }, e), !1),
            n = r.baseTexture.resource;
          return r.baseTexture.valid
            ? Promise.resolve(r)
            : n.load().then(() => Promise.resolve(r));
        }
        static fromBuffer(t, e, i, r) {
          return new HA(BT.fromBuffer(t, e, i, r));
        }
        static fromLoader(t, e, i, r) {
          const n = new BT(
              t,
              Object.assign(
                { scaleMode: BT.defaultOptions.scaleMode, resolution: _T(e) },
                r
              )
            ),
            { resource: o } = n;
          o instanceof VA && (o.url = e);
          const s = new HA(n);
          return (
            i || (i = e),
            BT.addToCache(s.baseTexture, i),
            HA.addToCache(s, i),
            i !== e && (BT.addToCache(s.baseTexture, e), HA.addToCache(s, e)),
            s.baseTexture.valid
              ? Promise.resolve(s)
              : new Promise((t) => {
                  s.baseTexture.once("loaded", () => t(s));
                })
          );
        }
        static addToCache(t, e) {
          e &&
            (t.textureCacheIds.includes(e) || t.textureCacheIds.push(e),
            dT[e] &&
              dT[e] !== t &&
              console.warn(
                `Texture added to the cache with an id [${e}] that already had an entry`
              ),
            (dT[e] = t));
        }
        static removeFromCache(t) {
          if ("string" == typeof t) {
            const e = dT[t];
            if (e) {
              const i = e.textureCacheIds.indexOf(t);
              return i > -1 && e.textureCacheIds.splice(i, 1), delete dT[t], e;
            }
          } else if (t?.textureCacheIds) {
            for (let e = 0; e < t.textureCacheIds.length; ++e)
              dT[t.textureCacheIds[e]] === t && delete dT[t.textureCacheIds[e]];
            return (t.textureCacheIds.length = 0), t;
          }
          return null;
        }
        get resolution() {
          return this.baseTexture.resolution;
        }
        get frame() {
          return this._frame;
        }
        set frame(t) {
          (this._frame = t), (this.noFrame = !1);
          const { x: e, y: i, width: r, height: n } = t,
            o = e + r > this.baseTexture.width,
            s = i + n > this.baseTexture.height;
          if (o || s) {
            const t = o && s ? "and" : "or",
              a = `X: ${e} + ${r} = ${e + r} > ${this.baseTexture.width}`,
              h = `Y: ${i} + ${n} = ${i + n} > ${this.baseTexture.height}`;
            throw new Error(
              `Texture Error: frame does not fit inside the base Texture dimensions: ${a} ${t} ${h}`
            );
          }
          (this.valid = r && n && this.baseTexture.valid),
            !this.trim && !this.rotate && (this.orig = t),
            this.valid && this.updateUvs();
        }
        get rotate() {
          return this._rotate;
        }
        set rotate(t) {
          (this._rotate = t), this.valid && this.updateUvs();
        }
        get width() {
          return this.orig.width;
        }
        get height() {
          return this.orig.height;
        }
        castToBaseTexture() {
          return this.baseTexture;
        }
        static get EMPTY() {
          return (
            HA._EMPTY ||
              ((HA._EMPTY = new HA(new BT())),
              XA(HA._EMPTY),
              XA(HA._EMPTY.baseTexture)),
            HA._EMPTY
          );
        }
        static get WHITE() {
          if (!HA._WHITE) {
            const t = ow.ADAPTER.createCanvas(16, 16),
              e = t.getContext("2d");
            (t.width = 16),
              (t.height = 16),
              (e.fillStyle = "white"),
              e.fillRect(0, 0, 16, 16),
              (HA._WHITE = new HA(BT.from(t))),
              XA(HA._WHITE),
              XA(HA._WHITE.baseTexture);
          }
          return HA._WHITE;
        }
      }
      class YA extends HA {
        constructor(t, e) {
          super(t, e),
            (this.valid = !0),
            (this.filterFrame = null),
            (this.filterPoolKey = null),
            this.updateUvs();
        }
        get framebuffer() {
          return this.baseTexture.framebuffer;
        }
        get multisample() {
          return this.framebuffer.multisample;
        }
        set multisample(t) {
          this.framebuffer.multisample = t;
        }
        resize(t, e, i = !0) {
          const r = this.baseTexture.resolution,
            n = Math.round(t * r) / r,
            o = Math.round(e * r) / r;
          (this.valid = n > 0 && o > 0),
            (this._frame.width = this.orig.width = n),
            (this._frame.height = this.orig.height = o),
            i && this.baseTexture.resize(n, o),
            this.updateUvs();
        }
        setResolution(t) {
          const { baseTexture: e } = this;
          e.resolution !== t &&
            (e.setResolution(t), this.resize(e.width, e.height, !1));
        }
        static create(t) {
          return new YA(new UA(t));
        }
      }
      class WA {
        constructor(t) {
          (this.texturePool = {}),
            (this.textureOptions = t || {}),
            (this.enableFullScreen = !1),
            (this._pixelsWidth = 0),
            (this._pixelsHeight = 0);
        }
        createTexture(t, e, i = iw.NONE) {
          const r = new UA(
            Object.assign(
              { width: t, height: e, resolution: 1, multisample: i },
              this.textureOptions
            )
          );
          return new YA(r);
        }
        getOptimalTexture(t, e, i = 1, r = iw.NONE) {
          let n;
          (t = Math.max(Math.ceil(t * i - 1e-6), 1)),
            (e = Math.max(Math.ceil(e * i - 1e-6), 1)),
            this.enableFullScreen &&
            t === this._pixelsWidth &&
            e === this._pixelsHeight
              ? (n = r > 1 ? -r : -1)
              : ((n =
                  (((65535 & (t = oT(t))) << 16) | (65535 & (e = oT(e)))) >>>
                  0),
                r > 1 && (n += 4294967296 * r)),
            this.texturePool[n] || (this.texturePool[n] = []);
          let o = this.texturePool[n].pop();
          return (
            o || (o = this.createTexture(t, e, r)),
            (o.filterPoolKey = n),
            o.setResolution(i),
            o
          );
        }
        getFilterTexture(t, e, i) {
          const r = this.getOptimalTexture(
            t.width,
            t.height,
            e || t.resolution,
            i || iw.NONE
          );
          return (r.filterFrame = t.filterFrame), r;
        }
        returnTexture(t) {
          const e = t.filterPoolKey;
          (t.filterFrame = null), this.texturePool[e].push(t);
        }
        returnFilterTexture(t) {
          this.returnTexture(t);
        }
        clear(t) {
          if ((t = !1 !== t))
            for (const t in this.texturePool) {
              const e = this.texturePool[t];
              if (e) for (let t = 0; t < e.length; t++) e[t].destroy(!0);
            }
          this.texturePool = {};
        }
        setScreenSize(t) {
          if (
            t.width !== this._pixelsWidth ||
            t.height !== this._pixelsHeight
          ) {
            this.enableFullScreen = t.width > 0 && t.height > 0;
            for (const t in this.texturePool) {
              if (!(Number(t) < 0)) continue;
              const e = this.texturePool[t];
              if (e) for (let t = 0; t < e.length; t++) e[t].destroy(!0);
              this.texturePool[t] = [];
            }
            (this._pixelsWidth = t.width), (this._pixelsHeight = t.height);
          }
        }
      }
      WA.SCREEN_KEY = -1;
      class qA extends UT {
        constructor() {
          super(),
            this.addAttribute(
              "aVertexPosition",
              new Float32Array([0, 0, 1, 0, 1, 1, 0, 1])
            ).addIndex([0, 1, 3, 2]);
        }
      }
      class $A extends UT {
        constructor() {
          super(),
            (this.vertices = new Float32Array([-1, -1, 1, -1, 1, 1, -1, 1])),
            (this.uvs = new Float32Array([0, 0, 1, 0, 1, 1, 0, 1])),
            (this.vertexBuffer = new IT(this.vertices)),
            (this.uvBuffer = new IT(this.uvs)),
            this.addAttribute("aVertexPosition", this.vertexBuffer)
              .addAttribute("aTextureCoord", this.uvBuffer)
              .addIndex([0, 1, 2, 0, 2, 3]);
        }
        map(t, e) {
          let i = 0,
            r = 0;
          return (
            (this.uvs[0] = i),
            (this.uvs[1] = r),
            (this.uvs[2] = i + e.width / t.width),
            (this.uvs[3] = r),
            (this.uvs[4] = i + e.width / t.width),
            (this.uvs[5] = r + e.height / t.height),
            (this.uvs[6] = i),
            (this.uvs[7] = r + e.height / t.height),
            (i = e.x),
            (r = e.y),
            (this.vertices[0] = i),
            (this.vertices[1] = r),
            (this.vertices[2] = i + e.width),
            (this.vertices[3] = r),
            (this.vertices[4] = i + e.width),
            (this.vertices[5] = r + e.height),
            (this.vertices[6] = i),
            (this.vertices[7] = r + e.height),
            this.invalidate(),
            this
          );
        }
        invalidate() {
          return this.vertexBuffer._updateID++, this.uvBuffer._updateID++, this;
        }
      }
      class KA {
        constructor() {
          (this.renderTexture = null),
            (this.target = null),
            (this.legacy = !1),
            (this.resolution = 1),
            (this.multisample = iw.NONE),
            (this.sourceFrame = new HT()),
            (this.destinationFrame = new HT()),
            (this.bindingSourceFrame = new HT()),
            (this.bindingDestinationFrame = new HT()),
            (this.filters = []),
            (this.transform = null);
        }
        clear() {
          (this.target = null),
            (this.filters = null),
            (this.renderTexture = null);
        }
      }
      const JA = [new zT(), new zT(), new zT(), new zT()],
        ZA = new KT();
      class QA {
        constructor(t) {
          (this.renderer = t),
            (this.defaultFilterStack = [{}]),
            (this.texturePool = new WA()),
            (this.statePool = []),
            (this.quad = new qA()),
            (this.quadUv = new $A()),
            (this.tempRect = new HT()),
            (this.activeState = {}),
            (this.globalUniforms = new SA(
              {
                outputFrame: new HT(),
                inputSize: new Float32Array(4),
                inputPixel: new Float32Array(4),
                inputClamp: new Float32Array(4),
                resolution: 1,
                filterArea: new Float32Array(4),
                filterClamp: new Float32Array(4),
              },
              !0
            )),
            (this.forceClear = !1),
            (this.useMaxPadding = !1);
        }
        init() {
          this.texturePool.setScreenSize(this.renderer.view);
        }
        push(t, e) {
          const i = this.renderer,
            r = this.defaultFilterStack,
            n = this.statePool.pop() || new KA(),
            o = i.renderTexture;
          let s, a;
          if (o.current) {
            const t = o.current;
            (s = t.resolution), (a = t.multisample);
          } else (s = i.resolution), (a = i.multisample);
          let h = e[0].resolution || s,
            u = e[0].multisample ?? a,
            l = e[0].padding,
            c = e[0].autoFit,
            d = e[0].legacy ?? !0;
          for (let t = 1; t < e.length; t++) {
            const i = e[t];
            (h = Math.min(h, i.resolution || s)),
              (u = Math.min(u, i.multisample ?? a)),
              (l = this.useMaxPadding ? Math.max(l, i.padding) : l + i.padding),
              (c = c && i.autoFit),
              (d = d || (i.legacy ?? !0));
          }
          1 === r.length &&
            (this.defaultFilterStack[0].renderTexture = o.current),
            r.push(n),
            (n.resolution = h),
            (n.multisample = u),
            (n.legacy = d),
            (n.target = t),
            n.sourceFrame.copyFrom(t.filterArea || t.getBounds(!0)),
            n.sourceFrame.pad(l);
          const p = this.tempRect.copyFrom(o.sourceFrame);
          i.projection.transform &&
            this.transformAABB(ZA.copyFrom(i.projection.transform).invert(), p),
            c
              ? (n.sourceFrame.fit(p),
                (n.sourceFrame.width <= 0 || n.sourceFrame.height <= 0) &&
                  ((n.sourceFrame.width = 0), (n.sourceFrame.height = 0)))
              : n.sourceFrame.intersects(p) ||
                ((n.sourceFrame.width = 0), (n.sourceFrame.height = 0)),
            this.roundFrame(
              n.sourceFrame,
              o.current ? o.current.resolution : i.resolution,
              o.sourceFrame,
              o.destinationFrame,
              i.projection.transform
            ),
            (n.renderTexture = this.getOptimalFilterTexture(
              n.sourceFrame.width,
              n.sourceFrame.height,
              h,
              u
            )),
            (n.filters = e),
            (n.destinationFrame.width = n.renderTexture.width),
            (n.destinationFrame.height = n.renderTexture.height);
          const _ = this.tempRect;
          (_.x = 0),
            (_.y = 0),
            (_.width = n.sourceFrame.width),
            (_.height = n.sourceFrame.height),
            (n.renderTexture.filterFrame = n.sourceFrame),
            n.bindingSourceFrame.copyFrom(o.sourceFrame),
            n.bindingDestinationFrame.copyFrom(o.destinationFrame),
            (n.transform = i.projection.transform),
            (i.projection.transform = null),
            o.bind(n.renderTexture, n.sourceFrame, _),
            i.framebuffer.clear(0, 0, 0, 0);
        }
        pop() {
          const t = this.defaultFilterStack,
            e = t.pop(),
            i = e.filters;
          this.activeState = e;
          const r = this.globalUniforms.uniforms;
          (r.outputFrame = e.sourceFrame), (r.resolution = e.resolution);
          const n = r.inputSize,
            o = r.inputPixel,
            s = r.inputClamp;
          if (
            ((n[0] = e.destinationFrame.width),
            (n[1] = e.destinationFrame.height),
            (n[2] = 1 / n[0]),
            (n[3] = 1 / n[1]),
            (o[0] = Math.round(n[0] * e.resolution)),
            (o[1] = Math.round(n[1] * e.resolution)),
            (o[2] = 1 / o[0]),
            (o[3] = 1 / o[1]),
            (s[0] = 0.5 * o[2]),
            (s[1] = 0.5 * o[3]),
            (s[2] = e.sourceFrame.width * n[2] - 0.5 * o[2]),
            (s[3] = e.sourceFrame.height * n[3] - 0.5 * o[3]),
            e.legacy)
          ) {
            const t = r.filterArea;
            (t[0] = e.destinationFrame.width),
              (t[1] = e.destinationFrame.height),
              (t[2] = e.sourceFrame.x),
              (t[3] = e.sourceFrame.y),
              (r.filterClamp = r.inputClamp);
          }
          this.globalUniforms.update();
          const a = t[t.length - 1];
          if ((this.renderer.framebuffer.blit(), 1 === i.length))
            i[0].apply(this, e.renderTexture, a.renderTexture, Zx.BLEND, e),
              this.returnFilterTexture(e.renderTexture);
          else {
            let t = e.renderTexture,
              r = this.getOptimalFilterTexture(t.width, t.height, e.resolution);
            r.filterFrame = t.filterFrame;
            let n = 0;
            for (n = 0; n < i.length - 1; ++n) {
              1 === n &&
                e.multisample > 1 &&
                ((r = this.getOptimalFilterTexture(
                  t.width,
                  t.height,
                  e.resolution
                )),
                (r.filterFrame = t.filterFrame)),
                i[n].apply(this, t, r, Zx.CLEAR, e);
              const o = t;
              (t = r), (r = o);
            }
            i[n].apply(this, t, a.renderTexture, Zx.BLEND, e),
              n > 1 &&
                e.multisample > 1 &&
                this.returnFilterTexture(e.renderTexture),
              this.returnFilterTexture(t),
              this.returnFilterTexture(r);
          }
          e.clear(), this.statePool.push(e);
        }
        bindAndClear(t, e = Zx.CLEAR) {
          const { renderTexture: i, state: r } = this.renderer;
          if (
            (t ===
            this.defaultFilterStack[this.defaultFilterStack.length - 1]
              .renderTexture
              ? (this.renderer.projection.transform =
                  this.activeState.transform)
              : (this.renderer.projection.transform = null),
            t?.filterFrame)
          ) {
            const e = this.tempRect;
            (e.x = 0),
              (e.y = 0),
              (e.width = t.filterFrame.width),
              (e.height = t.filterFrame.height),
              i.bind(t, t.filterFrame, e);
          } else
            t !==
            this.defaultFilterStack[this.defaultFilterStack.length - 1]
              .renderTexture
              ? i.bind(t)
              : this.renderer.renderTexture.bind(
                  t,
                  this.activeState.bindingSourceFrame,
                  this.activeState.bindingDestinationFrame
                );
          const n = 1 & r.stateId || this.forceClear;
          (e === Zx.CLEAR || (e === Zx.BLIT && n)) &&
            this.renderer.framebuffer.clear(0, 0, 0, 0);
        }
        applyFilter(t, e, i, r) {
          const n = this.renderer;
          n.state.set(t.state),
            this.bindAndClear(i, r),
            (t.uniforms.uSampler = e),
            (t.uniforms.filterGlobals = this.globalUniforms),
            n.shader.bind(t),
            (t.legacy = !!t.program.attributeData.aTextureCoord),
            t.legacy
              ? (this.quadUv.map(e._frame, e.filterFrame),
                n.geometry.bind(this.quadUv),
                n.geometry.draw(zx.TRIANGLES))
              : (n.geometry.bind(this.quad),
                n.geometry.draw(zx.TRIANGLE_STRIP));
        }
        calculateSpriteMatrix(t, e) {
          const { sourceFrame: i, destinationFrame: r } = this.activeState,
            { orig: n } = e._texture,
            o = t.set(r.width, 0, 0, r.height, i.x, i.y),
            s = e.worldTransform.copyTo(KT.TEMP_MATRIX);
          return (
            s.invert(),
            o.prepend(s),
            o.scale(1 / n.width, 1 / n.height),
            o.translate(e.anchor.x, e.anchor.y),
            o
          );
        }
        destroy() {
          (this.renderer = null), this.texturePool.clear(!1);
        }
        getOptimalFilterTexture(t, e, i = 1, r = iw.NONE) {
          return this.texturePool.getOptimalTexture(t, e, i, r);
        }
        getFilterTexture(t, e, i) {
          if ("number" == typeof t) {
            const i = t;
            (t = e), (e = i);
          }
          t = t || this.activeState.renderTexture;
          const r = this.texturePool.getOptimalTexture(
            t.width,
            t.height,
            e || t.resolution,
            i || iw.NONE
          );
          return (r.filterFrame = t.filterFrame), r;
        }
        returnFilterTexture(t) {
          this.texturePool.returnTexture(t);
        }
        emptyPool() {
          this.texturePool.clear(!0);
        }
        resize() {
          this.texturePool.setScreenSize(this.renderer.view);
        }
        transformAABB(t, e) {
          const i = JA[0],
            r = JA[1],
            n = JA[2],
            o = JA[3];
          i.set(e.left, e.top),
            r.set(e.left, e.bottom),
            n.set(e.right, e.top),
            o.set(e.right, e.bottom),
            t.apply(i, i),
            t.apply(r, r),
            t.apply(n, n),
            t.apply(o, o);
          const s = Math.min(i.x, r.x, n.x, o.x),
            a = Math.min(i.y, r.y, n.y, o.y),
            h = Math.max(i.x, r.x, n.x, o.x),
            u = Math.max(i.y, r.y, n.y, o.y);
          (e.x = s), (e.y = a), (e.width = h - s), (e.height = u - a);
        }
        roundFrame(t, e, i, r, n) {
          if (
            !(t.width <= 0 || t.height <= 0 || i.width <= 0 || i.height <= 0)
          ) {
            if (n) {
              const { a: t, b: e, c: i, d: r } = n;
              if (
                (Math.abs(e) > 1e-4 || Math.abs(i) > 1e-4) &&
                (Math.abs(t) > 1e-4 || Math.abs(r) > 1e-4)
              )
                return;
            }
            (n = n ? ZA.copyFrom(n) : ZA.identity())
              .translate(-i.x, -i.y)
              .scale(r.width / i.width, r.height / i.height)
              .translate(r.x, r.y),
              this.transformAABB(n, t),
              t.ceil(e),
              this.transformAABB(n.invert(), t);
          }
        }
      }
      (QA.extension = { type: fT.RendererSystem, name: "filter" }), gT.add(QA);
      class tS {
        constructor(t) {
          (this.framebuffer = t),
            (this.stencil = null),
            (this.dirtyId = -1),
            (this.dirtyFormat = -1),
            (this.dirtySize = -1),
            (this.multisample = iw.NONE),
            (this.msaaBuffer = null),
            (this.blitFramebuffer = null),
            (this.mipLevel = 0);
        }
      }
      const eS = new HT();
      class iS {
        constructor(t) {
          (this.renderer = t),
            (this.managedFramebuffers = []),
            (this.unknownFramebuffer = new LA(10, 10)),
            (this.msaaSamples = null);
        }
        contextChange() {
          this.disposeAll(!0);
          const t = (this.gl = this.renderer.gl);
          if (
            ((this.CONTEXT_UID = this.renderer.CONTEXT_UID),
            (this.current = this.unknownFramebuffer),
            (this.viewport = new HT()),
            (this.hasMRT = !0),
            (this.writeDepthTexture = !0),
            1 === this.renderer.context.webGLVersion)
          ) {
            let e = this.renderer.context.extensions.drawBuffers,
              i = this.renderer.context.extensions.depthTexture;
            ow.PREFER_ENV === Ux.WEBGL_LEGACY && ((e = null), (i = null)),
              e
                ? (t.drawBuffers = (t) => e.drawBuffersWEBGL(t))
                : ((this.hasMRT = !1), (t.drawBuffers = () => {})),
              i || (this.writeDepthTexture = !1);
          } else
            this.msaaSamples = t.getInternalformatParameter(
              t.RENDERBUFFER,
              t.RGBA8,
              t.SAMPLES
            );
        }
        bind(t, e, i = 0) {
          const { gl: r } = this;
          if (t) {
            const n =
              t.glFramebuffers[this.CONTEXT_UID] || this.initFramebuffer(t);
            this.current !== t &&
              ((this.current = t),
              r.bindFramebuffer(r.FRAMEBUFFER, n.framebuffer)),
              n.mipLevel !== i &&
                (t.dirtyId++, t.dirtyFormat++, (n.mipLevel = i)),
              n.dirtyId !== t.dirtyId &&
                ((n.dirtyId = t.dirtyId),
                n.dirtyFormat !== t.dirtyFormat
                  ? ((n.dirtyFormat = t.dirtyFormat),
                    (n.dirtySize = t.dirtySize),
                    this.updateFramebuffer(t, i))
                  : n.dirtySize !== t.dirtySize &&
                    ((n.dirtySize = t.dirtySize), this.resizeFramebuffer(t)));
            for (let e = 0; e < t.colorTextures.length; e++) {
              const i = t.colorTextures[e];
              this.renderer.texture.unbind(i.parentTextureArray || i);
            }
            if (
              (t.depthTexture && this.renderer.texture.unbind(t.depthTexture),
              e)
            ) {
              const t = e.width >> i,
                r = e.height >> i,
                n = t / e.width;
              this.setViewport(e.x * n, e.y * n, t, r);
            } else {
              const e = t.width >> i,
                r = t.height >> i;
              this.setViewport(0, 0, e, r);
            }
          } else
            this.current &&
              ((this.current = null), r.bindFramebuffer(r.FRAMEBUFFER, null)),
              e
                ? this.setViewport(e.x, e.y, e.width, e.height)
                : this.setViewport(
                    0,
                    0,
                    this.renderer.width,
                    this.renderer.height
                  );
        }
        setViewport(t, e, i, r) {
          const n = this.viewport;
          (t = Math.round(t)),
            (e = Math.round(e)),
            (i = Math.round(i)),
            (r = Math.round(r)),
            (n.width !== i || n.height !== r || n.x !== t || n.y !== e) &&
              ((n.x = t),
              (n.y = e),
              (n.width = i),
              (n.height = r),
              this.gl.viewport(t, e, i, r));
        }
        get size() {
          return this.current
            ? {
                x: 0,
                y: 0,
                width: this.current.width,
                height: this.current.height,
              }
            : {
                x: 0,
                y: 0,
                width: this.renderer.width,
                height: this.renderer.height,
              };
        }
        clear(t, e, i, r, n = Vx.COLOR | Vx.DEPTH) {
          const { gl: o } = this;
          o.clearColor(t, e, i, r), o.clear(n);
        }
        initFramebuffer(t) {
          const { gl: e } = this,
            i = new tS(e.createFramebuffer());
          return (
            (i.multisample = this.detectSamples(t.multisample)),
            (t.glFramebuffers[this.CONTEXT_UID] = i),
            this.managedFramebuffers.push(t),
            t.disposeRunner.add(this),
            i
          );
        }
        resizeFramebuffer(t) {
          const { gl: e } = this,
            i = t.glFramebuffers[this.CONTEXT_UID];
          if (i.stencil) {
            let r;
            e.bindRenderbuffer(e.RENDERBUFFER, i.stencil),
              (r =
                1 === this.renderer.context.webGLVersion
                  ? e.DEPTH_STENCIL
                  : t.depth && t.stencil
                  ? e.DEPTH24_STENCIL8
                  : t.depth
                  ? e.DEPTH_COMPONENT24
                  : e.STENCIL_INDEX8),
              i.msaaBuffer
                ? e.renderbufferStorageMultisample(
                    e.RENDERBUFFER,
                    i.multisample,
                    r,
                    t.width,
                    t.height
                  )
                : e.renderbufferStorage(e.RENDERBUFFER, r, t.width, t.height);
          }
          const r = t.colorTextures;
          let n = r.length;
          e.drawBuffers || (n = Math.min(n, 1));
          for (let o = 0; o < n; o++) {
            const n = r[o],
              s = n.parentTextureArray || n;
            this.renderer.texture.bind(s, 0),
              0 === o &&
                i.msaaBuffer &&
                (e.bindRenderbuffer(e.RENDERBUFFER, i.msaaBuffer),
                e.renderbufferStorageMultisample(
                  e.RENDERBUFFER,
                  i.multisample,
                  s._glTextures[this.CONTEXT_UID].internalFormat,
                  t.width,
                  t.height
                ));
          }
          t.depthTexture &&
            this.writeDepthTexture &&
            this.renderer.texture.bind(t.depthTexture, 0);
        }
        updateFramebuffer(t, e) {
          const { gl: i } = this,
            r = t.glFramebuffers[this.CONTEXT_UID],
            n = t.colorTextures;
          let o = n.length;
          i.drawBuffers || (o = Math.min(o, 1)),
            r.multisample > 1 && this.canMultisampleFramebuffer(t)
              ? (r.msaaBuffer = r.msaaBuffer || i.createRenderbuffer())
              : r.msaaBuffer &&
                (i.deleteRenderbuffer(r.msaaBuffer),
                (r.msaaBuffer = null),
                r.blitFramebuffer &&
                  (r.blitFramebuffer.dispose(), (r.blitFramebuffer = null)));
          const s = [];
          for (let a = 0; a < o; a++) {
            const o = n[a],
              h = o.parentTextureArray || o;
            this.renderer.texture.bind(h, 0),
              0 === a && r.msaaBuffer
                ? (i.bindRenderbuffer(i.RENDERBUFFER, r.msaaBuffer),
                  i.renderbufferStorageMultisample(
                    i.RENDERBUFFER,
                    r.multisample,
                    h._glTextures[this.CONTEXT_UID].internalFormat,
                    t.width,
                    t.height
                  ),
                  i.framebufferRenderbuffer(
                    i.FRAMEBUFFER,
                    i.COLOR_ATTACHMENT0,
                    i.RENDERBUFFER,
                    r.msaaBuffer
                  ))
                : (i.framebufferTexture2D(
                    i.FRAMEBUFFER,
                    i.COLOR_ATTACHMENT0 + a,
                    o.target,
                    h._glTextures[this.CONTEXT_UID].texture,
                    e
                  ),
                  s.push(i.COLOR_ATTACHMENT0 + a));
          }
          if (
            (s.length > 1 && i.drawBuffers(s),
            t.depthTexture && this.writeDepthTexture)
          ) {
            const r = t.depthTexture;
            this.renderer.texture.bind(r, 0),
              i.framebufferTexture2D(
                i.FRAMEBUFFER,
                i.DEPTH_ATTACHMENT,
                i.TEXTURE_2D,
                r._glTextures[this.CONTEXT_UID].texture,
                e
              );
          }
          if (
            (!t.stencil && !t.depth) ||
            (t.depthTexture && this.writeDepthTexture)
          )
            r.stencil && (i.deleteRenderbuffer(r.stencil), (r.stencil = null));
          else {
            let e, n;
            (r.stencil = r.stencil || i.createRenderbuffer()),
              1 === this.renderer.context.webGLVersion
                ? ((e = i.DEPTH_STENCIL_ATTACHMENT), (n = i.DEPTH_STENCIL))
                : t.depth && t.stencil
                ? ((e = i.DEPTH_STENCIL_ATTACHMENT), (n = i.DEPTH24_STENCIL8))
                : t.depth
                ? ((e = i.DEPTH_ATTACHMENT), (n = i.DEPTH_COMPONENT24))
                : ((e = i.STENCIL_ATTACHMENT), (n = i.STENCIL_INDEX8)),
              i.bindRenderbuffer(i.RENDERBUFFER, r.stencil),
              r.msaaBuffer
                ? i.renderbufferStorageMultisample(
                    i.RENDERBUFFER,
                    r.multisample,
                    n,
                    t.width,
                    t.height
                  )
                : i.renderbufferStorage(i.RENDERBUFFER, n, t.width, t.height),
              i.framebufferRenderbuffer(
                i.FRAMEBUFFER,
                e,
                i.RENDERBUFFER,
                r.stencil
              );
          }
        }
        canMultisampleFramebuffer(t) {
          return (
            1 !== this.renderer.context.webGLVersion &&
            t.colorTextures.length <= 1 &&
            !t.depthTexture
          );
        }
        detectSamples(t) {
          const { msaaSamples: e } = this;
          let i = iw.NONE;
          if (t <= 1 || null === e) return i;
          for (let r = 0; r < e.length; r++)
            if (e[r] <= t) {
              i = e[r];
              break;
            }
          return 1 === i && (i = iw.NONE), i;
        }
        blit(t, e, i) {
          const { current: r, renderer: n, gl: o, CONTEXT_UID: s } = this;
          if (2 !== n.context.webGLVersion || !r) return;
          const a = r.glFramebuffers[s];
          if (!a) return;
          if (!t) {
            if (!a.msaaBuffer) return;
            const e = r.colorTextures[0];
            if (!e) return;
            a.blitFramebuffer ||
              ((a.blitFramebuffer = new LA(r.width, r.height)),
              a.blitFramebuffer.addColorTexture(0, e)),
              (t = a.blitFramebuffer).colorTextures[0] !== e &&
                ((t.colorTextures[0] = e), t.dirtyId++, t.dirtyFormat++),
              (t.width !== r.width || t.height !== r.height) &&
                ((t.width = r.width),
                (t.height = r.height),
                t.dirtyId++,
                t.dirtySize++);
          }
          e || (((e = eS).width = r.width), (e.height = r.height)),
            i || (i = e);
          const h = e.width === i.width && e.height === i.height;
          this.bind(t),
            o.bindFramebuffer(o.READ_FRAMEBUFFER, a.framebuffer),
            o.blitFramebuffer(
              e.left,
              e.top,
              e.right,
              e.bottom,
              i.left,
              i.top,
              i.right,
              i.bottom,
              o.COLOR_BUFFER_BIT,
              h ? o.NEAREST : o.LINEAR
            ),
            o.bindFramebuffer(
              o.READ_FRAMEBUFFER,
              t.glFramebuffers[this.CONTEXT_UID].framebuffer
            );
        }
        disposeFramebuffer(t, e) {
          const i = t.glFramebuffers[this.CONTEXT_UID],
            r = this.gl;
          if (!i) return;
          delete t.glFramebuffers[this.CONTEXT_UID];
          const n = this.managedFramebuffers.indexOf(t);
          n >= 0 && this.managedFramebuffers.splice(n, 1),
            t.disposeRunner.remove(this),
            e ||
              (r.deleteFramebuffer(i.framebuffer),
              i.msaaBuffer && r.deleteRenderbuffer(i.msaaBuffer),
              i.stencil && r.deleteRenderbuffer(i.stencil)),
            i.blitFramebuffer && this.disposeFramebuffer(i.blitFramebuffer, e);
        }
        disposeAll(t) {
          const e = this.managedFramebuffers;
          this.managedFramebuffers = [];
          for (let i = 0; i < e.length; i++) this.disposeFramebuffer(e[i], t);
        }
        forceStencil() {
          const t = this.current;
          if (!t) return;
          const e = t.glFramebuffers[this.CONTEXT_UID];
          if (!e || (e.stencil && t.stencil)) return;
          t.stencil = !0;
          const i = t.width,
            r = t.height,
            n = this.gl,
            o = (e.stencil = n.createRenderbuffer());
          let s, a;
          n.bindRenderbuffer(n.RENDERBUFFER, o),
            1 === this.renderer.context.webGLVersion
              ? ((s = n.DEPTH_STENCIL_ATTACHMENT), (a = n.DEPTH_STENCIL))
              : t.depth
              ? ((s = n.DEPTH_STENCIL_ATTACHMENT), (a = n.DEPTH24_STENCIL8))
              : ((s = n.STENCIL_ATTACHMENT), (a = n.STENCIL_INDEX8)),
            e.msaaBuffer
              ? n.renderbufferStorageMultisample(
                  n.RENDERBUFFER,
                  e.multisample,
                  a,
                  i,
                  r
                )
              : n.renderbufferStorage(n.RENDERBUFFER, a, i, r),
            n.framebufferRenderbuffer(n.FRAMEBUFFER, s, n.RENDERBUFFER, o);
        }
        reset() {
          (this.current = this.unknownFramebuffer), (this.viewport = new HT());
        }
        destroy() {
          this.renderer = null;
        }
      }
      (iS.extension = { type: fT.RendererSystem, name: "framebuffer" }),
        gT.add(iS);
      const rS = { 5126: 4, 5123: 2, 5121: 1 };
      class nS {
        constructor(t) {
          (this.renderer = t),
            (this._activeGeometry = null),
            (this._activeVao = null),
            (this.hasVao = !0),
            (this.hasInstance = !0),
            (this.canUseUInt32ElementIndex = !1),
            (this.managedGeometries = {});
        }
        contextChange() {
          this.disposeAll(!0);
          const t = (this.gl = this.renderer.gl),
            e = this.renderer.context;
          if (
            ((this.CONTEXT_UID = this.renderer.CONTEXT_UID),
            2 !== e.webGLVersion)
          ) {
            let e = this.renderer.context.extensions.vertexArrayObject;
            ow.PREFER_ENV === Ux.WEBGL_LEGACY && (e = null),
              e
                ? ((t.createVertexArray = () => e.createVertexArrayOES()),
                  (t.bindVertexArray = (t) => e.bindVertexArrayOES(t)),
                  (t.deleteVertexArray = (t) => e.deleteVertexArrayOES(t)))
                : ((this.hasVao = !1),
                  (t.createVertexArray = () => null),
                  (t.bindVertexArray = () => null),
                  (t.deleteVertexArray = () => null));
          }
          if (2 !== e.webGLVersion) {
            const e = t.getExtension("ANGLE_instanced_arrays");
            e
              ? ((t.vertexAttribDivisor = (t, i) =>
                  e.vertexAttribDivisorANGLE(t, i)),
                (t.drawElementsInstanced = (t, i, r, n, o) =>
                  e.drawElementsInstancedANGLE(t, i, r, n, o)),
                (t.drawArraysInstanced = (t, i, r, n) =>
                  e.drawArraysInstancedANGLE(t, i, r, n)))
              : (this.hasInstance = !1);
          }
          this.canUseUInt32ElementIndex =
            2 === e.webGLVersion || !!e.extensions.uint32ElementIndex;
        }
        bind(t, e) {
          e = e || this.renderer.shader.shader;
          const { gl: i } = this;
          let r = t.glVertexArrayObjects[this.CONTEXT_UID],
            n = !1;
          r ||
            ((this.managedGeometries[t.id] = t),
            t.disposeRunner.add(this),
            (t.glVertexArrayObjects[this.CONTEXT_UID] = r = {}),
            (n = !0));
          const o = r[e.program.id] || this.initGeometryVao(t, e, n);
          (this._activeGeometry = t),
            this._activeVao !== o &&
              ((this._activeVao = o),
              this.hasVao
                ? i.bindVertexArray(o)
                : this.activateVao(t, e.program)),
            this.updateBuffers();
        }
        reset() {
          this.unbind();
        }
        updateBuffers() {
          const t = this._activeGeometry,
            e = this.renderer.buffer;
          for (let i = 0; i < t.buffers.length; i++) {
            const r = t.buffers[i];
            e.update(r);
          }
        }
        checkCompatibility(t, e) {
          const i = t.attributes,
            r = e.attributeData;
          for (const t in r)
            if (!i[t])
              throw new Error(
                `shader and geometry incompatible, geometry missing the "${t}" attribute`
              );
        }
        getSignature(t, e) {
          const i = t.attributes,
            r = e.attributeData,
            n = ["g", t.id];
          for (const t in i) r[t] && n.push(t, r[t].location);
          return n.join("-");
        }
        initGeometryVao(t, e, i = !0) {
          const r = this.gl,
            n = this.CONTEXT_UID,
            o = this.renderer.buffer,
            s = e.program;
          s.glPrograms[n] || this.renderer.shader.generateProgram(e),
            this.checkCompatibility(t, s);
          const a = this.getSignature(t, s),
            h = t.glVertexArrayObjects[this.CONTEXT_UID];
          let u = h[a];
          if (u) return (h[s.id] = u), u;
          const l = t.buffers,
            c = t.attributes,
            d = {},
            p = {};
          for (const t in l) (d[t] = 0), (p[t] = 0);
          for (const t in c)
            !c[t].size && s.attributeData[t]
              ? (c[t].size = s.attributeData[t].size)
              : c[t].size ||
                console.warn(
                  `PIXI Geometry attribute '${t}' size cannot be determined (likely the bound shader does not have the attribute)`
                ),
              (d[c[t].buffer] += c[t].size * rS[c[t].type]);
          for (const t in c) {
            const e = c[t],
              i = e.size;
            void 0 === e.stride &&
              (d[e.buffer] === i * rS[e.type]
                ? (e.stride = 0)
                : (e.stride = d[e.buffer])),
              void 0 === e.start &&
                ((e.start = p[e.buffer]), (p[e.buffer] += i * rS[e.type]));
          }
          (u = r.createVertexArray()), r.bindVertexArray(u);
          for (let t = 0; t < l.length; t++) {
            const e = l[t];
            o.bind(e), i && e._glBuffers[n].refCount++;
          }
          return (
            this.activateVao(t, s),
            (h[s.id] = u),
            (h[a] = u),
            r.bindVertexArray(null),
            o.unbind(rw.ARRAY_BUFFER),
            u
          );
        }
        disposeGeometry(t, e) {
          if (!this.managedGeometries[t.id]) return;
          delete this.managedGeometries[t.id];
          const i = t.glVertexArrayObjects[this.CONTEXT_UID],
            r = this.gl,
            n = t.buffers,
            o = this.renderer?.buffer;
          if ((t.disposeRunner.remove(this), i)) {
            if (o)
              for (let t = 0; t < n.length; t++) {
                const i = n[t]._glBuffers[this.CONTEXT_UID];
                i &&
                  (i.refCount--, 0 === i.refCount && !e && o.dispose(n[t], e));
              }
            if (!e)
              for (const t in i)
                if ("g" === t[0]) {
                  const e = i[t];
                  this._activeVao === e && this.unbind(),
                    r.deleteVertexArray(e);
                }
            delete t.glVertexArrayObjects[this.CONTEXT_UID];
          }
        }
        disposeAll(t) {
          const e = Object.keys(this.managedGeometries);
          for (let i = 0; i < e.length; i++)
            this.disposeGeometry(this.managedGeometries[e[i]], t);
        }
        activateVao(t, e) {
          const i = this.gl,
            r = this.CONTEXT_UID,
            n = this.renderer.buffer,
            o = t.buffers,
            s = t.attributes;
          t.indexBuffer && n.bind(t.indexBuffer);
          let a = null;
          for (const t in s) {
            const h = s[t],
              u = o[h.buffer],
              l = u._glBuffers[r];
            if (e.attributeData[t]) {
              a !== l && (n.bind(u), (a = l));
              const r = e.attributeData[t].location;
              if (
                (i.enableVertexAttribArray(r),
                i.vertexAttribPointer(
                  r,
                  h.size,
                  h.type || i.FLOAT,
                  h.normalized,
                  h.stride,
                  h.start
                ),
                h.instance)
              ) {
                if (!this.hasInstance)
                  throw new Error(
                    "geometry error, GPU Instancing is not supported on this device"
                  );
                i.vertexAttribDivisor(r, h.divisor);
              }
            }
          }
        }
        draw(t, e, i, r) {
          const { gl: n } = this,
            o = this._activeGeometry;
          if (o.indexBuffer) {
            const s = o.indexBuffer.data.BYTES_PER_ELEMENT,
              a = 2 === s ? n.UNSIGNED_SHORT : n.UNSIGNED_INT;
            2 === s || (4 === s && this.canUseUInt32ElementIndex)
              ? o.instanced
                ? n.drawElementsInstanced(
                    t,
                    e || o.indexBuffer.data.length,
                    a,
                    (i || 0) * s,
                    r || 1
                  )
                : n.drawElements(
                    t,
                    e || o.indexBuffer.data.length,
                    a,
                    (i || 0) * s
                  )
              : console.warn("unsupported index buffer type: uint32");
          } else
            o.instanced
              ? n.drawArraysInstanced(t, i, e || o.getSize(), r || 1)
              : n.drawArrays(t, i, e || o.getSize());
          return this;
        }
        unbind() {
          this.gl.bindVertexArray(null),
            (this._activeVao = null),
            (this._activeGeometry = null);
        }
        destroy() {
          this.renderer = null;
        }
      }
      (nS.extension = { type: fT.RendererSystem, name: "geometry" }),
        gT.add(nS);
      const oS = new KT();
      class sS {
        constructor(t, e) {
          (this._texture = t),
            (this.mapCoord = new KT()),
            (this.uClampFrame = new Float32Array(4)),
            (this.uClampOffset = new Float32Array(2)),
            (this._textureID = -1),
            (this._updateID = 0),
            (this.clampOffset = 0),
            (this.clampMargin = typeof e > "u" ? 0.5 : e),
            (this.isSimple = !1);
        }
        get texture() {
          return this._texture;
        }
        set texture(t) {
          (this._texture = t), (this._textureID = -1);
        }
        multiplyUvs(t, e) {
          void 0 === e && (e = t);
          const i = this.mapCoord;
          for (let r = 0; r < t.length; r += 2) {
            const n = t[r],
              o = t[r + 1];
            (e[r] = n * i.a + o * i.c + i.tx),
              (e[r + 1] = n * i.b + o * i.d + i.ty);
          }
          return e;
        }
        update(t) {
          const e = this._texture;
          if (!e || !e.valid || (!t && this._textureID === e._updateID))
            return !1;
          (this._textureID = e._updateID), this._updateID++;
          const i = e._uvs;
          this.mapCoord.set(
            i.x1 - i.x0,
            i.y1 - i.y0,
            i.x3 - i.x0,
            i.y3 - i.y0,
            i.x0,
            i.y0
          );
          const r = e.orig,
            n = e.trim;
          n &&
            (oS.set(
              r.width / n.width,
              0,
              0,
              r.height / n.height,
              -n.x / n.width,
              -n.y / n.height
            ),
            this.mapCoord.append(oS));
          const o = e.baseTexture,
            s = this.uClampFrame,
            a = this.clampMargin / o.resolution,
            h = this.clampOffset;
          return (
            (s[0] = (e._frame.x + a + h) / o.width),
            (s[1] = (e._frame.y + a + h) / o.height),
            (s[2] = (e._frame.x + e._frame.width - a + h) / o.width),
            (s[3] = (e._frame.y + e._frame.height - a + h) / o.height),
            (this.uClampOffset[0] = h / o.realWidth),
            (this.uClampOffset[1] = h / o.realHeight),
            (this.isSimple =
              e._frame.width === o.width &&
              e._frame.height === o.height &&
              0 === e.rotate),
            !0
          );
        }
      }
      class aS extends IA {
        constructor(t, e, i) {
          let r = null;
          "string" != typeof t &&
            void 0 === e &&
            void 0 === i &&
            ((r = t), (t = void 0), (e = void 0), (i = void 0)),
            super(
              t ||
                "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",
              e ||
                "varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",
              i
            ),
            (this.maskSprite = r),
            (this.maskMatrix = new KT());
        }
        get maskSprite() {
          return this._maskSprite;
        }
        set maskSprite(t) {
          (this._maskSprite = t),
            this._maskSprite && (this._maskSprite.renderable = !1);
        }
        apply(t, e, i, r) {
          const n = this._maskSprite,
            o = n._texture;
          o.valid &&
            (o.uvMatrix || (o.uvMatrix = new sS(o, 0)),
            o.uvMatrix.update(),
            (this.uniforms.npmAlpha = o.baseTexture.alphaMode ? 0 : 1),
            (this.uniforms.mask = o),
            (this.uniforms.otherMatrix = t
              .calculateSpriteMatrix(this.maskMatrix, n)
              .prepend(o.uvMatrix.mapCoord)),
            (this.uniforms.alpha = n.worldAlpha),
            (this.uniforms.maskClamp = o.uvMatrix.uClampFrame),
            t.applyFilter(this, e, i, r));
        }
      }
      class hS {
        constructor(t = null) {
          (this.type = ew.NONE),
            (this.autoDetect = !0),
            (this.maskObject = t || null),
            (this.pooled = !1),
            (this.isMaskData = !0),
            (this.resolution = null),
            (this.multisample = IA.defaultMultisample),
            (this.enabled = !0),
            (this.colorMask = 15),
            (this._filters = null),
            (this._stencilCounter = 0),
            (this._scissorCounter = 0),
            (this._scissorRect = null),
            (this._scissorRectLocal = null),
            (this._colorMask = 15),
            (this._target = null);
        }
        get filter() {
          return this._filters ? this._filters[0] : null;
        }
        set filter(t) {
          t
            ? this._filters
              ? (this._filters[0] = t)
              : (this._filters = [t])
            : (this._filters = null);
        }
        reset() {
          this.pooled &&
            ((this.maskObject = null),
            (this.type = ew.NONE),
            (this.autoDetect = !0)),
            (this._target = null),
            (this._scissorRectLocal = null);
        }
        copyCountersOrReset(t) {
          t
            ? ((this._stencilCounter = t._stencilCounter),
              (this._scissorCounter = t._scissorCounter),
              (this._scissorRect = t._scissorRect))
            : ((this._stencilCounter = 0),
              (this._scissorCounter = 0),
              (this._scissorRect = null));
        }
      }
      class uS {
        constructor(t) {
          (this.renderer = t),
            (this.enableScissor = !0),
            (this.alphaMaskPool = []),
            (this.maskDataPool = []),
            (this.maskStack = []),
            (this.alphaMaskIndex = 0);
        }
        setMaskStack(t) {
          (this.maskStack = t),
            this.renderer.scissor.setMaskStack(t),
            this.renderer.stencil.setMaskStack(t);
        }
        push(t, e) {
          let i = e;
          if (!i.isMaskData) {
            const t = this.maskDataPool.pop() || new hS();
            (t.pooled = !0), (t.maskObject = e), (i = t);
          }
          const r =
            0 !== this.maskStack.length
              ? this.maskStack[this.maskStack.length - 1]
              : null;
          if (
            (i.copyCountersOrReset(r),
            (i._colorMask = r ? r._colorMask : 15),
            i.autoDetect && this.detect(i),
            (i._target = t),
            i.type !== ew.SPRITE && this.maskStack.push(i),
            i.enabled)
          )
            switch (i.type) {
              case ew.SCISSOR:
                this.renderer.scissor.push(i);
                break;
              case ew.STENCIL:
                this.renderer.stencil.push(i);
                break;
              case ew.SPRITE:
                i.copyCountersOrReset(null), this.pushSpriteMask(i);
                break;
              case ew.COLOR:
                this.pushColorMask(i);
            }
          i.type === ew.SPRITE && this.maskStack.push(i);
        }
        pop(t) {
          const e = this.maskStack.pop();
          if (e && e._target === t) {
            if (e.enabled)
              switch (e.type) {
                case ew.SCISSOR:
                  this.renderer.scissor.pop(e);
                  break;
                case ew.STENCIL:
                  this.renderer.stencil.pop(e.maskObject);
                  break;
                case ew.SPRITE:
                  this.popSpriteMask(e);
                  break;
                case ew.COLOR:
                  this.popColorMask(e);
              }
            if (
              (e.reset(),
              e.pooled && this.maskDataPool.push(e),
              0 !== this.maskStack.length)
            ) {
              const t = this.maskStack[this.maskStack.length - 1];
              t.type === ew.SPRITE &&
                t._filters &&
                (t._filters[0].maskSprite = t.maskObject);
            }
          }
        }
        detect(t) {
          const e = t.maskObject;
          e
            ? e.isSprite
              ? (t.type = ew.SPRITE)
              : this.enableScissor && this.renderer.scissor.testScissor(t)
              ? (t.type = ew.SCISSOR)
              : (t.type = ew.STENCIL)
            : (t.type = ew.COLOR);
        }
        pushSpriteMask(t) {
          const { maskObject: e } = t,
            i = t._target;
          let r = t._filters;
          r ||
            ((r = this.alphaMaskPool[this.alphaMaskIndex]),
            r || (r = this.alphaMaskPool[this.alphaMaskIndex] = [new aS()])),
            (r[0].resolution = t.resolution),
            (r[0].multisample = t.multisample),
            (r[0].maskSprite = e);
          const n = i.filterArea;
          (i.filterArea = e.getBounds(!0)),
            this.renderer.filter.push(i, r),
            (i.filterArea = n),
            t._filters || this.alphaMaskIndex++;
        }
        popSpriteMask(t) {
          this.renderer.filter.pop(),
            t._filters
              ? (t._filters[0].maskSprite = null)
              : (this.alphaMaskIndex--,
                (this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite = null));
        }
        pushColorMask(t) {
          const e = t._colorMask,
            i = (t._colorMask = e & t.colorMask);
          i !== e &&
            this.renderer.gl.colorMask(
              !!(1 & i),
              !!(2 & i),
              !!(4 & i),
              !!(8 & i)
            );
        }
        popColorMask(t) {
          const e = t._colorMask,
            i =
              this.maskStack.length > 0
                ? this.maskStack[this.maskStack.length - 1]._colorMask
                : 15;
          i !== e &&
            this.renderer.gl.colorMask(
              !!(1 & i),
              !!(2 & i),
              !!(4 & i),
              !!(8 & i)
            );
        }
        destroy() {
          this.renderer = null;
        }
      }
      (uS.extension = { type: fT.RendererSystem, name: "mask" }), gT.add(uS);
      class lS {
        constructor(t) {
          (this.renderer = t), (this.maskStack = []), (this.glConst = 0);
        }
        getStackLength() {
          return this.maskStack.length;
        }
        setMaskStack(t) {
          const { gl: e } = this.renderer,
            i = this.getStackLength();
          this.maskStack = t;
          const r = this.getStackLength();
          r !== i &&
            (0 === r
              ? e.disable(this.glConst)
              : (e.enable(this.glConst), this._useCurrent()));
        }
        _useCurrent() {}
        destroy() {
          (this.renderer = null), (this.maskStack = null);
        }
      }
      const cS = new KT(),
        dS = [],
        pS = class t extends lS {
          constructor(t) {
            super(t),
              (this.glConst =
                ow.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST);
          }
          getStackLength() {
            const t = this.maskStack[this.maskStack.length - 1];
            return t ? t._scissorCounter : 0;
          }
          calcScissorRect(t) {
            if (t._scissorRectLocal) return;
            const e = t._scissorRect,
              { maskObject: i } = t,
              { renderer: r } = this,
              n = r.renderTexture,
              o = i.getBounds(!0, dS.pop() ?? new HT());
            this.roundFrameToPixels(
              o,
              n.current ? n.current.resolution : r.resolution,
              n.sourceFrame,
              n.destinationFrame,
              r.projection.transform
            ),
              e && o.fit(e),
              (t._scissorRectLocal = o);
          }
          static isMatrixRotated(t) {
            if (!t) return !1;
            const { a: e, b: i, c: r, d: n } = t;
            return (
              (Math.abs(i) > 1e-4 || Math.abs(r) > 1e-4) &&
              (Math.abs(e) > 1e-4 || Math.abs(n) > 1e-4)
            );
          }
          testScissor(e) {
            const { maskObject: i } = e;
            if (
              !i.isFastRect ||
              !i.isFastRect() ||
              t.isMatrixRotated(i.worldTransform) ||
              t.isMatrixRotated(this.renderer.projection.transform)
            )
              return !1;
            this.calcScissorRect(e);
            const r = e._scissorRectLocal;
            return r.width > 0 && r.height > 0;
          }
          roundFrameToPixels(e, i, r, n, o) {
            t.isMatrixRotated(o) ||
              ((o = o ? cS.copyFrom(o) : cS.identity())
                .translate(-r.x, -r.y)
                .scale(n.width / r.width, n.height / r.height)
                .translate(n.x, n.y),
              this.renderer.filter.transformAABB(o, e),
              e.fit(n),
              (e.x = Math.round(e.x * i)),
              (e.y = Math.round(e.y * i)),
              (e.width = Math.round(e.width * i)),
              (e.height = Math.round(e.height * i)));
          }
          push(t) {
            t._scissorRectLocal || this.calcScissorRect(t);
            const { gl: e } = this.renderer;
            t._scissorRect || e.enable(e.SCISSOR_TEST),
              t._scissorCounter++,
              (t._scissorRect = t._scissorRectLocal),
              this._useCurrent();
          }
          pop(t) {
            const { gl: e } = this.renderer;
            t && dS.push(t._scissorRectLocal),
              this.getStackLength() > 0
                ? this._useCurrent()
                : e.disable(e.SCISSOR_TEST);
          }
          _useCurrent() {
            const t = this.maskStack[this.maskStack.length - 1]._scissorRect;
            let e;
            (e = this.renderer.renderTexture.current
              ? t.y
              : this.renderer.height - t.height - t.y),
              this.renderer.gl.scissor(t.x, e, t.width, t.height);
          }
        };
      pS.extension = { type: fT.RendererSystem, name: "scissor" };
      let _S = pS;
      gT.add(_S);
      class fS extends lS {
        constructor(t) {
          super(t),
            (this.glConst = ow.ADAPTER.getWebGLRenderingContext().STENCIL_TEST);
        }
        getStackLength() {
          const t = this.maskStack[this.maskStack.length - 1];
          return t ? t._stencilCounter : 0;
        }
        push(t) {
          const e = t.maskObject,
            { gl: i } = this.renderer,
            r = t._stencilCounter;
          0 === r &&
            (this.renderer.framebuffer.forceStencil(),
            i.clearStencil(0),
            i.clear(i.STENCIL_BUFFER_BIT),
            i.enable(i.STENCIL_TEST)),
            t._stencilCounter++;
          const n = t._colorMask;
          0 !== n && ((t._colorMask = 0), i.colorMask(!1, !1, !1, !1)),
            i.stencilFunc(i.EQUAL, r, 4294967295),
            i.stencilOp(i.KEEP, i.KEEP, i.INCR),
            (e.renderable = !0),
            e.render(this.renderer),
            this.renderer.batch.flush(),
            (e.renderable = !1),
            0 !== n &&
              ((t._colorMask = n),
              i.colorMask(!!(1 & n), !!(2 & n), !!(4 & n), !!(8 & n))),
            this._useCurrent();
        }
        pop(t) {
          const e = this.renderer.gl;
          if (0 === this.getStackLength()) e.disable(e.STENCIL_TEST);
          else {
            const i =
                0 !== this.maskStack.length
                  ? this.maskStack[this.maskStack.length - 1]
                  : null,
              r = i ? i._colorMask : 15;
            0 !== r && ((i._colorMask = 0), e.colorMask(!1, !1, !1, !1)),
              e.stencilOp(e.KEEP, e.KEEP, e.DECR),
              (t.renderable = !0),
              t.render(this.renderer),
              this.renderer.batch.flush(),
              (t.renderable = !1),
              0 !== r &&
                ((i._colorMask = r),
                e.colorMask(!!(1 & r), !!(2 & r), !!(4 & r), !!(8 & r))),
              this._useCurrent();
          }
        }
        _useCurrent() {
          const t = this.renderer.gl;
          t.stencilFunc(t.EQUAL, this.getStackLength(), 4294967295),
            t.stencilOp(t.KEEP, t.KEEP, t.KEEP);
        }
      }
      (fS.extension = { type: fT.RendererSystem, name: "stencil" }), gT.add(fS);
      class mS {
        constructor(t) {
          (this.renderer = t),
            (this.plugins = {}),
            Object.defineProperties(this.plugins, {
              extract: {
                enumerable: !1,
                get: () => (
                  Ew(
                    "7.0.0",
                    "renderer.plugins.extract has moved to renderer.extract"
                  ),
                  t.extract
                ),
              },
              prepare: {
                enumerable: !1,
                get: () => (
                  Ew(
                    "7.0.0",
                    "renderer.plugins.prepare has moved to renderer.prepare"
                  ),
                  t.prepare
                ),
              },
              interaction: {
                enumerable: !1,
                get: () => (
                  Ew(
                    "7.0.0",
                    "renderer.plugins.interaction has been deprecated, use renderer.events"
                  ),
                  t.events
                ),
              },
            });
        }
        init() {
          const t = this.rendererPlugins;
          for (const e in t) this.plugins[e] = new t[e](this.renderer);
        }
        destroy() {
          for (const t in this.plugins)
            this.plugins[t].destroy(), (this.plugins[t] = null);
        }
      }
      (mS.extension = {
        type: [fT.RendererSystem, fT.CanvasRendererSystem],
        name: "_plugin",
      }),
        gT.add(mS);
      class yS {
        constructor(t) {
          (this.renderer = t),
            (this.destinationFrame = null),
            (this.sourceFrame = null),
            (this.defaultFrame = null),
            (this.projectionMatrix = new KT()),
            (this.transform = null);
        }
        update(t, e, i, r) {
          (this.destinationFrame =
            t || this.destinationFrame || this.defaultFrame),
            (this.sourceFrame = e || this.sourceFrame || t),
            this.calculateProjection(
              this.destinationFrame,
              this.sourceFrame,
              i,
              r
            ),
            this.transform && this.projectionMatrix.append(this.transform);
          const n = this.renderer;
          (n.globalUniforms.uniforms.projectionMatrix = this.projectionMatrix),
            n.globalUniforms.update(),
            n.shader.shader &&
              n.shader.syncUniformGroup(n.shader.shader.uniforms.globals);
        }
        calculateProjection(t, e, i, r) {
          const n = this.projectionMatrix,
            o = r ? -1 : 1;
          n.identity(),
            (n.a = (1 / e.width) * 2),
            (n.d = o * ((1 / e.height) * 2)),
            (n.tx = -1 - e.x * n.a),
            (n.ty = -o - e.y * n.d);
        }
        setTransform(t) {}
        destroy() {
          this.renderer = null;
        }
      }
      (yS.extension = { type: fT.RendererSystem, name: "projection" }),
        gT.add(yS);
      const gS = new aA(),
        vS = new HT();
      class bS {
        constructor(t) {
          (this.renderer = t), (this._tempMatrix = new KT());
        }
        generateTexture(t, e) {
          const { region: i, ...r } = e || {},
            n = i?.copyTo(vS) || t.getLocalBounds(vS, !0),
            o = r.resolution || this.renderer.resolution;
          (n.width = Math.max(n.width, 1 / o)),
            (n.height = Math.max(n.height, 1 / o)),
            (r.width = n.width),
            (r.height = n.height),
            (r.resolution = o),
            r.multisample ?? (r.multisample = this.renderer.multisample);
          const s = YA.create(r);
          (this._tempMatrix.tx = -n.x), (this._tempMatrix.ty = -n.y);
          const a = t.transform;
          return (
            (t.transform = gS),
            this.renderer.render(t, {
              renderTexture: s,
              transform: this._tempMatrix,
              skipUpdateTransform: !!t.parent,
              blit: !0,
            }),
            (t.transform = a),
            s
          );
        }
        destroy() {}
      }
      (bS.extension = {
        type: [fT.RendererSystem, fT.CanvasRendererSystem],
        name: "textureGenerator",
      }),
        gT.add(bS);
      const xS = new HT(),
        wS = new HT();
      class TS {
        constructor(t) {
          (this.renderer = t),
            (this.defaultMaskStack = []),
            (this.current = null),
            (this.sourceFrame = new HT()),
            (this.destinationFrame = new HT()),
            (this.viewportFrame = new HT());
        }
        contextChange() {
          const t = this.renderer?.gl.getContextAttributes();
          this._rendererPremultipliedAlpha = !!(
            t &&
            t.alpha &&
            t.premultipliedAlpha
          );
        }
        bind(t = null, e, i) {
          const r = this.renderer;
          let n, o, s;
          (this.current = t),
            t
              ? ((n = t.baseTexture),
                (s = n.resolution),
                e ||
                  ((xS.width = t.frame.width),
                  (xS.height = t.frame.height),
                  (e = xS)),
                i ||
                  ((wS.x = t.frame.x),
                  (wS.y = t.frame.y),
                  (wS.width = e.width),
                  (wS.height = e.height),
                  (i = wS)),
                (o = n.framebuffer))
              : ((s = r.resolution),
                e ||
                  ((xS.width = r._view.screen.width),
                  (xS.height = r._view.screen.height),
                  (e = xS)),
                i || (((i = xS).width = e.width), (i.height = e.height)));
          const a = this.viewportFrame;
          (a.x = i.x * s),
            (a.y = i.y * s),
            (a.width = i.width * s),
            (a.height = i.height * s),
            t || (a.y = r.view.height - (a.y + a.height)),
            a.ceil(),
            this.renderer.framebuffer.bind(o, a),
            this.renderer.projection.update(i, e, s, !o),
            t
              ? this.renderer.mask.setMaskStack(n.maskStack)
              : this.renderer.mask.setMaskStack(this.defaultMaskStack),
            this.sourceFrame.copyFrom(e),
            this.destinationFrame.copyFrom(i);
        }
        clear(t, e) {
          const i = this.current
              ? this.current.baseTexture.clear
              : this.renderer.background.backgroundColor,
            r = iT.shared.setValue(t || i);
          ((this.current && this.current.baseTexture.alphaMode > 0) ||
            (!this.current && this._rendererPremultipliedAlpha)) &&
            r.premultiply(r.alpha);
          const n = this.destinationFrame,
            o = this.current
              ? this.current.baseTexture
              : this.renderer._view.screen,
            s = n.width !== o.width || n.height !== o.height;
          if (s) {
            let { x: t, y: e, width: i, height: r } = this.viewportFrame;
            (t = Math.round(t)),
              (e = Math.round(e)),
              (i = Math.round(i)),
              (r = Math.round(r)),
              this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),
              this.renderer.gl.scissor(t, e, i, r);
          }
          this.renderer.framebuffer.clear(r.red, r.green, r.blue, r.alpha, e),
            s && this.renderer.scissor.pop();
        }
        resize() {
          this.bind(null);
        }
        reset() {
          this.bind(null);
        }
        destroy() {
          this.renderer = null;
        }
      }
      (TS.extension = { type: fT.RendererSystem, name: "renderTexture" }),
        gT.add(TS);
      class AS {
        constructor(t, e) {
          (this.program = t),
            (this.uniformData = e),
            (this.uniformGroups = {}),
            (this.uniformDirtyGroups = {}),
            (this.uniformBufferBindings = {});
        }
        destroy() {
          (this.uniformData = null),
            (this.uniformGroups = null),
            (this.uniformDirtyGroups = null),
            (this.uniformBufferBindings = null),
            (this.program = null);
        }
      }
      function SS(t, e, i) {
        const r = t.createShader(e);
        return t.shaderSource(r, i), t.compileShader(r), r;
      }
      function ES(t) {
        const e = new Array(t);
        for (let t = 0; t < e.length; t++) e[t] = !1;
        return e;
      }
      function CS(t, e) {
        switch (t) {
          case "float":
          case "int":
          case "uint":
          case "sampler2D":
          case "sampler2DArray":
            return 0;
          case "vec2":
            return new Float32Array(2 * e);
          case "vec3":
            return new Float32Array(3 * e);
          case "vec4":
            return new Float32Array(4 * e);
          case "ivec2":
            return new Int32Array(2 * e);
          case "ivec3":
            return new Int32Array(3 * e);
          case "ivec4":
            return new Int32Array(4 * e);
          case "uvec2":
            return new Uint32Array(2 * e);
          case "uvec3":
            return new Uint32Array(3 * e);
          case "uvec4":
            return new Uint32Array(4 * e);
          case "bool":
            return !1;
          case "bvec2":
            return ES(2 * e);
          case "bvec3":
            return ES(3 * e);
          case "bvec4":
            return ES(4 * e);
          case "mat2":
            return new Float32Array([1, 0, 0, 1]);
          case "mat3":
            return new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]);
          case "mat4":
            return new Float32Array([
              1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1,
            ]);
        }
        return null;
      }
      function MS(t, e) {
        const i = t
            .getShaderSource(e)
            .split("\n")
            .map((t, e) => `${e}: ${t}`),
          r = t.getShaderInfoLog(e),
          n = r.split("\n"),
          o = {},
          s = n
            .map((t) => parseFloat(t.replace(/^ERROR\: 0\:([\d]+)\:.*$/, "$1")))
            .filter((t) => !(!t || o[t] || ((o[t] = !0), 0))),
          a = [""];
        s.forEach((t) => {
          (i[t - 1] = `%c${i[t - 1]}%c`),
            a.push(
              "background: #FF0000; color:#FFFFFF; font-size: 10px",
              "font-size: 10px"
            );
        });
        const h = i.join("\n");
        (a[0] = h),
          console.error(r),
          console.groupCollapsed("click to view full shader code"),
          console.warn(...a),
          console.groupEnd();
      }
      function PS(t, e, i, r, n) {
        i.buffer.update(n);
      }
      const BS = {
          float: "\n        data[offset] = v;\n    ",
          vec2: "\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",
          vec3: "\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",
          vec4: "\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",
          mat2: "\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",
          mat3: "\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",
          mat4: "\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    ",
        },
        OS = {
          float: 4,
          vec2: 8,
          vec3: 12,
          vec4: 16,
          int: 4,
          ivec2: 8,
          ivec3: 12,
          ivec4: 16,
          uint: 4,
          uvec2: 8,
          uvec3: 12,
          uvec4: 16,
          bool: 4,
          bvec2: 8,
          bvec3: 12,
          bvec4: 16,
          mat2: 32,
          mat3: 48,
          mat4: 64,
        };
      let RS,
        IS = 0;
      const kS = { textureCount: 0, uboCount: 0 };
      class FS {
        constructor(t) {
          (this.destroyed = !1),
            (this.renderer = t),
            this.systemCheck(),
            (this.gl = null),
            (this.shader = null),
            (this.program = null),
            (this.cache = {}),
            (this._uboCache = {}),
            (this.id = IS++);
        }
        systemCheck() {
          if (
            !(function () {
              if ("boolean" == typeof RS) return RS;
              try {
                RS =
                  !0 ===
                  new Function(
                    "param1",
                    "param2",
                    "param3",
                    "return param1[param2] === param3;"
                  )({ a: "b" }, "a", "b");
              } catch {
                RS = !1;
              }
              return RS;
            })()
          )
            throw new Error(
              "Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support."
            );
        }
        contextChange(t) {
          (this.gl = t), this.reset();
        }
        bind(t, e) {
          t.disposeRunner.add(this),
            (t.uniforms.globals = this.renderer.globalUniforms);
          const i = t.program,
            r =
              i.glPrograms[this.renderer.CONTEXT_UID] ||
              this.generateProgram(t);
          return (
            (this.shader = t),
            this.program !== i &&
              ((this.program = i), this.gl.useProgram(r.program)),
            e ||
              ((kS.textureCount = 0),
              (kS.uboCount = 0),
              this.syncUniformGroup(t.uniformGroup, kS)),
            r
          );
        }
        setUniforms(t) {
          const e = this.shader.program,
            i = e.glPrograms[this.renderer.CONTEXT_UID];
          e.syncUniforms(i.uniformData, t, this.renderer);
        }
        syncUniformGroup(t, e) {
          const i = this.getGlProgram();
          (!t.static || t.dirtyId !== i.uniformDirtyGroups[t.id]) &&
            ((i.uniformDirtyGroups[t.id] = t.dirtyId),
            this.syncUniforms(t, i, e));
        }
        syncUniforms(t, e, i) {
          (t.syncUniforms[this.shader.program.id] || this.createSyncGroups(t))(
            e.uniformData,
            t.uniforms,
            this.renderer,
            i
          );
        }
        createSyncGroups(t) {
          const e = this.getSignature(t, this.shader.program.uniformData, "u");
          return (
            this.cache[e] ||
              (this.cache[e] = (function (t, e) {
                const i = [
                  "\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    ",
                ];
                for (const r in t.uniforms) {
                  const n = e[r];
                  if (!n) {
                    !0 === t.uniforms[r]?.group &&
                      (t.uniforms[r].ubo
                        ? i.push(
                            `\n                        renderer.shader.syncUniformBufferGroup(uv.${r}, '${r}');\n                    `
                          )
                        : i.push(
                            `\n                        renderer.shader.syncUniformGroup(uv.${r}, syncData);\n                    `
                          ));
                    continue;
                  }
                  const o = t.uniforms[r];
                  let s = !1;
                  for (let t = 0; t < hA.length; t++)
                    if (hA[t].test(n, o)) {
                      i.push(hA[t].code(r, o)), (s = !0);
                      break;
                    }
                  if (!s) {
                    const t = (1 !== n.size || n.isArray ? lA : uA)[
                      n.type
                    ].replace("location", `ud["${r}"].location`);
                    i.push(
                      `\n            cu = ud["${r}"];\n            cv = cu.value;\n            v = uv["${r}"];\n            ${t};`
                    );
                  }
                }
                return new Function(
                  "ud",
                  "uv",
                  "renderer",
                  "syncData",
                  i.join("\n")
                );
              })(t, this.shader.program.uniformData)),
            (t.syncUniforms[this.shader.program.id] = this.cache[e]),
            t.syncUniforms[this.shader.program.id]
          );
        }
        syncUniformBufferGroup(t, e) {
          const i = this.getGlProgram();
          if (!t.static || 0 !== t.dirtyId || !i.uniformGroups[t.id]) {
            t.dirtyId = 0;
            const r =
              i.uniformGroups[t.id] || this.createSyncBufferGroup(t, i, e);
            t.buffer.update(),
              r(i.uniformData, t.uniforms, this.renderer, kS, t.buffer);
          }
          this.renderer.buffer.bindBufferBase(
            t.buffer,
            i.uniformBufferBindings[e]
          );
        }
        createSyncBufferGroup(t, e, i) {
          const { gl: r } = this.renderer;
          this.renderer.buffer.bind(t.buffer);
          const n = this.gl.getUniformBlockIndex(e.program, i);
          (e.uniformBufferBindings[i] = this.shader.uniformBindCount),
            r.uniformBlockBinding(e.program, n, this.shader.uniformBindCount),
            this.shader.uniformBindCount++;
          const o = this.getSignature(
            t,
            this.shader.program.uniformData,
            "ubo"
          );
          let s = this._uboCache[o];
          if (
            (s ||
              (s = this._uboCache[o] =
                (function (t, e) {
                  if (!t.autoManage) return { size: 0, syncFunc: PS };
                  const i = (function (t, e) {
                      const i = [];
                      for (const r in t) e[r] && i.push(e[r]);
                      return i.sort((t, e) => t.index - e.index), i;
                    })(t.uniforms, e),
                    { uboElements: r, size: n } = (function (t) {
                      const e = t.map((t) => ({
                        data: t,
                        offset: 0,
                        dataLen: 0,
                        dirty: 0,
                      }));
                      let i = 0,
                        r = 0,
                        n = 0;
                      for (let t = 0; t < e.length; t++) {
                        const o = e[t];
                        if (
                          ((i = OS[o.data.type]),
                          o.data.size > 1 &&
                            (i = Math.max(i, 16) * o.data.size),
                          (o.dataLen = i),
                          r % i != 0 && r < 16)
                        ) {
                          const t = (r % i) % 16;
                          (r += t), (n += t);
                        }
                        r + i > 16
                          ? ((n = 16 * Math.ceil(n / 16)),
                            (o.offset = n),
                            (n += i),
                            (r = i))
                          : ((o.offset = n), (r += i), (n += i));
                      }
                      return (
                        (n = 16 * Math.ceil(n / 16)),
                        { uboElements: e, size: n }
                      );
                    })(i),
                    o = [
                      "\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    ",
                    ];
                  for (let e = 0; e < r.length; e++) {
                    const i = r[e],
                      n = t.uniforms[i.data.name],
                      s = i.data.name;
                    let a = !1;
                    for (let t = 0; t < hA.length; t++) {
                      const e = hA[t];
                      if (e.codeUbo && e.test(i.data, n)) {
                        o.push(
                          `offset = ${i.offset / 4};`,
                          hA[t].codeUbo(i.data.name, n)
                        ),
                          (a = !0);
                        break;
                      }
                    }
                    if (!a)
                      if (i.data.size > 1) {
                        const t = fA(i.data.type),
                          e = Math.max(OS[i.data.type] / 16, 1),
                          r = t / e,
                          n = (4 - (r % 4)) % 4;
                        o.push(
                          `\n                cv = ud.${s}.value;\n                v = uv.${s};\n                offset = ${
                            i.offset / 4
                          };\n\n                t = 0;\n\n                for(var i=0; i < ${
                            i.data.size * e
                          }; i++)\n                {\n                    for(var j = 0; j < ${r}; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += ${n};\n                }\n\n                `
                        );
                      } else {
                        const t = BS[i.data.type];
                        o.push(
                          `\n                cv = ud.${s}.value;\n                v = uv.${s};\n                offset = ${
                            i.offset / 4
                          };\n                ${t};\n                `
                        );
                      }
                  }
                  return (
                    o.push("\n       renderer.buffer.update(buffer);\n    "),
                    {
                      size: n,
                      syncFunc: new Function(
                        "ud",
                        "uv",
                        "renderer",
                        "syncData",
                        "buffer",
                        o.join("\n")
                      ),
                    }
                  );
                })(t, this.shader.program.uniformData)),
            t.autoManage)
          ) {
            const e = new Float32Array(s.size / 4);
            t.buffer.update(e);
          }
          return (e.uniformGroups[t.id] = s.syncFunc), e.uniformGroups[t.id];
        }
        getSignature(t, e, i) {
          const r = t.uniforms,
            n = [`${i}-`];
          for (const t in r) n.push(t), e[t] && n.push(e[t].type);
          return n.join("-");
        }
        getGlProgram() {
          return this.shader
            ? this.shader.program.glPrograms[this.renderer.CONTEXT_UID]
            : null;
        }
        generateProgram(t) {
          const e = this.gl,
            i = t.program,
            r = (function (t, e) {
              const i = SS(t, t.VERTEX_SHADER, e.vertexSrc),
                r = SS(t, t.FRAGMENT_SHADER, e.fragmentSrc),
                n = t.createProgram();
              t.attachShader(n, i), t.attachShader(n, r);
              const o = e.extra?.transformFeedbackVaryings;
              if (
                (o &&
                  ("function" != typeof t.transformFeedbackVaryings
                    ? console.warn(
                        "TransformFeedback is not supported but TransformFeedbackVaryings are given."
                      )
                    : t.transformFeedbackVaryings(
                        n,
                        o.names,
                        "separate" === o.bufferMode
                          ? t.SEPARATE_ATTRIBS
                          : t.INTERLEAVED_ATTRIBS
                      )),
                t.linkProgram(n),
                t.getProgramParameter(n, t.LINK_STATUS) ||
                  (function (t, e, i, r) {
                    t.getProgramParameter(e, t.LINK_STATUS) ||
                      (t.getShaderParameter(i, t.COMPILE_STATUS) || MS(t, i),
                      t.getShaderParameter(r, t.COMPILE_STATUS) || MS(t, r),
                      console.error(
                        "PixiJS Error: Could not initialize shader."
                      ),
                      "" !== t.getProgramInfoLog(e) &&
                        console.warn(
                          "PixiJS Warning: gl.getProgramInfoLog()",
                          t.getProgramInfoLog(e)
                        ));
                  })(t, n, i, r),
                (e.attributeData = (function (t, e) {
                  const i = {},
                    r = e.getProgramParameter(t, e.ACTIVE_ATTRIBUTES);
                  for (let n = 0; n < r; n++) {
                    const r = e.getActiveAttrib(t, n);
                    if (r.name.startsWith("gl_")) continue;
                    const o = gA(e, r.type),
                      s = {
                        type: o,
                        name: r.name,
                        size: fA(o),
                        location: e.getAttribLocation(t, r.name),
                      };
                    i[r.name] = s;
                  }
                  return i;
                })(n, t)),
                (e.uniformData = (function (t, e) {
                  const i = {},
                    r = e.getProgramParameter(t, e.ACTIVE_UNIFORMS);
                  for (let n = 0; n < r; n++) {
                    const r = e.getActiveUniform(t, n),
                      o = r.name.replace(/\[.*?\]$/, ""),
                      s = !!r.name.match(/\[.*?\]$/),
                      a = gA(e, r.type);
                    i[o] = {
                      name: o,
                      index: n,
                      type: a,
                      size: r.size,
                      isArray: s,
                      value: CS(a, r.size),
                    };
                  }
                  return i;
                })(n, t)),
                !/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(
                  e.vertexSrc
                ))
              ) {
                const i = Object.keys(e.attributeData);
                i.sort((t, e) => (t > e ? 1 : -1));
                for (let r = 0; r < i.length; r++)
                  (e.attributeData[i[r]].location = r),
                    t.bindAttribLocation(n, r, i[r]);
                t.linkProgram(n);
              }
              t.deleteShader(i), t.deleteShader(r);
              const s = {};
              for (const i in e.uniformData) {
                const r = e.uniformData[i];
                s[i] = {
                  location: t.getUniformLocation(n, i),
                  value: CS(r.type, r.size),
                };
              }
              return new AS(n, s);
            })(e, i);
          return (i.glPrograms[this.renderer.CONTEXT_UID] = r), r;
        }
        reset() {
          (this.program = null), (this.shader = null);
        }
        disposeShader(t) {
          this.shader === t && (this.shader = null);
        }
        destroy() {
          (this.renderer = null), (this.destroyed = !0);
        }
      }
      (FS.extension = { type: fT.RendererSystem, name: "shader" }), gT.add(FS);
      class DS {
        constructor(t) {
          this.renderer = t;
        }
        run(t) {
          const { renderer: e } = this;
          e.runners.init.emit(e.options),
            t.hello &&
              console.log(
                `PixiJS 7.4.2 - ${e.rendererLogId} - https://pixijs.com`
              ),
            e.resize(e.screen.width, e.screen.height);
        }
        destroy() {}
      }
      (DS.defaultOptions = { hello: !1 }),
        (DS.extension = {
          type: [fT.RendererSystem, fT.CanvasRendererSystem],
          name: "startup",
        }),
        gT.add(DS);
      const NS = class t {
        constructor() {
          (this.gl = null),
            (this.stateId = 0),
            (this.polygonOffset = 0),
            (this.blendMode = jx.NONE),
            (this._blendEq = !1),
            (this.map = []),
            (this.map[0] = this.setBlend),
            (this.map[1] = this.setOffset),
            (this.map[2] = this.setCullFace),
            (this.map[3] = this.setDepthTest),
            (this.map[4] = this.setFrontFace),
            (this.map[5] = this.setDepthMask),
            (this.checks = []),
            (this.defaultState = new wT()),
            (this.defaultState.blend = !0);
        }
        contextChange(t) {
          (this.gl = t),
            (this.blendModes = (function (t, e = []) {
              return (
                (e[jx.NORMAL] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                (e[jx.ADD] = [t.ONE, t.ONE]),
                (e[jx.MULTIPLY] = [
                  t.DST_COLOR,
                  t.ONE_MINUS_SRC_ALPHA,
                  t.ONE,
                  t.ONE_MINUS_SRC_ALPHA,
                ]),
                (e[jx.SCREEN] = [
                  t.ONE,
                  t.ONE_MINUS_SRC_COLOR,
                  t.ONE,
                  t.ONE_MINUS_SRC_ALPHA,
                ]),
                (e[jx.OVERLAY] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                (e[jx.DARKEN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                (e[jx.LIGHTEN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                (e[jx.COLOR_DODGE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                (e[jx.COLOR_BURN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                (e[jx.HARD_LIGHT] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                (e[jx.SOFT_LIGHT] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                (e[jx.DIFFERENCE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                (e[jx.EXCLUSION] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                (e[jx.HUE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                (e[jx.SATURATION] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                (e[jx.COLOR] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                (e[jx.LUMINOSITY] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                (e[jx.NONE] = [0, 0]),
                (e[jx.NORMAL_NPM] = [
                  t.SRC_ALPHA,
                  t.ONE_MINUS_SRC_ALPHA,
                  t.ONE,
                  t.ONE_MINUS_SRC_ALPHA,
                ]),
                (e[jx.ADD_NPM] = [t.SRC_ALPHA, t.ONE, t.ONE, t.ONE]),
                (e[jx.SCREEN_NPM] = [
                  t.SRC_ALPHA,
                  t.ONE_MINUS_SRC_COLOR,
                  t.ONE,
                  t.ONE_MINUS_SRC_ALPHA,
                ]),
                (e[jx.SRC_IN] = [t.DST_ALPHA, t.ZERO]),
                (e[jx.SRC_OUT] = [t.ONE_MINUS_DST_ALPHA, t.ZERO]),
                (e[jx.SRC_ATOP] = [t.DST_ALPHA, t.ONE_MINUS_SRC_ALPHA]),
                (e[jx.DST_OVER] = [t.ONE_MINUS_DST_ALPHA, t.ONE]),
                (e[jx.DST_IN] = [t.ZERO, t.SRC_ALPHA]),
                (e[jx.DST_OUT] = [t.ZERO, t.ONE_MINUS_SRC_ALPHA]),
                (e[jx.DST_ATOP] = [t.ONE_MINUS_DST_ALPHA, t.SRC_ALPHA]),
                (e[jx.XOR] = [t.ONE_MINUS_DST_ALPHA, t.ONE_MINUS_SRC_ALPHA]),
                (e[jx.SUBTRACT] = [
                  t.ONE,
                  t.ONE,
                  t.ONE,
                  t.ONE,
                  t.FUNC_REVERSE_SUBTRACT,
                  t.FUNC_ADD,
                ]),
                e
              );
            })(t)),
            this.set(this.defaultState),
            this.reset();
        }
        set(t) {
          if (((t = t || this.defaultState), this.stateId !== t.data)) {
            let e = this.stateId ^ t.data,
              i = 0;
            for (; e; )
              1 & e && this.map[i].call(this, !!(t.data & (1 << i))),
                (e >>= 1),
                i++;
            this.stateId = t.data;
          }
          for (let e = 0; e < this.checks.length; e++) this.checks[e](this, t);
        }
        forceState(t) {
          t = t || this.defaultState;
          for (let e = 0; e < this.map.length; e++)
            this.map[e].call(this, !!(t.data & (1 << e)));
          for (let e = 0; e < this.checks.length; e++) this.checks[e](this, t);
          this.stateId = t.data;
        }
        setBlend(e) {
          this.updateCheck(t.checkBlendMode, e),
            this.gl[e ? "enable" : "disable"](this.gl.BLEND);
        }
        setOffset(e) {
          this.updateCheck(t.checkPolygonOffset, e),
            this.gl[e ? "enable" : "disable"](this.gl.POLYGON_OFFSET_FILL);
        }
        setDepthTest(t) {
          this.gl[t ? "enable" : "disable"](this.gl.DEPTH_TEST);
        }
        setDepthMask(t) {
          this.gl.depthMask(t);
        }
        setCullFace(t) {
          this.gl[t ? "enable" : "disable"](this.gl.CULL_FACE);
        }
        setFrontFace(t) {
          this.gl.frontFace(this.gl[t ? "CW" : "CCW"]);
        }
        setBlendMode(t) {
          if (t === this.blendMode) return;
          this.blendMode = t;
          const e = this.blendModes[t],
            i = this.gl;
          2 === e.length
            ? i.blendFunc(e[0], e[1])
            : i.blendFuncSeparate(e[0], e[1], e[2], e[3]),
            6 === e.length
              ? ((this._blendEq = !0), i.blendEquationSeparate(e[4], e[5]))
              : this._blendEq &&
                ((this._blendEq = !1),
                i.blendEquationSeparate(i.FUNC_ADD, i.FUNC_ADD));
        }
        setPolygonOffset(t, e) {
          this.gl.polygonOffset(t, e);
        }
        reset() {
          this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, !1),
            this.forceState(this.defaultState),
            (this._blendEq = !0),
            (this.blendMode = -1),
            this.setBlendMode(0);
        }
        updateCheck(t, e) {
          const i = this.checks.indexOf(t);
          e && -1 === i
            ? this.checks.push(t)
            : !e && -1 !== i && this.checks.splice(i, 1);
        }
        static checkBlendMode(t, e) {
          t.setBlendMode(e.blendMode);
        }
        static checkPolygonOffset(t, e) {
          t.setPolygonOffset(1, e.polygonOffset);
        }
        destroy() {
          this.gl = null;
        }
      };
      NS.extension = { type: fT.RendererSystem, name: "state" };
      let LS = NS;
      gT.add(LS);
      class US extends Aw {
        constructor() {
          super(...arguments), (this.runners = {}), (this._systemsHash = {});
        }
        setup(t) {
          this.addRunners(...t.runners);
          const e = (t.priority ?? []).filter((e) => t.systems[e]),
            i = [...e, ...Object.keys(t.systems).filter((t) => !e.includes(t))];
          for (const e of i) this.addSystem(t.systems[e], e);
        }
        addRunners(...t) {
          t.forEach((t) => {
            this.runners[t] = new ST(t);
          });
        }
        addSystem(t, e) {
          const i = new t(this);
          if (this[e])
            throw new Error(`Whoops! The name "${e}" is already in use`);
          (this[e] = i), (this._systemsHash[e] = i);
          for (const t in this.runners) this.runners[t].add(i);
          return this;
        }
        emitWithCustomOptions(t, e) {
          const i = Object.keys(this._systemsHash);
          t.items.forEach((r) => {
            const n = i.find((t) => this._systemsHash[t] === r);
            r[t.name](e[n]);
          });
        }
        destroy() {
          Object.values(this.runners).forEach((t) => {
            t.destroy();
          }),
            (this._systemsHash = {});
        }
      }
      const GS = class t {
        constructor(e) {
          (this.renderer = e),
            (this.count = 0),
            (this.checkCount = 0),
            (this.maxIdle = t.defaultMaxIdle),
            (this.checkCountMax = t.defaultCheckCountMax),
            (this.mode = t.defaultMode);
        }
        postrender() {
          this.renderer.objectRenderer.renderingToScreen &&
            (this.count++,
            this.mode !== Qx.MANUAL &&
              (this.checkCount++,
              this.checkCount > this.checkCountMax &&
                ((this.checkCount = 0), this.run())));
        }
        run() {
          const t = this.renderer.texture,
            e = t.managedTextures;
          let i = !1;
          for (let r = 0; r < e.length; r++) {
            const n = e[r];
            n.resource &&
              this.count - n.touched > this.maxIdle &&
              (t.destroyTexture(n, !0), (e[r] = null), (i = !0));
          }
          if (i) {
            let t = 0;
            for (let i = 0; i < e.length; i++) null !== e[i] && (e[t++] = e[i]);
            e.length = t;
          }
        }
        unload(t) {
          const e = this.renderer.texture,
            i = t._texture;
          i && !i.framebuffer && e.destroyTexture(i);
          for (let e = t.children.length - 1; e >= 0; e--)
            this.unload(t.children[e]);
        }
        destroy() {
          this.renderer = null;
        }
      };
      (GS.defaultMode = Qx.AUTO),
        (GS.defaultMaxIdle = 3600),
        (GS.defaultCheckCountMax = 600),
        (GS.extension = { type: fT.RendererSystem, name: "textureGC" });
      let VS = GS;
      gT.add(VS);
      class jS {
        constructor(t) {
          (this.texture = t),
            (this.width = -1),
            (this.height = -1),
            (this.dirtyId = -1),
            (this.dirtyStyleId = -1),
            (this.mipmap = !1),
            (this.wrapMode = 33071),
            (this.type = Yx.UNSIGNED_BYTE),
            (this.internalFormat = Xx.RGBA),
            (this.samplerType = 0);
        }
      }
      class zS {
        constructor(t) {
          (this.renderer = t),
            (this.boundTextures = []),
            (this.currentLocation = -1),
            (this.managedTextures = []),
            (this._unknownBoundTextures = !1),
            (this.unknownTexture = new BT()),
            (this.hasIntegerTextures = !1);
        }
        contextChange() {
          const t = (this.gl = this.renderer.gl);
          (this.CONTEXT_UID = this.renderer.CONTEXT_UID),
            (this.webGLVersion = this.renderer.context.webGLVersion),
            (this.internalFormats = (function (t) {
              let e;
              return (
                (e =
                  "WebGL2RenderingContext" in globalThis &&
                  t instanceof globalThis.WebGL2RenderingContext
                    ? {
                        [Yx.UNSIGNED_BYTE]: {
                          [Xx.RGBA]: t.RGBA8,
                          [Xx.RGB]: t.RGB8,
                          [Xx.RG]: t.RG8,
                          [Xx.RED]: t.R8,
                          [Xx.RGBA_INTEGER]: t.RGBA8UI,
                          [Xx.RGB_INTEGER]: t.RGB8UI,
                          [Xx.RG_INTEGER]: t.RG8UI,
                          [Xx.RED_INTEGER]: t.R8UI,
                          [Xx.ALPHA]: t.ALPHA,
                          [Xx.LUMINANCE]: t.LUMINANCE,
                          [Xx.LUMINANCE_ALPHA]: t.LUMINANCE_ALPHA,
                        },
                        [Yx.BYTE]: {
                          [Xx.RGBA]: t.RGBA8_SNORM,
                          [Xx.RGB]: t.RGB8_SNORM,
                          [Xx.RG]: t.RG8_SNORM,
                          [Xx.RED]: t.R8_SNORM,
                          [Xx.RGBA_INTEGER]: t.RGBA8I,
                          [Xx.RGB_INTEGER]: t.RGB8I,
                          [Xx.RG_INTEGER]: t.RG8I,
                          [Xx.RED_INTEGER]: t.R8I,
                        },
                        [Yx.UNSIGNED_SHORT]: {
                          [Xx.RGBA_INTEGER]: t.RGBA16UI,
                          [Xx.RGB_INTEGER]: t.RGB16UI,
                          [Xx.RG_INTEGER]: t.RG16UI,
                          [Xx.RED_INTEGER]: t.R16UI,
                          [Xx.DEPTH_COMPONENT]: t.DEPTH_COMPONENT16,
                        },
                        [Yx.SHORT]: {
                          [Xx.RGBA_INTEGER]: t.RGBA16I,
                          [Xx.RGB_INTEGER]: t.RGB16I,
                          [Xx.RG_INTEGER]: t.RG16I,
                          [Xx.RED_INTEGER]: t.R16I,
                        },
                        [Yx.UNSIGNED_INT]: {
                          [Xx.RGBA_INTEGER]: t.RGBA32UI,
                          [Xx.RGB_INTEGER]: t.RGB32UI,
                          [Xx.RG_INTEGER]: t.RG32UI,
                          [Xx.RED_INTEGER]: t.R32UI,
                          [Xx.DEPTH_COMPONENT]: t.DEPTH_COMPONENT24,
                        },
                        [Yx.INT]: {
                          [Xx.RGBA_INTEGER]: t.RGBA32I,
                          [Xx.RGB_INTEGER]: t.RGB32I,
                          [Xx.RG_INTEGER]: t.RG32I,
                          [Xx.RED_INTEGER]: t.R32I,
                        },
                        [Yx.FLOAT]: {
                          [Xx.RGBA]: t.RGBA32F,
                          [Xx.RGB]: t.RGB32F,
                          [Xx.RG]: t.RG32F,
                          [Xx.RED]: t.R32F,
                          [Xx.DEPTH_COMPONENT]: t.DEPTH_COMPONENT32F,
                        },
                        [Yx.HALF_FLOAT]: {
                          [Xx.RGBA]: t.RGBA16F,
                          [Xx.RGB]: t.RGB16F,
                          [Xx.RG]: t.RG16F,
                          [Xx.RED]: t.R16F,
                        },
                        [Yx.UNSIGNED_SHORT_5_6_5]: { [Xx.RGB]: t.RGB565 },
                        [Yx.UNSIGNED_SHORT_4_4_4_4]: { [Xx.RGBA]: t.RGBA4 },
                        [Yx.UNSIGNED_SHORT_5_5_5_1]: { [Xx.RGBA]: t.RGB5_A1 },
                        [Yx.UNSIGNED_INT_2_10_10_10_REV]: {
                          [Xx.RGBA]: t.RGB10_A2,
                          [Xx.RGBA_INTEGER]: t.RGB10_A2UI,
                        },
                        [Yx.UNSIGNED_INT_10F_11F_11F_REV]: {
                          [Xx.RGB]: t.R11F_G11F_B10F,
                        },
                        [Yx.UNSIGNED_INT_5_9_9_9_REV]: { [Xx.RGB]: t.RGB9_E5 },
                        [Yx.UNSIGNED_INT_24_8]: {
                          [Xx.DEPTH_STENCIL]: t.DEPTH24_STENCIL8,
                        },
                        [Yx.FLOAT_32_UNSIGNED_INT_24_8_REV]: {
                          [Xx.DEPTH_STENCIL]: t.DEPTH32F_STENCIL8,
                        },
                      }
                    : {
                        [Yx.UNSIGNED_BYTE]: {
                          [Xx.RGBA]: t.RGBA,
                          [Xx.RGB]: t.RGB,
                          [Xx.ALPHA]: t.ALPHA,
                          [Xx.LUMINANCE]: t.LUMINANCE,
                          [Xx.LUMINANCE_ALPHA]: t.LUMINANCE_ALPHA,
                        },
                        [Yx.UNSIGNED_SHORT_5_6_5]: { [Xx.RGB]: t.RGB },
                        [Yx.UNSIGNED_SHORT_4_4_4_4]: { [Xx.RGBA]: t.RGBA },
                        [Yx.UNSIGNED_SHORT_5_5_5_1]: { [Xx.RGBA]: t.RGBA },
                      }),
                e
              );
            })(t)),
            (this.samplerTypes = (function (t) {
              let e;
              return (
                (e =
                  "WebGL2RenderingContext" in globalThis &&
                  t instanceof globalThis.WebGL2RenderingContext
                    ? {
                        [t.RGB]: Wx.FLOAT,
                        [t.RGBA]: Wx.FLOAT,
                        [t.ALPHA]: Wx.FLOAT,
                        [t.LUMINANCE]: Wx.FLOAT,
                        [t.LUMINANCE_ALPHA]: Wx.FLOAT,
                        [t.R8]: Wx.FLOAT,
                        [t.R8_SNORM]: Wx.FLOAT,
                        [t.RG8]: Wx.FLOAT,
                        [t.RG8_SNORM]: Wx.FLOAT,
                        [t.RGB8]: Wx.FLOAT,
                        [t.RGB8_SNORM]: Wx.FLOAT,
                        [t.RGB565]: Wx.FLOAT,
                        [t.RGBA4]: Wx.FLOAT,
                        [t.RGB5_A1]: Wx.FLOAT,
                        [t.RGBA8]: Wx.FLOAT,
                        [t.RGBA8_SNORM]: Wx.FLOAT,
                        [t.RGB10_A2]: Wx.FLOAT,
                        [t.RGB10_A2UI]: Wx.FLOAT,
                        [t.SRGB8]: Wx.FLOAT,
                        [t.SRGB8_ALPHA8]: Wx.FLOAT,
                        [t.R16F]: Wx.FLOAT,
                        [t.RG16F]: Wx.FLOAT,
                        [t.RGB16F]: Wx.FLOAT,
                        [t.RGBA16F]: Wx.FLOAT,
                        [t.R32F]: Wx.FLOAT,
                        [t.RG32F]: Wx.FLOAT,
                        [t.RGB32F]: Wx.FLOAT,
                        [t.RGBA32F]: Wx.FLOAT,
                        [t.R11F_G11F_B10F]: Wx.FLOAT,
                        [t.RGB9_E5]: Wx.FLOAT,
                        [t.R8I]: Wx.INT,
                        [t.R8UI]: Wx.UINT,
                        [t.R16I]: Wx.INT,
                        [t.R16UI]: Wx.UINT,
                        [t.R32I]: Wx.INT,
                        [t.R32UI]: Wx.UINT,
                        [t.RG8I]: Wx.INT,
                        [t.RG8UI]: Wx.UINT,
                        [t.RG16I]: Wx.INT,
                        [t.RG16UI]: Wx.UINT,
                        [t.RG32I]: Wx.INT,
                        [t.RG32UI]: Wx.UINT,
                        [t.RGB8I]: Wx.INT,
                        [t.RGB8UI]: Wx.UINT,
                        [t.RGB16I]: Wx.INT,
                        [t.RGB16UI]: Wx.UINT,
                        [t.RGB32I]: Wx.INT,
                        [t.RGB32UI]: Wx.UINT,
                        [t.RGBA8I]: Wx.INT,
                        [t.RGBA8UI]: Wx.UINT,
                        [t.RGBA16I]: Wx.INT,
                        [t.RGBA16UI]: Wx.UINT,
                        [t.RGBA32I]: Wx.INT,
                        [t.RGBA32UI]: Wx.UINT,
                        [t.DEPTH_COMPONENT16]: Wx.FLOAT,
                        [t.DEPTH_COMPONENT24]: Wx.FLOAT,
                        [t.DEPTH_COMPONENT32F]: Wx.FLOAT,
                        [t.DEPTH_STENCIL]: Wx.FLOAT,
                        [t.DEPTH24_STENCIL8]: Wx.FLOAT,
                        [t.DEPTH32F_STENCIL8]: Wx.FLOAT,
                      }
                    : {
                        [t.RGB]: Wx.FLOAT,
                        [t.RGBA]: Wx.FLOAT,
                        [t.ALPHA]: Wx.FLOAT,
                        [t.LUMINANCE]: Wx.FLOAT,
                        [t.LUMINANCE_ALPHA]: Wx.FLOAT,
                        [t.DEPTH_STENCIL]: Wx.FLOAT,
                      }),
                e
              );
            })(t));
          const e = t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);
          this.boundTextures.length = e;
          for (let t = 0; t < e; t++) this.boundTextures[t] = null;
          this.emptyTextures = {};
          const i = new jS(t.createTexture());
          t.bindTexture(t.TEXTURE_2D, i.texture),
            t.texImage2D(
              t.TEXTURE_2D,
              0,
              t.RGBA,
              1,
              1,
              0,
              t.RGBA,
              t.UNSIGNED_BYTE,
              new Uint8Array(4)
            ),
            (this.emptyTextures[t.TEXTURE_2D] = i),
            (this.emptyTextures[t.TEXTURE_CUBE_MAP] = new jS(
              t.createTexture()
            )),
            t.bindTexture(
              t.TEXTURE_CUBE_MAP,
              this.emptyTextures[t.TEXTURE_CUBE_MAP].texture
            );
          for (let e = 0; e < 6; e++)
            t.texImage2D(
              t.TEXTURE_CUBE_MAP_POSITIVE_X + e,
              0,
              t.RGBA,
              1,
              1,
              0,
              t.RGBA,
              t.UNSIGNED_BYTE,
              null
            );
          t.texParameteri(t.TEXTURE_CUBE_MAP, t.TEXTURE_MAG_FILTER, t.LINEAR),
            t.texParameteri(t.TEXTURE_CUBE_MAP, t.TEXTURE_MIN_FILTER, t.LINEAR);
          for (let t = 0; t < this.boundTextures.length; t++)
            this.bind(null, t);
        }
        bind(t, e = 0) {
          const { gl: i } = this;
          if (
            ((t = t?.castToBaseTexture()), t?.valid && !t.parentTextureArray)
          ) {
            t.touched = this.renderer.textureGC.count;
            const r = t._glTextures[this.CONTEXT_UID] || this.initTexture(t);
            this.boundTextures[e] !== t &&
              (this.currentLocation !== e &&
                ((this.currentLocation = e), i.activeTexture(i.TEXTURE0 + e)),
              i.bindTexture(t.target, r.texture)),
              r.dirtyId !== t.dirtyId
                ? (this.currentLocation !== e &&
                    ((this.currentLocation = e),
                    i.activeTexture(i.TEXTURE0 + e)),
                  this.updateTexture(t))
                : r.dirtyStyleId !== t.dirtyStyleId &&
                  this.updateTextureStyle(t),
              (this.boundTextures[e] = t);
          } else
            this.currentLocation !== e &&
              ((this.currentLocation = e), i.activeTexture(i.TEXTURE0 + e)),
              i.bindTexture(
                i.TEXTURE_2D,
                this.emptyTextures[i.TEXTURE_2D].texture
              ),
              (this.boundTextures[e] = null);
        }
        reset() {
          (this._unknownBoundTextures = !0),
            (this.hasIntegerTextures = !1),
            (this.currentLocation = -1);
          for (let t = 0; t < this.boundTextures.length; t++)
            this.boundTextures[t] = this.unknownTexture;
        }
        unbind(t) {
          const { gl: e, boundTextures: i } = this;
          if (this._unknownBoundTextures) {
            this._unknownBoundTextures = !1;
            for (let t = 0; t < i.length; t++)
              i[t] === this.unknownTexture && this.bind(null, t);
          }
          for (let r = 0; r < i.length; r++)
            i[r] === t &&
              (this.currentLocation !== r &&
                (e.activeTexture(e.TEXTURE0 + r), (this.currentLocation = r)),
              e.bindTexture(t.target, this.emptyTextures[t.target].texture),
              (i[r] = null));
        }
        ensureSamplerType(t) {
          const {
            boundTextures: e,
            hasIntegerTextures: i,
            CONTEXT_UID: r,
          } = this;
          if (i)
            for (let i = t - 1; i >= 0; --i) {
              const t = e[i];
              t &&
                t._glTextures[r].samplerType !== Wx.FLOAT &&
                this.renderer.texture.unbind(t);
            }
        }
        initTexture(t) {
          const e = new jS(this.gl.createTexture());
          return (
            (e.dirtyId = -1),
            (t._glTextures[this.CONTEXT_UID] = e),
            this.managedTextures.push(t),
            t.on("dispose", this.destroyTexture, this),
            e
          );
        }
        initTextureType(t, e) {
          (e.internalFormat =
            this.internalFormats[t.type]?.[t.format] ?? t.format),
            (e.samplerType = this.samplerTypes[e.internalFormat] ?? Wx.FLOAT),
            2 === this.webGLVersion && t.type === Yx.HALF_FLOAT
              ? (e.type = this.gl.HALF_FLOAT)
              : (e.type = t.type);
        }
        updateTexture(t) {
          const e = t._glTextures[this.CONTEXT_UID];
          if (!e) return;
          const i = this.renderer;
          if ((this.initTextureType(t, e), t.resource?.upload(i, t, e)))
            e.samplerType !== Wx.FLOAT && (this.hasIntegerTextures = !0);
          else {
            const r = t.realWidth,
              n = t.realHeight,
              o = i.gl;
            (e.width !== r || e.height !== n || e.dirtyId < 0) &&
              ((e.width = r),
              (e.height = n),
              o.texImage2D(
                t.target,
                0,
                e.internalFormat,
                r,
                n,
                0,
                t.format,
                e.type,
                null
              ));
          }
          t.dirtyStyleId !== e.dirtyStyleId && this.updateTextureStyle(t),
            (e.dirtyId = t.dirtyId);
        }
        destroyTexture(t, e) {
          const { gl: i } = this;
          if (
            (t = t.castToBaseTexture())._glTextures[this.CONTEXT_UID] &&
            (this.unbind(t),
            i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),
            t.off("dispose", this.destroyTexture, this),
            delete t._glTextures[this.CONTEXT_UID],
            !e)
          ) {
            const e = this.managedTextures.indexOf(t);
            -1 !== e &&
              (function (t, e, i) {
                const r = t.length;
                let n;
                if (e >= r || 0 === i) return;
                const o = r - (i = e + i > r ? r - e : i);
                for (n = e; n < o; ++n) t[n] = t[n + i];
                t.length = o;
              })(this.managedTextures, e, 1);
          }
        }
        updateTextureStyle(t) {
          const e = t._glTextures[this.CONTEXT_UID];
          e &&
            ((t.mipmap !== Kx.POW2 && 2 === this.webGLVersion) || t.isPowerOfTwo
              ? (e.mipmap = t.mipmap >= 1)
              : (e.mipmap = !1),
            2 === this.webGLVersion || t.isPowerOfTwo
              ? (e.wrapMode = t.wrapMode)
              : (e.wrapMode = $x.CLAMP),
            t.resource?.style(this.renderer, t, e) || this.setStyle(t, e),
            (e.dirtyStyleId = t.dirtyStyleId));
        }
        setStyle(t, e) {
          const i = this.gl;
          if (
            (e.mipmap &&
              t.mipmap !== Kx.ON_MANUAL &&
              i.generateMipmap(t.target),
            i.texParameteri(t.target, i.TEXTURE_WRAP_S, e.wrapMode),
            i.texParameteri(t.target, i.TEXTURE_WRAP_T, e.wrapMode),
            e.mipmap)
          ) {
            i.texParameteri(
              t.target,
              i.TEXTURE_MIN_FILTER,
              t.scaleMode === qx.LINEAR
                ? i.LINEAR_MIPMAP_LINEAR
                : i.NEAREST_MIPMAP_NEAREST
            );
            const e = this.renderer.context.extensions.anisotropicFiltering;
            if (e && t.anisotropicLevel > 0 && t.scaleMode === qx.LINEAR) {
              const r = Math.min(
                t.anisotropicLevel,
                i.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT)
              );
              i.texParameterf(t.target, e.TEXTURE_MAX_ANISOTROPY_EXT, r);
            }
          } else
            i.texParameteri(
              t.target,
              i.TEXTURE_MIN_FILTER,
              t.scaleMode === qx.LINEAR ? i.LINEAR : i.NEAREST
            );
          i.texParameteri(
            t.target,
            i.TEXTURE_MAG_FILTER,
            t.scaleMode === qx.LINEAR ? i.LINEAR : i.NEAREST
          );
        }
        destroy() {
          this.renderer = null;
        }
      }
      (zS.extension = { type: fT.RendererSystem, name: "texture" }), gT.add(zS);
      class XS {
        constructor(t) {
          this.renderer = t;
        }
        contextChange() {
          (this.gl = this.renderer.gl),
            (this.CONTEXT_UID = this.renderer.CONTEXT_UID);
        }
        bind(t) {
          const { gl: e, CONTEXT_UID: i } = this,
            r = t._glTransformFeedbacks[i] || this.createGLTransformFeedback(t);
          e.bindTransformFeedback(e.TRANSFORM_FEEDBACK, r);
        }
        unbind() {
          const { gl: t } = this;
          t.bindTransformFeedback(t.TRANSFORM_FEEDBACK, null);
        }
        beginTransformFeedback(t, e) {
          const { gl: i, renderer: r } = this;
          e && r.shader.bind(e), i.beginTransformFeedback(t);
        }
        endTransformFeedback() {
          const { gl: t } = this;
          t.endTransformFeedback();
        }
        createGLTransformFeedback(t) {
          const { gl: e, renderer: i, CONTEXT_UID: r } = this,
            n = e.createTransformFeedback();
          (t._glTransformFeedbacks[r] = n),
            e.bindTransformFeedback(e.TRANSFORM_FEEDBACK, n);
          for (let n = 0; n < t.buffers.length; n++) {
            const o = t.buffers[n];
            o &&
              (i.buffer.update(o),
              o._glBuffers[r].refCount++,
              e.bindBufferBase(
                e.TRANSFORM_FEEDBACK_BUFFER,
                n,
                o._glBuffers[r].buffer || null
              ));
          }
          return (
            e.bindTransformFeedback(e.TRANSFORM_FEEDBACK, null),
            t.disposeRunner.add(this),
            n
          );
        }
        disposeTransformFeedback(t, e) {
          const i = t._glTransformFeedbacks[this.CONTEXT_UID],
            r = this.gl;
          t.disposeRunner.remove(this);
          const n = this.renderer.buffer;
          if (n)
            for (let i = 0; i < t.buffers.length; i++) {
              const r = t.buffers[i];
              if (!r) continue;
              const o = r._glBuffers[this.CONTEXT_UID];
              o && (o.refCount--, 0 === o.refCount && !e && n.dispose(r, e));
            }
          i &&
            (e || r.deleteTransformFeedback(i),
            delete t._glTransformFeedbacks[this.CONTEXT_UID]);
        }
        destroy() {
          this.renderer = null;
        }
      }
      (XS.extension = { type: fT.RendererSystem, name: "transformFeedback" }),
        gT.add(XS);
      class HS {
        constructor(t) {
          this.renderer = t;
        }
        init(t) {
          (this.screen = new HT(0, 0, t.width, t.height)),
            (this.element = t.view || ow.ADAPTER.createCanvas()),
            (this.resolution = t.resolution || ow.RESOLUTION),
            (this.autoDensity = !!t.autoDensity);
        }
        resizeView(t, e) {
          (this.element.width = Math.round(t * this.resolution)),
            (this.element.height = Math.round(e * this.resolution));
          const i = this.element.width / this.resolution,
            r = this.element.height / this.resolution;
          (this.screen.width = i),
            (this.screen.height = r),
            this.autoDensity &&
              ((this.element.style.width = `${i}px`),
              (this.element.style.height = `${r}px`)),
            this.renderer.emit("resize", i, r),
            this.renderer.runners.resize.emit(
              this.screen.width,
              this.screen.height
            );
        }
        destroy(t) {
          t && this.element.parentNode?.removeChild(this.element),
            (this.renderer = null),
            (this.element = null),
            (this.screen = null);
        }
      }
      (HS.defaultOptions = {
        width: 800,
        height: 600,
        resolution: void 0,
        autoDensity: !1,
      }),
        (HS.extension = {
          type: [fT.RendererSystem, fT.CanvasRendererSystem],
          name: "_view",
        }),
        gT.add(HS),
        (ow.PREFER_ENV = Ux.WEBGL2),
        (ow.STRICT_TEXTURE_CACHE = !1),
        (ow.RENDER_OPTIONS = {
          ...NA.defaultOptions,
          ...kA.defaultOptions,
          ...HS.defaultOptions,
          ...DS.defaultOptions,
        }),
        Object.defineProperties(ow, {
          WRAP_MODE: {
            get: () => BT.defaultOptions.wrapMode,
            set(t) {
              Ew(
                "7.1.0",
                "settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"
              ),
                (BT.defaultOptions.wrapMode = t);
            },
          },
          SCALE_MODE: {
            get: () => BT.defaultOptions.scaleMode,
            set(t) {
              Ew(
                "7.1.0",
                "settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"
              ),
                (BT.defaultOptions.scaleMode = t);
            },
          },
          MIPMAP_TEXTURES: {
            get: () => BT.defaultOptions.mipmap,
            set(t) {
              Ew(
                "7.1.0",
                "settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"
              ),
                (BT.defaultOptions.mipmap = t);
            },
          },
          ANISOTROPIC_LEVEL: {
            get: () => BT.defaultOptions.anisotropicLevel,
            set(t) {
              Ew(
                "7.1.0",
                "settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"
              ),
                (BT.defaultOptions.anisotropicLevel = t);
            },
          },
          FILTER_RESOLUTION: {
            get: () => (
              Ew(
                "7.1.0",
                "settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"
              ),
              IA.defaultResolution
            ),
            set(t) {
              IA.defaultResolution = t;
            },
          },
          FILTER_MULTISAMPLE: {
            get: () => (
              Ew(
                "7.1.0",
                "settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"
              ),
              IA.defaultMultisample
            ),
            set(t) {
              IA.defaultMultisample = t;
            },
          },
          SPRITE_MAX_TEXTURES: {
            get: () => OA.defaultMaxTextures,
            set(t) {
              Ew(
                "7.1.0",
                "settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"
              ),
                (OA.defaultMaxTextures = t);
            },
          },
          SPRITE_BATCH_SIZE: {
            get: () => OA.defaultBatchSize,
            set(t) {
              Ew(
                "7.1.0",
                "settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"
              ),
                (OA.defaultBatchSize = t);
            },
          },
          CAN_UPLOAD_SAME_BUFFER: {
            get: () => OA.canUploadSameBuffer,
            set(t) {
              Ew(
                "7.1.0",
                "settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"
              ),
                (OA.canUploadSameBuffer = t);
            },
          },
          GC_MODE: {
            get: () => VS.defaultMode,
            set(t) {
              Ew(
                "7.1.0",
                "settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"
              ),
                (VS.defaultMode = t);
            },
          },
          GC_MAX_IDLE: {
            get: () => VS.defaultMaxIdle,
            set(t) {
              Ew(
                "7.1.0",
                "settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"
              ),
                (VS.defaultMaxIdle = t);
            },
          },
          GC_MAX_CHECK_COUNT: {
            get: () => VS.defaultCheckCountMax,
            set(t) {
              Ew(
                "7.1.0",
                "settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"
              ),
                (VS.defaultCheckCountMax = t);
            },
          },
          PRECISION_VERTEX: {
            get: () => TA.defaultVertexPrecision,
            set(t) {
              Ew(
                "7.1.0",
                "settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"
              ),
                (TA.defaultVertexPrecision = t);
            },
          },
          PRECISION_FRAGMENT: {
            get: () => TA.defaultFragmentPrecision,
            set(t) {
              Ew(
                "7.1.0",
                "settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"
              ),
                (TA.defaultFragmentPrecision = t);
            },
          },
        });
      var YS = ((t) => (
        (t[(t.INTERACTION = 50)] = "INTERACTION"),
        (t[(t.HIGH = 25)] = "HIGH"),
        (t[(t.NORMAL = 0)] = "NORMAL"),
        (t[(t.LOW = -25)] = "LOW"),
        (t[(t.UTILITY = -50)] = "UTILITY"),
        t
      ))(YS || {});
      class WS {
        constructor(t, e = null, i = 0, r = !1) {
          (this.next = null),
            (this.previous = null),
            (this._destroyed = !1),
            (this.fn = t),
            (this.context = e),
            (this.priority = i),
            (this.once = r);
        }
        match(t, e = null) {
          return this.fn === t && this.context === e;
        }
        emit(t) {
          this.fn &&
            (this.context ? this.fn.call(this.context, t) : this.fn(t));
          const e = this.next;
          return (
            this.once && this.destroy(!0),
            this._destroyed && (this.next = null),
            e
          );
        }
        connect(t) {
          (this.previous = t),
            t.next && (t.next.previous = this),
            (this.next = t.next),
            (t.next = this);
        }
        destroy(t = !1) {
          (this._destroyed = !0),
            (this.fn = null),
            (this.context = null),
            this.previous && (this.previous.next = this.next),
            this.next && (this.next.previous = this.previous);
          const e = this.next;
          return (this.next = t ? null : e), (this.previous = null), e;
        }
      }
      const qS = class t {
        constructor() {
          (this.autoStart = !1),
            (this.deltaTime = 1),
            (this.lastTime = -1),
            (this.speed = 1),
            (this.started = !1),
            (this._requestId = null),
            (this._maxElapsedMS = 100),
            (this._minElapsedMS = 0),
            (this._protected = !1),
            (this._lastFrame = -1),
            (this._head = new WS(null, null, 1 / 0)),
            (this.deltaMS = 1 / t.targetFPMS),
            (this.elapsedMS = 1 / t.targetFPMS),
            (this._tick = (t) => {
              (this._requestId = null),
                this.started &&
                  (this.update(t),
                  this.started &&
                    null === this._requestId &&
                    this._head.next &&
                    (this._requestId = requestAnimationFrame(this._tick)));
            });
        }
        _requestIfNeeded() {
          null === this._requestId &&
            this._head.next &&
            ((this.lastTime = performance.now()),
            (this._lastFrame = this.lastTime),
            (this._requestId = requestAnimationFrame(this._tick)));
        }
        _cancelIfNeeded() {
          null !== this._requestId &&
            (cancelAnimationFrame(this._requestId), (this._requestId = null));
        }
        _startIfPossible() {
          this.started
            ? this._requestIfNeeded()
            : this.autoStart && this.start();
        }
        add(t, e, i = YS.NORMAL) {
          return this._addListener(new WS(t, e, i));
        }
        addOnce(t, e, i = YS.NORMAL) {
          return this._addListener(new WS(t, e, i, !0));
        }
        _addListener(t) {
          let e = this._head.next,
            i = this._head;
          if (e) {
            for (; e; ) {
              if (t.priority > e.priority) {
                t.connect(i);
                break;
              }
              (i = e), (e = e.next);
            }
            t.previous || t.connect(i);
          } else t.connect(i);
          return this._startIfPossible(), this;
        }
        remove(t, e) {
          let i = this._head.next;
          for (; i; ) i = i.match(t, e) ? i.destroy() : i.next;
          return this._head.next || this._cancelIfNeeded(), this;
        }
        get count() {
          if (!this._head) return 0;
          let t = 0,
            e = this._head;
          for (; (e = e.next); ) t++;
          return t;
        }
        start() {
          this.started || ((this.started = !0), this._requestIfNeeded());
        }
        stop() {
          this.started && ((this.started = !1), this._cancelIfNeeded());
        }
        destroy() {
          if (!this._protected) {
            this.stop();
            let t = this._head.next;
            for (; t; ) t = t.destroy(!0);
            this._head.destroy(), (this._head = null);
          }
        }
        update(e = performance.now()) {
          let i;
          if (e > this.lastTime) {
            if (
              ((i = this.elapsedMS = e - this.lastTime),
              i > this._maxElapsedMS && (i = this._maxElapsedMS),
              (i *= this.speed),
              this._minElapsedMS)
            ) {
              const t = (e - this._lastFrame) | 0;
              if (t < this._minElapsedMS) return;
              this._lastFrame = e - (t % this._minElapsedMS);
            }
            (this.deltaMS = i), (this.deltaTime = this.deltaMS * t.targetFPMS);
            const r = this._head;
            let n = r.next;
            for (; n; ) n = n.emit(this.deltaTime);
            r.next || this._cancelIfNeeded();
          } else this.deltaTime = this.deltaMS = this.elapsedMS = 0;
          this.lastTime = e;
        }
        get FPS() {
          return 1e3 / this.elapsedMS;
        }
        get minFPS() {
          return 1e3 / this._maxElapsedMS;
        }
        set minFPS(e) {
          const i = Math.min(this.maxFPS, e),
            r = Math.min(Math.max(0, i) / 1e3, t.targetFPMS);
          this._maxElapsedMS = 1 / r;
        }
        get maxFPS() {
          return this._minElapsedMS ? Math.round(1e3 / this._minElapsedMS) : 0;
        }
        set maxFPS(t) {
          if (0 === t) this._minElapsedMS = 0;
          else {
            const e = Math.max(this.minFPS, t);
            this._minElapsedMS = 1 / (e / 1e3);
          }
        }
        static get shared() {
          if (!t._shared) {
            const e = (t._shared = new t());
            (e.autoStart = !0), (e._protected = !0);
          }
          return t._shared;
        }
        static get system() {
          if (!t._system) {
            const e = (t._system = new t());
            (e.autoStart = !0), (e._protected = !0);
          }
          return t._system;
        }
      };
      qS.targetFPMS = 0.06;
      let $S = qS;
      Object.defineProperties(ow, {
        TARGET_FPMS: {
          get: () => $S.targetFPMS,
          set(t) {
            Ew(
              "7.1.0",
              "settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"
            ),
              ($S.targetFPMS = t);
          },
        },
      });
      var KS = ((t) => (
        (t.Renderer = "renderer"),
        (t.Application = "application"),
        (t.RendererSystem = "renderer-webgl-system"),
        (t.RendererPlugin = "renderer-webgl-plugin"),
        (t.CanvasRendererSystem = "renderer-canvas-system"),
        (t.CanvasRendererPlugin = "renderer-canvas-plugin"),
        (t.Asset = "asset"),
        (t.LoadParser = "load-parser"),
        (t.ResolveParser = "resolve-parser"),
        (t.CacheParser = "cache-parser"),
        (t.DetectionParser = "detection-parser"),
        t
      ))(KS || {});
      const JS = (t) => {
          if ("function" == typeof t || ("object" == typeof t && t.extension)) {
            if (!t.extension)
              throw new Error("Extension class must have an extension object");
            t = {
              ...("object" != typeof t.extension
                ? { type: t.extension }
                : t.extension),
              ref: t,
            };
          }
          if ("object" != typeof t) throw new Error("Invalid extension type");
          return (
            "string" == typeof (t = { ...t }).type && (t.type = [t.type]), t
          );
        },
        ZS = (t, e) => JS(t).priority ?? e,
        QS = {
          _addHandlers: {},
          _removeHandlers: {},
          _queue: {},
          remove(...t) {
            return (
              t.map(JS).forEach((t) => {
                t.type.forEach((e) => this._removeHandlers[e]?.(t));
              }),
              this
            );
          },
          add(...t) {
            return (
              t.map(JS).forEach((t) => {
                t.type.forEach((e) => {
                  const i = this._addHandlers,
                    r = this._queue;
                  i[e] ? i[e]?.(t) : ((r[e] = r[e] || []), r[e]?.push(t));
                });
              }),
              this
            );
          },
          handle(t, e, i) {
            const r = this._addHandlers,
              n = this._removeHandlers;
            if (r[t] || n[t])
              throw new Error(`Extension type ${t} already has a handler`);
            (r[t] = e), (n[t] = i);
            const o = this._queue;
            return o[t] && (o[t]?.forEach((t) => e(t)), delete o[t]), this;
          },
          handleByMap(t, e) {
            return this.handle(
              t,
              (t) => {
                t.name && (e[t.name] = t.ref);
              },
              (t) => {
                t.name && delete e[t.name];
              }
            );
          },
          handleByList(t, e, i = -1) {
            return this.handle(
              t,
              (t) => {
                e.includes(t.ref) ||
                  (e.push(t.ref), e.sort((t, e) => ZS(e, i) - ZS(t, i)));
              },
              (t) => {
                const i = e.indexOf(t.ref);
                -1 !== i && e.splice(i, 1);
              }
            );
          },
        };
      class tE {
        static init(t) {
          (t = Object.assign({ autoStart: !0, sharedTicker: !1 }, t)),
            Object.defineProperty(this, "ticker", {
              set(t) {
                this._ticker && this._ticker.remove(this.render, this),
                  (this._ticker = t),
                  t && t.add(this.render, this, YS.LOW);
              },
              get() {
                return this._ticker;
              },
            }),
            (this.stop = () => {
              this._ticker.stop();
            }),
            (this.start = () => {
              this._ticker.start();
            }),
            (this._ticker = null),
            (this.ticker = t.sharedTicker ? $S.shared : new $S()),
            t.autoStart && this.start();
        }
        static destroy() {
          if (this._ticker) {
            const t = this._ticker;
            (this.ticker = null), t.destroy();
          }
        }
      }
      (tE.extension = KS.Application), QS.add(tE);
      gT.handleByList(fT.Renderer, []);
      class eE {
        constructor(t) {
          this.renderer = t;
        }
        contextChange(t) {
          let e;
          if (1 === this.renderer.context.webGLVersion) {
            const i = t.getParameter(t.FRAMEBUFFER_BINDING);
            t.bindFramebuffer(t.FRAMEBUFFER, null),
              (e = t.getParameter(t.SAMPLES)),
              t.bindFramebuffer(t.FRAMEBUFFER, i);
          } else {
            const i = t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);
            t.bindFramebuffer(t.DRAW_FRAMEBUFFER, null),
              (e = t.getParameter(t.SAMPLES)),
              t.bindFramebuffer(t.DRAW_FRAMEBUFFER, i);
          }
          e >= iw.HIGH
            ? (this.multisample = iw.HIGH)
            : e >= iw.MEDIUM
            ? (this.multisample = iw.MEDIUM)
            : e >= iw.LOW
            ? (this.multisample = iw.LOW)
            : (this.multisample = iw.NONE);
        }
        destroy() {}
      }
      (eE.extension = { type: fT.RendererSystem, name: "_multisample" }),
        gT.add(eE);
      class iE {
        constructor(t) {
          (this.buffer = t || null),
            (this.updateID = -1),
            (this.byteLength = -1),
            (this.refCount = 0);
        }
      }
      class rE {
        constructor(t) {
          (this.renderer = t),
            (this.managedBuffers = {}),
            (this.boundBufferBases = {});
        }
        destroy() {
          this.renderer = null;
        }
        contextChange() {
          this.disposeAll(!0),
            (this.gl = this.renderer.gl),
            (this.CONTEXT_UID = this.renderer.CONTEXT_UID);
        }
        bind(t) {
          const { gl: e, CONTEXT_UID: i } = this,
            r = t._glBuffers[i] || this.createGLBuffer(t);
          e.bindBuffer(t.type, r.buffer);
        }
        unbind(t) {
          const { gl: e } = this;
          e.bindBuffer(t, null);
        }
        bindBufferBase(t, e) {
          const { gl: i, CONTEXT_UID: r } = this;
          if (this.boundBufferBases[e] !== t) {
            const n = t._glBuffers[r] || this.createGLBuffer(t);
            (this.boundBufferBases[e] = t),
              i.bindBufferBase(i.UNIFORM_BUFFER, e, n.buffer);
          }
        }
        bindBufferRange(t, e, i) {
          const { gl: r, CONTEXT_UID: n } = this;
          i = i || 0;
          const o = t._glBuffers[n] || this.createGLBuffer(t);
          r.bindBufferRange(r.UNIFORM_BUFFER, e || 0, o.buffer, 256 * i, 256);
        }
        update(t) {
          const { gl: e, CONTEXT_UID: i } = this,
            r = t._glBuffers[i] || this.createGLBuffer(t);
          if (t._updateID !== r.updateID)
            if (
              ((r.updateID = t._updateID),
              e.bindBuffer(t.type, r.buffer),
              r.byteLength >= t.data.byteLength)
            )
              e.bufferSubData(t.type, 0, t.data);
            else {
              const i = t.static ? e.STATIC_DRAW : e.DYNAMIC_DRAW;
              (r.byteLength = t.data.byteLength),
                e.bufferData(t.type, t.data, i);
            }
        }
        dispose(t, e) {
          if (!this.managedBuffers[t.id]) return;
          delete this.managedBuffers[t.id];
          const i = t._glBuffers[this.CONTEXT_UID],
            r = this.gl;
          t.disposeRunner.remove(this),
            i &&
              (e || r.deleteBuffer(i.buffer),
              delete t._glBuffers[this.CONTEXT_UID]);
        }
        disposeAll(t) {
          const e = Object.keys(this.managedBuffers);
          for (let i = 0; i < e.length; i++)
            this.dispose(this.managedBuffers[e[i]], t);
        }
        createGLBuffer(t) {
          const { CONTEXT_UID: e, gl: i } = this;
          return (
            (t._glBuffers[e] = new iE(i.createBuffer())),
            (this.managedBuffers[t.id] = t),
            t.disposeRunner.add(this),
            t._glBuffers[e]
          );
        }
      }
      (rE.extension = { type: fT.RendererSystem, name: "buffer" }), gT.add(rE);
      class nE {
        constructor(t) {
          this.renderer = t;
        }
        render(t, e) {
          const i = this.renderer;
          let r, n, o, s;
          if (
            (e &&
              ((r = e.renderTexture),
              (n = e.clear),
              (o = e.transform),
              (s = e.skipUpdateTransform)),
            (this.renderingToScreen = !r),
            i.runners.prerender.emit(),
            i.emit("prerender"),
            (i.projection.transform = o),
            !i.context.isLost)
          ) {
            if ((r || (this.lastObjectRendered = t), !s)) {
              const e = t.enableTempParent();
              t.updateTransform(), t.disableTempParent(e);
            }
            i.renderTexture.bind(r),
              i.batch.currentRenderer.start(),
              (n ?? i.background.clearBeforeRender) && i.renderTexture.clear(),
              t.render(i),
              i.batch.currentRenderer.flush(),
              r && (e.blit && i.framebuffer.blit(), r.baseTexture.update()),
              i.runners.postrender.emit(),
              (i.projection.transform = null),
              i.emit("postrender");
          }
        }
        destroy() {
          (this.renderer = null), (this.lastObjectRendered = null);
        }
      }
      (nE.extension = { type: fT.RendererSystem, name: "objectRenderer" }),
        gT.add(nE);
      const oE = class t extends US {
        constructor(e) {
          super(),
            (this.type = Gx.WEBGL),
            (e = Object.assign({}, ow.RENDER_OPTIONS, e)),
            (this.gl = null),
            (this.CONTEXT_UID = 0),
            (this.globalUniforms = new SA({ projectionMatrix: new KT() }, !0));
          const i = {
            runners: [
              "init",
              "destroy",
              "contextChange",
              "resolutionChange",
              "reset",
              "update",
              "postrender",
              "prerender",
              "resize",
            ],
            systems: t.__systems,
            priority: [
              "_view",
              "textureGenerator",
              "background",
              "_plugin",
              "startup",
              "context",
              "state",
              "texture",
              "buffer",
              "geometry",
              "framebuffer",
              "transformFeedback",
              "mask",
              "scissor",
              "stencil",
              "projection",
              "textureGC",
              "filter",
              "renderTexture",
              "batch",
              "objectRenderer",
              "_multisample",
            ],
          };
          this.setup(i),
            "useContextAlpha" in e &&
              (Ew(
                "7.0.0",
                "options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"
              ),
              (e.premultipliedAlpha =
                e.useContextAlpha && "notMultiplied" !== e.useContextAlpha),
              (e.backgroundAlpha =
                !1 === e.useContextAlpha ? 1 : e.backgroundAlpha)),
            (this._plugin.rendererPlugins = t.__plugins),
            (this.options = e),
            this.startup.run(this.options);
        }
        static test(t) {
          return (
            !t?.forceCanvas &&
            (typeof Cw > "u" &&
              (Cw = (function () {
                const t = {
                  stencil: !0,
                  failIfMajorPerformanceCaveat:
                    ow.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT,
                };
                try {
                  if (!ow.ADAPTER.getWebGLRenderingContext()) return !1;
                  const e = ow.ADAPTER.createCanvas();
                  let i =
                    e.getContext("webgl", t) ||
                    e.getContext("experimental-webgl", t);
                  const r = !!i?.getContextAttributes()?.stencil;
                  if (i) {
                    const t = i.getExtension("WEBGL_lose_context");
                    t && t.loseContext();
                  }
                  return (i = null), r;
                } catch {
                  return !1;
                }
              })()),
            Cw)
          );
        }
        render(t, e) {
          this.objectRenderer.render(t, e);
        }
        resize(t, e) {
          this._view.resizeView(t, e);
        }
        reset() {
          return this.runners.reset.emit(), this;
        }
        clear() {
          this.renderTexture.bind(), this.renderTexture.clear();
        }
        destroy(t = !1) {
          this.runners.destroy.items.reverse(),
            this.emitWithCustomOptions(this.runners.destroy, { _view: t }),
            super.destroy();
        }
        get plugins() {
          return this._plugin.plugins;
        }
        get multisample() {
          return this._multisample.multisample;
        }
        get width() {
          return this._view.element.width;
        }
        get height() {
          return this._view.element.height;
        }
        get resolution() {
          return this._view.resolution;
        }
        set resolution(t) {
          (this._view.resolution = t), this.runners.resolutionChange.emit(t);
        }
        get autoDensity() {
          return this._view.autoDensity;
        }
        get view() {
          return this._view.element;
        }
        get screen() {
          return this._view.screen;
        }
        get lastObjectRendered() {
          return this.objectRenderer.lastObjectRendered;
        }
        get renderingToScreen() {
          return this.objectRenderer.renderingToScreen;
        }
        get rendererLogId() {
          return `WebGL ${this.context.webGLVersion}`;
        }
        get clearBeforeRender() {
          return (
            Ew(
              "7.0.0",
              "renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."
            ),
            this.background.clearBeforeRender
          );
        }
        get useContextAlpha() {
          return (
            Ew(
              "7.0.0",
              "renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."
            ),
            this.context.useContextAlpha
          );
        }
        get preserveDrawingBuffer() {
          return (
            Ew(
              "7.0.0",
              "renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"
            ),
            this.context.preserveDrawingBuffer
          );
        }
        get backgroundColor() {
          return (
            Ew(
              "7.0.0",
              "renderer.backgroundColor has been deprecated, use renderer.background.color instead."
            ),
            this.background.color
          );
        }
        set backgroundColor(t) {
          Ew(
            "7.0.0",
            "renderer.backgroundColor has been deprecated, use renderer.background.color instead."
          ),
            (this.background.color = t);
        }
        get backgroundAlpha() {
          return (
            Ew(
              "7.0.0",
              "renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."
            ),
            this.background.alpha
          );
        }
        set backgroundAlpha(t) {
          Ew(
            "7.0.0",
            "renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."
          ),
            (this.background.alpha = t);
        }
        get powerPreference() {
          return (
            Ew(
              "7.0.0",
              "renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"
            ),
            this.context.powerPreference
          );
        }
        generateTexture(t, e) {
          return this.textureGenerator.generateTexture(t, e);
        }
      };
      (oE.extension = { type: fT.Renderer, priority: 1 }),
        (oE.__plugins = {}),
        (oE.__systems = {});
      let sE = oE;
      gT.handleByMap(fT.RendererPlugin, sE.__plugins),
        gT.handleByMap(fT.RendererSystem, sE.__systems),
        gT.add(sE);
      class aE extends ET {
        constructor(t, e) {
          const { width: i, height: r } = e || {};
          super(i, r), (this.items = []), (this.itemDirtyIds = []);
          for (let e = 0; e < t; e++) {
            const t = new BT();
            this.items.push(t), this.itemDirtyIds.push(-2);
          }
          (this.length = t), (this._load = null), (this.baseTexture = null);
        }
        initFromArray(t, e) {
          for (let i = 0; i < this.length; i++)
            t[i] &&
              (t[i].castToBaseTexture
                ? this.addBaseTextureAt(t[i].castToBaseTexture(), i)
                : t[i] instanceof ET
                ? this.addResourceAt(t[i], i)
                : this.addResourceAt(AT(t[i], e), i));
        }
        dispose() {
          for (let t = 0, e = this.length; t < e; t++) this.items[t].destroy();
          (this.items = null), (this.itemDirtyIds = null), (this._load = null);
        }
        addResourceAt(t, e) {
          if (!this.items[e]) throw new Error(`Index ${e} is out of bounds`);
          return (
            t.valid && !this.valid && this.resize(t.width, t.height),
            this.items[e].setResource(t),
            this
          );
        }
        bind(t) {
          if (null !== this.baseTexture)
            throw new Error(
              "Only one base texture per TextureArray is allowed"
            );
          super.bind(t);
          for (let e = 0; e < this.length; e++)
            (this.items[e].parentTextureArray = t),
              this.items[e].on("update", t.update, t);
        }
        unbind(t) {
          super.unbind(t);
          for (let e = 0; e < this.length; e++)
            (this.items[e].parentTextureArray = null),
              this.items[e].off("update", t.update, t);
        }
        load() {
          if (this._load) return this._load;
          const t = this.items
            .map((t) => t.resource)
            .filter((t) => t)
            .map((t) => t.load());
          return (
            (this._load = Promise.all(t).then(() => {
              const { realWidth: t, realHeight: e } = this.items[0];
              return this.resize(t, e), this.update(), Promise.resolve(this);
            })),
            this._load
          );
        }
      }
      const hE = class t extends aE {
        constructor(e, i) {
          const {
            width: r,
            height: n,
            autoLoad: o,
            linkBaseTexture: s,
          } = i || {};
          if (e && e.length !== t.SIDES)
            throw new Error(`Invalid length. Got ${e.length}, expected 6`);
          super(6, { width: r, height: n });
          for (let e = 0; e < t.SIDES; e++)
            this.items[e].target = Hx.TEXTURE_CUBE_MAP_POSITIVE_X + e;
          (this.linkBaseTexture = !1 !== s),
            e && this.initFromArray(e, i),
            !1 !== o && this.load();
        }
        bind(t) {
          super.bind(t), (t.target = Hx.TEXTURE_CUBE_MAP);
        }
        addBaseTextureAt(t, e, i) {
          if ((void 0 === i && (i = this.linkBaseTexture), !this.items[e]))
            throw new Error(`Index ${e} is out of bounds`);
          if (
            !this.linkBaseTexture ||
            t.parentTextureArray ||
            Object.keys(t._glTextures).length > 0
          ) {
            if (!t.resource)
              throw new Error(
                "CubeResource does not support copying of renderTexture."
              );
            this.addResourceAt(t.resource, e);
          } else
            (t.target = Hx.TEXTURE_CUBE_MAP_POSITIVE_X + e),
              (t.parentTextureArray = this.baseTexture),
              (this.items[e] = t);
          return (
            t.valid && !this.valid && this.resize(t.realWidth, t.realHeight),
            (this.items[e] = t),
            this
          );
        }
        upload(e, i, r) {
          const n = this.itemDirtyIds;
          for (let o = 0; o < t.SIDES; o++) {
            const t = this.items[o];
            (n[o] < t.dirtyId || r.dirtyId < i.dirtyId) &&
              (t.valid && t.resource
                ? (t.resource.upload(e, t, r), (n[o] = t.dirtyId))
                : n[o] < -1 &&
                  (e.gl.texImage2D(
                    t.target,
                    0,
                    r.internalFormat,
                    i.realWidth,
                    i.realHeight,
                    0,
                    i.format,
                    r.type,
                    null
                  ),
                  (n[o] = -1)));
          }
          return !0;
        }
        static test(e) {
          return Array.isArray(e) && e.length === t.SIDES;
        }
      };
      hE.SIDES = 6;
      let uE = hE;
      class lE extends GA {
        constructor(t, e) {
          let i, r, n;
          (e = e || {}),
            "string" == typeof t
              ? ((i = lE.EMPTY), (r = t), (n = !0))
              : ((i = t), (r = null), (n = !1)),
            super(i),
            (this.url = r),
            (this.crossOrigin = e.crossOrigin ?? !0),
            (this.alphaMode =
              "number" == typeof e.alphaMode ? e.alphaMode : null),
            (this.ownsImageBitmap = e.ownsImageBitmap ?? n),
            (this._load = null),
            !1 !== e.autoLoad && this.load();
        }
        load() {
          return (
            this._load ||
              (this._load = new Promise(async (t, e) => {
                if (null !== this.url)
                  try {
                    const e = await ow.ADAPTER.fetch(this.url, {
                      mode: this.crossOrigin ? "cors" : "no-cors",
                    });
                    if (this.destroyed) return;
                    const i = await e.blob();
                    if (this.destroyed) return;
                    const r = await createImageBitmap(i, {
                      premultiplyAlpha:
                        null === this.alphaMode || this.alphaMode === Jx.UNPACK
                          ? "premultiply"
                          : "none",
                    });
                    if (this.destroyed) return void r.close();
                    (this.source = r), this.update(), t(this);
                  } catch (t) {
                    if (this.destroyed) return;
                    e(t), this.onError.emit(t);
                  }
                else t(this);
              })),
            this._load
          );
        }
        upload(t, e, i) {
          return this.source instanceof ImageBitmap
            ? ("number" == typeof this.alphaMode &&
                (e.alphaMode = this.alphaMode),
              super.upload(t, e, i))
            : (this.load(), !1);
        }
        dispose() {
          this.ownsImageBitmap &&
            this.source instanceof ImageBitmap &&
            this.source.close(),
            super.dispose(),
            (this._load = null);
        }
        static test(t) {
          return (
            !!globalThis.createImageBitmap &&
            typeof ImageBitmap < "u" &&
            ("string" == typeof t || t instanceof ImageBitmap)
          );
        }
        static get EMPTY() {
          return (
            (lE._EMPTY = lE._EMPTY ?? ow.ADAPTER.createCanvas(0, 0)), lE._EMPTY
          );
        }
      }
      const cE = class t extends GA {
        constructor(t, e) {
          (e = e || {}),
            super(ow.ADAPTER.createCanvas()),
            (this._width = 0),
            (this._height = 0),
            (this.svg = t),
            (this.scale = e.scale || 1),
            (this._overrideWidth = e.width),
            (this._overrideHeight = e.height),
            (this._resolve = null),
            (this._crossorigin = e.crossorigin),
            (this._load = null),
            !1 !== e.autoLoad && this.load();
        }
        load() {
          return (
            this._load ||
              (this._load = new Promise((e) => {
                if (
                  ((this._resolve = () => {
                    this.update(), e(this);
                  }),
                  t.SVG_XML.test(this.svg.trim()))
                ) {
                  if (!btoa)
                    throw new Error(
                      "Your browser doesn't support base64 conversions."
                    );
                  this.svg = `data:image/svg+xml;base64,${btoa(
                    unescape(encodeURIComponent(this.svg))
                  )}`;
                }
                this._loadSvg();
              })),
            this._load
          );
        }
        _loadSvg() {
          const t = new Image();
          GA.crossOrigin(t, this.svg, this._crossorigin),
            (t.src = this.svg),
            (t.onerror = (e) => {
              this._resolve && ((t.onerror = null), this.onError.emit(e));
            }),
            (t.onload = () => {
              if (!this._resolve) return;
              const e = t.width,
                i = t.height;
              if (!e || !i)
                throw new Error(
                  "The SVG image must have width and height defined (in pixels), canvas API needs them."
                );
              let r = e * this.scale,
                n = i * this.scale;
              (this._overrideWidth || this._overrideHeight) &&
                ((r = this._overrideWidth || (this._overrideHeight / i) * e),
                (n = this._overrideHeight || (this._overrideWidth / e) * i)),
                (r = Math.round(r)),
                (n = Math.round(n));
              const o = this.source;
              (o.width = r),
                (o.height = n),
                (o._pixiId = `canvas_${uT()}`),
                o.getContext("2d").drawImage(t, 0, 0, e, i, 0, 0, r, n),
                this._resolve(),
                (this._resolve = null);
            });
        }
        static getSize(e) {
          const i = t.SVG_SIZE.exec(e),
            r = {};
          return (
            i &&
              ((r[i[1]] = Math.round(parseFloat(i[3]))),
              (r[i[5]] = Math.round(parseFloat(i[7])))),
            r
          );
        }
        dispose() {
          super.dispose(), (this._resolve = null), (this._crossorigin = null);
        }
        static test(e, i) {
          return (
            "svg" === i ||
            ("string" == typeof e && e.startsWith("data:image/svg+xml")) ||
            ("string" == typeof e && t.SVG_XML.test(e))
          );
        }
      };
      (cE.SVG_XML = /^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m),
        (cE.SVG_SIZE =
          /<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i);
      let dE = cE;
      const pE = class t extends GA {
        constructor(e, i) {
          if (((i = i || {}), !(e instanceof HTMLVideoElement))) {
            const r = document.createElement("video");
            !1 !== i.autoLoad && r.setAttribute("preload", "auto"),
              !1 !== i.playsinline &&
                (r.setAttribute("webkit-playsinline", ""),
                r.setAttribute("playsinline", "")),
              !0 === i.muted && (r.setAttribute("muted", ""), (r.muted = !0)),
              !0 === i.loop && r.setAttribute("loop", ""),
              !1 !== i.autoPlay && r.setAttribute("autoplay", ""),
              "string" == typeof e && (e = [e]);
            const n = e[0].src || e[0];
            GA.crossOrigin(r, n, i.crossorigin);
            for (let i = 0; i < e.length; ++i) {
              const n = document.createElement("source");
              let { src: o, mime: s } = e[i];
              if (((o = o || e[i]), o.startsWith("data:")))
                s = o.slice(5, o.indexOf(";"));
              else if (!o.startsWith("blob:")) {
                const e = o.split("?").shift().toLowerCase(),
                  i = e.slice(e.lastIndexOf(".") + 1);
                s = s || t.MIME_TYPES[i] || `video/${i}`;
              }
              (n.src = o), s && (n.type = s), r.appendChild(n);
            }
            e = r;
          }
          super(e),
            (this.noSubImage = !0),
            (this._autoUpdate = !0),
            (this._isConnectedToTicker = !1),
            (this._updateFPS = i.updateFPS || 0),
            (this._msToNextUpdate = 0),
            (this.autoPlay = !1 !== i.autoPlay),
            (this._videoFrameRequestCallback =
              this._videoFrameRequestCallback.bind(this)),
            (this._videoFrameRequestCallbackHandle = null),
            (this._load = null),
            (this._resolve = null),
            (this._reject = null),
            (this._onCanPlay = this._onCanPlay.bind(this)),
            (this._onError = this._onError.bind(this)),
            (this._onPlayStart = this._onPlayStart.bind(this)),
            (this._onPlayStop = this._onPlayStop.bind(this)),
            (this._onSeeked = this._onSeeked.bind(this)),
            !1 !== i.autoLoad && this.load();
        }
        update(t = 0) {
          if (!this.destroyed) {
            if (this._updateFPS) {
              const t = $S.shared.elapsedMS * this.source.playbackRate;
              this._msToNextUpdate = Math.floor(this._msToNextUpdate - t);
            }
            (!this._updateFPS || this._msToNextUpdate <= 0) &&
              (super.update(),
              (this._msToNextUpdate = this._updateFPS
                ? Math.floor(1e3 / this._updateFPS)
                : 0));
          }
        }
        _videoFrameRequestCallback() {
          this.update(),
            this.destroyed
              ? (this._videoFrameRequestCallbackHandle = null)
              : (this._videoFrameRequestCallbackHandle =
                  this.source.requestVideoFrameCallback(
                    this._videoFrameRequestCallback
                  ));
        }
        load() {
          if (this._load) return this._load;
          const t = this.source;
          return (
            (t.readyState === t.HAVE_ENOUGH_DATA ||
              t.readyState === t.HAVE_FUTURE_DATA) &&
              t.width &&
              t.height &&
              (t.complete = !0),
            t.addEventListener("play", this._onPlayStart),
            t.addEventListener("pause", this._onPlayStop),
            t.addEventListener("seeked", this._onSeeked),
            this._isSourceReady()
              ? this._onCanPlay()
              : (t.addEventListener("canplay", this._onCanPlay),
                t.addEventListener("canplaythrough", this._onCanPlay),
                t.addEventListener("error", this._onError, !0)),
            (this._load = new Promise((e, i) => {
              this.valid
                ? e(this)
                : ((this._resolve = e), (this._reject = i), t.load());
            })),
            this._load
          );
        }
        _onError(t) {
          this.source.removeEventListener("error", this._onError, !0),
            this.onError.emit(t),
            this._reject &&
              (this._reject(t), (this._reject = null), (this._resolve = null));
        }
        _isSourcePlaying() {
          const t = this.source;
          return !t.paused && !t.ended;
        }
        _isSourceReady() {
          return this.source.readyState > 2;
        }
        _onPlayStart() {
          this.valid || this._onCanPlay(), this._configureAutoUpdate();
        }
        _onPlayStop() {
          this._configureAutoUpdate();
        }
        _onSeeked() {
          this._autoUpdate &&
            !this._isSourcePlaying() &&
            ((this._msToNextUpdate = 0),
            this.update(),
            (this._msToNextUpdate = 0));
        }
        _onCanPlay() {
          const t = this.source;
          t.removeEventListener("canplay", this._onCanPlay),
            t.removeEventListener("canplaythrough", this._onCanPlay);
          const e = this.valid;
          (this._msToNextUpdate = 0),
            this.update(),
            (this._msToNextUpdate = 0),
            !e &&
              this._resolve &&
              (this._resolve(this),
              (this._resolve = null),
              (this._reject = null)),
            this._isSourcePlaying()
              ? this._onPlayStart()
              : this.autoPlay && t.play();
        }
        dispose() {
          this._configureAutoUpdate();
          const t = this.source;
          t &&
            (t.removeEventListener("play", this._onPlayStart),
            t.removeEventListener("pause", this._onPlayStop),
            t.removeEventListener("seeked", this._onSeeked),
            t.removeEventListener("canplay", this._onCanPlay),
            t.removeEventListener("canplaythrough", this._onCanPlay),
            t.removeEventListener("error", this._onError, !0),
            t.pause(),
            (t.src = ""),
            t.load()),
            super.dispose();
        }
        get autoUpdate() {
          return this._autoUpdate;
        }
        set autoUpdate(t) {
          t !== this._autoUpdate &&
            ((this._autoUpdate = t), this._configureAutoUpdate());
        }
        get updateFPS() {
          return this._updateFPS;
        }
        set updateFPS(t) {
          t !== this._updateFPS &&
            ((this._updateFPS = t), this._configureAutoUpdate());
        }
        _configureAutoUpdate() {
          this._autoUpdate && this._isSourcePlaying()
            ? !this._updateFPS && this.source.requestVideoFrameCallback
              ? (this._isConnectedToTicker &&
                  ($S.shared.remove(this.update, this),
                  (this._isConnectedToTicker = !1),
                  (this._msToNextUpdate = 0)),
                null === this._videoFrameRequestCallbackHandle &&
                  (this._videoFrameRequestCallbackHandle =
                    this.source.requestVideoFrameCallback(
                      this._videoFrameRequestCallback
                    )))
              : (null !== this._videoFrameRequestCallbackHandle &&
                  (this.source.cancelVideoFrameCallback(
                    this._videoFrameRequestCallbackHandle
                  ),
                  (this._videoFrameRequestCallbackHandle = null)),
                this._isConnectedToTicker ||
                  ($S.shared.add(this.update, this),
                  (this._isConnectedToTicker = !0),
                  (this._msToNextUpdate = 0)))
            : (null !== this._videoFrameRequestCallbackHandle &&
                (this.source.cancelVideoFrameCallback(
                  this._videoFrameRequestCallbackHandle
                ),
                (this._videoFrameRequestCallbackHandle = null)),
              this._isConnectedToTicker &&
                ($S.shared.remove(this.update, this),
                (this._isConnectedToTicker = !1),
                (this._msToNextUpdate = 0)));
        }
        static test(e, i) {
          return (
            (globalThis.HTMLVideoElement && e instanceof HTMLVideoElement) ||
            t.TYPES.includes(i)
          );
        }
      };
      (pE.TYPES = ["mp4", "m4v", "webm", "ogg", "ogv", "h264", "avi", "mov"]),
        (pE.MIME_TYPES = {
          ogv: "video/ogg",
          mov: "video/quicktime",
          m4v: "video/mp4",
        });
      let _E = pE;
      TT.push(
        lE,
        VA,
        class extends GA {
          constructor(t) {
            super(t);
          }
          static test(t) {
            const { OffscreenCanvas: e } = globalThis;
            return (
              !!(e && t instanceof e) ||
              (globalThis.HTMLCanvasElement && t instanceof HTMLCanvasElement)
            );
          }
        },
        _E,
        class extends GA {
          constructor(t) {
            super(t);
          }
          static test(t) {
            return (
              !!globalThis.VideoFrame && t instanceof globalThis.VideoFrame
            );
          }
        },
        dE,
        CT,
        uE,
        class extends aE {
          constructor(t, e) {
            const { width: i, height: r } = e || {};
            let n, o;
            Array.isArray(t) ? ((n = t), (o = t.length)) : (o = t),
              super(o, { width: i, height: r }),
              n && this.initFromArray(n, e);
          }
          addBaseTextureAt(t, e) {
            if (!t.resource)
              throw new Error("ArrayResource does not support RenderTexture");
            return this.addResourceAt(t.resource, e), this;
          }
          bind(t) {
            super.bind(t), (t.target = Hx.TEXTURE_2D_ARRAY);
          }
          upload(t, e, i) {
            const { length: r, itemDirtyIds: n, items: o } = this,
              { gl: s } = t;
            i.dirtyId < 0 &&
              s.texImage3D(
                s.TEXTURE_2D_ARRAY,
                0,
                i.internalFormat,
                this._width,
                this._height,
                r,
                0,
                e.format,
                i.type,
                null
              );
            for (let t = 0; t < r; t++) {
              const r = o[t];
              n[t] < r.dirtyId &&
                ((n[t] = r.dirtyId),
                r.valid &&
                  s.texSubImage3D(
                    s.TEXTURE_2D_ARRAY,
                    0,
                    0,
                    0,
                    t,
                    r.resource.width,
                    r.resource.height,
                    1,
                    e.format,
                    i.type,
                    r.resource.source
                  ));
            }
            return !0;
          }
        }
      );
      const fE = class extends IA {
        constructor(t = 1, e = 0, i = 0.1, r = 1, n = !1) {
          super(
            "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",
            "varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterClamp;\n\nuniform float uAlpha;\nuniform vec2 uThickness;\nuniform vec4 uColor;\nuniform bool uKnockout;\n\nconst float DOUBLE_PI = 2. * 3.14159265358979323846264;\nconst float ANGLE_STEP = ${angleStep};\n\nfloat outlineMaxAlphaAtPos(vec2 pos) {\n    if (uThickness.x == 0. || uThickness.y == 0.) {\n        return 0.;\n    }\n\n    vec4 displacedColor;\n    vec2 displacedPos;\n    float maxAlpha = 0.;\n\n    for (float angle = 0.; angle <= DOUBLE_PI; angle += ANGLE_STEP) {\n        displacedPos.x = vTextureCoord.x + uThickness.x * cos(angle);\n        displacedPos.y = vTextureCoord.y + uThickness.y * sin(angle);\n        displacedColor = texture2D(uSampler, clamp(displacedPos, filterClamp.xy, filterClamp.zw));\n        maxAlpha = max(maxAlpha, displacedColor.a);\n    }\n\n    return maxAlpha;\n}\n\nvoid main(void) {\n    vec4 sourceColor = texture2D(uSampler, vTextureCoord);\n    vec4 contentColor = sourceColor * float(!uKnockout);\n    float outlineAlpha = uAlpha * outlineMaxAlphaAtPos(vTextureCoord.xy) * (1.-sourceColor.a);\n    vec4 outlineColor = vec4(vec3(uColor) * outlineAlpha, outlineAlpha);\n    gl_FragColor = contentColor + outlineColor;\n}\n".replace(
              /\$\{angleStep\}/,
              fE.getAngleStep(i)
            )
          ),
            (this._thickness = 1),
            (this._alpha = 1),
            (this._knockout = !1),
            (this.uniforms.uThickness = new Float32Array([0, 0])),
            (this.uniforms.uColor = new Float32Array([0, 0, 0, 1])),
            (this.uniforms.uAlpha = r),
            (this.uniforms.uKnockout = n),
            Object.assign(this, {
              thickness: t,
              color: e,
              quality: i,
              alpha: r,
              knockout: n,
            });
        }
        static getAngleStep(t) {
          const e = Math.max(t * fE.MAX_SAMPLES, fE.MIN_SAMPLES);
          return ((2 * Math.PI) / e).toFixed(7);
        }
        apply(t, e, i, r) {
          (this.uniforms.uThickness[0] = this._thickness / e._frame.width),
            (this.uniforms.uThickness[1] = this._thickness / e._frame.height),
            (this.uniforms.uAlpha = this._alpha),
            (this.uniforms.uKnockout = this._knockout),
            t.applyFilter(this, e, i, r);
        }
        get alpha() {
          return this._alpha;
        }
        set alpha(t) {
          this._alpha = t;
        }
        get color() {
          return (
            (t = this.uniforms.uColor),
            Ew(
              "7.2.0",
              "utils.rgb2hex is deprecated, use Color#toNumber instead"
            ),
            iT.shared.setValue(t).toNumber()
          );
          var t;
        }
        set color(t) {
          !(function (t, e = []) {
            Ew(
              "7.2.0",
              "utils.hex2rgb is deprecated, use Color#toRgbArray instead"
            ),
              iT.shared.setValue(t).toRgbArray(e);
          })(t, this.uniforms.uColor);
        }
        get knockout() {
          return this._knockout;
        }
        set knockout(t) {
          this._knockout = t;
        }
        get thickness() {
          return this._thickness;
        }
        set thickness(t) {
          (this._thickness = t), (this.padding = t);
        }
      };
      let mE = fE;
      (mE.MIN_SAMPLES = 1), (mE.MAX_SAMPLES = 100);
      const yE = (function () {
          function t() {
            (this._powerup = null),
              (this._target = null),
              (this._targetFilter = null),
              (this._moveTween = null);
          }
          return (
            Object.defineProperty(t.prototype, "powerup", {
              set: function (t) {
                this._powerup = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "target", {
              get: function () {
                return this._target;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.init = function () {
              console.assert(
                null != this._powerup,
                "DestroyMousePowerup.ts :: init() :: this._powerup cannot be null."
              ),
                (this._targetFilter = new mE(2, 16777215)),
                this._powerup.layers.bg.on(
                  "pointertap",
                  this._onPointerTap,
                  this
                );
            }),
            (t.prototype._onPointerTap = function () {
              var t = this;
              this._moveTween &&
                (this._moveTween.kill(), (this._moveTween = null));
              var e = EE.i.layers.actor.toLocal(
                  Jv.app.renderer.plugins.interaction.eventData.data.global
                ),
                i = Math.sqrt(
                  Math.pow(this._powerup.crosshair.x - e.x, 2) +
                    Math.pow(this._powerup.crosshair.y - e.y, 2)
                );
              (this._moveTween = new Uc.core.Tween(this._powerup.crosshair, {
                x: e.x,
                y: e.y,
                duration: i / 1e3,
                ease: "sine.inOut",
                onComplete: function () {
                  t._moveTween.kill(), (t._moveTween = null);
                },
              })),
                EE.i.tweenGroup.add(this._moveTween),
                Jv.audio.playSfx("button_click");
            }),
            (t.prototype.end = function () {
              this._powerup.layers.bg.off(
                "pointertap",
                this._onPointerTap,
                this
              ),
                this._target && (this._target.filters = null),
                this._moveTween &&
                  (this._moveTween.kill(), (this._moveTween = null));
            }),
            (t.prototype.update = function (t) {
              var e = null;
              this.isMovingCrosshair() ||
                ((e = EE.i.world.findPlacedBlockAt(
                  this._powerup.crosshair.position
                )) &&
                  e != this._target &&
                  (this._target &&
                    (this._powerup.layers.block.addChild(this._target),
                    (this._target.filters = null)),
                  (this._target = e),
                  (this._target.filters = [this._targetFilter]),
                  this._powerup.layers.current.addChild(e))),
                !e &&
                  this._target &&
                  (this._powerup.layers.block.addChild(this._target),
                  (this._target.filters = null),
                  (this._target = null));
            }),
            (t.prototype.isMovingCrosshair = function () {
              return this._moveTween && this._moveTween.isActive();
            }),
            t
          );
        })(),
        gE = (function () {
          function t() {
            (this._powerup = null),
              (this._target = null),
              (this._targetFilter = null),
              (this._pointerDownPos = null),
              (this._state = null),
              (this._moveTween = null);
          }
          return (
            Object.defineProperty(t.prototype, "powerup", {
              set: function (t) {
                this._powerup = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "target", {
              get: function () {
                return this._target;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.init = function () {
              console.assert(
                null != this._powerup,
                "DestroyTouchPowerup.ts :: init() :: this._powerup cannot be null."
              ),
                (this._targetFilter = new mE(2, 16777215)),
                this._powerup.layers.bg.on(
                  "pointerdown",
                  this._onPointerDown,
                  this
                ),
                this._powerup.layers.bg.on(
                  "pointerup",
                  this._onPointerUp,
                  this
                ),
                this._powerup.layers.bg.on(
                  "pointerupoutside",
                  this._onPointerUp,
                  this
                ),
                this._powerup.layers.bg.on(
                  "pointermove",
                  this._onPointerMove,
                  this
                );
            }),
            (t.prototype._onPointerDown = function () {
              (this._pointerDownPos = EE.i.toLocal(
                Jv.app.renderer.plugins.interaction.eventData.data.global
              )),
                (this._state = 1);
            }),
            (t.prototype._onPointerUp = function () {
              var t = this;
              if (
                (this._moveTween &&
                  (this._moveTween.kill(), (this._moveTween = null)),
                (this._pointerDownPos = null),
                1 == this._state)
              ) {
                var e = EE.i.layers.actor.toLocal(
                    Jv.app.renderer.plugins.interaction.eventData.data.global
                  ),
                  i = Math.sqrt(
                    Math.pow(this._powerup.crosshair.x - e.x, 2) +
                      Math.pow(this._powerup.crosshair.y - e.y, 2)
                  );
                (this._moveTween = new Uc.core.Tween(this._powerup.crosshair, {
                  x: e.x,
                  y: e.y,
                  duration: i / 1e3,
                  ease: "sine.inOut",
                  onComplete: function () {
                    t._moveTween.kill(), (t._moveTween = null);
                  },
                })),
                  EE.i.tweenGroup.add(this._moveTween),
                  Jv.audio.playSfx("button_click");
              }
              this._state = 0;
            }),
            (t.prototype._onPointerMove = function () {
              if (this._pointerDownPos && 1 == this._state) {
                var t = EE.i.toLocal(
                  Jv.app.renderer.plugins.interaction.eventData.data.global
                );
                Math.pow(this._pointerDownPos.x - t.x, 2) +
                  Math.pow(this._pointerDownPos.y - t.y, 2) >
                  100 && (this._state = 2);
              }
            }),
            (t.prototype.end = function () {
              this._powerup.layers.bg.off(
                "pointerdown",
                this._onPointerDown,
                this
              ),
                this._powerup.layers.bg.off(
                  "pointerup",
                  this._onPointerUp,
                  this
                ),
                this._powerup.layers.bg.off(
                  "pointerupoutside",
                  this._onPointerUp,
                  this
                ),
                this._powerup.layers.bg.off(
                  "pointermove",
                  this._onPointerMove,
                  this
                ),
                this._target && (this._target.filters = null),
                this._moveTween &&
                  (this._moveTween.kill(), (this._moveTween = null));
            }),
            (t.prototype.update = function (t) {
              if (2 == this._state) {
                var e = EE.i.toLocal(
                    Jv.app.renderer.plugins.interaction.eventData.data.global
                  ),
                  i = new Vt();
                (i.x = e.x - this._pointerDownPos.x),
                  (i.y = e.y - this._pointerDownPos.y);
                var r = Math.sqrt(Math.pow(i.x, 2) + Math.pow(i.y, 2));
                (i.x /= r),
                  (i.y /= r),
                  (this._powerup.crosshair.x += 50 * i.x * t),
                  (this._powerup.crosshair.y += 50 * i.y * t);
              }
              var n = null;
              this.isMovingCrosshair() ||
                ((n = EE.i.world.findPlacedBlockAt(
                  this._powerup.crosshair.position
                )) &&
                  n != this._target &&
                  (this._target &&
                    (this._powerup.layers.block.addChild(this._target),
                    (this._target.filters = null)),
                  (this._target = n),
                  (this._target.filters = [this._targetFilter]),
                  this._powerup.layers.current.addChild(n))),
                !n &&
                  this._target &&
                  (this._powerup.layers.block.addChild(this._target),
                  (this._target.filters = null),
                  (this._target = null));
            }),
            (t.prototype.isMovingCrosshair = function () {
              return this._moveTween && this._moveTween.isActive();
            }),
            t
          );
        })();
      var vE = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        bE = function (t) {
          var e = "function" == typeof Symbol && Symbol.iterator,
            i = e && t[e],
            r = 0;
          if (i) return i.call(t);
          if (t && "number" == typeof t.length)
            return {
              next: function () {
                return (
                  t && r >= t.length && (t = void 0),
                  { value: t && t[r++], done: !t }
                );
              },
            };
          throw new TypeError(
            e ? "Object is not iterable." : "Symbol.iterator is not defined."
          );
        },
        xE = (function (t) {
          function e() {
            var e = t.call(this, 2) || this;
            return (
              (e._layers = null),
              (e._crosshair = null),
              (e._confirmText = null),
              (e._cancelText = null),
              (e._confirmBtn = null),
              (e._cancelBtn = null),
              (e._explosionAnim = null),
              (e._tl = null),
              (e._isExplosion = null),
              (e._isConfirmed = null),
              e
            );
          }
          return (
            vE(e, t),
            Object.defineProperty(e.prototype, "layers", {
              get: function () {
                return this._layers;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "crosshair", {
              get: function () {
                return this._crosshair;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "isConfirmed", {
              get: function () {
                return this._isConfirmed;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.init = function () {
              var e,
                i,
                r = this;
              t.prototype.init.call(this),
                (this._isExplosion = !1),
                (this._isConfirmed = !1),
                (this._layers = {
                  bg: new To(),
                  block: new ce(),
                  fg: new To(),
                  ground: new ce(),
                  current: new ce(),
                  crosshair: new ce(),
                  hud: new ce(),
                }),
                EE.i.layers.destroyPowerup.addChild(this._layers.bg),
                EE.i.layers.destroyPowerup.addChild(this._layers.block),
                EE.i.layers.destroyPowerup.addChild(this._layers.fg),
                EE.i.layers.destroyPowerup.addChild(this._layers.ground),
                EE.i.layers.destroyPowerup.addChild(this._layers.current),
                EE.i.layers.destroyPowerup.addChild(this._layers.crosshair),
                EE.i.layers.destroyPowerup.addChild(this._layers.hud),
                this._layers.bg.beginFill(0, 1),
                this._layers.bg.drawRect(
                  -Jv.app.safeAreaMarginX,
                  -Jv.app.safeAreaMarginY,
                  Jv.app.safeAreaWidth,
                  Jv.app.safeAreaHeight
                ),
                this._layers.bg.endFill(),
                (this._layers.bg.interactive = !0),
                this._layers.fg.beginFill(0, 0.4),
                this._layers.fg.drawRect(
                  -Jv.app.safeAreaMarginX,
                  -Jv.app.safeAreaMarginY,
                  Jv.app.safeAreaWidth,
                  Jv.app.safeAreaHeight
                ),
                this._layers.fg.endFill(),
                this._layers.ground.addChild(EE.i.world.ground);
              try {
                for (
                  var n = bE(EE.i.world.blocks), o = n.next();
                  !o.done;
                  o = n.next()
                ) {
                  var s = o.value;
                  this._layers.block.addChild(s);
                }
              } catch (t) {
                e = { error: t };
              } finally {
                try {
                  o && !o.done && (i = n.return) && i.call(n);
                } finally {
                  if (e) throw e.error;
                }
              }
              (this._layers.block.y = EE.i.layers.actor.y),
                (this._layers.ground.y = EE.i.layers.actor.y),
                (this._layers.current.y = EE.i.layers.actor.y),
                (this._layers.crosshair.y = EE.i.layers.actor.y),
                (this._layers.hud.interactiveChildren = !1),
                (this._crosshair = new Co(
                  Jv.resources.destroy_crosshair.texture
                )),
                this._crosshair.anchor.set(0.5),
                this._crosshair.position.set(
                  0.5 * Jv.app.width,
                  0.5 * Jv.app.height - EE.i.layers.actor.y
                ),
                this._layers.crosshair.addChild(this._crosshair),
                (this._cancelBtn = new jb({
                  on: "destroy_cancel_button",
                  pressed: "destroy_cancel_button_pressed",
                })),
                this._cancelBtn.anchor.set(0.5),
                this._cancelBtn.position.set(
                  0.5 * this._cancelBtn.width + 20,
                  Jv.app.height - 0.5 * this._cancelBtn.height - 20
                ),
                this._layers.hud.addChild(this._cancelBtn),
                this._cancelBtn.on("pointertap", this._onCancelBtn_Click, this),
                (this._cancelText = new Lo("Cancel", {
                  fontFamily: "tilt_warp_regular",
                  dropShadow: !0,
                  dropShadowAngle: 0.7,
                  dropShadowBlur: 2,
                  dropShadowDistance: 4,
                  fill: "#ffffff",
                  fontSize: 40,
                  strokeThickness: 4,
                  lineJoin: "round",
                })),
                this._cancelText.anchor.set(0.5, 1),
                this._cancelText.position.set(
                  this._cancelBtn.x,
                  this._cancelBtn.y - 0.5 * this._cancelBtn.height - 20
                ),
                this._layers.hud.addChild(this._cancelText),
                (this._confirmBtn = new jb({
                  on: "destroy_confirm_button",
                  pressed: "destroy_confirm_button_pressed",
                })),
                this._confirmBtn.anchor.set(0.5),
                this._confirmBtn.position.set(
                  Jv.app.width - 0.5 * this._confirmBtn.width - 20,
                  this._cancelBtn.y
                ),
                this._layers.hud.addChild(this._confirmBtn),
                this._confirmBtn.on(
                  "pointertap",
                  this._onConfirmBtn_Click,
                  this
                ),
                (this._confirmText = new Lo("Confirm", {
                  fontFamily: "tilt_warp_regular",
                  dropShadow: !0,
                  dropShadowAngle: 0.7,
                  dropShadowBlur: 2,
                  dropShadowDistance: 4,
                  fill: "#ffffff",
                  fontSize: 40,
                  strokeThickness: 4,
                  lineJoin: "round",
                })),
                this._confirmText.anchor.set(0.5, 1),
                this._confirmText.position.set(
                  this._confirmBtn.x,
                  this._confirmBtn.y - 0.5 * this._confirmBtn.height - 20
                ),
                this._layers.hud.addChild(this._confirmText),
                Jv.app.renderer.plugins.interaction.supportsTouchEvents
                  ? (this._input = new gE())
                  : (this._input = new yE()),
                (this._input.powerup = this),
                this._input.init(),
                (this._explosionAnim = new Zs(
                  Xb.createTexArray("destroy_explosion_", 17)
                )),
                (this._explosionAnim.loop = !1),
                (this._explosionAnim.animationSpeed = 20),
                (this._explosionAnim.autoUpdate = !1),
                this._explosionAnim.anchor.set(0.5),
                this._layers.crosshair.addChild(this._explosionAnim),
                (this._explosionAnim.visible = !1),
                Jv.audio.playSfx("laser_powerup"),
                (this._tl = new Uc.core.Timeline()),
                this._tl.from(
                  this._layers.bg,
                  { alpha: 0, duration: 1, ease: "sine.Out" },
                  0
                ),
                this._tl.from(
                  this._layers.fg,
                  { alpha: 0, duration: 1, ease: "sine.Out" },
                  0
                ),
                this._tl.from(
                  this._crosshair.scale,
                  { x: 0, y: 0, duration: 0.6, ease: "back.Out" },
                  0
                ),
                this._tl.from(
                  this._crosshair,
                  { angle: 270, duration: 0.6, ease: "sine.Out" },
                  0
                ),
                this._tl.to(
                  this._crosshair.scale,
                  {
                    x: 1.1,
                    y: 1.1,
                    duration: 0.5,
                    ease: "sine.inOut",
                    repeat: -1,
                    yoyo: !0,
                  },
                  0.6
                ),
                this._tl.from(
                  this._cancelBtn.scale,
                  { x: 0, y: 0, ease: "sine.Out" },
                  0
                ),
                this._tl.from(
                  this._confirmBtn.scale,
                  { x: 0, y: 0, ease: "sine.Out" },
                  0
                ),
                this._tl.call(
                  function () {
                    r._layers.hud.interactiveChildren = !0;
                  },
                  null,
                  1
                ),
                EE.i.tweenGroup.add(this._tl);
            }),
            (e.prototype._onCancelBtn_Click = function () {
              var t, e;
              if (!this._input.isMovingCrosshair()) {
                EE.i.layers.actor.addChild(this._layers.ground.children[0]);
                try {
                  for (
                    var i = bE(EE.i.world.blocks), r = i.next();
                    !r.done;
                    r = i.next()
                  ) {
                    var n = r.value;
                    EE.i.layers.actor.addChild(n);
                  }
                } catch (e) {
                  t = { error: e };
                } finally {
                  try {
                    r && !r.done && (e = i.return) && e.call(i);
                  } finally {
                    if (t) throw t.error;
                  }
                }
                this._onCompleted.dispatch(this);
              }
            }),
            (e.prototype._onConfirmBtn_Click = function () {
              this._input.isMovingCrosshair() ||
                (this._input.target &&
                  ((this._isExplosion = !0),
                  Jv.audio.playSfx("laser_explosion"),
                  this._explosionAnim.position.copyFrom(
                    this._crosshair.position
                  ),
                  (this._explosionAnim.visible = !0),
                  this._explosionAnim.play(),
                  this._tl.clear(),
                  this._tl.to(
                    this._input.target,
                    { alpha: 0, duration: 0.4, ease: "sine.out" },
                    0
                  ),
                  this._tl.to(
                    this._input.target.scale,
                    { x: 1.1, y: 1.1, duration: 0.4, ease: "sine.out" },
                    0
                  ),
                  this._tl.to(
                    this._crosshair,
                    { alpha: 0, duration: 0.4, ease: "sine.out" },
                    0
                  ),
                  this._tl.to(
                    this._crosshair.scale,
                    { x: 0.9, y: 0.9, duration: 0.4, ease: "sine.out" },
                    0
                  ),
                  this._tl.play(0),
                  (this._confirmText.visible = !1),
                  (this._confirmBtn.visible = !1),
                  (this._cancelText.visible = !1),
                  (this._cancelBtn.visible = !1),
                  (this._isConfirmed = !0)));
            }),
            (e.prototype.end = function () {
              this._tl.kill(),
                (this._tl = null),
                EE.i.layers.destroyPowerup.removeChildren(),
                this._input.end(),
                (this._input = null),
                t.prototype.end.call(this);
            }),
            (e.prototype.update = function (t) {
              var e, i;
              if (
                ((this._confirmBtn.interactive = null != this._input.target),
                (this._confirmBtn.alpha = this._confirmBtn.interactive
                  ? 1
                  : 0.6),
                this._isExplosion)
              ) {
                if (this._explosionAnim.playing) this._explosionAnim.update(t);
                else if (!this._tl.isActive()) {
                  EE.i.world.removeBlock(this._input.target),
                    EE.i.layers.actor.addChild(this._layers.ground.children[0]);
                  try {
                    for (
                      var r = bE(EE.i.world.blocks), n = r.next();
                      !n.done;
                      n = r.next()
                    ) {
                      var o = n.value;
                      EE.i.layers.actor.addChild(o);
                    }
                  } catch (t) {
                    e = { error: t };
                  } finally {
                    try {
                      n && !n.done && (i = r.return) && i.call(r);
                    } finally {
                      if (e) throw e.error;
                    }
                  }
                  this._onCompleted.dispatch(this);
                }
              } else this._input.update(t);
            }),
            e
          );
        })(sx);
      const wE = xE;
      var TE = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        AE = function (t) {
          var e = "function" == typeof Symbol && Symbol.iterator,
            i = e && t[e],
            r = 0;
          if (i) return i.call(t);
          if (t && "number" == typeof t.length)
            return {
              next: function () {
                return (
                  t && r >= t.length && (t = void 0),
                  { value: t && t[r++], done: !t }
                );
              },
            };
          throw new TypeError(
            e ? "Object is not iterable." : "Symbol.iterator is not defined."
          );
        },
        SE = (function (t) {
          function e() {
            var i = t.call(this) || this;
            return (
              (i._type = null),
              (i._state = null),
              (i._world = null),
              (i._layers = null),
              (i._input = null),
              (i._background = null),
              (i._foreground = null),
              (i._remainingTime = null),
              (i._raceTimer = null),
              (i._blockSpawner = null),
              (i._badBlockSpawner = null),
              (i._spotLight = null),
              (i._beam = null),
              (i._checkpoint = null),
              (i._arrRaceGoal = null),
              (i._hud = null),
              (i._score = null),
              (i._maxScore = null),
              (i._scoreUpdateTimer = null),
              (i._builtBlockCount = null),
              (i._droppedBlockCount = null),
              (i._remainingSeconds = null),
              (i._elapsedSeconds = null),
              (i._powerupAnim = null),
              (i._bubble = null),
              (i._arrAnim = null),
              (i._arrBindBlockPair = null),
              (i._bindTimer = null),
              (i._petrifiedBlock = null),
              (i._hitBlock = null),
              (i._bindBlock = null),
              (i._arrOutBlock = null),
              (i._arrUnbalanceBlock = null),
              (i._isPaused = null),
              (i._tutorial = null),
              (i._tweenGroup = null),
              (i._windStrength = null),
              (i._windTl = null),
              (i._reachedCheckpointCount = null),
              (i._onGameOver = null),
              (i._debug = null),
              (e._instance = i),
              i
            );
          }
          return (
            TE(e, t),
            Object.defineProperty(e.prototype, "type", {
              get: function () {
                return this._type;
              },
              set: function (t) {
                this._type = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "world", {
              get: function () {
                return this._world;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "layers", {
              get: function () {
                return this._layers;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "input", {
              get: function () {
                return this._input;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "background", {
              get: function () {
                return this._background;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "foreground", {
              get: function () {
                return this._foreground;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "remainingTime", {
              get: function () {
                return this._remainingTime;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "spotLight", {
              get: function () {
                return this._spotLight;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "beam", {
              get: function () {
                return this._beam;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "hud", {
              get: function () {
                return this._hud;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "score", {
              get: function () {
                return this._score;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "maxScore", {
              get: function () {
                return this._maxScore;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "builtBlockCount", {
              get: function () {
                return this._builtBlockCount;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "droppedBlockCount", {
              get: function () {
                return this._droppedBlockCount;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "elapsedSeconds", {
              get: function () {
                return this._elapsedSeconds;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "tutorial", {
              get: function () {
                return this._tutorial;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "tweenGroup", {
              get: function () {
                return this._tweenGroup;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "onGameOver", {
              get: function () {
                return this._onGameOver;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e, "i", {
              get: function () {
                return this._instance;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.init = function () {
              var t = this;
              console.assert(
                null !== this._type,
                "Game.ts :: init() :: this._type cannot be null."
              ),
                (this.interactive = !0),
                (this._onGameOver = new tb.Signal()),
                (this._state = 0 == this._type ? 1 : 0),
                (this._score = 0),
                (this._maxScore = 0),
                (this._scoreUpdateTimer = 0),
                (this._droppedBlockCount = 0),
                (this._remainingSeconds = 150),
                (this._bindTimer = 0),
                (this._elapsedSeconds = 0),
                (this._isPaused = !1),
                (this._arrAnim = []),
                (this._arrBindBlockPair = []),
                (this._hitBlock = null),
                (this._arrOutBlock = []),
                (this._arrUnbalanceBlock = []),
                (this._reachedCheckpointCount = 0),
                (this._tweenGroup = new qb()),
                this._tweenGroup.init(),
                (this._layers = this.createLayers()),
                this._layers.actor.addChild(new ce()),
                this._layers.actor.addChild(new ce()),
                this._layers.actor.addChild(new ce()),
                this._layers.actor.addChild(new ce()),
                this._layers.actor.addChild(new ce()),
                (this._layers.input.interactive = !0),
                this._layers.input.beginFill(16777215, 1e-5),
                this._layers.input.position.set(
                  -Jv.app.safeAreaMarginX,
                  -Jv.app.safeAreaMarginY
                ),
                this._layers.input.drawRect(
                  0,
                  0,
                  Jv.app.safeAreaWidth,
                  Jv.app.safeAreaHeight
                ),
                this._layers.input.endFill(),
                (this._background = new mx()),
                this._background.init(),
                this._layers.bg.addChild(this._background);
              var e = new URLSearchParams(window.location.search);
              switch (
                ((this._spotLight = new ox()),
                this._layers.bottom.addChild(this._spotLight),
                (this._beam = new Cx()),
                (this._beam.y = -Jv.app.safeAreaMarginY),
                this._layers.bottom.addChild(this._beam),
                (this._checkpoint = new bx()),
                this._checkpoint.init(),
                this._checkpoint.position.set(0.5 * Jv.app.width, 800),
                this._layers.actor.children[0].addChild(this._checkpoint),
                this._checkpoint.onAnimationCompleted.add(
                  this._onCheckpointAnimation_Completed,
                  this
                ),
                (this._foreground = new gx()),
                this._foreground.position.set(
                  -Jv.app.safeAreaMarginX,
                  Jv.app.height +
                    Jv.app.safeAreaMarginY -
                    0.7 * this._foreground.height
                ),
                this._layers.fg.addChild(this._foreground),
                this._type)
              ) {
                case 0:
                  (this._remainingTime = new Sx()),
                    this._layers.timer.addChild(this._remainingTime),
                    this._remainingTime.onRemainingTimeUpdated(
                      this._remainingSeconds
                    );
                  break;
                case 1:
                  (this._raceTimer = new Lx()),
                    this._layers.timer.addChild(this._raceTimer),
                    this._raceTimer.onTimeUpdated(this._elapsedSeconds),
                    (this._arrRaceGoal = []);
                  for (
                    var i =
                        Jv.app.height +
                        Jv.app.safeAreaMarginY -
                        Jv.resources.ground.texture.height,
                      r = i - 800 + 900,
                      n = 0;
                    n < 1;
                    ++n
                  ) {
                    var o = new Co(Jv.resources.race_goal.texture);
                    o.anchor.set(0.5, 1),
                      o.position.set(0.5 * Jv.app.width, i - r * (n + 1)),
                      this._layers.actor.children[2].addChild(o),
                      this._arrRaceGoal.push(o);
                    var s = new Lo(["GOAL!"][n], {
                      fontFamily: "tilt_warp_regular",
                      fontStyle: "italic",
                      dropShadow: !0,
                      dropShadowAngle: 0.7,
                      dropShadowBlur: 2,
                      dropShadowDistance: 4,
                      fill: "#ffffff",
                      fontSize: 0 == n ? 30 : 40,
                      strokeThickness: 4,
                      lineJoin: "round",
                    });
                    s.anchor.set(0.5, 1),
                      s.position.set(
                        0.5 * Jv.app.width,
                        o.y - o.texture.height - 4
                      ),
                      this._layers.actor.children[2].addChild(s);
                  }
                  this._checkpoint.limitCount = 2;
              }
              (this._blockSpawner = new wx()),
                this._blockSpawner.init(),
                this._layers.actor.addChild(this._blockSpawner),
                this._blockSpawner.onBlockSpawned.add(
                  this._onBlock_Spawned,
                  this
                ),
                (this._badBlockSpawner = new Px()),
                this._badBlockSpawner.init(),
                this._layers.actor.addChild(this._badBlockSpawner),
                this._badBlockSpawner.onBlockSpawned.add(
                  this._onBlock_Spawned,
                  this
                ),
                (this._hud = new rx()),
                this._hud.init(),
                this._layers.hud.addChild(this._hud),
                this._hud.powerupMenu.onPowerupTriggered.add(
                  this._onPowerup_Triggered,
                  this
                ),
                this._hud.onFinalCountdownCompleted.add(
                  this._onFinalCountdown_Completed,
                  this
                );
              var a = new To();
              if (
                (a.beginFill(16777215, 1e-5),
                a.drawRect(0, 0, Jv.app.safeAreaWidth, Jv.app.safeAreaHeight),
                a.endFill(),
                (a.interactive = !0),
                a.position.set(
                  -Jv.app.safeAreaMarginX,
                  -Jv.app.safeAreaMarginY
                ),
                this._layers.disabled.addChild(a),
                (this._layers.disabled.visible = !1),
                (this._world = new Wb()),
                this._world.init(),
                (this._input = new $b()),
                this._input.init(),
                0 == this._type &&
                  Jv.saved.data.tutorialStep < 8 &&
                  ((this._tutorial = new Fx()),
                  this._tutorial.init(),
                  this._layers.top.addChild(this._tutorial),
                  this._tutorial.onCompleted.addOnce(
                    this._onTutorial_Completed,
                    this
                  )),
                0 == this._type)
              ) {
                var h = this._world.createBlock(
                  0 == Jv.saved.data.tutorialStep ? 6 : null
                );
                h.onOut.addOnce(this._onBlock_Out, this),
                  h.onHit.addOnce(this._onBlock_Hit, this),
                  this._blockSpawner.spawn(h);
              } else
                1 == this._type &&
                  (this._hud.onRaceCountdownCompleted.addOnce(
                    this._onRaceCountdown_Completed,
                    this
                  ),
                  this._hud.startRaceCountdown(),
                  this._hud.hideScore());
              (this._debug = new To()),
                (this._debug.visible = !1),
                this._layers.actor.addChild(this._debug),
                (this._windStrength = 0);
              var u = e.has("wf") ? parseFloat(e.get("wf")) : 1;
              (this._windTl = new Uc.core.Timeline()),
                this._windTl.to(this, {
                  _windStrength: u,
                  duration: 2,
                  ease: "sine.inOut",
                  repeat: 1,
                  yoyo: !0,
                  onUpdate: function () {
                    t._world.physics.setGravity(
                      new Hv.Vec2(t._windStrength, 10)
                    );
                  },
                }),
                this._windTl.to(this, {
                  _windStrength: -u,
                  duration: 2,
                  ease: "sine.inOut",
                  repeat: 1,
                  yoyo: !0,
                  onUpdate: function () {
                    t._world.physics.setGravity(
                      new Hv.Vec2(t._windStrength, 10)
                    );
                  },
                }),
                this._tweenGroup.add(this._windTl),
                this._windTl.pause(0);
            }),
            (e.prototype.createLayers = function () {
              var t = {
                input: new To(),
                bg: new ce(),
                bottom: new ce(),
                timer: new ce(),
                actor: new ce(),
                vfx: new ce(),
                fg: new ce(),
                hud: new ce(),
                destroyPowerup: new ce(),
                top: new ce(),
                disabled: new ce(),
              };
              return (
                this.addChild(t.input),
                this.addChild(t.bg),
                this.addChild(t.bottom),
                this.addChild(t.timer),
                this.addChild(t.actor),
                this.addChild(t.vfx),
                this.addChild(t.fg),
                this.addChild(t.hud),
                this.addChild(t.destroyPowerup),
                this.addChild(t.top),
                this.addChild(t.disabled),
                t
              );
            }),
            (e.prototype._onBlock_Spawned = function (t) {
              (this._input.curBlock = t),
                this._beam.onBlockSpawnEnded(),
                this._spotLight.update(this._beam),
                t.fall(),
                this._tutorial &&
                  0 == Jv.saved.data.tutorialStep &&
                  (1 == this._world.spawnBlockCount
                    ? this._tutorial.show(0)
                    : 2 == this._world.spawnBlockCount &&
                      this._tutorial.show(2));
            }),
            (e.prototype._onBlock_Out = function (t) {
              if (
                ((this._droppedBlockCount += 1),
                t == e.i.world.curBlock &&
                  (this._spotLight.clear(),
                  this._beam.hide(),
                  null !== t.badModifierType &&
                    (this._beam.tint(16777215),
                    this._background.tint(16777215),
                    this._foreground.tint(16777215))),
                1 == this._state)
              )
                if (this._remainingTime) {
                  var i = 5;
                  t.type > 7 && (i = 10),
                    (this._remainingSeconds -= i),
                    this._remainingSeconds < 0 && (this._remainingSeconds = 0),
                    this._remainingTime.onTimePenalty();
                  var r = new Lo("-" + i.toString() + "s", {
                    fontFamily: "tilt_warp_regular",
                    dropShadow: !0,
                    dropShadowAngle: 0.7,
                    dropShadowBlur: 2,
                    dropShadowDistance: 4,
                    fill: "#da3a45",
                    fontSize: 50,
                    strokeThickness: 4,
                    lineJoin: "round",
                  });
                  (r.anchor.y = 1),
                    r.position.set(t.x, Jv.app.height),
                    (r.x -= 20),
                    this._layers.hud.addChild(r),
                    (n = new Uc.core.Timeline()).to(
                      r,
                      {
                        x: t.x + 20,
                        duration: 1,
                        repeat: 2,
                        yoyo: !0,
                        ease: "sine.inOut",
                      },
                      0
                    ),
                    n.to(
                      r,
                      { y: "-=80", duration: 2, ease: "linear.inOut" },
                      0
                    ),
                    n.to(r, { alpha: 0, duration: 0.4, ease: "sine.out" }, 1.6),
                    n.call(
                      function () {
                        r.parent.removeChild(r);
                      },
                      null,
                      ">"
                    ),
                    this._tweenGroup.add(n);
                } else if (this._raceTimer) {
                  (i = this._world.curBlock == t ? 10 : 5),
                    t.type > 7 && (i = 20),
                    (this._elapsedSeconds += i),
                    this._elapsedSeconds < 0 && (this._elapsedSeconds = 0),
                    this._raceTimer.onTimePenalty();
                  var n,
                    o = new Lo("+" + i.toString() + "s", {
                      fontFamily: "tilt_warp_regular",
                      dropShadow: !0,
                      dropShadowAngle: 0.7,
                      dropShadowBlur: 2,
                      dropShadowDistance: 4,
                      fill: "#da3a45",
                      fontSize: 50,
                      strokeThickness: 4,
                      lineJoin: "round",
                    });
                  (o.anchor.y = 1),
                    o.position.set(t.x, Jv.app.height),
                    (o.x -= 20),
                    this._layers.hud.addChild(o),
                    (n = new Uc.core.Timeline()).to(
                      o,
                      {
                        x: t.x + 20,
                        duration: 1,
                        repeat: 2,
                        yoyo: !0,
                        ease: "sine.inOut",
                      },
                      0
                    ),
                    n.to(
                      o,
                      { y: "-=80", duration: 2, ease: "linear.inOut" },
                      0
                    ),
                    n.to(o, { alpha: 0, duration: 0.4, ease: "sine.out" }, 1.6),
                    n.call(
                      function () {
                        o.parent.removeChild(o);
                      },
                      null,
                      ">"
                    ),
                    this._tweenGroup.add(n);
                }
              this._arrOutBlock.push(t);
            }),
            (e.prototype._onBlock_Hit = function (t) {
              this._spotLight.clear(),
                this._beam.hide(),
                null !== t.badModifierType &&
                  (this._beam.tint(16777215),
                  this._background.tint(16777215),
                  this._foreground.tint(16777215),
                  this._bubble && this._bubble.onHit()),
                (this._hitBlock = t);
            }),
            (e.prototype._onPowerup_Triggered = function (t) {
              if (
                !(
                  this._powerupAnim ||
                  !this._input.curBlock ||
                  (1 == t.powerupType &&
                    1 == e.i.world.curBlock.goodModifierType) ||
                  (0 == t.powerupType &&
                    2 == e.i.world.curBlock.goodModifierType) ||
                  (0 != e.i.world.curBlock.badModifierType &&
                    (1 == t.powerupType || 0 == t.powerupType))
                )
              ) {
                switch (t.powerupType) {
                  case 0:
                    this._powerupAnim = new hx();
                    break;
                  case 1:
                    this._powerupAnim = new lx();
                    break;
                  case 2:
                    this._powerupAnim = new wE();
                    break;
                  case 3:
                    this._powerupAnim = new dx();
                }
                this._powerupAnim.init(),
                  this._powerupAnim.onCompleted.add(
                    this._onPowerup_Completed,
                    this
                  ),
                  this._input.setEnabled(!1),
                  (this._hud.powerupMenu.interactiveChildren = !1),
                  2 != t.powerupType &&
                    this._hud.powerupMenu.removePowerup(t.powerupType),
                  this._world.pauseScroll();
              }
            }),
            (e.prototype._onPowerup_Completed = function (t) {
              if (
                (this._world.resumeScroll(),
                2 == t.type &&
                  t.isConfirmed &&
                  this._hud.powerupMenu.removePowerup(2),
                t.end(),
                (this._powerupAnim = null),
                this._input.setEnabled(!0),
                (this._hud.powerupMenu.interactiveChildren = !0),
                4 == this._state)
              ) {
                this._state = 1;
                var e = this._world.createBlock(null);
                e.onOut.addOnce(this._onBlock_Out, this),
                  e.onHit.addOnce(this._onBlock_Hit, this),
                  0 == e.badModifierType
                    ? this._blockSpawner.spawn(e)
                    : (this._badBlockSpawner.spawn(e),
                      1 == e.badModifierType && this._hud.setNoRotateButton());
              }
            }),
            (e.prototype._onFinalCountdown_Completed = function () {
              this._state = 4;
            }),
            (e.prototype._onCheckpointAnimation_Completed = function () {
              this._world.resumeScroll();
              var t = this._world.createBlock();
              t.onOut.addOnce(this._onBlock_Out, this),
                t.onHit.addOnce(this._onBlock_Hit, this),
                0 == t.badModifierType
                  ? this._blockSpawner.spawn(t)
                  : (this._badBlockSpawner.spawn(t),
                    1 == t.badModifierType && this._hud.setNoRotateButton()),
                this._tutorial &&
                  7 == Jv.saved.data.tutorialStep &&
                  this._tutorial.show(7);
            }),
            (e.prototype._onTutorial_Completed = function () {
              this._tutorial.end(),
                this._tutorial.parent.removeChild(this._tutorial),
                (this._tutorial = null);
            }),
            (e.prototype._onRaceCountdown_Completed = function () {
              (this._isPaused = !1), (this._state = 1);
              var t = this._world.createBlock(
                0 == Jv.saved.data.tutorialStep ? 6 : null
              );
              t.onOut.addOnce(this._onBlock_Out, this),
                t.onHit.addOnce(this._onBlock_Hit, this),
                this._blockSpawner.spawn(t);
            }),
            (e.prototype.end = function () {
              this._onGameOver.dispose(),
                (this._onGameOver = null),
                this._background.end(),
                (this._background = null),
                this._blockSpawner.end(),
                (this._blockSpawner = null),
                this._badBlockSpawner.end(),
                (this._badBlockSpawner = null),
                this._hud.end(),
                (this._hud = null),
                this._world.end(),
                (this._world = null),
                this._input.end(),
                (this._input = null),
                this._tutorial &&
                  (this._tutorial.end(), (this._tutorial = null)),
                this._tweenGroup.end(),
                (this._tweenGroup = null);
            }),
            (e.prototype.update = function (t) {
              if (!this._isPaused)
                if (0 != this._state)
                  if (this._powerupAnim) this._powerupAnim.update(t);
                  else {
                    if (this._tutorial && this._tutorial.isActive)
                      return (
                        this._beam.update(t),
                        void this._spotLight.update(this._beam)
                      );
                    if (
                      (this._checkpoint.update(t),
                      !this._checkpoint.isAnimating)
                    ) {
                      for (var e = this._arrAnim.length - 1; e >= 0; --e) {
                        var i = this._arrAnim[e];
                        i.update(t),
                          i.playing ||
                            (i.parent.removeChild(i),
                            this._arrAnim.splice(e, 1));
                      }
                      if (
                        (this._world.update(t),
                        this._input.update(t),
                        this._background.update(t),
                        this._foreground.update(t),
                        this._blockSpawner.update(t),
                        this._badBlockSpawner.update(t),
                        this._beam.update(t),
                        this._spotLight.update(this._beam),
                        this._bubble && this._bubble.update(t),
                        this._petrifiedBlock &&
                          (this._petrifiedBlock.body.setFixedRotation(!0),
                          (this._petrifiedBlock = null)),
                        (this._scoreUpdateTimer += t),
                        this._scoreUpdateTimer > 0.6)
                      ) {
                        this._scoreUpdateTimer = 0;
                        var r = Math.round(this._world.calcTowerTop());
                        this._score != r &&
                          (this._hud.onScoreUpdated(this._score, r),
                          (this._score = r),
                          r > this._maxScore && (this._maxScore = r));
                      }
                      if (1 == this._state)
                        switch (this._type) {
                          case 0:
                            if (
                              ((this._remainingSeconds -= t),
                              this._remainingSeconds < 1)
                            ) {
                              this._input.curBlock || this._world.curBlock
                                ? (this._remainingTime.onLastBlock(),
                                  (this._state = 2))
                                : ((this._hud.powerupMenu.visible = !1),
                                  (this._hud.rotateButton.visible = !1),
                                  (this._remainingTime.visible = !1),
                                  this._hud.startFinalCountdown(),
                                  (this._state = 3)),
                                (this._remainingSeconds = 0);
                              break;
                            }
                            this._remainingTime.onRemainingTimeUpdated(
                              this._remainingSeconds
                            );
                            break;
                          case 1:
                            (this._elapsedSeconds += t),
                              this._raceTimer.onTimeUpdated(
                                this._elapsedSeconds
                              );
                        }
                      else if (
                        4 == this._state &&
                        this._world.checkTowerStability() &&
                        !this._hud.isScoreActive()
                      )
                        if (0 == this._type)
                          (this._builtBlockCount =
                            this._world.calcTowerBlockCount()),
                            this._onGameOver.dispatch();
                        else if (
                          this._world.isTowerOverY(
                            this._arrRaceGoal[this._arrRaceGoal.length - 1].y
                          )
                        )
                          (this._builtBlockCount =
                            this._world.calcTowerBlockCount()),
                            this._onGameOver.dispatch();
                        else {
                          (this._state = 1),
                            (this._hud.powerupMenu.visible = !0),
                            (this._hud.rotateButton.visible = !0);
                          var n = this._world.createBlock(
                            0 == Jv.saved.data.tutorialStep ? 6 : null
                          );
                          n.onOut.addOnce(this._onBlock_Out, this),
                            n.onHit.addOnce(this._onBlock_Hit, this),
                            this._blockSpawner.spawn(n);
                        }
                      for (
                        this._hitBlock &&
                          (this._hitBlock.isExpanded || this._hitBlock.expand(),
                          1 == this._hitBlock.goodModifierType &&
                            ((this._bindTimer = 1),
                            (this._bindBlock = this._hitBlock)),
                          this._manageHitBlock(this._hitBlock),
                          (this._hitBlock = null)),
                          this._bindBlock &&
                            ((this._bindTimer -= t),
                            this._bindTimer > 0
                              ? (this._manageBind(this._bindBlock),
                                0 == this._bindBlock.goodModifierType &&
                                  ((this._bindBlock = null),
                                  (this._bindTimer = 0)))
                              : ((this._bindBlock = null),
                                (this._bindTimer = 0)));
                        this._arrOutBlock.length > 0;

                      )
                        this._manageOutBlock(this._arrOutBlock.pop());
                    }
                  }
                else this._background.update(t);
            }),
            (e.prototype._manageBind = function (t) {
              for (
                var i, r, n = new Array(), o = t.body.getContactList();
                o;

              ) {
                if (0 == o.other.getUserData().worldBodyType) {
                  var s = o.other.getUserData();
                  if (!n.includes(s))
                    for (var a = o.contact; a; ) {
                      if (a.isTouching()) {
                        n.push(s);
                        break;
                      }
                      a = a.getNext();
                    }
                }
                o = o.next;
              }
              try {
                for (var h = AE(n), u = h.next(); !u.done; u = h.next()) {
                  var l = u.value;
                  e.i.world.createJoint(t, l), l.onBound(t);
                }
              } catch (t) {
                i = { error: t };
              } finally {
                try {
                  u && !u.done && (r = h.return) && r.call(h);
                } finally {
                  if (i) throw i.error;
                }
              }
              n.length > 0 && (t.goodModifierType = 0);
            }),
            (e.prototype._manageHitBlock = function (t) {
              if (1 == this._state) {
                var e = t.getBounds(),
                  i = this._layers.actor.toLocal(new Vt(e.x, e.y)).y,
                  r = !1;
                this._arrRaceGoal &&
                  i < this._arrRaceGoal[0].y &&
                  ((r = !0), Jv.audio.playSfx("checkpoint_powerup"));
                var n = !1;
                if (
                  !r &&
                  i < this._checkpoint.y &&
                  this._checkpoint.isVisible()
                ) {
                  (this._reachedCheckpointCount += 1),
                    this._remainingTime &&
                      ((this._remainingSeconds += 45),
                      this._remainingTime.onExtraTime(),
                      this._remainingTime.onRemainingTimeUpdated(
                        this._remainingSeconds
                      ),
                      this._remainingTime.onCheckpointReached()),
                    this._world.pauseScroll();
                  var o = 0;
                  1 == this._type &&
                    this._reachedCheckpointCount % 2 == 0 &&
                    (o = 300),
                    this._checkpoint.onReached(o),
                    (n = !0),
                    Jv.audio.playSfx("checkpoint_powerup"),
                    this._tutorial && 6 == Jv.saved.data.tutorialStep
                      ? this._tutorial.show(6)
                      : this._hud.onWellDone();
                }
                if (n || (r && !(this._arrRaceGoal.length > 1)))
                  (this._input.curBlock = null), this._hud.setRotateButton();
                else {
                  var s = this._world.createBlock(
                    this._tutorial && 2 == this._tutorial.step ? 3 : null
                  );
                  s.onOut.addOnce(this._onBlock_Out, this),
                    s.onHit.addOnce(this._onBlock_Hit, this),
                    0 == s.badModifierType
                      ? this._blockSpawner.spawn(s)
                      : (this._badBlockSpawner.spawn(s),
                        1 == s.badModifierType &&
                          this._hud.setNoRotateButton());
                }
                if (r)
                  if (1 == this._arrRaceGoal.length)
                    (this._hud.powerupMenu.visible = !1),
                      (this._hud.rotateButton.visible = !1),
                      this._hud.startFinalCountdown(),
                      (this._state = 3);
                  else {
                    var a = this._layers.actor.children[2];
                    (a.children[0].alpha = 0.4),
                      (a.children[1].alpha = 0.4),
                      this._arrRaceGoal.shift(),
                      this._hud.onWellDone();
                  }
              } else
                2 == this._state &&
                  ((this._input.curBlock = null),
                  this._hud.setRotateButton(),
                  (this._hud.powerupMenu.visible = !1),
                  (this._hud.rotateButton.visible = !1),
                  this._remainingTime && (this._remainingTime.visible = !1),
                  this._hud.startFinalCountdown(),
                  (this._state = 3));
              var h = Math.round(
                this._world.ground.y - 0.5 * this._world.ground.height - t.y
              );
              for (
                this._score < h &&
                  (this._hud.onScoreUpdated(this._score, h), (this._score = h)),
                  h > this._maxScore && (this._maxScore = h),
                  this._windTl.play(0);
                this._arrUnbalanceBlock.length > 0;

              ) {
                var u = this._arrUnbalanceBlock.pop();
                u.body && u.body.setGravityScale(new Hv.Vec2(0, 1));
              }
              var l = t.body.getPosition();
              this._world.physics.queryAABB(
                new Hv.AABB(
                  new Hv.Vec2(l.x - 32 / this._world.kPTM, l.y),
                  new Hv.Vec2(
                    l.x + 32 / this._world.kPTM,
                    l.y + (0.5 * Jv.app.height) / this._world.kPTM
                  )
                ),
                this._hitQueryCallback.bind(this)
              );
            }),
            (e.prototype._hitQueryCallback = function (t) {
              if (0 == t.getBody().getUserData().worldBodyType) {
                var e = t.getBody().getUserData();
                e.body.setGravityScale(new Hv.Vec2(1, 1)),
                  this._arrUnbalanceBlock.push(e);
              }
              return !0;
            }),
            (e.prototype._manageOutBlock = function (t) {
              if (1 == this._state) {
                if (this._world.curBlock == t) {
                  var e = this._world.createBlock();
                  e.onOut.addOnce(this._onBlock_Out, this),
                    e.onHit.addOnce(this._onBlock_Hit, this),
                    0 == e.badModifierType
                      ? this._blockSpawner.spawn(e)
                      : (this._badBlockSpawner.spawn(e),
                        1 == e.badModifierType &&
                          this._hud.setNoRotateButton());
                }
              } else
                2 == this._state &&
                  t == this._world.curBlock &&
                  ((this._hud.powerupMenu.visible = !1),
                  (this._hud.rotateButton.visible = !1),
                  this._remainingTime && (this._remainingTime.visible = !1),
                  this._hud.startFinalCountdown(),
                  (this._state = 3));
              this._world.removeBlock(t);
            }),
            (e.prototype.pause = function () {
              Jv.audio.pause(0),
                Jv.audio.stopAmbient("track_0"),
                Jv.audio.playMusic("track_0", { loop: !0 }),
                (this._isPaused = !0),
                this._tweenGroup.pause();
            }),
            (e.prototype.resume = function () {
              Jv.audio.resume(0),
                Jv.audio.playAmbient("track_0", { loop: !0 }),
                Jv.audio.stopMusic(),
                (this._isPaused = !1),
                this._tweenGroup.resume();
            }),
            (e.prototype.addAnim = function (t) {
              this._arrAnim.push(t);
            }),
            (e.prototype.createBubble = function (t) {
              return (
                (this._bubble = new Ox()),
                (this._bubble.block = t),
                this._bubble.init(),
                this._bubble.position.copyFrom(t.position),
                e.i.layers.actor.addChild(this._bubble),
                this._bubble.onCompleted.addOnce(this._onBubble_Burst, this),
                this._bubble
              );
            }),
            (e.prototype._onBubble_Burst = function () {
              this._bubble.end(),
                this._bubble.parent.removeChild(this._bubble),
                (this._bubble = null);
            }),
            (e.prototype.bindBlocks = function (t, e) {
              var i,
                r,
                n = !1;
              try {
                for (
                  var o = AE(this._arrBindBlockPair), s = o.next();
                  !s.done;
                  s = o.next()
                ) {
                  var a = s.value;
                  if (a[0] == t && a[1] == e) {
                    n = !0;
                    break;
                  }
                }
              } catch (t) {
                i = { error: t };
              } finally {
                try {
                  s && !s.done && (r = o.return) && r.call(o);
                } finally {
                  if (i) throw i.error;
                }
              }
              n || this._arrBindBlockPair.push([t, e]);
            }),
            (e.prototype.petrify = function (t) {
              this._petrifiedBlock = t;
            }),
            (e.prototype.onExtraTime = function (t) {
              (this._remainingSeconds += t),
                this._remainingTime.onExtraTime(),
                this._remainingTime.onRemainingTimeUpdated(
                  this._remainingSeconds
                );
            }),
            (e.prototype.onExtraReward = function (t) {
              (this._hud.powerupMenu.visible = !0),
                (this._hud.rotateButton.visible = !0),
                this._remainingTime &&
                  ((this._remainingTime.visible = !0),
                  this._remainingTime.onExtraReward()),
                0 == this._type && (this._powerupAnim = new Ix()),
                this._powerupAnim.init(),
                this._powerupAnim.onCompleted.add(
                  this._onPowerup_Completed,
                  this
                ),
                this._input.setEnabled(!1),
                (this._hud.powerupMenu.interactiveChildren = !1),
                this._world.pauseScroll();
            }),
            (e._instance = null),
            e
          );
        })(ce);
      const EE = SE,
        CE = (function () {
          function t() {
            (this._root = null),
              (this._disabledBg = null),
              (this._onClosed = null);
          }
          return (
            Object.defineProperty(t.prototype, "onClosed", {
              get: function () {
                return this._onClosed;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.onEnter = function (t) {
              void 0 === t && (t = null),
                (this._onClosed = new tb.Signal()),
                (this._root = new ce()),
                Jv.app.root.addChild(this._root),
                (this._disabledBg = new To());
              var e = t && t.bgAlpha ? t.bgAlpha : 0.75;
              this._disabledBg.beginFill(0, e);
              var i = 0.5 * (Jv.app.safeAreaWidth - Jv.app.width),
                r = 0.5 * (Jv.app.safeAreaHeight - Jv.app.height);
              this._disabledBg.drawRect(
                -i,
                -r,
                Jv.app.safeAreaWidth,
                Jv.app.safeAreaHeight
              ),
                this._disabledBg.endFill(),
                (this._disabledBg.interactive = !0),
                this._root.addChild(this._disabledBg);
            }),
            (t.prototype.onLeave = function () {
              Jv.app.root.removeChild(this._root),
                this._root.destroy({ children: !0 }),
                (this._root = null),
                (this._disabledBg = null),
                this._onClosed.dispose(),
                (this._onClosed = null);
            }),
            (t.prototype.onUpdate = function (t) {}),
            (t.prototype.createTitle = function (t) {
              var e = new Lo(t, {
                fontSize: 92,
                fill: "white",
                stroke: "black",
                strokeThickness: 10,
                fontStyle: "italic",
              });
              return (
                e.anchor.set(0.5, 0), e.position.set(0.5 * Jv.app.width, 20), e
              );
            }),
            t
          );
        })();
      var ME = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        PE = (function (t) {
          function e() {
            var e = t.call(this) || this;
            return (
              (e._pageIndex = null),
              (e._base = null),
              (e._leftButton = null),
              (e._rightButton = null),
              (e._curPageIndicator = null),
              (e._arrPageSlot = null),
              (e._swipeStartX = null),
              (e._interactionManager = null),
              e
            );
          }
          return (
            ME(e, t),
            (e.prototype.onEnter = function () {
              var e = this;
              t.prototype.onEnter.call(this),
                (this._interactionManager =
                  Jv.app.renderer.plugins.interaction),
                (this._pageIndex = 0),
                (this._arrPageSlot = []),
                (this._base = new Co(Jv.resources.tut_00.texture)),
                this._base.position.set(
                  0.5 * Jv.app.width - 0.5 * this._base.width,
                  0.5 * Jv.app.height - 0.5 * this._base.height
                ),
                this._root.addChild(this._base);
              var i = new jb({
                on: "button_close",
                pressed: "button_close_pressed",
              });
              i.anchor.set(0.5),
                i.position.set(467, 47),
                this._base.addChild(i),
                i.once("pointertap", function () {
                  e._onClosed.dispatch(e);
                }),
                (this._leftButton = new jb({
                  on: "tut_arrow",
                  pressed: "tut_arrow_pressed",
                })),
                this._leftButton.anchor.set(0.5),
                (this._leftButton.visible = !1),
                (this._leftButton.scale.x = -1),
                this._leftButton.position.set(
                  0.5 * this._base.texture.width - 224 + 60,
                  580
                ),
                this._base.addChild(this._leftButton),
                this._leftButton.on(
                  "pointertap",
                  this._onLeftButton_Click,
                  this
                ),
                (this._rightButton = new jb({
                  on: "tut_arrow",
                  pressed: "tut_arrow_pressed",
                })),
                this._rightButton.anchor.set(0.5),
                this._rightButton.position.set(
                  0.5 * this._base.texture.width + 224 - 60,
                  this._leftButton.y
                ),
                this._base.addChild(this._rightButton),
                this._rightButton.on(
                  "pointertap",
                  this._onRightButton_Click,
                  this
                );
              for (var r = new ce(), n = 0; n < 4; ++n) {
                var o = new Co(Jv.resources.tut_navigation_base.texture);
                o.anchor.set(0.5),
                  (o.x = 50 * n + 0.5 * o.width),
                  r.addChild(o),
                  this._arrPageSlot.push(o);
              }
              r.position.set(
                0.5 * this._base.texture.width - 0.5 * r.width,
                this._leftButton.y
              ),
                this._base.addChild(r),
                (this._curPageIndicator = new Co(
                  Jv.resources.tut_navigation_dot.texture
                )),
                this._curPageIndicator.anchor.set(0.5),
                this._arrPageSlot[0].addChild(this._curPageIndicator),
                Jv.app.stage.on("pointerdown", this._onStage_PointerDown, this);
            }),
            (e.prototype._onLeftButton_Click = function () {
              this._pageIndex -= 1;
              var t = "tut_0" + this._pageIndex.toString();
              1 != this._pageIndex ||
                Jv.app.renderer.plugins.interaction.supportsTouchEvents ||
                (t += "_desktop"),
                (this._base.texture = Jv.resources[t].texture),
                0 == this._pageIndex && (this._leftButton.visible = !1),
                (this._rightButton.visible = !0),
                this._arrPageSlot[this._pageIndex].addChild(
                  this._curPageIndicator
                );
            }),
            (e.prototype._onRightButton_Click = function () {
              this._pageIndex += 1;
              var t = "tut_0" + this._pageIndex.toString();
              1 != this._pageIndex ||
                Jv.app.renderer.plugins.interaction.supportsTouchEvents ||
                (t += "_desktop"),
                (this._base.texture = Jv.resources[t].texture),
                3 == this._pageIndex && (this._rightButton.visible = !1),
                (this._leftButton.visible = !0),
                this._arrPageSlot[this._pageIndex].addChild(
                  this._curPageIndicator
                );
            }),
            (e.prototype._onStage_PointerDown = function () {
              this._base
                .getBounds()
                .contains(
                  this._interactionManager.eventData.data.global.x,
                  this._interactionManager.eventData.data.global.y
                ) &&
                ((this._swipeStartX =
                  this._interactionManager.eventData.data.global.x),
                Jv.app.stage.on("pointermove", this._onStage_PointerMove, this),
                Jv.app.stage.on("pointerup", this._onStage_PointerUp, this));
            }),
            (e.prototype._onStage_PointerMove = function () {
              if (
                Math.abs(
                  (this._interactionManager.eventData.data.global.x -
                    this._swipeStartX) /
                    Jv.app.root.scale.x
                ) >= 100
              ) {
                var t =
                  this._interactionManager.eventData.data.global.x >
                  this._swipeStartX;
                t && this._leftButton.visible
                  ? this._onLeftButton_Click()
                  : !t &&
                    this._rightButton.visible &&
                    this._onRightButton_Click(),
                  Jv.audio.playSfx("button_click"),
                  Jv.app.stage.off(
                    "pointermove",
                    this._onStage_PointerMove,
                    this
                  ),
                  Jv.app.stage.off("pointerup", this._onStage_PointerUp, this);
              }
            }),
            (e.prototype._onStage_PointerUp = function () {
              Jv.app.stage.off("pointermove", this._onStage_PointerMove, this),
                Jv.app.stage.off("pointerup", this._onStage_PointerUp, this);
            }),
            (e.prototype.onLeave = function () {
              Jv.app.stage.off("pointerdown", this._onStage_PointerDown, this),
                Jv.app.stage.off(
                  "pointermove",
                  this._onStage_PointerMove,
                  this
                ),
                Jv.app.stage.off("pointerup", this._onStage_PointerUp, this),
                t.prototype.onLeave.call(this);
            }),
            e
          );
        })(CE);
      const BE = PE;
      var OE = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        RE = (function (t) {
          function e() {
            var e = t.call(this) || this;
            return (
              (e._arrMusicButton = null),
              (e._arrSoundButton = null),
              (e._onHome = null),
              (e._onRestart = null),
              e
            );
          }
          return (
            OE(e, t),
            Object.defineProperty(e.prototype, "onHome", {
              get: function () {
                return this._onHome;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "onRestart", {
              get: function () {
                return this._onRestart;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.onEnter = function () {
              var e = this;
              t.prototype.onEnter.call(this),
                (this._onHome = new tb.Signal()),
                (this._onRestart = new tb.Signal());
              var i = new Co(Jv.resources.pause_base.texture);
              i.position.set(
                0.5 * Jv.app.width - 0.5 * i.width,
                0.5 * Jv.app.height - 0.5 * i.height
              ),
                this._root.addChild(i);
              var r = new jb({
                on: "button_close",
                pressed: "button_close_pressed",
              });
              r.anchor.set(0.5),
                r.position.set(451, 62),
                i.addChild(r),
                r.once("pointertap", function () {
                  Jv.audio.resume(0),
                    Jv.audio.resume(2),
                    e._onClosed.dispatch(e);
                }),
                (this._arrMusicButton = []),
                (this._arrSoundButton = []);
              for (var n = 0; n < 2; ++n) {
                var o = 0 == n ? "on" : "off",
                  s = new jb({
                    on: "button_music_" + o,
                    pressed: "button_music_" + o + "_pressed",
                  });
                (s.interactive = !0),
                  (s.buttonMode = !0),
                  s.anchor.set(0.5),
                  s.position.set(i.texture.width - 150, 190),
                  i.addChild(s),
                  s.on("pointertap", this._onMusicBtn_Click, this),
                  this._arrMusicButton.push(s);
                var a = new jb({
                  on: "button_sfx_" + o,
                  pressed: "button_sfx_" + o + "_pressed",
                });
                (a.interactive = !0),
                  (a.buttonMode = !0),
                  a.anchor.set(0.5),
                  a.position.set(150, s.y),
                  i.addChild(a),
                  a.on("pointertap", this._onSoundBtn_Click, this),
                  this._arrSoundButton.push(a);
              }
              (this._arrMusicButton[0].visible = !Jv.saved.data.isMuteMusic),
                (this._arrMusicButton[1].visible =
                  !this._arrMusicButton[0].visible),
                (this._arrSoundButton[0].visible = !Jv.saved.data.isMuteSfx),
                (this._arrSoundButton[1].visible =
                  !this._arrSoundButton[0].visible);
              var h = new jb({
                on: "button_tutorial",
                pressed: "button_tutorial_pressed",
              });
              h.anchor.set(0.5),
                h.position.set(150, 354),
                i.addChild(h),
                h.on("pointertap", this._onTutorialButton_Click, this);
              var u = new jb({
                on: "button_replay",
                pressed: "button_replay_pressed",
              });
              u.anchor.set(0.5),
                u.position.set(i.texture.width - 150, h.y),
                i.addChild(u),
                u.on("pointertap", this._onRestartButton_Click, this);
              var l = new jb({
                on: "pause_button_home",
                pressed: "pause_button_home_pressed",
              });
              l.anchor.set(0.5),
                l.position.set(239, 526),
                i.addChild(l),
                l.on("pointertap", this._onHomeButton_Click, this);
              var c = new jb({
                on: "button_continue",
                pressed: "button_continue_pressed",
              });
              c.anchor.set(0.5),
                c.position.set(l.x, 671),
                i.addChild(c),
                c.on("pointertap", this._onContinueButton_Click, this),
                Jv.audio.pause(0),
                Jv.audio.pause(2),
                window.Gamezy24Game &&
                  (Jv.main.onGlobalMuteUpdated.add(
                    this._onGlobalMute_Updated,
                    this
                  ),
                  this._onGlobalMute_Updated(
                    window.Gamezy24Game.audio.isEnabled()
                  ));
            }),
            (e.prototype._onTutorialButton_Click = function () {
              var t = new BE();
              t.onEnter(),
                t.onClosed.addOnce(this._onTutorialPopup_Closed, this);
            }),
            (e.prototype._onTutorialPopup_Closed = function (t) {
              t.onLeave();
            }),
            (e.prototype._onSoundBtn_Click = function () {
              (!window.Gamezy24Game ||
                (window.Gamezy24Game &&
                  window.Gamezy24Game.audio.isEnabled())) &&
                ((this._arrSoundButton[0].visible =
                  !this._arrSoundButton[0].visible),
                (this._arrSoundButton[1].visible =
                  !this._arrSoundButton[1].visible),
                (Jv.saved.data.isMuteSfx = this._arrSoundButton[1].visible),
                Jv.saved.save(),
                Jv.audio.mute(Jv.saved.data.isMuteSfx, 0),
                Jv.audio.mute(Jv.saved.data.isMuteSfx, 0),
                Jv.audio.mute(Jv.saved.data.isMuteSfx, 2));
            }),
            (e.prototype._onMusicBtn_Click = function () {
              (!window.Gamezy24Game ||
                (window.Gamezy24Game &&
                  window.Gamezy24Game.audio.isEnabled())) &&
                ((this._arrMusicButton[0].visible =
                  !this._arrMusicButton[0].visible),
                (this._arrMusicButton[1].visible =
                  !this._arrMusicButton[1].visible),
                (Jv.saved.data.isMuteMusic = this._arrMusicButton[1].visible),
                Jv.saved.save(),
                Jv.audio.mute(Jv.saved.data.isMuteMusic, 1),
                Jv.saved.data.isMuteMusic
                  ? Jv.audio.stopMusic()
                  : Jv.audio.playMusic("track_0", { loop: !0 }));
            }),
            (e.prototype._onRestartButton_Click = function () {
              Jv.audio.stopPaused(0),
                Jv.audio.resume(2),
                this._onRestart.dispatch(this);
            }),
            (e.prototype._onHomeButton_Click = function () {
              Jv.saved.data.tutorialStep < 7 &&
                ((Jv.saved.data.tutorialStep = 7), Jv.saved.save()),
                Jv.audio.stopPaused(0),
                Jv.audio.stopPaused(2),
                this._onHome.dispatch(this);
            }),
            (e.prototype._onContinueButton_Click = function () {
              Jv.audio.resume(0),
                Jv.audio.resume(2),
                this._onClosed.dispatch(this);
            }),
            (e.prototype._onGlobalMute_Updated = function (t) {
              t
                ? ((this._arrMusicButton[0].visible =
                    !Jv.saved.data.isMuteMusic),
                  (this._arrMusicButton[1].visible =
                    !this._arrMusicButton[0].visible),
                  (this._arrSoundButton[0].visible = !Jv.saved.data.isMuteSfx),
                  (this._arrSoundButton[1].visible =
                    !this._arrSoundButton[0].visible))
                : ((this._arrSoundButton[0].visible = !1),
                  (this._arrSoundButton[1].visible = !0),
                  (this._arrMusicButton[0].visible = !1),
                  (this._arrMusicButton[1].visible = !0));
            }),
            (e.prototype.onLeave = function () {
              this._onHome.dispose(),
                (this._onHome = null),
                this._onRestart.dispose(),
                (this._onRestart = null),
                window.Gamezy24Game &&
                  Jv.main.onGlobalMuteUpdated.remove(
                    this._onGlobalMute_Updated,
                    this
                  ),
                t.prototype.onLeave.call(this);
            }),
            e
          );
        })(CE);
      const IE = RE;
      var kE = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        FE = function () {
          return (
            (FE =
              Object.assign ||
              function (t) {
                for (var e, i = 1, r = arguments.length; i < r; i++)
                  for (var n in (e = arguments[i]))
                    Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
                return t;
              }),
            FE.apply(this, arguments)
          );
        };
      const DE = (function (t) {
        function e() {
          var e = (null !== t && t.apply(this, arguments)) || this;
          return (
            (e._score = null),
            (e._bestScore = null),
            (e._maxScore = null),
            (e._builtBlockCount = null),
            (e._droppedBlockCount = null),
            (e._base = null),
            (e._baseContent = null),
            (e._godrays = null),
            (e._onRestarted = null),
            e
          );
        }
        return (
          kE(e, t),
          Object.defineProperty(e.prototype, "score", {
            set: function (t) {
              this._score = t;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(e.prototype, "bestScore", {
            set: function (t) {
              this._bestScore = t;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(e.prototype, "maxScore", {
            set: function (t) {
              this._maxScore = t;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(e.prototype, "builtBlockCount", {
            set: function (t) {
              this._builtBlockCount = t;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(e.prototype, "droppedBlockCount", {
            set: function (t) {
              this._droppedBlockCount = t;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(e.prototype, "onRestarted", {
            get: function () {
              return this._onRestarted;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (e.prototype.onEnter = function () {
            console.assert(
              null != this._score,
              "GameOverPopup.ts :: onEnter() :: this._score cannot be null."
            ),
              console.assert(
                null != this._bestScore,
                "GameOverPopup.ts :: onEnter() :: this._bestScore cannot be null."
              ),
              console.assert(
                null != this._maxScore,
                "GameOverPopup.ts :: onEnter() :: this._maxScore cannot be null."
              ),
              console.assert(
                null != this._builtBlockCount,
                "GameOverPopup.ts :: onEnter() :: this._builtBlockCount cannot be null."
              ),
              console.assert(
                null != this._droppedBlockCount,
                "GameOverPopup.ts :: onEnter() :: this._droppedBlockCount cannot be null."
              ),
              t.prototype.onEnter.call(this),
              (this._onRestarted = new (eb().Signal)());
            var e = null,
              i = this._score > this._bestScore;
            i
              ? (Jv.audio.playSfx("new_highscore"),
                (this._godrays = new Co(Jv.resources.results_godrays.texture)),
                this._godrays.scale.set(0),
                this._godrays.anchor.set(0.5),
                this._godrays.position.set(
                  0.5 * Jv.app.width,
                  0.5 * Jv.app.height
                ),
                this._root.addChild(this._godrays),
                (this._base = new Co(Jv.resources.new_best_base.texture)),
                (e = {
                  fill: ["#fffff9", "#fff446", "#f3903f"],
                  fillGradientStops: [0, 0.3],
                }))
              : ((this._base = new Co(Jv.resources.results_base.texture)),
                (e = { fill: "white" })),
              this._base.position.set(
                0.5 * Jv.app.width - 0.5 * this._base.texture.width,
                0.5 * Jv.app.height - 0.5 * this._base.height
              ),
              this._root.addChild(this._base),
              (this._baseContent = new ce()),
              i && (this._baseContent.y = 192),
              this._base.addChild(this._baseContent);
            var r = new Lo(
              this._score.toLocaleString("en-US", {
                maximumFractionDigits: 0,
                minimumFractionDigits: 0,
              }),
              {
                fontFamily: "tilt_warp_regular",
                fill: 16777215,
                fontSize: 60,
                dropShadow: !0,
                dropShadowAngle: 0.7,
                dropShadowBlur: 2,
                dropShadowDistance: 4,
                strokeThickness: 4,
              }
            );
            r.anchor.set(0.5, 0.54),
              r.position.set(0.5 * this._base.width, 226),
              r.width > 292 && r.scale.set(292 / r.width),
              this._baseContent.addChild(r);
            var n =
                this._score > this._bestScore ? this._score : this._bestScore,
              o = new Lo(
                n.toLocaleString("en-US", {
                  maximumFractionDigits: 0,
                  minimumFractionDigits: 0,
                }),
                FE(FE({ fontFamily: "tilt_warp_regular" }, e), {
                  fontSize: 60,
                  dropShadow: !0,
                  dropShadowAngle: 0.7,
                  dropShadowBlur: 2,
                  dropShadowDistance: 4,
                  strokeThickness: 4,
                })
              );
            o.anchor.set(0.5, 0.54),
              o.position.set(0.5 * this._base.width, 396),
              o.width > 292 && o.scale.set(292 / o.width),
              this._baseContent.addChild(o);
            var s = new Lo(
              "Blocks Used:  " +
                this._builtBlockCount.toLocaleString("en-US", {
                  maximumFractionDigits: 0,
                  minimumFractionDigits: 0,
                }),
              {
                fontFamily: "tilt_warp_regular",
                fill: 16777215,
                fontSize: 30,
                dropShadow: !0,
                dropShadowAngle: 0.7,
                dropShadowBlur: 2,
                dropShadowDistance: 4,
                strokeThickness: 4,
                lineJoin: "round",
              }
            );
            s.anchor.set(0.5, 0.54),
              s.position.set(0.5 * this._base.width, 511),
              s.width > 350 && s.scale.set(350 / s.width),
              this._baseContent.addChild(s);
            var a = new Lo(
              "Blocks Lost:  " +
                this._droppedBlockCount.toLocaleString("en-US", {
                  maximumFractionDigits: 0,
                  minimumFractionDigits: 0,
                }),
              {
                fontFamily: "tilt_warp_regular",
                fill: 16777215,
                fontSize: 30,
                dropShadow: !0,
                dropShadowAngle: 0.7,
                dropShadowBlur: 2,
                dropShadowDistance: 4,
                strokeThickness: 4,
                lineJoin: "round",
              }
            );
            a.anchor.set(0.5, 0.54),
              a.position.set(0.5 * this._base.width, 555),
              a.width > 350 && a.scale.set(350 / a.width),
              this._baseContent.addChild(a);
            var h = new Lo(
              "Max Height:  " +
                this._maxScore.toLocaleString("en-US", {
                  maximumFractionDigits: 0,
                  minimumFractionDigits: 0,
                }),
              {
                fontFamily: "tilt_warp_regular",
                fill: 16777215,
                fontSize: 30,
                dropShadow: !0,
                dropShadowAngle: 0.7,
                dropShadowBlur: 2,
                dropShadowDistance: 4,
                strokeThickness: 4,
                lineJoin: "round",
              }
            );
            h.anchor.set(0.5, 0.54),
              h.position.set(0.5 * this._base.width, 599),
              h.width > 350 && h.scale.set(350 / h.width),
              this._baseContent.addChild(h);
            var u = new jb({
              on: "button_retry",
              pressed: "button_retry_pressed",
            });
            u.anchor.set(0.5),
              u.scale.set(0.94),
              u.position.set(330, 712),
              u.on("pointertap", this.onRetryBtn_Click, this),
              this._baseContent.addChild(u);
            var l = new jb({
              on: "button_home",
              pressed: "button_home_pressed",
            });
            l.anchor.set(0.5),
              l.scale.set(0.94),
              l.position.set(157, u.y),
              l.on("pointertap", this.onHomeBtn_Click, this),
              this._baseContent.addChild(l);
            var c = -(this._base.height + Jv.app.safeAreaMarginY),
              d = new Uc.core.Timeline();
            d.from(this._base, {
              y: c,
              alpha: 0,
              duration: 0.8,
              ease: "back.out",
            }),
              i &&
                d.to(
                  this._godrays.scale,
                  { x: 1, y: 1, duration: 0.4, ease: "sine.out" },
                  0.6
                ),
              window.Gamezy24Game &&
                (window.Gamezy24Game.score.update(this._score),
                window.Gamezy24Game.game.gameOver());
          }),
          (e.prototype.onRetryBtn_Click = function () {
            this._onRestarted.dispatch(this);
          }),
          (e.prototype.onHomeBtn_Click = function () {
            this._onClosed.dispatch(this);
          }),
          (e.prototype.onLeave = function () {
            this._onRestarted.dispose(),
              (this._onRestarted = null),
              t.prototype.onLeave.call(this);
          }),
          e
        );
      })(CE);
      var NE = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const LE = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (e._onAdRequested = null), e;
        }
        return (
          NE(e, t),
          Object.defineProperty(e.prototype, "value", {
            get: function () {
              return 0 == EE.i.type ? 25 : 5;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(e.prototype, "onAdRequested", {
            get: function () {
              return this._onAdRequested;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (e.prototype.onEnter = function () {
            var e = this;
            t.prototype.onEnter.call(this),
              (this._onAdRequested = new tb.Signal());
            var i = new Co(
              Jv.resources[
                "extra_base_" + (0 == EE.i.type ? "time" : "life")
              ].texture
            );
            i.position.set(
              0.5 * Jv.app.width - 0.5 * i.width,
              0.5 * Jv.app.height - 0.5 * i.height
            ),
              this._root.addChild(i);
            var r = new jb({
              on: "button_close",
              pressed: "button_close_pressed",
            });
            r.anchor.set(0.5),
              r.position.set(450, 62),
              i.addChild(r),
              r.once("pointertap", function () {
                e._onClosed.dispatch(e);
              });
            var n = new Lo(0 == EE.i.type ? "+25s" : "+5", {
              fontFamily: "tilt_warp_regular",
              dropShadow: !0,
              dropShadowAngle: 0.7,
              dropShadowBlur: 2,
              dropShadowDistance: 4,
              fill: "#ffffff",
              fontSize: 60,
              strokeThickness: 4,
              lineJoin: "round",
            });
            n.anchor.set(0.5),
              0 == EE.i.type
                ? n.position.set(286, 250)
                : n.position.set(0.5 * i.width, 276),
              n.anchor.set(0.5),
              i.addChild(n);
            var o = new jb({
              on: "extra_button_play",
              pressed: "extra_button_play_pressed",
            });
            o.anchor.set(0.5),
              o.position.set(0.5 * i.texture.width, 550),
              i.addChild(o),
              o.on("pointertap", this._onPlayAdButton_Click, this),
              Jv.audio.pause(2);
          }),
          (e.prototype._onPlayAdButton_Click = function () {
            this._onAdRequested.dispatch(this);
          }),
          (e.prototype.onLeave = function () {
            this._onAdRequested.dispose(),
              (this._onAdRequested = null),
              Jv.audio.resume(2),
              t.prototype.onLeave.call(this);
          }),
          e
        );
      })(CE);
      var UE = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const GE = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (e._base = null), (e._interactionManager = null), e;
        }
        return (
          UE(e, t),
          (e.prototype.onEnter = function () {
            var e = this;
            t.prototype.onEnter.call(this),
              (this._interactionManager = Jv.app.renderer.plugins.interaction),
              (this._base = new Co(Jv.resources.race_mode_intro.texture)),
              this._base.position.set(
                0.5 * Jv.app.width - 0.5 * this._base.width,
                0.5 * Jv.app.height - 0.5 * this._base.height
              ),
              this._root.addChild(this._base);
            var i = new jb({
              on: "button_close",
              pressed: "button_close_pressed",
            });
            i.anchor.set(0.5),
              i.position.set(467, 47),
              this._base.addChild(i),
              i.once("pointertap", function () {
                e._onClosed.dispatch(e);
              }),
              Jv.app.stage.on("pointertap", this._onStage_PointerTap, this);
          }),
          (e.prototype._onStage_PointerTap = function () {
            this._onClosed.dispatch(this);
          }),
          (e.prototype.onLeave = function () {
            Jv.app.stage.off("pointertap", this._onStage_PointerTap, this),
              t.prototype.onLeave.call(this);
          }),
          e
        );
      })(CE);
      var VE = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        jE = function () {
          return (
            (jE =
              Object.assign ||
              function (t) {
                for (var e, i = 1, r = arguments.length; i < r; i++)
                  for (var n in (e = arguments[i]))
                    Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
                return t;
              }),
            jE.apply(this, arguments)
          );
        },
        zE = (function (t) {
          function e() {
            var e = (null !== t && t.apply(this, arguments)) || this;
            return (
              (e._score = null),
              (e._bestScore = null),
              (e._builtBlockCount = null),
              (e._droppedBlockCount = null),
              (e._base = null),
              (e._baseContent = null),
              (e._godrays = null),
              (e._onRestarted = null),
              e
            );
          }
          return (
            VE(e, t),
            Object.defineProperty(e.prototype, "score", {
              set: function (t) {
                this._score = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "bestScore", {
              set: function (t) {
                this._bestScore = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "builtBlockCount", {
              set: function (t) {
                this._builtBlockCount = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "droppedBlockCount", {
              set: function (t) {
                this._droppedBlockCount = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "onRestarted", {
              get: function () {
                return this._onRestarted;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.onEnter = function () {
              console.assert(
                null != this._score,
                "RaceGameOverPopup.ts :: onEnter() :: this._score cannot be null."
              ),
                console.assert(
                  null != this._bestScore,
                  "RaceGameOverPopup.ts :: onEnter() :: this._bestScore cannot be null."
                ),
                console.assert(
                  null != this._builtBlockCount,
                  "RaceGameOverPopup.ts :: onEnter() :: this._builtBlockCount cannot be null."
                ),
                console.assert(
                  null != this._droppedBlockCount,
                  "RaceGameOverPopup.ts :: onEnter() :: this._droppedBlockCount cannot be null."
                ),
                t.prototype.onEnter.call(this),
                (this._onRestarted = new (eb().Signal)());
              var e = null,
                i = this._score < this._bestScore;
              i
                ? (Jv.audio.playSfx("new_highscore"),
                  (this._godrays = new Co(
                    Jv.resources.results_godrays.texture
                  )),
                  this._godrays.scale.set(0),
                  this._godrays.anchor.set(0.5),
                  this._godrays.position.set(
                    0.5 * Jv.app.width,
                    0.5 * Jv.app.height
                  ),
                  this._root.addChild(this._godrays),
                  (this._base = new Co(
                    Jv.resources.race_new_best_base.texture
                  )),
                  (e = {
                    fill: ["#fffff9", "#fff446", "#f3903f"],
                    fillGradientStops: [0, 0.3],
                  }))
                : ((this._base = new Co(
                    Jv.resources.race_results_base.texture
                  )),
                  (e = { fill: "white" })),
                this._base.position.set(
                  0.5 * Jv.app.width - 0.5 * this._base.texture.width,
                  0.5 * Jv.app.height - 0.5 * this._base.height
                ),
                this._root.addChild(this._base),
                (this._baseContent = new ce()),
                i && (this._baseContent.y = 212),
                this._base.addChild(this._baseContent);
              var r = new Lo(this._toTimeString(this._score), {
                fontFamily: "tilt_warp_regular",
                fill: 16777215,
                fontSize: 60,
                dropShadow: !0,
                dropShadowAngle: 0.7,
                dropShadowBlur: 2,
                dropShadowDistance: 4,
                strokeThickness: 4,
              });
              r.anchor.set(0.5, 0.54),
                r.position.set(0.5 * this._base.width, 216),
                r.width > 292 && r.scale.set(292 / r.width),
                this._baseContent.addChild(r);
              var n = new Lo(
                this._toTimeString(i ? this._score : this._bestScore),
                jE(jE({ fontFamily: "tilt_warp_regular" }, e), {
                  fontSize: 60,
                  dropShadow: !0,
                  dropShadowAngle: 0.7,
                  dropShadowBlur: 2,
                  dropShadowDistance: 4,
                  strokeThickness: 4,
                })
              );
              n.anchor.set(0.5, 0.54),
                n.position.set(0.5 * this._base.width, 386),
                n.width > 292 && n.scale.set(292 / n.width),
                this._baseContent.addChild(n);
              var o = new Lo(
                "Blocks Used:  " +
                  this._builtBlockCount.toLocaleString("en-US", {
                    maximumFractionDigits: 0,
                    minimumFractionDigits: 0,
                  }),
                {
                  fontFamily: "tilt_warp_regular",
                  fill: 16777215,
                  fontSize: 30,
                  dropShadow: !0,
                  dropShadowAngle: 0.7,
                  dropShadowBlur: 2,
                  dropShadowDistance: 4,
                  strokeThickness: 4,
                  lineJoin: "round",
                }
              );
              o.anchor.set(0.5, 0.54),
                o.position.set(0.5 * this._base.width, 495),
                o.width > 350 && o.scale.set(350 / o.width),
                this._baseContent.addChild(o);
              var s = new Lo(
                "Blocks Lost:  " +
                  this._droppedBlockCount.toLocaleString("en-US", {
                    maximumFractionDigits: 0,
                    minimumFractionDigits: 0,
                  }),
                {
                  fontFamily: "tilt_warp_regular",
                  fill: 16777215,
                  fontSize: 30,
                  dropShadow: !0,
                  dropShadowAngle: 0.7,
                  dropShadowBlur: 2,
                  dropShadowDistance: 4,
                  strokeThickness: 4,
                  lineJoin: "round",
                }
              );
              s.anchor.set(0.5, 0.54),
                s.position.set(0.5 * this._base.width, 539),
                s.width > 350 && s.scale.set(350 / s.width),
                this._baseContent.addChild(s);
              var a = new jb({
                on: "button_retry",
                pressed: "button_retry_pressed",
              });
              a.anchor.set(0.5),
                a.scale.set(0.94),
                a.position.set(330, 678),
                a.on("pointertap", this.onRetryBtn_Click, this),
                this._baseContent.addChild(a);
              var h = new jb({
                on: "button_home",
                pressed: "button_home_pressed",
              });
              h.anchor.set(0.5),
                h.scale.set(0.94),
                h.position.set(157, a.y),
                h.on("pointertap", this.onHomeBtn_Click, this),
                this._baseContent.addChild(h);
              var u = -(this._base.height + Jv.app.safeAreaMarginY),
                l = new Uc.core.Timeline();
              l.from(this._base, {
                y: u,
                alpha: 0,
                duration: 0.8,
                ease: "back.out",
              }),
                i &&
                  l.to(
                    this._godrays.scale,
                    { x: 1, y: 1, duration: 0.4, ease: "sine.out" },
                    0.6
                  ),
                window.Gamezy24Game && window.Gamezy24Game.game.gameOver();
            }),
            (e.prototype._toTimeString = function (t) {
              var e, i, r;
              return (
                (e = Math.floor(t / 60 / 60)),
                (i = Math.floor(60 * (t / 60 / 60 - e))),
                (r = Math.floor(60 * (60 * (t / 60 / 60 - e) - i))),
                ("0" + e.toString()).slice(-2) +
                  ":" +
                  ("0" + i.toString()).slice(-2) +
                  ":" +
                  ("0" + r.toString()).slice(-2)
              );
            }),
            (e.prototype.onRetryBtn_Click = function () {
              this._onRestarted.dispatch(this);
            }),
            (e.prototype.onHomeBtn_Click = function () {
              this._onClosed.dispatch(this);
            }),
            (e.prototype.onLeave = function () {
              this._onRestarted.dispose(),
                (this._onRestarted = null),
                t.prototype.onLeave.call(this);
            }),
            e
          );
        })(CE);
      const XE = zE;
      var HE = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const YE = (function (t) {
          function e() {
            var e = t.call(this) || this;
            return (e._game = null), (e._isExtraPopup = null), e;
          }
          return (
            HE(e, t),
            (e.prototype.onEnter = function (e) {
              void 0 === e && (e = null),
                t.prototype.onEnter.call(this),
                (this._isExtraPopup = !1),
                (this._game = new EE()),
                (this._game.type = e[0]),
                this._game.init(),
                this._root.addChild(this._game),
                this._game.onGameOver.add(this._onGameOver, this);
              var i = new jb({
                on: "button_pause",
                pressed: "button_pause_pressed",
              });
              if (
                (i.anchor.set(0.5),
                i.position.set(
                  Jv.app.width - 0.5 * i.width - 20,
                  20 + 0.5 * i.height
                ),
                this._root.addChild(i),
                i.on("pointertap", this._onPauseBtn_Click, this),
                1 == this._game.type && !Jv.saved.data.isRaceModeIntro)
              ) {
                (Jv.saved.data.isRaceModeIntro = !0),
                  Jv.saved.save(),
                  this._game.pause();
                var r = new GE();
                r.onEnter(),
                  r.onClosed.add(this._onRaceModeIntroPopup_Closed, this);
              }
              Jv.game.adManager.onAdReady.add(this._onExtraAd_Ready, this),
                Jv.game.adManager.onAdLost.add(this._onExtraAd_Lost, this),
                Jv.game.adManager.onAdCompleted.add(
                  this._onExtraAd_Completed,
                  this
                ),
                Jv.audio.playAmbient("track_0", { loop: !0 }),
                Jv.audio.stopMusic();
            }),
            (e.prototype._onGameOver = function () {
              this._game.pause(),
                this._isExtraPopup || 1 == this._game.type
                  ? 0 == this._game.type
                    ? (this._showResultsPopup(),
                      this._game.score > Jv.saved.data.bestScore &&
                        ((Jv.saved.data.bestScore = this._game.score),
                        Jv.saved.save()))
                    : (this._showRaceResultsPopup(),
                      this._game.elapsedSeconds < Jv.saved.data.raceBestScore &&
                        ((Jv.saved.data.raceBestScore =
                          this._game.elapsedSeconds),
                        Jv.saved.save()))
                  : ((this._isExtraPopup = !0), Jv.game.adManager.prepare());
            }),
            (e.prototype._showResultsPopup = function () {
              -1 == Jv.saved.data.bestScore &&
                (Jv.saved.data.bestScore = this._game.score);
              var t = new DE();
              (t.score = this._game.score),
                (t.bestScore = Jv.saved.data.bestScore),
                (t.maxScore = this._game.maxScore),
                (t.builtBlockCount = this._game.builtBlockCount),
                (t.droppedBlockCount = this._game.droppedBlockCount),
                t.onEnter(),
                t.onClosed.addOnce(this.onGameOverPopup_Closed, this),
                t.onRestarted.addOnce(this.onGameOverPopup_Restarted, this);
            }),
            (e.prototype._showRaceResultsPopup = function () {
              -1 == Jv.saved.data.raceBestScore &&
                (Jv.saved.data.raceBestScore = this._game.elapsedSeconds);
              var t = new XE();
              (t.score = this._game.elapsedSeconds),
                (t.bestScore = Jv.saved.data.raceBestScore),
                (t.builtBlockCount = this._game.builtBlockCount),
                (t.droppedBlockCount = this._game.droppedBlockCount),
                t.onEnter(),
                t.onClosed.addOnce(this.onGameOverPopup_Closed, this),
                t.onRestarted.addOnce(this.onGameOverPopup_Restarted, this);
            }),
            (e.prototype.onGameOverPopup_Closed = function (t) {
              t.onLeave(), (t = null), this._onCompleted.dispatch(0);
            }),
            (e.prototype.onGameOverPopup_Restarted = function (t) {
              t.onLeave(),
                (t = null),
                this._restartGame(),
                (this._isExtraPopup = !1);
            }),
            (e.prototype._onPauseBtn_Click = function () {
              this._game.pause();
              var t = new IE();
              t.onEnter(),
                t.onClosed.addOnce(this._onPausePopup_Closed, this),
                t.onHome.addOnce(this._onPausePopup_Home, this),
                t.onRestart.addOnce(this._onPausePopup_Restart, this);
            }),
            (e.prototype._onPausePopup_Closed = function (t) {
              this._game.resume(), t.onLeave();
            }),
            (e.prototype._onPausePopup_Home = function (t) {
              t.onLeave(),
                window.Gamezy24Game && window.Gamezy24Game.game.gameOver(),
                this._onCompleted.dispatch(0);
            }),
            (e.prototype._onPausePopup_Restart = function (t) {
              t.onLeave(),
                window.Gamezy24Game && window.Gamezy24Game.game.gameOver(),
                this._restartGame(),
                (this._isExtraPopup = !1);
            }),
            (e.prototype._restartGame = function () {
              Jv.audio.playAmbient("track_0", { loop: !0 }),
                Jv.audio.stopMusic();
              var t = this._game.type;
              this._game.end(),
                this._game.parent.removeChild(this._game),
                this._game.destroy({ children: !0 }),
                (this._game = new EE()),
                (this._game.type = t),
                this._game.init(),
                this._root.addChildAt(this._game, 0),
                this._game.onGameOver.add(this._onGameOver, this);
            }),
            (e.prototype._onRaceModeIntroPopup_Closed = function (t) {
              t.onLeave(), this._game.resume();
            }),
            (e.prototype._onExtraAd_Ready = function () {
              var t = new LE();
              t.onEnter(),
                t.onAdRequested.add(this._onExtraPopup_AdRequested, this),
                t.onClosed.add(this._onExtraPopup_Closed, this);
            }),
            (e.prototype._onExtraPopup_AdRequested = function (t) {
              var e = t.value;
              t.onLeave(), Jv.game.adManager.watch(e);
            }),
            (e.prototype._onExtraPopup_Closed = function (t) {
              t.onLeave(),
                this._showResultsPopup(),
                this._game.score > Jv.saved.data.bestScore &&
                  ((Jv.saved.data.bestScore = this._game.score),
                  Jv.saved.save());
            }),
            (e.prototype._onExtraAd_Lost = function () {
              this._showResultsPopup(),
                this._game.score > Jv.saved.data.bestScore &&
                  ((Jv.saved.data.bestScore = this._game.score),
                  Jv.saved.save());
            }),
            (e.prototype._onExtraAd_Completed = function (t) {
              this._game.resume(), this._game.onExtraReward(t);
            }),
            (e.prototype.onLeave = function () {
              Jv.audio.stopAmbient("track_0"),
                Jv.audio.playMusic("track_0", { loop: !0 }),
                this._game.end(),
                (this._game = null),
                Jv.game.adManager.onAdReady.remove(this._onExtraAd_Ready, this),
                Jv.game.adManager.onAdLost.remove(this._onExtraAd_Lost, this),
                Jv.game.adManager.onAdCompleted.remove(
                  this._onExtraAd_Completed,
                  this
                ),
                t.prototype.onLeave.call(this);
            }),
            (e.prototype.onUpdate = function (t) {
              this._game.update(t);
            }),
            e
          );
        })(ib),
        WE = (function () {
          function t() {
            (this._showAdFn = null),
              (this._reward = null),
              (this._adBreakTimeout = null),
              (this._isShowingAd = null),
              (this._onAdReady = null),
              (this._onAdLost = null),
              (this._onAdCompleted = null);
          }
          return (
            Object.defineProperty(t.prototype, "isShowingAd", {
              get: function () {
                return this._isShowingAd;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "onAdReady", {
              get: function () {
                return this._onAdReady;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "onAdLost", {
              get: function () {
                return this._onAdLost;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "onAdCompleted", {
              get: function () {
                return this._onAdCompleted;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.init = function () {
              (this._onAdReady = new tb.Signal()),
                (this._onAdLost = new tb.Signal()),
                (this._onAdCompleted = new tb.Signal()),
                (this._isShowingAd = !1);
            }),
            (t.prototype.prepare = function () {
              var t = this;
              window.Gamezy24Game
                ? this._showAdFn
                  ? this._onAdReady.dispatch()
                  : ((this._adBreakTimeout = window.setTimeout(function () {
                      t._onAdLost.dispatch();
                    }, 1600)),
                    window.Gamezy24Game.ad.break({
                      type: "reward",
                      name: "rewarded_ad",
                      beforeReward:
                        this.onRewardedAdOpportunity_BeforeReward.bind(this),
                      beforeAd:
                        this.onRewardedAdOpportunity_BeforeBreak.bind(this),
                      adDismissed: function () {},
                      adViewed: function () {},
                      adBreakDone:
                        this.onRewardedAdOpportunity_AdBreakDone.bind(this),
                    }))
                : this._onAdReady.dispatch();
            }),
            (t.prototype.onRewardedAdOpportunity_BeforeReward = function (t) {
              (this._showAdFn = t),
                this._adBreakTimeout &&
                  (window.clearInterval(this._adBreakTimeout),
                  (this._adBreakTimeout = null)),
                this._onAdReady.dispatch();
            }),
            (t.prototype.onRewardedAdOpportunity_BeforeBreak = function () {
              Howler.mute(!0), (this._isShowingAd = !0);
            }),
            (t.prototype.onRewardedAdOpportunity_AdBreakDone = function (t) {
              (this._showAdFn = null),
                "viewed" == t.breakStatus
                  ? this._onAdCompleted.dispatch(this._reward)
                  : this._onAdLost.dispatch(),
                (this._reward = null),
                this._adBreakTimeout &&
                  (window.clearInterval(this._adBreakTimeout),
                  (this._adBreakTimeout = null)),
                Howler.mute(!window.Gamezy24Game.audio.isEnabled()),
                (this._isShowingAd = !1);
            }),
            (t.prototype.end = function () {
              this._onAdLost.dispose(),
                (this._onAdLost = null),
                this._onAdReady.dispose(),
                (this._onAdReady = null),
                this._onAdCompleted.dispose(),
                (this._onAdCompleted = null),
                this._adBreakTimeout &&
                  (window.clearInterval(this._adBreakTimeout),
                  (this._adBreakTimeout = null));
            }),
            (t.prototype.watch = function (t) {
              window.Gamezy24Game
                ? ((this._reward = t), this._showAdFn.call(null))
                : this._onAdCompleted.dispatch(t);
            }),
            t
          );
        })();
      var qE = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        $E = (function (t) {
          function e() {
            var e = t.call(this) || this;
            return (e._arrMusicButton = null), (e._arrSfxButton = null), e;
          }
          return (
            qE(e, t),
            (e.prototype.onEnter = function () {
              var e = this;
              t.prototype.onEnter.call(this);
              var i = new Co(Jv.resources.settings_base.texture);
              i.position.set(
                0.5 * Jv.app.width - 0.5 * i.width,
                0.5 * Jv.app.height - 0.5 * i.height
              ),
                this._root.addChild(i);
              var r = new jb({
                on: "button_close",
                pressed: "button_close_pressed",
              });
              r.anchor.set(0.5),
                r.position.set(451, 62),
                i.addChild(r),
                r.once("pointertap", function () {
                  Jv.audio.resume(0),
                    Jv.audio.resume(2),
                    e._onClosed.dispatch(e);
                }),
                (this._arrMusicButton = []),
                (this._arrSfxButton = []);
              for (var n = 0; n < 2; ++n) {
                var o = 0 == n ? "on" : "off",
                  s = new jb({
                    on: "button_music_" + o,
                    pressed: "button_music_" + o + "_pressed",
                  });
                (s.interactive = !0),
                  (s.buttonMode = !0),
                  s.anchor.set(0.5),
                  s.position.set(i.texture.width - 150, 210),
                  i.addChild(s),
                  s.on("pointertap", this._onMusicBtn_Click, this),
                  this._arrMusicButton.push(s);
                var a = new jb({
                  on: "button_sfx_" + o,
                  pressed: "button_sfx_" + o + "_pressed",
                });
                (a.interactive = !0),
                  (a.buttonMode = !0),
                  a.anchor.set(0.5),
                  a.position.set(150, s.y),
                  i.addChild(a),
                  a.on("pointertap", this._onSfxBtn_Click, this),
                  this._arrSfxButton.push(a);
              }
              (this._arrMusicButton[0].visible = !Jv.saved.data.isMuteMusic),
                (this._arrMusicButton[1].visible =
                  !this._arrMusicButton[0].visible),
                (this._arrSfxButton[0].visible = !Jv.saved.data.isMuteSfx),
                (this._arrSfxButton[1].visible =
                  !this._arrSfxButton[0].visible);
              var h = new jb({
                on: "settings_button_tutorial",
                pressed: "settings_button_tutorial_pressed",
              });
              h.anchor.set(0.5),
                h.position.set(0.5 * i.width, 384),
                i.addChild(h),
                h.on("pointertap", this._onTutorialButton_Click, this),
                window.Gamezy24Game &&
                  (Jv.main.onGlobalMuteUpdated.add(
                    this._onGlobalMute_Updated,
                    this
                  ),
                  this._onGlobalMute_Updated(
                    window.Gamezy24Game.audio.isEnabled()
                  ));
            }),
            (e.prototype._onMusicBtn_Click = function () {
              (!window.Gamezy24Game ||
                (window.Gamezy24Game &&
                  window.Gamezy24Game.audio.isEnabled())) &&
                ((this._arrMusicButton[0].visible =
                  !this._arrMusicButton[0].visible),
                (this._arrMusicButton[1].visible =
                  !this._arrMusicButton[1].visible),
                (Jv.saved.data.isMuteMusic = this._arrMusicButton[1].visible),
                Jv.saved.save(),
                Jv.audio.mute(Jv.saved.data.isMuteMusic, 1),
                Jv.saved.data.isMuteMusic
                  ? Jv.audio.stopMusic()
                  : Jv.audio.playMusic("track_0", { loop: !0 }));
            }),
            (e.prototype._onSfxBtn_Click = function () {
              (!window.Gamezy24Game ||
                (window.Gamezy24Game &&
                  window.Gamezy24Game.audio.isEnabled())) &&
                ((this._arrSfxButton[0].visible =
                  !this._arrSfxButton[0].visible),
                (this._arrSfxButton[1].visible =
                  !this._arrSfxButton[1].visible),
                (Jv.saved.data.isMuteSfx = this._arrSfxButton[1].visible),
                Jv.saved.save(),
                Jv.audio.mute(Jv.saved.data.isMuteSfx, 0),
                Jv.audio.mute(Jv.saved.data.isMuteSfx, 2));
            }),
            (e.prototype._onTutorialButton_Click = function () {
              var t = new BE();
              t.onEnter(),
                t.onClosed.addOnce(this._onTutorialPopup_Closed, this);
            }),
            (e.prototype._onTutorialPopup_Closed = function (t) {
              t.onLeave();
            }),
            (e.prototype._onGlobalMute_Updated = function (t) {
              t
                ? ((this._arrMusicButton[0].visible =
                    !Jv.saved.data.isMuteMusic),
                  (this._arrMusicButton[1].visible =
                    !this._arrMusicButton[0].visible),
                  (this._arrSfxButton[0].visible = !Jv.saved.data.isMuteSfx),
                  (this._arrSfxButton[1].visible =
                    !this._arrSfxButton[0].visible))
                : ((this._arrSfxButton[0].visible = !1),
                  (this._arrSfxButton[1].visible = !0),
                  (this._arrMusicButton[0].visible = !1),
                  (this._arrMusicButton[1].visible = !0));
            }),
            (e.prototype.onLeave = function () {
              window.Gamezy24Game &&
                Jv.main.onGlobalMuteUpdated.remove(
                  this._onGlobalMute_Updated,
                  this
                ),
                t.prototype.onLeave.call(this);
            }),
            e
          );
        })(CE);
      const KE = $E;
      var JE = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const ZE = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (
            (e._preloaderControls = null),
            (e._beamAnim = null),
            (e._titleAnim = null),
            (e._introTl = null),
            (e._blockTween = null),
            (e._titleTl = null),
            (e._titleTimer = null),
            (e._nextTitleTime = null),
            e
          );
        }
        return (
          JE(e, t),
          (e.prototype.onEnter = function (e) {
            var i = this;
            if (
              (void 0 === e && (e = null),
              t.prototype.onEnter.call(this),
              (this._titleTimer = 0),
              (this._nextTitleTime = 4),
              e)
            )
              (this._introTl = new Uc.core.Timeline()),
                (this._preloaderControls = e[0]),
                this._root.addChild(this._preloaderControls.bg),
                this._root.addChild(this._preloaderControls.tower),
                this._root.addChild(this._preloaderControls.darkOverlay),
                this._root.addChild(this._preloaderControls.loadingBarBase);
            else {
              var r = new Co(Jv.resources.pre_bg.texture);
              r.anchor.set(0.5),
                r.position.set(0.5 * Jv.app.width, 0.5 * Jv.app.height),
                this._root.addChild(r);
            }
            (this._titleAnim = new Zs(Xb.createTexArray("lobby_title_", 22))),
              this._titleAnim.anchor.set(0.5),
              (this._titleAnim.animationSpeed = 30),
              (this._titleAnim.loop = !1),
              (this._titleAnim.autoUpdate = !1),
              this._titleAnim.position.set(0.5 * Jv.app.width, 177),
              this._root.addChild(this._titleAnim);
            var n = new Co(Jv.resources.lobby_block.texture);
            n.anchor.set(0.5),
              n.position.set(0.5 * Jv.app.width - 6, 400),
              this._root.addChildAt(n, 1),
              (this._beamAnim = new Zs(Xb.createTexArray("lobby_beam_", 180))),
              this._beamAnim.anchor.set(0.5, 0),
              (this._beamAnim.animationSpeed = 30),
              (this._beamAnim.loop = !0),
              (this._beamAnim.autoUpdate = !1),
              this._beamAnim.position.set(
                0.5 * Jv.app.width,
                -Jv.app.safeAreaMarginY
              ),
              this._root.addChildAt(this._beamAnim, 1),
              this._beamAnim.gotoAndPlay(0);
            var o = new Co(Jv.resources.lobby_tower_full.texture);
            o.anchor.set(0.5, 1),
              o.position.set(
                0.5 * Jv.app.width,
                this._preloaderControls
                  ? this._preloaderControls.tower.y
                  : Jv.app.height + Jv.app.safeAreaMarginY
              ),
              this._root.addChild(o);
            var s = new jb({
              on: "button_play",
              pressed: "button_play_pressed",
            });
            s.anchor.set(0.5),
              s.position.set(326, 1008),
              this._root.addChild(s),
              s.on("pointertap", this._onPlayBtn_Click, this);
            var a = new jb({
              on: "button_race",
              pressed: "button_race_pressed",
            });
            a.anchor.set(0.5),
              a.position.set(112, 1006),
              this._root.addChild(a),
              a.on("pointertap", this._onRaceBtn_Click, this);
            var h = new jb({
              on: "button_settings",
              pressed: "button_settings_pressed",
            });
            if (
              (h.anchor.set(0.5),
              h.position.set(537, a.y),
              this._root.addChild(h),
              h.on("pointertap", this._onSettingsBtn_Click, this),
              Jv.audio.playMusic("track_0", { loop: !0 }),
              this._introTl)
            ) {
              (this._root.interactiveChildren = !1),
                (o.alpha = 0),
                a.scale.set(0),
                s.scale.set(0),
                h.scale.set(0),
                (this._beamAnim.scale.x = 0),
                o.position.set(0),
                this._preloaderControls.tower.addChild(o);
              var u = n.y;
              (n.y = this._titleAnim.y),
                (n.angle = 30),
                this._introTl.to(
                  this._preloaderControls.darkOverlay,
                  { alpha: 0, duration: 0.8, ease: "sine.out" },
                  0
                ),
                this._introTl.to(
                  this._preloaderControls.loadingBarBase,
                  {
                    y:
                      Jv.app.height +
                      Jv.app.safeAreaMarginY +
                      0.5 * this._preloaderControls.loadingBarBase.height,
                    duration: 0.8,
                    ease: "sine.in",
                  },
                  0
                ),
                this._introTl.to(
                  this._beamAnim.scale,
                  { x: 1, duration: 0.3, ease: "sine.in" },
                  ">"
                ),
                this._introTl.to(
                  this._preloaderControls.tower,
                  { y: "-=20", duration: 1.8, ease: "sine.out" },
                  ">"
                ),
                this._introTl.to(
                  o,
                  { alpha: 1, duration: 1.8, ease: "sine.out" },
                  "<"
                ),
                this._introTl.to(
                  n,
                  { y: u, angle: 0, duration: 1.8, ease: "sine.out" },
                  "<"
                ),
                this._introTl.to(
                  a.scale,
                  { x: 1, y: 1, duration: 0.4, ease: "sine.out", delay: 0.1 },
                  ">"
                ),
                this._introTl.to(
                  s.scale,
                  { x: 1, y: 1, duration: 0.4, ease: "sine.out" },
                  "<"
                ),
                this._introTl.to(
                  h.scale,
                  { x: 1, y: 1, duration: 0.4, ease: "sine.out", delay: 0.2 },
                  "<"
                ),
                this._introTl.call(
                  function () {
                    i._blockTween = Uc.to(n, {
                      y: "-=14",
                      angle: 10,
                      duration: 2,
                      yoyo: !0,
                      repeat: -1,
                      ease: "sine.inOut",
                    });
                  },
                  null,
                  "<"
                ),
                this._introTl.call(
                  function () {
                    i._root.interactiveChildren = !0;
                  },
                  null,
                  3
                );
            } else
              this._blockTween = Uc.to(n, {
                y: "-=14",
                angle: 10,
                duration: 2,
                yoyo: !0,
                repeat: -1,
                ease: "sine.inOut",
              });
            (this._titleTl = new Uc.core.Timeline()),
              this._titleTl.to(
                this._titleAnim.scale,
                {
                  x: 1.04,
                  y: 1.04,
                  duration: 1.6,
                  repeat: 1,
                  yoyo: !0,
                  ease: "sine.inOut",
                },
                0
              ),
              this._titleTl.to(
                this._titleAnim,
                {
                  y: "-=20",
                  duration: 1.6,
                  repeat: 1,
                  yoyo: !0,
                  ease: "sine.inOut",
                },
                0
              ),
              this._titleTl.pause();
          }),
          (e.prototype._onPlayBtn_Click = function () {
            this._onCompleted.dispatch(1, [0]);
          }),
          (e.prototype._onRaceBtn_Click = function () {
            this._onCompleted.dispatch(1, [1]);
          }),
          (e.prototype._onSettingsBtn_Click = function () {
            var t = new KE();
            t.onEnter(), t.onClosed.addOnce(this._onSettingsPopup_Closed, this);
          }),
          (e.prototype._onSettingsPopup_Closed = function (t) {
            t.onLeave();
          }),
          (e.prototype.onLeave = function () {
            this._introTl && (this._introTl.kill(), (this._introTl = null)),
              this._blockTween.kill(),
              (this._blockTween = null),
              this._titleTl.kill(),
              (this._titleTl = null),
              t.prototype.onLeave.call(this);
          }),
          (e.prototype.onUpdate = function (t) {
            this._titleAnim.update(t),
              this._beamAnim.update(t),
              (this._titleTimer += t),
              this._titleTimer > this._nextTitleTime &&
                ((this._titleTimer = 0),
                (this._nextTitleTime = 8 + 4 * Math.random()),
                this._titleTl.play(0),
                this._titleAnim.gotoAndPlay(0));
          }),
          e
        );
      })(ib);
      var QE = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const tC = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (e._curScreen = null), (e._adManager = null), e;
        }
        return (
          QE(e, t),
          Object.defineProperty(e.prototype, "adManager", {
            get: function () {
              return this._adManager;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (e.prototype.onEnter = function (t) {
            if (
              (void 0 === t && (t = null),
              (this._adManager = new WE()),
              this._adManager.init(),
              Jv.saved.data.tutorialStep < 5)
            )
              (this._curScreen = new YE()),
                this._curScreen.onEnter([0]),
                this._curScreen.onCompleted.addOnce(
                  this._onScreen_Completed,
                  this
                );
            else {
              var e = new ZE();
              e.onEnter(t),
                e.onCompleted.addOnce(this._onScreen_Completed, this),
                (this._curScreen = e);
            }
            window.Gamezy24Game && window.Gamezy24Game.game.ready();
          }),
          (e.prototype._onScreen_Completed = function (t, e) {
            switch (
              (void 0 === e && (e = null), this._curScreen.onLeave(), t)
            ) {
              case 0:
                this._curScreen = new ZE();
                break;
              case 1:
                this._curScreen = new YE();
            }
            this._curScreen.onEnter(e),
              this._curScreen.onCompleted.addOnce(
                this._onScreen_Completed,
                this
              );
          }),
          (e.prototype.onLeave = function () {
            this._curScreen.onLeave(),
              (this._curScreen = null),
              this._adManager.end(),
              (this._adManager = null),
              t.prototype.onLeave.call(this);
          }),
          (e.prototype.onUpdate = function (t) {
            this._curScreen.onUpdate(t);
          }),
          e
        );
      })(Qv);
      var eC = i(904),
        iC = i.n(eC),
        rC = (function () {
          var t = function (e, i) {
            return (
              (t =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                  function (t, e) {
                    t.__proto__ = e;
                  }) ||
                function (t, e) {
                  for (var i in e)
                    Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
                }),
              t(e, i)
            );
          };
          return function (e, i) {
            if ("function" != typeof i && null !== i)
              throw new TypeError(
                "Class extends value " +
                  String(i) +
                  " is not a constructor or null"
              );
            function r() {
              this.constructor = e;
            }
            t(e, i),
              (e.prototype =
                null === i
                  ? Object.create(i)
                  : ((r.prototype = i.prototype), new r()));
          };
        })(),
        nC = function (t) {
          var e = "function" == typeof Symbol && Symbol.iterator,
            i = e && t[e],
            r = 0;
          if (i) return i.call(t);
          if (t && "number" == typeof t.length)
            return {
              next: function () {
                return (
                  t && r >= t.length && (t = void 0),
                  { value: t && t[r++], done: !t }
                );
              },
            };
          throw new TypeError(
            e ? "Object is not iterable." : "Symbol.iterator is not defined."
          );
        },
        oC = (function (t) {
          function e() {
            var e = t.call(this) || this;
            return (
              (e._root = null),
              (e._bg = null),
              (e._tower = null),
              (e._darkOverlay = null),
              (e._titleAnim = null),
              (e._loadingBarBase = null),
              (e._loadingBarMask = null),
              (e._ffo = null),
              (e._onComplete = null),
              e
            );
          }
          return (
            rC(e, t),
            Object.defineProperty(e.prototype, "onComplete", {
              get: function () {
                return this._onComplete;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.onEnter = function (t) {
              var e, i, r, n;
              void 0 === t && (t = null),
                window.Gamezy24Game &&
                  window.Gamezy24Game.game.firstFrameReady(),
                (this._onComplete = new (eb().Signal)()),
                (this._root = new ce()),
                Jv.app.root.addChild(this._root),
                (this._bg = new Co(dn.shared.resources.pre_bg.texture)),
                this._bg.anchor.set(0.5),
                this._bg.position.set(0.5 * Jv.app.width, 0.5 * Jv.app.height),
                this._root.addChild(this._bg),
                (this._tower = new Co(dn.shared.resources.pre_tower.texture)),
                this._tower.anchor.set(0.5, 1),
                this._tower.position.set(
                  0.5 * Jv.app.width,
                  Jv.app.height + Jv.app.safeAreaMarginY + 20
                ),
                this._root.addChild(this._tower),
                (this._darkOverlay = new To()),
                this._darkOverlay.beginFill(0, 0.75),
                this._darkOverlay.drawRect(
                  -Jv.app.safeAreaMarginX,
                  -Jv.app.safeAreaMarginY,
                  Jv.app.safeAreaWidth,
                  Jv.app.safeAreaHeight
                ),
                this._darkOverlay.endFill(),
                this._root.addChild(this._darkOverlay);
              for (var o = [], s = 0; s < 49; ++s)
                o.push(
                  dn.shared.resources["pre_title_" + s.toString()].texture
                );
              (this._titleAnim = new Zs(o)),
                this._titleAnim.anchor.set(
                  0.5 + 3 / o[0].width,
                  0.5 + 65 / o[0].height
                ),
                (this._titleAnim.animationSpeed = 30),
                (this._titleAnim.loop = !1),
                (this._titleAnim.autoUpdate = !1),
                this._titleAnim.position.set(0.5 * Jv.app.width, 177),
                this._root.addChild(this._titleAnim),
                this._titleAnim.gotoAndPlay(0),
                (this._loadingBarBase = new Co(
                  dn.shared.resources.pre_loading_bar_base.texture
                )),
                this._loadingBarBase.anchor.set(0.5),
                this._loadingBarBase.position.set(0.5 * Jv.app.width, 937),
                this._root.addChild(this._loadingBarBase);
              var a = new ce();
              this._loadingBarBase.addChild(a);
              var h = new Co(dn.shared.resources.pre_loading_bar.texture);
              h.anchor.set(0, 0.5),
                (h.position.x = 0.5 * -h.width),
                a.addChild(h),
                (this._loadingBarMask = new To()),
                this._loadingBarMask.position.set(h.x, 0.5 * -h.height),
                this._loadingBarMask.beginFill(16724736),
                this._loadingBarMask.drawRect(0, 0, h.width, h.height),
                this._loadingBarMask.endFill(),
                (this._loadingBarMask.scale.x = 0),
                a.addChild(this._loadingBarMask),
                (a.mask = this._loadingBarMask),
                (this._ffo = new (iC())("tilt_warp_regular")),
                this._ffo.load(null, 1e4).then(function () {
                  dn.shared.load();
                });
              var u = dn.shared;
              for (
                u.defaultQueryString = Jv.saved.data.version.toString(),
                  u.add("transparent", "resources/img/transparent.png"),
                  u.add(
                    "button_close",
                    "resources/img/common/button_close.png"
                  ),
                  u.add(
                    "button_close_pressed",
                    "resources/img/common/button_close_pressed.png"
                  ),
                  u.add("lobby_block", "resources/img/lobby/block.png"),
                  u.add(
                    "lobby_tower_full",
                    "resources/img/lobby/tower_full.png"
                  ),
                  s = 0;
                s < 22;
                ++s
              )
                u.add(
                  "lobby_title_" + s.toString(),
                  "resources/img/lobby/title/" + s.toString() + ".png"
                );
              for (s = 0; s < 180; ++s)
                u.add(
                  "lobby_beam_" + s.toString(),
                  "resources/img/lobby/beam/" + s.toString() + ".png"
                );
              for (
                u.add("button_play", "resources/img/lobby/button_play.png"),
                  u.add(
                    "button_play_pressed",
                    "resources/img/lobby/button_play_pressed.png"
                  ),
                  u.add("button_race", "resources/img/lobby/button_race.png"),
                  u.add(
                    "button_race_pressed",
                    "resources/img/lobby/button_race_pressed.png"
                  ),
                  u.add(
                    "button_settings",
                    "resources/img/lobby/button_settings.png"
                  ),
                  u.add(
                    "button_settings_pressed",
                    "resources/img/lobby/button_settings_pressed.png"
                  ),
                  u.add("bg_0", "resources/img/gameplay/bg/0/bg.png"),
                  u.add("bg_1", "resources/img/gameplay/bg/1/bg.png"),
                  s = 0;
                s < 6;
                ++s
              )
                u.add(
                  "bg_0_" + s.toString(),
                  "resources/img/gameplay/bg/0/" + s.toString() + ".png"
                ),
                  u.add(
                    "bg_1_" + s.toString(),
                    "resources/img/gameplay/bg/1/" + s.toString() + ".png"
                  );
              for (
                u.add("ground", "resources/img/gameplay/scene/ground.png"),
                  u.add(
                    "bg_cloud_slice_0",
                    "resources/img/gameplay/scene/bg_cloud_slice_0.png"
                  ),
                  u.add(
                    "bg_cloud_slice_1",
                    "resources/img/gameplay/scene/bg_cloud_slice_1.png"
                  ),
                  u.add(
                    "fg_cloud_0",
                    "resources/img/gameplay/scene/fg_cloud_0.png"
                  ),
                  u.add("pulley", "resources/img/gameplay/scene/pulley.png"),
                  u.add("checkpoint", "resources/img/gameplay/checkpoint.png"),
                  u.add(
                    "race_mode_intro",
                    "resources/img/gameplay/race_mode_intro.png"
                  ),
                  s = 0;
                s < 72;
                ++s
              )
                u.add(
                  "checkpoint_" + s.toString(),
                  "resources/img/gameplay/checkpoint/" + s.toString() + ".png"
                );
              for (
                u.add("race_goal", "resources/img/gameplay/race_goal.png"),
                  u.add(
                    "button_pause",
                    "resources/img/gameplay/button_pause.png"
                  ),
                  u.add(
                    "button_pause_pressed",
                    "resources/img/gameplay/button_pause_pressed.png"
                  ),
                  u.add(
                    "button_move_left",
                    "resources/img/gameplay/button_left.png"
                  ),
                  u.add(
                    "button_move_left_pressed",
                    "resources/img/gameplay/button_left_pressed.png"
                  ),
                  u.add(
                    "button_move_right",
                    "resources/img/gameplay/button_right.png"
                  ),
                  u.add(
                    "button_move_right_pressed",
                    "resources/img/gameplay/button_right_pressed.png"
                  ),
                  u.add(
                    "button_rotate",
                    "resources/img/gameplay/button_rotate.png"
                  ),
                  u.add(
                    "button_rotate_pressed",
                    "resources/img/gameplay/button_rotate_pressed.png"
                  ),
                  u.add(
                    "button_rotate_locked",
                    "resources/img/gameplay/button_rotate_locked.png"
                  ),
                  u.add(
                    "button_rotate_locked_pressed",
                    "resources/img/gameplay/button_rotate_locked_pressed.png"
                  ),
                  s = 0;
                s < 5;
                ++s
              )
                u.add(
                  "powerup_" + s.toString(),
                  "resources/img/gameplay/powerup/" + s.toString() + ".png"
                ),
                  u.add(
                    "powerup_" + s.toString() + "_pressed",
                    "resources/img/gameplay/powerup/" +
                      s.toString() +
                      "_pressed.png"
                  );
              for (
                u.add(
                  "notification_well_done",
                  "resources/img/gameplay/notification_well-done.png"
                ),
                  s = 0;
                s < 30;
                ++s
              )
                u.add(
                  "spawn_good_" + s.toString(),
                  "resources/img/gameplay/spawn/good/" + s.toString() + ".png"
                );
              for (s = 0; s < 14; ++s)
                u.add(
                  "spawn_lightning_" + s.toString(),
                  "resources/img/gameplay/spawn/bad/lightning/" +
                    s.toString() +
                    ".png"
                );
              for (s = 0; s < 9; ++s)
                u.add(
                  "spawn_bad_" + s.toString(),
                  "resources/img/gameplay/spawn/bad/base/" +
                    s.toString() +
                    ".png"
                );
              for (s = 0; s < 22; ++s)
                u.add(
                  "dust_0_" + s.toString(),
                  "resources/img/gameplay/dust/0/" + s.toString() + ".png"
                ),
                  u.add(
                    "dust_1_" + s.toString(),
                    "resources/img/gameplay/dust/1/" + s.toString() + ".png"
                  ),
                  u.add(
                    "dust_2_" + s.toString(),
                    "resources/img/gameplay/dust/2/" + s.toString() + ".png"
                  );
              for (s = 0; s < 120; ++s)
                u.add(
                  "beam_" + s.toString(),
                  "resources/img/gameplay/beam/" + s.toString() + ".png"
                );
              for (
                u.add("bubble", "resources/img/gameplay/bubble/base.png"),
                  s = 0;
                s < 17;
                ++s
              )
                u.add(
                  "bubble_pop_" + s.toString(),
                  "resources/img/gameplay/bubble/pop/" + s.toString() + ".png"
                );
              var l = ["I", "L", "J", "S", "Z", "T", "O"];
              try {
                for (var c = nC(l), d = c.next(); !d.done; d = c.next()) {
                  var p = d.value;
                  u.add(p, "resources/img/gameplay/tetromino/" + p + ".png"),
                    u.add(
                      p + "_2x",
                      "resources/img/gameplay/tetromino/2x/" + p + ".png"
                    ),
                    u.add(
                      p + "_speed_up",
                      "resources/img/gameplay/tetromino/speed_up/" + p + ".png"
                    ),
                    u.add(
                      p + "_no_rotation",
                      "resources/img/gameplay/tetromino/no_rotation/" +
                        p +
                        ".png"
                    ),
                    u.add(
                      p + "_ice",
                      "resources/img/gameplay/tetromino/ice/" + p + ".png"
                    ),
                    u.add(
                      p + "_petrified",
                      "resources/img/gameplay/tetromino/petrified/" + p + ".png"
                    );
                }
              } catch (t) {
                e = { error: t };
              } finally {
                try {
                  d && !d.done && (i = c.return) && i.call(c);
                } finally {
                  if (e) throw e.error;
                }
              }
              try {
                for (var _ = nC(l), f = _.next(); !f.done; f = _.next())
                  "L" != (p = f.value) &&
                    "Z" != p &&
                    (u.add(
                      p + "_bind",
                      "resources/img/gameplay/powerup/bind/" + p + ".png"
                    ),
                    u.add(
                      p + "_bind_2x",
                      "resources/img/gameplay/powerup/bind/2x/" + p + ".png"
                    ));
              } catch (t) {
                r = { error: t };
              } finally {
                try {
                  f && !f.done && (n = _.return) && n.call(_);
                } finally {
                  if (r) throw r.error;
                }
              }
              for (s = 0; s < 3; ++s)
                u.add(
                  "extra_block_" + s.toString(),
                  "resources/img/gameplay/powerup/extra_block/base/" +
                    s.toString() +
                    ".png"
                );
              for (s = 0; s < 15; ++s)
                u.add(
                  "extra_block_smoke_" + s.toString(),
                  "resources/img/gameplay/powerup/extra_block/smoke/" +
                    s.toString() +
                    ".png"
                );
              for (
                u.add(
                  "destroy_confirm_button",
                  "resources/img/gameplay/powerup/destroy/button_confirm.png"
                ),
                  u.add(
                    "destroy_confirm_button_pressed",
                    "resources/img/gameplay/powerup/destroy/button_confirm_pressed.png"
                  ),
                  u.add(
                    "destroy_cancel_button",
                    "resources/img/gameplay/powerup/destroy/button_cancel.png"
                  ),
                  u.add(
                    "destroy_cancel_button_pressed",
                    "resources/img/gameplay/powerup/destroy/button_cancel_pressed.png"
                  ),
                  u.add(
                    "destroy_crosshair",
                    "resources/img/gameplay/powerup/destroy/crosshair.png"
                  ),
                  s = 0;
                s < 17;
                ++s
              )
                u.add(
                  "destroy_explosion_" + s.toString(),
                  "resources/img/gameplay/powerup/destroy/explosion/" +
                    s.toString() +
                    ".png"
                );
              for (
                u.add(
                  "clock_hand",
                  "resources/img/gameplay/powerup/extra_time/clock_arrow.png"
                ),
                  u.add(
                    "clock_base",
                    "resources/img/gameplay/powerup/extra_time/clock_base.png"
                  ),
                  u.add(
                    "clock_button",
                    "resources/img/gameplay/powerup/extra_time/clock_button.png"
                  ),
                  s = 0;
                s < 16;
                ++s
              )
                u.add(
                  "clock_spawn_" + s.toString(),
                  "resources/img/gameplay/powerup/extra_time/spawn/" +
                    s.toString() +
                    ".png"
                );
              for (
                u.add(
                  "tut_hand",
                  "resources/img/gameplay/tutorial/hand_pointing.png"
                ),
                  u.add(
                    "tut_tap",
                    "resources/img/gameplay/tutorial/tap_effect.png"
                  ),
                  s = 0;
                s < 6;
                ++s
              )
                s < 3 &&
                !Jv.app.renderer.plugins.interaction.supportsTouchEvents
                  ? u.add(
                      "tut_comic_" + s.toString(),
                      "resources/img/gameplay/tutorial/desktop/tut_0" +
                        s.toString() +
                        ".png"
                    )
                  : u.add(
                      "tut_comic_" + s.toString(),
                      "resources/img/gameplay/tutorial/tut_0" +
                        s.toString() +
                        ".png"
                    );
              u.add(
                "tut_key_down",
                "resources/img/gameplay/tutorial/desktop/key/key_down.png"
              ),
                u.add(
                  "tut_key_down_pressed",
                  "resources/img/gameplay/tutorial/desktop/key/key_down_pressed.png"
                ),
                u.add(
                  "tut_key_up",
                  "resources/img/gameplay/tutorial/desktop/key/key_up.png"
                ),
                u.add(
                  "tut_key_up_pressed",
                  "resources/img/gameplay/tutorial/desktop/key/key_up_pressed.png"
                ),
                u.add(
                  "tut_key_left",
                  "resources/img/gameplay/tutorial/desktop/key/key_left.png"
                ),
                u.add(
                  "tut_key_left_pressed",
                  "resources/img/gameplay/tutorial/desktop/key/key_left_pressed.png"
                ),
                u.add(
                  "tut_key_right",
                  "resources/img/gameplay/tutorial/desktop/key/key_right.png"
                ),
                u.add(
                  "tut_key_right_pressed",
                  "resources/img/gameplay/tutorial/desktop/key/key_right_pressed.png"
                ),
                u.add(
                  "extra_button_play",
                  "resources/img/extra/button_play.png"
                ),
                u.add(
                  "extra_button_play_pressed",
                  "resources/img/extra/button_play_pressed.png"
                ),
                u.add("extra_base_time", "resources/img/extra/base_time.png"),
                u.add("settings_base", "resources/img/settings/base.png"),
                u.add(
                  "settings_button_tutorial",
                  "resources/img/settings/button_tutorial.png"
                ),
                u.add(
                  "settings_button_tutorial_pressed",
                  "resources/img/settings/button_tutorial_pressed.png"
                ),
                u.add("pause_base", "resources/img/pause/base.png"),
                u.add("button_replay", "resources/img/pause/button_replay.png"),
                u.add(
                  "button_replay_pressed",
                  "resources/img/pause/button_replay_pressed.png"
                ),
                u.add(
                  "button_continue",
                  "resources/img/pause/button_continue.png"
                ),
                u.add(
                  "button_continue_pressed",
                  "resources/img/pause/button_continue_pressed.png"
                ),
                u.add(
                  "pause_button_home",
                  "resources/img/pause/button_home.png"
                ),
                u.add(
                  "pause_button_home_pressed",
                  "resources/img/pause/button_home_pressed.png"
                ),
                u.add(
                  "button_tutorial",
                  "resources/img/pause/button_tutorial.png"
                ),
                u.add(
                  "button_tutorial_pressed",
                  "resources/img/pause/button_tutorial_pressed.png"
                ),
                u.add("button_sfx_on", "resources/img/pause/button_sound.png"),
                u.add(
                  "button_sfx_on_pressed",
                  "resources/img/pause/button_sound_pressed.png"
                ),
                u.add(
                  "button_sfx_off",
                  "resources/img/pause/button_sound_off.png"
                ),
                u.add(
                  "button_sfx_off_pressed",
                  "resources/img/pause/button_sound_off_pressed.png"
                ),
                u.add(
                  "button_music_on",
                  "resources/img/pause/button_music.png"
                ),
                u.add(
                  "button_music_on_pressed",
                  "resources/img/pause/button_music_pressed.png"
                ),
                u.add(
                  "button_music_off",
                  "resources/img/pause/button_music_off.png"
                ),
                u.add(
                  "button_music_off_pressed",
                  "resources/img/pause/button_music_off_pressed.png"
                ),
                u.add("tut_00", "resources/img/tutorial/tut_01.png"),
                u.add(
                  "tut_01_desktop",
                  "resources/img/tutorial/tut_02_desktop.png"
                ),
                u.add("tut_01", "resources/img/tutorial/tut_02.png"),
                u.add("tut_02", "resources/img/tutorial/tut_03.png"),
                u.add("tut_03", "resources/img/tutorial/tut_04.png"),
                u.add("tut_arrow", "resources/img/tutorial/arrow.png"),
                u.add(
                  "tut_arrow_pressed",
                  "resources/img/tutorial/arrow_pressed.png"
                ),
                u.add(
                  "tut_navigation_base",
                  "resources/img/tutorial/navigation_base.png"
                ),
                u.add(
                  "tut_navigation_dot",
                  "resources/img/tutorial/navigation_dot.png"
                ),
                u.add(
                  "results_base",
                  "resources/img/game_over/results_base.png"
                ),
                u.add(
                  "new_best_base",
                  "resources/img/game_over/new_best_base.png"
                ),
                u.add(
                  "race_results_base",
                  "resources/img/game_over/race_results_base.png"
                ),
                u.add(
                  "race_new_best_base",
                  "resources/img/game_over/race_new_best_base.png"
                ),
                u.add("button_home", "resources/img/game_over/button_home.png"),
                u.add(
                  "button_home_pressed",
                  "resources/img/game_over/button_home_pressed.png"
                ),
                u.add(
                  "button_retry",
                  "resources/img/game_over/button_retry.png"
                ),
                u.add(
                  "button_retry_pressed",
                  "resources/img/game_over/button_retry_pressed.png"
                ),
                u.add("results_godrays", "resources/img/game_over/godrays.png"),
                u.add("button_on", "resources/img/button_on.png"),
                u.add("button_pressed", "resources/img/button_pressed.png"),
                u.onComplete.once(this.onLoader_Complete, this),
                u.onProgress.add(this.onLoader_Progress, this),
                Jv.audio.load([
                  {
                    arrExtension: ["mp3"],
                    trackId: 1,
                    basePath: "resources/music/",
                    arrName: ["track_0"],
                  },
                  {
                    arrExtension: ["mp3"],
                    trackId: 2,
                    basePath: "resources/ambient/",
                    arrName: ["track_0"],
                  },
                  {
                    arrExtension: ["mp3"],
                    trackId: 0,
                    basePath: "resources/sfx/",
                    arrName: [
                      "countdown_sec",
                      "countdown_end",
                      "balloon",
                      "bind",
                      "button_click",
                      "checkpoint_powerup",
                      "dosednuti_blok",
                      "extra_time",
                      "heavy_block",
                      "ice_block",
                      "new_highscore",
                      "no_rotate",
                      "petrify",
                      "posunuti_bloku",
                      "rotace_bloku",
                      "small_checkpoint",
                      "swipe_down",
                      "land",
                      "bad_modifier",
                      "bubble_burst",
                      "final_countdown_sec",
                      "final_countdown_end",
                      "laser_explosion",
                      "laser_powerup",
                      "lost_life",
                    ],
                  },
                ]);
            }),
            (e.prototype.onLoader_Complete = function (t, e) {
              var i = this;
              if (
                (Object.assign(Jv.resources, e),
                t.reset(),
                Jv.saved.data.tutorialStep <= 4 &&
                  !Jv.app.renderer.plugins.interaction.supportsTouchEvents)
              ) {
                this._loadingBarBase.visible = !1;
                var r = new jb({
                  on: "button_play",
                  pressed: "button_play_pressed",
                });
                r.anchor.set(0.5),
                  r.position.copyFrom(this._loadingBarBase.position),
                  this._root.addChild(r),
                  r.on("pointertap", function () {
                    var t = {
                      bg: i._bg,
                      tower: i._tower,
                      darkOverlay: i._darkOverlay,
                      loadingBarBase: i._loadingBarBase,
                    };
                    i._root.removeChildren(), i._onComplete.dispatch(t);
                  });
              } else
                window.setTimeout(function () {
                  var t = {
                    bg: i._bg,
                    tower: i._tower,
                    darkOverlay: i._darkOverlay,
                    loadingBarBase: i._loadingBarBase,
                  };
                  i._root.removeChildren(), i._onComplete.dispatch(t);
                }, 10);
            }),
            (e.prototype.onLoader_Progress = function (t) {
              var e = t.progress / 100;
              this._loadingBarMask.scale.x = e;
            }),
            (e.prototype.onLeave = function () {
              this._onComplete.dispose(),
                (this._onComplete = null),
                this._root.parent.removeChild(this._root),
                this._root.destroy(),
                t.prototype.onLeave.call(this);
            }),
            (e.prototype.onUpdate = function (t) {
              this._titleAnim.update(t);
            }),
            e
          );
        })(Qv);
      const sC = oC,
        aC = (function () {
          function t() {
            (this._data = null),
              (this._kSaveName = "gs-tumble-towers"),
              (this._kVersion = 20);
          }
          return (
            Object.defineProperty(t.prototype, "data", {
              get: function () {
                return this._data;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.load = function () {
              var t;
              window.Gamezy24Game
                ? (t = window.Gamezy24Game.storage.getItem(this._kSaveName))
                  ? ((this._data = JSON.parse(t)),
                    (null != this._data.version &&
                      this._data.version == this._kVersion) ||
                      this.createDefaultData())
                  : this.createDefaultData()
                : (t = window.localStorage.getItem(this._kSaveName))
                ? ((this._data = JSON.parse(t)),
                  (null != this._data.version &&
                    this._data.version == this._kVersion) ||
                    this.createDefaultData())
                : this.createDefaultData();
            }),
            (t.prototype.createDefaultData = function () {
              (this._data = {
                version: this._kVersion,
                isMuteSfx: !1,
                isMuteMusic: !1,
                bestScore: -1,
                raceBestScore: -1,
                tutorialStep: 0,
                isRaceModeIntro: !1,
              }),
                this.save();
            }),
            (t.prototype.save = function () {
              if (window.Gamezy24Game)
                window.Gamezy24Game.storage.setItem(
                  this._kSaveName,
                  JSON.stringify(this._data)
                );
              else {
                var t = JSON.stringify(this._data);
                window.localStorage.setItem(this._kSaveName, t);
              }
            }),
            (t.prototype.reset = function () {
              this.createDefaultData();
            }),
            t
          );
        })();
      var hC = (function () {
        var t = function (e, i) {
          return (
            (t =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (t, e) {
                  t.__proto__ = e;
                }) ||
              function (t, e) {
                for (var i in e)
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              }),
            t(e, i)
          );
        };
        return function (e, i) {
          if ("function" != typeof i && null !== i)
            throw new TypeError(
              "Class extends value " +
                String(i) +
                " is not a constructor or null"
            );
          function r() {
            this.constructor = e;
          }
          t(e, i),
            (e.prototype =
              null === i
                ? Object.create(i)
                : ((r.prototype = i.prototype), new r()));
        };
      })();
      const uC = (function (t) {
        function e() {
          var e = t.call(this) || this;
          return (
            (e.storage = null),
            (e.score = null),
            (e.ad = null),
            (e.game = null),
            (e.audio = null),
            (e.storage = new lC()),
            (e.score = new dC()),
            (e.ad = new cC(e)),
            (e.game = new pC()),
            (e.audio = new _C(e)),
            e
          );
        }
        return hC(e, t), e;
      })(ce);
      var lC = (function () {
          function t() {}
          return (
            (t.prototype.getItem = function (t) {
              return window.localStorage.getItem(t);
            }),
            (t.prototype.setItem = function (t, e) {
              window.localStorage.setItem(t, e);
            }),
            (t.prototype.removeItem = function (t) {}),
            (t.prototype.clear = function () {}),
            t
          );
        })(),
        cC = (function () {
          function t(t) {
            (this._root = null),
              (this._adWrapper = null),
              (this._countdownText = null),
              (this._breakRewardedData = null),
              (this._breakInterstitialData = null),
              (this._adInterval = null),
              (this._countdown = null),
              (this._root = t),
              (this._adWrapper = new ce()),
              this._root.addChild(this._adWrapper);
          }
          return (
            (t.prototype.break = function (t) {
              "reward" == t.type
                ? ((this._breakRewardedData = t),
                  window.setTimeout(
                    this._onBreakRewardedTimeout.bind(this),
                    null
                  ))
                : ((this._breakInterstitialData = t),
                  window.setTimeout(
                    this._onBreakInterstitialTimeout.bind(this),
                    null
                  ));
            }),
            (t.prototype._onBreakRewardedTimeout = function () {
              this._breakRewardedData.beforeReward(
                this._createRewardedAd.bind(this)
              );
            }),
            (t.prototype._createRewardedAd = function () {
              this._breakRewardedData.beforeAd();
              var t = new To();
              (t.interactive = !0),
                t.beginFill(0, 0.6),
                t.drawRect(0, 0, Jv.app.width, Jv.app.height),
                t.endFill(),
                this._adWrapper.addChild(t),
                (this._countdown = 3),
                (this._countdownText = new Lo(this._countdown.toString(), {
                  fill: 16777215,
                })),
                this._countdownText.anchor.set(0.5),
                this._countdownText.position.set(0.5 * t.width, 0.5 * t.height),
                t.addChild(this._countdownText);
              var e = new To();
              (e.interactive = !0),
                (e.buttonMode = !0),
                e.beginFill(16711680),
                e.drawCircle(0, 0, 25),
                e.endFill(),
                e.position.set(t.width - 50, 100),
                t.addChild(e),
                e.on("pointertap", this._onAdDismissed.bind(this)),
                (this._adInterval = window.setInterval(
                  this._onRewardedAdInterval.bind(this),
                  1e3
                ));
            }),
            (t.prototype._onRewardedAdInterval = function () {
              (this._countdown -= 1),
                (this._countdownText.text = this._countdown.toString()),
                this._countdown < 0 &&
                  (window.clearInterval(this._adInterval),
                  this._adWrapper.removeChildren(),
                  this._breakRewardedData.adBreakDone({
                    breakType: "",
                    breakName: this._breakRewardedData.name,
                    breakFormat: "",
                    breakStatus: "viewed",
                  }));
            }),
            (t.prototype._onAdDismissed = function () {
              window.clearInterval(this._adInterval),
                this._adWrapper.removeChildren(),
                this._breakRewardedData.adBreakDone({
                  breakType: "",
                  breakName: this._breakRewardedData.name,
                  breakFormat: "",
                  breakStatus: "",
                });
            }),
            (t.prototype._onBreakInterstitialTimeout = function () {
              this._createInterstitialAd();
            }),
            (t.prototype._createInterstitialAd = function () {
              this._breakInterstitialData.beforeAd();
              var t = new To();
              (t.interactive = !0),
                t.beginFill(0, 0.6),
                t.drawRect(0, 0, Jv.app.width, Jv.app.height),
                t.endFill(),
                this._adWrapper.addChild(t),
                (this._countdown = 3),
                (this._countdownText = new Lo(this._countdown.toString(), {
                  fill: 16777215,
                })),
                this._countdownText.anchor.set(0.5),
                this._countdownText.position.set(0.5 * t.width, 0.5 * t.height),
                t.addChild(this._countdownText),
                (this._adInterval = window.setInterval(
                  this._onInterstitialAdInterval.bind(this),
                  1e3
                ));
            }),
            (t.prototype._onInterstitialAdInterval = function () {
              (this._countdown -= 1),
                (this._countdownText.text = this._countdown.toString()),
                this._countdown < 0 &&
                  (window.clearInterval(this._adInterval),
                  this._adWrapper.removeChildren(),
                  this._breakInterstitialData.afterAd());
            }),
            t
          );
        })(),
        dC = (function () {
          function t() {}
          return (t.prototype.update = function (t) {}), t;
        })(),
        pC = (function () {
          function t() {
            var t = this;
            (this._pauseCb = null),
              (this._resumeCb = null),
              document.addEventListener("visibilitychange", function () {
                "visible" === document.visibilityState
                  ? t._resumeCb && t._resumeCb()
                  : t._pauseCb && t._pauseCb();
              });
          }
          return (
            (t.prototype.firstFrameReady = function () {}),
            (t.prototype.ready = function () {}),
            (t.prototype.levelComplete = function (t) {}),
            (t.prototype.gameOver = function () {}),
            (t.prototype.onPause = function (t) {
              this._pauseCb = t;
            }),
            (t.prototype.onResume = function (t) {
              this._resumeCb = t;
            }),
            t
          );
        })(),
        _C = (function () {
          function t(t) {
            (this._toggleBtn = null),
              (this._isEnabled = null),
              (this._cb = null),
              (this._isEnabled = !0),
              (this._toggleBtn = new To()),
              this._updateButton(),
              (this._toggleBtn.x = Jv.app.width - 50),
              t.addChild(this._toggleBtn),
              (this._toggleBtn.interactive = !0),
              (this._toggleBtn.buttonMode = !0),
              this._toggleBtn.on(
                "pointertap",
                this._onToggleBtn_Click.bind(this)
              );
          }
          return (
            (t.prototype._onToggleBtn_Click = function () {
              (this._isEnabled = !this._isEnabled),
                this._updateButton(),
                this._cb(this._isEnabled);
            }),
            (t.prototype._updateButton = function () {
              this._toggleBtn.clear(),
                this._toggleBtn.beginFill(this._isEnabled ? 65280 : 16711680),
                this._toggleBtn.drawRect(0, 0, 50, 50),
                this._toggleBtn.endFill();
            }),
            (t.prototype.isEnabled = function () {
              return this._isEnabled;
            }),
            (t.prototype.subscribe = function (t) {
              this._cb = t;
            }),
            t
          );
        })(),
        fC = (function () {
          function t() {
            (this._app = null),
              (this._tickCount = null),
              (this._elapsedTimeForFPS = null),
              (this._lastTimeScale = null),
              (this._curState = null),
              (this._isPrintFPS = null),
              (this._onGlobalMuteUpdated = null),
              (this._kMaxElapsedTime = 1 / 30),
              (Howler.autoSuspend = !1),
              (Hv.Settings.linearSlop = 9375e-7),
              (Hv.Settings.linearSleepTolerance =
                2 * Hv.Settings.linearSleepTolerance),
              (this._tickCount = 0),
              (this._elapsedTimeForFPS = 0),
              (this._isPrintFPS = !1),
              document.head.insertAdjacentHTML(
                "beforeend",
                "<style>@font-face {font-family: 'tilt_warp_regular';src: url('resources/font/TiltWarp-Regular.woff2') format('woff2');font-weight: normal;font-style: normal;}</style>"
              );
            for (var t = dn.shared, e = 0; e < 49; ++e)
              t.add(
                "pre_title_" + e.toString(),
                "resources/img/preloader/title/" + e.toString() + ".png"
              );
            t.add("pre_tower", "resources/img/preloader/tower.png"),
              t.add(
                "pre_loading_bar_base",
                "resources/img/preloader/loading_bar_base.png"
              ),
              t.add(
                "pre_loading_bar",
                "resources/img/preloader/loading_bar.png"
              ),
              t.add("pre_bg", "resources/img/preloader/background.png"),
              t.onComplete.once(this.onPreloaderAssets_Loaded, this),
              t.load();
          }
          return (
            Object.defineProperty(t.prototype, "onGlobalMuteUpdated", {
              get: function () {
                return this._onGlobalMuteUpdated;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.onPreloaderAssets_Loaded = function () {
              var t = this;
              if (
                ((this._onGlobalMuteUpdated = new tb.Signal()),
                (this._app = new Yv()),
                this._app.init(),
                (Jv.main = this),
                (Jv.app = this._app),
                (Jv.audio = new Kv()),
                window.Gamezy24Game)
              )
                this._onGlobalMute_Updated(
                  window.Gamezy24Game.audio.isEnabled()
                ),
                  window.Gamezy24Game.audio.subscribe(
                    this._onGlobalMute_Updated.bind(this)
                  );
              else if (new URLSearchParams(window.location.search).has("dgs")) {
                var e = new uC();
                (window.Gamezy24Game = e),
                  Jv.app.onDummyGamezy24Game(e),
                  this._onGlobalMute_Updated(
                    window.Gamezy24Game.audio.isEnabled()
                  ),
                  window.Gamezy24Game.audio.subscribe(
                    this._onGlobalMute_Updated.bind(this)
                  );
              }
              (Jv.resources = {
                pre_tower: dn.shared.resources.pre_tower,
                pre_bg: dn.shared.resources.pre_bg,
              }),
                (Jv.saved = new aC()),
                Jv.saved.load(),
                Jv.audio.changeVolume(0.6, 1),
                Jv.audio.changeVolume(1, 0),
                Jv.audio.changeVolume(0.6, 2),
                Jv.audio.mute(Jv.saved.data.isMuteMusic, 1),
                Jv.audio.mute(Jv.saved.data.isMuteSfx, 0),
                Jv.audio.mute(Jv.saved.data.isMuteSfx, 2);
              var i = new sC();
              i.init(),
                i.onEnter(),
                i.onComplete.addOnce(this._onPreloader_Complete, this),
                (this._curState = i),
                Uc.ticker.add(this._onTick.bind(this)),
                document.addEventListener("visibilitychange", function () {
                  "visible" === document.visibilityState
                    ? (Jv.audio.resume(1),
                      Jv.audio.resume(0),
                      Jv.audio.resume(2),
                      Uc.globalTimeline.timeScale(
                        null !== t._lastTimeScale ? t._lastTimeScale : 1
                      ))
                    : (Jv.audio.pause(1),
                      Jv.audio.pause(0),
                      Jv.audio.pause(2),
                      (t._lastTimeScale = Uc.globalTimeline.timeScale()),
                      Uc.globalTimeline.timeScale(0));
                });
            }),
            (t.prototype._onPreloader_Complete = function (t) {
              this._curState.onLeave(), this._curState.end();
              var e = new tC();
              (Jv.game = e), e.init(), e.onEnter([t]), (this._curState = e);
            }),
            (t.prototype._onGlobalMute_Updated = function (t) {
              (!Jv.game || (Jv.game && !Jv.game.adManager.isShowingAd)) &&
                Howler.mute(!t),
                this._onGlobalMuteUpdated.dispatch(t);
            }),
            (t.prototype._onTick = function (t, e) {
              var i = 0.001 * e;
              i > this._kMaxElapsedTime && (i = this._kMaxElapsedTime),
                this._curState.onUpdate(i),
                (this._tickCount += 1),
                (this._elapsedTimeForFPS += i),
                this._elapsedTimeForFPS >= 1 &&
                  (this._isPrintFPS && this._app.printFPS(this._tickCount),
                  (this._tickCount = 0),
                  (this._elapsedTimeForFPS = 0)),
                this._app.render();
            }),
            (t.prototype._onGame_Paused = function () {
              Jv.audio.pause(1),
                Jv.audio.pause(0),
                Jv.audio.pause(2),
                (this._lastTimeScale = Uc.globalTimeline.timeScale()),
                Uc.globalTimeline.timeScale(0);
            }),
            (t.prototype._onGame_Resumed = function () {
              Jv.audio.resume(1),
                Jv.audio.resume(0),
                Jv.audio.resume(2),
                Uc.globalTimeline.timeScale(
                  null !== this._lastTimeScale ? this._lastTimeScale : 1
                );
            }),
            t
          );
        })();
      window.onload = function () {
        new fC();
      };
    })();
})();
//# sourceMappingURL=bundle.js.map
